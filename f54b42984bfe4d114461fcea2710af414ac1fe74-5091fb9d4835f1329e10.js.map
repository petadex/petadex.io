{"version":3,"file":"f54b42984bfe4d114461fcea2710af414ac1fe74-5091fb9d4835f1329e10.js","mappings":"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M,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,KAGvjCC,EAAkB,CAC3B,EAAG,IAAK,EAAG,IAAK,EAAG,KAAM,EAAG,KAAM,EAAG,KAAM,EAAG,IAAK,EAAG,KAAM,EAAG,KAAM,EAAG,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,KAA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AAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,IACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,IACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,IACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,GAAI,GACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,IACP,CAAC,GAAI,EAAG,IACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,IACR,CAAC,EAAG,GAAI,GACR,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,GAAI,GACT,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,EAAG,GACR,CAAC,GAAI,EAAG,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,GAAI,GACR,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,CAAC,GAAI,GAAI,IACT,C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I,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC7D,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC9D,CAAC,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC5D,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC7D,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC9D,CAAC,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC7D,CAAC,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC5D,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC7D,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC9D,CAAC,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC7D,CAAC,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC/H,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KAC/H,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KACrI,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,IAAK,KACrI,CAAC,EAAG,IAAK,KACT,CAAC,EAAG,IAAK,KACT,CAAC,EAAG,IAAK,KACT,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACvC,CAAC,EAAG,IAAK,KACT,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClF,CAAC,EAAG,IAAK,IAAK,EAAG,IAAK,KACtB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpF,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpF,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpF,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,KACxB,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,KACpD,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,KACpD,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,KACpD,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,KACpD,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5K,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,KACpD,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5K,CAAC,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,KACpD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,KACvB,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,KAClD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,KAClD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrD,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9G,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9G,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9G,CAAC,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9G,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClD,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACxN,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC1G,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnD,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC3G,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACxG,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzG,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACrb,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACxb,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACvN,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC1G,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC1N,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5G,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5G,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpc,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACxc,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9N,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/G,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/G,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnO,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5G,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACtc,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9N,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5G,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACpc,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnO,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5N,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC7N,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5N,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC7N,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/4B,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC74B,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACt5B,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACp6B,CAAC,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC/b,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,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Q,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,SCAlpCqlG,EAAW,IAAIrlG,IAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,IAAK,KAAM,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,IAAK,MAAO,KAAM,MAAO,MAAO,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,KAAM,MAAO,KAAM,MAAO,MAAO,KAAM,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,KAAM,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,KAAM,MAAO,KAAM,MAAO,MAAO,MAAO,IAAK,MAAO,MAAO,IAAK,MAAO,KAAM,KAAM,MAAO,KAAM,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,QCIj5CslG,EAAY,WACd,MAAMnyE,EAAQhjB,OAAOrK,OAAO,MACtBy/F,EAAU,GAChB,IAAK,IAAIroG,EAAI,IAAIyU,WAAW,GAAIzU,GAAK,IAAIyU,WAAW,GAAIzU,IACpDqoG,EAAQA,EAAQpmG,QAAU4oE,OAAOC,aAAa9qE,GAClD,IAAK,IAAIA,EAAI,IAAIyU,WAAW,GAAIzU,GAAK,IAAIyU,WAAW,GAAIzU,IACpDqoG,EAAQA,EAAQpmG,QAAU4oE,OAAOC,aAAa9qE,GAClD,IAAK,IAAIA,EAAI,IAAIyU,WAAW,GAAIzU,GAAK,IAAIyU,WAAW,GAAIzU,IACpDqoG,EAAQA,EAAQpmG,QAAU4oE,OAAOC,aAAa9qE,GAClD,IAAK,MAAMgO,KAAKq6F,EAAS,CACrBpyE,EAAMjoB,GAAKA,EAAEwsC,cACb,IAAK,MAAMnwC,KAAKg+F,EAAS,CACrBpyE,EAAMjoB,EAAI3D,IAAM2D,EAAI3D,GAAGmwC,cACvB,IAAK,MAAMtuC,KAAKm8F,EACZpyE,EAAMjoB,EAAI3D,EAAI6B,IAAM8B,EAAI3D,EAAI6B,GAAGsuC,aAEvC,CACJ,CACA,OAAOvkB,CACX,CAnBiB,GAoBV,SAASqyE,EAActmG,GAC1B,OAAOomG,EAASpmG,IAAMA,EAAEw4C,aAC5B,CACA,MAAM+tD,EAAyB,IAAI1+F,IAAI,CAAC,CAAC,EAAG,KAAM,CAAC,EAAG,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,KAAM,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,GAAI,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,MAAO,CAAC,IAAK,MAAO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K,EAAG,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,EAAK,GAAI,EAAK,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,GAAI,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,IAAK,GAAM,KAErlGC,EAA0B,CAAE,EAAG,KAAM,EAAG,KAAM,EAAG,IAAK,EAAG,IAAK,EAAG,KAAM,EAAG,IAAK,EAAG,KAAM,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,EAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,KAAM,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK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MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,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AAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dQ,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACxZgB,KAAM,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,OAC9WR,KAAM,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QACrbf,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dQ,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC9PmC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACna1C,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dQ,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC9PgB,KAAM,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC5PvB,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dwB,KAAM,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QACnQG,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3PD,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3PD,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3Pa,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACnaC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACnaC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACnakB,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3dC,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO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ACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAY,EAAI,IAChBA,EAAY,EAAI,IAChBA,EAAY,EAAI,IAChBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAY,EAAI,IAChBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,KACjBA,EAAa,GAAI,IACpB,CAzHD,CAyHGA,IAAaA,EAAW,CAAC,IACrB,MAAMC,EAAe,CACxBn1E,EAAG,WAAYo1E,GAAI,SAAUC,GAAI,UAAWC,GAAI,YAAajyE,EAAG,QAAS8P,EAAG,SAAUw2D,EAAG,WAAYvqI,EAAG,SAAUm2I,EAAG,WAAYC,GAAI,OAAQh6H,GAAI,SAAUi6H,GAAI,YAAaC,GAAI,WAAY9L,GAAI,UAAWptG,EAAG,aAActxD,EAAG,SAAUyqK,GAAI,WAAYC,GAAI,QAASC,EAAG,YAAaC,GAAI,UAAWC,GAAI,WAAYC,GAAI,WAAY77B,EAAG,WAAY87B,GAAI,WAAYC,GAAI,YAAaC,GAAI,OAAQC,GAAI,SAAUC,GAAI,SAAUC,GAAI,SAAUC,GAAI,OAAQC,GAAI,UAAW3M,GAAI,YAAaC,GAAI,UAAW2M,GAAI,WAAYC,GAAI,UAAWC,GAAI,UAAWC,GAAI,WAAYC,GAAI,YAAaC,EAAG,UAAWC,GAAI,YAAaC,GAAI,UAAWC,GAAI,aAAcC,GAAI,aAAcC,GAAI,YAAaC,GAAI,UAAWC,GAAI,YAAaC,GAAI,SAAUC,GAAI,UAAWC,GAAI,SAAUzN,GAAI,MAAOC,GAAI,WAAYyN,GAAI,YAAan7I,EAAG,SAAUo7I,GAAI,QAASC,GAAI,SAAUC,GAAI,SAAUC,GAAI,YAAaC,GAAI,SAAUC,GAAI,eAAgBC,GAAI,YAAaC,GAAI,aAAcC,GAAI,WAAYC,GAAI,WAAYC,GAAI,aAAcC,GAAI,UAAWC,GAAI,aAAcC,GAAI,UAAWC,GAAI,SAAUC,GAAI,UAAWC,GAAI,YAAaC,GAAI,WAAYC,GAAI,UAAWC,GAAI,WAAY1tB,EAAG,UAAW2tB,GAAI,UAAWC,GAAI,SAAUC,GAAI,UAAWC,GAAI,WAAYC,GAAI,OAAQC,GAAI,UAAWC,GAAI,WAAYC,GAAI,OAAQpP,GAAI,UAAWqP,GAAI,WAAYC,GAAI,WAAYC,GAAI,QAASC,GAAI,WAAYC,GAAI,SAAUC,GAAI,WAAYC,GAAI,UAAWC,GAAI,eAAgBjqH,EAAG,UAAWkqH,GAAI,YAAaC,GAAI,YAAaC,GAAI,YAAaC,GAAI,SAAUC,GAAI,YAAaC,GAAI,cAAeC,GAAI,cAAeC,GAAI,UAAWx0F,GAAI,cAAey0F,GAAI,WAAYC,GAAI,aAAcC,GAAI,gBAAiBC,GAAI,UAAWC,GAAI,aAAcC,GAAI,UAAWC,GAAI,UAAWC,GAAI,aAAcC,GAAI,eAAgBC,GAAI,cAAeC,GAAI,cAAeC,GAAI,WAAYC,GAAI,YAAaC,GAAI,YAAaC,GAAI,cAAeC,GAAI,aAAcC,GAAI,aAEpyDC,EAAe,IAAIh2K,IAAI,CAAC,KAAM,KAAM,IAAK,KAAM,KAAM,OAE3D,MAAMi2K,EAAsB,IAAIj2K,IAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,OAEvC,IAAIA,IAAI,CAAC,IAAK,IAAK,IAAK,OAE1B,IAAIA,IAAI,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,MAEhD,IAAIA,IAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,OAE1D,MAAMk2K,EAAuB,IAAIl2K,IAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,OAE/E,IAAIA,IAAI,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,OAE/D,MAAMm2K,EAAW,IAAIn2K,IAAI,CAAC,IAAK,KAAM,KAAM,IAAK,OAChD,SAASo2K,EAAU9zK,GAAW,OAAO6zK,EAAS30K,IAAIc,EAAU,CAC5D,SAAS+zK,EAAkB/zK,GAC9B,MAAMg0K,GAAK,QAAWh0K,GACtB,OAASg0K,GAAM,IAAMA,GAAM,IACtBA,GAAM,IAAMA,GAAM,IAClBA,GAAM,IAAMA,GAAM,IAClBA,GAAM,KAAOA,GAAM,GAC5B,CASO,SAASnzJ,EAAQ7gB,GACpB,OA/BG,SAAuBA,GAAW,OAAO0zK,EAAax0K,IAAIc,EAAU,CA+B/Di0K,CAAcj0K,IA7BnB,SAA8BA,GAAW,OAAO2zK,EAAoBz0K,IAAIc,EAAU,CA8BjFk0K,CAAqBl0K,IAVtB,SAAsBA,GACzB,MAAMg0K,GAAK,QAAWh0K,GACtB,OAAOg0K,GAAM,IAAMA,GAAM,EAC7B,CAQQG,CAAan0K,IAPd,SAAoBA,GACvB,MAAMg0K,GAAK,QAAWh0K,GACtB,OAAOg0K,GAAM,IAAMA,GAAM,GAC7B,CAKQI,CAAWp0K,IACX+zK,EAAkB/zK,IAzBnB,SAA+BA,GAAW,OAAO4zK,EAAqB10K,IAAIc,EAAU,CA0BnFq0K,CAAsBr0K,EAC9B,C,wBCvKO,IAAIw+I,E,gCACX,SAAWA,GAKPA,EAAOz/I,IAJP,SAAa+G,EAAQzH,EAAOwxD,GACxB/pD,EAAOsa,iBAAiBta,EAAO8J,OAASigD,EACxC/pD,EAAOnJ,QAAQmJ,EAAO8J,SAAWvR,CACrC,EAKAmgJ,EAAOz4I,MAHP,SAAeD,GACXA,EAAO8J,MAAQ,CACnB,EAKA4uI,EAAOh7I,OAHP,WACI,MAAO,CAAEoM,MAAO,EAAGjT,QAAS,GAAIyjB,iBAAkB,GACtD,EAUAo+H,EAAO7zI,KARP,SAAcC,EAAK9E,GACf,IAAK,IAAIlL,EAAI,EAAGA,EAAIkL,EAAO8J,QAAShV,EAChCgQ,EAAIjO,QAAQ/B,GAAKkL,EAAOnJ,QAAQ/B,GAChCgQ,EAAIwV,iBAAiBxlB,GAAKkL,EAAOsa,iBAAiBxlB,GAGtD,OADAgQ,EAAIgF,MAAQ9J,EAAO8J,MACZhF,CACX,CAEH,CAvBD,CAuBG4zI,IAAWA,EAAS,CAAC,G,mLCxBxB,SAAS81B,IACL,OAAOA,EAAIvnK,MACf,CCEA,SAASwnK,IACL,OAAOA,EAAIxnK,MACf,CCJO,SAASygB,EAAMgnJ,GAAO,OAAOA,CAAK,CAuLlC,SAAS/mJ,EAAUjlB,EAAOiB,EAAM+f,EAAaoE,GAChD,MAAO,CAAEplB,QAAOghB,cAAaoE,KAAMA,EAAMnkB,OAC7C,CAEO,SAASgrK,EAASzoJ,GAAK,OAAOA,CAAG,CACjC,SAAS0oJ,EAAoBjyK,EAAKkyK,EAAYC,GACjD,MAAMC,EAAc,CAAC,EACrB,IAAK,MAAM7zK,KAAKyB,EAAK,CACjB,IAAIwK,EAAIxK,EAAIzB,GACZiM,EAAIugB,EAAM0G,SAASjnB,EAAG0nK,GACtB1nK,EAAIugB,EAAMqF,OAAO5lB,GAAI2nK,GACrBC,EAAY7zK,GAAKiM,CACrB,CACA,OAAO4nK,CACX,CACO,SAASC,EAAY7vK,GAAK,OAAOA,CAAG,EFrM3C,SAAWqvK,GAMPA,EAAIvnK,KALJ,WACI,MAAMnC,EAAM,CAAC,GAAK,EAAK,GAEvB,OADAA,EAAI,GAAK,EACFA,CACX,EAQA0pK,EAAIthJ,UANJ,SAAmBpoB,EAAKmqK,GAIpB,OAHAnqK,EAAI,IAAMmqK,GAAY,GAAK,KAAO,IAClCnqK,EAAI,IAAMmqK,GAAY,EAAI,KAAO,IACjCnqK,EAAI,IAAiB,IAAXmqK,GAAkB,IACrBnqK,CACX,EAKA0pK,EAAI1gJ,QAHJ,SAAiBohJ,GACb,OAAmB,IAATA,EAAI,IAAa,GAAiB,IAATA,EAAI,IAAa,EAAe,IAATA,EAAI,EAClE,CAEH,CAlBD,CAkBGV,IAAQA,EAAM,CAAC,ICdlB,SAAWC,GAMPA,EAAIxnK,KALJ,WACI,MAAMnC,EAAM,CAAC,GAAK,EAAK,GAEvB,OADAA,EAAI,GAAK,EACFA,CACX,EAEA,MAAMqqK,EAAOX,IAKbC,EAAIvhJ,UAJJ,SAAmBpoB,EAAKqoB,GAEpB,OADAqhJ,EAAIthJ,UAAUiiJ,EAAMhiJ,GACbshJ,EAAIxgJ,QAAQnpB,EAAKqqK,EAC5B,EAMAV,EAAI3gJ,QAJJ,SAAiBshJ,GAEb,OADAhiJ,EAAM+hJ,EAAMC,GACLZ,EAAI1gJ,QAAQqhJ,EACvB,EA+BAV,EAAIxgJ,QA7BJ,SAAiBnpB,EAAKoqK,GAClB,MAAO7uK,EAAGyP,EAAGzT,GAAK6yK,EACZG,EAASpkK,KAAKC,IAAI7K,EAAGyP,EAAGzT,GACxBizK,EAASrkK,KAAKI,IAAIhL,EAAGyP,EAAGzT,GACxB8C,GAAKmwK,EAASD,GAAU,EAC9B,IAAIv4K,EAAI,EAAGoB,EAAI,EAsBf,OArBIo3K,IAAWD,GACXv4K,EAAI,EACJoB,EAAI2U,OAAOigB,KAGXh2B,EAAIqI,EAAI,IACDmwK,EAASD,IAAWC,EAASD,IAC7BC,EAASD,IAAW,EAAIC,EAASD,GAExChvK,IAAMivK,EACNp3K,GAAK4X,EAAIzT,IAAMizK,EAASD,GACnBv/J,IAAMw/J,EACXp3K,EAAI,GAAKmE,EAAIgE,IAAMivK,EAASD,GACvBhzK,IAAMizK,IACXp3K,EAAI,GAAKmI,EAAIyP,IAAMw/J,EAASD,IAChCn3K,GAAK,GACDA,EAAI,IACJA,GAAK,KACT4M,EAAI,GAAK5M,EACT4M,EAAI,GAAKhO,EACTgO,EAAI,GAAK3F,EACF2F,CACX,EAEA,MAAMyqK,EAAM,CAAC,EAAG,EAAG,GACb72D,EAAK,CAAC,EAAG,EAAG,GAClB,SAAStrF,EAAMtoB,EAAKsqK,GAChB,MAAOl3K,EAAGpB,EAAGqI,GAAKiwK,EAClB,IAAI/uK,EAAGyP,EAAGzT,EACV,GAAU,IAANvF,EACAuJ,EAAIyP,EAAIzT,EAAI8C,MAEX,CACD,MAAMqwK,EAAKD,EACLpoK,EAAIuxG,EACJh1B,EAAKvkF,EAAI,GAAMA,GAAK,EAAIrI,GAAKqI,EAAIrI,EAAIqI,EAAIrI,EACzC2mD,EAAK,EAAIt+C,EAAIukF,EACb+rF,EAAKv3K,EAAI,IACfs3K,EAAG,GAAKC,EAAK,EAAI,EACjBD,EAAG,GAAKC,EACRD,EAAG,GAAKC,EAAK,EAAI,EACjB,IAAK,IAAI36K,EAAI,EAAGA,EAAI,EAAGA,IACf06K,EAAG16K,GAAK,IACR06K,EAAG16K,IAAM,GACT06K,EAAG16K,GAAK,IACR06K,EAAG16K,IAAM,GACT,EAAI06K,EAAG16K,GAAK,EACZqS,EAAErS,GAAK2oD,EAAiB,GAAXimC,EAAKjmC,GAAU+xH,EAAG16K,GAC1B,EAAI06K,EAAG16K,GAAK,EACjBqS,EAAErS,GAAK4uF,EACF,EAAI8rF,EAAG16K,GAAK,EACjBqS,EAAErS,GAAK2oD,GAAMimC,EAAKjmC,IAAO,EAAI,EAAI+xH,EAAG16K,IAAM,EAE1CqS,EAAErS,GAAK2oD,EAEfp9C,EAAI8G,EAAE,GACN2I,EAAI3I,EAAE,GACN9K,EAAI8K,EAAE,EACV,CAIA,OAHArC,EAAI,GAAKzE,EACTyE,EAAI,GAAKgL,EACThL,EAAI,GAAKzI,EACFyI,CACX,CACA2pK,EAAIrhJ,MAAQA,EAwCZqhJ,EAAI/wH,YAvCJ,SAAqB54C,EAAK4qK,EAAMC,EAAM/mK,GAClC,MAAMgnK,EAAOF,EAAMG,EAAOF,GACnBG,EAAMC,EAAMC,GAAQJ,GACpBK,EAAMC,EAAMC,GAAQN,EAC3B,IAAIO,EAAKC,EAAKC,EACTxjK,MAAMgjK,IAAUhjK,MAAMmjK,GAajBnjK,MAAMgjK,GAKNhjK,MAAMmjK,GAMZI,EAAMxjK,OAAOigB,KALbujJ,EAAMJ,EACQ,IAATD,GAAuB,IAATA,IACfI,EAAMF,KAPVG,EAAMP,EACQ,IAATK,GAAuB,IAATA,IACfC,EAAML,KAbNO,EADAL,EAAOH,GAAQG,EAAOH,EAAO,IACxBG,GAAQH,EAAO,KAEfG,EAAOH,GAAQA,EAAOG,EAAO,IAC7BA,EAAO,IAAMH,EAGbG,EAAOH,EAEhBO,EAAMP,EAAOlnK,EAAI0nK,QAeTvpK,IAARqpK,IACAA,EAAML,EAAOnnK,GAAKsnK,EAAOH,IAC7B,MAAMQ,EAAMP,EAAOpnK,GAAKunK,EAAOH,GAI/B,OAHAlrK,EAAI,GAAKurK,EACTvrK,EAAI,GAAKsrK,EACTtrK,EAAI,GAAKyrK,EACFzrK,CACX,CAEH,CAjID,CAiIG2pK,IAAQA,EAAM,CAAC,ICrIlB,SAAW/mJ,GAiCP,SAASuG,EAAQ5tB,EAAGyP,EAAGzT,GACnB,OAASgE,GAAK,GAAOyP,GAAK,EAAKzT,CACnC,CAEA,SAASm0K,EAAkBnwK,EAAGyP,EAAGzT,GAC7B,OAAc,IAAJgE,GAAY,GAAY,IAAJyP,GAAY,EAAU,IAAJzT,CACpD,CAnCAqrB,EAAM+oJ,QAHN,SAAiBxB,GACb,MAAO,OAAOA,GAAY,GAAK,QAAQA,GAAY,EAAI,QAAmB,IAAXA,IACnE,EAKAvnJ,EAAMgpJ,WAHN,SAAoBzB,GAChB,MAAO,KAAO,SAAWA,EAASjmK,SAAS,KAAKuI,OAAO,EAC3D,EAKAmW,EAAMipJ,YAHN,SAAqB1B,GACjB,MAAO,MAAQ,SAAWA,EAASjmK,SAAS,KAAKuI,OAAO,EAC5D,EAKAmW,EAAMkpJ,YAHN,SAAqB3B,GACjB,MAAO,QAAQvnJ,EAAM0F,MAAM6hJ,GAAUp3I,KAAK,OAC9C,EAKAnQ,EAAM0F,MAHN,SAAe6hJ,GACX,MAAO,CAACA,GAAY,GAAK,IAAKA,GAAY,EAAI,IAAgB,IAAXA,EACvD,EAKAvnJ,EAAMmpJ,gBAHN,SAAyB5B,GACrB,MAAO,EAAEA,GAAY,GAAK,KAAO,KAAMA,GAAY,EAAI,KAAO,KAAiB,IAAXA,GAAkB,IAC1F,EAKAvnJ,EAAMopJ,aAHN,SAAsBh6K,GAClB,OAAOuxC,SAASvxC,EAAEo5G,QAAQ,IAAK,MACnC,EAKAxoF,EAAMqpJ,cAHN,SAAuBj6K,GACnB,OAAOuxC,SAASvxC,EACpB,EAKA4wB,EAAMuG,QAAUA,EAIhBvG,EAAM8oJ,kBAAoBA,EAI1B9oJ,EAAM3a,UAHN,SAAmB9J,EAAOlC,GACtB,OAAOktB,EAAQhrB,EAAMlC,GAASkC,EAAMlC,EAAS,GAAIkC,EAAMlC,EAAS,GACpE,EAKA2mB,EAAMspJ,oBAHN,SAA6B/tK,EAAOlC,GAChC,OAAOyvK,EAAkBvtK,EAAMlC,GAASkC,EAAMlC,EAAS,GAAIkC,EAAMlC,EAAS,GAC9E,EAQA2mB,EAAMupJ,mBANN,SAA4BnoE,GACxB,MAAqB,iBAAVA,EACAA,EAEAA,EAAM,EACrB,EASAphF,EAAMxmB,QANN,SAAiB+tK,EAAUhsK,EAAOlC,GAI9B,OAHAkC,EAAMlC,GAAWkuK,GAAY,GAAK,IAClChsK,EAAMlC,EAAS,GAAMkuK,GAAY,EAAI,IACrChsK,EAAMlC,EAAS,GAAiB,IAAXkuK,EACdhsK,CACX,EASAykB,EAAM22B,kBANN,SAA2B4wH,EAAUhsK,EAAOlC,GAIxC,OAHAkC,EAAMlC,IAAWkuK,GAAY,GAAK,KAAO,IACzChsK,EAAMlC,EAAS,IAAMkuK,GAAY,EAAI,KAAO,IAC5ChsK,EAAMlC,EAAS,IAAiB,IAAXkuK,GAAkB,IAChChsK,CACX,EASAykB,EAAM+5C,OANN,SAAgB38D,EAAKmqK,GAIjB,OAHAnqK,EAAI,GAAMmqK,GAAY,GAAK,IAC3BnqK,EAAI,GAAMmqK,GAAY,EAAI,IAC1BnqK,EAAI,GAAiB,IAAXmqK,EACHnqK,CACX,EASA4iB,EAAMwpJ,iBANN,SAA0BpsK,EAAKmqK,GAI3B,OAHAnqK,EAAI,IAAMmqK,GAAY,GAAK,KAAO,IAClCnqK,EAAI,IAAMmqK,GAAY,EAAI,KAAO,IACjCnqK,EAAI,IAAiB,IAAXmqK,GAAkB,IACrBnqK,CACX,EAeA4iB,EAAMg2B,YAZN,SAAqBI,EAAIC,EAAIn1C,GACzB,MAAMwoD,EAAKtT,GAAM,GAAK,IAChBqzH,EAAKrzH,GAAM,EAAI,IACf3vC,EAAU,IAAL2vC,EAOX,OAHUsT,IAHCrT,GAAM,GAAK,KAGDqT,GAAMxoD,GAGb,GAFJuoK,IAHCpzH,GAAM,EAAI,KAGAozH,GAAMvoK,GAED,EADhBuF,IAHM,IAAL4vC,GAGU5vC,GAAMvF,CAE/B,EAEA,MAAMwoK,EAAmB3C,EAAIxnK,OACvBoqK,EAAmB5C,EAAIxnK,OAS7B,SAASirB,EAAO/qB,GACZ,MAAM9G,EAAI8G,GAAK,GAAK,IAGpB,OAAO9G,KAFG8G,GAAK,EAAI,MAED9G,KADJ,IAAJ8G,EAEd,CANAugB,EAAM4pJ,eANN,SAAwBxzH,EAAIC,EAAIn1C,GAC5B,MAAM2oK,EAAO9C,EAAIvhJ,UAAUkkJ,EAAkBtzH,GACvC0zH,EAAO/C,EAAIvhJ,UAAUmkJ,EAAkBtzH,GAE7C,OADA0wH,EAAI/wH,YAAY6zH,EAAMA,EAAMC,EAAM5oK,GAC3B6lK,EAAI3gJ,QAAQyjJ,EACvB,EAQA7pJ,EAAMwK,OAASA,EACf,MAAM/D,EAAiB,CAAC,EAAG,EAAG,GAC9B,SAASC,EAASjnB,EAAG6lB,GACjB,OAAKkF,EAAO/qB,IAEZ,IAAI+lB,UAAUiB,EAAgBhnB,GACvB,IAAI2mB,QAAQ,IAAIM,SAASD,EAAgBA,EAAgBnB,KAFrD7lB,CAGf,CACAugB,EAAM0G,SAAWA,EAIjB1G,EAAM2G,WAHN,SAAoBlnB,EAAG6lB,GACnB,OAAOoB,EAASjnB,GAAI6lB,EACxB,EAEA,MAAMwF,EAAe,CAAC,EAAG,EAAG,GAC5B,SAASzF,EAAO5lB,EAAG6lB,GAEf,OADA,IAAIE,UAAUsF,EAAcrrB,GACrB,IAAI2mB,QAAQ,IAAIf,OAAOyF,EAAcA,EAAcxF,GAC9D,CAMA,SAASykJ,EAAWt1K,GAChB,OAAOA,GAAK,OAAUA,EAAI,MAAQ8O,KAAKyjB,KAAKvyB,EAAI,MAAS,MAAO,IACpE,CAKA,SAASu1K,EAAUvqK,GAIf,MAAO,MAHGsqK,GAAYtqK,GAAK,GAAK,KAAO,KAGnB,MAFVsqK,GAAYtqK,GAAK,EAAI,KAAO,KAEL,MADvBsqK,GAAgB,IAAJtqK,GAAW,IAErC,CAcA,SAASwqK,EAAcxqK,GACnB,OAAQA,EAAI,OAAe,YAAJA,EAAmB8D,KAAKyjB,IAAQ,YAAJvnB,EAAmB,YAAc,IACxF,CAKA,SAASyqK,EAAczqK,GACnB,OAAQA,EAAI,SAAiB,MAAJA,EAAY,MAAS8D,KAAKyjB,IAAIvnB,EAAG,QAAY,IAC1E,CAxCAugB,EAAMqF,OAASA,EAIfrF,EAAMwG,QAHN,SAAiB/mB,EAAG6lB,GAChB,OAAOD,EAAO5lB,GAAI6lB,EACtB,EAeAtF,EAAMgqJ,UAAYA,EAUlBhqJ,EAAMmqJ,SALN,SAAkBz1K,EAAGC,GACjB,MAAMy1K,EAAKJ,EAAUt1K,GACfy+E,EAAK62F,EAAUr1K,GACrB,OAAOy1K,EAAKj3F,GAAMi3F,EAAK,MAASj3F,EAAK,MAASA,EAAK,MAASi3F,EAAK,IACrE,EAUApqJ,EAAMqqJ,aAHN,SAAsB5qK,GAClB,OAAOqpK,EAAkBmB,GAAexqK,GAAK,GAAK,KAAO,KAAMwqK,GAAexqK,GAAK,EAAI,KAAO,KAAMwqK,GAAmB,IAAJxqK,GAAW,KAClI,EAQAugB,EAAMsqJ,aAHN,SAAsB7qK,GAClB,OAAOqpK,EAAkBoB,GAAezqK,GAAK,GAAK,KAAO,KAAMyqK,GAAezqK,GAAK,EAAI,KAAO,KAAMyqK,GAAmB,IAAJzqK,GAAW,KAClI,CAEH,CArLD,CAqLGugB,IAAUA,EAAQ,CAAC,G,6FC1KtB,MAAMuqJ,EAAY1pI,SACX,SAASvgB,IACZ,OAAOA,EAAK/gB,MAChB,EACA,SAAW+gB,GACP,SAAS/gB,IACL,MAAMnC,EAAM,CAAC,GAAK,EAAK,GAEvB,OADAA,EAAI,GAAK,EACFA,CACX,CAmDA,SAASpH,EAAOvB,EAAGqQ,EAAGC,GAClB,MAAM3H,EAAMmC,IAIZ,OAHAnC,EAAI,GAAK3I,EACT2I,EAAI,GAAK0H,EACT1H,EAAI,GAAK2H,EACF3H,CACX,CAiBA,SAASD,EAAKC,EAAK1I,GAIf,OAHA0I,EAAI,GAAK1I,EAAE,GACX0I,EAAI,GAAK1I,EAAE,GACX0I,EAAI,GAAK1I,EAAE,GACJ0I,CACX,CAEA,SAAS7L,EAAI6L,EAAK1I,EAAGC,GAIjB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GACXyI,CACX,CAEA,SAAS6yC,EAAI7yC,EAAK1I,EAAGC,GAIjB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GACXyI,CACX,CAgBA,SAASW,EAAMX,EAAK1I,EAAGC,GAInB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAChByI,EAAI,GAAK1I,EAAE,GAAKC,EAChByI,EAAI,GAAK1I,EAAE,GAAKC,EACTyI,CACX,CAGA,SAASkgF,EAAYlgF,EAAK1I,EAAGC,EAAGoJ,GAI5B,OAHAX,EAAI,GAAK1I,EAAE,GAAMC,EAAE,GAAKoJ,EACxBX,EAAI,GAAK1I,EAAE,GAAMC,EAAE,GAAKoJ,EACxBX,EAAI,GAAK1I,EAAE,GAAMC,EAAE,GAAKoJ,EACjBX,CACX,CAuHA,SAASsnD,EAAiBhwD,GACtB,MAAMD,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAChC,OAAOD,EAAIA,EAAIqQ,EAAIA,EAAIC,EAAIA,CAC/B,CASA,SAASylK,EAAOptK,EAAK1I,GAIjB,OAHA0I,EAAI,IAAM1I,EAAE,GACZ0I,EAAI,IAAM1I,EAAE,GACZ0I,EAAI,IAAM1I,EAAE,GACL0I,CACX,CAYA,SAASM,EAAUN,EAAK1I,GACpB,MAAMD,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAChC,IAAIxD,EAAMuD,EAAIA,EAAIqQ,EAAIA,EAAIC,EAAIA,EAO9B,OANI7T,EAAM,IACNA,EAAM,EAAIqS,KAAKkC,KAAKvU,GACpBkM,EAAI,GAAK1I,EAAE,GAAKxD,EAChBkM,EAAI,GAAK1I,EAAE,GAAKxD,EAChBkM,EAAI,GAAK1I,EAAE,GAAKxD,GAEbkM,CACX,CAEA,SAAS4I,EAAItR,EAAGC,GACZ,OAAOD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,EAChD,CAEA,SAASk9C,EAAMz0C,EAAK1I,EAAGC,GACnB,MAAM09C,EAAK39C,EAAE,GAAI49C,EAAK59C,EAAE,GAAI69C,EAAK79C,EAAE,GAAI89C,EAAK79C,EAAE,GAAI89C,EAAK99C,EAAE,GAAI+9C,EAAK/9C,EAAE,GAIpE,OAHAyI,EAAI,GAAKk1C,EAAKI,EAAKH,EAAKE,EACxBr1C,EAAI,GAAKm1C,EAAKC,EAAKH,EAAKK,EACxBt1C,EAAI,GAAKi1C,EAAKI,EAAKH,EAAKE,EACjBp1C,CACX,CAnSAkjB,EAAK/gB,KAAOA,EAQZ+gB,EAAK/iB,MAPL,SAAe7I,GACX,MAAM0I,EAAMmC,IAIZ,OAHAnC,EAAI,GAAK1I,EAAE,GACX0I,EAAI,GAAK1I,EAAE,GACX0I,EAAI,GAAK1I,EAAE,GACJ0I,CACX,EAKAkjB,EAAKugB,SAHL,SAAkBnsC,GACd,OAAO61K,EAAU71K,EAAE,KAAO61K,EAAU71K,EAAE,KAAO61K,EAAU71K,EAAE,GAC7D,EAKA4rB,EAAKogB,UAHL,SAAmBhsC,GACf,OAAOyQ,OAAOu7B,UAAUhsC,EAAE,KAAOyQ,OAAOu7B,UAAUhsC,EAAE,KAAOyQ,OAAOu7B,UAAUhsC,EAAE,GAClF,EAKA4rB,EAAKpb,OAHL,SAAgBxQ,GACZ,OAAOyQ,OAAOC,MAAM1Q,EAAE,KAAOyQ,OAAOC,MAAM1Q,EAAE,KAAOyQ,OAAOC,MAAM1Q,EAAE,GACtE,EAQA4rB,EAAKirE,OANL,SAAgBnuF,GAIZ,OAHAA,EAAI,GAAKgoB,IACThoB,EAAI,GAAKgoB,IACThoB,EAAI,GAAKgoB,IACFhoB,CACX,EAKAkjB,EAAKikC,QAHL,SAAiBluD,GACb,OAAOL,EAAOK,EAAE5B,EAAG4B,EAAEyO,EAAGzO,EAAE0O,EAC9B,EAKAub,EAAKkkC,MAHL,SAAenuD,GACX,MAAO,CAAE5B,EAAG4B,EAAE,GAAIyO,EAAGzO,EAAE,GAAI0O,EAAG1O,EAAE,GACpC,EAQAiqB,EAAKjb,UANL,SAAmBhP,EAAGkF,EAAOlC,GAIzB,OAHAhD,EAAE,GAAKkF,EAAMlC,EAAS,GACtBhD,EAAE,GAAKkF,EAAMlC,EAAS,GACtBhD,EAAE,GAAKkF,EAAMlC,EAAS,GACfhD,CACX,EAQAiqB,EAAK9mB,QANL,SAAiBnD,EAAG+G,EAAK/D,GAIrB,OAHA+D,EAAI/D,EAAS,GAAKhD,EAAE,GACpB+G,EAAI/D,EAAS,GAAKhD,EAAE,GACpB+G,EAAI/D,EAAS,GAAKhD,EAAE,GACb+G,CACX,EASAkjB,EAAKtqB,OAASA,EAQdsqB,EAAK86B,QAPL,SAAiB7/C,GACb,MAAM6B,EAAMmC,IAIZ,OAHAnC,EAAI,GAAK7B,EAAM,GACf6B,EAAI,GAAK7B,EAAM,GACf6B,EAAI,GAAK7B,EAAM,GACR6B,CACX,EAQAkjB,EAAKppB,IANL,SAAakG,EAAK3I,EAAGqQ,EAAGC,GAIpB,OAHA3H,EAAI,GAAK3I,EACT2I,EAAI,GAAK0H,EACT1H,EAAI,GAAK2H,EACF3H,CACX,EAQAkjB,EAAKnjB,KAAOA,EAOZmjB,EAAK/uB,IAAMA,EAOX+uB,EAAK2vB,IAAMA,EAOX3vB,EAAKnJ,IANL,SAAa/Z,EAAK1I,EAAGC,GAIjB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GACXyI,CACX,EAQAkjB,EAAKmkC,IANL,SAAarnD,EAAK1I,EAAGC,GAIjB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GAClByI,EAAI,GAAK1I,EAAE,GAAKC,EAAE,GACXyI,CACX,EAQAkjB,EAAKviB,MAAQA,EAQbuiB,EAAKg9D,YAAcA,EAQnBh9D,EAAK4zE,YANL,SAAqB92F,EAAK1I,EAAGC,EAAGoJ,GAI5B,OAHAX,EAAI,GAAK1I,EAAE,GAAMC,EAAE,GAAKoJ,EACxBX,EAAI,GAAK1I,EAAE,GAAMC,EAAE,GAAKoJ,EACxBX,EAAI,GAAK1I,EAAE,GAAMC,EAAE,GAAKoJ,EACjBX,CACX,EAQAkjB,EAAKswB,UANL,SAAmBxzC,EAAK1I,EAAGC,GAIvB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAChByI,EAAI,GAAK1I,EAAE,GAAKC,EAChByI,EAAI,GAAK1I,EAAE,GAAKC,EACTyI,CACX,EAQAkjB,EAAKqwB,UANL,SAAmBvzC,EAAK1I,EAAGC,GAIvB,OAHAyI,EAAI,GAAK1I,EAAE,GAAKC,EAChByI,EAAI,GAAK1I,EAAE,GAAKC,EAChByI,EAAI,GAAK1I,EAAE,GAAKC,EACTyI,CACX,EAWAkjB,EAAK5a,MANL,SAAetI,EAAK1I,GAIhB,OAHA0I,EAAI,GAAKmG,KAAKmC,MAAMhR,EAAE,IACtB0I,EAAI,GAAKmG,KAAKmC,MAAMhR,EAAE,IACtB0I,EAAI,GAAKmG,KAAKmC,MAAMhR,EAAE,IACf0I,CACX,EAWAkjB,EAAK3a,KANL,SAAcvI,EAAK1I,GAIf,OAHA0I,EAAI,GAAKmG,KAAKoC,KAAKjR,EAAE,IACrB0I,EAAI,GAAKmG,KAAKoC,KAAKjR,EAAE,IACrB0I,EAAI,GAAKmG,KAAKoC,KAAKjR,EAAE,IACd0I,CACX,EAWAkjB,EAAK1a,MANL,SAAexI,EAAK1I,GAIhB,OAHA0I,EAAI,GAAKmG,KAAKqC,MAAMlR,EAAE,IACtB0I,EAAI,GAAKmG,KAAKqC,MAAMlR,EAAE,IACtB0I,EAAI,GAAKmG,KAAKqC,MAAMlR,EAAE,IACf0I,CACX,EAWAkjB,EAAKwgE,MANL,SAAe1jF,EAAK1I,GAIhB,OAHA0I,EAAI,GAAKmG,KAAKu9E,MAAMpsF,EAAE,IACtB0I,EAAI,GAAKmG,KAAKu9E,MAAMpsF,EAAE,IACtB0I,EAAI,GAAKmG,KAAKu9E,MAAMpsF,EAAE,IACf0I,CACX,EAWAkjB,EAAK1Z,IANL,SAAaxJ,EAAK1I,GAId,OAHA0I,EAAI,GAAKmG,KAAKqD,IAAIlS,EAAE,IACpB0I,EAAI,GAAKmG,KAAKqD,IAAIlS,EAAE,IACpB0I,EAAI,GAAKmG,KAAKqD,IAAIlS,EAAE,IACb0I,CACX,EAWAkjB,EAAK9c,IANL,SAAapG,EAAK1I,EAAGC,GAIjB,OAHAyI,EAAI,GAAKmG,KAAKC,IAAI9O,EAAE,GAAIC,EAAE,IAC1ByI,EAAI,GAAKmG,KAAKC,IAAI9O,EAAE,GAAIC,EAAE,IAC1ByI,EAAI,GAAKmG,KAAKC,IAAI9O,EAAE,GAAIC,EAAE,IACnByI,CACX,EAWAkjB,EAAK3c,IANL,SAAavG,EAAK1I,EAAGC,GAIjB,OAHAyI,EAAI,GAAKmG,KAAKI,IAAIjP,EAAE,GAAIC,EAAE,IAC1ByI,EAAI,GAAKmG,KAAKI,IAAIjP,EAAE,GAAIC,EAAE,IAC1ByI,EAAI,GAAKmG,KAAKI,IAAIjP,EAAE,GAAIC,EAAE,IACnByI,CACX,EAWAkjB,EAAKi7D,MANL,SAAen+E,EAAK1I,EAAG8O,EAAKG,GAIxB,OAHAvG,EAAI,GAAKmG,KAAKI,IAAIH,EAAI,GAAID,KAAKC,IAAIG,EAAI,GAAIjP,EAAE,KAC7C0I,EAAI,GAAKmG,KAAKI,IAAIH,EAAI,GAAID,KAAKC,IAAIG,EAAI,GAAIjP,EAAE,KAC7C0I,EAAI,GAAKmG,KAAKI,IAAIH,EAAI,GAAID,KAAKC,IAAIG,EAAI,GAAIjP,EAAE,KACtC0I,CACX,EAMAkjB,EAAK9a,SAJL,SAAkB9Q,EAAGC,GACjB,MAAMF,EAAIE,EAAE,GAAKD,EAAE,GAAIoQ,EAAInQ,EAAE,GAAKD,EAAE,GAAIqQ,EAAIpQ,EAAE,GAAKD,EAAE,GACrD,OAAO6O,KAAKkC,KAAKhR,EAAIA,EAAIqQ,EAAIA,EAAIC,EAAIA,EACzC,EAMAub,EAAKza,gBAJL,SAAyBnR,EAAGC,GACxB,MAAMF,EAAIE,EAAE,GAAKD,EAAE,GAAIoQ,EAAInQ,EAAE,GAAKD,EAAE,GAAIqQ,EAAIpQ,EAAE,GAAKD,EAAE,GACrD,OAAOD,EAAIA,EAAIqQ,EAAIA,EAAIC,EAAIA,CAC/B,EAMAub,EAAKhjB,UAJL,SAAmB5I,GACf,MAAMD,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAChC,OAAO6O,KAAKkC,KAAKhR,EAAIA,EAAIqQ,EAAIA,EAAIC,EAAIA,EACzC,EAMAub,EAAKokC,iBAAmBA,EAIxBpkC,EAAKqkC,aAHL,SAAsBvnD,EAAK1I,EAAG+C,GAC1B,OAAOsG,EAAMX,EAAKM,EAAUN,EAAK1I,GAAI+C,EACzC,EAWA6oB,EAAKkqJ,OAASA,EAUdlqJ,EAAKra,QANL,SAAiB7I,EAAK1I,GAIlB,OAHA0I,EAAI,GAAK,EAAM1I,EAAE,GACjB0I,EAAI,GAAK,EAAM1I,EAAE,GACjB0I,EAAI,GAAK,EAAM1I,EAAE,GACV0I,CACX,EAaAkjB,EAAK5iB,UAAYA,EAIjB4iB,EAAKta,IAAMA,EAQXsa,EAAKuxB,MAAQA,EAWbvxB,EAAKk7D,KAPL,SAAcp+E,EAAK1I,EAAGC,EAAGuM,GACrB,MAAMmxC,EAAK39C,EAAE,GAAI49C,EAAK59C,EAAE,GAAI69C,EAAK79C,EAAE,GAInC,OAHA0I,EAAI,GAAKi1C,EAAKnxC,GAAKvM,EAAE,GAAK09C,GAC1Bj1C,EAAI,GAAKk1C,EAAKpxC,GAAKvM,EAAE,GAAK29C,GAC1Bl1C,EAAI,GAAKm1C,EAAKrxC,GAAKvM,EAAE,GAAK49C,GACnBn1C,CACX,EAEA,MAAMqtK,EAAclrK,IAsJpB,SAASstC,EAAMn4C,EAAGC,GACd,MAAM+1K,EAAcnnK,KAAKkC,KAAKi/C,EAAiBhwD,GAAKgwD,EAAiB/vD,IACrE,GAAoB,IAAhB+1K,EACA,OAAOnnK,KAAKutC,GAAK,EACrB,MAAM65H,EAAQ3kK,EAAItR,EAAGC,GAAK+1K,EAC1B,OAAOnnK,KAAK8tC,MAAK,QAAOs5H,GAAQ,EAAG,GACvC,CApJArqJ,EAAKssB,MAPL,SAAexvC,EAAK1I,EAAGC,EAAGuM,GACtB,MAAMzF,GAAI,QAAOuK,EAAItR,EAAGC,IAAK,EAAG,GAC1Bg2K,EAAQpnK,KAAK8tC,KAAK51C,GAAKyF,EAG7B,OAFAo8E,EAAYmtF,EAAa91K,EAAGD,GAAI+G,GAChCiC,EAAU+sK,EAAaA,GAChBl5K,EAAI6L,EAAKW,EAAMX,EAAK1I,EAAG6O,KAAKqnB,IAAI+/I,IAAS5sK,EAAM0sK,EAAaA,EAAalnK,KAAKsnB,IAAI8/I,IAC7F,EAgBArqJ,EAAKsqJ,QAXL,SAAiBxtK,EAAK1I,EAAGC,EAAG8K,EAAGhE,EAAGyF,GAC9B,MAAM2pK,EAAe3pK,EAAIA,EACnB4pK,EAAUD,GAAgB,EAAI3pK,EAAI,GAAK,EACvC6pK,EAAUF,GAAgB3pK,EAAI,GAAKA,EACnC8pK,EAAUH,GAAgB3pK,EAAI,GAC9B+pK,EAAUJ,GAAgB,EAAI,EAAI3pK,GAIxC,OAHA9D,EAAI,GAAK1I,EAAE,GAAKo2K,EAAUn2K,EAAE,GAAKo2K,EAAUtrK,EAAE,GAAKurK,EAAUvvK,EAAE,GAAKwvK,EACnE7tK,EAAI,GAAK1I,EAAE,GAAKo2K,EAAUn2K,EAAE,GAAKo2K,EAAUtrK,EAAE,GAAKurK,EAAUvvK,EAAE,GAAKwvK,EACnE7tK,EAAI,GAAK1I,EAAE,GAAKo2K,EAAUn2K,EAAE,GAAKo2K,EAAUtrK,EAAE,GAAKurK,EAAUvvK,EAAE,GAAKwvK,EAC5D7tK,CACX,EAkBAkjB,EAAK4qJ,OAbL,SAAgB9tK,EAAK1I,EAAGC,EAAG8K,EAAGhE,EAAGyF,GAC7B,MAAMiqK,EAAgB,EAAIjqK,EACpBkqK,EAAwBD,EAAgBA,EACxCN,EAAe3pK,EAAIA,EACnB4pK,EAAUM,EAAwBD,EAClCJ,EAAU,EAAI7pK,EAAIkqK,EAClBJ,EAAU,EAAIH,EAAeM,EAC7BF,EAAUJ,EAAe3pK,EAI/B,OAHA9D,EAAI,GAAK1I,EAAE,GAAKo2K,EAAUn2K,EAAE,GAAKo2K,EAAUtrK,EAAE,GAAKurK,EAAUvvK,EAAE,GAAKwvK,EACnE7tK,EAAI,GAAK1I,EAAE,GAAKo2K,EAAUn2K,EAAE,GAAKo2K,EAAUtrK,EAAE,GAAKurK,EAAUvvK,EAAE,GAAKwvK,EACnE7tK,EAAI,GAAK1I,EAAE,GAAKo2K,EAAUn2K,EAAE,GAAKo2K,EAAUtrK,EAAE,GAAKurK,EAAUvvK,EAAE,GAAKwvK,EAC5D7tK,CACX,EAQAkjB,EAAK27D,gBANL,SAAyB7+E,EAAK1I,EAAGC,EAAG8K,EAAGyB,GAInC,OAHA9D,EAAI,IAAK,QAAiB1I,EAAE,GAAIC,EAAE,GAAI8K,EAAE,GAAIyB,GAC5C9D,EAAI,IAAK,QAAiB1I,EAAE,GAAIC,EAAE,GAAI8K,EAAE,GAAIyB,GAC5C9D,EAAI,IAAK,QAAiB1I,EAAE,GAAIC,EAAE,GAAI8K,EAAE,GAAIyB,GACrC9D,CACX,EAWAkjB,EAAKo7D,OANL,SAAgBt+E,EAAK1I,EAAGC,EAAG8K,EAAGhE,EAAGyF,EAAG26E,GAIhC,OAHAz+E,EAAI,IAAK,QAAQ1I,EAAE,GAAIC,EAAE,GAAI8K,EAAE,GAAIhE,EAAE,GAAIyF,EAAG26E,GAC5Cz+E,EAAI,IAAK,QAAQ1I,EAAE,GAAIC,EAAE,GAAI8K,EAAE,GAAIhE,EAAE,GAAIyF,EAAG26E,GAC5Cz+E,EAAI,IAAK,QAAQ1I,EAAE,GAAIC,EAAE,GAAI8K,EAAE,GAAIhE,EAAE,GAAIyF,EAAG26E,GACrCz+E,CACX,EAcAkjB,EAAK7W,OATL,SAAgBrM,EAAKW,GACjB,MAAMpF,EAAoB,EAAhB4K,KAAKkG,SAAiBlG,KAAKutC,GAC/B/rC,EAAqB,EAAhBxB,KAAKkG,SAAkB,EAC5Bi5E,EAASn/E,KAAKkC,KAAK,EAAMV,EAAIA,GAAKhH,EAIxC,OAHAX,EAAI,GAAKmG,KAAKqnB,IAAIjyB,GAAK+pF,EACvBtlF,EAAI,GAAKmG,KAAKsnB,IAAIlyB,GAAK+pF,EACvBtlF,EAAI,GAAK2H,EAAIhH,EACNX,CACX,EAYAkjB,EAAK7nB,cAPL,SAAuB2E,EAAK1I,EAAG4E,GAC3B,MAAM7E,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAAIsQ,EAAI,GAAM1L,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,IAAMyL,EAAIzL,EAAE,KAAQ,GAI1F,OAHA8D,EAAI,IAAM9D,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EAAIzL,EAAE,KAAO0L,EACpD5H,EAAI,IAAM9D,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EAAIzL,EAAE,KAAO0L,EACpD5H,EAAI,IAAM9D,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,IAAMyL,EAAIzL,EAAE,KAAO0L,EAC9C5H,CACX,EASAkjB,EAAKg8D,mBAPL,SAA4Bl/E,EAAK1I,EAAG4E,GAChC,MAAM7E,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAIhC,OAHA0I,EAAI,GAAK9D,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EACtC3H,EAAI,GAAK9D,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EACtC3H,EAAI,GAAK9D,EAAE,GAAK7E,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,IAAMyL,EAChCrH,EAAUN,EAAKA,EAC1B,EAYAkjB,EAAK+qJ,oBAPL,SAA6BjuK,EAAK1I,EAAG4E,EAAGgyK,EAAMC,EAAIC,GAC9C,MAAM/2K,EAAIC,EAAE,EAAI62K,GAAKzmK,EAAIpQ,EAAE,EAAI62K,GAAKxmK,EAAIrQ,EAAE,EAAI62K,GAAKvmK,EAAI,GAAM1L,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,GAAKkyK,GAAMzmK,EAAIzL,EAAE,GAAKkyK,IAAQ,GAI7H,OAHApuK,EAAI,EAAIkuK,IAAShyK,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,EAAIkyK,GAAMzmK,EAAIzL,EAAE,GAAKkyK,IAAOxmK,EAC/E5H,EAAI,EAAIkuK,IAAShyK,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,EAAIkyK,GAAMzmK,EAAIzL,EAAE,GAAKkyK,IAAOxmK,EAC/E5H,EAAI,EAAIkuK,IAAShyK,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,GAAKkyK,GAAMzmK,EAAIzL,EAAE,GAAKkyK,IAAOxmK,EACzE5H,CACX,EAqBAkjB,EAAKmrJ,yBAdL,SAAkCruK,EAAK1I,EAAG4E,EAAGgyK,EAAMC,EAAIC,GACnD,MAAM/2K,EAAIC,EAAE,EAAI62K,GAAKzmK,EAAIpQ,EAAE,EAAI62K,GAAKxmK,EAAIrQ,EAAE,EAAI62K,GAC9CnuK,EAAI,EAAIkuK,GAAQhyK,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,EAAIkyK,GAAMzmK,EAC5D3H,EAAI,EAAIkuK,GAAQhyK,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,EAAIkyK,GAAMzmK,EAC5D3H,EAAI,EAAIkuK,GAAQhyK,EAAE,EAAIkyK,GAAM/2K,EAAI6E,EAAE,EAAIkyK,GAAM1mK,EAAIxL,EAAE,GAAKkyK,GAAMzmK,EAE7D,MAAM7T,EAAMqS,KAAKqyI,MAAMx4I,EAAI,EAAIkuK,GAAOluK,EAAI,EAAIkuK,GAAOluK,EAAI,EAAIkuK,IAM7D,OALIp6K,EAAM,IACNkM,EAAI,EAAIkuK,IAASp6K,EACjBkM,EAAI,EAAIkuK,IAASp6K,EACjBkM,EAAI,EAAIkuK,IAASp6K,GAEdkM,CACX,EAYAkjB,EAAKxiB,cAPL,SAAuBV,EAAK1I,EAAG4E,GAC3B,MAAM7E,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAIhC,OAHA0I,EAAI,GAAK3I,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EAAIzL,EAAE,GACrC8D,EAAI,GAAK3I,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EAAIzL,EAAE,GACrC8D,EAAI,GAAK3I,EAAI6E,EAAE,GAAKwL,EAAIxL,EAAE,GAAKyL,EAAIzL,EAAE,GAC9B8D,CACX,EAkBAkjB,EAAKorJ,cAfL,SAAuBtuK,EAAK1I,EAAGmI,GAE3B,MAAMpI,EAAIC,EAAE,GAAIoQ,EAAIpQ,EAAE,GAAIqQ,EAAIrQ,EAAE,GAC1Bi3K,EAAK9uK,EAAE,GAAI+uK,EAAK/uK,EAAE,GAAIgvK,EAAKhvK,EAAE,GAAIivK,EAAKjvK,EAAE,GAExCumI,EAAK0oC,EAAKr3K,EAAIm3K,EAAK7mK,EAAI8mK,EAAK/mK,EAC5Bw+H,EAAKwoC,EAAKhnK,EAAI+mK,EAAKp3K,EAAIk3K,EAAK5mK,EAC5By+H,EAAKsoC,EAAK/mK,EAAI4mK,EAAK7mK,EAAI8mK,EAAKn3K,EAC5Bs3K,GAAMJ,EAAKl3K,EAAIm3K,EAAK9mK,EAAI+mK,EAAK9mK,EAKnC,OAHA3H,EAAI,GAAKgmI,EAAK0oC,EAAKC,GAAMJ,EAAKroC,GAAMuoC,EAAKroC,GAAMooC,EAC/CxuK,EAAI,GAAKkmI,EAAKwoC,EAAKC,GAAMH,EAAKpoC,GAAMmoC,EAAKvoC,GAAMyoC,EAC/CzuK,EAAI,GAAKomI,EAAKsoC,EAAKC,GAAMF,EAAKzoC,GAAMwoC,EAAKtoC,GAAMqoC,EACxCvuK,CACX,EAUAkjB,EAAKusB,MAAQA,EACb,MAAMm/H,EAAYzsK,IACZ0sK,EAAY1sK,IACZ2sK,EAAY3sK,IACZ4sK,EAAY5sK,IACZ6sK,EAAa7sK,IACb8sK,EAAa9sK,IACb+sK,EAAe/sK,IAerB+gB,EAAKwrE,cAXL,SAAuBp3F,EAAGC,EAAG8K,EAAGhE,GAC5Bw0C,EAAI+7H,EAAWt3K,EAAGC,GAClBs7C,EAAIg8H,EAAWxsK,EAAG9K,GAClBs7C,EAAIi8H,EAAWv3K,EAAG8K,GAClBwwC,EAAIk8H,EAAW1wK,EAAGgE,GAClBoyC,EAAMu6H,EAAYJ,EAAWC,GAC7Bp6H,EAAMw6H,EAAYH,EAAWC,GAC7B,MAAMI,EAAS1/H,EAAMu/H,EAAYC,GAEjC,OADAx6H,EAAMy6H,EAAcF,EAAYC,GACzBrmK,EAAIimK,EAAWK,GAAgB,EAAIC,GAAUA,CACxD,EAUAjsJ,EAAKksJ,uBAHL,SAAgCpvK,EAAKqvK,EAAaC,EAAS7nK,GACvD,OAAOyb,EAAKppB,IAAIkG,EAAKyH,EAAStB,KAAKqnB,IAAI8hJ,GAAWnpK,KAAKsnB,IAAI4hJ,GAAc5nK,EAAStB,KAAKsnB,IAAI6hJ,GAAWnpK,KAAKsnB,IAAI4hJ,GAAc5nK,EAAStB,KAAKqnB,IAAI6hJ,GACnJ,EAQAnsJ,EAAKpa,YAHL,SAAqBxR,EAAGC,GACpB,OAAOD,EAAE,KAAOC,EAAE,IAAMD,EAAE,KAAOC,EAAE,IAAMD,EAAE,KAAOC,EAAE,EACxD,EAYA2rB,EAAKna,OAPL,SAAgBzR,EAAGC,GACf,MAAMyR,EAAK1R,EAAE,GAAI2R,EAAK3R,EAAE,GAAI4R,EAAK5R,EAAE,GAC7B8R,EAAK7R,EAAE,GAAI8R,EAAK9R,EAAE,GAAI+R,EAAK/R,EAAE,GACnC,OAAQ4O,KAAKqD,IAAIR,EAAKI,IAAO,IAAUjD,KAAKI,IAAI,EAAKJ,KAAKqD,IAAIR,GAAK7C,KAAKqD,IAAIJ,KACxEjD,KAAKqD,IAAIP,EAAKI,IAAO,IAAUlD,KAAKI,IAAI,EAAKJ,KAAKqD,IAAIP,GAAK9C,KAAKqD,IAAIH,KACpElD,KAAKqD,IAAIN,EAAKI,IAAO,IAAUnD,KAAKI,IAAI,EAAKJ,KAAKqD,IAAIN,GAAK/C,KAAKqD,IAAIF,GAC5E,EAEA,MAAMimK,EAAUptK,IAahB,SAASo/B,EAAOtoC,GACZ,OAAgB,IAATA,EAAE,IAAqB,IAATA,EAAE,IAAqB,IAATA,EAAE,EACzC,CAHAiqB,EAAKssJ,aAXL,SAAsBv+H,EAAK35C,EAAGC,GAC1B,MAAM89C,EAAK5F,EAAMn4C,EAAGC,GACpB,GAAI4O,KAAKqD,IAAI6rC,GAAM,KACf,OAAO,IAAKxG,YAAYoC,GAC5B,GAAI9qC,KAAKqD,IAAI6rC,EAAKlvC,KAAKutC,IAAM,IAEzB,OAAO,IAAK/D,aAAasB,EAAK9qC,KAAKutC,GAAIvtC,KAAKqD,IAAIlS,EAAE,IAAM,GAAM4rB,EAAKq6I,MAAQr6I,EAAKusJ,OAEpF,MAAM/9H,EAAO+C,EAAM86H,EAASj4K,EAAGC,GAC/B,OAAO,IAAKo4C,aAAasB,EAAKoE,EAAI3D,EACtC,EAKAxuB,EAAKqe,OAASA,EAOdre,EAAKk4H,qBALL,SAA8Bp7I,EAAK03D,EAAO+E,EAAQ98D,GAG9C,OAFAkzC,EAAI7yC,EAAK03D,EAAO/3D,GAETxL,EAAI6L,EAAKW,EAAMX,EAAKy8D,EADZ7zD,EAAI6zD,EAAQz8D,GAAOsnD,EAAiBmV,IACP98D,EAChD,EAEA,MAAM+vK,EAAkBvtK,IAQxB,SAASwtK,EAAgB3vK,EAAKgC,EAAGy6D,GAE7B,OAAO97D,EAAMX,EAAKy8D,EADH7zD,EAAI6zD,EAAQz6D,GAAKslD,EAAiBmV,GAErD,CAJAv5C,EAAK0sJ,oBALL,SAA6B5vK,EAAK03D,EAAOxG,EAAQvxD,GAG7C,OAFAW,EAAUovK,EAAiBx+G,GAC3Bre,EAAI7yC,EAAK03D,EAAO/3D,GACTkzC,EAAI7yC,EAAK03D,EAAO/2D,EAAM+uK,EAAiBA,EAAiB9mK,EAAI5I,EAAK0vK,IAC5E,EAMAxsJ,EAAKysJ,gBAAkBA,EACvB,MAAME,EAAa1tK,IAKnB+gB,EAAK4sJ,eAJL,SAAwB9vK,EAAKgC,EAAGkvD,GAE5B,OADAy+G,EAAgBE,EAAY7tK,EAAGkvD,GACxBre,EAAI7yC,EAAKgC,EAAG6tK,EACvB,EAgCA3sJ,EAAKiuC,cA7BL,SAAuBnxD,EAAK1I,EAAGC,GAG3B,OADA+I,EAAUN,EAAKy0C,EAAMz0C,EAAKy0C,EAAMz0C,EAAK1I,EAAGC,GAAID,IACvC4rB,EAAKqe,OAAOvhC,IAGjBA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTM,EAAUN,EAAKy0C,EAAMz0C,EAAKy0C,EAAMz0C,EAAK1I,EAAG0I,GAAM1I,IACzC4rB,EAAKqe,OAAOvhC,IAGjBA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTM,EAAUN,EAAKy0C,EAAMz0C,EAAKy0C,EAAMz0C,EAAK1I,EAAG0I,GAAM1I,IACzC4rB,EAAKqe,OAAOvhC,IAGjBM,EAAUN,EAAKzI,GACV2rB,EAAKqe,OAAOvhC,IAGjBA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,GALIA,GAJAA,GAPAA,GAPAA,CAwBf,EAaAkjB,EAAK6sJ,eAPL,SAAwB/vK,EAAK1I,EAAGC,GAK5B,OAJIqR,EAAItR,EAAGC,GAAK,EACZwI,EAAKC,EAAK1I,GAEV81K,EAAOptK,EAAKD,EAAKC,EAAK1I,IACnB0I,CACX,EAgCAkjB,EAAK8sJ,oBA3BL,SAA6BhwK,EAAKk3F,GAC9B,GAAI31D,EAAO21D,GACP,OAAOn3F,EAAKC,EAAKkjB,EAAKq6I,OAErB,CACD,MAAM92B,EAAMtkI,IAmBZ,OAlBIgE,KAAKqD,IAAI0tF,EAAI,IAAM/wF,KAAKqD,IAAI0tF,EAAI,KAAO/wF,KAAKqD,IAAI0tF,EAAI,IAAM/wF,KAAKqD,IAAI0tF,EAAI,KAEvEuvC,EAAI,GAAK,EACTA,EAAI,GAAKvvC,EAAI,GACbuvC,EAAI,IAAMvvC,EAAI,IAET/wF,KAAKqD,IAAI0tF,EAAI,IAAM/wF,KAAKqD,IAAI0tF,EAAI,KAErCuvC,EAAI,IAAMvvC,EAAI,GACduvC,EAAI,GAAK,EACTA,EAAI,GAAKvvC,EAAI,KAIbuvC,EAAI,GAAKvvC,EAAI,GACbuvC,EAAI,IAAMvvC,EAAI,GACduvC,EAAI,GAAK,GAENnmI,EAAUN,EAAKymI,EAC1B,CACJ,EAEA,MAAMwpC,EAAsB9tK,IACtB+tK,EAAsB/tK,IAO5B+gB,EAAKitJ,eALL,SAAwBnwK,EAAK1I,EAAGC,EAAG8K,GAG/B,OAFAwwC,EAAIo9H,EAAqB14K,EAAGD,GAC5Bu7C,EAAIq9H,EAAqB7tK,EAAG/K,GACrBgJ,EAAUN,EAAKy0C,EAAMz0C,EAAKiwK,EAAqBC,GAC1D,EAEA,MAAME,EAAajuK,IAInB+gB,EAAK1b,OAHL,SAAgBxH,EAAK1I,EAAGC,GACpB,OAAO2rB,EAAKg9D,YAAYlgF,EAAK1I,EAAG4rB,EAAK2vB,IAAIu9H,EAAY74K,EAAGD,GAAI,GAChE,EAKA4rB,EAAKhf,SAHL,SAAkB5M,EAAGmS,GACjB,MAAO,IAAInS,EAAE,GAAGoS,YAAYD,MAAcnS,EAAE,GAAGoS,YAAYD,MAAcnS,EAAE,GAAGoS,YAAYD,KAC9F,EAEAyZ,EAAKvjB,OAAS/G,EAAO,EAAG,EAAG,GAC3BsqB,EAAK/wB,KAAOyG,EAAO,EAAG,EAAG,GACzBsqB,EAAKmtJ,QAAUz3K,GAAQ,GAAI,GAAI,GAC/BsqB,EAAKq6I,MAAQ3kK,EAAO,EAAG,EAAG,GAC1BsqB,EAAKs6I,MAAQ5kK,EAAO,EAAG,EAAG,GAC1BsqB,EAAKusJ,MAAQ72K,EAAO,EAAG,EAAG,GAC1BsqB,EAAKotJ,SAAW13K,GAAQ,EAAG,EAAG,GAC9BsqB,EAAKqtJ,SAAW33K,EAAO,GAAI,EAAG,GAC9BsqB,EAAKstJ,SAAW53K,EAAO,EAAG,GAAI,EACjC,CArpBD,CAqpBGsqB,IAASA,EAAO,CAAC,G,mFCjpBhButJ,E,4CAnBG,MAAMC,EACT,kBAAI3vI,GACA,OAAIl3B,KAAK8mK,aAET9mK,KAAK8mK,WAAa9mK,KAAK+mK,qBADZ/mK,KAAK8mK,UAGpB,CACA,WAAA5mK,CAAYlZ,EAAIksE,EAAS6zG,GACrB/mK,KAAK+mK,kBAAoBA,EACzB/mK,KAAKhZ,GAAKA,EACVgZ,KAAKkzD,QAAUA,CACnB,GAEJ,SAAW2zG,GAIPA,EAAS93K,OAHT,SAAgB/H,EAAIksE,EAAS6zG,GACzB,OAAO,IAAIF,EAAS7/K,EAAIksE,EAAS6zG,EACrC,CAEH,CALD,CAKGF,IAAaA,EAAW,CAAC,IAE5B,SAAWD,GACPA,EAASliI,QAAU,CAAEsuB,WAAY,GAAI59B,WAAY,KAAW6/B,OAAQgB,2BAA2B,GAM/F2wG,EAAS9vI,aALT,SAAsBttC,EAAOxC,GACzB,MAAMuhD,EAAMvhD,EAAG8xJ,oBACT9tI,EAAW,IAAc7D,SAASvX,IAAIpG,GAC5C,OAAOwhB,GAAW,QAAUA,EAASgoD,WAAYvlE,GAAKA,EAAEzG,GAAG06C,gBAAkB6G,QAAOnwC,CACxF,EAoBAwuK,EAASI,iBAlBT,SAA0Bh8J,GACtB,MAAM,KAAEuqB,EAAI,KAAEzuC,EAAI,IAAEw6C,GAAQt2B,EAASoqB,YAC/B,KAAEntC,EAAI,gBAAEwzC,GAAoBlG,EAC5B9nC,EAAIxF,EAAK,GAAG+kC,QAAQ,GACpBt/B,EAAIzF,EAAK,GAAG+kC,QAAQ,GACpBx0B,EAAIvQ,EAAK,GAAG+kC,QAAQ,GACpBqoC,GAAQ,OAAS55B,EAAgB,IAAIzO,QAAQ,GAC7CuoC,GAAO,OAAS95B,EAAgB,IAAIzO,QAAQ,GAC5CyoC,GAAQ,OAASh6B,EAAgB,IAAIzO,QAAQ,GAC7Cj5B,EAAQ,GAOd,OALAA,EAAM5G,KAAK,gBAAgBrG,UAAaw6C,KAExCvtC,EAAM5G,KAAK,GAAGM,KAAUC,KAAU8K,OAElCzE,EAAM5G,KAAK,KAAUkoE,QAAsBE,QAAqBE,MACzD1hE,EAAMm1B,KAAK,MACtB,CAEH,CA3BD,CA2BG09I,IAAaA,EAAW,CAAC,G,4DC/CxBK,E,6CACJ,SAAWA,GACP,SAASh7G,EAAWtpD,EAAQhb,GAAa,MAAO,CAAEE,KAAM,aAAc8a,SAAQhb,YAAa,CAE3F,SAASmhC,EAASnmB,EAAQ43F,GAAc,MAAO,CAAE1yG,KAAM,WAAY8a,SAAQ43F,aAAc,CAEzF,SAAS/1F,EAAM7B,GAAU,OAAOspD,EAAWtpD,EAAQ,KAAU6B,MAAQ,CAGrE,SAASw/H,EAAY77I,GAAK,MAAkB,eAAXA,EAAEN,IAAuB,CAE1D,SAASC,EAAQK,GAAK,OAAO67I,EAAY77I,GAAkC,IAA7BA,EAAER,UAAUyE,MAAMhE,OAAuC,IAAxBD,EAAEoyG,WAAWnyG,MAAc,CAQ1G,SAASivC,EAAeopG,GACpB,OAAI34I,EAAQ24I,GACD,KAAUj8H,MACjBw/H,EAAYvD,GACLA,EAAI94I,WACR,QAAe84I,EAAI99H,OAAQ89H,EAAIlmC,WAC1C,CA6CA,SAASqmC,EAAaj+H,EAAQ43F,EAAYomC,GAEtC,OAAY,IADApmC,EAAWnyG,OAEZoc,EAAM7B,GACbg+H,EACO10E,EAAWtpD,GAAQ,QAAeA,EAAQ43F,IAC9CzxE,EAASnmB,EAAQ43F,EAC5B,CA1EA0sE,EAAmBh7G,WAAaA,EAEhCg7G,EAAmBn+I,SAAWA,EAE9Bm+I,EAAmBziK,MAAQA,EAG3ByiK,EAAmBjjC,YAAcA,EAEjCijC,EAAmBn/K,QAAUA,EAM7Bm/K,EAAmB7vI,eALnB,SAAwBqpG,GACpB,OAAIuD,EAAYvD,GACLA,EAAI94I,UAAUmG,aAClB2yI,EAAIlmC,WAAWnyG,MAC1B,EASA6+K,EAAmB5vI,eAAiBA,EAqBpC4vI,EAAmBC,uBAnBnB,SAAgCzmC,GAC5B,MAAM74I,EAAW,IACX,QAAE+H,GAAY8wI,EAAI99H,OACxB,IAAK,MAAMra,KAAQ+uC,EAAeopG,GAAKr0I,MAC/B9D,IAASqH,EAAQC,IAAItH,EAAKtB,IAC1BY,EAASA,EAASQ,QAAU,CACxBE,OACAJ,QAAS,KAAW0D,SAAS,EAAGtD,EAAKV,SAASQ,SAIlDR,EAASA,EAASQ,QAAU,CACxBE,OACAJ,QAAS,KAAWW,cAAc,KAAY0E,UAAUoC,EAAQC,IAAItH,EAAKtB,IAAIY,SAAUU,EAAKV,YAIxG,OAAO,UAAsB64I,EAAI99H,OAAQ/a,EAC7C,EAuBAq/K,EAAmB14K,sBApBnB,SAA+BkyI,GAC3B,MAAM74I,EAAW,IACX,QAAE+H,GAAY8wI,EAAI99H,OACxB,IAAK,MAAMwkK,KAAS9vI,EAAeopG,GAAKr0I,MAAO,CAC3C,MAAM9D,EAAOqH,EAAQC,IAAIu3K,EAAMngL,IAE3BY,EAASA,EAASQ,QADlBE,IAAS6+K,EACmB,CACxB7+K,OACAJ,QAAS,KAAW0D,SAAS,EAAGtD,EAAKV,SAASQ,SAItB,CACxBE,OACAJ,QAAS,KAAWW,cAAc,KAAY0E,UAAUjF,EAAKV,SAAUu/K,EAAMv/K,WAGzF,CACA,OAAO,UAAsB64I,EAAI99H,OAAQ/a,EAC7C,EAUA,MAAMw/K,EACF,GAAA98K,CAAI3C,GACA,MAAMmG,EAAenG,EAAUmG,aACV,IAAjBA,IAEJkS,KAAKu6F,WAAWv6F,KAAKu6F,WAAWnyG,QAAUT,EACrB,IAAjBmG,IACAkS,KAAK2gI,eAAgB,GAC7B,CACA,YAAAC,GAAiB,OAAOA,EAAa5gI,KAAK2C,OAAQ3C,KAAKu6F,WAAYv6F,KAAK2gI,cAAgB,CACxF,WAAAzgI,CAAYyC,GACR3C,KAAK2C,OAASA,EACd3C,KAAKu6F,WAAa,GAClBv6F,KAAK2gI,eAAgB,CACzB,EAEJ,MAAM0mC,EACF,GAAA/8K,CAAI3C,GACA,MAAMqe,EAAYre,EAAUmG,aACV,IAAdkY,GAAoBhG,KAAKsnK,WAAWh9K,IAAI3C,KAE5CqY,KAAKu6F,WAAWv6F,KAAKu6F,WAAWnyG,QAAUT,EACxB,IAAdqe,IACAhG,KAAK2gI,eAAgB,GAC7B,CACA,YAAAC,GAAiB,OAAOA,EAAa5gI,KAAKrY,UAAWqY,KAAKu6F,WAAYv6F,KAAK2gI,cAAgB,CAC3F,WAAAzgI,CAAYvY,GACRqY,KAAKrY,UAAYA,EACjBqY,KAAKu6F,WAAa,GAClBv6F,KAAK2gI,eAAgB,EACrB3gI,KAAKsnK,YAAa,QAAQ,KAAUltK,SAAU,KAAUgzD,0BAC5D,EAGJ65G,EAAmBjlC,cADnB,SAAuBr6I,GAAa,OAAO,IAAIy/K,EAAkBz/K,EAAY,EAG7Es/K,EAAmBtkC,cADnB,SAAuBh7I,GAAa,OAAO,IAAI0/K,EAAgB1/K,EAAY,EAqB3Es/K,EAAmB93K,QAlBnB,SAAiBsxI,EAAKn8G,GAClB,IAAI15B,EAAM,EACV,GAAIq8K,EAAmBjjC,YAAYvD,GAC/B,IAAK,MAAMn4I,KAAQm4I,EAAI94I,UAAUyE,MAAO,CACpC,MAAM,SAAExE,GAAaU,EACrB,IAAK,IAAInC,EAAI,EAAGuF,EAAK9D,EAASQ,OAAQjC,EAAIuF,EAAIvF,IAAK,CAG/Cm+B,EADU,KAAUv1B,OAAO,CAACzG,EAAK+G,SAAS,KAAY9G,YAAYX,EAASzB,MAAO,CAAEmJ,OAAQmxI,EAAI99H,SAC1F/X,IACV,CACJ,MAGA,IAAK,MAAMzC,KAAKs4I,EAAIlmC,WAChBj2E,EAAGn8B,EAAGyC,IAGlB,EAOAq8K,EAAmB1kC,mBALnB,SAA4Bj0I,EAAW3G,GACnC,OAAIq8I,EAAY11I,GACL29D,EAAWtkE,EAAW2G,EAAU3G,WACpCmhC,EAASnhC,EAAW2G,EAAUisG,WACzC,CAGH,CA7ID,CA6IG0sE,IAAuBA,EAAqB,CAAC,G,wBCjJzC,SAASM,EAAWhwJ,GACvB,OAAOne,OAAOlF,KAAKqjB,EACvB,CAEO,SAASiwJ,EAAkBh6K,GAC9B,MAAM,IAAImpB,MAAM,cACpB,CACO,SAAS8wJ,EAAcj6K,GAC1B,MAAiE,mBAAlDA,aAA6B,EAASA,EAAEk6K,KAC3D,C,qKCwBWC,EA4BAC,E,iCAxDJ,MAAMC,EACT,GAAAryK,CAAIhG,GACA,OAAO,IAAIq4K,EAAiB7nK,KAAK8nK,UAAU/tH,OAAO,CAACvqD,IACvD,CACA,MAAAy6G,CAAOtwG,GACH,MAAMg4B,EAAW,GACjB,IAAK,MAAMx5B,KAAK6H,KAAK8nK,UAAW,CAC5B,MAAM7tK,EAAI9B,EAAEwB,GACZ,IAAKM,EAAE8tK,UAAU3/K,OACb,MAAM,IAAIuuB,MAAM,gCAEpBhd,EAAOM,EAAEN,KACT,IAAK,MAAMpN,KAAK0N,EAAE8tK,UACdp2I,EAASxkC,KAAKZ,EAEtB,CACA,KAAMoN,aAAgB+zB,YAClB,MAAM,IAAI/W,MAAM,sEAEpB,MAAO,CACHgb,WACAh4B,KAAMA,EAEd,CACA,WAAAuG,CAAY4nK,GACR9nK,KAAK8nK,UAAYA,CACrB,GAGJ,SAAWH,GACP,SAASn8H,EAAGh8C,GACR,OAAO,IAAIq4K,EAAiB,CAACr4K,GACjC,CAYA,SAASw4K,EAAYz7K,GACjB,OAAQA,EAAE1E,MACN,IAAK,YAAa,OAAO+/K,EAAcxvG,UACvC,IAAK,aAAc,OAAOwvG,EAAcv0I,WAAW9mC,EAAE6mC,QACrD,IAAK,uBAAwB,OAAOw0I,EAAcK,qBAAqB17K,EAAEgQ,IAAKhQ,EAAEmQ,IAAKnQ,EAAEgnC,UACvF,IAAK,YAAa,OAAOq0I,EAAch0I,UACvC,IAAK,QAAS,OAAOg0I,EAAct0I,MACnC,IAAK,iBAAkB,OAAOs0I,EAAczzI,eAC5C,IAAK,cAAe,OAAOyzI,EAAcpzI,YAEjD,CArBAmzI,EAAan8H,GAAKA,EAUlBm8H,EAAah6D,aATb,SAAsBh8E,GAClB,IAAIplC,EAAIi/C,EAAGw8H,EAAYr2I,EAAS,KAChC,IAAK,IAAIxrC,EAAI,EAAGA,EAAIwrC,EAASvpC,QACI,mBAAzBupC,EAASxrC,EAAI,GAAG0B,KADa1B,IAGjCoG,EAAIA,EAAEiJ,IAAIwyK,EAAYr2I,EAASxrC,KAEnC,OAAOoG,CACX,CAaH,CA1BD,CA0BGo7K,IAAiBA,EAAe,CAAC,IAEpC,SAAWC,GAIPA,EAAcp8H,GAHd,SAAYh8C,GACR,OAAO,IAAIq4K,EAAiB,CAACr4K,GACjC,EAcA,MAAM04K,EAAU,CACZ,CAAC,IAASr2I,YAAYK,OAAQ,SAAU9iC,EAAGjJ,EAAGsH,GAAK2B,EAAEk8G,SAAS,EAAInlH,EAAGsH,GAAG,EAAO,EAC/E,CAAC,IAASokC,YAAYS,QAAS,SAAUljC,EAAGjJ,EAAGsH,GAAK2B,EAAE+7G,UAAU,EAAIhlH,EAAGsH,GAAG,EAAO,EACjF,CAAC,IAASokC,YAAYW,OAAQ,SAAUpjC,EAAGjJ,EAAGsH,GAAK2B,EAAEm8G,SAAS,EAAIplH,EAAGsH,GAAG,EAAO,EAC/E,CAAC,IAASokC,YAAYa,QAAS,SAAUtjC,EAAGjJ,EAAGsH,GAAK2B,EAAEg8G,UAAU,EAAIjlH,EAAGsH,GAAG,EAAO,EACjF,CAAC,IAASmlC,cAAcC,SAAU,SAAUzjC,EAAGjJ,EAAGsH,GAAK2B,EAAE+4K,WAAW,EAAIhiL,EAAGsH,GAAG,EAAO,EACrF,CAAC,IAASmlC,cAAcG,SAAU,SAAU3jC,EAAGjJ,EAAGsH,GAAK2B,EAAE+uE,WAAW,EAAIh4E,EAAGsH,GAAG,EAAO,GAEnF26K,EAAY,CACd,CAAC,IAASv2I,YAAYK,OAAQ,EAC9B,CAAC,IAASL,YAAYS,QAAS,EAC/B,CAAC,IAAST,YAAYW,OAAQ,EAC9B,CAAC,IAASX,YAAYa,QAAS,EAC/B,CAAC,IAASE,cAAcC,SAAU,EAClC,CAAC,IAASD,cAAcG,SAAU,GAEtC,SAASqlC,EAAUz+D,GACf,MAAM3E,EAAO,IAASi+I,YAAYt5I,GAClC,GAAI3E,IAAS,IAAS68B,YAAYE,KAC9B,OAzBR,SAAcp4B,GACV,MAAO,CACHouK,UAAW,CAAC,CAAElgL,KAAM,YAAamN,KAAM,IAAS68B,YAAYE,OAC5Dp4B,KAAM,IAAI+zB,WAAW/zB,EAAKi0B,OAAQj0B,EAAKq4B,YAE/C,CAoBeC,CAAKt4B,GACX,GAAI3E,IAAS,IAAS68B,YAAYC,MACnC,OAjCR,SAAen4B,GACX,MAAO,CACHouK,UAAW,CAAC,CAAElgL,KAAM,YAAamN,KAAM,IAAS68B,YAAYC,QAC5Dn4B,OAER,CA4Be0uK,CAAM1uK,GACjB,MAAMtI,EAAS,IAAIq8B,WAAW/zB,EAAKvR,OAASggL,EAAUpzK,IAChD+I,EAAImqK,EAAQlzK,GACZm9B,EAAO,IAAIkrC,SAAShsE,EAAOu8B,QACjC,IAAK,IAAIznC,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IACpC4X,EAAEo0B,EAAMhsC,EAAGwT,EAAKxT,IAEpB,MAAO,CACH4hL,UAAW,CAAC,CAAElgL,KAAM,YAAamN,SACjC2E,KAAMtI,EAEd,CA4HA,SAASi3K,EAAoB3uK,EAAMm6B,GAC/B,IAAI7rC,EAAO,EACX,IAAK,IAAI9B,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IACpC8B,GAAS0R,EAAKxT,GAAK2tC,EAAc,EAGrC,OADA7rC,GAAQ0R,EAAKvR,OACNH,CACX,CACA,SAASsgL,EAAkB5uK,EAAMm6B,GAC7B,MAAMG,GAAcH,EAAa,EACjC,IAAI7rC,EAAO,EACX,IAAK,IAAI9B,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IAAK,CACzC,MAAMoE,EAAQoP,EAAKxT,GAEf8B,GADAsC,GAAS,EACAA,EAAQupC,EAAc,EAGtBvpC,EAAQ0pC,EAAc,CAEvC,CAEA,OADAhsC,GAAQ0R,EAAKvR,OACNH,CACX,CAjJA2/K,EAAcxvG,UAAYA,EAa1BwvG,EAAcv0I,WADd,SAAoBD,GAAU,OAAOz5B,GAXrC,SAAqBA,EAAMy5B,GACvB,MAAMD,EAAU,IAAS8/G,YAAYt5I,GAC/BtI,EAAS,IAAIxF,WAAW8N,EAAKvR,QACnC,IAAK,IAAIjC,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IACpCkL,EAAOlL,GAAKmW,KAAKmC,MAAM9E,EAAKxT,GAAKitC,GAErC,MAAO,CACH20I,UAAW,CAAC,CAAElgL,KAAM,aAAcurC,SAAQD,YAC1Cx5B,KAAMtI,EAEd,CAC6Cm3K,CAAY7uK,EAAMy5B,EAAS,EAkCxEw0I,EAAcK,qBAHd,SAA8B1rK,EAAKG,EAAK62B,EAAUk1I,EAAY58K,YAC1D,OAAO8N,GA9BX,SAA+BA,EAAM4C,EAAKG,EAAK62B,EAAUk1I,GACrD,MAAMt1I,EAAU,IAAS8/G,YAAYt5I,GACrC,IAAKA,EAAKvR,OACN,MAAO,CACH2/K,UAAW,CAAC,CAAElgL,KAAM,uBAAwB0U,MAAKG,MAAK62B,WAAUJ,YAChEx5B,KAAM,IAAI9N,WAAW,IAG7B,GAAI6Q,EAAMH,EAAK,CACX,MAAMtC,EAAIsC,EACVA,EAAMG,EACNA,EAAMzC,CACV,CACA,MAAMq5B,GAAS52B,EAAMH,IAAQg3B,EAAW,GAClCN,EAAS,IAAIw1I,EAAU9uK,EAAKvR,QAClC,IAAK,IAAIjC,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IAAK,CACzC,MAAMiJ,EAAIuK,EAAKxT,GAEX8sC,EAAO9sC,GADPiJ,GAAKmN,EACO,EACPnN,GAAKsN,EACE62B,EAAW,EAEuB,EAAjCj3B,KAAKmC,OAAOrP,EAAImN,GAAO+2B,EAC5C,CACA,MAAO,CACHy0I,UAAW,CAAC,CAAElgL,KAAM,uBAAwB0U,MAAKG,MAAK62B,WAAUJ,YAChEx5B,KAAMs5B,EAEd,CAEmBy1I,CAAsB/uK,EAAM4C,EAAKG,EAAK62B,EAAUk1I,EACnE,EA0CAb,EAAch0I,UAxCd,SAAmBj6B,GACf,IAAIw5B,EAAU,IAAS8/G,YAAYt5I,GAKnC,QAJgB,IAAZw5B,IACAx5B,EAAO,IAAI9N,WAAW8N,GACtBw5B,EAAU,IAAStB,YAAYW,QAE9B74B,EAAKvR,OACN,MAAO,CACH2/K,UAAW,CAAC,CAAElgL,KAAM,YAAasrC,UAASO,QAAS,IACnD/5B,KAAM,IAAI9N,WAAW,IAI7B,IAAI88K,EAAa,EACjB,IAAK,IAAIxiL,EAAI,EAAG+G,EAAKyM,EAAKvR,OAAQjC,EAAI+G,EAAI/G,IAClCwT,EAAKxT,EAAI,KAAOwT,EAAKxT,KACrBwiL,GAAc,GAGtB,MAAM11I,EAAS,IAAIpnC,WAAW88K,GAC9B,IAAIv2K,EAAS,EACTwhC,EAAY,EAChB,IAAK,IAAIztC,EAAI,EAAG+G,EAAKyM,EAAKvR,OAAQjC,EAAI+G,EAAI/G,IAClCwT,EAAKxT,EAAI,KAAOwT,EAAKxT,IACrB8sC,EAAO7gC,GAAUuH,EAAKxT,EAAI,GAC1B8sC,EAAO7gC,EAAS,GAAKwhC,EACrBA,EAAY,EACZxhC,GAAU,KAGRwhC,EAKV,OAFAX,EAAO7gC,GAAUuH,EAAKA,EAAKvR,OAAS,GACpC6qC,EAAO7gC,EAAS,GAAKwhC,EACd,CACHm0I,UAAW,CAAC,CAAElgL,KAAM,YAAasrC,UAASO,QAAS/5B,EAAKvR,SACxDuR,KAAMs5B,EAEd,EA6BA20I,EAAct0I,MA3Bd,SAAe35B,GACX,IAAK,IAASu5I,wBAAwBv5I,GAClC,MAAM,IAAIgd,MAAM,kEAEpB,IAAIwc,EAAU,IAAS8/G,YAAYt5I,GAKnC,QAJgB,IAAZw5B,IACAx5B,EAAO,IAAI9N,WAAW8N,GACtBw5B,EAAU,IAAStB,YAAYW,QAE9B74B,EAAKvR,OACN,MAAO,CACH2/K,UAAW,CAAC,CAAElgL,KAAM,QAASiO,OAAQ,EAAGq9B,YACxCx5B,KAAM,IAAIA,EAAKuG,YAAY,IAGnC,MAAM+yB,EAAS,IAAIt5B,EAAKuG,YAAYvG,EAAKvR,QACnC0N,EAAS6D,EAAK,GACpBs5B,EAAO,GAAKt5B,EAAK,GACjB,IAAK,IAAIxT,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IACpC8sC,EAAO9sC,GAAKwT,EAAKxT,GAAKwT,EAAKxT,EAAI,GAGnC,OADA8sC,EAAO,GAAK,EACL,CACH80I,UAAW,CAAC,CAAElgL,KAAM,QAASiO,SAAQq9B,YACrCx5B,KAAMs5B,EAEd,EAsHA20I,EAAczzI,eAXd,SAAwBx6B,GAIpB,MAAMivK,EA/EV,SAA0BjvK,GACtB,MAAMs+D,EA/BV,SAAkBt+D,GACd,IAAK,IAAIxT,EAAI,EAAGwQ,EAAIgD,EAAKvR,OAAQjC,EAAIwQ,EAAGxQ,IACpC,GAAIwT,EAAKxT,GAAK,EACV,OAAO,EAEf,OAAO,CACX,CAyBmB0iL,CAASlvK,GAClBmvK,EAAQ7wG,EAASswG,EAAkB5uK,EAAM,KAAQ2uK,EAAoB3uK,EAAM,KAC3EovK,EAAS9wG,EAASswG,EAAkB5uK,EAAM,OAAU2uK,EAAoB3uK,EAAM,OACpF,OAAkB,EAAdA,EAAKvR,OAAsB,EAAT2gL,EAEX,CACHF,SAAU5wG,EACVhwE,KAAM0R,EAAKvR,OACX4gL,gBAAiB,GAGP,EAATD,EAAaD,EAEX,CACHD,SAAU5wG,EACVhwE,KAAM8gL,EACNC,gBAAiB,GAKd,CACHH,SAAU5wG,EACVhwE,KAAM6gL,EACNE,gBAAiB,EAI7B,CAkDoBC,CAAiBtvK,GACjC,OAAgC,IAA5BivK,EAAQI,gBAED5wG,EAAUz+D,GApDzB,SAAyBA,EAAMivK,GAC3B,MAAM90I,EAAa80I,EAAQC,SACQ,IAA5BD,EAAQI,gBAAwB,IAAO,MACX,IAA5BJ,EAAQI,gBAAwB,IAAO,MACxC/0I,GAAcH,EAAa,EAC3Bn9B,EAAIgD,EAAKvR,OACT8gL,EAASN,EAAQC,SACW,IAA5BD,EAAQI,gBAAwB,IAAI3iK,UAAUuiK,EAAQ3gL,MAAQ,IAAImqC,WAAWw2I,EAAQ3gL,MACzD,IAA5B2gL,EAAQI,gBAAwB,IAAIt7I,WAAWk7I,EAAQ3gL,MAAQ,IAAIke,YAAYyiK,EAAQ3gL,MAC7F,IAAIyC,EAAI,EACR,IAAK,IAAIvE,EAAI,EAAGA,EAAIwQ,EAAGxQ,IAAK,CACxB,IAAIoE,EAAQoP,EAAKxT,GACjB,GAAIoE,GAAS,EACT,KAAOA,GAASupC,GACZo1I,EAAOx+K,GAAKopC,IACVppC,EACFH,GAASupC,OAIb,KAAOvpC,GAAS0pC,GACZi1I,EAAOx+K,GAAKupC,IACVvpC,EACFH,GAAS0pC,EAGjBi1I,EAAOx+K,GAAKH,IACVG,CACN,CACA,MAAM2G,EAAS+mE,EAAU8wG,GACzB,MAAO,CACHnB,UAAW,CAAC,CACJlgL,KAAM,iBACNksC,UAAW60I,EAAQI,gBACnBn1I,YAAa+0I,EAAQC,SACrBn1I,QAAS/8B,GAEbtF,EAAO02K,UAAU,IAErBpuK,KAAMtI,EAAOsI,KAErB,CAaWwvK,CAAgBxvK,EAAMivK,EACjC,EAuCAhB,EAAcpzI,YArCd,SAAqB76B,GACjB,MAAM3L,EAAMoL,OAAOrK,OAAO,MACpBwlC,EAAU,GACVtB,EAAS,IAAIpnC,WAAW8N,EAAKvR,QAC7B0B,EAAU,KAAaiF,OAAOlD,WAAY,EAAGyQ,KAAKC,IAAI,KAAM5C,EAAKvR,OAAS,GAAKuR,EAAKvR,OAAS,EAAIkU,KAAKmC,MAAM9E,EAAKvR,OAAS,GAAK,IACrI,KAAakC,IAAIR,EAAS,GAC1B,IAAIs/K,EAAY,EACZjjL,EAAI,EACR,IAAK,MAAMgC,KAAKwR,EAAM,CAElB,GAAIxR,QAA4B,CAC5B8qC,EAAO9sC,MAAQ,EACf,QACJ,CACA,IAAIyD,EAAQoE,EAAI7F,QACF,IAAVyB,IAEAw/K,GAAajhL,EAAEC,OAEfwB,EAAQ2qC,EAAQnsC,OAChBmsC,EAAQ3qC,GAASzB,EACjB6F,EAAI7F,GAAKyB,EAET,KAAaU,IAAIR,EAASs/K,IAE9Bn2I,EAAO9sC,KAAOyD,CAClB,CACA,MAAMy/K,EAAc,KAAahuG,QAAQvxE,GAEnCw/K,GADiB,OAAiBD,GACFp/D,OAAOo/D,GAEvCx9D,GADe,OAAiB54E,GACLg3E,OAAOh3E,GACxC,MAAO,CACH80I,UAAW,CAAC,CAAElgL,KAAM,cAAewsC,aAAcw3E,EAAYl6E,SAAU2C,WAAYC,EAAQrL,KAAK,IAAKkL,eAAgBk1I,EAAe33I,SAAU7nC,QAASw/K,EAAe3vK,OACtKA,KAAMkyG,EAAYlyG,KAE1B,CAEH,CAjUD,CAiUGiuK,IAAkBA,EAAgB,CAAC,G","sources":["webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/atom_site_operator_mapping.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/element/loci.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/primitives/axes3d.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/util.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/symbol-table/internal.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/symbol-table.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/tuple.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/common/text/tokenizer.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/vec4.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/trajectory.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/util/scheduler.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/bonds/data.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/bonds/intra-compute.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/bonds/inter-compute.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/bonds.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/param-definition.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/custom/indexed.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/spaces/lab.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/impl/ordered-set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/ordered-set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/spaces/hcl.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/builder.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/runtime/query/base.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/atomic/measures.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/sequence/constants.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/sequence/sequence.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/data-source.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/binary-cif/decoder.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/symmetry.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/number.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/result.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/value-cell.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/model.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/util.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/element/stats.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/element/util.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/symmetry-operator.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/mat3.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/execution/runtime-context.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/execution/progress.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/util/chunked.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/scale.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/mmcif.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/db/column-helpers.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/db/column.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/db/table.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/db/database.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/util/lookup3d.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/vec2.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/array.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/util/subset-builder.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/combination.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/carbohydrates/data.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/carbohydrates/compute.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/util/boundary.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/structure.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/mapping.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/sequence.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/binary.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/centroid-helper.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/lists.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/assembly.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/symmetry.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/object.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/common.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/binary-cif/classifier.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/string-builder.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/chunked-array.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/buckets.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/equivalence-classes.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/hash-functions.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/array.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/atomic/bonds.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/topology/topology.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/graph/int-adjacency-graph.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/global-transform.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/bin.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/checksum.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/util.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/inflate.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/huffman.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/deflate.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/zip/zip.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/fibonacci-heap.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/interpolate.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/primitives/ray3d.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/common/component.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/symbol-table/core.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/common.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/spacegroup/tables.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/spacegroup/construction.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/primitives/sphere3d.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/memoize.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/common/text/column/token.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/molstar_bond_site.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/common.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/backbone-hbonds.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/ladders.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/sheets.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/protein-info.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/trace-lookup.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/dihedral-angles.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/turns.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/helices.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/bends.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/dssp/bridges.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure/zhang-skolnik.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/computed/secondary-structure.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/common/custom-structure-property.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/bit-flags.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/expression.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/mask.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/index.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/boundary-helper.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/types/lipids.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/types/ions.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/types.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/coordinates/coordinates.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/generic/hash-set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/generic/linked-list.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/generic/unique-array.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/assets.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/utils/structure-set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/common/property.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/bonds/common.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/queries/internal.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/util/user-timing.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/execution/observable.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/custom-property.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/primitives/box3d.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/secondary-structure.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/sequence/sifts-mapping.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/segmentation.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/impl/segmentation.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/iterator.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/symbol.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/writer/cif/encoder.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/writer/cif/encoder/util.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/writer/cif/encoder/text.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/msgpack/encode.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/writer/cif.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/writer/cif/encoder/binary.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/atomic-index.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/atomic.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/atomic-derived.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/coarse-index.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/coarse/hierarchy.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/coarse-keys.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/coarse-ranges.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/coarse.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/sequence.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/sort.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/atomic-ranges.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/properties.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/common.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/entities.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/parser.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/text/parser.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/binary/parser.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/binary/field.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/ccd.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/bird.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/dic.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/density-server.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/cif-core.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/segmentation.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/bonds/chem_comp.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/properties.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/element/schema.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/data-model.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/linked-index.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/map.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/msgpack/decode.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/sorted-ranges.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/type.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/util/principal-axes.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/bonds/element-set-intra-bond-cache.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/resonance.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/util/polymer.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/common/entity.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/uuid.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/bonds/struct_conn.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/legend.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/boundary.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/util/sort.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/lookup3d/grid.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/util.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/query.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/context.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/utils/builders.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/queries/generators.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/util/unique-subset-builder.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/utils/residue-set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/queries/modifiers.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/utils/structure-distance.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/predicates.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/queries/filters.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/queries/combinators.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/queries/atom-set.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/tensor.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/symbol-table/structure-query.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-props/common/custom-model-property.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/matrix/svd.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/matrix/principal-axes.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/misc.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/binary-cif/encoding.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/graph/inter-unit-graph.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/atom_site.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/secondary-structure.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/utils.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/misc.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/categories/sequence.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/export/mmcif.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/element/location.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/quat.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/string.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/task.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-script/language/helpers.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/anisotropic.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/nodejs-shims.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/id-factory.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/cif/schema/mmcif-extras.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/basic/schema.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/now.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/utf8.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/impl/sorted-array.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/sorted-array.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/element/bundle.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/atomic/hierarchy.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/debug.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/impl/interval.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-data/int/interval.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-task/execution/synchronous.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/types/saccharides.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/carbohydrates/constants.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/matrix/matrix.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/secondary-structure.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/rings/compute.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/structure/unit/rings.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/reader/common/text/number-parser.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/string-like.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model-formats/structure/property/bonds/index-pair.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/mat4.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/atomic/types.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/geometry/lookup3d/common.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/spaces/rgb.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/spaces/hsl.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/color/color.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-math/linear-algebra/3d/vec3.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/model/properties/symmetry.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-model/structure/query/selection.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-util/type-helpers.js","webpack://gatsby-starter-default/./node_modules/molstar/lib/mol-io/common/binary-cif/array-encoder.js"],"sourcesContent":["/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureElement, StructureProperties as P } from '../../structure.js';\nimport { Unit } from '../../structure/unit.js';\nimport { Segmentation } from '../../../../mol-data/int.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { Column } from '../../../../mol-data/db.js';\nexport function atom_site_operator_mapping(ctx) {\n    const entries = getEntries(ctx);\n    if (entries.length === 0)\n        return;\n    return [Category, entries, { ignoreFilter: true }];\n}\nexport const AtomSiteOperatorMappingCategoryName = 'molstar_atom_site_operator_mapping';\nexport const AtomSiteOperatorMappingSchema = {\n    molstar_atom_site_operator_mapping: {\n        label_asym_id: Column.Schema.Str(),\n        auth_asym_id: Column.Schema.Str(),\n        operator_name: Column.Schema.Str(),\n        suffix: Column.Schema.Str(),\n        // assembly\n        assembly_id: Column.Schema.Str(),\n        assembly_operator_id: Column.Schema.Int(),\n        // symmetry\n        symmetry_operator_index: Column.Schema.Int(),\n        symmetry_hkl: Column.Schema.Vector(3),\n        // NCS\n        ncs_id: Column.Schema.Int(),\n    }\n};\nconst asmValueKind = (i, xs) => typeof xs[i].operator.assembly === 'undefined' ? Column.ValueKinds.NotPresent : Column.ValueKinds.Present;\nconst symmetryValueKind = (i, xs) => xs[i].operator.spgrOp === -1 ? Column.ValueKinds.NotPresent : Column.ValueKinds.Present;\nconst Fields = CifWriter.fields()\n    .str('label_asym_id', (i, xs) => xs[i].label_asym_id)\n    .str('auth_asym_id', (i, xs) => xs[i].auth_asym_id)\n    .str('operator_name', (i, xs) => xs[i].operator.name)\n    .str('suffix', (i, xs) => xs[i].operator.suffix)\n    // assembly\n    // TODO: include oper list as well?\n    .str('assembly_id', (i, xs) => { var _a; return ((_a = xs[i].operator.assembly) === null || _a === void 0 ? void 0 : _a.id) || ''; }, { valueKind: asmValueKind })\n    .int('assembly_operator_id', (i, xs) => { var _a; return ((_a = xs[i].operator.assembly) === null || _a === void 0 ? void 0 : _a.operId) || 0; }, { valueKind: asmValueKind })\n    // symmetry\n    .int('symmetry_operator_index', (i, xs) => xs[i].operator.spgrOp, { valueKind: symmetryValueKind })\n    .vec('symmetry_hkl', [(i, xs) => xs[i].operator.hkl[0], (i, xs) => xs[i].operator.hkl[1], (i, xs) => xs[i].operator.hkl[2]], { valueKind: symmetryValueKind })\n    // NCS\n    .int('ncs_id', (i, xs) => xs[i].operator.ncsId, { valueKind: symmetryValueKind })\n    .getFields();\nconst Category = {\n    name: 'molstar_atom_site_operator_mapping',\n    instance(entries) {\n        return { fields: Fields, source: [{ data: entries, rowCount: entries.length }] };\n    }\n};\nfunction getEntries(ctx) {\n    const existing = new Set();\n    const entries = [];\n    for (const s of ctx.structures) {\n        const l = StructureElement.Location.create(s);\n        for (const unit of s.units) {\n            const operator = unit.conformation.operator;\n            if (!operator.suffix || unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const { elements } = unit;\n            const chainsIt = Segmentation.transientSegments(unit.model.atomicHierarchy.chainAtomSegments, elements);\n            while (chainsIt.hasNext) {\n                const chainSegment = chainsIt.move();\n                l.element = elements[chainSegment.start];\n                const label_asym_id = P.chain.label_asym_id(l);\n                const key = `${label_asym_id}${operator.suffix}`;\n                if (existing.has(key))\n                    continue;\n                existing.add(key);\n                const auth_asym_id = P.chain.label_asym_id(l);\n                entries.push({ label_asym_id, auth_asym_id, operator });\n            }\n        }\n    }\n    return entries;\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Paul Pillot <paul.pillot@tandemai.com>\n */\nimport { UniqueArray } from '../../../../mol-data/generic.js';\nimport { OrderedSet, SortedArray, Interval } from '../../../../mol-data/int.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nimport { MolScriptBuilder as MS } from '../../../../mol-script/language/builder.js';\nimport { Structure } from '../structure.js';\nimport { Unit } from '../unit.js';\nimport { sortArray, hashFnv32a, hash2 } from '../../../../mol-data/util.js';\nimport { Location } from './location.js';\nimport { PrincipalAxes } from '../../../../mol-math/linear-algebra/matrix/principal-axes.js';\nimport { StructureProperties } from '../properties.js';\nimport { BoundaryHelper } from '../../../../mol-math/geometry/boundary-helper.js';\nimport { IntTuple } from '../../../../mol-data/int/tuple.js';\nimport { compile } from '../../../../mol-script/runtime/query/base.js';\nimport { QueryContext, StructureSelection } from '../../query.js';\nimport { Schema } from './schema.js';\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\nconst itDiff = IntTuple.diff;\nexport function Loci(structure, elements) {\n    return { kind: 'element-loci', structure, elements: elements };\n}\n(function (Loci) {\n    function is(x) {\n        return !!x && x.kind === 'element-loci';\n    }\n    Loci.is = is;\n    function areEqual(a, b) {\n        if (a.structure !== b.structure)\n            return false;\n        if (a.elements.length !== b.elements.length)\n            return false;\n        for (let i = 0, il = a.elements.length; i < il; ++i) {\n            const elementA = a.elements[i];\n            const elementB = b.elements[i];\n            if (elementA.unit.id !== elementB.unit.id)\n                return false;\n            if (!OrderedSet.areEqual(elementA.indices, elementB.indices))\n                return false;\n        }\n        return true;\n    }\n    Loci.areEqual = areEqual;\n    function isEmpty(loci) {\n        for (const u of loci.elements) {\n            if (OrderedSet.size(u.indices) > 0)\n                return false;\n        }\n        return true;\n    }\n    Loci.isEmpty = isEmpty;\n    function isWholeStructure(loci) {\n        return size(loci) === loci.structure.elementCount;\n    }\n    Loci.isWholeStructure = isWholeStructure;\n    function size(loci) {\n        let s = 0;\n        // inlined for max performance, crucial for marking large cellpack models\n        // `for (const u of loci.elements) s += OrderedSet.size(u.indices);`\n        for (const { indices } of loci.elements) {\n            if (typeof indices === 'number') {\n                s += itDiff(indices);\n            }\n            else {\n                s += indices.length;\n            }\n        }\n        return s;\n    }\n    Loci.size = size;\n    function all(structure) {\n        return Loci(structure, structure.units.map(unit => ({\n            unit,\n            indices: OrderedSet.ofBounds(0, unit.elements.length)\n        })));\n    }\n    Loci.all = all;\n    function none(structure) {\n        return Loci(structure, []);\n    }\n    Loci.none = none;\n    function fromExpression(structure, expression, queryContext) {\n        let expr;\n        if (typeof expression === 'function') {\n            expr = expression(MS);\n        }\n        else {\n            expr = expression;\n        }\n        const selection = compile(expr)(queryContext !== null && queryContext !== void 0 ? queryContext : new QueryContext(structure));\n        return StructureSelection.toLociWithSourceUnits(selection);\n    }\n    Loci.fromExpression = fromExpression;\n    function fromQuery(structure, query, queryContext) {\n        const selection = query(queryContext !== null && queryContext !== void 0 ? queryContext : new QueryContext(structure));\n        return StructureSelection.toLociWithSourceUnits(selection);\n    }\n    Loci.fromQuery = fromQuery;\n    function fromSchema(structure, schema, queryContext) {\n        return Schema.toLoci(structure, schema, queryContext);\n    }\n    Loci.fromSchema = fromSchema;\n    function getFirstLocation(loci, e) {\n        if (isEmpty(loci))\n            return void 0;\n        const unit = loci.elements[0].unit;\n        const element = unit.elements[OrderedSet.getAt(loci.elements[0].indices, 0)];\n        if (e) {\n            e.structure = loci.structure;\n            e.unit = loci.elements[0].unit;\n            e.element = element;\n            return e;\n        }\n        return Location.create(loci.structure, unit, element);\n    }\n    Loci.getFirstLocation = getFirstLocation;\n    function firstElement(loci) {\n        if (isEmpty(loci))\n            return loci;\n        return Loci(loci.structure, [{\n                unit: loci.elements[0].unit,\n                indices: OrderedSet.ofSingleton(OrderedSet.start(loci.elements[0].indices))\n            }]);\n    }\n    Loci.firstElement = firstElement;\n    function firstResidue(loci) {\n        if (isEmpty(loci))\n            return loci;\n        return extendToWholeResidues(firstElement(loci));\n    }\n    Loci.firstResidue = firstResidue;\n    function firstChain(loci) {\n        if (isEmpty(loci))\n            return loci;\n        return extendToWholeChains(firstElement(loci));\n    }\n    Loci.firstChain = firstChain;\n    function toStructure(loci) {\n        const units = [];\n        for (const e of loci.elements) {\n            const { unit, indices } = e;\n            const elements = new Int32Array(OrderedSet.size(indices));\n            OrderedSet.forEach(indices, (v, i) => elements[i] = unit.elements[v]);\n            units.push(unit.getChild(SortedArray.ofSortedArray(elements)));\n        }\n        return Structure.create(units, { parent: loci.structure.parent });\n    }\n    Loci.toStructure = toStructure;\n    /**\n     * Iterates over all locations.\n     * The loc argument of the callback is mutable, use Location.clone() if you intend to keep\n     * the value around.\n     */\n    function forEachLocation(loci, f, location) {\n        if (Loci.isEmpty(loci))\n            return;\n        const loc = location ? location : Location.create(loci.structure);\n        loc.structure = loci.structure;\n        for (const e of loci.elements) {\n            const { unit, indices } = e;\n            loc.unit = unit;\n            const { elements } = e.unit;\n            for (let i = 0, _i = OrderedSet.size(indices); i < _i; i++) {\n                loc.element = elements[OrderedSet.getAt(indices, i)];\n                f(loc);\n            }\n        }\n    }\n    Loci.forEachLocation = forEachLocation;\n    // TODO: there should be a version that properly supports partitioned units\n    function remap(loci, structure) {\n        if (structure === loci.structure)\n            return loci;\n        const elements = [];\n        loci.elements.forEach(e => {\n            if (!structure.unitMap.has(e.unit.id))\n                return;\n            const unit = structure.unitMap.get(e.unit.id);\n            const indices = OrderedSet.indexedIntersect(e.indices, e.unit.elements, unit.elements);\n            if (OrderedSet.size(indices) > 0)\n                elements.push({ unit, indices });\n        });\n        return Loci(structure, elements);\n    }\n    Loci.remap = remap;\n    /** Create union of `xs` and `ys` */\n    function union(xs, ys) {\n        if (xs.elements.length > ys.elements.length)\n            return union(ys, xs);\n        if (Loci.isEmpty(xs))\n            return ys;\n        const map = new Map();\n        for (const e of xs.elements)\n            map.set(e.unit.id, e.indices);\n        const elements = [];\n        for (const e of ys.elements) {\n            if (map.has(e.unit.id)) {\n                elements[elements.length] = { unit: e.unit, indices: OrderedSet.union(map.get(e.unit.id), e.indices) };\n                map.delete(e.unit.id);\n            }\n            else {\n                elements[elements.length] = e;\n            }\n        }\n        map.forEach((indices, id) => {\n            elements[elements.length] = { unit: xs.structure.unitMap.get(id), indices };\n        });\n        return Loci(xs.structure, elements);\n    }\n    Loci.union = union;\n    /** Subtract `ys` from `xs` */\n    function subtract(xs, ys) {\n        const map = new Map();\n        for (const e of ys.elements)\n            map.set(e.unit.id, e.indices);\n        const elements = [];\n        for (const e of xs.elements) {\n            if (map.has(e.unit.id)) {\n                const indices = OrderedSet.subtract(e.indices, map.get(e.unit.id));\n                if (OrderedSet.size(indices) === 0)\n                    continue;\n                elements[elements.length] = { unit: e.unit, indices };\n            }\n            else {\n                elements[elements.length] = e;\n            }\n        }\n        return Loci(xs.structure, elements);\n    }\n    Loci.subtract = subtract;\n    /** Intersect `xs` and `ys` */\n    function intersect(xs, ys) {\n        const map = new Map();\n        for (const e of xs.elements)\n            map.set(e.unit.id, e.indices);\n        const elements = [];\n        for (const e of ys.elements) {\n            if (!map.has(e.unit.id))\n                continue;\n            const indices = OrderedSet.intersect(map.get(e.unit.id), e.indices);\n            if (OrderedSet.size(indices) === 0)\n                continue;\n            elements[elements.length] = { unit: e.unit, indices };\n        }\n        return Loci(xs.structure, elements);\n    }\n    Loci.intersect = intersect;\n    function areIntersecting(xs, ys) {\n        if (xs.elements.length > ys.elements.length)\n            return areIntersecting(ys, xs);\n        if (Loci.isEmpty(xs))\n            return Loci.isEmpty(ys);\n        const map = new Map();\n        for (const e of xs.elements)\n            map.set(e.unit.id, e.indices);\n        for (const e of ys.elements) {\n            if (!map.has(e.unit.id))\n                continue;\n            if (OrderedSet.areIntersecting(map.get(e.unit.id), e.indices))\n                return true;\n        }\n        return false;\n    }\n    Loci.areIntersecting = areIntersecting;\n    /** Check if second loci is a subset of the first */\n    function isSubset(xs, ys) {\n        if (Loci.isEmpty(xs))\n            return Loci.isEmpty(ys);\n        const map = new Map();\n        for (const e of xs.elements)\n            map.set(e.unit.id, e.indices);\n        let isSubset = false;\n        for (const e of ys.elements) {\n            if (!map.has(e.unit.id))\n                return false;\n            if (!OrderedSet.isSubset(map.get(e.unit.id), e.indices))\n                return false;\n            else\n                isSubset = true;\n        }\n        return isSubset;\n    }\n    Loci.isSubset = isSubset;\n    function makeIndexSet(newIndices) {\n        if (newIndices.length > 3 && SortedArray.isRange(newIndices)) {\n            return Interval.ofRange(newIndices[0], newIndices[newIndices.length - 1]);\n        }\n        else {\n            return SortedArray.ofSortedArray(newIndices);\n        }\n    }\n    function extendToWholeResidues(loci, restrictToConformation) {\n        const elements = [];\n        const residueAltIds = new Set();\n        for (const lociElement of loci.elements) {\n            if (isWholeUnit(lociElement)) {\n                elements[elements.length] = lociElement;\n                continue;\n            }\n            if (lociElement.unit.kind === Unit.Kind.Atomic) {\n                const unitElements = lociElement.unit.elements;\n                const h = lociElement.unit.model.atomicHierarchy;\n                const { label_alt_id } = lociElement.unit.model.atomicHierarchy.atoms;\n                const { index: residueIndex, offsets: residueOffsets } = h.residueAtomSegments;\n                const newIndices = [];\n                const indices = lociElement.indices, len = OrderedSet.size(indices);\n                let i = 0;\n                while (i < len) {\n                    residueAltIds.clear();\n                    const eI = unitElements[OrderedSet.getAt(indices, i)];\n                    const rI = residueIndex[eI];\n                    residueAltIds.add(label_alt_id.value(eI));\n                    i++;\n                    while (i < len) {\n                        const eI = unitElements[OrderedSet.getAt(indices, i)];\n                        if (residueIndex[eI] !== rI)\n                            break;\n                        residueAltIds.add(label_alt_id.value(eI));\n                        i++;\n                    }\n                    const hasSharedAltId = residueAltIds.has('');\n                    for (let j = residueOffsets[rI], _j = residueOffsets[rI + 1]; j < _j; j++) {\n                        const idx = OrderedSet.indexOf(unitElements, j);\n                        if (idx >= 0) {\n                            const altId = label_alt_id.value(j);\n                            if (!restrictToConformation || hasSharedAltId || !altId || residueAltIds.has(altId)) {\n                                newIndices[newIndices.length] = idx;\n                            }\n                        }\n                    }\n                }\n                elements[elements.length] = { unit: lociElement.unit, indices: makeIndexSet(newIndices) };\n            }\n            else {\n                // coarse elements are already by-residue\n                elements[elements.length] = lociElement;\n            }\n        }\n        return Loci(loci.structure, elements);\n    }\n    Loci.extendToWholeResidues = extendToWholeResidues;\n    function getChainSegments(unit) {\n        switch (unit.kind) {\n            case Unit.Kind.Atomic: return unit.model.atomicHierarchy.chainAtomSegments;\n            case Unit.Kind.Spheres: return unit.model.coarseHierarchy.spheres.chainElementSegments;\n            case Unit.Kind.Gaussians: return unit.model.coarseHierarchy.gaussians.chainElementSegments;\n        }\n    }\n    function isWholeUnit(element) {\n        return element.unit.elements.length === OrderedSet.size(element.indices);\n    }\n    function collectChains(unit, chainIndices, elements) {\n        const { index } = getChainSegments(unit);\n        const xs = unit.elements;\n        let size = 0;\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            const eI = xs[i];\n            const cI = index[eI];\n            if (!chainIndices.has(cI))\n                continue;\n            size++;\n        }\n        if (size === unit.elements.length) {\n            elements[elements.length] = { unit, indices: Interval.ofBounds(0, size) };\n            return;\n        }\n        const newIndices = new Int32Array(size);\n        size = 0;\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            const eI = xs[i];\n            const cI = index[eI];\n            if (!chainIndices.has(cI))\n                continue;\n            newIndices[size++] = i;\n        }\n        if (newIndices.length > 0) {\n            elements[elements.length] = { unit, indices: makeIndexSet(newIndices) };\n        }\n    }\n    function extendGroupToWholeChains(loci, start, end, isPartitioned, elements) {\n        const { index: chainIndex } = getChainSegments(loci.elements[0].unit);\n        const chainIndices = new Set();\n        for (let lI = start; lI < end; lI++) {\n            const lociElement = loci.elements[lI];\n            const indices = lociElement.indices;\n            const unitElements = lociElement.unit.elements;\n            for (let i = 0, _i = OrderedSet.size(indices); i < _i; i++) {\n                chainIndices.add(chainIndex[unitElements[OrderedSet.getAt(indices, i)]]);\n            }\n        }\n        if (isPartitioned) {\n            const baseUnit = loci.elements[0].unit;\n            // TODO: check for accidental quadratic for really large structures (but should be ok).\n            for (const unit of loci.structure.units) {\n                if (!Unit.areSameChainOperatorGroup(unit, baseUnit))\n                    continue;\n                collectChains(unit, chainIndices, elements);\n            }\n        }\n        else {\n            for (let lI = start; lI < end; lI++) {\n                collectChains(loci.elements[lI].unit, chainIndices, elements);\n            }\n        }\n    }\n    function extendToWholeChains(loci) {\n        const elements = [];\n        for (let i = 0, len = loci.elements.length; i < len; i++) {\n            const e = loci.elements[i];\n            if (Unit.Traits.is(e.unit.traits, Unit.Trait.Partitioned)) {\n                const start = i;\n                while (i < len && Unit.areSameChainOperatorGroup(loci.elements[i].unit, e.unit)) {\n                    i++;\n                }\n                const end = i;\n                i--;\n                extendGroupToWholeChains(loci, start, end, true, elements);\n            }\n            else {\n                if (isWholeUnit(e)) {\n                    elements[elements.length] = e;\n                }\n                else {\n                    extendGroupToWholeChains(loci, i, i + 1, false, elements);\n                }\n            }\n        }\n        return Loci(loci.structure, elements);\n    }\n    Loci.extendToWholeChains = extendToWholeChains;\n    function entityModelKey(location) {\n        return `${location.unit.model.id}|${StructureProperties.entity.id(location)}`;\n    }\n    function extendToWholeEntities(loci) {\n        const elements = [];\n        const l = Location.create(loci.structure);\n        const entities = new Set();\n        const { units } = loci.structure;\n        for (let i = 0, len = loci.elements.length; i < len; i++) {\n            const e = loci.elements[i];\n            l.unit = e.unit;\n            l.element = e.unit.elements[0];\n            entities.add(entityModelKey(l));\n        }\n        for (let i = 0, il = units.length; i < il; ++i) {\n            const unit = units[i];\n            l.unit = unit;\n            l.element = unit.elements[0];\n            if (entities.has(entityModelKey(l))) {\n                const indices = OrderedSet.ofBounds(0, unit.elements.length);\n                elements[elements.length] = { unit, indices };\n            }\n        }\n        return Loci(loci.structure, elements);\n    }\n    Loci.extendToWholeEntities = extendToWholeEntities;\n    function extendToWholeModels(loci) {\n        const elements = [];\n        const models = new Set();\n        const { units } = loci.structure;\n        for (let i = 0, len = loci.elements.length; i < len; i++) {\n            const e = loci.elements[i];\n            models.add(e.unit.model.id);\n        }\n        for (let i = 0, il = units.length; i < il; ++i) {\n            const unit = units[i];\n            if (models.has(unit.model.id)) {\n                const indices = OrderedSet.ofBounds(0, unit.elements.length);\n                elements[elements.length] = { unit, indices };\n            }\n        }\n        return Loci(loci.structure, elements);\n    }\n    Loci.extendToWholeModels = extendToWholeModels;\n    function getElementIndices(elements, indices) {\n        const elementIndices = [];\n        for (let i = 0, il = OrderedSet.size(indices); i < il; ++i) {\n            elementIndices.push(elements[OrderedSet.getAt(indices, i)]);\n        }\n        return SortedArray.ofSortedArray(elementIndices);\n    }\n    function getUnitIndices(elements, indices) {\n        if (SortedArray.isRange(elements) && SortedArray.areEqual(elements, indices)) {\n            return Interval.ofLength(elements.length);\n        }\n        return makeIndexSet(SortedArray.indicesOf(elements, indices));\n    }\n    function extendToAllInstances(loci) {\n        const elements = [];\n        const byModel = new Map();\n        for (let i = 0, len = loci.elements.length; i < len; i++) {\n            const e = loci.elements[i];\n            const { model } = e.unit;\n            const elementIndices = getElementIndices(e.unit.elements, e.indices);\n            if (byModel.has(model)) {\n                byModel.set(model, SortedArray.union(elementIndices, byModel.get(model)));\n            }\n            else {\n                byModel.set(model, elementIndices);\n            }\n        }\n        for (let i = 0, il = loci.structure.units.length; i < il; ++i) {\n            const unit = loci.structure.units[i];\n            const elementIndices = byModel.get(unit.model);\n            if (!elementIndices)\n                continue;\n            const indices = getUnitIndices(unit.elements, elementIndices);\n            if (OrderedSet.size(indices)) {\n                elements[elements.length] = { unit, indices };\n            }\n        }\n        return Loci(loci.structure, elements);\n    }\n    Loci.extendToAllInstances = extendToAllInstances;\n    function extendToWholeOperators(loci) {\n        const elements = [];\n        const operators = new Set();\n        const { units } = loci.structure;\n        for (let i = 0, len = loci.elements.length; i < len; i++) {\n            const e = loci.elements[i];\n            operators.add(e.unit.conformation.operator.name);\n        }\n        for (let i = 0, il = units.length; i < il; ++i) {\n            const unit = units[i];\n            if (operators.has(unit.conformation.operator.name)) {\n                const indices = OrderedSet.ofBounds(0, unit.elements.length);\n                elements[elements.length] = { unit, indices };\n            }\n        }\n        return Loci(loci.structure, elements);\n    }\n    Loci.extendToWholeOperators = extendToWholeOperators;\n    //\n    const boundaryHelper = new BoundaryHelper('98');\n    const tempPosBoundary = Vec3();\n    function getBoundary(loci, transform, result) {\n        boundaryHelper.reset();\n        for (const e of loci.elements) {\n            const { indices } = e;\n            const { elements, conformation } = e.unit;\n            for (let i = 0, _i = OrderedSet.size(indices); i < _i; i++) {\n                const eI = elements[OrderedSet.getAt(indices, i)];\n                conformation.position(eI, tempPosBoundary);\n                if (transform)\n                    Vec3.transformMat4(tempPosBoundary, tempPosBoundary, transform);\n                boundaryHelper.includePositionRadius(tempPosBoundary, conformation.r(eI));\n            }\n        }\n        boundaryHelper.finishedIncludeStep();\n        for (const e of loci.elements) {\n            const { indices } = e;\n            const { elements, conformation } = e.unit;\n            for (let i = 0, _i = OrderedSet.size(indices); i < _i; i++) {\n                const eI = elements[OrderedSet.getAt(indices, i)];\n                conformation.position(eI, tempPosBoundary);\n                if (transform)\n                    Vec3.transformMat4(tempPosBoundary, tempPosBoundary, transform);\n                boundaryHelper.radiusPositionRadius(tempPosBoundary, conformation.r(eI));\n            }\n        }\n        if (result) {\n            if (result.box)\n                boundaryHelper.getBox(result.box);\n            if (result.sphere)\n                boundaryHelper.getSphere(result.sphere);\n            return result;\n        }\n        return { box: boundaryHelper.getBox(), sphere: boundaryHelper.getSphere() };\n    }\n    Loci.getBoundary = getBoundary;\n    const tempPos = Vec3();\n    function toPositionsArray(loci, positions, offset = 0) {\n        let m = offset;\n        for (const e of loci.elements) {\n            const { indices } = e;\n            const { elements, conformation } = e.unit;\n            const indexCount = OrderedSet.size(indices);\n            for (let i = 0; i < indexCount; i++) {\n                const eI = elements[OrderedSet.getAt(indices, i)];\n                conformation.position(eI, tempPos);\n                Vec3.toArray(tempPos, positions, m + i * 3);\n            }\n            m += indexCount * 3;\n        }\n        return positions;\n    }\n    Loci.toPositionsArray = toPositionsArray;\n    function getPrincipalAxes(loci) {\n        const elementCount = size(loci);\n        const positions = toPositionsArray(loci, new Float32Array(3 * elementCount));\n        return PrincipalAxes.ofPositions(positions);\n    }\n    Loci.getPrincipalAxes = getPrincipalAxes;\n    function getPrincipalAxesMany(locis) {\n        let elementCount = 0;\n        locis.forEach(l => {\n            elementCount += size(l);\n        });\n        const positions = new Float32Array(3 * elementCount);\n        let offset = 0;\n        locis.forEach(l => {\n            toPositionsArray(l, positions, offset);\n            offset += size(l) * 3;\n        });\n        return PrincipalAxes.ofPositions(positions);\n    }\n    Loci.getPrincipalAxesMany = getPrincipalAxesMany;\n    function sourceIndex(unit, element) {\n        return Unit.isAtomic(unit)\n            ? unit.model.atomicHierarchy.atomSourceIndex.value(element)\n            // TODO: when implemented, this should map to the source index.\n            : element;\n    }\n    function toExpression(loci) {\n        if (Loci.isEmpty(loci))\n            return MS.struct.generator.empty();\n        const models = loci.structure.models;\n        const sourceIndexMap = new Map();\n        for (const e of loci.elements) {\n            const { indices } = e;\n            const { elements } = e.unit;\n            const key = e.unit.conformation.operator.name;\n            let sourceIndices;\n            if (sourceIndexMap.has(key))\n                sourceIndices = sourceIndexMap.get(key).xs;\n            else {\n                sourceIndices = UniqueArray.create();\n                sourceIndexMap.set(key, { modelLabel: e.unit.model.label, modelIndex: e.unit.model.modelNum, xs: sourceIndices });\n            }\n            for (let i = 0, _i = OrderedSet.size(indices); i < _i; i++) {\n                const idx = sourceIndex(e.unit, elements[OrderedSet.getAt(indices, i)]);\n                UniqueArray.add(sourceIndices, idx, idx);\n            }\n        }\n        const opData = [];\n        const keys = sourceIndexMap.keys();\n        while (true) {\n            const k = keys.next();\n            if (k.done)\n                break;\n            const e = sourceIndexMap.get(k.value);\n            opData.push(getOpData(k.value, e.xs.array, models.length > 1, e.modelLabel, e.modelIndex));\n        }\n        const opGroups = new Map();\n        for (let i = 0, il = opData.length; i < il; ++i) {\n            const d = opData[i];\n            const hash = hash2(hashFnv32a(d.atom.ranges), hashFnv32a(d.atom.set));\n            const key = `${hash}|${d.entity ? (d.entity.modelLabel + d.entity.modelIndex) : ''}`;\n            if (opGroups.has(key)) {\n                opGroups.get(key).chain.opName.push(...d.chain.opName);\n            }\n            else {\n                opGroups.set(key, d);\n            }\n        }\n        const opQueries = [];\n        opGroups.forEach(d => {\n            const { ranges, set } = d.atom;\n            const { opName } = d.chain;\n            const opProp = MS.struct.atomProperty.core.operatorName();\n            const siProp = MS.struct.atomProperty.core.sourceIndex();\n            const tests = [];\n            // TODO: add set.ofRanges constructor to MolQL???\n            if (set.length > 0) {\n                tests[tests.length] = MS.core.set.has([MS.core.type.set(set), siProp]);\n            }\n            for (let rI = 0, _rI = ranges.length / 2; rI < _rI; rI++) {\n                tests[tests.length] = MS.core.rel.inRange([siProp, ranges[2 * rI], ranges[2 * rI + 1]]);\n            }\n            if (d.entity) {\n                const { modelLabel, modelIndex } = d.entity;\n                opQueries.push(MS.struct.generator.atomGroups({\n                    'atom-test': tests.length > 1 ? MS.core.logic.or(tests) : tests[0],\n                    'chain-test': opName.length > 1\n                        ? MS.core.set.has([MS.core.type.set(opName), opProp])\n                        : MS.core.rel.eq([opProp, opName[0]]),\n                    'entity-test': MS.core.logic.and([\n                        MS.core.rel.eq([MS.struct.atomProperty.core.modelLabel(), modelLabel]),\n                        MS.core.rel.eq([MS.struct.atomProperty.core.modelIndex(), modelIndex]),\n                    ])\n                }));\n            }\n            else {\n                opQueries.push(MS.struct.generator.atomGroups({\n                    'atom-test': tests.length > 1 ? MS.core.logic.or(tests) : tests[0],\n                    'chain-test': opName.length > 1\n                        ? MS.core.set.has([MS.core.type.set(opName), opProp])\n                        : MS.core.rel.eq([opProp, opName[0]])\n                }));\n            }\n        });\n        return MS.struct.modifier.union([\n            opQueries.length === 1\n                ? opQueries[0]\n                // Need to union before merge for fast performance\n                : MS.struct.combinator.merge(opQueries.map(q => MS.struct.modifier.union([q])))\n        ]);\n    }\n    Loci.toExpression = toExpression;\n    function getOpData(opName, xs, multimodel, modelLabel, modelIndex) {\n        sortArray(xs);\n        const ranges = [];\n        const set = [];\n        let i = 0;\n        const len = xs.length;\n        while (i < len) {\n            const start = i;\n            i++;\n            while (i < len && xs[i - 1] + 1 === xs[i])\n                i++;\n            const end = i;\n            // TODO: is this a good value?\n            if (end - start > 12) {\n                ranges[ranges.length] = xs[start];\n                ranges[ranges.length] = xs[end - 1];\n            }\n            else {\n                for (let j = start; j < end; j++) {\n                    set[set.length] = xs[j];\n                }\n            }\n        }\n        return multimodel\n            ? {\n                atom: { set, ranges },\n                chain: { opName: [opName] },\n                entity: { modelLabel, modelIndex }\n            }\n            : {\n                atom: { set, ranges },\n                chain: { opName: [opName] },\n            };\n    }\n})(Loci || (Loci = {}));\n","/**\n * Copyright (c) 2019-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3, Mat3 } from '../../linear-algebra.js';\nfunction Axes3D() {\n    return Axes3D.empty();\n}\n(function (Axes3D) {\n    function create(origin, dirA, dirB, dirC) { return { origin, dirA, dirB, dirC }; }\n    Axes3D.create = create;\n    function empty() { return { origin: Vec3(), dirA: Vec3(), dirB: Vec3(), dirC: Vec3() }; }\n    Axes3D.empty = empty;\n    function copy(out, a) {\n        Vec3.copy(out.origin, a.origin);\n        Vec3.copy(out.dirA, a.dirA);\n        Vec3.copy(out.dirB, a.dirB);\n        Vec3.copy(out.dirC, a.dirC);\n        return out;\n    }\n    Axes3D.copy = copy;\n    function clone(a) {\n        return copy(empty(), a);\n    }\n    Axes3D.clone = clone;\n    /** Get size of each direction */\n    function size(size, axes) {\n        return Vec3.set(size, Vec3.magnitude(axes.dirA) * 2, Vec3.magnitude(axes.dirB) * 2, Vec3.magnitude(axes.dirC) * 2);\n    }\n    Axes3D.size = size;\n    const tmpSizeV = Vec3();\n    /** Get volume of the oriented box wrapping the axes */\n    function volume(axes) {\n        size(tmpSizeV, axes);\n        return tmpSizeV[0] * tmpSizeV[1] * tmpSizeV[2];\n    }\n    Axes3D.volume = volume;\n    function normalize(out, a) {\n        Vec3.copy(out.origin, a.origin);\n        Vec3.normalize(out.dirA, a.dirA);\n        Vec3.normalize(out.dirB, a.dirB);\n        Vec3.normalize(out.dirC, a.dirC);\n        return out;\n    }\n    Axes3D.normalize = normalize;\n    const tmpTransformMat3 = Mat3();\n    /** Transform axes with a Mat4 */\n    function transform(out, a, m) {\n        Vec3.transformMat4(out.origin, a.origin, m);\n        const n = Mat3.directionTransform(tmpTransformMat3, m);\n        Vec3.transformMat3(out.dirA, a.dirA, n);\n        Vec3.transformMat3(out.dirB, a.dirB, n);\n        Vec3.transformMat3(out.dirC, a.dirC, n);\n        return out;\n    }\n    Axes3D.transform = transform;\n    function scale(out, a, scale) {\n        Vec3.scale(out.dirA, a.dirA, scale);\n        Vec3.scale(out.dirB, a.dirB, scale);\n        Vec3.scale(out.dirC, a.dirC, scale);\n        return out;\n    }\n    Axes3D.scale = scale;\n})(Axes3D || (Axes3D = {}));\nexport { Axes3D };\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { MoleculeType, PolymerTypeAtomRoleId, getMoleculeType } from './model/types.js';\nimport { Vec3 } from '../../mol-math/linear-algebra.js';\nimport { Unit } from './structure.js';\nexport function getCoarseBegCompId(unit, element) {\n    const entityKey = unit.coarseElements.entityKey[element];\n    const seq = unit.model.sequence.byEntityKey[entityKey].sequence;\n    const seq_id_begin = unit.coarseElements.seq_id_begin.value(element);\n    return seq.compId.value(seq_id_begin - 1); // 1-indexed\n}\nexport function getElementMoleculeType(unit, element) {\n    switch (unit.kind) {\n        case Unit.Kind.Atomic:\n            return unit.model.atomicHierarchy.derived.residue.moleculeType[unit.residueIndex[element]];\n        case Unit.Kind.Spheres:\n        case Unit.Kind.Gaussians:\n            // TODO add unit.model.coarseHierarchy.derived.residue.moleculeType\n            const compId = getCoarseBegCompId(unit, element);\n            const cc = unit.model.properties.chemicalComponentMap.get(compId);\n            if (cc)\n                return getMoleculeType(cc.type, compId);\n    }\n    return MoleculeType.Unknown;\n}\nexport function getAtomicMoleculeType(model, rI) {\n    return model.atomicHierarchy.derived.residue.moleculeType[rI];\n}\nconst EmptyAtomIds = new Set();\nexport function getAtomIdForAtomRole(polymerType, atomRole) {\n    const p = PolymerTypeAtomRoleId[polymerType];\n    if (p !== undefined) {\n        const a = p[atomRole];\n        if (a !== undefined)\n            return a;\n    }\n    return EmptyAtomIds;\n}\nconst tmpPositionsVec = Vec3.zero();\nexport function getPositions(unit, indices) {\n    const c = unit.conformation;\n    const positions = new Float32Array(indices.length * 3);\n    const { elements } = unit;\n    for (let i = 0, il = indices.length; i < il; ++i) {\n        c.position(elements[indices[i]], tmpPositionsVec);\n        Vec3.toArray(tmpPositionsVec, positions, i * 3);\n    }\n    return positions;\n}\n","/**\n * Copyright (c) 2019 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Type } from '../type.js';\nimport * as Struct from './structure-query.js';\nimport { Arguments, Argument } from '../symbol.js';\nimport { symbol } from '../helpers.js';\nconst generator = {\n    '@header': 'Generators',\n    bundleElement: symbol(Arguments.Dictionary({\n        // TODO: should we use more universal unit keys? (i.e. based on chain and \"operator name\")\n        groupedUnits: Argument(Type.Any), // SortedArray<number>[],\n        set: Argument(Type.Any), // SortedArray<UnitIndex>\n        ranges: Argument(Type.Any) // SortedArray<UnitIndex>\n    }), Type.Any), // returns BundleElement\n    bundle: symbol(Arguments.Dictionary({\n        elements: Argument(Type.Any) // BundleElement[]\n    }), Struct.Types.ElementSelectionQuery, 'A selection with single structure containing represented by the bundle.'),\n    // Use with caution as this is not \"state saveable\"\n    // This query should never be used in any State Transform!\n    current: symbol(Arguments.None, Struct.Types.ElementSelectionQuery, 'Current selection provided by the query context. Avoid using this in State Transforms.')\n};\nexport const internal = {\n    '@header': 'Internal Queries',\n    generator\n};\n","/**\n * Copyright (c) 2017 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { core } from './symbol-table/core.js';\nimport { structureQuery } from './symbol-table/structure-query.js';\nimport { internal } from './symbol-table/internal.js';\nimport { normalizeTable, symbolList } from './helpers.js';\nconst MolScriptSymbolTable = { core, structureQuery, internal };\nnormalizeTable(MolScriptSymbolTable);\nexport const SymbolList = symbolList(MolScriptSymbolTable);\nexport const SymbolMap = (function () {\n    const map = Object.create(null);\n    for (const s of SymbolList)\n        map[s.id] = s;\n    return map;\n})();\nexport { MolScriptSymbolTable };\n","/**\n * Copyright (c) 2017-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { hash2 } from '../util.js';\nvar IntTuple;\n(function (IntTuple) {\n    IntTuple.Zero = 0;\n    const { _int32, _float64, _int32_1, _float64_1 } = (function () {\n        const data = new ArrayBuffer(8);\n        const data_1 = new ArrayBuffer(8);\n        return {\n            _int32: new Int32Array(data),\n            _float64: new Float64Array(data),\n            _int32_1: new Int32Array(data_1),\n            _float64_1: new Float64Array(data_1)\n        };\n    }());\n    function is(x) {\n        return typeof x === 'number';\n    }\n    IntTuple.is = is;\n    function create(fst, snd) {\n        _int32[0] = fst;\n        _int32[1] = snd;\n        return _float64[0];\n    }\n    IntTuple.create = create;\n    /** snd - fst */\n    function diff(t) {\n        _float64[0] = t;\n        return _int32[1] - _int32[0];\n    }\n    IntTuple.diff = diff;\n    function fst(t) {\n        _float64[0] = t;\n        return _int32[0];\n    }\n    IntTuple.fst = fst;\n    function snd(t) {\n        _float64[0] = t;\n        return _int32[1];\n    }\n    IntTuple.snd = snd;\n    /** Normal equality does not work, because NaN === NaN ~> false */\n    function areEqual(a, b) {\n        _float64[0] = a;\n        _float64_1[0] = b;\n        return _int32[0] === _int32_1[0] && _int32[1] === _int32_1[1];\n    }\n    IntTuple.areEqual = areEqual;\n    function compare(a, b) {\n        _float64[0] = a;\n        _float64_1[0] = b;\n        const x = _int32[0] - _int32_1[0];\n        if (x !== 0)\n            return x;\n        return _int32[1] - _int32_1[1];\n    }\n    IntTuple.compare = compare;\n    function compareInArray(xs, i, j) {\n        _float64[0] = xs[i];\n        _float64_1[0] = xs[j];\n        const x = _int32[0] - _int32_1[0];\n        if (x !== 0)\n            return x;\n        return _int32[1] - _int32_1[1];\n    }\n    IntTuple.compareInArray = compareInArray;\n    function hashCode(t) {\n        _float64[0] = t;\n        return hash2(_int32[0], _int32[1]);\n    }\n    IntTuple.hashCode = hashCode;\n    function toString(t) {\n        _float64[0] = t;\n        return `(${_int32[0]}, ${_int32[1]})`;\n    }\n    IntTuple.toString = toString;\n})(IntTuple || (IntTuple = {}));\nexport { IntTuple };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * mostly from https://github.com/dsehnal/CIFTools.js\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { chunkedSubtask } from '../../../../mol-task/index.js';\nexport { Tokenizer };\nfunction Tokenizer(data) {\n    return {\n        data,\n        position: 0,\n        length: data.length,\n        lineNumber: 1,\n        tokenStart: 0,\n        tokenEnd: 0\n    };\n}\n(function (Tokenizer) {\n    function getTokenString(state) {\n        return state.data.substring(state.tokenStart, state.tokenEnd);\n    }\n    Tokenizer.getTokenString = getTokenString;\n    /** Resets the state */\n    function reset(state) {\n        state.position = 0;\n        state.lineNumber = 1;\n        state.tokenStart = 0;\n        state.tokenEnd = 0;\n    }\n    Tokenizer.reset = reset;\n    /**\n     * Eat everything until a newline occurs.\n     */\n    function eatLine(state) {\n        const { data } = state;\n        while (state.position < state.length) {\n            switch (data.charCodeAt(state.position)) {\n                case 10: // \\n\n                    state.tokenEnd = state.position;\n                    ++state.position;\n                    ++state.lineNumber;\n                    return true;\n                case 13: // \\r\n                    state.tokenEnd = state.position;\n                    ++state.position;\n                    ++state.lineNumber;\n                    if (data.charCodeAt(state.position) === 10) {\n                        ++state.position;\n                    }\n                    return true;\n                default:\n                    ++state.position;\n                    break;\n            }\n        }\n        state.tokenEnd = state.position;\n        return state.tokenStart !== state.tokenEnd;\n    }\n    Tokenizer.eatLine = eatLine;\n    /** Sets the current token start to the current position */\n    function markStart(state) {\n        state.tokenStart = state.position;\n    }\n    Tokenizer.markStart = markStart;\n    /** Sets the current token start to current position and moves to the next line. */\n    function markLine(state) {\n        state.tokenStart = state.position;\n        return eatLine(state);\n    }\n    Tokenizer.markLine = markLine;\n    /** Advance the state and return line as string. */\n    function readLine(state) {\n        markLine(state);\n        return getTokenString(state);\n    }\n    Tokenizer.readLine = readLine;\n    /** Advance the state and return trimmed line as string. */\n    function readLineTrim(state) {\n        markLine(state);\n        const position = state.position;\n        trim(state, state.tokenStart, state.tokenEnd);\n        state.position = position;\n        return getTokenString(state);\n    }\n    Tokenizer.readLineTrim = readLineTrim;\n    function readLinesChunk(state, count, tokens) {\n        let read = 0;\n        for (let i = 0; i < count; i++) {\n            if (!markLine(state))\n                return read;\n            TokenBuilder.addUnchecked(tokens, state.tokenStart, state.tokenEnd);\n            read++;\n        }\n        return read;\n    }\n    /** Advance the state by the given number of lines and return them*/\n    function markLines(state, count) {\n        const lineTokens = TokenBuilder.create(state.data, count * 2);\n        readLinesChunk(state, count, lineTokens);\n        return lineTokens;\n    }\n    Tokenizer.markLines = markLines;\n    /** Advance the state by the given number of lines and return them */\n    function readLines(state, count) {\n        const ret = [];\n        for (let i = 0; i < count; i++) {\n            ret.push(Tokenizer.readLine(state));\n        }\n        return ret;\n    }\n    Tokenizer.readLines = readLines;\n    /** Advance the state by the given number of lines and return line starts/ends as tokens. */\n    async function readLinesAsync(state, count, ctx, initialLineCount = 100000) {\n        const lineTokens = TokenBuilder.create(state.data, count * 2);\n        let linesAlreadyRead = 0;\n        await chunkedSubtask(ctx, initialLineCount, state, (chunkSize, state) => {\n            const linesToRead = Math.min(count - linesAlreadyRead, chunkSize);\n            readLinesChunk(state, linesToRead, lineTokens);\n            linesAlreadyRead += linesToRead;\n            return linesToRead;\n        }, (ctx, state) => ctx.update({ message: 'Parsing...', current: state.position, max: state.length }));\n        return lineTokens;\n    }\n    Tokenizer.readLinesAsync = readLinesAsync;\n    function readAllLines(data) {\n        const state = Tokenizer(data);\n        const tokens = TokenBuilder.create(state.data, Math.max(data.length / 80, 2));\n        while (markLine(state)) {\n            TokenBuilder.add(tokens, state.tokenStart, state.tokenEnd);\n        }\n        return tokens;\n    }\n    Tokenizer.readAllLines = readAllLines;\n    function readLinesChunkChecked(state, count, tokens) {\n        let read = 0;\n        for (let i = 0; i < count; i++) {\n            if (!markLine(state))\n                return read;\n            TokenBuilder.add(tokens, state.tokenStart, state.tokenEnd);\n            read++;\n        }\n        return read;\n    }\n    async function readAllLinesAsync(data, ctx, chunkSize = 100000) {\n        const state = Tokenizer(data);\n        const tokens = TokenBuilder.create(state.data, Math.max(data.length / 80, 2));\n        await chunkedSubtask(ctx, chunkSize, state, (chunkSize, state) => {\n            readLinesChunkChecked(state, chunkSize, tokens);\n            return state.position < state.length ? chunkSize : 0;\n        }, (ctx, state) => ctx.update({ message: 'Parsing...', current: state.position, max: state.length }));\n        return tokens;\n    }\n    Tokenizer.readAllLinesAsync = readAllLinesAsync;\n    /**\n     * Eat everything until a whitespace/newline occurs.\n     */\n    function eatValue(state) {\n        while (state.position < state.length) {\n            switch (state.data.charCodeAt(state.position)) {\n                case 9: // \\t\n                case 10: // \\n\n                case 13: // \\r\n                case 32: // ' '\n                    state.tokenEnd = state.position;\n                    return;\n                default:\n                    ++state.position;\n                    break;\n            }\n        }\n        state.tokenEnd = state.position;\n    }\n    Tokenizer.eatValue = eatValue;\n    /**\n     * Skips all the whitespace - space, tab, newline, CR\n     * Handles incrementing line count.\n     */\n    function skipWhitespace(state) {\n        let prev = -1;\n        while (state.position < state.length) {\n            const c = state.data.charCodeAt(state.position);\n            switch (c) {\n                case 9: // '\\t'\n                case 32: // ' '\n                    prev = c;\n                    ++state.position;\n                    break;\n                case 10: // \\n\n                    // handle \\r\\n\n                    if (prev !== 13) {\n                        ++state.lineNumber;\n                    }\n                    prev = c;\n                    ++state.position;\n                    break;\n                case 13: // \\r\n                    prev = c;\n                    ++state.position;\n                    ++state.lineNumber;\n                    break;\n                default:\n                    return prev;\n            }\n        }\n        return prev;\n    }\n    Tokenizer.skipWhitespace = skipWhitespace;\n    /** Skips all the whitespace */\n    function skipStrictWhitespace(state) {\n        let prev = -1;\n        while (state.position < state.length) {\n            const c = state.data.charCodeAt(state.position);\n            switch (c) {\n                case 9: // '\\t'\n                case 32: // ' '\n                    prev = c;\n                    ++state.position;\n                    break;\n                default:\n                    return prev;\n            }\n        }\n        return prev;\n    }\n    Tokenizer.skipStrictWhitespace = skipStrictWhitespace;\n    /** Trims spaces and tabs */\n    function trim(state, start, end) {\n        const { data } = state;\n        let s = start, e = end - 1;\n        let c = data.charCodeAt(s);\n        while ((c === 9 || c === 32) && s <= e)\n            c = data.charCodeAt(++s);\n        c = data.charCodeAt(e);\n        while ((c === 9 || c === 32) && e >= s)\n            c = data.charCodeAt(--e);\n        state.tokenStart = s;\n        state.tokenEnd = e + 1;\n        state.position = end;\n        return state;\n    }\n    Tokenizer.trim = trim;\n})(Tokenizer || (Tokenizer = {}));\nexport function trimStr(data, start, end) {\n    let s = start, e = end - 1;\n    let c = data.charCodeAt(s);\n    while ((c === 9 || c === 32) && s <= e)\n        c = data.charCodeAt(++s);\n    c = data.charCodeAt(e);\n    while ((c === 9 || c === 32) && e >= s)\n        c = data.charCodeAt(--e);\n    return data.substring(s, e + 1);\n}\nexport var TokenBuilder;\n(function (TokenBuilder) {\n    function resize(builder) {\n        // scale the size using golden ratio, because why not.\n        const newBuffer = new Uint32Array((1.61 * builder.indices.length) | 0);\n        newBuffer.set(builder.indices);\n        builder.indices = newBuffer;\n        builder.indicesLenMinus2 = (newBuffer.length - 2) | 0;\n    }\n    function add(tokens, start, end) {\n        const builder = tokens;\n        if (builder.offset > builder.indicesLenMinus2) {\n            resize(builder);\n        }\n        builder.indices[builder.offset++] = start;\n        builder.indices[builder.offset++] = end;\n        tokens.count++;\n    }\n    TokenBuilder.add = add;\n    function addToken(tokens, tokenizer) {\n        add(tokens, tokenizer.tokenStart, tokenizer.tokenEnd);\n    }\n    TokenBuilder.addToken = addToken;\n    function addUnchecked(tokens, start, end) {\n        tokens.indices[tokens.offset++] = start;\n        tokens.indices[tokens.offset++] = end;\n        tokens.count++;\n    }\n    TokenBuilder.addUnchecked = addUnchecked;\n    function create(data, size) {\n        size = Math.max(10, size);\n        return {\n            data,\n            indicesLenMinus2: (size - 2) | 0,\n            count: 0,\n            offset: 0,\n            indices: new Uint32Array(size)\n        };\n    }\n    TokenBuilder.create = create;\n})(TokenBuilder || (TokenBuilder = {}));\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { EPSILON } from './common.js';\nfunction Vec4() {\n    return Vec4.zero();\n}\n(function (Vec4) {\n    function zero() {\n        // force double backing array by 0.1.\n        const ret = [0.1, 0, 0, 0];\n        ret[0] = 0.0;\n        return ret;\n    }\n    Vec4.zero = zero;\n    function clone(a) {\n        const out = zero();\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    Vec4.clone = clone;\n    function create(x, y, z, w) {\n        const out = zero();\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = w;\n        return out;\n    }\n    Vec4.create = create;\n    function fromSphere(out, sphere) {\n        out[0] = sphere.center[0];\n        out[1] = sphere.center[1];\n        out[2] = sphere.center[2];\n        out[3] = sphere.radius;\n        return out;\n    }\n    Vec4.fromSphere = fromSphere;\n    function ofSphere(sphere) {\n        return fromSphere(zero(), sphere);\n    }\n    Vec4.ofSphere = ofSphere;\n    function hasNaN(a) {\n        return Number.isNaN(a[0]) || Number.isNaN(a[1]) || Number.isNaN(a[2]) || Number.isNaN(a[3]);\n    }\n    Vec4.hasNaN = hasNaN;\n    function toArray(a, out, offset) {\n        out[offset + 0] = a[0];\n        out[offset + 1] = a[1];\n        out[offset + 2] = a[2];\n        out[offset + 3] = a[3];\n        return out;\n    }\n    Vec4.toArray = toArray;\n    function fromArray(a, array, offset) {\n        a[0] = array[offset + 0];\n        a[1] = array[offset + 1];\n        a[2] = array[offset + 2];\n        a[3] = array[offset + 3];\n        return a;\n    }\n    Vec4.fromArray = fromArray;\n    function toVec3Array(a, out, offset) {\n        out[offset + 0] = a[0];\n        out[offset + 1] = a[1];\n        out[offset + 2] = a[2];\n    }\n    Vec4.toVec3Array = toVec3Array;\n    function fromVec3Array(a, array, offset) {\n        a[0] = array[offset + 0];\n        a[1] = array[offset + 1];\n        a[2] = array[offset + 2];\n        a[3] = 0;\n        return a;\n    }\n    Vec4.fromVec3Array = fromVec3Array;\n    function copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    Vec4.copy = copy;\n    function set(out, x, y, z, w) {\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = w;\n        return out;\n    }\n    Vec4.set = set;\n    function add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        return out;\n    }\n    Vec4.add = add;\n    function distance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1], z = b[2] - a[2], w = b[3] - a[3];\n        return Math.sqrt(x * x + y * y + z * z + w * w);\n    }\n    Vec4.distance = distance;\n    function scale(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        out[4] = a[4] * b;\n        return out;\n    }\n    Vec4.scale = scale;\n    /**\n     * Math.round the components of a Vec4\n     */\n    function round(out, a) {\n        out[0] = Math.round(a[0]);\n        out[1] = Math.round(a[1]);\n        out[2] = Math.round(a[2]);\n        out[3] = Math.round(a[3]);\n        return out;\n    }\n    Vec4.round = round;\n    /**\n     * Math.ceil the components of a Vec4\n     */\n    function ceil(out, a) {\n        out[0] = Math.ceil(a[0]);\n        out[1] = Math.ceil(a[1]);\n        out[2] = Math.ceil(a[2]);\n        out[3] = Math.ceil(a[3]);\n        return out;\n    }\n    Vec4.ceil = ceil;\n    /**\n     * Math.floor the components of a Vec3\n     */\n    function floor(out, a) {\n        out[0] = Math.floor(a[0]);\n        out[1] = Math.floor(a[1]);\n        out[2] = Math.floor(a[2]);\n        out[3] = Math.floor(a[3]);\n        return out;\n    }\n    Vec4.floor = floor;\n    function squaredDistance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1], z = b[2] - a[2], w = b[3] - a[3];\n        return x * x + y * y + z * z + w * w;\n    }\n    Vec4.squaredDistance = squaredDistance;\n    function norm(a) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        return Math.sqrt(x * x + y * y + z * z + w * w);\n    }\n    Vec4.norm = norm;\n    function squaredNorm(a) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        return x * x + y * y + z * z + w * w;\n    }\n    Vec4.squaredNorm = squaredNorm;\n    function transformMat4(out, a, m) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n        out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n        out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n        out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n        return out;\n    }\n    Vec4.transformMat4 = transformMat4;\n    function dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n    }\n    Vec4.dot = dot;\n    /**\n     * Returns the inverse of the components of a Vec4\n     */\n    function inverse(out, a) {\n        out[0] = 1.0 / a[0];\n        out[1] = 1.0 / a[1];\n        out[2] = 1.0 / a[2];\n        out[3] = 1.0 / a[3];\n        return out;\n    }\n    Vec4.inverse = inverse;\n    /**\n     * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n     */\n    function exactEquals(a, b) {\n        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n    }\n    Vec4.exactEquals = exactEquals;\n    /**\n     * Returns whether or not the vectors have approximately the same elements in the same position.\n     */\n    function equals(a, b) {\n        const a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n        const b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n    }\n    Vec4.equals = equals;\n    function toString(a, precision) {\n        return `[${a[0].toPrecision(precision)} ${a[1].toPrecision(precision)} ${a[2].toPrecision(precision)}  ${a[3].toPrecision(precision)}]`;\n    }\n    Vec4.toString = toString;\n})(Vec4 || (Vec4 = {}));\nexport { Vec4 };\n","/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport class ArrayTrajectory {\n    getFrameAtIndex(i) {\n        return this.frames[i];\n    }\n    constructor(frames) {\n        this.frames = frames;\n        this.frameCount = frames.length;\n        this.representative = frames[0];\n        this.duration = frames.length;\n    }\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nfunction createImmediateActions() {\n    const thisGlobal = (function () {\n        const _window = typeof window !== 'undefined' && window;\n        const _self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && self;\n        const _global = typeof global !== 'undefined' && global;\n        return _window || _global || _self;\n    })();\n    const tasksByHandle = {};\n    const doc = typeof document !== 'undefined' ? document : void 0;\n    let nextHandle = 1; // Spec says greater than zero\n    let registerImmediate;\n    function setImmediate(callback, ...args) {\n        // Callback can either be a function or a string\n        if (typeof callback !== 'function') {\n            callback = new Function('' + callback);\n        }\n        // Store and register the task\n        const task = { callback: callback, args: args };\n        tasksByHandle[nextHandle] = task;\n        registerImmediate(nextHandle);\n        return nextHandle++;\n    }\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n    function run(task) {\n        const callback = task.callback;\n        const args = task.args;\n        switch (args.length) {\n            case 0:\n                callback();\n                break;\n            case 1:\n                callback(args[0]);\n                break;\n            case 2:\n                callback(args[0], args[1]);\n                break;\n            case 3:\n                callback(args[0], args[1], args[2]);\n                break;\n            default:\n                callback.apply(undefined, args);\n                break;\n        }\n    }\n    function runIfPresent(handle) {\n        const task = tasksByHandle[handle];\n        clearImmediate(handle);\n        run(task);\n    }\n    function installNextTickImplementation() {\n        registerImmediate = function (handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n    function canUsePostMessage() {\n        if (thisGlobal && thisGlobal.postMessage && !thisGlobal.importScripts) {\n            let postMessageIsAsynchronous = true;\n            const oldOnMessage = thisGlobal.onmessage;\n            thisGlobal.onmessage = function () {\n                postMessageIsAsynchronous = false;\n            };\n            thisGlobal.postMessage('', '*');\n            thisGlobal.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n        const messagePrefix = 'setImmediate$' + Math.random() + '$';\n        const onGlobalMessage = function (event) {\n            if (event.source === thisGlobal &&\n                typeof event.data === 'string' &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n        if (window.addEventListener) {\n            window.addEventListener('message', onGlobalMessage, false);\n        }\n        else {\n            window.attachEvent('onmessage', onGlobalMessage);\n        }\n        registerImmediate = function (handle) {\n            window.postMessage(messagePrefix + handle, '*');\n        };\n    }\n    function installMessageChannelImplementation() {\n        const channel = new MessageChannel();\n        channel.port1.onmessage = function (event) {\n            const handle = event.data;\n            runIfPresent(handle);\n        };\n        registerImmediate = function (handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n    function installReadyStateChangeImplementation() {\n        const html = doc.documentElement;\n        registerImmediate = function (handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            let script = doc.createElement('script');\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n    function installSetTimeoutImplementation() {\n        registerImmediate = function (handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n    // Don't get fooled by e.g. browserify environments.\n    if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n    }\n    else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n    }\n    else if (typeof MessageChannel !== 'undefined') {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n    }\n    else if (doc && 'onreadystatechange' in doc.createElement('script')) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n    }\n    else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n    return {\n        setImmediate,\n        clearImmediate\n    };\n}\nconst immediateActions = (function () {\n    if (typeof setImmediate !== 'undefined') {\n        if (typeof window !== 'undefined') {\n            return {\n                setImmediate: (handler, ...args) => window.setImmediate(handler, ...args),\n                clearImmediate: (handle) => window.clearImmediate(handle)\n            };\n        }\n        else {\n            return { setImmediate, clearImmediate };\n        }\n    }\n    return createImmediateActions();\n}());\nfunction resolveImmediate(res) {\n    immediateActions.setImmediate(res);\n}\nconst Scheduler = {\n    setImmediate: immediateActions.setImmediate,\n    clearImmediate: immediateActions.clearImmediate,\n    immediatePromise() { return new Promise(resolveImmediate); },\n    delay(timeout, value = void 0) { return new Promise(r => setTimeout(r, timeout, value)); }\n};\nexport { Scheduler };\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { IntAdjacencyGraph } from '../../../../../mol-math/graph.js';\nimport { Unit } from '../../unit.js';\nimport { InterUnitGraph } from '../../../../../mol-math/graph/inter-unit-graph.js';\nexport var IntraUnitBonds;\n(function (IntraUnitBonds) {\n    IntraUnitBonds.Empty = IntAdjacencyGraph.create([], [], [], 0, { flags: [], order: [], key: [] });\n})(IntraUnitBonds || (IntraUnitBonds = {}));\nexport class InterUnitBonds extends InterUnitGraph {\n    /** Get inter-unit bond given a bond-location */\n    getBondFromLocation(l) {\n        return Unit.isAtomic(l.aUnit) && Unit.isAtomic(l.bUnit) ? this.getEdge(l.aIndex, l.aUnit.id, l.bIndex, l.bUnit.id) : undefined;\n    }\n    /** Get inter-unit bond index given a bond-location */\n    getBondIndexFromLocation(l) {\n        return Unit.isAtomic(l.aUnit) && Unit.isAtomic(l.bUnit) ? this.getEdgeIndex(l.aIndex, l.aUnit.id, l.bIndex, l.bUnit.id) : -1;\n    }\n}\n(function (InterUnitBonds) {\n    class UnitPairBonds extends InterUnitGraph.UnitPairEdges {\n    }\n    InterUnitBonds.UnitPairBonds = UnitPairBonds;\n})(InterUnitBonds || (InterUnitBonds = {}));\n","/**\n * Copyright (c) 2017-2025 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { BondType } from '../../../model/types.js';\nimport { IntraUnitBonds } from './data.js';\nimport { IntAdjacencyGraph } from '../../../../../mol-math/graph.js';\nimport { getElementIdx, MetalsSet, getElementThreshold, isHydrogen, DefaultBondComputationProps, getPairingThreshold } from './common.js';\nimport { SortedArray } from '../../../../../mol-data/int.js';\nimport { getIntraBondOrderFromTable } from '../../../model/properties/atomic/bonds.js';\nimport { IndexPairBonds } from '../../../../../mol-model-formats/structure/property/bonds/index-pair.js';\nimport { ComponentBond } from '../../../../../mol-model-formats/structure/property/bonds/chem_comp.js';\nimport { StructConn } from '../../../../../mol-model-formats/structure/property/bonds/struct_conn.js';\nimport { Vec3 } from '../../../../../mol-math/linear-algebra.js';\nimport { equalEps } from '../../../../../mol-math/linear-algebra/3d/common.js';\nimport { Model } from '../../../model/model.js';\nimport { sortedCantorPairing } from '../../../../../mol-data/util.js';\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\nconst v3distance = Vec3.distance;\nconst CoarseGrainedBondMaxRadius = 6;\nconst CoarseGrainedIntraResidueBondMaxDistance = 5.5;\nconst CoarseGrainedInterResidueBondMaxDistance = 3.9;\nfunction getGraph(atomA, atomB, _order, _flags, _key, atomCount, props) {\n    const builder = new IntAdjacencyGraph.EdgeBuilder(atomCount, atomA, atomB);\n    const flags = new Uint16Array(builder.slotCount);\n    const order = new Int8Array(builder.slotCount);\n    const key = new Uint32Array(builder.slotCount);\n    for (let i = 0, _i = builder.edgeCount; i < _i; i++) {\n        builder.addNextEdge();\n        builder.assignProperty(flags, _flags[i]);\n        builder.assignProperty(order, _order[i]);\n        builder.assignProperty(key, _key[i]);\n    }\n    return builder.createGraph({ flags, order, key }, props);\n}\nconst tmpDistVecA = Vec3();\nconst tmpDistVecB = Vec3();\nfunction getDistance(unit, indexA, indexB) {\n    unit.conformation.position(indexA, tmpDistVecA);\n    unit.conformation.position(indexB, tmpDistVecB);\n    return v3distance(tmpDistVecA, tmpDistVecB);\n}\nconst __structConnAdded = new Set();\nfunction findIndexPairBonds(unit) {\n    const indexPairs = IndexPairBonds.Provider.get(unit.model);\n    const { elements: atoms } = unit;\n    const { type_symbol } = unit.model.atomicHierarchy.atoms;\n    const atomCount = unit.elements.length;\n    const { maxDistance } = indexPairs;\n    const { offset, b, edgeProps: { order, distance, flag, key, operatorA, operatorB } } = indexPairs.bonds;\n    const { atomSourceIndex: sourceIndex } = unit.model.atomicHierarchy;\n    const { invertedIndex } = Model.getInvertedAtomSourceIndex(unit.model);\n    const atomA = [];\n    const atomB = [];\n    const flags = [];\n    const orders = [];\n    const keys = [];\n    const opKey = unit.conformation.operator.key;\n    for (let _aI = 0; _aI < atomCount; _aI++) {\n        const aI = atoms[_aI];\n        const aeI = getElementIdx(type_symbol.value(aI));\n        const isHa = isHydrogen(aeI);\n        const srcA = sourceIndex.value(aI);\n        for (let i = offset[srcA], il = offset[srcA + 1]; i < il; ++i) {\n            const bI = invertedIndex[b[i]];\n            if (aI >= bI)\n                continue;\n            const _bI = SortedArray.indexOf(unit.elements, bI);\n            if (_bI < 0)\n                continue;\n            const opA = operatorA[i];\n            const opB = operatorB[i];\n            if ((opA >= 0 && opA !== opKey) || (opB >= 0 && opB !== opKey))\n                continue;\n            const beI = getElementIdx(type_symbol.value(bI));\n            const d = distance[i];\n            const dist = getDistance(unit, aI, bI);\n            let add = false;\n            if (d >= 0) {\n                add = equalEps(dist, d, 0.3);\n            }\n            else if (maxDistance >= 0) {\n                add = dist < maxDistance;\n            }\n            else {\n                const pairingThreshold = getPairingThreshold(aeI, beI, getElementThreshold(aeI), getElementThreshold(beI));\n                add = dist < pairingThreshold;\n                if (isHa && isHydrogen(beI)) {\n                    // TODO handle molecular hydrogen\n                    add = false;\n                }\n            }\n            if (add) {\n                atomA[atomA.length] = _aI;\n                atomB[atomB.length] = _bI;\n                orders[orders.length] = order[i];\n                flags[flags.length] = flag[i];\n                keys[keys.length] = key[i];\n            }\n        }\n    }\n    return getGraph(atomA, atomB, orders, flags, keys, atomCount, {\n        canRemap: false,\n        cacheable: indexPairs.cacheable,\n    });\n}\nfunction findBonds(unit, props) {\n    const isCoarseGrained = Model.isCoarseGrained(unit.model);\n    const maxRadius = isCoarseGrained ? CoarseGrainedBondMaxRadius : props.maxRadius;\n    const { x, y, z } = unit.model.atomicConformation;\n    const atomCount = unit.elements.length;\n    const { elements: atoms, residueIndex, chainIndex } = unit;\n    const { type_symbol, label_atom_id, label_alt_id, label_comp_id } = unit.model.atomicHierarchy.atoms;\n    const { label_seq_id } = unit.model.atomicHierarchy.residues;\n    const { traceElementIndex } = unit.model.atomicHierarchy.derived.residue;\n    const { index } = unit.model.atomicHierarchy;\n    const { byEntityKey } = unit.model.sequence;\n    const query3d = unit.lookup3d;\n    const structConn = StructConn.Provider.get(unit.model);\n    const component = ComponentBond.Provider.get(unit.model);\n    const structConnExhaustive = StructConn.isExhaustive(unit.model);\n    const atomA = [];\n    const atomB = [];\n    const flags = [];\n    const order = [];\n    const key = [];\n    let lastResidue = -1;\n    let componentMap = void 0;\n    let isWatery = true, isDictionaryBased = true, isSequenced = true;\n    const structConnAdded = __structConnAdded;\n    const hasStructConnEntries = !!(structConn === null || structConn === void 0 ? void 0 : structConn.residueCantorPairs.size);\n    for (let _aI = 0; _aI < atomCount; _aI++) {\n        const aI = atoms[_aI];\n        const elemA = type_symbol.value(aI);\n        if (isWatery && (elemA !== 'H' && elemA !== 'O'))\n            isWatery = false;\n        const structConnEntries = props.forceCompute ? void 0 : structConn && structConn.byAtomIndex.get(aI);\n        let hasStructConn = false;\n        if (structConnEntries) {\n            for (const se of structConnEntries) {\n                const { partnerA, partnerB } = se;\n                // symmetry must be the same for intra-unit bonds\n                if (partnerA.symmetry !== partnerB.symmetry)\n                    continue;\n                const p = partnerA.atomIndex === aI ? partnerB : partnerA;\n                const _bI = SortedArray.indexOf(unit.elements, p.atomIndex);\n                if (_bI < 0 || atoms[_bI] < aI)\n                    continue;\n                atomA[atomA.length] = _aI;\n                atomB[atomB.length] = _bI;\n                flags[flags.length] = se.flags;\n                order[order.length] = se.order;\n                key[key.length] = se.rowIndex;\n                if (!hasStructConn)\n                    structConnAdded.clear();\n                hasStructConn = true;\n                structConnAdded.add(_bI);\n            }\n        }\n        if (structConnExhaustive)\n            continue;\n        const raI = residueIndex[aI];\n        const seqIdA = label_seq_id.value(raI);\n        const compId = label_comp_id.value(aI);\n        if (!props.forceCompute && raI !== lastResidue) {\n            if (!!component && component.entries.has(compId)) {\n                const entitySeq = byEntityKey[index.getEntityFromChain(chainIndex[aI])];\n                if (entitySeq && entitySeq.sequence.microHet.has(seqIdA)) {\n                    // compute for sequence positions with micro-heterogeneity\n                    componentMap = void 0;\n                }\n                else {\n                    componentMap = component.entries.get(compId).map;\n                }\n            }\n            else {\n                componentMap = void 0;\n            }\n        }\n        lastResidue = raI;\n        const aeI = getElementIdx(elemA);\n        const atomIdA = label_atom_id.value(aI);\n        const componentPairs = componentMap ? componentMap.get(atomIdA) : void 0;\n        const { indices, count, squaredDistances } = query3d.find(x[aI], y[aI], z[aI], maxRadius);\n        const isHa = isHydrogen(aeI);\n        const thresholdA = getElementThreshold(aeI);\n        const altA = label_alt_id.value(aI);\n        const metalA = MetalsSet.has(aeI);\n        for (let ni = 0; ni < count; ni++) {\n            const _bI = indices[ni];\n            if (hasStructConn && structConnAdded.has(_bI))\n                continue;\n            const bI = atoms[_bI];\n            if (bI <= aI)\n                continue;\n            const altB = label_alt_id.value(bI);\n            if (altA && altB && altA !== altB)\n                continue;\n            // Do not add bonds for residues that have a structConn entry\n            if (hasStructConnEntries) {\n                const residuePair = sortedCantorPairing(residueIndex[aI], residueIndex[bI]);\n                if (structConn.residueCantorPairs.has(residuePair))\n                    continue;\n            }\n            const beI = getElementIdx(type_symbol.value(bI));\n            const isHb = isHydrogen(beI);\n            if (isHa && isHb)\n                continue;\n            const isMetal = (metalA || MetalsSet.has(beI)) && !(isHa || isHb);\n            const rbI = residueIndex[bI];\n            // handle \"component dictionary\" bonds.\n            if (raI === rbI && componentPairs) {\n                const e = componentPairs.get(label_atom_id.value(bI));\n                if (e) {\n                    atomA[atomA.length] = _aI;\n                    atomB[atomB.length] = _bI;\n                    order[order.length] = e.order;\n                    let flag = e.flags;\n                    if (isMetal) {\n                        if (flag | BondType.Flag.Covalent)\n                            flag ^= BondType.Flag.Covalent;\n                        flag |= BondType.Flag.MetallicCoordination;\n                    }\n                    flags[flags.length] = flag;\n                    key[key.length] = e.key;\n                }\n                continue;\n            }\n            const dist = Math.sqrt(squaredDistances[ni]);\n            if (dist === 0)\n                continue;\n            let flag = false;\n            if (isCoarseGrained) {\n                if (raI === rbI) {\n                    // intra residue bonds\n                    flag = dist <= CoarseGrainedIntraResidueBondMaxDistance;\n                }\n                else {\n                    // inter residue \"backbone\" bonds\n                    flag = dist <= CoarseGrainedInterResidueBondMaxDistance && traceElementIndex[raI] === aI && traceElementIndex[rbI] === bI;\n                }\n            }\n            else {\n                const pairingThreshold = getPairingThreshold(aeI, beI, thresholdA, getElementThreshold(beI));\n                flag = dist <= pairingThreshold;\n            }\n            if (flag) {\n                atomA[atomA.length] = _aI;\n                atomB[atomB.length] = _bI;\n                order[order.length] = getIntraBondOrderFromTable(compId, atomIdA, label_atom_id.value(bI));\n                flags[flags.length] = (isMetal ? BondType.Flag.MetallicCoordination : BondType.Flag.Covalent) | BondType.Flag.Computed;\n                key[key.length] = -1;\n                const seqIdB = label_seq_id.value(rbI);\n                if (seqIdA === seqIdB)\n                    isDictionaryBased = false;\n                if (Math.abs(seqIdA - seqIdB) > 1)\n                    isSequenced = false;\n            }\n        }\n    }\n    return getGraph(atomA, atomB, order, flags, key, atomCount, {\n        canRemap: isWatery || (isDictionaryBased && isSequenced),\n    });\n}\nfunction canGetFromIndexPairBonds(unit) {\n    if (unit.conformation.operator.key === -1)\n        return false;\n    const indexPairs = IndexPairBonds.Provider.get(unit.model);\n    return !!(indexPairs === null || indexPairs === void 0 ? void 0 : indexPairs.hasOperators);\n}\nfunction getIndexPairBonds(unit) {\n    const indexPairs = IndexPairBonds.Provider.get(unit.model);\n    const bonds = indexPairs.bySameOperator.get(unit.conformation.operator.key);\n    if (!bonds)\n        return IntraUnitBonds.Empty;\n    const { a, b, edgeProps: { key, flag, order } } = indexPairs.bonds;\n    const { invertedIndex } = Model.getInvertedAtomSourceIndex(unit.model);\n    const { elements } = unit;\n    const atomA = [];\n    const atomB = [];\n    const flags = [];\n    const orders = [];\n    const keys = [];\n    for (let j = 0, jl = bonds.length; j < jl; ++j) {\n        const i = bonds[j];\n        if (a[i] >= b[i])\n            continue;\n        const aI = invertedIndex[a[i]];\n        const _aI = SortedArray.indexOf(elements, aI);\n        if (_aI < 0)\n            continue;\n        const bI = invertedIndex[b[i]];\n        const _bI = SortedArray.indexOf(elements, bI);\n        if (_bI < 0)\n            continue;\n        atomA[atomA.length] = _aI;\n        atomB[atomB.length] = _bI;\n        flags[flags.length] = flag[i];\n        orders[orders.length] = order[i];\n        keys[keys.length] = key[i];\n    }\n    return getGraph(atomA, atomB, orders, flags, keys, elements.length, {\n        canRemap: false,\n        cacheable: indexPairs.cacheable,\n    });\n}\nfunction computeIntraUnitBonds(unit, props) {\n    const p = { ...DefaultBondComputationProps, ...props };\n    if (p.noCompute)\n        return IntraUnitBonds.Empty;\n    if (unit.elements.length <= 1)\n        return IntraUnitBonds.Empty;\n    if (!p.forceCompute && IndexPairBonds.Provider.get(unit.model)) {\n        return canGetFromIndexPairBonds(unit) ? getIndexPairBonds(unit) : findIndexPairBonds(unit);\n    }\n    else {\n        return findBonds(unit, p);\n    }\n}\nexport { computeIntraUnitBonds };\n","/**\n * Copyright (c) 2017-2025 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { BondType, MoleculeType } from '../../../model/types.js';\nimport { Structure } from '../../structure.js';\nimport { Unit } from '../../unit.js';\nimport { getElementIdx, getElementThreshold, isHydrogen, MetalsSet, DefaultBondComputationProps, getPairingThreshold } from './common.js';\nimport { InterUnitBonds } from './data.js';\nimport { SortedArray } from '../../../../../mol-data/int.js';\nimport { Vec3, Mat4 } from '../../../../../mol-math/linear-algebra.js';\nimport { getInterBondOrderFromTable } from '../../../model/properties/atomic/bonds.js';\nimport { IndexPairBonds } from '../../../../../mol-model-formats/structure/property/bonds/index-pair.js';\nimport { InterUnitGraph } from '../../../../../mol-math/graph/inter-unit-graph.js';\nimport { StructConn } from '../../../../../mol-model-formats/structure/property/bonds/struct_conn.js';\nimport { equalEps } from '../../../../../mol-math/linear-algebra/3d/common.js';\nimport { Model } from '../../../model.js';\nimport { cantorPairing, invertCantorPairing, sortedCantorPairing } from '../../../../../mol-data/util.js';\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\nconst v3distance = Vec3.distance;\nconst v3set = Vec3.set;\nconst v3squaredDistance = Vec3.squaredDistance;\nconst v3transformMat4 = Vec3.transformMat4;\nconst tmpDistVecA = Vec3();\nconst tmpDistVecB = Vec3();\nfunction getDistance(unitA, indexA, unitB, indexB) {\n    unitA.conformation.position(indexA, tmpDistVecA);\n    unitB.conformation.position(indexB, tmpDistVecB);\n    return v3distance(tmpDistVecA, tmpDistVecB);\n}\nconst _imageTransform = Mat4();\nconst _imageA = Vec3();\nfunction findPairBonds(unitA, unitB, props, builder) {\n    const { maxRadius } = props;\n    const { elements: atomsA, residueIndex: residueIndexA } = unitA;\n    const { x: xA, y: yA, z: zA } = unitA.model.atomicConformation;\n    const { elements: atomsB, residueIndex: residueIndexB } = unitB;\n    const atomCount = unitA.elements.length;\n    const { type_symbol: type_symbolA, label_alt_id: label_alt_idA, label_atom_id: label_atom_idA, label_comp_id: label_comp_idA } = unitA.model.atomicHierarchy.atoms;\n    const { type_symbol: type_symbolB, label_alt_id: label_alt_idB, label_atom_id: label_atom_idB, label_comp_id: label_comp_idB } = unitB.model.atomicHierarchy.atoms;\n    const { auth_seq_id: auth_seq_idA } = unitA.model.atomicHierarchy.residues;\n    const { auth_seq_id: auth_seq_idB } = unitB.model.atomicHierarchy.residues;\n    const { occupancy: occupancyA } = unitA.model.atomicConformation;\n    const { occupancy: occupancyB } = unitB.model.atomicConformation;\n    const hasOccupancy = occupancyA.isDefined && occupancyB.isDefined;\n    const structConn = unitA.model === unitB.model && StructConn.Provider.get(unitA.model);\n    const indexPairs = !props.forceCompute && unitA.model === unitB.model && IndexPairBonds.Provider.get(unitA.model);\n    const { atomSourceIndex: sourceIndex } = unitA.model.atomicHierarchy;\n    const { invertedIndex } = indexPairs ? Model.getInvertedAtomSourceIndex(unitB.model) : { invertedIndex: void 0 };\n    const structConnExhaustive = unitA.model === unitB.model && StructConn.isExhaustive(unitA.model);\n    // the lookup queries need to happen in the \"unitB space\".\n    // that means _imageA = inverseOperB(operA(aI))\n    const imageTransform = Mat4.mul(_imageTransform, unitB.conformation.operator.inverse, unitA.conformation.operator.matrix);\n    const isNotIdentity = !Mat4.isIdentity(imageTransform);\n    const { center: bCenter, radius: bRadius } = unitB.boundary.sphere;\n    const testDistanceSq = (bRadius + maxRadius) * (bRadius + maxRadius);\n    builder.startUnitPair(unitA.id, unitB.id);\n    const opKeyA = unitA.conformation.operator.key;\n    const opKeyB = unitB.conformation.operator.key;\n    for (let _aI = 0; _aI < atomCount; _aI++) {\n        const aI = atomsA[_aI];\n        v3set(_imageA, xA[aI], yA[aI], zA[aI]);\n        if (isNotIdentity)\n            v3transformMat4(_imageA, _imageA, imageTransform);\n        if (v3squaredDistance(_imageA, bCenter) > testDistanceSq)\n            continue;\n        if (!props.forceCompute && indexPairs) {\n            const { maxDistance } = indexPairs;\n            const { offset, b, edgeProps: { order, distance, flag, key, operatorA, operatorB } } = indexPairs.bonds;\n            const srcA = sourceIndex.value(aI);\n            const aeI = getElementIdx(type_symbolA.value(aI));\n            for (let i = offset[srcA], il = offset[srcA + 1]; i < il; ++i) {\n                const bI = invertedIndex[b[i]];\n                const _bI = SortedArray.indexOf(unitB.elements, bI);\n                if (_bI < 0)\n                    continue;\n                const opA = operatorA[i];\n                const opB = operatorB[i];\n                if (opA >= 0 && opB >= 0) {\n                    if (opA === opB)\n                        continue;\n                    if (opA !== opKeyA || opB !== opKeyB)\n                        continue;\n                }\n                const beI = getElementIdx(type_symbolA.value(bI));\n                const d = distance[i];\n                const dist = getDistance(unitA, aI, unitB, bI);\n                let add = false;\n                if (d >= 0) {\n                    add = equalEps(dist, d, 0.3);\n                }\n                else if (maxDistance >= 0) {\n                    add = dist < maxDistance;\n                }\n                else {\n                    const pairingThreshold = getPairingThreshold(aeI, beI, getElementThreshold(aeI), getElementThreshold(beI));\n                    add = dist < pairingThreshold;\n                    if (isHydrogen(aeI) && isHydrogen(beI)) {\n                        // TODO handle molecular hydrogen\n                        add = false;\n                    }\n                }\n                if (add) {\n                    builder.add(_aI, _bI, { order: order[i], flag: flag[i], key: key[i] });\n                }\n            }\n            continue; // assume `indexPairs` supplies all bonds\n        }\n        const structConnEntries = props.forceCompute ? void 0 : structConn && structConn.byAtomIndex.get(aI);\n        if (structConnEntries && structConnEntries.length) {\n            let added = false;\n            for (const se of structConnEntries) {\n                const { partnerA, partnerB } = se;\n                const p = partnerA.atomIndex === aI ? partnerB : partnerA;\n                const _bI = SortedArray.indexOf(unitB.elements, p.atomIndex);\n                if (_bI < 0)\n                    continue;\n                // check if the bond is within MAX_RADIUS for this pair of units\n                if (getDistance(unitA, aI, unitB, p.atomIndex) > maxRadius)\n                    continue;\n                builder.add(_aI, _bI, { order: se.order, flag: se.flags, key: se.rowIndex });\n                added = true;\n            }\n            // assume, for an atom, that if any inter unit bond is given\n            // all are given and thus we don't need to compute any other\n            if (added)\n                continue;\n        }\n        if (structConnExhaustive)\n            continue;\n        const occA = occupancyA.value(aI);\n        const { lookup3d } = unitB;\n        const { indices, count, squaredDistances } = lookup3d.find(_imageA[0], _imageA[1], _imageA[2], maxRadius);\n        if (count === 0)\n            continue;\n        const aeI = getElementIdx(type_symbolA.value(aI));\n        const isHa = isHydrogen(aeI);\n        const thresholdA = getElementThreshold(aeI);\n        const altA = label_alt_idA.value(aI);\n        const metalA = MetalsSet.has(aeI);\n        const atomIdA = label_atom_idA.value(aI);\n        const compIdA = label_comp_idA.value(residueIndexA[aI]);\n        for (let ni = 0; ni < count; ni++) {\n            const _bI = indices[ni];\n            const bI = atomsB[_bI];\n            const altB = label_alt_idB.value(bI);\n            if (altA && altB && altA !== altB)\n                continue;\n            // Do not include bonds between images of the same residue with partial occupancy.\n            // TODO: is this condition good enough?\n            // - It works for cases like 3WQJ (label_asym_id: I) which have partial occupancy.\n            // - Does NOT work for cases like 1RB8 (DC 7) with full occupancy.\n            if (hasOccupancy && occupancyB.value(bI) < 1 && occA < 1) {\n                if (auth_seq_idA.value(residueIndexA[aI]) === auth_seq_idB.value(residueIndexB[bI])) {\n                    continue;\n                }\n            }\n            if (structConn && unitA.model === unitB.model) {\n                const residuePair = sortedCantorPairing(residueIndexA[aI], residueIndexB[bI]);\n                // Do not add bonds for residue pairs that have a structConn entry\n                if (structConn.residueCantorPairs.has(residuePair))\n                    continue;\n            }\n            const beI = getElementIdx(type_symbolB.value(bI));\n            const isHb = isHydrogen(beI);\n            if (isHa && isHb)\n                continue;\n            const isMetal = (metalA || MetalsSet.has(beI)) && !(isHa || isHb);\n            const dist = Math.sqrt(squaredDistances[ni]);\n            if (dist === 0)\n                continue;\n            const pairingThreshold = getPairingThreshold(aeI, beI, thresholdA, getElementThreshold(beI));\n            if (dist <= pairingThreshold) {\n                const atomIdB = label_atom_idB.value(bI);\n                const compIdB = label_comp_idB.value(residueIndexB[bI]);\n                builder.add(_aI, _bI, {\n                    order: getInterBondOrderFromTable(compIdA, compIdB, atomIdA, atomIdB),\n                    flag: (isMetal ? BondType.Flag.MetallicCoordination : BondType.Flag.Covalent) | BondType.Flag.Computed,\n                    key: -1\n                });\n            }\n        }\n    }\n    builder.finishUnitPair();\n}\nfunction canAddFromIndexPairBonds(structure) {\n    for (const m of structure.models) {\n        const indexPairs = IndexPairBonds.Provider.get(m);\n        if (!(indexPairs === null || indexPairs === void 0 ? void 0 : indexPairs.hasOperators))\n            return false;\n    }\n    for (const u of structure.units) {\n        if (u.conformation.operator.key === -1)\n            return false;\n    }\n    return true;\n}\nfunction addIndexPairBonds(structure, builder) {\n    const opUnits = new Map();\n    for (const u of structure.units) {\n        const { key } = u.conformation.operator;\n        if (opUnits.has(key))\n            opUnits.get(key).add(u);\n        else\n            opUnits.set(key, new Set([u]));\n    }\n    for (const m of structure.models) {\n        const indexPairs = IndexPairBonds.Provider.get(m);\n        const { a, b } = indexPairs.bonds;\n        const { order, flag, key, operatorA, operatorB } = indexPairs.bonds.edgeProps;\n        const { invertedIndex } = Model.getInvertedAtomSourceIndex(m);\n        const atomsToUnits = new Map();\n        for (const u of structure.units) {\n            if (u.model !== m)\n                continue;\n            for (let i = 0, il = u.elements.length; i < il; ++i) {\n                const aI = u.elements[i];\n                if (atomsToUnits.has(aI))\n                    atomsToUnits.get(aI).add(u);\n                else\n                    atomsToUnits.set(aI, new Set([u]));\n            }\n        }\n        const pairs = new Map();\n        for (let i = 0, il = operatorA.length; i < il; ++i) {\n            let unitsA;\n            let unitsB;\n            if (operatorA[i] === operatorB[i]) {\n                unitsA = atomsToUnits.get(invertedIndex[a[i]]);\n                unitsB = atomsToUnits.get(invertedIndex[b[i]]);\n            }\n            else {\n                unitsA = opUnits.get(operatorA[i]);\n                unitsB = opUnits.get(operatorB[i]);\n            }\n            if (!unitsA || !unitsB)\n                continue;\n            for (const uA of unitsA) {\n                if (operatorA[i] !== uA.conformation.operator.key)\n                    continue;\n                for (const uB of unitsB) {\n                    if (operatorB[i] !== uB.conformation.operator.key)\n                        continue;\n                    if (uA === uB || !Unit.isAtomic(uA) || !Unit.isAtomic(uB))\n                        continue;\n                    if (uA.id > uB.id)\n                        continue;\n                    const h = cantorPairing(uA.id, uB.id);\n                    if (pairs.has(h))\n                        pairs.get(h).add(i);\n                    else\n                        pairs.set(h, new Set([i]));\n                }\n            }\n        }\n        const unitIds = [-1, -1];\n        pairs.forEach((indices, h) => {\n            const [unitIdA, unitIdB] = invertCantorPairing(unitIds, h);\n            const uA = structure.unitMap.get(unitIdA);\n            const uB = structure.unitMap.get(unitIdB);\n            builder.startUnitPair(unitIdA, unitIdB);\n            indices.forEach(i => {\n                const aI = invertedIndex[a[i]];\n                const _aI = SortedArray.indexOf(uA.elements, aI);\n                if (_aI < 0)\n                    return;\n                const bI = invertedIndex[b[i]];\n                const _bI = SortedArray.indexOf(uB.elements, bI);\n                if (_bI < 0)\n                    return;\n                builder.add(_aI, _bI, { order: order[i], flag: flag[i], key: key[i] });\n            });\n            builder.finishUnitPair();\n        });\n    }\n}\nconst DefaultInterBondComputationProps = {\n    ...DefaultBondComputationProps,\n    ignoreWater: true,\n    ignoreIon: true,\n};\nfunction findBonds(structure, props) {\n    const builder = new InterUnitGraph.Builder();\n    const hasIndexPairBonds = structure.models.some(m => IndexPairBonds.Provider.get(m));\n    const hasExhaustiveStructConn = structure.models.some(m => StructConn.isExhaustive(m));\n    if (props.noCompute || (structure.isCoarseGrained && !hasIndexPairBonds && !hasExhaustiveStructConn)) {\n        return new InterUnitBonds(builder.getMap());\n    }\n    if (!props.forceCompute && canAddFromIndexPairBonds(structure)) {\n        addIndexPairBonds(structure, builder);\n        return new InterUnitBonds(builder.getMap());\n    }\n    Structure.eachUnitPair(structure, (unitA, unitB) => {\n        findPairBonds(unitA, unitB, props, builder);\n    }, {\n        maxRadius: props.maxRadius,\n        validUnit: (unit) => props.validUnit(unit),\n        validUnitPair: (unitA, unitB) => props.validUnitPair(structure, unitA, unitB)\n    });\n    return new InterUnitBonds(builder.getMap());\n}\nfunction computeInterUnitBonds(structure, props) {\n    const p = { ...DefaultInterBondComputationProps, ...props };\n    return findBonds(structure, {\n        ...p,\n        validUnit: (props && props.validUnit) || (u => Unit.isAtomic(u)),\n        validUnitPair: (props && props.validUnitPair) || ((s, a, b) => {\n            const isValidPair = Structure.validUnitPair(s, a, b);\n            if (!isValidPair)\n                return false;\n            const mtA = a.model.atomicHierarchy.derived.residue.moleculeType;\n            const mtB = b.model.atomicHierarchy.derived.residue.moleculeType;\n            const notWater = ((!Unit.isAtomic(a) || mtA[a.residueIndex[a.elements[0]]] !== MoleculeType.Water) &&\n                (!Unit.isAtomic(b) || mtB[b.residueIndex[b.elements[0]]] !== MoleculeType.Water));\n            const notIonA = (!Unit.isAtomic(a) || mtA[a.residueIndex[a.elements[0]]] !== MoleculeType.Ion);\n            const notIonB = (!Unit.isAtomic(b) || mtB[b.residueIndex[b.elements[0]]] !== MoleculeType.Ion);\n            const notIon = notIonA && notIonB;\n            const check = (notWater || !p.ignoreWater) && (notIon || !p.ignoreIon);\n            if (!check) {\n                // In case both units have a struct conn record, ignore other criteria\n                return hasCommonStructConnRecord(a, b);\n            }\n            return true;\n        }),\n    });\n}\nfunction hasCommonStructConnRecord(unitA, unitB) {\n    if (unitA.model !== unitB.model || !Unit.isAtomic(unitA) || !Unit.isAtomic(unitB))\n        return false;\n    const structConn = StructConn.Provider.get(unitA.model);\n    if (!structConn)\n        return false;\n    const smaller = unitA.elements.length < unitB.elements.length ? unitA : unitB;\n    const bigger = unitA.elements.length >= unitB.elements.length ? unitA : unitB;\n    const { elements: xs } = smaller;\n    const { elements: ys } = bigger;\n    const { indexOf } = SortedArray;\n    for (let i = 0, _i = xs.length; i < _i; i++) {\n        const aI = xs[i];\n        const entries = structConn.byAtomIndex.get(aI);\n        if (!(entries === null || entries === void 0 ? void 0 : entries.length))\n            continue;\n        for (const e of entries) {\n            const bI = e.partnerA.atomIndex === aI ? e.partnerB.atomIndex : e.partnerA.atomIndex;\n            if (indexOf(ys, bI) >= 0)\n                return true;\n        }\n    }\n    return false;\n}\nexport { computeInterUnitBonds };\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Paul Pillot <paul.pillot@tandemai.com>\n */\nimport { Unit, StructureElement } from '../../structure.js';\nimport { BondType } from '../../model/types.js';\nimport { SortedArray, OrderedSet } from '../../../../mol-data/int.js';\nimport { CentroidHelper } from '../../../../mol-math/geometry/centroid-helper.js';\nexport * from './bonds/data.js';\nexport * from './bonds/intra-compute.js';\nexport * from './bonds/inter-compute.js';\nvar Bond;\n(function (Bond) {\n    function Location(aStructure, aUnit, aIndex, bStructure, bUnit, bIndex) {\n        return {\n            kind: 'bond-location',\n            aStructure: aStructure,\n            aUnit: aUnit,\n            aIndex: aIndex,\n            bStructure: bStructure,\n            bUnit: bUnit,\n            bIndex: bIndex\n        };\n    }\n    Bond.Location = Location;\n    function isLocation(x) {\n        return !!x && x.kind === 'bond-location';\n    }\n    Bond.isLocation = isLocation;\n    function areLocationsEqual(locA, locB) {\n        return (locA.aStructure.label === locB.aStructure.label && locA.bStructure.label === locB.bStructure.label &&\n            locA.aIndex === locB.aIndex && locA.bIndex === locB.bIndex &&\n            locA.aUnit.id === locB.aUnit.id && locA.bUnit.id === locB.bUnit.id);\n    }\n    Bond.areLocationsEqual = areLocationsEqual;\n    function Loci(structure, bonds) {\n        return { kind: 'bond-loci', structure, bonds: bonds };\n    }\n    Bond.Loci = Loci;\n    function isLoci(x) {\n        return !!x && x.kind === 'bond-loci';\n    }\n    Bond.isLoci = isLoci;\n    function areLociEqual(a, b) {\n        if (a.structure !== b.structure)\n            return false;\n        if (a.bonds.length !== b.bonds.length)\n            return false;\n        for (let i = 0, il = a.bonds.length; i < il; ++i) {\n            if (!areLocationsEqual(a.bonds[i], b.bonds[i]))\n                return false;\n        }\n        return true;\n    }\n    Bond.areLociEqual = areLociEqual;\n    function isLociEmpty(loci) {\n        return loci.bonds.length === 0 ? true : false;\n    }\n    Bond.isLociEmpty = isLociEmpty;\n    function remapLoci(loci, structure) {\n        if (structure === loci.structure)\n            return loci;\n        const bonds = [];\n        loci.bonds.forEach(l => {\n            const unitA = structure.unitMap.get(l.aUnit.id);\n            if (!unitA)\n                return;\n            const unitB = structure.unitMap.get(l.bUnit.id);\n            if (!unitB)\n                return;\n            const elementA = l.aUnit.elements[l.aIndex];\n            const indexA = SortedArray.indexOf(unitA.elements, elementA);\n            if (indexA === -1)\n                return;\n            const elementB = l.bUnit.elements[l.bIndex];\n            const indexB = SortedArray.indexOf(unitB.elements, elementB);\n            if (indexB === -1)\n                return;\n            bonds.push(Location(loci.structure, unitA, indexA, loci.structure, unitB, indexB));\n        });\n        return Loci(structure, bonds);\n    }\n    Bond.remapLoci = remapLoci;\n    function toStructureElementLoci(loci) {\n        const elements = [];\n        const map = new Map();\n        for (const lociBond of loci.bonds) {\n            const { aIndex, aUnit, bIndex, bUnit } = lociBond;\n            if (aUnit === bUnit) {\n                if (map.has(aUnit.id))\n                    map.get(aUnit.id).push(aIndex, bIndex);\n                else\n                    map.set(aUnit.id, [aIndex, bIndex]);\n            }\n            else {\n                if (map.has(aUnit.id))\n                    map.get(aUnit.id).push(aIndex);\n                else\n                    map.set(aUnit.id, [aIndex]);\n                if (map.has(bUnit.id))\n                    map.get(bUnit.id).push(bIndex);\n                else\n                    map.set(bUnit.id, [bIndex]);\n            }\n        }\n        map.forEach((indices, id) => {\n            elements.push({\n                unit: loci.structure.unitMap.get(id),\n                indices: SortedArray.deduplicate(SortedArray.ofUnsortedArray(indices))\n            });\n        });\n        return StructureElement.Loci(loci.structure, elements);\n    }\n    Bond.toStructureElementLoci = toStructureElementLoci;\n    function toFirstStructureElementLoci(loci) {\n        const { aUnit, aIndex } = loci.bonds[0];\n        return StructureElement.Loci(loci.structure, [{ unit: aUnit, indices: OrderedSet.ofSingleton(aIndex) }]);\n    }\n    Bond.toFirstStructureElementLoci = toFirstStructureElementLoci;\n    function getType(structure, location) {\n        if (location.aUnit === location.bUnit) {\n            const bonds = location.aUnit.bonds;\n            const idx = bonds.getEdgeIndex(location.aIndex, location.bIndex);\n            if (idx < 0)\n                return BondType.create(BondType.Flag.None);\n            return BondType.create(bonds.edgeProps.flags[idx]);\n        }\n        else {\n            const bond = structure.interUnitBonds.getBondFromLocation(location);\n            if (bond)\n                return BondType.create(bond.props.flag);\n            return BondType.create(BondType.Flag.None);\n        }\n    }\n    Bond.getType = getType;\n    function getOrder(structure, location) {\n        if (location.aUnit === location.bUnit) {\n            const bonds = location.aUnit.bonds;\n            const idx = bonds.getEdgeIndex(location.aIndex, location.bIndex);\n            if (idx < 0)\n                return 0;\n            return bonds.edgeProps.order[idx];\n        }\n        else {\n            const bond = structure.interUnitBonds.getBondFromLocation(location);\n            if (bond)\n                return bond.props.order;\n            return 0;\n        }\n    }\n    Bond.getOrder = getOrder;\n    function getIntraUnitBondCount(structure) {\n        let count = 0;\n        for (const ug of structure.unitSymmetryGroups) {\n            const u = ug.units[0];\n            if (Unit.isAtomic(u)) {\n                count += u.bonds.edgeCount * ug.units.length;\n            }\n        }\n        return count;\n    }\n    Bond.getIntraUnitBondCount = getIntraUnitBondCount;\n    class ElementBondIterator {\n        move() {\n            this.advance();\n            return this.current;\n        }\n        setElement(structure, unit, index) {\n            this.structure = structure;\n            this.unit = unit;\n            this.index = index;\n            this.interBondIndices = structure.interUnitBonds.getEdgeIndices(index, unit.id);\n            this.interBondCount = this.interBondIndices.length;\n            this.interBondIndex = 0;\n            this.intraBondEnd = unit.bonds.offset[index + 1];\n            this.intraBondIndex = unit.bonds.offset[index];\n            this.hasNext = this.interBondIndex < this.interBondCount || this.intraBondIndex < this.intraBondEnd;\n        }\n        advance() {\n            if (this.intraBondIndex < this.intraBondEnd) {\n                this.current.otherUnit = this.unit;\n                this.current.otherIndex = this.unit.bonds.b[this.intraBondIndex];\n                this.current.type = this.unit.bonds.edgeProps.flags[this.intraBondIndex];\n                this.current.order = this.unit.bonds.edgeProps.order[this.intraBondIndex];\n                this.intraBondIndex += 1;\n            }\n            else if (this.interBondIndex < this.interBondCount) {\n                const b = this.structure.interUnitBonds.edges[this.interBondIndices[this.interBondIndex]];\n                this.current.otherUnit = this.structure.unitMap.get(b.unitA !== this.unit.id ? b.unitA : b.unitB);\n                this.current.otherIndex = b.indexA !== this.index ? b.indexA : b.indexB;\n                this.current.type = b.props.flag;\n                this.current.order = b.props.order;\n                this.interBondIndex += 1;\n            }\n            else {\n                this.hasNext = false;\n                return;\n            }\n            this.hasNext = this.interBondIndex < this.interBondCount || this.intraBondIndex < this.intraBondEnd;\n        }\n        constructor() {\n            this.current = {};\n            this.hasNext = false;\n        }\n    }\n    Bond.ElementBondIterator = ElementBondIterator;\n    function getBoundingSphere(loci, boundingSphere) {\n        return CentroidHelper.fromPairProvider(loci.bonds.length, (i, pA, pB) => {\n            const { aUnit, aIndex, bUnit, bIndex } = loci.bonds[i];\n            aUnit.conformation.position(aUnit.elements[aIndex], pA);\n            bUnit.conformation.position(bUnit.elements[bIndex], pB);\n        }, boundingSphere);\n    }\n    Bond.getBoundingSphere = getBoundingSphere;\n})(Bond || (Bond = {}));\nexport { Bond };\n","/**\n * Copyright (c) 2018-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { shallowEqualObjects } from './index.js';\nimport { Vec2 as Vec2Data, Vec3 as Vec3Data, Mat4 as Mat4Data, EPSILON } from '../mol-math/linear-algebra.js';\nimport { deepClone } from './object.js';\nimport { stringToWords } from './string.js';\nimport { getColorListFromName } from './color/lists.js';\nimport { Asset } from './assets.js';\nexport var ParamDefinition;\n(function (ParamDefinition) {\n    ParamDefinition.Essential = { isEssential: true };\n    function setInfo(param, info) {\n        if (!info)\n            return param;\n        if (info.label)\n            param.label = info.label;\n        if (info.description)\n            param.description = info.description;\n        if (info.legend)\n            param.legend = info.legend;\n        if (info.fieldLabels)\n            param.fieldLabels = info.fieldLabels;\n        if (info.isHidden)\n            param.isHidden = info.isHidden;\n        if (info.shortLabel)\n            param.shortLabel = info.shortLabel;\n        if (info.twoColumns)\n            param.twoColumns = info.twoColumns;\n        if (info.isEssential)\n            param.isEssential = info.isEssential;\n        if (info.category)\n            param.category = info.category;\n        if (info.hideIf)\n            param.hideIf = info.hideIf;\n        if (info.help)\n            param.help = info.help;\n        return param;\n    }\n    function Optional(p) {\n        const ret = { ...p };\n        ret.isOptional = true;\n        return ret;\n    }\n    ParamDefinition.Optional = Optional;\n    function Value(defaultValue, info) {\n        return setInfo({ type: 'value', defaultValue }, info);\n    }\n    ParamDefinition.Value = Value;\n    function Select(defaultValue, options, info) {\n        return setInfo({ type: 'select', defaultValue: checkDefaultKey(defaultValue, options), options, cycle: info === null || info === void 0 ? void 0 : info.cycle }, info);\n    }\n    ParamDefinition.Select = Select;\n    function MultiSelect(defaultValue, options, info) {\n        // TODO: check if default value is a subset of options?\n        const ret = setInfo({ type: 'multi-select', defaultValue, options }, info);\n        if (info === null || info === void 0 ? void 0 : info.emptyValue)\n            ret.emptyValue = info.emptyValue;\n        return ret;\n    }\n    ParamDefinition.MultiSelect = MultiSelect;\n    function Boolean(defaultValue, info) {\n        return setInfo({ type: 'boolean', defaultValue }, info);\n    }\n    ParamDefinition.Boolean = Boolean;\n    function Text(defaultValue = '', info) {\n        return setInfo({ type: 'text', defaultValue: defaultValue, multiline: info === null || info === void 0 ? void 0 : info.multiline, placeholder: info === null || info === void 0 ? void 0 : info.placeholder, disableInteractiveUpdates: info === null || info === void 0 ? void 0 : info.disableInteractiveUpdates }, info);\n    }\n    ParamDefinition.Text = Text;\n    function Color(defaultValue, info) {\n        const ret = setInfo({ type: 'color', defaultValue }, info);\n        if (info === null || info === void 0 ? void 0 : info.isExpanded)\n            ret.isExpanded = info.isExpanded;\n        return ret;\n    }\n    ParamDefinition.Color = Color;\n    function ColorList(defaultValue, info) {\n        let def;\n        if (typeof defaultValue === 'string') {\n            const colors = getColorListFromName(defaultValue);\n            def = { kind: colors.type !== 'qualitative' ? 'interpolate' : 'set', colors: colors.list };\n        }\n        else {\n            def = defaultValue;\n        }\n        return setInfo({ type: 'color-list', presetKind: (info === null || info === void 0 ? void 0 : info.presetKind) || 'all', defaultValue: def, offsets: !!(info === null || info === void 0 ? void 0 : info.offsets) }, info);\n    }\n    ParamDefinition.ColorList = ColorList;\n    function Vec3(defaultValue, range, info) {\n        return setInfo(setRange({ type: 'vec3', defaultValue }, range), info);\n    }\n    ParamDefinition.Vec3 = Vec3;\n    function Mat4(defaultValue, info) {\n        return setInfo({ type: 'mat4', defaultValue }, info);\n    }\n    ParamDefinition.Mat4 = Mat4;\n    function Url(url, info) {\n        const defaultValue = typeof url === 'string' ? Asset.Url(url) : Asset.Url(url.url, { body: url.body });\n        const ret = setInfo({ type: 'url', defaultValue }, info);\n        return ret;\n    }\n    ParamDefinition.Url = Url;\n    function File(info) {\n        const ret = setInfo({ type: 'file', defaultValue: null }, info);\n        if (info === null || info === void 0 ? void 0 : info.accept)\n            ret.accept = info.accept;\n        return ret;\n    }\n    ParamDefinition.File = File;\n    function FileList(info) {\n        const ret = setInfo({ type: 'file-list', defaultValue: null }, info);\n        if (info === null || info === void 0 ? void 0 : info.accept)\n            ret.accept = info.accept;\n        return ret;\n    }\n    ParamDefinition.FileList = FileList;\n    function setRange(p, range) {\n        if (!range)\n            return p;\n        if (typeof range.min !== 'undefined')\n            p.min = range.min;\n        if (typeof range.max !== 'undefined')\n            p.max = range.max;\n        if (typeof range.step !== 'undefined')\n            p.step = range.step;\n        return p;\n    }\n    function Numeric(defaultValue, range, info) {\n        const ret = setInfo(setRange({ type: 'number', defaultValue }, range), info);\n        if (info === null || info === void 0 ? void 0 : info.immediateUpdate)\n            ret.immediateUpdate = true;\n        return ret;\n    }\n    ParamDefinition.Numeric = Numeric;\n    function Interval(defaultValue, range, info) {\n        return setInfo(setRange({ type: 'interval', defaultValue }, range), info);\n    }\n    ParamDefinition.Interval = Interval;\n    function LineGraph(defaultValue, info) {\n        const ret = setInfo({ type: 'line-graph', defaultValue }, info);\n        if (info === null || info === void 0 ? void 0 : info.getVolume)\n            ret.getVolume = info.getVolume;\n        return ret;\n    }\n    ParamDefinition.LineGraph = LineGraph;\n    function Group(params, info) {\n        const ret = setInfo({ type: 'group', defaultValue: (info === null || info === void 0 ? void 0 : info.customDefault) || getDefaultValues(params), params: params }, info);\n        if (info === null || info === void 0 ? void 0 : info.presets)\n            ret.presets = info.presets;\n        if (info === null || info === void 0 ? void 0 : info.isExpanded)\n            ret.isExpanded = info.isExpanded;\n        if (info === null || info === void 0 ? void 0 : info.isFlat)\n            ret.isFlat = info.isFlat;\n        if (info === null || info === void 0 ? void 0 : info.pivot)\n            ret.pivot = info.pivot;\n        return ret;\n    }\n    ParamDefinition.Group = Group;\n    function EmptyGroup(info) {\n        return Group({}, info);\n    }\n    ParamDefinition.EmptyGroup = EmptyGroup;\n    function Mapped(defaultKey, names, map, info) {\n        const name = checkDefaultKey(defaultKey, names);\n        return setInfo({\n            type: 'mapped',\n            defaultValue: { name, params: map(name).defaultValue },\n            select: Select(name, names, info),\n            map\n        }, info);\n    }\n    ParamDefinition.Mapped = Mapped;\n    function MappedStatic(defaultKey, map, info) {\n        const options = (info === null || info === void 0 ? void 0 : info.options)\n            ? info.options\n            : Object.keys(map).map(k => [k, map[k].label || stringToWords(k)]);\n        const name = checkDefaultKey(defaultKey, options);\n        return setInfo({\n            type: 'mapped',\n            defaultValue: { name, params: map[name].defaultValue },\n            select: Select(name, options, info),\n            map: key => map[key]\n        }, info);\n    }\n    ParamDefinition.MappedStatic = MappedStatic;\n    function ObjectList(element, getLabel, info) {\n        return setInfo({ type: 'object-list', element: element, getLabel, ctor: _defaultObjectListCtor, defaultValue: (info === null || info === void 0 ? void 0 : info.defaultValue) || [] }, info);\n    }\n    ParamDefinition.ObjectList = ObjectList;\n    function _defaultObjectListCtor() { return getDefaultValues(this.element); }\n    function unsetGetValue() {\n        throw new Error('getValue not set. Fix runtime.');\n    }\n    function ValueRef(getOptions, resolveRef, info) {\n        var _a;\n        return setInfo({ type: 'value-ref', defaultValue: { ref: (_a = info === null || info === void 0 ? void 0 : info.defaultRef) !== null && _a !== void 0 ? _a : '', getValue: unsetGetValue }, getOptions, resolveRef }, info);\n    }\n    ParamDefinition.ValueRef = ValueRef;\n    function DataRef(info) {\n        var _a;\n        return setInfo({ type: 'data-ref', defaultValue: { ref: (_a = info === null || info === void 0 ? void 0 : info.defaultRef) !== null && _a !== void 0 ? _a : '', getValue: unsetGetValue } }, info);\n    }\n    ParamDefinition.DataRef = DataRef;\n    function Converted(fromValue, toValue, converted) {\n        return setInfo({ type: 'converted', defaultValue: toValue(converted.defaultValue), converted, fromValue, toValue }, converted);\n    }\n    ParamDefinition.Converted = Converted;\n    function Conditioned(defaultValue, conditionParams, conditionForValue, conditionedValue, info) {\n        const options = Object.keys(conditionParams).map(k => [k, k]);\n        return setInfo({ type: 'conditioned', select: Select(conditionForValue(defaultValue), options, info), defaultValue, conditionParams, conditionForValue, conditionedValue }, info);\n    }\n    ParamDefinition.Conditioned = Conditioned;\n    function Script(defaultValue, info) {\n        return setInfo({ type: 'script', defaultValue }, info);\n    }\n    ParamDefinition.Script = Script;\n    function For(params) {\n        return 0;\n    }\n    ParamDefinition.For = For;\n    function getDefaultValues(params) {\n        const d = {};\n        for (const k of Object.keys(params)) {\n            if (params[k].isOptional)\n                continue;\n            d[k] = params[k].defaultValue;\n        }\n        return d;\n    }\n    ParamDefinition.getDefaultValues = getDefaultValues;\n    function _resolveRef(resolve, ref, getData) {\n        return () => resolve(ref, getData);\n    }\n    function resolveRefValue(p, value, getData) {\n        if (!value)\n            return;\n        if (p.type === 'value-ref') {\n            const v = value;\n            if (!v.ref)\n                v.getValue = () => { throw new Error('Unset ref in ValueRef value.'); };\n            else\n                v.getValue = _resolveRef(p.resolveRef, v.ref, getData);\n        }\n        else if (p.type === 'data-ref') {\n            const v = value;\n            if (!v.ref)\n                v.getValue = () => { throw new Error('Unset ref in ValueRef value.'); };\n            else\n                v.getValue = _resolveRef(getData, v.ref, getData);\n        }\n        else if (p.type === 'group') {\n            resolveRefs(p.params, value, getData);\n        }\n        else if (p.type === 'mapped') {\n            const v = value;\n            const param = p.map(v.name);\n            resolveRefValue(param, v.params, getData);\n        }\n        else if (p.type === 'object-list') {\n            if (!hasValueRef(p.element))\n                return;\n            for (const e of value) {\n                resolveRefs(p.element, e, getData);\n            }\n        }\n    }\n    function hasParamValueRef(p) {\n        if (p.type === 'value-ref' || p.type === 'data-ref') {\n            return true;\n        }\n        else if (p.type === 'group') {\n            if (hasValueRef(p.params))\n                return true;\n        }\n        else if (p.type === 'mapped') {\n            for (const [o] of p.select.options) {\n                if (hasParamValueRef(p.map(o)))\n                    return true;\n            }\n        }\n        else if (p.type === 'object-list') {\n            return hasValueRef(p.element);\n        }\n        return false;\n    }\n    function hasValueRef(params) {\n        for (const n of Object.keys(params)) {\n            if (hasParamValueRef(params[n]))\n                return true;\n        }\n        return false;\n    }\n    function resolveRefs(params, values, getData) {\n        for (const n of Object.keys(params)) {\n            resolveRefValue(params[n], values === null || values === void 0 ? void 0 : values[n], getData);\n        }\n    }\n    ParamDefinition.resolveRefs = resolveRefs;\n    function setDefaultValues(params, defaultValues) {\n        for (const k of Object.keys(params)) {\n            if (params[k].isOptional)\n                continue;\n            params[k].defaultValue = defaultValues[k];\n        }\n    }\n    ParamDefinition.setDefaultValues = setDefaultValues;\n    function clone(params) {\n        return deepClone(params);\n    }\n    ParamDefinition.clone = clone;\n    function validate(params, values) {\n        // TODO\n        return void 0;\n    }\n    ParamDefinition.validate = validate;\n    function areEqual(params, a, b) {\n        if (a === b)\n            return true;\n        if (typeof a !== 'object' || typeof b !== 'object')\n            return false;\n        for (const k of Object.keys(params)) {\n            if (!isParamEqual(params[k], a[k], b[k]))\n                return false;\n        }\n        return true;\n    }\n    ParamDefinition.areEqual = areEqual;\n    function isParamEqual(p, a, b) {\n        if (a === b)\n            return true;\n        if (p.type === 'group') {\n            return areEqual(p.params, a, b);\n        }\n        else if (p.type === 'mapped') {\n            const u = a, v = b;\n            if (u.name !== v.name)\n                return false;\n            const map = p.map(u.name);\n            return isParamEqual(map, u.params, v.params);\n        }\n        else if (p.type === 'multi-select') {\n            const u = a, v = b;\n            if (u.length !== v.length)\n                return false;\n            if (u.length < 10) {\n                for (let i = 0, _i = u.length; i < _i; i++) {\n                    if (u[i] === v[i])\n                        continue;\n                    if (v.indexOf(u[i]) < 0)\n                        return false;\n                }\n            }\n            else {\n                // TODO: should the value of multiselect be a set?\n                const vSet = new Set(v);\n                for (let i = 0, _i = u.length; i < _i; i++) {\n                    if (u[i] === v[i])\n                        continue;\n                    if (!vSet.has(u[i]))\n                        return false;\n                }\n            }\n            return true;\n        }\n        else if (p.type === 'interval') {\n            return a[0] === b[0] && a[1] === b[1];\n        }\n        else if (p.type === 'line-graph') {\n            const u = a, v = b;\n            if (u.length !== v.length)\n                return false;\n            for (let i = 0, _i = u.length; i < _i; i++) {\n                if (!Vec2Data.areEqual(u[i], v[i]))\n                    return false;\n            }\n            return true;\n        }\n        else if (p.type === 'vec3') {\n            return Vec3Data.equals(a, b);\n        }\n        else if (p.type === 'mat4') {\n            return Mat4Data.areEqual(a, b, EPSILON);\n        }\n        else if (p.type === 'script') {\n            const u = a, v = b;\n            return u.language === v.language && u.expression === v.expression;\n        }\n        else if (p.type === 'object-list') {\n            const u = a, v = b;\n            const l = u.length;\n            if (l !== v.length)\n                return false;\n            for (let i = 0; i < l; i++) {\n                if (!areEqual(p.element, u[i], v[i]))\n                    return false;\n            }\n            return true;\n        }\n        else if (typeof a === 'object' && typeof b === 'object') {\n            return shallowEqualObjects(a, b);\n        }\n        // a === b was checked at the top.\n        return false;\n    }\n    ParamDefinition.isParamEqual = isParamEqual;\n    function merge(params, a, b) {\n        if (a === undefined)\n            return { ...b };\n        if (b === undefined)\n            return { ...a };\n        const o = {};\n        for (const k of Object.keys(params)) {\n            o[k] = mergeParam(params[k], a[k], b[k]);\n        }\n        return o;\n    }\n    ParamDefinition.merge = merge;\n    function mergeParam(p, a, b) {\n        if (a === undefined)\n            return typeof b === 'object' && !Array.isArray(b) ? { ...b } : b;\n        if (b === undefined)\n            return typeof a === 'object' && !Array.isArray(a) ? { ...a } : a;\n        if (p.type === 'group') {\n            return merge(p.params, a, b);\n        }\n        else if (p.type === 'mapped') {\n            const u = a, v = b;\n            if (u.name !== v.name)\n                return { ...v };\n            const map = p.map(v.name);\n            return {\n                name: v.name,\n                params: mergeParam(map, u.params, v.params)\n            };\n        }\n        else if (p.type === 'value') {\n            return b;\n        }\n        else if (typeof a === 'object' && typeof b === 'object') {\n            if (Array.isArray(b)) {\n                return b;\n            }\n            return { ...a, ...b };\n        }\n        else {\n            return b;\n        }\n    }\n    ParamDefinition.mergeParam = mergeParam;\n    function selectHasOption(p, v) {\n        for (const o of p.options) {\n            if (o[0] === v)\n                return true;\n        }\n        return false;\n    }\n    function normalizeParam(p, value, defaultIfUndefined) {\n        if (value === void 0 || value === null) {\n            return defaultIfUndefined ? p.defaultValue : void 0;\n        }\n        // TODO: is this a good idea and will work well?\n        // if (typeof p.defaultValue !== typeof value) {\n        //     return p.defaultValue;\n        // }\n        if (p.type === 'value') {\n            return value;\n        }\n        else if (p.type === 'group') {\n            const ret = {};\n            for (const key of Object.keys(p.params)) {\n                const param = p.params[key];\n                if (value[key] === void 0) {\n                    if (defaultIfUndefined)\n                        ret[key] = param.defaultValue;\n                }\n                else {\n                    ret[key] = normalizeParam(param, value[key], defaultIfUndefined);\n                }\n            }\n            return ret;\n        }\n        else if (p.type === 'mapped') {\n            const v = value;\n            if (typeof v.name !== 'string') {\n                return p.defaultValue;\n            }\n            if (typeof v.params === 'undefined') {\n                return defaultIfUndefined ? p.defaultValue : void 0;\n            }\n            if (!selectHasOption(p.select, v.name)) {\n                return p.defaultValue;\n            }\n            const param = p.map(v.name);\n            return {\n                name: v.name,\n                params: normalizeParam(param, v.params, defaultIfUndefined)\n            };\n        }\n        else if (p.type === 'select') {\n            if (!selectHasOption(p, value))\n                return p.defaultValue;\n            return value;\n        }\n        else if (p.type === 'multi-select') {\n            if (!Array.isArray(value))\n                return p.defaultValue;\n            const ret = value.filter(function (v) { return selectHasOption(this, v); }, p);\n            if (value.length > 0 && ret.length === 0)\n                return p.defaultValue;\n            return ret;\n        }\n        else if (p.type === 'object-list') {\n            if (!Array.isArray(value))\n                return p.defaultValue;\n            return value.map(v => normalizeParams(p.element, v, defaultIfUndefined ? 'all' : 'skip'));\n        }\n        // TODO: validate/normalize all param types \"properly\"??\n        return value;\n    }\n    function normalizeParams(p, value, defaultIfUndefined) {\n        if (typeof value !== 'object' || value === null) {\n            return defaultIfUndefined ? getDefaultValues(p) : value;\n        }\n        const ret = {};\n        for (const key of Object.keys(p)) {\n            const param = p[key];\n            if (value[key] === void 0) {\n                if (defaultIfUndefined === 'all')\n                    ret[key] = param.defaultValue;\n            }\n            else {\n                ret[key] = normalizeParam(param, value[key], defaultIfUndefined !== 'skip');\n            }\n        }\n        return ret;\n    }\n    ParamDefinition.normalizeParams = normalizeParams;\n    /**\n     * Map an object to a list of [K, string][] to be used as options, stringToWords for key used by default (or identity of null).\n     *\n     * if options is { [string]: string } and mapping is not provided, use the Value.\n     */\n    function objectToOptions(options, f) {\n        const ret = [];\n        for (const k of Object.keys(options)) {\n            if (!f) {\n                if (typeof options[k] === 'string')\n                    ret.push([k, options[k]]);\n                else\n                    ret.push([k, f === null ? k : stringToWords(k)]);\n            }\n            else {\n                const o = f(k, options[k]);\n                ret.push(typeof o === 'string' ? [k, o] : [k, o[0], o[1]]);\n            }\n        }\n        return ret;\n    }\n    ParamDefinition.objectToOptions = objectToOptions;\n    /**\n     * Map array of options using stringToWords by default (or identity of null).\n     */\n    function arrayToOptions(xs, f) {\n        const ret = [];\n        for (const x of xs) {\n            if (!f) {\n                ret.push([x, f === null ? x : stringToWords(x)]);\n            }\n            else {\n                ret.push([x, f(x)]);\n            }\n        }\n        return ret;\n    }\n    ParamDefinition.arrayToOptions = arrayToOptions;\n    function optionLabel(param, value) {\n        for (const o of param.options) {\n            if (o[0] === value)\n                return o[1];\n        }\n        return '';\n    }\n    ParamDefinition.optionLabel = optionLabel;\n    function checkDefaultKey(k, options) {\n        for (const o of options) {\n            if (o[0] === k)\n                return k;\n        }\n        return options.length > 0 ? options[0][0] : void 0;\n    }\n    function withDefaults(schema, updates) {\n        const next = {};\n        for (const k of Object.keys(updates)) {\n            const v = updates[k];\n            if (!schema[k] || v === null || v === undefined || schema[k].defaultValue === v)\n                continue;\n            next[k] = { ...schema[k], defaultValue: v };\n        }\n        return { ...schema, ...next };\n    }\n    ParamDefinition.withDefaults = withDefaults;\n})(ParamDefinition || (ParamDefinition = {}));\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Unit, StructureElement } from '../../../structure.js';\nimport { Segmentation } from '../../../../../mol-data/int.js';\nimport { UUID } from '../../../../../mol-util/index.js';\nexport var IndexedCustomProperty;\n(function (IndexedCustomProperty) {\n    function getCifDataSource(structure, prop, cache) {\n        if (!prop)\n            return { rowCount: 0 };\n        if (cache && cache[prop.id])\n            return cache[prop.id];\n        const data = prop.getElements(structure);\n        const ret = { data, rowCount: data.elements.length };\n        if (cache)\n            cache[prop.id] = ret;\n        return ret;\n    }\n    IndexedCustomProperty.getCifDataSource = getCifDataSource;\n    function fromAtomMap(map) {\n        return new ElementMappedCustomProperty(map);\n    }\n    IndexedCustomProperty.fromAtomMap = fromAtomMap;\n    function fromAtomArray(array) {\n        // TODO: create \"array based custom property\" as optimization\n        return new ElementMappedCustomProperty(arrayToMap(array));\n    }\n    IndexedCustomProperty.fromAtomArray = fromAtomArray;\n    const getResidueSegments = (model) => model.atomicHierarchy.residueAtomSegments;\n    function fromResidueMap(map) {\n        return new SegmentedMappedIndexedCustomProperty('residue', map, getResidueSegments, Unit.Kind.Atomic);\n    }\n    IndexedCustomProperty.fromResidueMap = fromResidueMap;\n    function fromResidueArray(array) {\n        // TODO: create \"array based custom property\" as optimization\n        return new SegmentedMappedIndexedCustomProperty('residue', arrayToMap(array), getResidueSegments, Unit.Kind.Atomic);\n    }\n    IndexedCustomProperty.fromResidueArray = fromResidueArray;\n    const getChainSegments = (model) => model.atomicHierarchy.chainAtomSegments;\n    function fromChainMap(map) {\n        return new SegmentedMappedIndexedCustomProperty('chain', map, getChainSegments, Unit.Kind.Atomic);\n    }\n    IndexedCustomProperty.fromChainMap = fromChainMap;\n    function fromChainArray(array) {\n        // TODO: create \"array based custom property\" as optimization\n        return new SegmentedMappedIndexedCustomProperty('chain', arrayToMap(array), getChainSegments, Unit.Kind.Atomic);\n    }\n    IndexedCustomProperty.fromChainArray = fromChainArray;\n    function fromEntityMap(map) {\n        return new EntityMappedCustomProperty(map);\n    }\n    IndexedCustomProperty.fromEntityMap = fromEntityMap;\n})(IndexedCustomProperty || (IndexedCustomProperty = {}));\nfunction arrayToMap(array) {\n    const ret = new Map();\n    for (let i = 0, _i = array.length; i < _i; i++)\n        ret.set(i, array[i]);\n    return ret;\n}\nclass SegmentedMappedIndexedCustomProperty {\n    has(idx) { return this.map.has(idx); }\n    get(idx) { return this.map.get(idx); }\n    getStructureElements(structure) {\n        const models = structure.models;\n        if (models.length !== 1)\n            throw new Error(`Only works on structures with a single model.`);\n        const seenIndices = new Set();\n        const unitGroups = structure.unitSymmetryGroups;\n        const loci = [];\n        const segments = this.segmentGetter(models[0]);\n        for (const unitGroup of unitGroups) {\n            const unit = unitGroup.units[0];\n            if (unit.kind !== this.kind) {\n                continue;\n            }\n            const chains = Segmentation.transientSegments(segments, unit.elements);\n            while (chains.hasNext) {\n                const seg = chains.move();\n                if (!this.has(seg.index) || seenIndices.has(seg.index))\n                    continue;\n                seenIndices.add(seg.index);\n                loci[loci.length] = StructureElement.Location.create(structure, unit, unit.elements[seg.start]);\n            }\n        }\n        loci.sort((x, y) => x.element - y.element);\n        return loci;\n    }\n    getElements(structure) {\n        const index = this.segmentGetter(structure.model).index;\n        const elements = this.getStructureElements(structure);\n        return { elements, property: i => this.get(index[elements[i].element]) };\n    }\n    constructor(level, map, segmentGetter, kind) {\n        this.level = level;\n        this.map = map;\n        this.segmentGetter = segmentGetter;\n        this.id = UUID.create22();\n        this.kind = kind;\n    }\n}\nclass ElementMappedCustomProperty {\n    has(idx) { return this.map.has(idx); }\n    get(idx) { return this.map.get(idx); }\n    getStructureElements(structure) {\n        const models = structure.models;\n        if (models.length !== 1)\n            throw new Error(`Only works on structures with a single model.`);\n        const seenIndices = new Set();\n        const unitGroups = structure.unitSymmetryGroups;\n        const loci = [];\n        for (const unitGroup of unitGroups) {\n            const unit = unitGroup.units[0];\n            if (unit.kind !== this.kind) {\n                continue;\n            }\n            const elements = unit.elements;\n            for (let i = 0, _i = elements.length; i < _i; i++) {\n                const e = elements[i];\n                if (!this.has(e) || seenIndices.has(e))\n                    continue;\n                seenIndices.add(elements[i]);\n                loci[loci.length] = StructureElement.Location.create(structure, unit, e);\n            }\n        }\n        loci.sort((x, y) => x.element - y.element);\n        return loci;\n    }\n    getElements(structure) {\n        const elements = this.getStructureElements(structure);\n        return { elements, property: i => this.get(elements[i].element) };\n    }\n    constructor(map) {\n        this.map = map;\n        this.id = UUID.create22();\n        this.level = 'atom';\n        this.kind = Unit.Kind.Atomic;\n    }\n}\nclass EntityMappedCustomProperty {\n    has(idx) { return this.map.has(idx); }\n    get(idx) { return this.map.get(idx); }\n    getStructureElements(structure) {\n        const models = structure.models;\n        if (models.length !== 1)\n            throw new Error(`Only works on structures with a single model.`);\n        const index = models[0].atomicHierarchy.index;\n        const seenIndices = new Set();\n        const unitGroups = structure.unitSymmetryGroups;\n        const loci = [];\n        const segments = models[0].atomicHierarchy.chainAtomSegments;\n        for (const unitGroup of unitGroups) {\n            const unit = unitGroup.units[0];\n            if (unit.kind !== this.kind) {\n                continue;\n            }\n            const chains = Segmentation.transientSegments(segments, unit.elements);\n            while (chains.hasNext) {\n                const seg = chains.move();\n                const eI = index.getEntityFromChain(seg.index);\n                if (!this.has(eI) || seenIndices.has(eI))\n                    continue;\n                seenIndices.add(eI);\n                loci[loci.length] = StructureElement.Location.create(structure, unit, unit.elements[seg.start]);\n            }\n        }\n        loci.sort((x, y) => x.element - y.element);\n        return loci;\n    }\n    getElements(structure) {\n        const elements = this.getStructureElements(structure);\n        const chainIndex = structure.model.atomicHierarchy.chainAtomSegments.index;\n        const index = structure.model.atomicHierarchy.index;\n        return { elements, property: i => this.get(index.getEntityFromChain(chainIndex[elements[i].element])) };\n    }\n    constructor(map) {\n        this.map = map;\n        this.id = UUID.create22();\n        this.level = 'entity';\n        this.kind = Unit.Kind.Atomic;\n    }\n}\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * Color conversion code adapted from chroma.js (https://github.com/gka/chroma.js)\n * Copyright (c) 2011-2018, Gregor Aisch, BSD license\n */\nimport { Color } from '../color.js';\nimport { Hcl } from './hcl.js';\nimport { radToDeg } from '../../../mol-math/misc.js';\nimport { clamp } from '../../../mol-math/interpolate.js';\nexport { Lab };\n/**\n * CIE LAB color\n *\n * - L* [0..100] - lightness from black to white\n * - a [-100..100] - green (-) to red (+)\n * - b [-100..100] - blue (-) to yellow (+)\n *\n * see https://en.wikipedia.org/wiki/CIELAB_color_space\n */\nfunction Lab() {\n    return Lab.zero();\n}\n(function (Lab) {\n    function zero() {\n        const out = [0.1, 0.0, 0.0];\n        out[0] = 0;\n        return out;\n    }\n    Lab.zero = zero;\n    function create(l, a, b) {\n        const out = zero();\n        out[0] = l;\n        out[1] = a;\n        out[2] = b;\n        return out;\n    }\n    Lab.create = create;\n    function set(out, l, a, b) {\n        out[0] = l;\n        out[1] = a;\n        out[2] = b;\n        return out;\n    }\n    Lab.set = set;\n    /** simple eucledian distance, not perceptually uniform */\n    function distance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1], z = b[2] - a[2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    Lab.distance = distance;\n    function fromColor(out, color) {\n        const [r, g, b] = Color.toRgb(color);\n        const [x, y, z] = rgbToXyz(r, g, b);\n        const l = 116 * y - 16;\n        out[0] = l < 0 ? 0 : l;\n        out[1] = 500 * (x - y);\n        out[2] = 200 * (y - z);\n        return out;\n    }\n    Lab.fromColor = fromColor;\n    function fromHcl(out, hcl) {\n        return Hcl.toLab(out, hcl);\n    }\n    Lab.fromHcl = fromHcl;\n    function toColor(lab) {\n        let y = (lab[0] + 16) / 116;\n        let x = isNaN(lab[1]) ? y : y + lab[1] / 500;\n        let z = isNaN(lab[2]) ? y : y - lab[2] / 200;\n        y = Yn * lab_xyz(y);\n        x = Xn * lab_xyz(x);\n        z = Zn * lab_xyz(z);\n        const r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z); // D65 -> sRGB\n        const g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n        const b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n        return Color.fromRgb(Math.round(clamp(r, 0, 255)), Math.round(clamp(g, 0, 255)), Math.round(clamp(b, 0, 255)));\n    }\n    Lab.toColor = toColor;\n    function toHcl(out, lab) {\n        const [l, a, b] = lab;\n        const c = Math.sqrt(a * a + b * b);\n        let h = (radToDeg(Math.atan2(b, a)) + 360) % 360;\n        if (Math.round(c * 10000) === 0)\n            h = Number.NaN;\n        out[0] = h;\n        out[1] = c;\n        out[2] = l;\n        return out;\n    }\n    Lab.toHcl = toHcl;\n    function copy(out, c) {\n        out[0] = c[0];\n        out[1] = c[1];\n        out[2] = c[2];\n        return out;\n    }\n    Lab.copy = copy;\n    function darken(out, c, amount) {\n        out[0] = c[0] - Kn * amount;\n        out[1] = c[1];\n        out[2] = c[2];\n        return out;\n    }\n    Lab.darken = darken;\n    function lighten(out, c, amount) {\n        return darken(out, c, -amount);\n    }\n    Lab.lighten = lighten;\n    const tmpSaturateHcl = [0, 0, 0];\n    function saturate(out, c, amount) {\n        toHcl(tmpSaturateHcl, c);\n        return Hcl.toLab(out, Hcl.saturate(tmpSaturateHcl, tmpSaturateHcl, amount));\n    }\n    Lab.saturate = saturate;\n    function desaturate(out, c, amount) {\n        return saturate(out, c, -amount);\n    }\n    Lab.desaturate = desaturate;\n    // Corresponds roughly to RGB brighter/darker\n    const Kn = 18;\n    /** D65 standard referent */\n    const Xn = 0.950470;\n    const Yn = 1;\n    const Zn = 1.088830;\n    const T0 = 0.137931034; // 4 / 29\n    const T1 = 0.206896552; // 6 / 29\n    const T2 = 0.12841855; // 3 * t1 * t1\n    const T3 = 0.008856452; // t1 * t1 * t1\n    /** convert component from xyz to rgb */\n    function xyz_rgb(c) {\n        return 255 * (c <= 0.00304 ? 12.92 * c : 1.055 * Math.pow(c, 1 / 2.4) - 0.055);\n    }\n    /** convert component from lab to xyz */\n    function lab_xyz(t) {\n        return t > T1 ? t * t * t : T2 * (t - T0);\n    }\n    /** convert component from rgb to xyz */\n    function rgb_xyz(c) {\n        if ((c /= 255) <= 0.04045)\n            return c / 12.92;\n        return Math.pow((c + 0.055) / 1.055, 2.4);\n    }\n    /** convert component from xyz to lab */\n    function xyz_lab(t) {\n        if (t > T3)\n            return Math.pow(t, 1 / 3);\n        return t / T2 + T0;\n    }\n    function rgbToXyz(r, g, b) {\n        r = rgb_xyz(r);\n        g = rgb_xyz(g);\n        b = rgb_xyz(b);\n        const x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / Xn);\n        const y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / Yn);\n        const z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / Zn);\n        return [x, y, z];\n    }\n})(Lab || (Lab = {}));\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SortedArray as S } from '../sorted-array.js';\nimport { Interval as I } from '../interval.js';\nexport const Empty = I.Empty;\nexport const ofSingleton = I.ofSingleton;\nexport const ofRange = I.ofRange;\nexport const ofBounds = I.ofBounds;\nexport function ofSortedArray(xs) {\n    if (!xs.length)\n        return Empty;\n    // check if the array is just a range\n    if (S.isRange(xs))\n        return I.ofRange(xs[0], xs[xs.length - 1]);\n    return xs;\n}\nexport function size(set) { return I.is(set) ? I.size(set) : S.size(set); }\nexport function has(set, x) { return I.is(set) ? I.has(set, x) : S.has(set, x); }\n/** Returns the index of `x` in `set` or -1 if not found. */\nexport function indexOf(set, x) { return I.is(set) ? I.indexOf(set, x) : S.indexOf(set, x); }\nexport function getAt(set, i) { return I.is(set) ? I.getAt(set, i) : set[i]; }\nexport function min(set) { return I.is(set) ? I.min(set) : S.min(set); }\nexport function max(set) { return I.is(set) ? I.max(set) : S.max(set); }\nexport function start(set) { return I.is(set) ? I.start(set) : S.start(set); }\nexport function end(set) { return I.is(set) ? I.end(set) : S.end(set); }\nexport function isEmpty(set) { return size(set) === 0; }\nexport function hashCode(set) { return I.is(set) ? I.hashCode(set) : S.hashCode(set); }\n// TODO: possibly add more hash functions to allow for multilevel hashing.\nexport function toString(set) { return I.is(set) ? I.toString(set) : S.toString(set); }\nexport function areEqual(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return I.areEqual(a, b);\n        return areEqualIS(a, b);\n    }\n    else if (I.is(b))\n        return areEqualIS(b, a);\n    return S.areEqual(a, b);\n}\nexport function areIntersecting(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return I.areIntersecting(a, b);\n        return areIntersectingSI(b, a);\n    }\n    else if (I.is(b))\n        return areIntersectingSI(a, b);\n    return S.areIntersecting(a, b);\n}\n/** Check if the 2nd argument is a subset of the 1st */\nexport function isSubset(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return I.isSubInterval(a, b);\n        return isSubsetIS(a, b);\n    }\n    else if (I.is(b))\n        return isSubsetSI(a, b);\n    return S.isSubset(a, b);\n}\nexport function findPredecessorIndex(set, x) {\n    return I.is(set) ? I.findPredecessorIndex(set, x) : S.findPredecessorIndex(set, x);\n}\nexport function findPredecessorIndexInInterval(set, x, bounds) {\n    return I.is(set) ? I.findPredecessorIndexInInterval(set, x, bounds) : S.findPredecessorIndexInInterval(set, x, bounds);\n}\nexport function findRange(set, min, max) {\n    return I.is(set) ? I.findRange(set, min, max) : S.findRange(set, min, max);\n}\nexport function intersectionSize(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return I.intersectionSize(a, b);\n        return intersectionSizeSI(b, a);\n    }\n    else if (I.is(b))\n        return intersectionSizeSI(a, b);\n    return S.intersectionSize(a, b);\n}\nexport function union(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return unionII(a, b);\n        return unionSI(b, a);\n    }\n    else if (I.is(b))\n        return unionSI(a, b);\n    return ofSortedArray(S.union(a, b));\n}\nexport function intersect(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return I.intersect(a, b);\n        return intersectSI(b, a);\n    }\n    else if (I.is(b))\n        return intersectSI(a, b);\n    return ofSortedArray(S.intersect(a, b));\n}\nexport function subtract(a, b) {\n    if (I.is(a)) {\n        if (I.is(b))\n            return subtractII(a, b);\n        return subtractIS(a, b);\n    }\n    else if (I.is(b))\n        return subtractSI(a, b);\n    return ofSortedArray(S.subtract(a, b));\n}\nfunction areEqualIS(a, b) { return I.size(a) === S.size(b) && I.start(a) === S.start(b) && I.end(a) === S.end(b); }\nfunction areIntersectingSI(a, b) {\n    return a.length !== 0 && I.size(S.findRange(a, I.min(b), I.max(b))) !== 0;\n}\nfunction isSubsetSI(a, b) {\n    const minB = I.min(b), maxB = I.max(b);\n    if (maxB - minB + 1 === 0)\n        return true;\n    const minA = S.min(a), maxA = S.max(a);\n    if (minB < minA || maxB > maxA)\n        return false;\n    const r = S.findRange(a, minB, maxB);\n    return I.size(r) === I.size(b);\n}\nfunction isSubsetIS(a, b) {\n    const minA = I.min(a), maxA = I.max(a);\n    if (maxA - minA + 1 === 0)\n        return false;\n    const minB = S.min(b), maxB = S.max(b);\n    return minB >= minA && maxB <= maxA;\n}\nfunction areRangesIntersecting(a, b) {\n    const sa = size(a), sb = size(b);\n    if (sa === 0 && sb === 0)\n        return true;\n    return sa > 0 && sb > 0 && max(a) >= min(b) && min(a) <= max(b);\n}\nfunction isRangeSubset(a, b) {\n    if (!size(a))\n        return size(b) === 0;\n    if (!size(b))\n        return true;\n    return min(a) <= min(b) && max(a) >= max(b);\n}\nfunction unionII(a, b) {\n    if (I.areEqual(a, b))\n        return a;\n    const sizeA = I.size(a), sizeB = I.size(b);\n    if (!sizeB)\n        return a;\n    if (!sizeA)\n        return b;\n    const minA = I.min(a), minB = I.min(b);\n    if (areRangesIntersecting(a, b))\n        return I.ofRange(Math.min(minA, minB), Math.max(I.max(a), I.max(b)));\n    let lSize, lMin, rSize, rMin;\n    if (minA < minB) {\n        lSize = sizeA;\n        lMin = minA;\n        rSize = sizeB;\n        rMin = minB;\n    }\n    else {\n        lSize = sizeB;\n        lMin = minB;\n        rSize = sizeA;\n        rMin = minA;\n    }\n    const arr = new Int32Array(sizeA + sizeB);\n    for (let i = 0; i < lSize; i++)\n        arr[i] = i + lMin;\n    for (let i = 0; i < rSize; i++)\n        arr[i + lSize] = i + rMin;\n    return ofSortedArray(arr);\n}\nfunction unionSI(a, b) {\n    const bSize = I.size(b);\n    if (!bSize)\n        return a;\n    // is the array fully contained in the range?\n    if (isRangeSubset(b, a))\n        return b;\n    const min = I.min(b), max = I.max(b);\n    const r = S.findRange(a, min, max);\n    const start = I.start(r), end = I.end(r);\n    const indices = new Int32Array(start + (a.length - end) + bSize);\n    let offset = 0;\n    for (let i = 0; i < start; i++)\n        indices[offset++] = a[i];\n    for (let i = min; i <= max; i++)\n        indices[offset++] = i;\n    for (let i = end, _i = a.length; i < _i; i++)\n        indices[offset++] = a[i];\n    return ofSortedArray(indices);\n}\nfunction intersectionSizeSI(a, b) {\n    if (!I.size(b))\n        return 0;\n    const r = S.findRange(a, I.min(b), I.max(b));\n    return I.end(r) - I.start(r);\n}\nfunction intersectSI(a, b) {\n    if (!I.size(b))\n        return Empty;\n    const r = S.findRange(a, I.min(b), I.max(b));\n    const start = I.start(r), end = I.end(r);\n    const resultSize = end - start;\n    if (!resultSize)\n        return Empty;\n    if (resultSize === a.length)\n        return a;\n    const indices = new Int32Array(resultSize);\n    let offset = 0;\n    for (let i = start; i < end; i++) {\n        indices[offset++] = a[i];\n    }\n    return ofSortedArray(indices);\n}\nfunction subtractII(a, b) {\n    if (I.areEqual(a, b))\n        return Empty;\n    if (!I.areIntersecting(a, b))\n        return a;\n    const minA = I.min(a), maxA = I.max(a);\n    const minB = I.min(b), maxB = I.max(b);\n    if (maxA < minA || maxB < minB)\n        return a;\n    // is A subset of B? ==> Empty\n    if (I.isSubInterval(b, a))\n        return Empty;\n    if (I.isSubInterval(a, b)) {\n        // this splits the interval into two, gotta represent it as a set.\n        const l = minB - minA, r = maxA - maxB;\n        if (l <= 0)\n            return I.ofRange(maxB + 1, maxB + r);\n        if (r <= 0)\n            return I.ofRange(minA, minA + l - 1);\n        const ret = new Int32Array(l + r);\n        let offset = 0;\n        for (let i = 0; i < l; i++)\n            ret[offset++] = minA + i;\n        for (let i = 1; i <= r; i++)\n            ret[offset++] = maxB + i;\n        return ofSortedArray(ret);\n    }\n    if (minA < minB)\n        return I.ofRange(minA, minB - 1);\n    return I.ofRange(maxB + 1, maxA);\n}\nfunction subtractSI(a, b) {\n    const min = I.min(b), max = I.max(b);\n    // is empty?\n    if (max < min)\n        return a;\n    const r = S.findRange(a, min, max);\n    const start = I.start(r), end = I.end(r);\n    const resultSize = a.length - (end - start);\n    // A is subset of B\n    if (resultSize <= 0)\n        return Empty;\n    // No common elements\n    if (resultSize === a.length)\n        return a;\n    const ret = new Int32Array(resultSize);\n    let offset = 0;\n    for (let i = 0; i < start; i++)\n        ret[offset++] = a[i];\n    for (let i = end, _i = a.length; i < _i; i++)\n        ret[offset++] = a[i];\n    return ofSortedArray(ret);\n}\nfunction subtractIS(a, b) {\n    const min = I.min(a), max = I.max(a);\n    // is empty?\n    if (max < min)\n        return a;\n    const rSize = max - min + 1;\n    const interval = S.findRange(b, min, max);\n    const start = I.start(interval), end = I.end(interval);\n    const commonCount = end - start;\n    // No common elements.\n    if (commonCount === 0)\n        return a;\n    const resultSize = rSize - commonCount;\n    // A is subset of B\n    if (resultSize <= 0)\n        return Empty;\n    const ret = new Int32Array(resultSize);\n    const li = b.length - 1;\n    const fst = b[Math.min(start, li)], last = b[Math.min(end, li)];\n    let offset = 0;\n    for (let i = min; i < fst; i++)\n        ret[offset++] = i;\n    for (let i = fst; i <= last; i++) {\n        if (S.indexOfInInterval(b, i, interval) < 0)\n            ret[offset++] = i;\n    }\n    for (let i = last + 1; i <= max; i++)\n        ret[offset++] = i;\n    return ofSortedArray(ret);\n}\nexport function forEach(set, f, ctx) {\n    if (I.is(set)) {\n        const start = I.min(set);\n        for (let i = start, _i = I.max(set); i <= _i; i++) {\n            f(i, i - start, ctx);\n        }\n    }\n    else {\n        for (let i = 0, _i = set.length; i < _i; i++) {\n            f(set[i], i, ctx);\n        }\n    }\n    return ctx;\n}\nexport function forEachSegment(set, segment, f, ctx) {\n    if (I.is(set)) {\n        let sI = 0;\n        for (let i = I.min(set), _i = I.max(set); i <= _i; i++) {\n            const s = segment(i);\n            let endI = i + 1;\n            while (endI < _i && segment(endI) === s)\n                endI++;\n            i = endI - 1;\n            f(s, sI, ctx);\n            sI++;\n        }\n    }\n    else {\n        let sI = 0;\n        for (let i = 0, _i = set.length; i < _i; i++) {\n            const s = segment(set[i]);\n            let endI = i + 1;\n            while (endI < _i && segment(set[endI]) === s)\n                endI++;\n            i = endI - 1;\n            f(s, sI, ctx);\n            sI++;\n        }\n    }\n    return ctx;\n}\nexport function indexedIntersect(idxA, a, b) {\n    if (a === b)\n        return idxA;\n    const lenI = size(idxA), lenA = a.length, lenB = b.length;\n    if (lenI === 0 || lenA === 0 || lenB === 0)\n        return Empty;\n    const startJ = S.findPredecessorIndex(b, a[min(idxA)]);\n    const endJ = S.findPredecessorIndex(b, a[max(idxA)] + 1);\n    let commonCount = 0;\n    let offset = 0;\n    let O = 0;\n    let j = startJ;\n    while (O < lenI && j < endJ) {\n        const x = a[getAt(idxA, O)], y = b[j];\n        if (x < y) {\n            O++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            commonCount++;\n            O++;\n            j++;\n        }\n    }\n    // no common elements\n    if (commonCount === 0)\n        return Empty;\n    // A === B\n    if (commonCount === lenA && commonCount === lenB)\n        return idxA;\n    const indices = new Int32Array(commonCount);\n    offset = 0;\n    O = 0;\n    j = startJ;\n    while (O < lenI && j < endJ) {\n        const x = a[getAt(idxA, O)], y = b[j];\n        if (x < y) {\n            O++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            indices[offset++] = j;\n            O++;\n            j++;\n        }\n    }\n    return ofSortedArray(indices);\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport * as Base from './impl/ordered-set.js';\nimport { Interval } from './interval.js';\nvar OrderedSet;\n(function (OrderedSet) {\n    OrderedSet.Empty = Base.Empty;\n    OrderedSet.ofSingleton = Base.ofSingleton;\n    /** Create interval from range [min, max] */\n    OrderedSet.ofRange = Base.ofRange;\n    /** Create interval from bounds [start, end), i.e. [start, end - 1] */\n    OrderedSet.ofBounds = Base.ofBounds;\n    /** It is the responsibility of the caller to ensure the array is sorted and contains unique values. */\n    OrderedSet.ofSortedArray = Base.ofSortedArray;\n    OrderedSet.has = Base.has;\n    /** Returns the index of `x` in `set` or -1 if not found. */\n    OrderedSet.indexOf = Base.indexOf;\n    /** Returns the value in `set` at index `i`. */\n    OrderedSet.getAt = Base.getAt;\n    OrderedSet.isEmpty = Base.isEmpty;\n    OrderedSet.min = Base.min;\n    OrderedSet.max = Base.max;\n    OrderedSet.start = Base.start;\n    OrderedSet.end = Base.end;\n    /** Number of elements in the OrderedSet */\n    OrderedSet.size = Base.size;\n    OrderedSet.hashCode = Base.hashCode;\n    OrderedSet.areEqual = Base.areEqual;\n    OrderedSet.areIntersecting = Base.areIntersecting;\n    /** Check if the 2nd argument is a subset of the 1st */\n    OrderedSet.isSubset = Base.isSubset;\n    OrderedSet.union = Base.union;\n    OrderedSet.intersect = Base.intersect;\n    OrderedSet.indexedIntersect = Base.indexedIntersect;\n    /** Returns elements of `a` that are not in `b`, i.e `a` - `b` */\n    OrderedSet.subtract = Base.subtract;\n    /**\n     * Returns 0 if `x` is smaller or equal the first element of `set`\n     * Returns length of `set` if `x` is bigger than the last element of `set`\n     * Otherwise returns the first index where the value of `set` is equal or bigger than `x`\n     */\n    OrderedSet.findPredecessorIndex = Base.findPredecessorIndex;\n    OrderedSet.findPredecessorIndexInInterval = Base.findPredecessorIndexInInterval;\n    OrderedSet.findRange = Base.findRange;\n    OrderedSet.intersectionSize = Base.intersectionSize;\n    function forEach(set, f, ctx) {\n        return Base.forEach(set, f, ctx);\n    }\n    OrderedSet.forEach = forEach;\n    function forEachSegment(set, segment, f, ctx) {\n        return Base.forEachSegment(set, segment, f, ctx);\n    }\n    OrderedSet.forEachSegment = forEachSegment;\n    function isInterval(set) {\n        return Interval.is(set);\n    }\n    OrderedSet.isInterval = isInterval;\n    function isSortedArray(set) {\n        return !Interval.is(set);\n    }\n    OrderedSet.isSortedArray = isSortedArray;\n    function toArray(set) {\n        const array = [];\n        OrderedSet.forEach(set, v => array.push(v));\n        return array;\n    }\n    OrderedSet.toArray = toArray;\n    function toString(set) {\n        return Base.toString(set);\n    }\n    OrderedSet.toString = toString;\n})(OrderedSet || (OrderedSet = {}));\nexport { OrderedSet };\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * Color conversion code adapted from chroma.js (https://github.com/gka/chroma.js)\n * Copyright (c) 2011-2018, Gregor Aisch, BSD license\n */\nimport { degToRad } from '../../../mol-math/misc.js';\nimport { Lab } from './lab.js';\nexport { Hcl };\n/**\n * CIE HCL (Hue-Chroma-Luminance) color\n *\n * - H [0..360]\n * - C [0..100]\n * - L [0..100]\n *\n * Cylindrical representation of CIELUV (see https://en.wikipedia.org/wiki/CIELUV)\n */\nfunction Hcl() {\n    return Hcl.zero();\n}\n(function (Hcl) {\n    function zero() {\n        const out = [0.1, 0.0, 0.0];\n        out[0] = 0;\n        return out;\n    }\n    Hcl.zero = zero;\n    function create(h, c, l) {\n        const out = zero();\n        out[0] = h;\n        out[1] = c;\n        out[2] = l;\n        return out;\n    }\n    Hcl.create = create;\n    function set(out, h, c, l) {\n        out[0] = h;\n        out[1] = c;\n        out[2] = l;\n        return out;\n    }\n    Hcl.set = set;\n    function hasHue(a) {\n        return !isNaN(a[0]);\n    }\n    Hcl.hasHue = hasHue;\n    const tmpFromColorLab = [0, 0, 0];\n    function fromColor(out, color) {\n        return Lab.toHcl(out, Lab.fromColor(tmpFromColorLab, color));\n    }\n    Hcl.fromColor = fromColor;\n    function fromLab(hcl, lab) {\n        return Lab.toHcl(hcl, lab);\n    }\n    Hcl.fromLab = fromLab;\n    const tmpToColorLab = [0, 0, 0];\n    function toColor(hcl) {\n        return Lab.toColor(toLab(tmpToColorLab, hcl));\n    }\n    Hcl.toColor = toColor;\n    /**\n     * Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n     *\n     * These formulas were invented by David Dalrymple to obtain maximum contrast without going\n     * out of gamut if the parameters are in the range 0-1.\n     * A saturation multiplier was added by Gregor Aisch\n     */\n    function toLab(out, hcl) {\n        let [h, c, l] = hcl;\n        if (isNaN(h))\n            h = 0;\n        h = degToRad(h);\n        out[0] = l;\n        out[1] = Math.cos(h) * c;\n        out[2] = Math.sin(h) * c;\n        return out;\n    }\n    Hcl.toLab = toLab;\n    function copy(out, c) {\n        out[0] = c[0];\n        out[1] = c[1];\n        out[2] = c[2];\n        return out;\n    }\n    Hcl.copy = copy;\n    function saturate(out, c, amount) {\n        out[0] = c[0];\n        out[1] = Math.max(0, c[1] + Kn * amount);\n        out[2] = c[2];\n        return out;\n    }\n    Hcl.saturate = saturate;\n    function desaturate(out, c, amount) {\n        return saturate(out, c, -amount);\n    }\n    Hcl.desaturate = desaturate;\n    const tmpDarkenLab = [0, 0, 0];\n    function darken(out, c, amount) {\n        toLab(tmpDarkenLab, c);\n        return Lab.toHcl(out, Lab.darken(tmpDarkenLab, tmpDarkenLab, amount));\n    }\n    Hcl.darken = darken;\n    function lighten(out, c, amount) {\n        return darken(out, c, -amount);\n    }\n    Hcl.lighten = lighten;\n    // Corresponds roughly to RGB brighter/darker\n    const Kn = 18;\n})(Hcl || (Hcl = {}));\n","/**\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { MolScriptSymbolTable as SymbolTable } from './symbol-table.js';\nexport var MolScriptBuilder;\n(function (MolScriptBuilder) {\n    MolScriptBuilder.core = SymbolTable.core;\n    MolScriptBuilder.struct = SymbolTable.structureQuery;\n    MolScriptBuilder.internal = SymbolTable.internal;\n    /** Atom-name constructor */\n    function atomName(s) { return MolScriptBuilder.struct.type.atomName([s]); }\n    MolScriptBuilder.atomName = atomName;\n    /** Element-symbol constructor */\n    function es(s) { return MolScriptBuilder.struct.type.elementSymbol([s]); }\n    MolScriptBuilder.es = es;\n    /** List constructor */\n    function list(...xs) { return MolScriptBuilder.core.type.list(xs); }\n    MolScriptBuilder.list = list;\n    /** Set constructor */\n    function set(...xs) { return MolScriptBuilder.core.type.set(xs); }\n    MolScriptBuilder.set = set;\n    /** RegEx constructor */\n    function re(pattern, flags) { return MolScriptBuilder.core.type.regex([pattern, flags]); }\n    MolScriptBuilder.re = re;\n    /** Function constructor */\n    function fn(x) { return MolScriptBuilder.core.ctrl.fn([x]); }\n    MolScriptBuilder.fn = fn;\n    function evaluate(x) { return MolScriptBuilder.core.ctrl.eval([x]); }\n    MolScriptBuilder.evaluate = evaluate;\n    const _acp = MolScriptBuilder.struct.atomProperty.core, _ammp = MolScriptBuilder.struct.atomProperty.macromolecular, _atp = MolScriptBuilder.struct.atomProperty.topology;\n    /** atom core property */\n    function acp(p) { return _acp[p](); }\n    MolScriptBuilder.acp = acp;\n    ;\n    /** atom topology property */\n    function atp(p) { return _atp[p](); }\n    MolScriptBuilder.atp = atp;\n    ;\n    /** atom macromolecular property */\n    function ammp(p) { return _ammp[p](); }\n    MolScriptBuilder.ammp = ammp;\n    ;\n    const _aps = MolScriptBuilder.struct.atomSet.propertySet;\n    /** atom core property set */\n    function acpSet(p) { return _aps([acp(p)]); }\n    MolScriptBuilder.acpSet = acpSet;\n    ;\n    /** atom topology property set */\n    function atpSet(p) { return _aps([atp(p)]); }\n    MolScriptBuilder.atpSet = atpSet;\n    ;\n    /** atom macromolecular property set */\n    function ammpSet(p) { return _aps([ammp(p)]); }\n    MolScriptBuilder.ammpSet = ammpSet;\n    ;\n})(MolScriptBuilder || (MolScriptBuilder = {}));\n","/**\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Expression } from '../../language/expression.js';\nimport { QueryContext, Structure } from '../../../mol-model/structure.js';\nexport class QueryRuntimeTable {\n    constructor() {\n        this.map = new Map();\n    }\n    removeSymbol(runtime) {\n        this.map.delete(runtime.symbol.id);\n    }\n    addSymbol(runtime) {\n        if (this.map.has(runtime.symbol.id)) {\n            console.warn(`Symbol '${runtime.symbol.id}' already added. Call removeSymbol/removeCustomProps re-adding the symbol.`);\n        }\n        this.map.set(runtime.symbol.id, runtime);\n    }\n    addCustomProp(desc) {\n        if (!desc.symbols)\n            return;\n        for (const k of Object.keys(desc.symbols)) {\n            this.addSymbol(desc.symbols[k]);\n        }\n    }\n    removeCustomProp(desc) {\n        if (!desc.symbols)\n            return;\n        for (const k of Object.keys(desc.symbols)) {\n            this.removeSymbol(desc.symbols[k]);\n        }\n    }\n    getRuntime(id) {\n        return this.map.get(id);\n    }\n}\nexport const DefaultQueryRuntimeTable = new QueryRuntimeTable();\nexport class QueryCompilerCtx {\n    constructor(table) {\n        this.table = table;\n        this.constQueryContext = new QueryContext(Structure.Empty);\n    }\n}\nexport var QueryCompiledSymbol;\n(function (QueryCompiledSymbol) {\n    function Const(value) {\n        return { kind: 'const', value };\n    }\n    QueryCompiledSymbol.Const = Const;\n    function Dynamic(runtime) {\n        return { kind: 'dynamic', runtime };\n    }\n    QueryCompiledSymbol.Dynamic = Dynamic;\n})(QueryCompiledSymbol || (QueryCompiledSymbol = {}));\nexport var CompiledQueryFn;\n(function (CompiledQueryFn) {\n    function Const(value) {\n        return { isConst: true, fn: function CompiledQueryFn_Const(ctx) { return value; } };\n    }\n    CompiledQueryFn.Const = Const;\n    function Dynamic(fn) {\n        return { isConst: false, fn };\n    }\n    CompiledQueryFn.Dynamic = Dynamic;\n})(CompiledQueryFn || (CompiledQueryFn = {}));\nexport var QueryRuntimeArguments;\n(function (QueryRuntimeArguments) {\n    function forEachEval(xs, queryCtx, f, ctx) {\n        if (typeof xs.length === 'number') {\n            for (let i = 0, _i = xs.length; i < _i; i++)\n                f(xs[i](queryCtx), i, ctx);\n        }\n        else {\n            let i = 0;\n            for (const k of Object.keys(xs))\n                f(xs[k](queryCtx), i++, ctx);\n        }\n        return ctx;\n    }\n    QueryRuntimeArguments.forEachEval = forEachEval;\n})(QueryRuntimeArguments || (QueryRuntimeArguments = {}));\nexport var QuerySymbolRuntime;\n(function (QuerySymbolRuntime) {\n    function Const(symbol, fn) {\n        return new SymbolRuntimeImpl(symbol, fn, true);\n    }\n    QuerySymbolRuntime.Const = Const;\n    function Dynamic(symbol, fn) {\n        return new SymbolRuntimeImpl(symbol, fn, false);\n    }\n    QuerySymbolRuntime.Dynamic = Dynamic;\n})(QuerySymbolRuntime || (QuerySymbolRuntime = {}));\nclass SymbolRuntimeImpl {\n    compile(ctx, inputArgs) {\n        let args, constArgs = false;\n        if (!inputArgs) {\n            args = void 0;\n            constArgs = true;\n        }\n        else if (Expression.isArgumentsArray(inputArgs)) {\n            args = [];\n            constArgs = true;\n            for (const arg of inputArgs) {\n                const compiled = _compile(ctx, arg);\n                constArgs = constArgs && compiled.isConst;\n                args.push(compiled.fn);\n            }\n        }\n        else {\n            args = Object.create(null);\n            constArgs = true;\n            for (const key of Object.keys(inputArgs)) {\n                const compiled = _compile(ctx, inputArgs[key]);\n                constArgs = constArgs && compiled.isConst;\n                args[key] = compiled.fn;\n            }\n        }\n        if (this.isConst) {\n            if (this.isConst && constArgs) {\n                return CompiledQueryFn.Const(this.fn(ctx.constQueryContext, args));\n            }\n            return CompiledQueryFn.Dynamic(createDynamicFn(this.fn, args));\n        }\n        return CompiledQueryFn.Dynamic(createDynamicFn(this.fn, args));\n    }\n    constructor(symbol, fn, isConst) {\n        this.symbol = symbol;\n        this.fn = fn;\n        this.isConst = isConst;\n    }\n}\nfunction createDynamicFn(fn, args) {\n    return function DynamicFn(ctx) { return fn(ctx, args); };\n}\nfunction _compile(ctx, expression) {\n    if (Expression.isLiteral(expression)) {\n        return CompiledQueryFn.Const(expression);\n    }\n    if (Expression.isSymbol(expression)) {\n        const runtime = ctx.table.getRuntime(expression.name);\n        if (!runtime)\n            return CompiledQueryFn.Const(expression.name);\n        return runtime.compile(ctx);\n    }\n    if (!Expression.isSymbol(expression.head)) {\n        throw new Error('Can only apply symbols.');\n    }\n    const compiler = ctx.table.getRuntime(expression.head.name);\n    if (!compiler) {\n        throw new Error(`Symbol '${expression.head.name}' is not implemented.`);\n    }\n    return compiler.compile(ctx, expression.args);\n}\nexport function compile(expression) {\n    const ctx = new QueryCompilerCtx(DefaultQueryRuntimeTable);\n    return _compile(ctx, expression).fn;\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nexport const AtomicNumbers = {\n    'H': 1, 'D': 1, 'T': 1, 'HE': 2, 'LI': 3, 'BE': 4, 'B': 5, 'C': 6, 'N': 7, 'O': 8, 'F': 9, 'NE': 10, 'NA': 11, 'MG': 12, 'AL': 13, 'SI': 14, 'P': 15, 'S': 16, 'CL': 17, 'AR': 18, 'K': 19, 'CA': 20, 'SC': 21, 'TI': 22, 'V': 23, 'CR': 24, 'MN': 25, 'FE': 26, 'CO': 27, 'NI': 28, 'CU': 29, 'ZN': 30, 'GA': 31, 'GE': 32, 'AS': 33, 'SE': 34, 'BR': 35, 'KR': 36, 'RB': 37, 'SR': 38, 'Y': 39, 'ZR': 40, 'NB': 41, 'MO': 42, 'TC': 43, 'RU': 44, 'RH': 45, 'PD': 46, 'AG': 47, 'CD': 48, 'IN': 49, 'SN': 50, 'SB': 51, 'TE': 52, 'I': 53, 'XE': 54, 'CS': 55, 'BA': 56, 'LA': 57, 'CE': 58, 'PR': 59, 'ND': 60, 'PM': 61, 'SM': 62, 'EU': 63, 'GD': 64, 'TB': 65, 'DY': 66, 'HO': 67, 'ER': 68, 'TM': 69, 'YB': 70, 'LU': 71, 'HF': 72, 'TA': 73, 'W': 74, 'RE': 75, 'OS': 76, 'IR': 77, 'PT': 78, 'AU': 79, 'HG': 80, 'TL': 81, 'PB': 82, 'BI': 83, 'PO': 84, 'AT': 85, 'RN': 86, 'FR': 87, 'RA': 88, 'AC': 89, 'TH': 90, 'PA': 91, 'U': 92, 'NP': 93, 'PU': 94, 'AM': 95, 'CM': 96, 'BK': 97, 'CF': 98, 'ES': 99, 'FM': 100, 'MD': 101, 'NO': 102, 'LR': 103, 'RF': 104, 'DB': 105, 'SG': 106, 'BH': 107, 'HS': 108, 'MT': 109\n};\n// http://dx.doi.org/10.1021/jp8111556 (or 2.0)\nexport const ElementVdwRadii = {\n    1: 1.1, 2: 1.4, 3: 1.81, 4: 1.53, 5: 1.92, 6: 1.7, 7: 1.55, 8: 1.52, 9: 1.47, 10: 1.54, 11: 2.27, 12: 1.73, 13: 1.84, 14: 2.1, 15: 1.8, 16: 1.8, 17: 1.75, 18: 1.88, 19: 2.75, 20: 2.31, 21: 2.3, 22: 2.15, 23: 2.05, 24: 2.05, 25: 2.05, 26: 2.05, 27: 2.0, 28: 2.0, 29: 2.0, 30: 2.1, 31: 1.87, 32: 2.11, 33: 1.85, 34: 1.9, 35: 1.83, 36: 2.02, 37: 3.03, 38: 2.49, 39: 2.4, 40: 2.3, 41: 2.15, 42: 2.1, 43: 2.05, 44: 2.05, 45: 2.0, 46: 2.05, 47: 2.1, 48: 2.2, 49: 2.2, 50: 1.93, 51: 2.17, 52: 2.06, 53: 1.98, 54: 2.16, 55: 3.43, 56: 2.68, 57: 2.5, 58: 2.48, 59: 2.47, 60: 2.45, 61: 2.43, 62: 2.42, 63: 2.4, 64: 2.38, 65: 2.37, 66: 2.35, 67: 2.33, 68: 2.32, 69: 2.3, 70: 2.28, 71: 2.27, 72: 2.25, 73: 2.2, 74: 2.1, 75: 2.05, 76: 2.0, 77: 2.0, 78: 2.05, 79: 2.1, 80: 2.05, 81: 1.96, 82: 2.02, 83: 2.07, 84: 1.97, 85: 2.02, 86: 2.2, 87: 3.48, 88: 2.83, 89: 2.0, 90: 2.4, 91: 2.0, 92: 2.3, 93: 2.0, 94: 2.0, 95: 2.0, 96: 2.0, 97: 2.0, 98: 2.0, 99: 2.0, 100: 2.0, 101: 2.0, 102: 2.0, 103: 2.0, 104: 2.0, 105: 2.0, 106: 2.0, 107: 2.0, 108: 2.0, 109: 2.0\n};\n// https://doi.org/10.1515/pac-2015-0305 (table 2, 3, and 4)\nexport const ElementAtomWeights = {\n    1: 1.008, 2: 4.0026, 3: 6.94, 4: 9.0122, 5: 10.81, 6: 10.81, 7: 14.007, 8: 15.999, 9: 18.998, 10: 20.180, 11: 22.990, 12: 24.305, 13: 26.982, 14: 28.085, 15: 30.974, 16: 32.06, 17: 35.45, 18: 39.948, 19: 39.098, 20: 40.078, 21: 44.956, 22: 47.867, 23: 50.942, 24: 51.996, 25: 54.938, 26: 55.845, 27: 58.933, 28: 58.693, 29: 63.546, 30: 65.38, 31: 69.723, 32: 72.630, 33: 74.922, 34: 78.971, 35: 79.904, 36: 83.798, 37: 85.468, 38: 87.62, 39: 88.906, 40: 91.224, 41: 92.906, 42: 95.95, 43: 96.906, 44: 101.07, 45: 102.91, 46: 106.42, 47: 107.87, 48: 112.41, 49: 114.82, 50: 118.71, 51: 121.76, 52: 127.60, 53: 127.60, 54: 131.29, 55: 132.91, 56: 137.33, 57: 138.91, 58: 140.12, 59: 140.91, 60: 144.24, 61: 144.912, 62: 150.36, 63: 151.96, 64: 157.25, 65: 158.93, 66: 162.50, 67: 164.93, 68: 167.26, 69: 168.93, 70: 173.05, 71: 174.97, 72: 178.49, 73: 180.95, 74: 183.84, 75: 186.21, 76: 190.23, 77: 192.22, 78: 195.08, 79: 196.97, 80: 200.59, 81: 204.38, 82: 207.2, 83: 208.98, 84: 1.97, 85: 2.02, 86: 2.2, 87: 3.48, 88: 2.83, 89: 2.0, 90: 232.04, 91: 231.04, 92: 238.03, 93: 237.048, 94: 244.064, 95: 243.061, 96: 247.070, 97: 247.070, 98: 251.079, 99: 252.083, 100: 257.095, 101: 258.098, 102: 259.101, 103: 262.110, 104: 267.122, 105: 270.131, 106: 271.134, 107: 270.133, 108: 270.134, 109: 278.156\n};\nexport const DefaultVdwRadius = 1.7; // C\nexport const DefaultAtomWeight = 10.81; // C\nexport const DefaultAtomNumber = 0;\nexport function VdwRadius(element) {\n    const i = AtomicNumbers[element];\n    return i === void 0 ? DefaultVdwRadius : ElementVdwRadii[i];\n}\nexport function AtomWeight(element) {\n    const i = AtomicNumbers[element];\n    return i === void 0 ? DefaultAtomWeight : ElementAtomWeights[i];\n}\nexport function AtomNumber(element) {\n    const i = AtomicNumbers[element];\n    return i === void 0 ? DefaultAtomNumber : i;\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\n// from NGL\nconst ProteinOneLetterCodes = {\n    'HIS': 'H',\n    'ARG': 'R',\n    'LYS': 'K',\n    'ILE': 'I',\n    'PHE': 'F',\n    'LEU': 'L',\n    'TRP': 'W',\n    'ALA': 'A',\n    'MET': 'M',\n    'PRO': 'P',\n    'CYS': 'C',\n    'ASN': 'N',\n    'VAL': 'V',\n    'GLY': 'G',\n    'SER': 'S',\n    'GLN': 'Q',\n    'TYR': 'Y',\n    'ASP': 'D',\n    'GLU': 'E',\n    'THR': 'T',\n    'SEC': 'U', // as per IUPAC definition\n    'PYL': 'O', // as per IUPAC definition\n    // charmm ff\n    'HSD': 'H', 'HSE': 'H', 'HSP': 'H',\n    'LSN': 'K',\n    'ASPP': 'D',\n    'GLUP': 'E',\n    // amber ff\n    'HID': 'H', 'HIE': 'H', 'HIP': 'H',\n    'LYN': 'K',\n    'ASH': 'D',\n    'GLH': 'E',\n};\nconst DnaOneLetterCodes = {\n    'DA': 'A',\n    'DC': 'C',\n    'DG': 'G',\n    'DT': 'T',\n    'DU': 'U'\n};\nconst RnaOneLetterCodes = {\n    'A': 'A',\n    'C': 'C',\n    'G': 'G',\n    'T': 'T',\n    'U': 'U'\n};\nexport function getProteinOneLetterCode(residueName) {\n    const code = ProteinOneLetterCodes[residueName];\n    return code || 'X';\n}\nexport function getRnaOneLetterCode(residueName) {\n    const code = RnaOneLetterCodes[residueName];\n    return code || 'X';\n}\nexport function getDnaOneLetterCode(residueName) {\n    const code = DnaOneLetterCodes[residueName];\n    return code || 'X';\n}\n","/**\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { getProteinOneLetterCode, getRnaOneLetterCode, getDnaOneLetterCode } from './constants.js';\nimport { Column } from '../../mol-data/db.js';\nimport { assertUnreachable } from '../../mol-util/type-helpers.js';\nvar Sequence;\n(function (Sequence) {\n    let Kind;\n    (function (Kind) {\n        Kind[\"Protein\"] = \"protein\";\n        Kind[\"RNA\"] = \"RNA\";\n        Kind[\"DNA\"] = \"DNA\";\n        Kind[\"Generic\"] = \"generic\";\n    })(Kind = Sequence.Kind || (Sequence.Kind = {}));\n    function getSequenceString(seq) {\n        const array = seq.code.toArray();\n        return (array instanceof Array ? array : Array.from(array)).join('');\n    }\n    Sequence.getSequenceString = getSequenceString;\n    function determineKind(names) {\n        for (let i = 0, _i = Math.min(names.rowCount, 10); i < _i; i++) {\n            const name = names.value(i) || '';\n            if (getProteinOneLetterCode(name) !== 'X')\n                return Kind.Protein;\n            if (getRnaOneLetterCode(name) !== 'X')\n                return Kind.RNA;\n            if (getDnaOneLetterCode(name) !== 'X')\n                return Kind.DNA;\n        }\n        return Kind.Generic;\n    }\n    function codeProvider(kind, map) {\n        let code;\n        switch (kind) {\n            case Kind.Protein:\n                code = getProteinOneLetterCode;\n                break;\n            case Kind.DNA:\n                code = getDnaOneLetterCode;\n                break;\n            case Kind.RNA:\n                code = getRnaOneLetterCode;\n                break;\n            case Kind.Generic:\n                code = () => 'X';\n                break;\n            default: assertUnreachable(kind);\n        }\n        if (map && map.size > 0) {\n            return (name) => {\n                const ret = code(name);\n                if (ret !== 'X' || !map.has(name))\n                    return ret;\n                return code(map.get(name));\n            };\n        }\n        return code;\n    }\n    function ofResidueNames(compId, seqId) {\n        if (seqId.rowCount === 0)\n            throw new Error('cannot be empty');\n        const kind = determineKind(compId);\n        return new ResidueNamesImpl(kind, compId, seqId);\n    }\n    Sequence.ofResidueNames = ofResidueNames;\n    class ResidueNamesImpl {\n        index(seqId) {\n            return this.indexMap.get(seqId);\n        }\n        constructor(kind, compId, seqId) {\n            this.kind = kind;\n            this.microHet = new Map();\n            const codeFromName = codeProvider(kind);\n            const codes = [];\n            const compIds = [];\n            const seqIds = [];\n            const microHet = new Map();\n            let idx = 0;\n            const indexMap = new Map();\n            for (let i = 0, il = seqId.rowCount; i < il; ++i) {\n                const seq_id = seqId.value(i);\n                if (!indexMap.has(seq_id)) {\n                    indexMap.set(seq_id, idx);\n                    const comp_id = compId.value(i);\n                    compIds[idx] = comp_id;\n                    seqIds[idx] = seq_id;\n                    codes[idx] = codeFromName(comp_id);\n                    idx += 1;\n                }\n                else {\n                    // micro-heterogeneity\n                    if (!microHet.has(seq_id)) {\n                        microHet.set(seq_id, [compIds[indexMap.get(seq_id)], compId.value(i)]);\n                    }\n                    else {\n                        microHet.get(seq_id).push(compId.value(i));\n                    }\n                }\n            }\n            const labels = [];\n            for (let i = 0, il = idx; i < il; ++i) {\n                const mh = microHet.get(seqIds[i]);\n                if (mh) {\n                    const l = mh.map(id => {\n                        const c = codeFromName(id);\n                        return c === 'X' ? id : c;\n                    });\n                    labels[i] = `(${l.join('|')})`;\n                }\n                else {\n                    labels[i] = codes[i] === 'X' ? compIds[i] : codes[i];\n                }\n            }\n            this.length = idx;\n            this.code = Column.ofStringArray(codes);\n            this.compId = Column.ofStringArray(compIds);\n            this.seqId = Column.ofIntArray(seqIds);\n            this.label = Column.ofStringArray(labels);\n            this.microHet = microHet;\n            this.indexMap = indexMap;\n        }\n    }\n    function ofSequenceRanges(seqIdBegin, seqIdEnd) {\n        const kind = Kind.Generic;\n        return new SequenceRangesImpl(kind, seqIdBegin, seqIdEnd);\n    }\n    Sequence.ofSequenceRanges = ofSequenceRanges;\n    class SequenceRangesImpl {\n        index(seqId) {\n            return seqId - this.minSeqId;\n        }\n        constructor(kind, seqIdStart, seqIdEnd) {\n            this.kind = kind;\n            this.seqIdStart = seqIdStart;\n            this.seqIdEnd = seqIdEnd;\n            this.microHet = new Map();\n            let maxSeqId = 0, minSeqId = Number.MAX_SAFE_INTEGER;\n            for (let i = 0, _i = this.seqIdStart.rowCount; i < _i; i++) {\n                const idStart = this.seqIdStart.value(i);\n                const idEnd = this.seqIdEnd.value(i);\n                if (idStart < minSeqId)\n                    minSeqId = idStart;\n                if (maxSeqId < idEnd)\n                    maxSeqId = idEnd;\n            }\n            const count = maxSeqId - minSeqId + 1;\n            this.code = Column.ofConst('X', count, Column.Schema.str);\n            this.label = Column.ofConst('', count, Column.Schema.str);\n            this.seqId = Column.ofLambda({\n                value: row => row + minSeqId + 1,\n                rowCount: count,\n                schema: Column.Schema.int\n            });\n            this.compId = Column.ofConst('', count, Column.Schema.str);\n            this.length = count;\n            this.minSeqId = minSeqId;\n        }\n    }\n})(Sequence || (Sequence = {}));\nexport { Sequence };\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n *\n * Adapted from LiteMol\n */\nimport { utf8Read, utf8ReadLong } from '../mol-io/common/utf8.js';\nimport { Task } from '../mol-task/index.js';\nimport { Asset } from './assets.js';\nimport { RUNNING_IN_NODEJS } from './nodejs-shims.js';\nimport { ungzip, unzip } from './zip/zip.js';\nexport var DataCompressionMethod;\n(function (DataCompressionMethod) {\n    DataCompressionMethod[DataCompressionMethod[\"None\"] = 0] = \"None\";\n    DataCompressionMethod[DataCompressionMethod[\"Gzip\"] = 1] = \"Gzip\";\n    DataCompressionMethod[DataCompressionMethod[\"Zip\"] = 2] = \"Zip\";\n})(DataCompressionMethod || (DataCompressionMethod = {}));\nexport function readStringFromFile(file) {\n    return readFromFileInternal(file, 'string');\n}\nexport function readUint8ArrayFromFile(file) {\n    return readFromFileInternal(file, 'binary');\n}\nexport function readFromFile(file, type) {\n    return readFromFileInternal(file, type);\n}\nexport function ajaxGet(params) {\n    if (typeof params === 'string')\n        return ajaxGetInternal(params, params, 'string');\n    return ajaxGetInternal(params.title, params.url, params.type || 'string', params.body, params.headers);\n}\nfunction isDone(data) {\n    if (RUNNING_IN_NODEJS)\n        throw new Error('`isDone` should not be used when running in Node.js'); // XMLHttpRequest and FileReader are not available in Node.js\n    if (data instanceof FileReader) {\n        return data.readyState === FileReader.DONE;\n    }\n    else if (data instanceof XMLHttpRequest) {\n        return data.readyState === XMLHttpRequest.DONE;\n    }\n    throw new Error('unknown data type');\n}\nfunction genericError(isDownload) {\n    if (isDownload)\n        return 'Failed to download data. Possible reasons: Resource is not available, or CORS is not allowed on the server.';\n    return 'Failed to open file.';\n}\nfunction readData(ctx, action, data) {\n    if (RUNNING_IN_NODEJS)\n        throw new Error('`readData` should not be used when running in Node.js'); // XMLHttpRequest is not available in Node.js\n    return new Promise((resolve, reject) => {\n        // first check if data reading is already done\n        if (isDone(data)) {\n            const { error } = data;\n            if (error !== null && error !== undefined) {\n                reject(error !== null && error !== void 0 ? error : genericError(data instanceof XMLHttpRequest));\n            }\n            else {\n                resolve(data);\n            }\n            return;\n        }\n        let hasError = false;\n        data.onerror = (e) => {\n            if (hasError)\n                return;\n            const { error } = e.target;\n            reject(error !== null && error !== void 0 ? error : genericError(data instanceof XMLHttpRequest));\n        };\n        data.onprogress = (e) => {\n            if (!ctx.shouldUpdate || hasError)\n                return;\n            try {\n                if (e.lengthComputable) {\n                    ctx.update({ message: action, isIndeterminate: false, current: e.loaded, max: e.total });\n                }\n                else {\n                    ctx.update({ message: `${action} ${(e.loaded / 1024 / 1024).toFixed(2)} MB`, isIndeterminate: true });\n                }\n            }\n            catch (e) {\n                hasError = true;\n                reject(e);\n            }\n        };\n        data.onload = (e) => {\n            resolve(data);\n        };\n    });\n}\nfunction getCompression(name) {\n    return /\\.gz$/i.test(name) ? DataCompressionMethod.Gzip :\n        /\\.zip$/i.test(name) ? DataCompressionMethod.Zip :\n            DataCompressionMethod.None;\n}\nconst reFilterPath = /^(__MACOSX|.DS_Store)/;\nasync function decompress(ctx, data, compression) {\n    switch (compression) {\n        case DataCompressionMethod.None: return data;\n        case DataCompressionMethod.Gzip: return ungzip(ctx, data);\n        case DataCompressionMethod.Zip:\n            const parsed = await unzip(ctx, data.buffer);\n            const names = Object.keys(parsed).filter(n => !reFilterPath.test(n));\n            if (names.length !== 1)\n                throw new Error('can only decompress zip files with a single entry');\n            return parsed[names[0]];\n    }\n}\nasync function processFile(ctx, fileContent, type, compression) {\n    if (fileContent === null)\n        throw new Error('no data given');\n    let data = new Uint8Array(fileContent);\n    if (compression !== DataCompressionMethod.None && type !== 'zip') { // if type==='zip', data will be decompressed later\n        data = await decompress(ctx, data, compression);\n    }\n    if (type === 'binary') {\n        return data;\n    }\n    else if (type === 'zip') {\n        return await unzip(ctx, data.buffer);\n    }\n    else if (type === 'string') {\n        return utf8ReadLong(data);\n    }\n    else if (type === 'xml') {\n        const parser = new DOMParser();\n        return parser.parseFromString(utf8Read(data), 'application/xml');\n    }\n    else if (type === 'json') {\n        return JSON.parse(utf8Read(data));\n    }\n    throw new Error(`could not get requested response data '${type}'`);\n}\nfunction readFromFileInternal(file, type) {\n    if (RUNNING_IN_NODEJS) {\n        return readFromFileInternal_NodeJS(file, type);\n    }\n    let reader = void 0;\n    return Task.create('Read File', async (ctx) => {\n        try {\n            await ctx.update({ message: 'Opening file...', canAbort: true });\n            reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            const fileReader = await readData(ctx, 'Reading...', reader);\n            const fileContent = fileReader.result;\n            await ctx.update({ message: 'Processing file...', canAbort: false });\n            return await processFile(ctx, fileContent, type, getCompression(file.name));\n        }\n        finally {\n            reader = void 0;\n        }\n    }, () => {\n        if (reader)\n            reader.abort();\n    });\n}\nfunction readFromFileInternal_NodeJS(file, type) {\n    return Task.create('Read File', async (ctx) => {\n        await ctx.update({ message: 'Opening file...', canAbort: false });\n        const fileContent = await file.arrayBuffer();\n        await ctx.update({ message: 'Processing file...', canAbort: false });\n        return await processFile(ctx, fileContent, type, getCompression(file.name));\n    });\n}\nclass RequestPool {\n    static get() {\n        if (RUNNING_IN_NODEJS)\n            throw new Error('`RequestPool.get` should not be used when running in Node.js'); // XMLHttpRequest is not available in Node.js\n        if (this.pool.length) {\n            return this.pool.pop();\n        }\n        return new XMLHttpRequest();\n    }\n    static emptyFunc() { }\n    static deposit(req) {\n        if (this.pool.length < this.poolSize) {\n            req.onabort = RequestPool.emptyFunc;\n            req.onerror = RequestPool.emptyFunc;\n            req.onload = RequestPool.emptyFunc;\n            req.onprogress = RequestPool.emptyFunc;\n            this.pool.push(req);\n        }\n    }\n}\nRequestPool.pool = [];\nRequestPool.poolSize = 15;\nfunction processAjax(req, type) {\n    if (req.status >= 200 && req.status < 400) {\n        const { response } = req;\n        RequestPool.deposit(req);\n        if ((type === 'binary' || type === 'zip') && response instanceof ArrayBuffer) {\n            return new Uint8Array(response);\n        }\n        else if (type === 'string' && typeof response === 'string') {\n            return response;\n        }\n        else if (type === 'xml' && response instanceof XMLDocument) {\n            return response;\n        }\n        else if (type === 'json' && typeof response === 'object') {\n            return response;\n        }\n        throw new Error(`could not get requested response data '${type}'`);\n    }\n    else {\n        RequestPool.deposit(req);\n        throw new Error(`Download failed with status code ${req.status}`);\n    }\n}\nfunction getRequestResponseType(type) {\n    switch (type) {\n        case 'json': return 'json';\n        case 'xml': return 'document';\n        case 'string': return 'text';\n        case 'binary': return 'arraybuffer';\n        case 'zip': return 'arraybuffer';\n    }\n}\nfunction ajaxGetInternal(title, url, type, body, headers) {\n    if (RUNNING_IN_NODEJS) {\n        if (url.startsWith('file://')) {\n            return ajaxGetInternal_file_NodeJS(title, url, type, body, headers);\n        }\n        else {\n            return ajaxGetInternal_http_NodeJS(title, url, type, body, headers);\n        }\n    }\n    let xhttp = void 0;\n    return Task.create(title ? title : 'Download', async (ctx) => {\n        xhttp = RequestPool.get();\n        xhttp.open(body ? 'post' : 'get', url, true);\n        if (headers) {\n            for (const [name, value] of headers) {\n                xhttp.setRequestHeader(name, value);\n            }\n        }\n        xhttp.responseType = getRequestResponseType(type);\n        xhttp.send(body);\n        await ctx.update({ message: 'Waiting for server...', canAbort: true });\n        const req = await readData(ctx, 'Downloading...', xhttp);\n        xhttp = void 0; // guard against reuse, help garbage collector\n        await ctx.update({ message: 'Parsing response...', canAbort: false });\n        const result = processAjax(req, type);\n        return result;\n    }, () => {\n        if (xhttp) {\n            xhttp.abort();\n            xhttp = void 0; // guard against reuse, help garbage collector\n        }\n    });\n}\n// NOTE: a workaround for using this in Node.js\nlet _fs = undefined;\nfunction getFS() {\n    if (!_fs) {\n        throw new Error('When running in Node.js and reading from files, call mol-util/data-source\\'s setFSModule function first.');\n    }\n    return _fs;\n}\nexport function setFSModule(fs) {\n    _fs = fs;\n}\nfunction readFileAsync(filename) {\n    return new Promise((resolve, reject) => {\n        getFS().readFile(filename, (err, data) => {\n            if (err)\n                reject(err);\n            else\n                resolve(data);\n        });\n    });\n}\n/** Alternative implementation of ajaxGetInternal for NodeJS for file:// protocol */\nfunction ajaxGetInternal_file_NodeJS(title, url, type, body, headers) {\n    if (!RUNNING_IN_NODEJS)\n        throw new Error('This function should only be used when running in Node.js');\n    if (!url.startsWith('file://'))\n        throw new Error('This function is only for URLs with protocol file://');\n    return Task.create(title !== null && title !== void 0 ? title : 'Download', async (ctx) => {\n        const filename = url.substring('file://'.length);\n        await ctx.update({ message: 'Loading file...', canAbort: false });\n        const data = await readFileAsync(filename);\n        await ctx.update({ message: 'Parsing response...', canAbort: false });\n        const result = await processFile(ctx, data.buffer, type, DataCompressionMethod.None);\n        return result;\n    });\n}\n/** Alternative implementation of ajaxGetInternal for NodeJS for http(s):// protocol */\nfunction ajaxGetInternal_http_NodeJS(title, url, type, body, headers) {\n    if (!RUNNING_IN_NODEJS)\n        throw new Error('This function should only be used when running in Node.js');\n    const aborter = new AbortController();\n    return Task.create(title !== null && title !== void 0 ? title : 'Download', async (ctx) => {\n        await ctx.update({ message: 'Downloading...', canAbort: true });\n        const response = await fetch(url, { signal: aborter.signal });\n        if (!(response.status >= 200 && response.status < 400)) {\n            throw new Error(`Download failed with status code ${response.status}`);\n        }\n        const fileContent = await response.bytes();\n        await ctx.update({ message: 'Parsing response...', canAbort: false });\n        const result = await processFile(ctx, fileContent.buffer, type, DataCompressionMethod.None);\n        return result;\n    }, () => {\n        aborter.abort();\n    });\n}\nexport async function ajaxGetMany(ctx, assetManager, sources, maxConcurrency) {\n    const len = sources.length;\n    const slots = new Array(sources.length);\n    await ctx.update({ message: 'Downloading...', current: 0, max: len });\n    let promises = [], promiseKeys = [];\n    let currentSrc = 0;\n    for (let _i = Math.min(len, maxConcurrency); currentSrc < _i; currentSrc++) {\n        const current = sources[currentSrc];\n        promises.push(wrapPromise(currentSrc, current.id, assetManager.resolve(Asset.getUrlAsset(assetManager, current.url), current.isBinary ? 'binary' : 'string').runAsChild(ctx)));\n        promiseKeys.push(currentSrc);\n    }\n    let done = 0;\n    while (promises.length > 0) {\n        const r = await Promise.race(promises);\n        const src = sources[r.index];\n        const idx = promiseKeys.indexOf(r.index);\n        done++;\n        if (r.kind === 'error' && !src.canFail) {\n            // TODO: cancel other downloads\n            throw new Error(`${src.url}: ${r.error}`);\n        }\n        if (ctx.shouldUpdate) {\n            await ctx.update({ message: 'Downloading...', current: done, max: len });\n        }\n        slots[r.index] = r;\n        promises = promises.filter(_filterRemoveIndex, idx);\n        promiseKeys = promiseKeys.filter(_filterRemoveIndex, idx);\n        if (currentSrc < len) {\n            const current = sources[currentSrc];\n            const asset = assetManager.resolve(Asset.getUrlAsset(assetManager, current.url), current.isBinary ? 'binary' : 'string').runAsChild(ctx);\n            promises.push(wrapPromise(currentSrc, current.id, asset));\n            promiseKeys.push(currentSrc);\n            currentSrc++;\n        }\n    }\n    return slots;\n}\nfunction _filterRemoveIndex(_, i) {\n    return this !== i;\n}\nasync function wrapPromise(index, id, p) {\n    try {\n        const result = await p;\n        return { kind: 'ok', result, index, id };\n    }\n    catch (error) {\n        return { kind: 'error', error, index, id };\n    }\n}\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * From CIFTools.js\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Encoding } from './encoding.js';\nimport { IsNativeEndianLittle, flipByteOrder } from '../binary.js';\nimport { assertUnreachable } from '../../../mol-util/type-helpers.js';\n/**\n * Fixed point, delta, RLE, integer packing adopted from https://github.com/rcsb/mmtf-javascript/\n * by Alexander Rose <alexander.rose@weirdbyte.de>, MIT License, Copyright (c) 2016\n */\nexport function decode(data) {\n    let current = data.data;\n    for (let i = data.encoding.length - 1; i >= 0; i--) {\n        current = decodeStep(current, data.encoding[i]);\n    }\n    return current;\n}\nfunction decodeStep(data, encoding) {\n    switch (encoding.kind) {\n        case 'ByteArray': {\n            switch (encoding.type) {\n                case Encoding.IntDataType.Uint8: return data;\n                case Encoding.IntDataType.Int8: return int8(data);\n                case Encoding.IntDataType.Int16: return int16(data);\n                case Encoding.IntDataType.Uint16: return uint16(data);\n                case Encoding.IntDataType.Int32: return int32(data);\n                case Encoding.IntDataType.Uint32: return uint32(data);\n                case Encoding.FloatDataType.Float32: return float32(data);\n                case Encoding.FloatDataType.Float64: return float64(data);\n                default: assertUnreachable(encoding.type);\n            }\n        }\n        case 'FixedPoint': return fixedPoint(data, encoding);\n        case 'IntervalQuantization': return intervalQuantization(data, encoding);\n        case 'RunLength': return runLength(data, encoding);\n        case 'Delta': return delta(data, encoding);\n        case 'IntegerPacking': return integerPacking(data, encoding);\n        case 'StringArray': return stringArray(data, encoding);\n    }\n}\nfunction getIntArray(type, size) {\n    switch (type) {\n        case Encoding.IntDataType.Int8: return new Int8Array(size);\n        case Encoding.IntDataType.Int16: return new Int16Array(size);\n        case Encoding.IntDataType.Int32: return new Int32Array(size);\n        case Encoding.IntDataType.Uint8: return new Uint8Array(size);\n        case Encoding.IntDataType.Uint16: return new Uint16Array(size);\n        case Encoding.IntDataType.Uint32: return new Uint32Array(size);\n        default: return new Int32Array(size);\n    }\n}\nfunction getFloatArray(type, size) {\n    switch (type) {\n        case Encoding.FloatDataType.Float32: return new Float32Array(size);\n        case Encoding.FloatDataType.Float64: return new Float64Array(size);\n        default: return new Float64Array(size);\n    }\n}\nfunction int8(data) { return new Int8Array(data.buffer, data.byteOffset); }\nfunction view(data, byteSize, c) {\n    if (IsNativeEndianLittle)\n        return new c(data.buffer);\n    return new c(flipByteOrder(data, byteSize));\n}\nfunction int16(data) { return view(data, 2, Int16Array); }\nfunction uint16(data) { return view(data, 2, Uint16Array); }\nfunction int32(data) { return view(data, 4, Int32Array); }\nfunction uint32(data) { return view(data, 4, Uint32Array); }\nfunction float32(data) { return view(data, 4, Float32Array); }\nfunction float64(data) { return view(data, 8, Float64Array); }\nfunction fixedPoint(data, encoding) {\n    const n = data.length;\n    const output = getFloatArray(encoding.srcType, n);\n    const f = 1 / encoding.factor;\n    for (let i = 0; i < n; i++) {\n        output[i] = f * data[i];\n    }\n    return output;\n}\nfunction intervalQuantization(data, encoding) {\n    const n = data.length;\n    const output = getFloatArray(encoding.srcType, n);\n    const delta = (encoding.max - encoding.min) / (encoding.numSteps - 1);\n    const min = encoding.min;\n    for (let i = 0; i < n; i++) {\n        output[i] = min + delta * data[i];\n    }\n    return output;\n}\nfunction runLength(data, encoding) {\n    const output = getIntArray(encoding.srcType, encoding.srcSize);\n    let dataOffset = 0;\n    for (let i = 0, il = data.length; i < il; i += 2) {\n        const value = data[i]; // value to be repeated\n        const length = data[i + 1]; // number of repeats\n        for (let j = 0; j < length; ++j) {\n            output[dataOffset++] = value;\n        }\n    }\n    return output;\n}\nfunction delta(data, encoding) {\n    const n = data.length;\n    const output = getIntArray(encoding.srcType, n);\n    if (!n)\n        return data;\n    output[0] = data[0] + (encoding.origin | 0);\n    for (let i = 1; i < n; ++i) {\n        output[i] = data[i] + output[i - 1];\n    }\n    return output;\n}\nfunction integerPackingSigned(data, encoding) {\n    const upperLimit = encoding.byteCount === 1 ? 0x7F : 0x7FFF;\n    const lowerLimit = -upperLimit - 1;\n    const n = data.length;\n    const output = new Int32Array(encoding.srcSize);\n    let i = 0;\n    let j = 0;\n    while (i < n) {\n        let value = 0, t = data[i];\n        while (t === upperLimit || t === lowerLimit) {\n            value += t;\n            i++;\n            t = data[i];\n        }\n        value += t;\n        output[j] = value;\n        i++;\n        j++;\n    }\n    return output;\n}\nfunction integerPackingUnsigned(data, encoding) {\n    const upperLimit = encoding.byteCount === 1 ? 0xFF : 0xFFFF;\n    const n = data.length;\n    const output = new Int32Array(encoding.srcSize);\n    let i = 0;\n    let j = 0;\n    while (i < n) {\n        let value = 0, t = data[i];\n        while (t === upperLimit) {\n            value += t;\n            i++;\n            t = data[i];\n        }\n        value += t;\n        output[j] = value;\n        i++;\n        j++;\n    }\n    return output;\n}\nfunction integerPacking(data, encoding) {\n    if (data.length === encoding.srcSize)\n        return data;\n    return encoding.isUnsigned ? integerPackingUnsigned(data, encoding) : integerPackingSigned(data, encoding);\n}\nfunction stringArray(data, encoding) {\n    const offsets = decode({ encoding: encoding.offsetEncoding, data: encoding.offsets });\n    const indices = decode({ encoding: encoding.dataEncoding, data });\n    const str = encoding.stringData;\n    const strings = new Array(offsets.length);\n    strings[0] = '';\n    for (let i = 1, _i = offsets.length; i < _i; i++) {\n        strings[i] = str.substring(offsets[i - 1], offsets[i]);\n    }\n    let offset = 0;\n    const result = new Array(indices.length);\n    for (let i = 0, _i = indices.length; i < _i; i++) {\n        result[offset++] = strings[indices[i] + 1];\n    }\n    return result;\n}\n","/**\n * Copyright (c) 2017-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SortedArray } from '../../../mol-data/int.js';\nimport { EquivalenceClasses } from '../../../mol-data/util.js';\nimport { Spacegroup, SpacegroupCell, SymmetryOperator } from '../../../mol-math/geometry.js';\nimport { Vec3, Mat4 } from '../../../mol-math/linear-algebra.js';\nimport { Task } from '../../../mol-task/index.js';\nimport { Symmetry, Model } from '../model.js';\nimport { QueryContext, StructureSelection, Queries as Q } from '../query.js';\nimport { Structure } from './structure.js';\nimport { Unit } from './unit.js';\nimport { ModelSymmetry } from '../../../mol-model-formats/structure/property/symmetry.js';\nimport { StructureProperties } from './properties.js';\nvar StructureSymmetry;\n(function (StructureSymmetry) {\n    function buildAssembly(structure, asmName) {\n        return Task.create('Build Assembly', async (ctx) => {\n            const models = structure.models;\n            if (models.length !== 1)\n                throw new Error('Can only build assemblies from structures based on 1 model.');\n            const assembly = Symmetry.findAssembly(models[0], asmName);\n            if (!assembly)\n                throw new Error(`Assembly '${asmName}' is not defined.`);\n            const coordinateSystem = SymmetryOperator.create(assembly.id, Mat4.identity(), { assembly: { id: assembly.id, operId: 0, operList: [] } });\n            const assembler = Structure.Builder({\n                coordinateSystem,\n                label: structure.label,\n                dynamicBonds: structure.dynamicBonds\n            });\n            const queryCtx = new QueryContext(structure);\n            for (const g of assembly.operatorGroups) {\n                const selection = g.selector(queryCtx);\n                if (StructureSelection.structureCount(selection) === 0) {\n                    continue;\n                }\n                const { units } = StructureSelection.unionStructure(selection);\n                for (const oper of g.operators) {\n                    for (const unit of units) {\n                        assembler.addWithOperator(unit, oper);\n                    }\n                }\n            }\n            return assembler.getStructure();\n        });\n    }\n    StructureSymmetry.buildAssembly = buildAssembly;\n    function buildSymmetryAssembly(structure, generators, symmetry) {\n        return Task.create('Build Symmetry Assembly', async (ctx) => {\n            const models = structure.models;\n            if (models.length !== 1)\n                throw new Error('Can only build symmetry assemblies from structures based on 1 model.');\n            const modelCenter = Vec3();\n            const assembler = Structure.Builder({\n                label: structure.label,\n                representativeModel: models[0],\n                dynamicBonds: structure.dynamicBonds\n            });\n            const queryCtx = new QueryContext(structure);\n            for (const g of generators) {\n                const selector = getSelector(g.asymIds);\n                const selection = selector(queryCtx);\n                if (StructureSelection.structureCount(selection) === 0) {\n                    continue;\n                }\n                const { units } = StructureSelection.unionStructure(selection);\n                for (const { index, shift: [i, j, k] } of g.operators) {\n                    const operators = getOperatorsForIndex(symmetry, index, i, j, k, modelCenter);\n                    for (const unit of units) {\n                        for (const op of operators) {\n                            assembler.addWithOperator(unit, op);\n                        }\n                    }\n                }\n            }\n            return assembler.getStructure();\n        });\n    }\n    StructureSymmetry.buildSymmetryAssembly = buildSymmetryAssembly;\n    function builderSymmetryMates(structure, radius) {\n        return Task.create('Find Symmetry Mates', ctx => findMatesRadius(ctx, structure, radius));\n    }\n    StructureSymmetry.builderSymmetryMates = builderSymmetryMates;\n    function buildSymmetryRange(structure, ijkMin, ijkMax) {\n        return Task.create('Build Symmetry', ctx => findSymmetryRange(ctx, structure, ijkMin, ijkMax));\n    }\n    StructureSymmetry.buildSymmetryRange = buildSymmetryRange;\n    /** Builds NCS structure, returns the original if NCS operators are not present. */\n    function buildNcs(structure) {\n        return Task.create('Build NCS', ctx => _buildNCS(ctx, structure));\n    }\n    StructureSymmetry.buildNcs = buildNcs;\n    function areUnitsEquivalent(a, b) {\n        return a.invariantId === b.invariantId && a.model.id === b.model.id && SortedArray.areEqual(a.elements, b.elements);\n    }\n    StructureSymmetry.areUnitsEquivalent = areUnitsEquivalent;\n    function UnitEquivalenceBuilder() {\n        return EquivalenceClasses(Unit.hashUnit, areUnitsEquivalent);\n    }\n    StructureSymmetry.UnitEquivalenceBuilder = UnitEquivalenceBuilder;\n    function computeTransformGroups(s) {\n        const groups = UnitEquivalenceBuilder();\n        for (const u of s.units)\n            groups.add(u.id, u);\n        const ret = [];\n        for (const eqUnits of groups.groups) {\n            ret.push(Unit.SymmetryGroup(eqUnits.map(id => s.unitMap.get(id))));\n        }\n        return ret;\n    }\n    StructureSymmetry.computeTransformGroups = computeTransformGroups;\n    /** Checks if transform groups are equal up to their unit's transformations */\n    function areTransformGroupsEquivalent(a, b) {\n        if (a.length !== b.length)\n            return false;\n        for (let i = 0, il = a.length; i < il; ++i) {\n            const au = a[i].units, bu = b[i].units;\n            if (au.length !== bu.length)\n                return false;\n            if (a[i].hashCode !== b[i].hashCode)\n                return false;\n            for (let j = 0, _j = au.length; j < _j; j++) {\n                if (au[j].conformation !== bu[j].conformation)\n                    return false;\n            }\n        }\n        return true;\n    }\n    StructureSymmetry.areTransformGroupsEquivalent = areTransformGroupsEquivalent;\n})(StructureSymmetry || (StructureSymmetry = {}));\nfunction getSelector(asymIds) {\n    return Q.generators.atoms({ chainTest: Q.pred.and(Q.pred.eq(ctx => StructureProperties.unit.operator_name(ctx.element), SymmetryOperator.DefaultName), Q.pred.inSet(ctx => StructureProperties.chain.label_asym_id(ctx.element), asymIds)) });\n}\nfunction getOperatorsForIndex(symmetry, index, i, j, k, modelCenter) {\n    const { spacegroup, ncsOperators } = symmetry;\n    const operators = [];\n    const { toFractional } = spacegroup.cell;\n    const ref = Vec3.transformMat4(Vec3(), modelCenter, toFractional);\n    const symOp = Spacegroup.getSymmetryOperatorRef(spacegroup, index, i, j, k, ref);\n    if (ncsOperators && ncsOperators.length) {\n        for (let u = 0, ul = ncsOperators.length; u < ul; ++u) {\n            const ncsOp = ncsOperators[u];\n            const matrix = Mat4.mul(Mat4(), symOp.matrix, ncsOp.matrix);\n            const operator = SymmetryOperator.create(`${symOp.name} ${ncsOp.name}`, matrix, {\n                assembly: symOp.assembly,\n                ncsId: ncsOp.ncsId,\n                hkl: symOp.hkl,\n                spgrOp: symOp.spgrOp\n            });\n            operators.push(operator);\n        }\n    }\n    else {\n        operators.push(symOp);\n    }\n    return operators;\n}\nfunction getOperatorsForRange(symmetry, ijkMin, ijkMax, modelCenter) {\n    const { spacegroup, ncsOperators } = symmetry;\n    const ncsCount = (ncsOperators && ncsOperators.length) || 0;\n    const operators = [];\n    if (!ncsCount &&\n        ijkMin[0] <= 0 && ijkMax[0] >= 0 &&\n        ijkMin[1] <= 0 && ijkMax[1] >= 0 &&\n        ijkMin[2] <= 0 && ijkMax[2] >= 0) {\n        operators[0] = Spacegroup.getSymmetryOperator(spacegroup, 0, 0, 0, 0);\n    }\n    for (let op = 0; op < spacegroup.operators.length; op++) {\n        for (let i = ijkMin[0]; i <= ijkMax[0]; i++) {\n            for (let j = ijkMin[1]; j <= ijkMax[1]; j++) {\n                for (let k = ijkMin[2]; k <= ijkMax[2]; k++) {\n                    // check if we have added identity as the 1st operator.\n                    if (!ncsCount && op === 0 && i === 0 && j === 0 && k === 0)\n                        continue;\n                    operators.push(...getOperatorsForIndex(symmetry, op, i, j, k, modelCenter));\n                }\n            }\n        }\n    }\n    return operators;\n}\nfunction getOperatorsCached333(symmetry, ref) {\n    if (symmetry._operators_333 && Vec3.equals(ref, symmetry._operators_333.ref)) {\n        return symmetry._operators_333.operators;\n    }\n    symmetry._operators_333 = {\n        ref: Vec3.clone(ref),\n        operators: getOperatorsForRange(symmetry, Vec3.create(-3, -3, -3), Vec3.create(3, 3, 3), ref)\n    };\n    return symmetry._operators_333.operators;\n}\nfunction assembleOperators(structure, operators) {\n    const assembler = Structure.Builder({\n        label: structure.label,\n        dynamicBonds: structure.dynamicBonds\n    });\n    const { units } = structure;\n    for (const oper of operators) {\n        for (const unit of units) {\n            assembler.addWithOperator(unit, oper);\n        }\n    }\n    return assembler.getStructure();\n}\nasync function _buildNCS(ctx, structure) {\n    const models = structure.models;\n    if (models.length !== 1)\n        throw new Error('Can only build NCS from structures based on 1 model.');\n    const symmetry = ModelSymmetry.Provider.get(models[0]);\n    if (!symmetry)\n        return structure;\n    const operators = symmetry.ncsOperators;\n    if (!operators || !operators.length)\n        return structure;\n    return assembleOperators(structure, operators);\n}\nasync function findSymmetryRange(ctx, structure, ijkMin, ijkMax) {\n    const models = structure.models;\n    if (models.length !== 1)\n        throw new Error('Can only build symmetries from structures based on 1 model.');\n    const symmetry = ModelSymmetry.Provider.get(models[0]);\n    if (!symmetry)\n        return structure;\n    const { spacegroup } = symmetry;\n    if (SpacegroupCell.isZero(spacegroup.cell))\n        return structure;\n    const modelCenter = Model.getCenter(models[0]);\n    const operators = getOperatorsForRange(symmetry, ijkMin, ijkMax, modelCenter);\n    return assembleOperators(structure, operators);\n}\nasync function findMatesRadius(ctx, structure, radius) {\n    const models = structure.models;\n    if (models.length !== 1)\n        throw new Error('Can only build symmetries from structures based on 1 model.');\n    const symmetry = ModelSymmetry.Provider.get(models[0]);\n    if (!symmetry)\n        return structure;\n    const { spacegroup } = symmetry;\n    if (SpacegroupCell.isZero(spacegroup.cell))\n        return structure;\n    if (ctx.shouldUpdate)\n        await ctx.update('Initialing...');\n    const modelCenter = Model.getCenter(models[0]);\n    const operators = getOperatorsCached333(symmetry, modelCenter);\n    const lookup = structure.lookup3d;\n    // keep track of added invariant-unit and operator combinations\n    const added = new Set();\n    function hash(unit, oper) {\n        return `${unit.invariantId}|${oper.name}`;\n    }\n    const assembler = Structure.Builder({\n        label: structure.label,\n        dynamicBonds: structure.dynamicBonds\n    });\n    const { units } = structure;\n    const center = Vec3.zero();\n    for (const oper of operators) {\n        for (const unit of units) {\n            const boundingSphere = unit.lookup3d.boundary.sphere;\n            Vec3.transformMat4(center, boundingSphere.center, oper.matrix);\n            const closeUnits = lookup.findUnitIndices(center[0], center[1], center[2], boundingSphere.radius + radius);\n            for (let uI = 0, _uI = closeUnits.count; uI < _uI; uI++) {\n                const closeUnit = units[closeUnits.indices[uI]];\n                if (!closeUnit.lookup3d.check(center[0], center[1], center[2], boundingSphere.radius + radius))\n                    continue;\n                const h = hash(unit, oper);\n                if (!added.has(h)) {\n                    assembler.addWithOperator(unit, oper);\n                    added.add(h);\n                }\n            }\n        }\n        if (ctx.shouldUpdate)\n            await ctx.update('Building symmetry...');\n    }\n    return assembler.getStructure();\n}\nexport { StructureSymmetry };\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/**\n * Determine the number of digits in a floating point number\n * Find a number M such that round(M * v) - M * v <= delta.\n * If no such M exists, return -1.\n */\nexport function getMantissaMultiplier(v, maxDigits, delta) {\n    let m = 1, i;\n    for (i = 0; i < maxDigits; i++) {\n        const mv = m * v;\n        if (Math.abs(Math.round(mv) - mv) <= delta)\n            return i;\n        m *= 10;\n    }\n    return -1;\n}\nexport function integerDigitCount(v, delta) {\n    const f = Math.abs(v);\n    if (f < delta)\n        return 0;\n    return Math.floor(Math.log10(Math.abs(v))) + 1;\n}\n/**\n * Determine the maximum number of digits in a floating point array.\n * Find a number M such that round(M * v) - M * v <= delta.\n * If no such M exists, return -1.\n */\nexport function getArrayDigitCount(xs, maxDigits, delta) {\n    let mantissaDigits = 1;\n    let integerDigits = 0;\n    for (let i = 0, _i = xs.length; i < _i; i++) {\n        if (mantissaDigits >= 0) {\n            const t = getMantissaMultiplier(xs[i], maxDigits, delta);\n            if (t < 0)\n                mantissaDigits = -1;\n            else if (t > mantissaDigits)\n                mantissaDigits = t;\n        }\n        const abs = Math.abs(xs[i]);\n        if (abs > delta) {\n            const d = Math.floor(Math.log10(Math.abs(abs))) + 1;\n            if (d > integerDigits)\n                integerDigits = d;\n        }\n    }\n    return { mantissaDigits, integerDigits };\n}\nexport function isInteger(s) {\n    s = s.trim();\n    const n = parseInt(s, 10);\n    return Number.isNaN(n) ? false : n.toString() === s;\n}\nexport function getPrecision(v) {\n    if (!isFinite(v))\n        return 0;\n    let e = 1;\n    let p = 0;\n    while (Math.round(v * e) / e !== v) {\n        e *= 10;\n        ++p;\n    }\n    return p;\n}\nexport function toPrecision(v, precision) {\n    return parseFloat(v.toPrecision(precision));\n}\nexport function toFixed(v, fractionDigits) {\n    return parseFloat(v.toFixed(fractionDigits));\n}\n","/*\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * from https://github.com/dsehnal/CIFTools.js\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar ReaderResult;\n(function (ReaderResult) {\n    function error(message, line = -1) {\n        return new Error(message, line);\n    }\n    ReaderResult.error = error;\n    function success(result, warnings = []) {\n        return new Success(result, warnings);\n    }\n    ReaderResult.success = success;\n    class Error {\n        toString() {\n            if (this.line >= 0) {\n                return `[Line ${this.line}] ${this.message}`;\n            }\n            return this.message;\n        }\n        constructor(message, line) {\n            this.message = message;\n            this.line = line;\n            this.isError = true;\n        }\n    }\n    ReaderResult.Error = Error;\n    class Success {\n        constructor(result, warnings) {\n            this.result = result;\n            this.warnings = warnings;\n            this.isError = false;\n        }\n    }\n    ReaderResult.Success = Success;\n})(ReaderResult || (ReaderResult = {}));\nexport { ReaderResult };\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { idFactory } from './id-factory.js';\nvar ValueRef;\n(function (ValueRef) {\n    function create(ref) { return { ref }; }\n    ValueRef.create = create;\n    function set(ref, value) { ref.ref = value; return ref; }\n    ValueRef.set = set;\n})(ValueRef || (ValueRef = {}));\nconst getNextId = idFactory(0, 0x7FFFFFFF);\nvar ValueBox;\n(function (ValueBox) {\n    function create(value, metadata) {\n        return { id: getNextId(), version: 0, value, metadata: metadata };\n    }\n    ValueBox.create = create;\n    /** The box.metadata is carried over from the old box */\n    function withValue(box, value) {\n        return { id: box.id, version: box.version + 1, value, metadata: box.metadata };\n    }\n    ValueBox.withValue = withValue;\n})(ValueBox || (ValueBox = {}));\nvar ValueCell;\n(function (ValueCell) {\n    function create(value, metadata) {\n        return ValueRef.create(ValueBox.create(value, metadata));\n    }\n    ValueCell.create = create;\n    /** The box.metadata is carried over from the old box */\n    function update(cell, value) {\n        return ValueRef.set(cell, ValueBox.withValue(cell.ref, value));\n    }\n    ValueCell.update = update;\n    function set(cell, box) {\n        return ValueRef.set(cell, box);\n    }\n    ValueCell.set = set;\n    /** Updates the cell if the value is has changed, comparing by reference */\n    function updateIfChanged(cell, value) {\n        return cell.ref.value !== value ? update(cell, value) : cell;\n    }\n    ValueCell.updateIfChanged = updateIfChanged;\n})(ValueCell || (ValueCell = {}));\nexport { ValueRef, ValueBox, ValueCell };\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { UUID } from '../../../mol-util/uuid.js';\nimport { VdwRadius } from './properties/atomic.js';\nimport { CustomProperties } from '../../custom-property.js';\nimport { calcModelCenter, getAsymIdCount } from './util.js';\nimport { Vec3 } from '../../../mol-math/linear-algebra.js';\nimport { Coordinates } from '../coordinates.js';\nimport { Task } from '../../../mol-task/index.js';\nimport { IndexPairBonds } from '../../../mol-model-formats/structure/property/bonds/index-pair.js';\nimport { createModels } from '../../../mol-model-formats/structure/basic/parser.js';\nimport { MmcifFormat } from '../../../mol-model-formats/structure/mmcif.js';\nimport { ModelSymmetry } from '../../../mol-model-formats/structure/property/symmetry.js';\nimport { Column } from '../../../mol-data/db.js';\nimport { CustomModelProperty } from '../../../mol-model-props/common/custom-model-property.js';\nimport { ArrayTrajectory } from '../trajectory.js';\nimport { PolymerType } from './types.js';\nimport { ModelSecondaryStructure } from '../../../mol-model-formats/structure/property/secondary-structure.js';\n{ }\nexport var Model;\n(function (Model) {\n    function _trajectoryFromModelAndCoordinates(model, coordinates) {\n        const trajectory = [];\n        const { frames } = coordinates;\n        const srcIndexArray = getSourceIndexArray(model);\n        const coarseGrained = isCoarseGrained(model);\n        const elementCount = model.atomicHierarchy.atoms._rowCount;\n        for (let i = 0, il = frames.length; i < il; ++i) {\n            const f = frames[i];\n            if (f.elementCount !== elementCount) {\n                throw new Error(`Frame element count mismatch, got ${f.elementCount} but expected ${elementCount}.`);\n            }\n            const m = {\n                ...model,\n                id: UUID.create22(),\n                modelNum: i,\n                atomicConformation: getAtomicConformationFromFrame(model, f),\n                // TODO: add support for supplying sphere and gaussian coordinates in addition to atomic coordinates?\n                // coarseConformation: coarse.conformation,\n                customProperties: new CustomProperties(),\n                _staticPropertyData: Object.create(null),\n                _dynamicPropertyData: Object.create(null)\n            };\n            if (f.cell) {\n                const symmetry = ModelSymmetry.fromCell(f.cell.size, f.cell.anglesInRadians);\n                ModelSymmetry.Provider.set(m, symmetry);\n            }\n            Model.TrajectoryInfo.set(m, { index: i, size: frames.length });\n            Model.CoarseGrained.set(m, coarseGrained);\n            trajectory.push(m);\n        }\n        return { trajectory, srcIndexArray };\n    }\n    function getSourceIndexArray(model) {\n        const srcIndex = model.atomicHierarchy.atomSourceIndex;\n        let srcIndexArray = undefined;\n        if ('__srcIndexArray__' in model._staticPropertyData) {\n            srcIndexArray = model._dynamicPropertyData.__srcIndexArray__;\n        }\n        else {\n            srcIndexArray = Column.isIdentity(srcIndex) ? void 0 : srcIndex.toArray({ array: Int32Array });\n            model._dynamicPropertyData.__srcIndexArray__ = srcIndexArray;\n        }\n        return srcIndexArray;\n    }\n    function trajectoryFromModelAndCoordinates(model, coordinates) {\n        return new ArrayTrajectory(_trajectoryFromModelAndCoordinates(model, coordinates).trajectory);\n    }\n    Model.trajectoryFromModelAndCoordinates = trajectoryFromModelAndCoordinates;\n    function trajectoryFromTopologyAndCoordinates(topology, coordinates) {\n        return Task.create('Create Trajectory', async (ctx) => {\n            const models = await createModels(topology.basic, topology.sourceData, ctx);\n            if (models.frameCount === 0)\n                throw new Error('found no model');\n            const model = models.representative;\n            const { trajectory } = _trajectoryFromModelAndCoordinates(model, coordinates);\n            const bondData = { pairs: topology.bonds, count: model.atomicHierarchy.atoms._rowCount };\n            const indexPairBonds = IndexPairBonds.fromData(bondData);\n            const coarseGrained = isCoarseGrained(model);\n            let index = 0;\n            for (const m of trajectory) {\n                IndexPairBonds.Provider.set(m, indexPairBonds);\n                Model.TrajectoryInfo.set(m, { index: index++, size: trajectory.length });\n                Model.CoarseGrained.set(m, coarseGrained);\n            }\n            return new ArrayTrajectory(trajectory);\n        });\n    }\n    Model.trajectoryFromTopologyAndCoordinates = trajectoryFromTopologyAndCoordinates;\n    function getAtomicConformationFromFrame(model, frame) {\n        return Coordinates.getAtomicConformation(frame, {\n            atomId: model.atomicConformation.atomId,\n            occupancy: model.atomicConformation.occupancy,\n            B_iso_or_equiv: model.atomicConformation.B_iso_or_equiv\n        }, getSourceIndexArray(model));\n    }\n    Model.getAtomicConformationFromFrame = getAtomicConformationFromFrame;\n    const CenterProp = '__Center__';\n    function getCenter(model) {\n        if (model._dynamicPropertyData[CenterProp])\n            return model._dynamicPropertyData[CenterProp];\n        const center = calcModelCenter(model.atomicConformation, model.coarseConformation);\n        model._dynamicPropertyData[CenterProp] = center;\n        return center;\n    }\n    Model.getCenter = getCenter;\n    const AtomicRadiiProp = '__AtomicRadii__';\n    /** Get array of atomic radii for all atoms in the model (cached). */\n    function getAtomicRadii(model) {\n        if (model._dynamicPropertyData[AtomicRadiiProp])\n            return model._dynamicPropertyData[AtomicRadiiProp];\n        const nAtoms = model.atomicHierarchy.atoms._rowCount;\n        const type_symbol = model.atomicHierarchy.atoms.type_symbol.value;\n        const radii = new Float32Array(nAtoms);\n        for (let i = 0; i < nAtoms; i++) {\n            radii[i] = VdwRadius(type_symbol(i));\n        }\n        model._dynamicPropertyData[AtomicRadiiProp] = radii;\n        return radii;\n    }\n    Model.getAtomicRadii = getAtomicRadii;\n    function invertIndex(xs) {\n        const invertedIndex = new Int32Array(xs.rowCount);\n        let isIdentity = false;\n        for (let i = 0, _i = xs.rowCount; i < _i; i++) {\n            const x = xs.value(i);\n            if (x !== i)\n                isIdentity = false;\n            invertedIndex[x] = i;\n        }\n        return { isIdentity, invertedIndex: invertedIndex };\n    }\n    const InvertedAtomSrcIndexProp = '__InvertedAtomSrcIndex__';\n    function getInvertedAtomSourceIndex(model) {\n        if (model._staticPropertyData[InvertedAtomSrcIndexProp])\n            return model._staticPropertyData[InvertedAtomSrcIndexProp];\n        const index = invertIndex(model.atomicHierarchy.atomSourceIndex);\n        model._staticPropertyData[InvertedAtomSrcIndexProp] = index;\n        return index;\n    }\n    Model.getInvertedAtomSourceIndex = getInvertedAtomSourceIndex;\n    const TrajectoryInfoProp = '__TrajectoryInfo__';\n    Model.TrajectoryInfo = {\n        get(model) {\n            return model._dynamicPropertyData[TrajectoryInfoProp] || { index: 0, size: 1 };\n        },\n        set(model, trajectoryInfo) {\n            return model._dynamicPropertyData[TrajectoryInfoProp] = trajectoryInfo;\n        }\n    };\n    const AsymIdCountProp = '__AsymIdCount__';\n    Model.AsymIdCount = {\n        get(model) {\n            if (model._dynamicPropertyData[AsymIdCountProp])\n                return model._dynamicPropertyData[AsymIdCountProp];\n            const asymIdCount = getAsymIdCount(model);\n            model._dynamicPropertyData[AsymIdCountProp] = asymIdCount;\n            return asymIdCount;\n        },\n    };\n    Model.AsymIdOffset = CustomModelProperty.createSimple('asym_id_offset', 'static');\n    Model.Index = CustomModelProperty.createSimple('index', 'static');\n    Model.MaxIndex = CustomModelProperty.createSimple('max_index', 'static');\n    function getRoot(model) {\n        return model.parent || model;\n    }\n    Model.getRoot = getRoot;\n    function areHierarchiesEqual(a, b) {\n        return a.atomicHierarchy === b.atomicHierarchy && a.coarseHierarchy === b.coarseHierarchy;\n    }\n    Model.areHierarchiesEqual = areHierarchiesEqual;\n    const CoordinatesHistoryProp = '__CoordinatesHistory__';\n    Model.CoordinatesHistory = {\n        get(model) {\n            return model._staticPropertyData[CoordinatesHistoryProp];\n        },\n        set(model, coordinatesHistory) {\n            return model._staticPropertyData[CoordinatesHistoryProp] = coordinatesHistory;\n        }\n    };\n    const CoarseGrainedProp = '__CoarseGrained__';\n    Model.CoarseGrained = {\n        get(model) {\n            return model._staticPropertyData[CoarseGrainedProp];\n        },\n        set(model, coarseGrained) {\n            return model._staticPropertyData[CoarseGrainedProp] = coarseGrained;\n        }\n    };\n    /**\n     * Mark as coarse grained if any of the following conditions are met:\n     * - has typical coarse grained atom names (BB, SC1)\n     * - has less than three times as many atoms as polymer residues (C-alpha only models)\n     * - has no standard sidechain atoms\n     */\n    function isCoarseGrained(model) {\n        let coarseGrained = Model.CoarseGrained.get(model);\n        if (coarseGrained === undefined) {\n            let polymerResidueCount = 0;\n            let polymerDirectionCount = 0;\n            const { polymerType, directionToElementIndex } = model.atomicHierarchy.derived.residue;\n            for (let i = 0; i < polymerType.length; ++i) {\n                if (polymerType[i] !== PolymerType.NA) {\n                    polymerResidueCount += 1;\n                    if (directionToElementIndex[i] !== -1)\n                        polymerDirectionCount += 1;\n                }\n            }\n            // check for coarse grained atom names\n            let hasBB = false, hasSC1 = false;\n            const { label_atom_id, _rowCount: atomCount } = model.atomicHierarchy.atoms;\n            for (let i = 0; i < atomCount; ++i) {\n                const atomName = label_atom_id.value(i);\n                if (!hasBB && atomName === 'BB')\n                    hasBB = true;\n                if (!hasSC1 && atomName === 'SC1')\n                    hasSC1 = true;\n                if (hasBB && hasSC1)\n                    break;\n            }\n            coarseGrained = false;\n            if (atomCount > 0 && polymerResidueCount > 0) {\n                if (hasBB && hasSC1) {\n                    coarseGrained = true;\n                }\n                else if (atomCount / polymerResidueCount < 3) {\n                    coarseGrained = true;\n                }\n                else if (polymerDirectionCount === 0) {\n                    coarseGrained = true;\n                }\n            }\n            Model.CoarseGrained.set(model, coarseGrained);\n        }\n        return coarseGrained;\n    }\n    Model.isCoarseGrained = isCoarseGrained;\n    //\n    function hasCarbohydrate(model) {\n        return model.properties.saccharideComponentMap.size > 0;\n    }\n    Model.hasCarbohydrate = hasCarbohydrate;\n    function hasProtein(model) {\n        const { subtype } = model.entities;\n        for (let i = 0, il = subtype.rowCount; i < il; ++i) {\n            if (subtype.value(i).startsWith('polypeptide'))\n                return true;\n        }\n        return false;\n    }\n    Model.hasProtein = hasProtein;\n    function hasNucleic(model) {\n        const { subtype } = model.entities;\n        for (let i = 0, il = subtype.rowCount; i < il; ++i) {\n            const s = subtype.value(i);\n            if (s.endsWith('ribonucleotide hybrid') || s.endsWith('ribonucleotide'))\n                return true;\n        }\n        return false;\n    }\n    Model.hasNucleic = hasNucleic;\n    function isFromPdbArchive(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0, il = db.database_2.database_id.rowCount; i < il; ++i) {\n            if (db.database_2.database_id.value(i) === 'pdb')\n                return true;\n        }\n        return false;\n    }\n    Model.isFromPdbArchive = isFromPdbArchive;\n    function hasPdbId(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        return (\n        // 4 character PDB id\n        model.entryId.match(/^[1-9][a-z0-9]{3,3}$/i) !== null ||\n            // long PDB id\n            model.entryId.match(/^pdb_[0-9]{4,4}[1-9][a-z0-9]{3,3}$/i) !== null);\n    }\n    Model.hasPdbId = hasPdbId;\n    function hasSecondaryStructure(model) {\n        if (MmcifFormat.is(model.sourceData)) {\n            const { db } = model.sourceData.data;\n            return (db.struct_conf.id.isDefined ||\n                db.struct_sheet_range.id.isDefined);\n        }\n        else {\n            return ModelSecondaryStructure.Provider.isApplicable(model);\n        }\n    }\n    Model.hasSecondaryStructure = hasSecondaryStructure;\n    const tmpAngles90 = Vec3.create(1.5707963, 1.5707963, 1.5707963); // in radians\n    const tmpLengths1 = Vec3.create(1, 1, 1);\n    function hasCrystalSymmetry(model) {\n        var _a;\n        const spacegroup = (_a = ModelSymmetry.Provider.get(model)) === null || _a === void 0 ? void 0 : _a.spacegroup;\n        return !!spacegroup && !(spacegroup.num === 1 &&\n            Vec3.equals(spacegroup.cell.anglesInRadians, tmpAngles90) &&\n            Vec3.equals(spacegroup.cell.size, tmpLengths1));\n    }\n    Model.hasCrystalSymmetry = hasCrystalSymmetry;\n    function isFromXray(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0; i < db.exptl.method.rowCount; i++) {\n            const v = db.exptl.method.value(i).toUpperCase();\n            if (v.indexOf('DIFFRACTION') >= 0)\n                return true;\n        }\n        return false;\n    }\n    Model.isFromXray = isFromXray;\n    function isFromEm(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0; i < db.exptl.method.rowCount; i++) {\n            const v = db.exptl.method.value(i).toUpperCase();\n            if (v.indexOf('MICROSCOPY') >= 0)\n                return true;\n        }\n        return false;\n    }\n    Model.isFromEm = isFromEm;\n    function isFromNmr(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0; i < db.exptl.method.rowCount; i++) {\n            const v = db.exptl.method.value(i).toUpperCase();\n            if (v.indexOf('NMR') >= 0)\n                return true;\n        }\n        return false;\n    }\n    Model.isFromNmr = isFromNmr;\n    function isExperimental(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0; i < db.struct.pdbx_structure_determination_methodology.rowCount; i++) {\n            if (db.struct.pdbx_structure_determination_methodology.value(i).toLowerCase() === 'experimental')\n                return true;\n        }\n        return false;\n    }\n    Model.isExperimental = isExperimental;\n    function isIntegrative(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0; i < db.struct.pdbx_structure_determination_methodology.rowCount; i++) {\n            if (db.struct.pdbx_structure_determination_methodology.value(i).toLowerCase() === 'integrative')\n                return true;\n        }\n        return false;\n    }\n    Model.isIntegrative = isIntegrative;\n    function isComputational(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        for (let i = 0; i < db.struct.pdbx_structure_determination_methodology.rowCount; i++) {\n            if (db.struct.pdbx_structure_determination_methodology.value(i).toLowerCase() === 'computational')\n                return true;\n        }\n        return false;\n    }\n    Model.isComputational = isComputational;\n    function hasXrayMap(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        // Check exprimental method to exclude models solved with\n        // 'ELECTRON CRYSTALLOGRAPHY' which also have structure factors\n        if (!isFromXray(model))\n            return false;\n        const { db } = model.sourceData.data;\n        const { status_code_sf } = db.pdbx_database_status;\n        return status_code_sf.isDefined && status_code_sf.value(0) === 'REL';\n    }\n    Model.hasXrayMap = hasXrayMap;\n    /**\n     * Also checks for `content_type` of 'associated EM volume' to exclude cases\n     * like 6TEK which are solved with 'X-RAY DIFFRACTION' but have an related\n     * EMDB entry of type 'other EM volume'.\n     */\n    function hasEmMap(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { db } = model.sourceData.data;\n        const { db_name, content_type } = db.pdbx_database_related;\n        for (let i = 0, il = db.pdbx_database_related._rowCount; i < il; ++i) {\n            if (db_name.value(i).toUpperCase() === 'EMDB' && content_type.value(i) === 'associated EM volume') {\n                return true;\n            }\n        }\n        return false;\n    }\n    Model.hasEmMap = hasEmMap;\n    function hasDensityMap(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        return hasXrayMap(model) || hasEmMap(model);\n    }\n    Model.hasDensityMap = hasDensityMap;\n    function probablyHasDensityMap(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        if (Model.isIntegrative(model))\n            return false;\n        const { db } = model.sourceData.data;\n        return hasDensityMap(model) || (\n        // check if from pdb archive but missing relevant meta data\n        hasPdbId(model) && (!db.exptl.method.isDefined ||\n            (isFromXray(model) && (!db.pdbx_database_status.status_code_sf.isDefined ||\n                db.pdbx_database_status.status_code_sf.valueKind(0) === Column.ValueKinds.Unknown)) ||\n            (isFromEm(model) && (!db.pdbx_database_related.db_name.isDefined))));\n    }\n    Model.probablyHasDensityMap = probablyHasDensityMap;\n})(Model || (Model = {}));\n","/**\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3 } from '../../../mol-math/linear-algebra.js';\nimport { arrayMinMax } from '../../../mol-util/array.js';\nexport function calcModelCenter(atomicConformation, coarseConformation) {\n    const rangesX = [];\n    const rangesY = [];\n    const rangesZ = [];\n    if (atomicConformation.x.length) {\n        rangesX.push(...arrayMinMax(atomicConformation.x));\n        rangesY.push(...arrayMinMax(atomicConformation.y));\n        rangesZ.push(...arrayMinMax(atomicConformation.z));\n    }\n    if (coarseConformation) {\n        if (coarseConformation.spheres.x.length) {\n            rangesX.push(...arrayMinMax(coarseConformation.spheres.x));\n            rangesY.push(...arrayMinMax(coarseConformation.spheres.y));\n            rangesZ.push(...arrayMinMax(coarseConformation.spheres.z));\n        }\n        if (coarseConformation.gaussians.x.length) {\n            rangesX.push(...arrayMinMax(coarseConformation.gaussians.x));\n            rangesY.push(...arrayMinMax(coarseConformation.gaussians.y));\n            rangesZ.push(...arrayMinMax(coarseConformation.gaussians.z));\n        }\n    }\n    const [minX, maxX] = arrayMinMax(rangesX);\n    const [minY, maxY] = arrayMinMax(rangesY);\n    const [minZ, maxZ] = arrayMinMax(rangesZ);\n    const x = minX + (maxX - minX) / 2;\n    const y = minY + (maxY - minY) / 2;\n    const z = minZ + (maxZ - minZ) / 2;\n    return Vec3.create(x, y, z);\n}\nexport function getAsymIdCount(model) {\n    const auth = new Set();\n    const label = new Set();\n    model.properties.structAsymMap.forEach(({ auth_id }, label_id) => {\n        auth.add(auth_id);\n        label.add(label_id);\n    });\n    return { auth: auth.size, label: label.size };\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { OrderedSet } from '../../../../mol-data/int.js';\nimport { Unit } from '../unit.js';\nimport { Loci } from './loci.js';\nimport { Location } from './location.js';\nexport var Stats;\n(function (Stats) {\n    function create() {\n        return {\n            elementCount: 0,\n            conformationCount: 0,\n            residueCount: 0,\n            chainCount: 0,\n            unitCount: 0,\n            structureCount: 0,\n            firstElementLoc: Location.create(void 0),\n            firstConformationLoc: Location.create(void 0),\n            firstResidueLoc: Location.create(void 0),\n            firstChainLoc: Location.create(void 0),\n            firstUnitLoc: Location.create(void 0),\n            firstStructureLoc: Location.create(void 0),\n        };\n    }\n    Stats.create = create;\n    function addCountHelper(map, key, inc) {\n        const count = map.get(key) || 0;\n        map.set(key, count + inc);\n    }\n    function handleElement(stats, structure, element) {\n        const { indices, unit } = element;\n        const { elements } = unit;\n        const size = OrderedSet.size(indices);\n        const lociResidueAltIdCounts = new Map();\n        const residueAltIdCounts = new Map();\n        if (size > 0) {\n            Location.set(stats.firstElementLoc, structure, unit, elements[OrderedSet.start(indices)]);\n        }\n        // count single element unit as unit not element\n        if (size === elements.length) {\n            stats.unitCount += 1;\n            if (stats.unitCount === 1) {\n                Location.set(stats.firstUnitLoc, structure, unit, elements[OrderedSet.start(indices)]);\n            }\n        }\n        else if (size === 1) {\n            if (Unit.Traits.is(unit.traits, Unit.Trait.MultiChain)) {\n                // handled in `handleUnitChainsSimple`\n                return;\n            }\n            else {\n                stats.elementCount += 1;\n                if (stats.elementCount === 1) {\n                    Location.set(stats.firstElementLoc, structure, unit, elements[OrderedSet.start(indices)]);\n                }\n            }\n        }\n        else {\n            if (Unit.isAtomic(unit)) {\n                const { index, offsets } = unit.model.atomicHierarchy.residueAtomSegments;\n                const { label_alt_id } = unit.model.atomicHierarchy.atoms;\n                let i = 0;\n                while (i < size) {\n                    lociResidueAltIdCounts.clear();\n                    let j = 0;\n                    const eI = elements[OrderedSet.getAt(indices, i)];\n                    const rI = index[eI];\n                    addCountHelper(lociResidueAltIdCounts, label_alt_id.value(eI), 1);\n                    ++i;\n                    ++j;\n                    while (i < size) {\n                        const eI = elements[OrderedSet.getAt(indices, i)];\n                        if (index[eI] !== rI)\n                            break;\n                        addCountHelper(lociResidueAltIdCounts, label_alt_id.value(eI), 1);\n                        ++i;\n                        ++j;\n                    }\n                    if (offsets[rI + 1] - offsets[rI] === j) {\n                        // full residue\n                        stats.residueCount += 1;\n                        if (stats.residueCount === 1) {\n                            Location.set(stats.firstResidueLoc, structure, unit, offsets[rI]);\n                        }\n                    }\n                    else {\n                        // partial residue\n                        residueAltIdCounts.clear();\n                        for (let l = offsets[rI], _l = offsets[rI + 1]; l < _l; ++l) {\n                            addCountHelper(residueAltIdCounts, label_alt_id.value(l), 1);\n                        }\n                        // check if shared atom count match\n                        if (residueAltIdCounts.get('') === lociResidueAltIdCounts.get('')) {\n                            lociResidueAltIdCounts.forEach((v, k) => {\n                                if (residueAltIdCounts.get(k) !== v)\n                                    return;\n                                if (k !== '') {\n                                    stats.conformationCount += 1;\n                                    if (stats.conformationCount === 1) {\n                                        for (let l = offsets[rI], _l = offsets[rI + 1]; l < _l; ++l) {\n                                            if (k === label_alt_id.value(l)) {\n                                                Location.set(stats.firstConformationLoc, structure, unit, l);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                                j -= v;\n                            });\n                        }\n                        stats.elementCount += j;\n                    }\n                }\n            }\n            else {\n                stats.elementCount += size;\n                if (stats.elementCount === 1) {\n                    Location.set(stats.firstElementLoc, structure, unit, elements[OrderedSet.start(indices)]);\n                }\n            }\n        }\n    }\n    function handleUnitChainsSimple(stats, structure, element) {\n        const { indices, unit } = element;\n        const size = OrderedSet.size(indices);\n        if (size === 0)\n            return;\n        const { elements } = unit;\n        if (!Unit.Traits.is(unit.traits, Unit.Trait.MultiChain)) {\n            if (size === elements.length) {\n                stats.chainCount += 1;\n                if (stats.chainCount === 1) {\n                    Location.set(stats.firstChainLoc, structure, unit, elements[OrderedSet.start(indices)]);\n                }\n            }\n            return;\n        }\n        const segments = Unit.isAtomic(unit)\n            ? unit.model.atomicHierarchy.chainAtomSegments\n            : Unit.isSpheres(unit)\n                ? unit.model.coarseHierarchy.spheres.chainElementSegments\n                : Unit.isGaussians(unit)\n                    ? unit.model.coarseHierarchy.gaussians.chainElementSegments\n                    : void 0;\n        if (!segments) {\n            console.warn('StructureElement loci stats: unknown unit type');\n            return;\n        }\n        const { index, offsets } = segments;\n        let i = 0;\n        while (i < size) {\n            let j = 0;\n            const eI = elements[OrderedSet.getAt(indices, i)];\n            const cI = index[eI];\n            ++i;\n            ++j;\n            while (i < size) {\n                const eI = elements[OrderedSet.getAt(indices, i)];\n                if (index[eI] !== cI)\n                    break;\n                ++i;\n                ++j;\n            }\n            if (offsets[cI + 1] - offsets[cI] === j) {\n                // full chain\n                stats.chainCount += 1;\n                if (stats.chainCount === 1) {\n                    Location.set(stats.firstChainLoc, structure, unit, offsets[cI]);\n                }\n            }\n            else if (size === 1) {\n                // need to handle here, skipped in `handleElement`\n                stats.elementCount += 1;\n                if (stats.elementCount === 1) {\n                    Location.set(stats.firstElementLoc, structure, unit, eI);\n                }\n            }\n        }\n    }\n    function handleUnitChainsPartitioned(stats, structure, lociElements, start, end) {\n        let element = lociElements[start];\n        // all the elements have the same model since they are part of the same group so this is ok.\n        const segments = Unit.isAtomic(element.unit)\n            ? element.unit.model.atomicHierarchy.chainAtomSegments\n            : Unit.isSpheres(element.unit)\n                ? element.unit.model.coarseHierarchy.spheres.chainElementSegments\n                : Unit.isGaussians(element.unit)\n                    ? element.unit.model.coarseHierarchy.gaussians.chainElementSegments\n                    : void 0;\n        if (!segments) {\n            console.warn('StructureElement loci stats: unknown unit type');\n            return;\n        }\n        const { index, offsets } = segments;\n        const chainCounts = new Map();\n        for (let elIndex = start; elIndex < end; elIndex++) {\n            element = lociElements[elIndex];\n            const { indices, unit } = element;\n            const size = OrderedSet.size(indices);\n            if (size === 0)\n                continue;\n            const { elements } = unit;\n            if (!Unit.Traits.is(unit.traits, Unit.Trait.MultiChain)) {\n                const eI = elements[OrderedSet.start(indices)];\n                addCountHelper(chainCounts, index[eI], elements.length);\n                continue;\n            }\n            let i = 0;\n            while (i < size) {\n                let j = 0;\n                const eI = elements[OrderedSet.getAt(indices, i)];\n                const cI = index[eI];\n                ++i;\n                ++j;\n                while (i < size) {\n                    const eI = elements[OrderedSet.getAt(indices, i)];\n                    if (index[eI] !== cI)\n                        break;\n                    ++i;\n                    ++j;\n                }\n                addCountHelper(chainCounts, cI, j);\n            }\n        }\n        let firstCI = -1;\n        chainCounts.forEach((count, cI) => {\n            if (offsets[cI + 1] - offsets[cI] === count) {\n                // full chain\n                stats.chainCount += 1;\n                if (stats.chainCount === 1) {\n                    firstCI = cI;\n                }\n            }\n        });\n        if (firstCI < 0)\n            return;\n        for (let elIndex = start; elIndex < end; elIndex++) {\n            element = lociElements[elIndex];\n            const { indices, unit } = element;\n            const size = OrderedSet.size(indices);\n            if (size === 0)\n                continue;\n            const { elements } = unit;\n            const i = 0;\n            while (i < size) {\n                const eI = elements[OrderedSet.getAt(indices, i)];\n                const cI = index[eI];\n                if (cI === firstCI) {\n                    Location.set(stats.firstChainLoc, structure, unit, eI);\n                    return;\n                }\n            }\n        }\n    }\n    function ofLoci(loci) {\n        const stats = create();\n        if (Loci.isEmpty(loci))\n            return stats;\n        let hasPartitions = false;\n        if (Loci.isWholeStructure(loci)) {\n            stats.structureCount += 1;\n            if (stats.structureCount === 1) {\n                const { unit, indices } = loci.elements[0];\n                Location.set(stats.firstStructureLoc, loci.structure, unit, unit.elements[OrderedSet.min(indices)]);\n            }\n        }\n        else {\n            for (const e of loci.elements) {\n                handleElement(stats, loci.structure, e);\n                if (!Unit.Traits.is(e.unit.traits, Unit.Trait.Partitioned)) {\n                    handleUnitChainsSimple(stats, loci.structure, e);\n                }\n                else {\n                    hasPartitions = true;\n                }\n            }\n        }\n        if (hasPartitions) {\n            for (let i = 0, len = loci.elements.length; i < len; i++) {\n                const e = loci.elements[i];\n                if (!Unit.Traits.is(e.unit.traits, Unit.Trait.Partitioned))\n                    continue;\n                const start = i;\n                while (i < len && Unit.areSameChainOperatorGroup(loci.elements[i].unit, e.unit)) {\n                    i++;\n                }\n                const end = i;\n                i--;\n                if (end - start === 1) {\n                    handleUnitChainsSimple(stats, loci.structure, e);\n                }\n                else {\n                    handleUnitChainsPartitioned(stats, loci.structure, loci.elements, start, end);\n                }\n            }\n        }\n        return stats;\n    }\n    Stats.ofLoci = ofLoci;\n    /** Adds counts of two Stats objects together, assumes they describe different structures */\n    function add(out, a, b) {\n        if (a.elementCount === 1 && b.elementCount === 0) {\n            Location.copy(out.firstElementLoc, a.firstElementLoc);\n        }\n        else if (a.elementCount === 0 && b.elementCount === 1) {\n            Location.copy(out.firstElementLoc, b.firstElementLoc);\n        }\n        if (a.conformationCount === 1 && b.conformationCount === 0) {\n            Location.copy(out.firstConformationLoc, a.firstConformationLoc);\n        }\n        else if (a.conformationCount === 0 && b.conformationCount === 1) {\n            Location.copy(out.firstConformationLoc, b.firstConformationLoc);\n        }\n        if (a.residueCount === 1 && b.residueCount === 0) {\n            Location.copy(out.firstResidueLoc, a.firstResidueLoc);\n        }\n        else if (a.residueCount === 0 && b.residueCount === 1) {\n            Location.copy(out.firstResidueLoc, b.firstResidueLoc);\n        }\n        if (a.chainCount === 1 && b.chainCount === 0) {\n            Location.copy(out.firstChainLoc, a.firstChainLoc);\n        }\n        else if (a.chainCount === 0 && b.chainCount === 1) {\n            Location.copy(out.firstChainLoc, b.firstChainLoc);\n        }\n        if (a.unitCount === 1 && b.unitCount === 0) {\n            Location.copy(out.firstUnitLoc, a.firstUnitLoc);\n        }\n        else if (a.unitCount === 0 && b.unitCount === 1) {\n            Location.copy(out.firstUnitLoc, b.firstUnitLoc);\n        }\n        if (a.structureCount === 1 && b.structureCount === 0) {\n            Location.copy(out.firstStructureLoc, a.firstStructureLoc);\n        }\n        else if (a.structureCount === 0 && b.structureCount === 1) {\n            Location.copy(out.firstStructureLoc, b.firstStructureLoc);\n        }\n        out.elementCount = a.elementCount + b.elementCount;\n        out.conformationCount = a.conformationCount + b.conformationCount;\n        out.residueCount = a.residueCount + b.residueCount;\n        out.chainCount = a.chainCount + b.chainCount;\n        out.unitCount = a.unitCount + b.unitCount;\n        out.structureCount = a.structureCount + b.structureCount;\n        return out;\n    }\n    Stats.add = add;\n})(Stats || (Stats = {}));\n","/**\n * Copyright (c) 2017-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Unit } from '../unit.js';\nimport { StructureProperties } from '../properties.js';\nexport function property(p) { return p; }\nfunction _wrongUnitKind(kind) { throw new Error(`Property only available for ${kind} models.`); }\nexport function atomicProperty(p) {\n    return property(l => Unit.isAtomic(l.unit) ? p(l) : _wrongUnitKind('atomic'));\n}\nexport function coarseProperty(p) {\n    return property(l => Unit.isCoarse(l.unit) ? p(l) : _wrongUnitKind('coarse'));\n}\nexport function residueIndex(e) {\n    if (Unit.isAtomic(e.unit)) {\n        return e.unit.residueIndex[e.element];\n    }\n    else {\n        // TODO: throw error instead?\n        return -1;\n    }\n}\nexport function chainIndex(e) {\n    if (Unit.isAtomic(e.unit)) {\n        return e.unit.chainIndex[e.element];\n    }\n    else {\n        // TODO: throw error instead?\n        return -1;\n    }\n}\nexport function entityIndex(l) {\n    return StructureProperties.entity.key(l);\n}\n","/**\n * Copyright (c) 2017-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { lerp as scalar_lerp } from '../../mol-math/interpolate.js';\nimport { Mat3 } from '../linear-algebra/3d/mat3.js';\nimport { Mat4 } from '../linear-algebra/3d/mat4.js';\nimport { Quat } from '../linear-algebra/3d/quat.js';\nimport { Vec3 } from '../linear-algebra/3d/vec3.js';\nvar SymmetryOperator;\n(function (SymmetryOperator) {\n    SymmetryOperator.DefaultName = '1_555';\n    SymmetryOperator.Default = create(SymmetryOperator.DefaultName, Mat4.identity());\n    SymmetryOperator.RotationTranslationEpsilon = 0.005;\n    function create(name, matrix, info) {\n        var _a;\n        let { assembly, ncsId, hkl, spgrOp, key } = info || {};\n        const _hkl = hkl ? Vec3.clone(hkl) : Vec3();\n        spgrOp = spgrOp !== null && spgrOp !== void 0 ? spgrOp : -1;\n        key = key !== null && key !== void 0 ? key : -1;\n        ncsId = ncsId || -1;\n        const isIdentity = Mat4.isIdentity(matrix);\n        const suffix = getSuffix(info, isIdentity);\n        const instanceId = (_a = info === null || info === void 0 ? void 0 : info.instanceId) !== null && _a !== void 0 ? _a : name;\n        if (isIdentity)\n            return { name, instanceId, assembly, matrix, inverse: Mat4.identity(), isIdentity: true, hkl: _hkl, spgrOp, ncsId, suffix, key };\n        if (!Mat4.isRotationAndTranslation(matrix, SymmetryOperator.RotationTranslationEpsilon)) {\n            console.warn(`Symmetry operator (${name}) should be a composition of rotation and translation.`);\n        }\n        return { name, instanceId, assembly, matrix, inverse: Mat4.invert(Mat4(), matrix), isIdentity: false, hkl: _hkl, spgrOp, key, ncsId, suffix };\n    }\n    SymmetryOperator.create = create;\n    function isSymmetryOperator(x) {\n        return !!x && !!x.matrix && !!x.inverse && typeof x.name === 'string';\n    }\n    /** Create spacegroup symmetry operator name, e.g. getSymmetryOperatorName(0, 0, 0, 0) -> '1_555' */\n    function getSymmetryOperatorName(spgrOp, i, j, k) {\n        const fmt = (n) => n >= 0 && n <= 9 ? `${n}` : `(${n})`;\n        return `${spgrOp + 1}_${fmt(i + 5)}${fmt(j + 5)}${fmt(k + 5)}`;\n    }\n    SymmetryOperator.getSymmetryOperatorName = getSymmetryOperatorName;\n    /** Create assembly symmetry operator name, e.g. getAssemblyOperatorName(['X0', '5']) -> 'X0-5' */\n    function getAssemblyOperatorName(operatorIds) {\n        return 'ASM-' + operatorIds.join('-');\n    }\n    SymmetryOperator.getAssemblyOperatorName = getAssemblyOperatorName;\n    function getSuffix(info, isIdentity) {\n        if (!info)\n            return '';\n        if (info.assembly) {\n            if (isSymmetryOperator(info))\n                return info.suffix;\n            return isIdentity ? '' : `_${info.assembly.operId}`;\n        }\n        if (typeof info.spgrOp !== 'undefined' && typeof info.hkl !== 'undefined' && info.spgrOp !== -1) {\n            const [i, j, k] = info.hkl;\n            return `-${getSymmetryOperatorName(info.spgrOp, i, j, k)}`;\n        }\n        if (info.ncsId !== -1) {\n            return `_${info.ncsId}`;\n        }\n        return '';\n    }\n    const _m = Mat4();\n    function checkIfRotationAndTranslation(rot, offset) {\n        Mat4.setIdentity(_m);\n        for (let i = 0; i < 3; i++) {\n            for (let j = 0; j < 3; j++) {\n                Mat4.setValue(_m, i, j, Mat3.getValue(rot, i, j));\n            }\n        }\n        Mat4.setTranslation(_m, offset);\n        return Mat4.isRotationAndTranslation(_m, SymmetryOperator.RotationTranslationEpsilon);\n    }\n    SymmetryOperator.checkIfRotationAndTranslation = checkIfRotationAndTranslation;\n    function ofRotationAndOffset(name, rot, offset, ncsId) {\n        const t = Mat4.identity();\n        for (let i = 0; i < 3; i++) {\n            for (let j = 0; j < 3; j++) {\n                Mat4.setValue(t, i, j, Mat3.getValue(rot, i, j));\n            }\n        }\n        Mat4.setTranslation(t, offset);\n        return create(name, t, { ncsId });\n    }\n    SymmetryOperator.ofRotationAndOffset = ofRotationAndOffset;\n    const _q1 = Quat.identity(), _q2 = Quat(), _q3 = Quat(), _axis = Vec3();\n    function lerpFromIdentity(out, op, t) {\n        const m = op.inverse;\n        if (op.isIdentity)\n            return Mat4.copy(out, m);\n        const _t = 1 - t;\n        // interpolate rotation\n        Mat4.getRotation(_q2, m);\n        Quat.slerp(_q2, _q1, _q2, _t);\n        const angle = Quat.getAxisAngle(_axis, _q2);\n        Mat4.fromRotation(out, angle, _axis);\n        // interpolate translation\n        Mat4.setValue(out, 0, 3, _t * Mat4.getValue(m, 0, 3));\n        Mat4.setValue(out, 1, 3, _t * Mat4.getValue(m, 1, 3));\n        Mat4.setValue(out, 2, 3, _t * Mat4.getValue(m, 2, 3));\n        return out;\n    }\n    SymmetryOperator.lerpFromIdentity = lerpFromIdentity;\n    function slerp(out, src, tar, t) {\n        if (Math.abs(t) <= 0.00001)\n            return Mat4.copy(out, src);\n        if (Math.abs(t - 1) <= 0.00001)\n            return Mat4.copy(out, tar);\n        // interpolate rotation\n        Mat4.getRotation(_q2, src);\n        Mat4.getRotation(_q3, tar);\n        Quat.slerp(_q3, _q2, _q3, t);\n        const angle = Quat.getAxisAngle(_axis, _q3);\n        Mat4.fromRotation(out, angle, _axis);\n        // interpolate translation\n        Mat4.setValue(out, 0, 3, scalar_lerp(Mat4.getValue(src, 0, 3), Mat4.getValue(tar, 0, 3), t));\n        Mat4.setValue(out, 1, 3, scalar_lerp(Mat4.getValue(src, 1, 3), Mat4.getValue(tar, 1, 3), t));\n        Mat4.setValue(out, 2, 3, scalar_lerp(Mat4.getValue(src, 2, 3), Mat4.getValue(tar, 2, 3), t));\n        return out;\n    }\n    SymmetryOperator.slerp = slerp;\n    /**\n     * Apply the 1st and then 2nd operator. ( = second.matrix * first.matrix).\n     * Keep `name`, `assembly`, `ncsId`, `hkl` and `spgrOpId` properties from second.\n     */\n    function compose(first, second) {\n        const matrix = Mat4.mul(Mat4(), second.matrix, first.matrix);\n        return create(second.name, matrix, second);\n    }\n    SymmetryOperator.compose = compose;\n    class _ArrayMapping {\n        constructor(operator, coordinates, r = _zeroRadius) {\n            this.operator = operator;\n            this.coordinates = coordinates;\n            this.r = r;\n            this._x = coordinates.x;\n            this._y = coordinates.y;\n            this._z = coordinates.z;\n            this._m = operator.matrix;\n        }\n        invariantPosition(i, s) {\n            s[0] = this._x[i];\n            s[1] = this._y[i];\n            s[2] = this._z[i];\n            return s;\n        }\n        position(i, s) {\n            s[0] = this._x[i];\n            s[1] = this._y[i];\n            s[2] = this._z[i];\n            Vec3.transformMat4(s, s, this._m);\n            return s;\n        }\n        x(i) {\n            const m = this._m;\n            const xx = m[0], yy = m[4], zz = m[8], tx = m[12];\n            const x = this._x[i], y = this._y[i], z = this._z[i], w = (m[3] * x + m[7] * y + m[11] * z + m[15]) || 1.0;\n            return (xx * x + yy * y + zz * z + tx) / w;\n        }\n        y(i) {\n            const m = this._m;\n            const xx = m[1], yy = m[5], zz = m[9], ty = m[13];\n            const x = this._x[i], y = this._y[i], z = this._z[i], w = (m[3] * x + m[7] * y + m[11] * z + m[15]) || 1.0;\n            return (xx * x + yy * y + zz * z + ty) / w;\n        }\n        z(i) {\n            const m = this._m;\n            const xx = m[2], yy = m[6], zz = m[10], tz = m[14];\n            const x = this._x[i], y = this._y[i], z = this._z[i], w = (m[3] * x + m[7] * y + m[11] * z + m[15]) || 1.0;\n            return (xx * x + yy * y + zz * z + tz) / w;\n        }\n    }\n    class _ArrayMappingW1 {\n        constructor(operator, coordinates, r = _zeroRadius) {\n            this.operator = operator;\n            this.coordinates = coordinates;\n            this.r = r;\n            this._x = coordinates.x;\n            this._y = coordinates.y;\n            this._z = coordinates.z;\n            this._m = operator.matrix;\n        }\n        invariantPosition(i, s) {\n            s[0] = this._x[i];\n            s[1] = this._y[i];\n            s[2] = this._z[i];\n            return s;\n        }\n        position(i, s) {\n            s[0] = this.x(i);\n            s[1] = this.y(i);\n            s[2] = this.z(i);\n            return s;\n        }\n        x(i) {\n            const m = this._m;\n            return m[0] * this._x[i] + m[4] * this._y[i] + m[8] * this._z[i] + m[12];\n        }\n        y(i) {\n            const m = this._m;\n            return m[1] * this._x[i] + m[5] * this._y[i] + m[9] * this._z[i] + m[13];\n        }\n        z(i) {\n            const m = this._m;\n            return m[2] * this._x[i] + m[6] * this._y[i] + m[10] * this._z[i] + m[14];\n        }\n    }\n    class _ArrayMappingIdentity {\n        constructor(operator, coordinates, r = _zeroRadius) {\n            this.operator = operator;\n            this.coordinates = coordinates;\n            this.r = r;\n            this._x = coordinates.x;\n            this._y = coordinates.y;\n            this._z = coordinates.z;\n        }\n        invariantPosition(i, s) {\n            s[0] = this._x[i];\n            s[1] = this._y[i];\n            s[2] = this._z[i];\n            return s;\n        }\n        position(i, s) {\n            s[0] = this._x[i];\n            s[1] = this._y[i];\n            s[2] = this._z[i];\n            return s;\n        }\n        x(i) {\n            return this._x[i];\n        }\n        y(i) {\n            return this._y[i];\n        }\n        z(i) {\n            return this._z[i];\n        }\n    }\n    function createMapping(operator, coords, radius = _zeroRadius) {\n        return Mat4.isIdentity(operator.matrix)\n            ? new _ArrayMappingIdentity(operator, coords, radius)\n            : isW1(operator.matrix)\n                ? new _ArrayMappingW1(operator, coords, radius)\n                : new _ArrayMapping(operator, coords, radius);\n    }\n    SymmetryOperator.createMapping = createMapping;\n})(SymmetryOperator || (SymmetryOperator = {}));\nexport { SymmetryOperator };\nfunction _zeroRadius(_i) { return 0; }\nfunction isW1(m) {\n    return m[3] === 0 && m[7] === 0 && m[11] === 0 && m[15] === 1;\n}\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { EPSILON } from './common.js';\nimport { Mat4 } from './mat4.js';\nimport { Vec3 } from './vec3.js';\nfunction Mat3() {\n    return Mat3.zero();\n}\n(function (Mat3) {\n    function zero() {\n        // force double backing array by 0.1.\n        const ret = [0.1, 0, 0, 0, 0, 0, 0, 0, 0];\n        ret[0] = 0.0;\n        return ret;\n    }\n    Mat3.zero = zero;\n    function identity() {\n        const out = zero();\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 1;\n        out[5] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 1;\n        return out;\n    }\n    Mat3.identity = identity;\n    function setIdentity(mat) {\n        mat[0] = 1;\n        mat[1] = 0;\n        mat[2] = 0;\n        mat[3] = 0;\n        mat[4] = 1;\n        mat[5] = 0;\n        mat[6] = 0;\n        mat[7] = 0;\n        mat[8] = 1;\n        return mat;\n    }\n    Mat3.setIdentity = setIdentity;\n    function toArray(a, out, offset) {\n        out[offset + 0] = a[0];\n        out[offset + 1] = a[1];\n        out[offset + 2] = a[2];\n        out[offset + 3] = a[3];\n        out[offset + 4] = a[4];\n        out[offset + 5] = a[5];\n        out[offset + 6] = a[6];\n        out[offset + 7] = a[7];\n        out[offset + 8] = a[8];\n        return out;\n    }\n    Mat3.toArray = toArray;\n    function fromArray(a, array, offset) {\n        a[0] = array[offset + 0];\n        a[1] = array[offset + 1];\n        a[2] = array[offset + 2];\n        a[3] = array[offset + 3];\n        a[4] = array[offset + 4];\n        a[5] = array[offset + 5];\n        a[6] = array[offset + 6];\n        a[7] = array[offset + 7];\n        a[8] = array[offset + 8];\n        return a;\n    }\n    Mat3.fromArray = fromArray;\n    function fromColumns(out, left, middle, right) {\n        out[0] = left[0];\n        out[1] = left[1];\n        out[2] = left[2];\n        out[3] = middle[0];\n        out[4] = middle[1];\n        out[5] = middle[2];\n        out[6] = right[0];\n        out[7] = right[1];\n        out[8] = right[2];\n        return out;\n    }\n    Mat3.fromColumns = fromColumns;\n    /**\n     * Copies the upper-left 3x3 values into the given mat3.\n     */\n    function fromMat4(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[4];\n        out[4] = a[5];\n        out[5] = a[6];\n        out[6] = a[8];\n        out[7] = a[9];\n        out[8] = a[10];\n        return out;\n    }\n    Mat3.fromMat4 = fromMat4;\n    const _m4 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    function fromEuler(out, euler, order) {\n        Mat4.fromEuler(_m4, euler, order);\n        return fromMat4(out, _m4);\n    }\n    Mat3.fromEuler = fromEuler;\n    function fromRotation(out, rad, axis) {\n        Mat4.fromRotation(_m4, rad, axis);\n        return fromMat4(out, _m4);\n    }\n    Mat3.fromRotation = fromRotation;\n    function create(a00, a01, a02, a10, a11, a12, a20, a21, a22) {\n        const out = zero();\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a10;\n        out[4] = a11;\n        out[5] = a12;\n        out[6] = a20;\n        out[7] = a21;\n        out[8] = a22;\n        return out;\n    }\n    Mat3.create = create;\n    const _id = identity();\n    function isIdentity(m, eps) {\n        return areEqual(m, _id, typeof eps === 'undefined' ? EPSILON : eps);\n    }\n    Mat3.isIdentity = isIdentity;\n    function hasNaN(m) {\n        for (let i = 0; i < 9; i++)\n            if (Number.isNaN(m[i]))\n                return true;\n        return false;\n    }\n    Mat3.hasNaN = hasNaN;\n    /**\n     * Creates a new Mat3 initialized with values from an existing matrix\n     */\n    function clone(a) {\n        return copy(zero(), a);\n    }\n    Mat3.clone = clone;\n    function areEqual(a, b, eps) {\n        for (let i = 0; i < 9; i++) {\n            if (Math.abs(a[i] - b[i]) > eps)\n                return false;\n        }\n        return true;\n    }\n    Mat3.areEqual = areEqual;\n    function setValue(a, i, j, value) {\n        a[3 * j + i] = value;\n    }\n    Mat3.setValue = setValue;\n    function getValue(a, i, j) {\n        return a[3 * j + i];\n    }\n    Mat3.getValue = getValue;\n    /**\n     * Copy the values from one Mat3 to another\n     */\n    function copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[8] = a[8];\n        return out;\n    }\n    Mat3.copy = copy;\n    /**\n     * Transpose the values of a Mat3\n     */\n    function transpose(out, a) {\n        // If we are transposing ourselves we can skip a few steps but have to cache some values\n        if (out === a) {\n            const a01 = a[1], a02 = a[2], a12 = a[5];\n            out[1] = a[3];\n            out[2] = a[6];\n            out[3] = a01;\n            out[5] = a[7];\n            out[6] = a02;\n            out[7] = a12;\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[3];\n            out[2] = a[6];\n            out[3] = a[1];\n            out[4] = a[4];\n            out[5] = a[7];\n            out[6] = a[2];\n            out[7] = a[5];\n            out[8] = a[8];\n        }\n        return out;\n    }\n    Mat3.transpose = transpose;\n    /**\n     * Inverts a Mat3\n     */\n    function invert(out, a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2];\n        const a10 = a[3], a11 = a[4], a12 = a[5];\n        const a20 = a[6], a21 = a[7], a22 = a[8];\n        const b01 = a22 * a11 - a12 * a21;\n        const b11 = -a22 * a10 + a12 * a20;\n        const b21 = a21 * a10 - a11 * a20;\n        // Calculate the determinant\n        let det = a00 * b01 + a01 * b11 + a02 * b21;\n        if (!det) {\n            console.warn('non-invertible matrix.', a);\n            return out;\n        }\n        det = 1.0 / det;\n        out[0] = b01 * det;\n        out[1] = (-a22 * a01 + a02 * a21) * det;\n        out[2] = (a12 * a01 - a02 * a11) * det;\n        out[3] = b11 * det;\n        out[4] = (a22 * a00 - a02 * a20) * det;\n        out[5] = (-a12 * a00 + a02 * a10) * det;\n        out[6] = b21 * det;\n        out[7] = (-a21 * a00 + a01 * a20) * det;\n        out[8] = (a11 * a00 - a01 * a10) * det;\n        return out;\n    }\n    Mat3.invert = invert;\n    function symmtricFromUpper(out, a) {\n        if (out === a) {\n            out[3] = a[1];\n            out[6] = a[2];\n            out[7] = a[5];\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[1];\n            out[2] = a[2];\n            out[3] = a[1];\n            out[4] = a[4];\n            out[5] = a[5];\n            out[6] = a[2];\n            out[7] = a[5];\n            out[8] = a[8];\n        }\n        return out;\n    }\n    Mat3.symmtricFromUpper = symmtricFromUpper;\n    function symmtricFromLower(out, a) {\n        if (out === a) {\n            out[1] = a[3];\n            out[2] = a[6];\n            out[5] = a[7];\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[3];\n            out[2] = a[6];\n            out[3] = a[3];\n            out[4] = a[4];\n            out[5] = a[7];\n            out[6] = a[6];\n            out[7] = a[7];\n            out[8] = a[8];\n        }\n        return out;\n    }\n    Mat3.symmtricFromLower = symmtricFromLower;\n    function determinant(a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2];\n        const a10 = a[3], a11 = a[4], a12 = a[5];\n        const a20 = a[6], a21 = a[7], a22 = a[8];\n        const b01 = a22 * a11 - a12 * a21;\n        const b11 = -a22 * a10 + a12 * a20;\n        const b21 = a21 * a10 - a11 * a20;\n        // Calculate the determinant\n        return a00 * b01 + a01 * b11 + a02 * b21;\n    }\n    Mat3.determinant = determinant;\n    function trace(a) {\n        return a[0] + a[4] + a[8];\n    }\n    Mat3.trace = trace;\n    function sub(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        out[3] = a[3] - b[3];\n        out[4] = a[4] - b[4];\n        out[5] = a[5] - b[5];\n        out[6] = a[6] - b[6];\n        out[7] = a[7] - b[7];\n        out[8] = a[8] - b[8];\n        return out;\n    }\n    Mat3.sub = sub;\n    function add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        out[4] = a[4] + b[4];\n        out[5] = a[5] + b[5];\n        out[6] = a[6] + b[6];\n        out[7] = a[7] + b[7];\n        out[8] = a[8] + b[8];\n        return out;\n    }\n    Mat3.add = add;\n    function mul(out, a, b) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a10 = a[3], a11 = a[4], a12 = a[5], a20 = a[6], a21 = a[7], a22 = a[8];\n        const b00 = b[0], b01 = b[1], b02 = b[2], b10 = b[3], b11 = b[4], b12 = b[5], b20 = b[6], b21 = b[7], b22 = b[8];\n        out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n        out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n        out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n        out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n        out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n        out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n        out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n        out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n        out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n        return out;\n    }\n    Mat3.mul = mul;\n    function subScalar(out, a, s) {\n        out[0] = a[0] - s;\n        out[1] = a[1] - s;\n        out[2] = a[2] - s;\n        out[3] = a[3] - s;\n        out[4] = a[4] - s;\n        out[5] = a[5] - s;\n        out[6] = a[6] - s;\n        out[7] = a[7] - s;\n        out[8] = a[8] - s;\n        return out;\n    }\n    Mat3.subScalar = subScalar;\n    function addScalar(out, a, s) {\n        out[0] = a[0] + s;\n        out[1] = a[1] + s;\n        out[2] = a[2] + s;\n        out[3] = a[3] + s;\n        out[4] = a[4] + s;\n        out[5] = a[5] + s;\n        out[6] = a[6] + s;\n        out[7] = a[7] + s;\n        out[8] = a[8] + s;\n        return out;\n    }\n    Mat3.addScalar = addScalar;\n    function mulScalar(out, a, s) {\n        out[0] = a[0] * s;\n        out[1] = a[1] * s;\n        out[2] = a[2] * s;\n        out[3] = a[3] * s;\n        out[4] = a[4] * s;\n        out[5] = a[5] * s;\n        out[6] = a[6] * s;\n        out[7] = a[7] * s;\n        out[8] = a[8] * s;\n        return out;\n    }\n    Mat3.mulScalar = mulScalar;\n    const piThird = Math.PI / 3;\n    const tmpB = zero();\n    /**\n     * Given a real symmetric 3x3 matrix A, compute the eigenvalues\n     *\n     * From https://en.wikipedia.org/wiki/Eigenvalue_algorithm#3.C3.973_matrices\n     */\n    function symmetricEigenvalues(out, a) {\n        const p1 = a[1] * a[1] + a[2] * a[2] + a[5] * a[5];\n        if (p1 === 0) {\n            out[0] = a[0];\n            out[1] = a[4];\n            out[2] = a[8];\n        }\n        else {\n            const q = trace(a) / 3;\n            const a1 = a[0] - q;\n            const a2 = a[4] - q;\n            const a3 = a[8] - q;\n            const p2 = a1 * a1 + a2 * a2 + a3 * a3 + 2 * p1;\n            const p = Math.sqrt(p2 / 6);\n            mulScalar(tmpB, Mat3.Identity, q);\n            sub(tmpB, a, tmpB);\n            mulScalar(tmpB, tmpB, (1 / p));\n            const r = determinant(tmpB) / 2;\n            // In exact arithmetic for a symmetric matrix  -1 <= r <= 1\n            // but computation error can leave it slightly outside this range.\n            const phi = r <= -1 ? piThird : r >= 1 ?\n                0 : Math.acos(r) / 3;\n            // the eigenvalues satisfy eig3 <= eig2 <= eig1\n            out[0] = q + 2 * p * Math.cos(phi);\n            out[2] = q + 2 * p * Math.cos(phi + (2 * piThird));\n            out[1] = 3 * q - out[0] - out[2]; // since trace(A) = eig1 + eig2 + eig3\n        }\n        return out;\n    }\n    Mat3.symmetricEigenvalues = symmetricEigenvalues;\n    const tmpR0 = [0.1, 0.0, 0.0];\n    const tmpR1 = [0.1, 0.0, 0.0];\n    const tmpR2 = [0.1, 0.0, 0.0];\n    const tmpR0xR1 = [0.1, 0.0, 0.0];\n    const tmpR0xR2 = [0.1, 0.0, 0.0];\n    const tmpR1xR2 = [0.1, 0.0, 0.0];\n    /**\n     * Calculates the eigenvector for the given eigenvalue `e` of matrix `a`\n     */\n    function eigenvector(out, a, e) {\n        Vec3.set(tmpR0, a[0] - e, a[1], a[2]);\n        Vec3.set(tmpR1, a[1], a[4] - e, a[5]);\n        Vec3.set(tmpR2, a[2], a[5], a[8] - e);\n        Vec3.cross(tmpR0xR1, tmpR0, tmpR1);\n        Vec3.cross(tmpR0xR2, tmpR0, tmpR2);\n        Vec3.cross(tmpR1xR2, tmpR1, tmpR2);\n        const d0 = Vec3.dot(tmpR0xR1, tmpR0xR1);\n        const d1 = Vec3.dot(tmpR0xR2, tmpR0xR2);\n        const d2 = Vec3.dot(tmpR1xR2, tmpR1xR2);\n        let dmax = d0;\n        let imax = 0;\n        if (d1 > dmax) {\n            dmax = d1;\n            imax = 1;\n        }\n        if (d2 > dmax)\n            imax = 2;\n        if (imax === 0) {\n            Vec3.scale(out, tmpR0xR1, 1 / Math.sqrt(d0));\n        }\n        else if (imax === 1) {\n            Vec3.scale(out, tmpR0xR2, 1 / Math.sqrt(d1));\n        }\n        else {\n            Vec3.scale(out, tmpR1xR2, 1 / Math.sqrt(d2));\n        }\n        return out;\n    }\n    Mat3.eigenvector = eigenvector;\n    /**\n     * Get matrix to transform directions, e.g. normals\n     */\n    function directionTransform(out, t) {\n        fromMat4(out, t);\n        invert(out, out);\n        transpose(out, out);\n        return out;\n    }\n    Mat3.directionTransform = directionTransform;\n    Mat3.Identity = identity();\n    /** Return the Frobenius inner product of two matrices (= dot product of the flattened matrices).\n     * Can be used as a measure of similarity between two rotation matrices. */\n    function innerProduct(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]\n            + a[3] * b[3] + a[4] * b[4] + a[5] * b[5]\n            + a[6] * b[6] + a[7] * b[7] + a[8] * b[8];\n    }\n    Mat3.innerProduct = innerProduct;\n    /**\n     * Computes the adjugate (classical adjoint) of the upper-left 33 portion of a 44 matrix. */\n    function adjointFromMat4(out, m) {\n        const ax = m[0];\n        const ay = m[1];\n        const az = m[2];\n        const bx = m[4];\n        const by = m[5];\n        const bz = m[6];\n        const cx = m[8];\n        const cy = m[9];\n        const cz = m[10];\n        out[0] = by * cz - bz * cy;\n        out[1] = bz * cx - bx * cz;\n        out[2] = bx * cy - by * cx;\n        out[3] = cy * az - cz * ay;\n        out[4] = cz * ax - cx * az;\n        out[5] = cx * ay - cy * ax;\n        out[6] = ay * bz - az * by;\n        out[7] = az * bx - ax * bz;\n        out[8] = ax * by - ay * bx;\n        return out;\n    }\n    Mat3.adjointFromMat4 = adjointFromMat4;\n})(Mat3 || (Mat3 = {}));\nexport { Mat3 };\n","/**\n * Copyright (c) 2018-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n// make use of https://github.com/tc39/proposal-set-methods once available\nexport var SetUtils;\n(function (SetUtils) {\n    function toArray(set) {\n        return Array.from(set.values());\n    }\n    SetUtils.toArray = toArray;\n    /** Test if set a contains all elements of set b. */\n    function isSuperset(setA, setB) {\n        if (setA === setB)\n            return true;\n        if (setA.size < setB.size)\n            return false;\n        for (const elem of setB) {\n            if (!setA.has(elem))\n                return false;\n        }\n        return true;\n    }\n    SetUtils.isSuperset = isSuperset;\n    /** Add all elements from `sets` to `out` */\n    function add(out, ...sets) {\n        for (let i = 0; i < sets.length; i++) {\n            for (const elem of sets[i])\n                out.add(elem);\n        }\n        return out;\n    }\n    SetUtils.add = add;\n    /** Create set containing elements of both set a and set b. */\n    function union(setA, setB) {\n        const union = new Set(setA);\n        if (setA === setB)\n            return union;\n        for (const elem of setB)\n            union.add(elem);\n        return union;\n    }\n    SetUtils.union = union;\n    function unionMany(...sets) {\n        if (sets.length === 0)\n            return new Set();\n        const union = new Set(sets[0]);\n        for (let i = 1, il = sets.length; i < il; i++) {\n            for (const elem of sets[i])\n                union.add(elem);\n        }\n        return union;\n    }\n    SetUtils.unionMany = unionMany;\n    function unionManyArrays(arrays) {\n        if (arrays.length === 0)\n            return new Set();\n        const union = new Set(arrays[0]);\n        for (let i = 1; i < arrays.length; i++) {\n            for (const elem of arrays[i])\n                union.add(elem);\n        }\n        return union;\n    }\n    SetUtils.unionManyArrays = unionManyArrays;\n    /** Create set containing elements of set a that are also in set b. */\n    function intersection(setA, setB) {\n        if (setA === setB)\n            return new Set(setA);\n        const intersection = new Set();\n        for (const elem of setB) {\n            if (setA.has(elem))\n                intersection.add(elem);\n        }\n        return intersection;\n    }\n    SetUtils.intersection = intersection;\n    function areIntersecting(setA, setB) {\n        if (setA === setB)\n            return setA.size > 0;\n        if (setA.size < setB.size)\n            [setA, setB] = [setB, setA];\n        for (const elem of setB) {\n            if (setA.has(elem))\n                return true;\n        }\n        return false;\n    }\n    SetUtils.areIntersecting = areIntersecting;\n    function intersectionSize(setA, setB) {\n        if (setA === setB)\n            return setA.size;\n        if (setA.size < setB.size)\n            [setA, setB] = [setB, setA];\n        let count = 0;\n        for (const elem of setB) {\n            if (setA.has(elem))\n                count += 1;\n        }\n        return count;\n    }\n    SetUtils.intersectionSize = intersectionSize;\n    /** Create set containing elements of set a that are not in set b. */\n    function difference(setA, setB) {\n        if (setA === setB)\n            return new Set();\n        const difference = new Set(setA);\n        for (const elem of setB)\n            difference.delete(elem);\n        return difference;\n    }\n    SetUtils.difference = difference;\n    /** Number of elements that are in set a but not in set b. */\n    function differenceSize(setA, setB) {\n        if (setA === setB)\n            return 0;\n        let count = setA.size;\n        for (const elem of setA) {\n            if (setB.has(elem))\n                count -= 1;\n        }\n        return count;\n    }\n    SetUtils.differenceSize = differenceSize;\n    /** Test if set a and b contain the same elements. */\n    function areEqual(setA, setB) {\n        if (setA === setB)\n            return true;\n        if (setA.size !== setB.size)\n            return false;\n        for (const elem of setB) {\n            if (!setA.has(elem))\n                return false;\n        }\n        return true;\n    }\n    SetUtils.areEqual = areEqual;\n})(SetUtils || (SetUtils = {}));\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { SyncRuntimeContext } from './synchronous.js';\nvar RuntimeContext;\n(function (RuntimeContext) {\n    RuntimeContext.Synchronous = SyncRuntimeContext;\n})(RuntimeContext || (RuntimeContext = {}));\nexport { RuntimeContext };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar Progress;\n(function (Progress) {\n    function _format(root, prefix = '') {\n        const p = root.progress;\n        if (!root.children.length) {\n            if (p.isIndeterminate)\n                return `${prefix}${p.taskName}: ${p.message}`;\n            return `${prefix}${p.taskName}: [${p.current}/${p.max}] ${p.message}`;\n        }\n        const newPrefix = prefix + '  |_ ';\n        const subTree = root.children.map(c => _format(c, newPrefix));\n        if (p.isIndeterminate)\n            return `${prefix}${p.taskName}: ${p.message}\\n${subTree.join('\\n')}`;\n        return `${prefix}${p.taskName}: [${p.current}/${p.max}] ${p.message}\\n${subTree.join('\\n')}`;\n    }\n    function format(p) { return _format(p.root); }\n    Progress.format = format;\n})(Progress || (Progress = {}));\nexport { Progress };\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { now } from '../../mol-util/now.js';\nasync function chunkedSubtask(ctx, initialChunk, state, f, update) {\n    let chunkSize = Math.max(initialChunk, 0);\n    let globalProcessed = 0, globalTime = 0;\n    if (ctx.isSynchronous) {\n        f(Number.MAX_SAFE_INTEGER, state);\n        return state;\n    }\n    let start = now();\n    let lastSize = 0, currentTime = 0;\n    while ((lastSize = f(chunkSize, state)) > 0) {\n        globalProcessed += lastSize;\n        const delta = now() - start;\n        currentTime += delta;\n        globalTime += delta;\n        if (ctx.shouldUpdate) {\n            await update(ctx, state, globalProcessed);\n            chunkSize = Math.round(currentTime * globalProcessed / globalTime) + 1;\n            start = now();\n            currentTime = 0;\n        }\n    }\n    if (ctx.shouldUpdate) {\n        await update(ctx, state, globalProcessed);\n    }\n    return state;\n}\nexport { chunkedSubtask };\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Luk Polk <admin@lukaspolak.cz>\n * @author Gianluca Tomasello <giagitom@gmail.com>\n */\nimport { Color } from './color.js';\nimport { getColorListFromName } from './lists.js';\nimport { defaults } from '../../mol-util/index.js';\nimport { ScaleLegend } from '../legend.js';\nimport { SortedArray } from '../../mol-data/int.js';\nimport { clamp } from '../../mol-math/interpolate.js';\nexport const DefaultColorScaleProps = {\n    domain: [0, 1],\n    reverse: false,\n    listOrName: 'red-yellow-blue',\n    minLabel: '',\n    maxLabel: '',\n};\nexport var ColorScale;\n(function (ColorScale) {\n    function create(props) {\n        return createColorScaleByType(props, 'continuous');\n    }\n    ColorScale.create = create;\n    function createDiscrete(props) {\n        return createColorScaleByType(props, 'discrete');\n    }\n    ColorScale.createDiscrete = createDiscrete;\n    function createColorScaleByType(props, type) {\n        const { domain, reverse, listOrName } = { ...DefaultColorScaleProps, ...props };\n        const list = typeof listOrName === 'string' ? getColorListFromName(listOrName).list : listOrName;\n        const colors = reverse ? list.slice().reverse() : list;\n        let diff = 0, min = 0, max = 0;\n        function setDomain(_min, _max) {\n            min = _min;\n            max = _max;\n            diff = (max - min) || 1;\n        }\n        setDomain(domain[0], domain[1]);\n        const minLabel = defaults(props.minLabel, min.toString());\n        const maxLabel = defaults(props.maxLabel, max.toString());\n        let color;\n        const hasOffsets = colors.every(c => Array.isArray(c));\n        if (hasOffsets) {\n            const sorted = [...colors];\n            sorted.sort((a, b) => a[1] - b[1]);\n            const src = sorted.map(c => c[0]);\n            const off = SortedArray.ofSortedArray(sorted.map(c => c[1]));\n            const maxId = src.length - 1;\n            switch (type) {\n                case 'continuous':\n                    color = (value) => valueToColorWithOffsets(value, src, off, min, maxId, diff);\n                    break;\n                case 'discrete':\n                    color = (value) => valueToDiscreteColorWithOffsets(value, src, off, min, maxId, diff);\n                    break;\n            }\n        }\n        else {\n            switch (type) {\n                case 'continuous':\n                    color = (value) => valueToColor(value, colors, min, diff);\n                    break;\n                case 'discrete':\n                    color = (value) => valueToDiscreteColor(value, colors, min, max, diff);\n                    break;\n            }\n        }\n        return {\n            color,\n            colorToArray: (value, array, offset) => {\n                Color.toArray(color(value), array, offset);\n            },\n            normalizedColorToArray: (value, array, offset) => {\n                Color.toArrayNormalized(color(value), array, offset);\n            },\n            setDomain,\n            get legend() { return ScaleLegend(minLabel, maxLabel, colors); }\n        };\n    }\n    function valueToColorWithOffsets(value, src, off, min, maxId, diff) {\n        const t = clamp((value - min) / diff, 0, 1);\n        const i = SortedArray.findPredecessorIndex(off, t);\n        if (i === 0) {\n            return src[0];\n        }\n        else if (i > maxId) {\n            return src[maxId];\n        }\n        const o1 = off[i - 1], o2 = off[i];\n        const t1 = clamp((t - o1) / (o2 - o1), 0, 1); // TODO: cache the deltas?\n        return Color.interpolate(src[i - 1], src[i], t1);\n    }\n    function valueToColor(value, colors, min, diff) {\n        const t = Math.min(colors.length - 1, Math.max(0, ((value - min) / diff) * (colors.length - 1)));\n        const tf = Math.floor(t);\n        const c1 = colors[tf];\n        const c2 = colors[Math.ceil(t)];\n        return Color.interpolate(c1, c2, t - tf);\n    }\n    function valueToDiscreteColorWithOffsets(value, src, off, min, maxId, diff) {\n        if (src.length === 0) {\n            return Color.fromRgb(0, 0, 0);\n        }\n        const t = clamp((value - min) / diff, 0, 1);\n        const i = SortedArray.findPredecessorIndex(off, t);\n        if (i === 0) {\n            return src[0];\n        }\n        else if (i > maxId) {\n            return src[maxId];\n        }\n        return src[i];\n    }\n    function valueToDiscreteColor(value, colors, min, max, diff) {\n        if (colors.length === 0) {\n            return Color.fromRgb(0, 0, 0);\n        }\n        const intervalSize = diff / colors.length;\n        if (value <= min) {\n            return colors[0];\n        }\n        else if (value >= max) {\n            return colors[colors.length - 1];\n        }\n        const i = Math.min(colors.length - 1, Math.floor((value - min) / intervalSize));\n        return colors[i];\n    }\n})(ColorScale || (ColorScale = {}));\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { Model } from '../../mol-model/structure/model/model.js';\nimport { Task } from '../../mol-task/index.js';\nimport { CIF } from '../../mol-io/reader/cif.js';\nimport { createModels } from './basic/parser.js';\nimport { ModelSymmetry } from './property/symmetry.js';\nimport { ModelSecondaryStructure } from './property/secondary-structure.js';\nimport { Column, Table } from '../../mol-data/db.js';\nimport { AtomSiteAnisotrop } from './property/anisotropic.js';\nimport { ComponentBond } from './property/bonds/chem_comp.js';\nimport { StructConn } from './property/bonds/struct_conn.js';\nimport { ArrayTrajectory } from '../../mol-model/structure.js';\nimport { GlobalModelTransformInfo } from '../../mol-model/structure/model/properties/global-transform.js';\nimport { BasicSchema, createBasic } from './basic/schema.js';\nimport { EntityBuilder } from './common/entity.js';\nimport { BondType, MoleculeType } from '../../mol-model/structure/model/types.js';\nimport { ComponentBuilder } from './common/component.js';\nimport { sortedCantorPairing } from '../../mol-data/util.js';\nimport { IndexPairBonds } from './property/bonds/index-pair.js';\nimport { toDatabase } from '../../mol-io/reader/cif/schema.js';\nimport { MolstarBondSiteSchema } from '../../mol-model/structure/export/categories/molstar_bond_site.js';\nfunction modelSymmetryFromMmcif(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    return ModelSymmetry.fromData(model.sourceData.data.db);\n}\nModelSymmetry.Provider.formatRegistry.add('mmCIF', modelSymmetryFromMmcif);\nfunction secondaryStructureFromMmcif(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    const { struct_conf, struct_sheet_range } = model.sourceData.data.db;\n    return ModelSecondaryStructure.fromStruct(struct_conf, struct_sheet_range, model.atomicHierarchy);\n}\nModelSecondaryStructure.Provider.formatRegistry.add('mmCIF', secondaryStructureFromMmcif);\nfunction atomSiteAnisotropFromMmcif(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    const { atom_site_anisotrop } = model.sourceData.data.db;\n    const data = Table.ofColumns(AtomSiteAnisotrop.Schema, atom_site_anisotrop);\n    const elementToAnsiotrop = AtomSiteAnisotrop.getElementToAnsiotrop(model.atomicConformation.atomId, atom_site_anisotrop.id);\n    return { data, elementToAnsiotrop };\n}\nfunction atomSiteAnisotropApplicableMmcif(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return false;\n    return model.sourceData.data.db.atom_site_anisotrop.U.isDefined;\n}\nAtomSiteAnisotrop.Provider.formatRegistry.add('mmCIF', atomSiteAnisotropFromMmcif, atomSiteAnisotropApplicableMmcif);\nfunction componentBondFromMmcif(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    const { chem_comp_bond } = model.sourceData.data.db;\n    if (chem_comp_bond._rowCount === 0)\n        return;\n    return {\n        data: chem_comp_bond,\n        entries: ComponentBond.getEntriesFromChemCompBond(chem_comp_bond)\n    };\n}\nComponentBond.Provider.formatRegistry.add('mmCIF', componentBondFromMmcif);\nfunction structConnFromMmcif(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    const { struct_conn } = model.sourceData.data.db;\n    if (struct_conn._rowCount === 0)\n        return;\n    const entries = StructConn.getEntriesFromStructConn(struct_conn, model);\n    const residueCantorPairs = new Set();\n    for (const e of entries) {\n        if (e.partnerA.residueIndex !== e.partnerB.residueIndex) {\n            residueCantorPairs.add(sortedCantorPairing(e.partnerA.residueIndex, e.partnerB.residueIndex));\n        }\n    }\n    return {\n        data: struct_conn,\n        byAtomIndex: StructConn.getAtomIndexFromEntries(entries),\n        residueCantorPairs,\n        entries,\n    };\n}\nStructConn.Provider.formatRegistry.add('mmCIF', structConnFromMmcif);\nfunction indexPairBondsFromMolstarBondSite(model) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    const { molstar_bond_site: entries } = toDatabase(MolstarBondSiteSchema, model.sourceData.data.frame);\n    if (entries._rowCount === 0)\n        return;\n    const idToIndex = new Map();\n    const { atomId } = model.atomicConformation;\n    for (let i = 0; i < atomId.rowCount; i++) {\n        idToIndex.set(atomId.value(i), i);\n    }\n    const indexA = [];\n    const indexB = [];\n    const orders = [];\n    const flags = [];\n    const { atom_id_1, atom_id_2, value_order, type_id } = entries;\n    for (let i = 0; i < entries._rowCount; i++) {\n        indexA.push(idToIndex.get(atom_id_1.value(i)));\n        indexB.push(idToIndex.get(atom_id_2.value(i)));\n        let flag = BondType.Flag.None;\n        let order = 1;\n        switch (value_order.value(i)) {\n            case 'sing':\n                order = 1;\n                break;\n            case 'doub':\n                order = 2;\n                break;\n            case 'trip':\n                order = 3;\n                break;\n            case 'quad':\n                order = 4;\n                break;\n            case 'arom':\n                order = 1;\n                flag = BondType.Flag.Aromatic;\n                break;\n            default: break;\n        }\n        switch (type_id.value(i)) {\n            case 'covale':\n                flag |= BondType.Flag.Covalent;\n                break;\n            case 'disulf':\n                flag |= BondType.Flag.Covalent | BondType.Flag.Disulfide;\n                break;\n            case 'hydrog':\n                flag |= BondType.Flag.HydrogenBond;\n                break;\n            case 'metalc':\n                flag |= BondType.Flag.MetallicCoordination;\n                break;\n        }\n        orders.push(order);\n        flags.push(flag);\n    }\n    const pairBonds = IndexPairBonds.fromData({\n        pairs: {\n            indexA: Column.ofIntArray(indexA),\n            indexB: Column.ofIntArray(indexB),\n            order: Column.ofIntArray(orders),\n            flag: Column.ofArray({ array: flags, schema: Column.Schema.int }),\n        },\n        count: model.atomicHierarchy.atoms._rowCount,\n    }, { maxDistance: Infinity });\n    return pairBonds;\n}\nIndexPairBonds.Provider.formatRegistry.add('mmCIF', indexPairBondsFromMolstarBondSite);\nGlobalModelTransformInfo.Provider.formatRegistry.add('mmCIF', GlobalModelTransformInfo.fromMmCif, GlobalModelTransformInfo.hasData);\n//\nexport { MmcifFormat };\nvar MmcifFormat;\n(function (MmcifFormat) {\n    function is(x) {\n        return (x === null || x === void 0 ? void 0 : x.kind) === 'mmCIF';\n    }\n    MmcifFormat.is = is;\n    function fromFrame(frame, db, source, file) {\n        if (!db)\n            db = CIF.schema.mmCIF(frame);\n        return { kind: 'mmCIF', name: db._name, data: { db, file, frame, source } };\n    }\n    MmcifFormat.fromFrame = fromFrame;\n})(MmcifFormat || (MmcifFormat = {}));\nexport function trajectoryFromMmCIF(frame, file) {\n    const format = MmcifFormat.fromFrame(frame, undefined, undefined, file);\n    const basic = createBasic(format.data.db, true);\n    return Task.create('Create mmCIF Model', ctx => createModels(basic, format, ctx));\n}\nexport { CCDFormat };\nvar CCDFormat;\n(function (CCDFormat) {\n    const CoordinateTypeProp = '__CcdCoordinateType__';\n    CCDFormat.CoordinateType = {\n        get(model) {\n            return model._staticPropertyData[CoordinateTypeProp];\n        },\n        set(model, type) {\n            return model._staticPropertyData[CoordinateTypeProp] = type;\n        }\n    };\n    function is(x) {\n        return (x === null || x === void 0 ? void 0 : x.kind) === 'CCD';\n    }\n    CCDFormat.is = is;\n    function fromFrame(frame, db) {\n        if (!db)\n            db = CIF.schema.CCD(frame);\n        return { kind: 'CCD', name: db._name, data: { db, frame } };\n    }\n    CCDFormat.fromFrame = fromFrame;\n})(CCDFormat || (CCDFormat = {}));\nexport function trajectoryFromCCD(frame) {\n    const format = CCDFormat.fromFrame(frame);\n    return Task.create('Create CCD Models', ctx => createCcdModels(format.data.db, CCDFormat.fromFrame(frame), ctx));\n}\nasync function createCcdModels(data, format, ctx) {\n    const ideal = await createCcdModel(data, format, { coordinateType: 'ideal', cartn_x: 'pdbx_model_Cartn_x_ideal', cartn_y: 'pdbx_model_Cartn_y_ideal', cartn_z: 'pdbx_model_Cartn_z_ideal' }, ctx);\n    const model = await createCcdModel(data, format, { coordinateType: 'model', cartn_x: 'model_Cartn_x', cartn_y: 'model_Cartn_y', cartn_z: 'model_Cartn_z' }, ctx);\n    const models = [];\n    if (ideal)\n        models.push(ideal);\n    if (model)\n        models.push(model);\n    for (let i = 0, il = models.length; i < il; ++i) {\n        Model.TrajectoryInfo.set(models[i], { index: i, size: models.length });\n    }\n    return new ArrayTrajectory(models);\n}\nasync function createCcdModel(data, format, props, ctx) {\n    const { chem_comp, chem_comp_atom, chem_comp_bond } = data;\n    const { coordinateType, cartn_x, cartn_y, cartn_z } = props;\n    const name = chem_comp.name.value(0);\n    const id = chem_comp.id.value(0);\n    const { atom_id, charge, comp_id, pdbx_ordinal, type_symbol } = chem_comp_atom;\n    const atomCount = chem_comp_atom._rowCount;\n    const filteredRows = [];\n    for (let i = 0; i < atomCount; i++) {\n        if (chem_comp_atom[cartn_x].valueKind(i) > 0)\n            continue;\n        filteredRows[filteredRows.length] = i;\n    }\n    const filteredRowCount = filteredRows.length;\n    const A = Column.ofConst('A', filteredRowCount, Column.Schema.str);\n    const seq_id = Column.ofConst(1, filteredRowCount, Column.Schema.int);\n    const entity_id = Column.ofConst('1', filteredRowCount, Column.Schema.str);\n    const occupancy = Column.ofConst(1, filteredRowCount, Column.Schema.float);\n    const model_num = Column.ofConst(1, filteredRowCount, Column.Schema.int);\n    const filteredAtomId = Column.view(atom_id, filteredRows);\n    const filteredCompId = Column.view(comp_id, filteredRows);\n    const filteredX = Column.view(chem_comp_atom[cartn_x], filteredRows);\n    const filteredY = Column.view(chem_comp_atom[cartn_y], filteredRows);\n    const filteredZ = Column.view(chem_comp_atom[cartn_z], filteredRows);\n    const filteredId = Column.view(pdbx_ordinal, filteredRows);\n    const filteredTypeSymbol = Column.view(type_symbol, filteredRows);\n    const filteredCharge = Column.view(charge, filteredRows);\n    const model_atom_site = Table.ofPartialColumns(BasicSchema.atom_site, {\n        auth_asym_id: A,\n        auth_atom_id: filteredAtomId,\n        auth_comp_id: filteredCompId,\n        auth_seq_id: seq_id,\n        Cartn_x: filteredX,\n        Cartn_y: filteredY,\n        Cartn_z: filteredZ,\n        id: filteredId,\n        label_asym_id: A,\n        label_atom_id: filteredAtomId,\n        label_comp_id: filteredCompId,\n        label_seq_id: seq_id,\n        label_entity_id: entity_id,\n        occupancy,\n        type_symbol: filteredTypeSymbol,\n        pdbx_PDB_model_num: model_num,\n        pdbx_formal_charge: filteredCharge\n    }, filteredRowCount);\n    const entityBuilder = new EntityBuilder();\n    entityBuilder.setNames([[id, `${name} (${coordinateType})`]]);\n    entityBuilder.getEntityId(id, MoleculeType.Unknown, 'A');\n    const componentBuilder = new ComponentBuilder(seq_id, type_symbol);\n    componentBuilder.setNames([[id, `${name} (${coordinateType})`]]);\n    componentBuilder.add(id, 0);\n    const basicModel = createBasic({\n        entity: entityBuilder.getEntityTable(),\n        chem_comp: componentBuilder.getChemCompTable(),\n        atom_site: model_atom_site\n    });\n    const models = await createModels(basicModel, format, ctx);\n    // all ideal or model coordinates might be absent\n    if (!models.representative)\n        return;\n    const first = models.representative;\n    const entries = ComponentBond.getEntriesFromChemCompBond(chem_comp_bond);\n    ComponentBond.Provider.set(first, { data: chem_comp_bond, entries });\n    CCDFormat.CoordinateType.set(first, coordinateType);\n    return models.representative;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport function getArrayBounds(rowCount, params) {\n    const start = params && typeof params.start !== 'undefined' ? Math.max(Math.min(params.start, rowCount - 1), 0) : 0;\n    const end = params && typeof params.end !== 'undefined' ? Math.min(params.end, rowCount) : rowCount;\n    return { start, end };\n}\nexport function createArray(rowCount, params) {\n    const c = params && typeof params.array !== 'undefined' ? params.array : Array;\n    const { start, end } = getArrayBounds(rowCount, params);\n    return { array: new c(end - start), start, end };\n}\nexport function fillArrayValues(value, target, start) {\n    for (let i = 0, _e = target.length; i < _e; i++)\n        target[i] = value(start + i);\n    return target;\n}\nexport function createAndFillArray(rowCount, value, params) {\n    const { array, start } = createArray(rowCount, params);\n    return fillArrayValues(value, array, start);\n}\nexport function isTypedArray(data) {\n    return !!data.buffer && typeof data.byteLength === 'number' && typeof data.BYTES_PER_ELEMENT === 'number';\n}\nexport function typedArrayWindow(data, params) {\n    const { constructor, buffer, length, byteOffset, BYTES_PER_ELEMENT } = data;\n    const { start, end } = getArrayBounds(length, params);\n    if (start === 0 && end === length)\n        return data;\n    return new constructor(buffer, byteOffset + BYTES_PER_ELEMENT * start, Math.min(length, end - start));\n}\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport * as ColumnHelpers from './column-helpers.js';\nimport { Tensor as Tensors } from '../../mol-math/linear-algebra.js';\nimport { parseInt as fastParseInt, parseFloat as fastParseFloat } from '../../mol-io/reader/common/text/number-parser.js';\nvar Column;\n(function (Column) {\n    let Schema;\n    (function (Schema) {\n        // T also serves as a default value for undefined columns\n        Schema.str = { '@type': 'str', T: '', valueType: 'str' };\n        Schema.ustr = { '@type': 'str', T: '', valueType: 'str', transform: 'uppercase' };\n        Schema.lstr = { '@type': 'str', T: '', valueType: 'str', transform: 'lowercase' };\n        Schema.int = { '@type': 'int', T: 0, valueType: 'int' };\n        Schema.coord = { '@type': 'coord', T: 0, valueType: 'float' };\n        Schema.float = { '@type': 'float', T: 0, valueType: 'float' };\n        function Str(options) { var _a; return { '@type': 'str', T: (_a = options === null || options === void 0 ? void 0 : options.defaultValue) !== null && _a !== void 0 ? _a : '', transform: options === null || options === void 0 ? void 0 : options.transform, valueType: 'str' }; }\n        Schema.Str = Str;\n        ;\n        function Int(defaultValue = 0) { return { '@type': 'int', T: defaultValue, valueType: 'int' }; }\n        Schema.Int = Int;\n        ;\n        function Float(defaultValue = 0) { return { '@type': 'float', T: defaultValue, valueType: 'float' }; }\n        Schema.Float = Float;\n        ;\n        function Tensor(space, baseType = Schema.float) { return { '@type': 'tensor', T: space.create(), space, valueType: 'tensor', baseType }; }\n        Schema.Tensor = Tensor;\n        function Vector(dim, baseType = Schema.float) { return Tensor(Tensors.Vector(dim, baseType['@type'] === 'int' ? Int32Array : Float64Array), baseType); }\n        Schema.Vector = Vector;\n        function Matrix(rows, cols, baseType = Schema.float) { return Tensor(Tensors.ColumnMajorMatrix(rows, cols, baseType['@type'] === 'int' ? Int32Array : Float64Array), baseType); }\n        Schema.Matrix = Matrix;\n        function Aliased(t) {\n            return t;\n        }\n        Schema.Aliased = Aliased;\n        function List(separator, itemParse, defaultValue = []) {\n            return { '@type': 'list', T: defaultValue, separator, itemParse, valueType: 'list' };\n        }\n        Schema.List = List;\n    })(Schema = Column.Schema || (Column.Schema = {}));\n    function is(v) {\n        return !!v && !!v.schema && !!v.value;\n    }\n    Column.is = is;\n    // Value kinds are accessed very of often\n    // Using a const enum is an internal optimization and is defined separately to better support\n    // compiling with isolatedModules flag in 3rd party use-cases of Mol*.\n    let ValueKinds;\n    (function (ValueKinds) {\n        /** Defined value (= 0) */\n        ValueKinds[ValueKinds[\"Present\"] = 0] = \"Present\";\n        /** Expressed in CIF as `.` (= 1) */\n        ValueKinds[ValueKinds[\"NotPresent\"] = 1] = \"NotPresent\";\n        /** Expressed in CIF as `?` (= 2) */\n        ValueKinds[ValueKinds[\"Unknown\"] = 2] = \"Unknown\";\n    })(ValueKinds = Column.ValueKinds || (Column.ValueKinds = {}));\n    Column.ValueKind = {\n        /** Defined value (= 0) */\n        Present: ValueKinds.Present,\n        /** Expressed in CIF as `.` (= 1) */\n        NotPresent: ValueKinds.NotPresent,\n        /** Expressed in CIF as `?` (= 2) */\n        Unknown: ValueKinds.Unknown\n    };\n    function Undefined(rowCount, schema) {\n        return constColumn(schema['T'], rowCount, schema, ValueKinds.NotPresent);\n    }\n    Column.Undefined = Undefined;\n    function ofConst(v, rowCount, type) {\n        return constColumn(v, rowCount, type, ValueKinds.Present);\n    }\n    Column.ofConst = ofConst;\n    function ofLambda(spec) {\n        return lambdaColumn(spec);\n    }\n    Column.ofLambda = ofLambda;\n    /** values [min, max] (i.e. include both values) */\n    function range(min, max) {\n        return ofLambda({\n            value: i => i + min,\n            rowCount: Math.max(max - min + 1, 0),\n            schema: Schema.int\n        });\n    }\n    Column.range = range;\n    function ofArray(spec) {\n        return arrayColumn(spec);\n    }\n    Column.ofArray = ofArray;\n    function ofIntArray(array) {\n        return arrayColumn({ array, schema: Schema.int });\n    }\n    Column.ofIntArray = ofIntArray;\n    function ofFloatArray(array) {\n        return arrayColumn({ array, schema: Schema.float });\n    }\n    Column.ofFloatArray = ofFloatArray;\n    function ofStringArray(array) {\n        return arrayColumn({ array, schema: Schema.str });\n    }\n    Column.ofStringArray = ofStringArray;\n    function ofStringAliasArray(array) {\n        return arrayColumn({ array, schema: Schema.Aliased(Schema.str) });\n    }\n    Column.ofStringAliasArray = ofStringAliasArray;\n    function ofStringListArray(array, separator = ',') {\n        return arrayColumn({ array, schema: Schema.List(separator, x => x) });\n    }\n    Column.ofStringListArray = ofStringListArray;\n    function ofIntTokens(tokens) {\n        const { count, data, indices } = tokens;\n        return lambdaColumn({\n            value: (row) => fastParseInt(data, indices[2 * row], indices[2 * row + 1]) || 0,\n            rowCount: count,\n            schema: Schema.int,\n        });\n    }\n    Column.ofIntTokens = ofIntTokens;\n    function ofFloatTokens(tokens) {\n        const { count, data, indices } = tokens;\n        return lambdaColumn({\n            value: (row) => fastParseFloat(data, indices[2 * row], indices[2 * row + 1]) || 0,\n            rowCount: count,\n            schema: Schema.float,\n        });\n    }\n    Column.ofFloatTokens = ofFloatTokens;\n    function ofStringTokens(tokens) {\n        const { count, data, indices } = tokens;\n        return lambdaColumn({\n            value: (row) => {\n                const ret = data.substring(indices[2 * row], indices[2 * row + 1]);\n                if (ret === '.' || ret === '?')\n                    return '';\n                return ret;\n            },\n            rowCount: count,\n            schema: Schema.str,\n        });\n    }\n    Column.ofStringTokens = ofStringTokens;\n    function window(column, start, end) {\n        return windowColumn(column, start, end);\n    }\n    Column.window = window;\n    function view(column, indices, checkIndentity = true) {\n        return columnView(column, indices, checkIndentity);\n    }\n    Column.view = view;\n    /** A map of the 1st occurence of each value. */\n    function createFirstIndexMap(column) {\n        return createFirstIndexMapOfColumn(column);\n    }\n    Column.createFirstIndexMap = createFirstIndexMap;\n    function createIndexer(column) {\n        return createIndexerOfColumn(column);\n    }\n    Column.createIndexer = createIndexer;\n    function mapToArray(column, f, ctor) {\n        return mapToArrayImpl(column, f, ctor || Array);\n    }\n    Column.mapToArray = mapToArray;\n    function areEqual(a, b) {\n        return areColumnsEqual(a, b);\n    }\n    Column.areEqual = areEqual;\n    function indicesOf(c, test) {\n        return columnIndicesOf(c, test);\n    }\n    Column.indicesOf = indicesOf;\n    /** Makes the column backed by an array. Useful for columns that are accessed often. */\n    function asArrayColumn(c, array) {\n        if (c.__array)\n            return c;\n        if (!c.isDefined)\n            return Undefined(c.rowCount, c.schema);\n        return arrayColumn({ array: c.toArray({ array }), schema: c.schema, valueKind: c.valueKind });\n    }\n    Column.asArrayColumn = asArrayColumn;\n    function copyToArray(c, array, offset = 0) {\n        if (!c.isDefined)\n            return;\n        const cArray = c.__array;\n        if (cArray) {\n            for (let i = 0, _i = cArray.length; i < _i; i++)\n                array[offset + i] = cArray[i];\n        }\n        else {\n            for (let i = 0, _i = c.rowCount; i < _i; i++)\n                array[offset + i] = c.value(i);\n        }\n    }\n    Column.copyToArray = copyToArray;\n    function isIdentity(c) {\n        for (let i = 0, _i = c.rowCount; i < _i; i++) {\n            if (i !== c.value(i))\n                return false;\n        }\n        return true;\n    }\n    Column.isIdentity = isIdentity;\n})(Column || (Column = {}));\nexport { Column };\nfunction createFirstIndexMapOfColumn(c) {\n    const map = new Map();\n    for (let i = 0, _i = c.rowCount; i < _i; i++) {\n        const v = c.value(i);\n        if (!map.has(v))\n            map.set(c.value(i), i);\n    }\n    return map;\n}\nfunction createIndexerOfColumn(c) {\n    const map = new Map();\n    for (let i = 0, _i = c.rowCount; i < _i; i++) {\n        const v = c.value(i);\n        if (!map.has(v))\n            map.set(c.value(i), i);\n    }\n    return v => map.has(v) ? map.get(v) : -1;\n}\nfunction constColumn(v, rowCount, schema, valueKind) {\n    const value = row => v;\n    return {\n        schema: schema,\n        __array: void 0,\n        isDefined: valueKind === Column.ValueKinds.Present,\n        rowCount,\n        value,\n        valueKind: row => valueKind,\n        toArray: params => {\n            const { array } = ColumnHelpers.createArray(rowCount, params);\n            for (let i = 0, _i = array.length; i < _i; i++)\n                array[i] = v;\n            return array;\n        },\n        areValuesEqual: (rowA, rowB) => true\n    };\n}\nfunction lambdaColumn({ value, valueKind, areValuesEqual, rowCount, schema }) {\n    return {\n        schema: schema,\n        __array: void 0,\n        isDefined: true,\n        rowCount,\n        value,\n        valueKind: valueKind ? valueKind : row => Column.ValueKinds.Present,\n        toArray: params => {\n            const { array, start } = ColumnHelpers.createArray(rowCount, params);\n            for (let i = 0, _i = array.length; i < _i; i++)\n                array[i] = value(i + start);\n            return array;\n        },\n        areValuesEqual: areValuesEqual ? areValuesEqual : (rowA, rowB) => value(rowA) === value(rowB)\n    };\n}\nfunction arrayColumn({ array, schema, valueKind }) {\n    const rowCount = array.length;\n    const defaultValue = schema.T;\n    const value = schema.valueType === 'str'\n        ? schema.transform === 'lowercase'\n            ? row => { const v = array[row]; return typeof v === 'string' ? v.toLowerCase() : `${v !== null && v !== void 0 ? v : defaultValue}`.toLowerCase(); }\n            : schema.transform === 'uppercase'\n                ? row => { const v = array[row]; return typeof v === 'string' ? v.toUpperCase() : `${v !== null && v !== void 0 ? v : defaultValue}`.toUpperCase(); }\n                : row => { const v = array[row]; return typeof v === 'string' ? v : `${v !== null && v !== void 0 ? v : defaultValue}`; }\n        : row => array[row];\n    const isTyped = ColumnHelpers.isTypedArray(array);\n    return {\n        schema: schema,\n        __array: array,\n        isDefined: true,\n        rowCount,\n        value,\n        valueKind: valueKind ? valueKind : row => Column.ValueKinds.Present,\n        toArray: schema.valueType === 'str'\n            ? schema.transform === 'lowercase'\n                ? params => {\n                    const { start, end } = ColumnHelpers.getArrayBounds(rowCount, params);\n                    const ret = new (params && typeof params.array !== 'undefined' ? params.array : array.constructor)(end - start);\n                    for (let i = 0, _i = end - start; i < _i; i++) {\n                        const v = array[start + i];\n                        ret[i] = typeof v === 'string' ? v.toLowerCase() : `${v !== null && v !== void 0 ? v : defaultValue}`.toLowerCase();\n                    }\n                    return ret;\n                }\n                : schema.transform === 'uppercase'\n                    ? params => {\n                        const { start, end } = ColumnHelpers.getArrayBounds(rowCount, params);\n                        const ret = new (params && typeof params.array !== 'undefined' ? params.array : array.constructor)(end - start);\n                        for (let i = 0, _i = end - start; i < _i; i++) {\n                            const v = array[start + i];\n                            ret[i] = typeof v === 'string' ? v.toUpperCase() : `${v !== null && v !== void 0 ? v : defaultValue}`.toUpperCase();\n                        }\n                        return ret;\n                    }\n                    : params => {\n                        const { start, end } = ColumnHelpers.getArrayBounds(rowCount, params);\n                        const ret = new (params && typeof params.array !== 'undefined' ? params.array : array.constructor)(end - start);\n                        for (let i = 0, _i = end - start; i < _i; i++) {\n                            const v = array[start + i];\n                            ret[i] = typeof v === 'string' ? v : `${v !== null && v !== void 0 ? v : defaultValue}`;\n                        }\n                        return ret;\n                    }\n            : isTyped\n                ? params => ColumnHelpers.typedArrayWindow(array, params)\n                : params => {\n                    const { start, end } = ColumnHelpers.getArrayBounds(rowCount, params);\n                    if (start === 0 && end === array.length)\n                        return array;\n                    const ret = new (params && typeof params.array !== 'undefined' ? params.array : array.constructor)(end - start);\n                    for (let i = 0, _i = end - start; i < _i; i++)\n                        ret[i] = array[start + i];\n                    return ret;\n                },\n        areValuesEqual: (rowA, rowB) => array[rowA] === array[rowB]\n    };\n}\nfunction windowColumn(column, start, end) {\n    if (!column.isDefined)\n        return Column.Undefined(end - start, column.schema);\n    if (start === 0 && end === column.rowCount)\n        return column;\n    if (!!column.__array && ColumnHelpers.isTypedArray(column.__array))\n        return windowTyped(column, start, end);\n    return windowFull(column, start, end);\n}\nfunction windowTyped(c, start, end) {\n    const array = ColumnHelpers.typedArrayWindow(c.__array, { start, end });\n    const vk = c.valueKind;\n    return arrayColumn({ array, schema: c.schema, valueKind: row => vk(start + row) });\n}\nfunction windowFull(c, start, end) {\n    const v = c.value, vk = c.valueKind, ave = c.areValuesEqual;\n    const value = start === 0 ? v : row => v(row + start);\n    const rowCount = end - start;\n    return {\n        schema: c.schema,\n        __array: void 0,\n        isDefined: c.isDefined,\n        rowCount,\n        value,\n        valueKind: start === 0 ? vk : row => vk(row + start),\n        toArray: params => {\n            const { array } = ColumnHelpers.createArray(rowCount, params);\n            for (let i = 0, _i = array.length; i < _i; i++)\n                array[i] = v(i + start);\n            return array;\n        },\n        areValuesEqual: start === 0 ? ave : (rowA, rowB) => ave(rowA + start, rowB + start)\n    };\n}\nfunction isIdentity(map, rowCount) {\n    if (map.length !== rowCount)\n        return false;\n    for (let i = 0, _i = map.length; i < _i; i++) {\n        if (map[i] !== i)\n            return false;\n    }\n    return true;\n}\nfunction columnView(c, map, checkIdentity) {\n    if (c.rowCount === 0)\n        return c;\n    if (checkIdentity && isIdentity(map, c.rowCount))\n        return c;\n    if (!!c.__array && typeof c.value(0) === typeof c.__array[0])\n        return arrayView(c, map);\n    return viewFull(c, map);\n}\nfunction arrayView(c, map) {\n    const array = c.__array;\n    const ret = new array.constructor(map.length);\n    for (let i = 0, _i = map.length; i < _i; i++)\n        ret[i] = array[map[i]];\n    const vk = c.valueKind;\n    return arrayColumn({ array: ret, schema: c.schema, valueKind: row => vk(map[row]) });\n}\nfunction viewFull(c, map) {\n    const v = c.value, vk = c.valueKind, ave = c.areValuesEqual;\n    const value = row => v(map[row]);\n    const rowCount = map.length;\n    return {\n        schema: c.schema,\n        __array: void 0,\n        isDefined: c.isDefined,\n        rowCount,\n        value,\n        valueKind: row => vk(map[row]),\n        toArray: params => {\n            const { array } = ColumnHelpers.createArray(rowCount, params);\n            for (let i = 0, _i = array.length; i < _i; i++)\n                array[i] = v(map[i]);\n            return array;\n        },\n        areValuesEqual: (rowA, rowB) => ave(map[rowA], map[rowB])\n    };\n}\nfunction mapToArrayImpl(c, f, ctor) {\n    const ret = new ctor(c.rowCount);\n    for (let i = 0, _i = c.rowCount; i < _i; i++)\n        ret[i] = f(c.value(i));\n    return ret;\n}\nfunction areColumnsEqual(a, b) {\n    if (a === b)\n        return true;\n    if (a.rowCount !== b.rowCount || a.isDefined !== b.isDefined || a.schema.valueType !== b.schema.valueType)\n        return false;\n    if (!!a.__array && !!b.__array)\n        return areArraysEqual(a, b);\n    return areValuesEqual(a, b);\n}\nfunction areArraysEqual(a, b) {\n    const xs = a.__array, ys = b.__array;\n    for (let i = 0, _i = a.rowCount; i < _i; i++) {\n        if (xs[i] !== ys[i])\n            return false;\n    }\n    return true;\n}\nfunction areValuesEqual(a, b) {\n    const va = a.value, vb = b.value;\n    for (let i = 0, _i = a.rowCount; i < _i; i++) {\n        if (va(i) !== vb(i))\n            return false;\n    }\n    return true;\n}\nfunction columnIndicesOf(c, test) {\n    const ret = [], v = c.value;\n    for (let i = 0, _i = c.rowCount; i < _i; i++) {\n        if (test(v(i)))\n            ret[ret.length] = i;\n    }\n    return ret;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from './column.js';\nimport { sortArray } from '../util/sort.js';\nimport { StringBuilder } from '../../mol-util/index.js';\n/** An immutable table */\nvar Table;\n(function (Table) {\n    function is(t) {\n        return t && typeof t._rowCount === 'number' && !!t._columns && !!t._schema;\n    }\n    Table.is = is;\n    function pickColumns(schema, table, guard = {}) {\n        const ret = Object.create(null);\n        const keys = Object.keys(schema);\n        ret._rowCount = table._rowCount;\n        ret._columns = keys;\n        ret._schema = schema;\n        for (const k of keys) {\n            if (!!table[k])\n                ret[k] = table[k];\n            else if (!!guard[k])\n                ret[k] = guard[k];\n            else\n                throw Error(`Cannot find column '${k}'.`);\n        }\n        return ret;\n    }\n    Table.pickColumns = pickColumns;\n    function ofColumns(schema, columns) {\n        const _columns = Object.keys(columns);\n        const _rowCount = columns[_columns[0]].rowCount;\n        return { _rowCount, _columns, _schema: schema, ...columns };\n    }\n    Table.ofColumns = ofColumns;\n    function ofPartialColumns(schema, partialColumns, rowCount) {\n        const ret = Object.create(null);\n        const columns = Object.keys(schema);\n        ret._rowCount = rowCount;\n        ret._columns = columns;\n        ret._schema = schema;\n        for (const k of columns) {\n            if (k in partialColumns)\n                ret[k] = partialColumns[k];\n            else\n                ret[k] = Column.Undefined(rowCount, schema[k]);\n        }\n        return ret;\n    }\n    Table.ofPartialColumns = ofPartialColumns;\n    function ofUndefinedColumns(schema, rowCount) {\n        const ret = Object.create(null);\n        const columns = Object.keys(schema);\n        ret._rowCount = rowCount;\n        ret._columns = columns;\n        ret._schema = schema;\n        for (const k of columns) {\n            ret[k] = Column.Undefined(rowCount, schema[k]);\n        }\n        return ret;\n    }\n    Table.ofUndefinedColumns = ofUndefinedColumns;\n    function ofRows(schema, rows) {\n        const ret = Object.create(null);\n        const rowCount = rows.length;\n        const columns = Object.keys(schema);\n        ret._rowCount = rowCount;\n        ret._columns = columns;\n        ret._schema = schema;\n        for (const k of columns) {\n            ret[k] = Column.ofLambda({\n                rowCount,\n                schema: schema[k],\n                value: r => rows[r][k],\n                valueKind: r => typeof rows[r][k] === 'undefined' ? Column.ValueKinds.NotPresent : Column.ValueKinds.Present\n            });\n        }\n        return ret;\n    }\n    Table.ofRows = ofRows;\n    function ofArrays(schema, arrays) {\n        var _a;\n        const ret = Object.create(null);\n        const columns = Object.keys(schema);\n        ret._rowCount = 0;\n        ret._columns = columns;\n        ret._schema = schema;\n        for (const k of columns) {\n            if (typeof arrays[k] !== 'undefined') {\n                ret[k] = Column.ofArray({ array: arrays[k], schema: schema[k] });\n                ret._rowCount = (_a = arrays[k]) === null || _a === void 0 ? void 0 : _a.length;\n            }\n            else {\n                ret[k] = Column.Undefined(ret._rowCount, schema[k]);\n            }\n        }\n        return ret;\n    }\n    Table.ofArrays = ofArrays;\n    function view(table, schema, view) {\n        const ret = Object.create(null);\n        const columns = Object.keys(schema);\n        ret._rowCount = view.length;\n        ret._columns = columns;\n        ret._schema = schema;\n        for (const k of columns) {\n            ret[k] = Column.view(table[k], view);\n        }\n        return ret;\n    }\n    Table.view = view;\n    function pick(table, schema, test) {\n        const _view = [];\n        for (let i = 0, il = table._rowCount; i < il; ++i) {\n            if (test(i))\n                _view.push(i);\n        }\n        return view(table, schema, _view);\n    }\n    Table.pick = pick;\n    function window(table, schema, start, end) {\n        if (start === 0 && end === table._rowCount)\n            return table;\n        const ret = Object.create(null);\n        const columns = Object.keys(schema);\n        ret._rowCount = end - start;\n        ret._columns = columns;\n        ret._schema = schema;\n        for (const k of columns) {\n            ret[k] = Column.window(table[k], start, end);\n        }\n        return ret;\n    }\n    Table.window = window;\n    function concat(tables, schema) {\n        const ret = Object.create(null);\n        const columns = Object.keys(schema);\n        ret._rowCount = 0;\n        for (const table of tables) {\n            ret._rowCount += table._rowCount;\n        }\n        const arrays = {};\n        for (const column of columns) {\n            arrays[column] = new Array(ret._rowCount);\n        }\n        ret._columns = columns;\n        ret._schema = schema;\n        let offset = 0;\n        for (const table of tables) {\n            for (const k of columns) {\n                Column.copyToArray(table[k], arrays[k], offset);\n            }\n            offset += table._rowCount;\n        }\n        for (const k of columns) {\n            ret[k] = Column.ofArray({ array: arrays[k], schema: schema[k] });\n        }\n        return ret;\n    }\n    Table.concat = concat;\n    function columnToArray(table, name, array) {\n        table[name] = Column.asArrayColumn(table[name], array);\n    }\n    Table.columnToArray = columnToArray;\n    /** Sort and return a new table */\n    function sort(table, cmp) {\n        const indices = new Int32Array(table._rowCount);\n        for (let i = 0, _i = indices.length; i < _i; i++)\n            indices[i] = i;\n        sortArray(indices, (_, i, j) => cmp(i, j));\n        let isIdentity = true;\n        for (let i = 0, _i = indices.length; i < _i; i++) {\n            if (indices[i] !== i) {\n                isIdentity = false;\n                break;\n            }\n        }\n        if (isIdentity)\n            return table;\n        const ret = Object.create(null);\n        ret._rowCount = table._rowCount;\n        ret._columns = table._columns;\n        ret._schema = table._schema;\n        for (const c of table._columns) {\n            ret[c] = Column.view(table[c], indices, false);\n        }\n        return ret;\n    }\n    Table.sort = sort;\n    function areEqual(a, b) {\n        if (a._rowCount !== b._rowCount)\n            return false;\n        if (a._columns.length !== b._columns.length)\n            return false;\n        for (const c of a._columns) {\n            if (!b[c])\n                return false;\n        }\n        for (const c of a._columns) {\n            if (!Column.areEqual(a[c], b[c]))\n                return false;\n        }\n        return true;\n    }\n    Table.areEqual = areEqual;\n    /** Allocate a new object with the given row values. */\n    function getRow(table, index) {\n        const row = Object.create(null);\n        const { _columns: cols } = table;\n        for (let i = 0; i < cols.length; i++) {\n            const c = cols[i];\n            row[c] = table[c].value(index);\n        }\n        return row;\n    }\n    Table.getRow = getRow;\n    /** Pick the first row for which `test` evaluates to true */\n    function pickRow(table, test) {\n        for (let i = 0, il = table._rowCount; i < il; ++i) {\n            if (test(i))\n                return getRow(table, i);\n        }\n    }\n    Table.pickRow = pickRow;\n    function getRows(table) {\n        const ret = [];\n        const { _rowCount: c } = table;\n        for (let i = 0; i < c; i++) {\n            ret[i] = getRow(table, i);\n        }\n        return ret;\n    }\n    Table.getRows = getRows;\n    function toArrays(table) {\n        const arrays = {};\n        const { _columns } = table;\n        for (let i = 0; i < _columns.length; i++) {\n            const c = _columns[i];\n            arrays[c] = table[c].toArray();\n        }\n        return arrays;\n    }\n    Table.toArrays = toArrays;\n    function formatToString(table) {\n        const sb = StringBuilder.create();\n        const { _columns: cols, _rowCount } = table;\n        let headerLength = 1;\n        StringBuilder.write(sb, '|');\n        for (let i = 0; i < cols.length; i++) {\n            StringBuilder.write(sb, cols[i]);\n            StringBuilder.write(sb, '|');\n            headerLength += cols[i].length + 1;\n        }\n        StringBuilder.newline(sb);\n        StringBuilder.write(sb, new Array(headerLength + 1).join('-'));\n        StringBuilder.newline(sb);\n        for (let r = 0; r < _rowCount; r++) {\n            StringBuilder.write(sb, '|');\n            for (let i = 0; i < cols.length; i++) {\n                const c = table[cols[i]];\n                if (c.valueKind(r) === Column.ValueKinds.Present) {\n                    StringBuilder.write(sb, c.value(r));\n                    StringBuilder.write(sb, '|');\n                }\n                else {\n                    StringBuilder.write(sb, '.|');\n                }\n            }\n            StringBuilder.newline(sb);\n        }\n        return StringBuilder.getString(sb);\n    }\n    Table.formatToString = formatToString;\n})(Table || (Table = {}));\nexport { Table };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Table } from './table.js';\nvar Database;\n(function (Database) {\n    function ofTables(name, schema, tables) {\n        const keys = Object.keys(tables);\n        const ret = Object.create(null);\n        const tableNames = [];\n        ret._name = name;\n        ret._tableNames = tableNames;\n        ret._schema = schema;\n        for (const k of keys) {\n            if (!Table.is(tables[k]))\n                continue;\n            ret[k] = tables[k];\n            tableNames[tableNames.length] = k;\n        }\n        return ret;\n    }\n    Database.ofTables = ofTables;\n    function getTablesAsRows(database) {\n        const ret = {};\n        for (const k of database._tableNames) {\n            ret[k] = Table.getRows(database[k]);\n        }\n        return ret;\n    }\n    Database.getTablesAsRows = getTablesAsRows;\n})(Database || (Database = {}));\nexport { Database };\n","/**\n * Copyright (c) 2018-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Gianluca Tomasello <giagitom@gmail.com>\n */\nimport { GridLookup3D, Result } from '../../../../mol-math/geometry.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nimport { OrderedSet } from '../../../../mol-data/int.js';\nimport { StructureElement } from '../element.js';\nimport { FibonacciHeap } from '../../../../mol-util/fibonacci-heap.js';\nexport var StructureResult;\n(function (StructureResult) {\n    function add(result, unit, index, distSq) {\n        result.indices[result.count] = index;\n        result.units[result.count] = unit;\n        result.squaredDistances[result.count] = distSq;\n        result.count++;\n    }\n    StructureResult.add = add;\n    function create() {\n        return { count: 0, indices: [], units: [], squaredDistances: [] };\n    }\n    StructureResult.create = create;\n    function copy(out, result) {\n        for (let i = 0; i < result.count; ++i) {\n            out.indices[i] = result.indices[i];\n            out.units[i] = result.units[i];\n            out.squaredDistances[i] = result.squaredDistances[i];\n        }\n        out.count = result.count;\n        return out;\n    }\n    StructureResult.copy = copy;\n})(StructureResult || (StructureResult = {}));\nexport function StructureLookup3DResultContext() {\n    return { result: StructureResult.create(), closeUnitsResult: Result.create(), unitGroupResult: Result.create() };\n}\nexport class StructureLookup3D {\n    findUnitIndices(x, y, z, radius) {\n        return this.unitLookup.find(x, y, z, radius);\n    }\n    find(x, y, z, radius, ctx) {\n        return this._find(x, y, z, radius, ctx !== null && ctx !== void 0 ? ctx : this.findContext);\n    }\n    _find(x, y, z, radius, ctx) {\n        Result.reset(ctx.result);\n        const { units } = this.structure;\n        const closeUnits = this.unitLookup.find(x, y, z, radius, ctx.closeUnitsResult);\n        if (closeUnits.count === 0)\n            return ctx.result;\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unit = units[closeUnits.indices[t]];\n            Vec3.set(this.pivot, x, y, z);\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const unitLookup = unit.lookup3d;\n            const groupResult = unitLookup.find(this.pivot[0], this.pivot[1], this.pivot[2], radius, ctx.unitGroupResult);\n            for (let j = 0, _j = groupResult.count; j < _j; j++) {\n                StructureResult.add(ctx.result, unit, groupResult.indices[j], groupResult.squaredDistances[j]);\n            }\n        }\n        return ctx.result;\n    }\n    nearest(x, y, z, k = 1, ctx) {\n        return this._nearest(x, y, z, k, ctx !== null && ctx !== void 0 ? ctx : this.findContext);\n    }\n    _nearest(x, y, z, k, ctx) {\n        const result = ctx.result, heap = this.heap;\n        Result.reset(result);\n        heap.clear();\n        const { units } = this.structure;\n        let elementsCount = 0;\n        const closeUnits = this.unitLookup.nearest(x, y, z, units.length, (uid) => (elementsCount += units[uid].elements.length) >= k, ctx.closeUnitsResult); // sort units based on distance to the point\n        if (closeUnits.count === 0)\n            return result;\n        let totalCount = 0, maxDistResult = -Number.MAX_VALUE;\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unitSqDist = closeUnits.squaredDistances[t];\n            if (totalCount >= k && maxDistResult < unitSqDist)\n                break;\n            Vec3.set(this.pivot, x, y, z);\n            const unit = units[closeUnits.indices[t]];\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const unitLookup = unit.lookup3d;\n            const groupResult = unitLookup.nearest(this.pivot[0], this.pivot[1], this.pivot[2], k, void 0, ctx.unitGroupResult);\n            if (groupResult.count === 0)\n                continue;\n            totalCount += groupResult.count;\n            maxDistResult = Math.max(maxDistResult, groupResult.squaredDistances[groupResult.count - 1]);\n            for (let j = 0, _j = groupResult.count; j < _j; j++) {\n                heap.insert(groupResult.squaredDistances[j], { index: groupResult.indices[j], unit: unit });\n            }\n        }\n        if (k === 1) {\n            const node = heap.findMinimum();\n            if (node) {\n                const { key: squaredDistance } = node;\n                const { unit, index } = node.value;\n                StructureResult.add(result, unit, index, squaredDistance);\n            }\n        }\n        else {\n            while (!heap.isEmpty() && result.count < k) {\n                const node = heap.extractMinimum();\n                const { key: squaredDistance } = node;\n                const { unit, index } = node.value;\n                StructureResult.add(result, unit, index, squaredDistance);\n            }\n        }\n        return result;\n    }\n    findIntoBuilder(x, y, z, radius, builder) {\n        const { units } = this.structure;\n        const closeUnits = this.unitLookup.find(x, y, z, radius);\n        if (closeUnits.count === 0)\n            return;\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unit = units[closeUnits.indices[t]];\n            Vec3.set(this.pivot, x, y, z);\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const unitLookup = unit.lookup3d;\n            const groupResult = unitLookup.find(this.pivot[0], this.pivot[1], this.pivot[2], radius);\n            if (groupResult.count === 0)\n                continue;\n            const elements = unit.elements;\n            builder.beginUnit(unit.id);\n            for (let j = 0, _j = groupResult.count; j < _j; j++) {\n                builder.addElement(elements[groupResult.indices[j]]);\n            }\n            builder.commitUnit();\n        }\n    }\n    findIntoBuilderIf(x, y, z, radius, builder, test) {\n        const { units } = this.structure;\n        const closeUnits = this.unitLookup.find(x, y, z, radius);\n        if (closeUnits.count === 0)\n            return;\n        const loc = StructureElement.Location.create(this.structure);\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unit = units[closeUnits.indices[t]];\n            Vec3.set(this.pivot, x, y, z);\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const unitLookup = unit.lookup3d;\n            const groupResult = unitLookup.find(this.pivot[0], this.pivot[1], this.pivot[2], radius);\n            if (groupResult.count === 0)\n                continue;\n            const elements = unit.elements;\n            loc.unit = unit;\n            builder.beginUnit(unit.id);\n            for (let j = 0, _j = groupResult.count; j < _j; j++) {\n                loc.element = elements[groupResult.indices[j]];\n                if (test(loc)) {\n                    builder.addElement(loc.element);\n                }\n            }\n            builder.commitUnit();\n        }\n    }\n    findIntoBuilderWithRadius(x, y, z, pivotR, maxRadius, radius, eRadius, builder) {\n        const { units } = this.structure;\n        const closeUnits = this.unitLookup.find(x, y, z, radius);\n        if (closeUnits.count === 0)\n            return;\n        const se = StructureElement.Location.create(this.structure);\n        const queryRadius = pivotR + maxRadius + radius;\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unit = units[closeUnits.indices[t]];\n            Vec3.set(this.pivot, x, y, z);\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const unitLookup = unit.lookup3d;\n            const groupResult = unitLookup.find(this.pivot[0], this.pivot[1], this.pivot[2], queryRadius);\n            if (groupResult.count === 0)\n                continue;\n            const elements = unit.elements;\n            se.unit = unit;\n            builder.beginUnit(unit.id);\n            for (let j = 0, _j = groupResult.count; j < _j; j++) {\n                se.element = elements[groupResult.indices[j]];\n                const rr = eRadius(se);\n                if (Math.sqrt(groupResult.squaredDistances[j]) - pivotR - rr > radius)\n                    continue;\n                builder.addElement(elements[groupResult.indices[j]]);\n            }\n            builder.commitUnit();\n        }\n    }\n    check(x, y, z, radius) {\n        const { units } = this.structure;\n        const closeUnits = this.unitLookup.find(x, y, z, radius);\n        if (closeUnits.count === 0)\n            return false;\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unit = units[closeUnits.indices[t]];\n            Vec3.set(this.pivot, x, y, z);\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const groupLookup = unit.lookup3d;\n            if (groupLookup.check(this.pivot[0], this.pivot[1], this.pivot[2], radius))\n                return true;\n        }\n        return false;\n    }\n    approxNearest(x, y, z, radius, ctx) {\n        return this._approxNearest(x, y, z, radius, ctx !== null && ctx !== void 0 ? ctx : this.findContext);\n    }\n    _approxNearest(x, y, z, radius, ctx) {\n        Result.reset(ctx.result);\n        const { units } = this.structure;\n        const closeUnits = this.unitLookup.find(x, y, z, radius, ctx.closeUnitsResult);\n        if (closeUnits.count === 0)\n            return ctx.result;\n        let minDistSq = Number.MAX_VALUE;\n        for (let t = 0, _t = closeUnits.count; t < _t; t++) {\n            const unit = units[closeUnits.indices[t]];\n            Vec3.set(this.pivot, x, y, z);\n            if (!unit.conformation.operator.isIdentity) {\n                Vec3.transformMat4(this.pivot, this.pivot, unit.conformation.operator.inverse);\n            }\n            const unitLookup = unit.lookup3d;\n            const groupResult = unitLookup.approxNearest(this.pivot[0], this.pivot[1], this.pivot[2], radius, ctx.unitGroupResult);\n            for (let j = 0, _j = groupResult.count; j < _j; j++) {\n                if (groupResult.squaredDistances[j] < minDistSq) {\n                    StructureResult.add(ctx.result, unit, groupResult.indices[j], groupResult.squaredDistances[j]);\n                    minDistSq = groupResult.squaredDistances[j];\n                }\n            }\n        }\n        return ctx.result;\n    }\n    get boundary() {\n        return this.structure.boundary;\n    }\n    constructor(structure) {\n        this.structure = structure;\n        this.pivot = Vec3();\n        this.heap = new FibonacciHeap();\n        this.findContext = StructureLookup3DResultContext();\n        const { units, boundary } = structure;\n        const unitCount = units.length;\n        const xs = new Float32Array(unitCount);\n        const ys = new Float32Array(unitCount);\n        const zs = new Float32Array(unitCount);\n        const radius = new Float32Array(unitCount);\n        const center = Vec3();\n        for (let i = 0; i < unitCount; i++) {\n            const unit = units[i];\n            const s = unit.boundary.sphere;\n            Vec3.transformMat4(center, s.center, unit.conformation.operator.matrix);\n            xs[i] = center[0];\n            ys[i] = center[1];\n            zs[i] = center[2];\n            radius[i] = s.radius;\n        }\n        const position = { x: xs, y: ys, z: zs, radius, indices: OrderedSet.ofBounds(0, unitCount) };\n        this.unitLookup = GridLookup3D(position, boundary);\n    }\n}\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nfunction Vec2() {\n    return Vec2.zero();\n}\n(function (Vec2) {\n    function zero() {\n        // force double backing array by 0.1.\n        const ret = [0.1, 0];\n        ret[0] = 0.0;\n        return ret;\n    }\n    Vec2.zero = zero;\n    function clone(a) {\n        const out = zero();\n        out[0] = a[0];\n        out[1] = a[1];\n        return out;\n    }\n    Vec2.clone = clone;\n    function fromObj(v) {\n        return create(v.x, v.y);\n    }\n    Vec2.fromObj = fromObj;\n    function toObj(v) {\n        return { x: v[0], y: v[1] };\n    }\n    Vec2.toObj = toObj;\n    function create(x, y) {\n        const out = zero();\n        out[0] = x;\n        out[1] = y;\n        return out;\n    }\n    Vec2.create = create;\n    function hasNaN(a) {\n        return Number.isNaN(a[0]) || Number.isNaN(a[1]);\n    }\n    Vec2.hasNaN = hasNaN;\n    function toArray(a, out, offset) {\n        out[offset + 0] = a[0];\n        out[offset + 1] = a[1];\n        return out;\n    }\n    Vec2.toArray = toArray;\n    function fromArray(a, array, offset) {\n        a[0] = array[offset + 0];\n        a[1] = array[offset + 1];\n        return a;\n    }\n    Vec2.fromArray = fromArray;\n    function copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        return out;\n    }\n    Vec2.copy = copy;\n    function set(out, x, y) {\n        out[0] = x;\n        out[1] = y;\n        return out;\n    }\n    Vec2.set = set;\n    function add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        return out;\n    }\n    Vec2.add = add;\n    function sub(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        return out;\n    }\n    Vec2.sub = sub;\n    function mul(out, a, b) {\n        out[0] = a[0] * b[0];\n        out[1] = a[1] * b[1];\n        return out;\n    }\n    Vec2.mul = mul;\n    function div(out, a, b) {\n        out[0] = a[0] / b[0];\n        out[1] = a[1] / b[1];\n        return out;\n    }\n    Vec2.div = div;\n    function scale(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        return out;\n    }\n    Vec2.scale = scale;\n    /**\n     * Math.round the components of a Vec2\n     */\n    function round(out, a) {\n        out[0] = Math.round(a[0]);\n        out[1] = Math.round(a[1]);\n        return out;\n    }\n    Vec2.round = round;\n    /**\n     * Math.ceil the components of a Vec2\n     */\n    function ceil(out, a) {\n        out[0] = Math.ceil(a[0]);\n        out[1] = Math.ceil(a[1]);\n        return out;\n    }\n    Vec2.ceil = ceil;\n    /**\n     * Math.floor the components of a Vec2\n     */\n    function floor(out, a) {\n        out[0] = Math.floor(a[0]);\n        out[1] = Math.floor(a[1]);\n        return out;\n    }\n    Vec2.floor = floor;\n    function distance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1];\n        return Math.sqrt(x * x + y * y);\n    }\n    Vec2.distance = distance;\n    function squaredDistance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1];\n        return x * x + y * y;\n    }\n    Vec2.squaredDistance = squaredDistance;\n    function magnitude(a) {\n        const x = a[0], y = a[1];\n        return Math.sqrt(x * x + y * y);\n    }\n    Vec2.magnitude = magnitude;\n    function squaredMagnitude(a) {\n        const x = a[0], y = a[1];\n        return x * x + y * y;\n    }\n    Vec2.squaredMagnitude = squaredMagnitude;\n    function setMagnitude(out, a, l) {\n        return scale(out, normalize(out, a), l);\n    }\n    Vec2.setMagnitude = setMagnitude;\n    /**\n     * Returns the inverse of the components of a Vec2\n     */\n    function inverse(out, a) {\n        out[0] = 1.0 / a[0];\n        out[1] = 1.0 / a[1];\n        return out;\n    }\n    Vec2.inverse = inverse;\n    function normalize(out, a) {\n        const x = a[0], y = a[1];\n        let len = x * x + y * y;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            out[0] = a[0] * len;\n            out[1] = a[1] * len;\n        }\n        return out;\n    }\n    Vec2.normalize = normalize;\n    function areEqual(a, b) {\n        return a[0] === b[0] && a[1] === b[1];\n    }\n    Vec2.areEqual = areEqual;\n    function toString(a, precision) {\n        return `[${a[0].toPrecision(precision)} ${a[1].toPrecision(precision)}}]`;\n    }\n    Vec2.toString = toString;\n})(Vec2 || (Vec2 = {}));\nexport { Vec2 };\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { canonicalJsonString } from './json.js';\n// TODO move to mol-math as Vector???\n/** Get the maximum value in an array */\nexport function arrayMax(array) {\n    let max = -Infinity;\n    for (let i = 0, il = array.length; i < il; ++i) {\n        if (array[i] > max)\n            max = array[i];\n    }\n    return max;\n}\n/** Get the minimum value in an array */\nexport function arrayMin(array) {\n    let min = Infinity;\n    for (let i = 0, il = array.length; i < il; ++i) {\n        if (array[i] < min)\n            min = array[i];\n    }\n    return min;\n}\n/** Get the minimum & maximum value in an array */\nexport function arrayMinMax(array) {\n    let min = Infinity;\n    let max = -Infinity;\n    for (let i = 0, il = array.length; i < il; ++i) {\n        if (array[i] < min)\n            min = array[i];\n        if (array[i] > max)\n            max = array[i];\n    }\n    return [min, max];\n}\n/** Get the sum of values in an array */\nexport function arraySum(array, stride = 1, offset = 0) {\n    const n = array.length;\n    let sum = 0;\n    for (let i = offset; i < n; i += stride) {\n        sum += array[i];\n    }\n    return sum;\n}\n/** Get the mean of values in an array */\nexport function arrayMean(array, stride = 1, offset = 0) {\n    return arraySum(array, stride, offset) / (array.length / stride);\n}\n/** Get the root mean square of values in an array */\nexport function arrayRms(array) {\n    const n = array.length;\n    let sumSq = 0;\n    for (let i = 0; i < n; ++i) {\n        const di = array[i];\n        sumSq += di * di;\n    }\n    return Math.sqrt(sumSq / n);\n}\n/** Fill an array with serial numbers starting from 0 until n - 1 (defaults to array.length) */\nexport function fillSerial(array, n) {\n    for (let i = 0, il = n ? Math.min(n, array.length) : array.length; i < il; ++i)\n        array[i] = i;\n    return array;\n}\nexport function arrayRemoveInPlace(xs, x) {\n    let i = 0, found = false;\n    for (const il = xs.length; i < il; i++) {\n        if (xs[i] === x) {\n            found = true;\n            break;\n        }\n    }\n    if (!found)\n        return false;\n    arrayRemoveAtInPlace(xs, i);\n    return true;\n}\nexport function arrayRemoveAtInPlace(xs, idx) {\n    for (let i = idx, _i = xs.length - 1; i < _i; i++) {\n        xs[i] = xs[i + 1];\n    }\n    xs.pop();\n}\nexport function arraySetAdd(xs, x) {\n    if (xs.indexOf(x) >= 0)\n        return false;\n    xs.push(x);\n    return true;\n}\nexport function arraySetRemove(xs, x) {\n    const idx = xs.indexOf(x);\n    if (idx < 0)\n        return false;\n    for (let i = idx, _i = xs.length - 1; i < _i; i++) {\n        xs[i] = xs[i + 1];\n    }\n    xs.pop();\n    return true;\n}\n/**\n * Caution, O(n^2) complexity. Only use for small input sizes.\n * For larger inputs consider using `SortedArray`.\n */\nexport function arrayAreIntersecting(xs, ys) {\n    for (let i = 0, il = xs.length; i < il; ++i) {\n        if (ys.includes(xs[i]))\n            return true;\n    }\n    return false;\n}\n/**\n * Caution, O(n^2) complexity. Only use for small input sizes.\n * For larger inputs consider using `SortedArray`.\n */\nexport function arrayIntersectionSize(xs, ys) {\n    let count = 0;\n    for (let i = 0, il = xs.length; i < il; ++i) {\n        if (ys.includes(xs[i]))\n            count += 1;\n    }\n    return count;\n}\nexport function arrayEqual(xs, ys) {\n    if (!xs || xs.length === 0)\n        return !ys || ys.length === 0;\n    if (!ys)\n        return false;\n    const lenX = xs.length;\n    if (lenX !== ys.length)\n        return false;\n    for (let i = 0; i < lenX; i++) {\n        if (xs[i] !== ys[i])\n            return false;\n    }\n    return true;\n}\nexport function arrayIsIdentity(xs) {\n    for (let i = 0, _i = xs.length; i < _i; i++) {\n        if (xs[i] !== i)\n            return false;\n    }\n    return true;\n}\nexport function arrayMapUpsert(xs, key, value) {\n    for (let i = 0, il = xs.length; i < il; ++i) {\n        if (xs[i][0] === key) {\n            xs[i][1] = value;\n            return;\n        }\n    }\n    xs.push([key, value]);\n}\n/** Return an array containing integers from [start, end) if `end` is given,\n * or from [0, start) if `end` is omitted. */\nexport function range(start, end) {\n    if (end === undefined) {\n        end = start;\n        start = 0;\n    }\n    const length = Math.max(end - start, 0);\n    const result = Array(length);\n    for (let i = 0; i < length; i++) {\n        result[i] = start + i;\n    }\n    return result;\n}\n/** Copy all elements from `src` to the end of `dst`.\n * Equivalent to `dst.push(...src)`, but avoids storing element on call stack. Faster that `extend` from Underscore.js.\n * `extend(a, a)` will double the array.\n * Returns the modified `dst` array.\n */\nexport function arrayExtend(dst, src) {\n    const offset = dst.length;\n    const nCopy = src.length;\n    dst.length += nCopy;\n    for (let i = 0; i < nCopy; i++) {\n        dst[offset + i] = src[i];\n    }\n    return dst;\n}\n/** Check whether `array` is sorted, sort if not. */\nexport function sortIfNeeded(array, compareFn) {\n    return arrayIsSorted(array, compareFn) ? array : array.sort(compareFn);\n}\n/** Decide whether `array` is sorted. */\nexport function arrayIsSorted(array, compareFn) {\n    for (let i = 1, n = array.length; i < n; i++) {\n        if (compareFn(array[i - 1], array[i]) > 0) {\n            return false;\n        }\n    }\n    return true;\n}\n/** Remove all elements from the array which do not fulfil `predicate`. Return the modified array itself. */\nexport function filterInPlace(array, predicate) {\n    const n = array.length;\n    let iDest = 0;\n    for (let iSrc = 0; iSrc < n; iSrc++) {\n        if (predicate(array[iSrc])) {\n            array[iDest++] = array[iSrc];\n        }\n    }\n    array.length = iDest;\n    return array;\n}\n/** Return an array of all distinct values from `values`\n * (i.e. with removed duplicates).\n * Uses deep equality for objects and arrays,\n * independent from object key order and undefined properties.\n * E.g. {a: 1, b: undefined, c: {d: [], e: null}} is equal to {c: {e: null, d: []}}, a: 1}.\n * If two or more objects in `values` are equal, only the first of them will be in the result. */\nexport function arrayDistinct(values) {\n    const seen = new Set();\n    const result = [];\n    for (const value of values) {\n        const key = canonicalJsonString(value);\n        if (!seen.has(key)) {\n            seen.add(key);\n            result.push(value);\n        }\n    }\n    return result;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { IntMap, SortedArray } from '../../../../mol-data/int.js';\nimport { sortArray } from '../../../../mol-data/util.js';\nimport { StructureSymmetry } from '../symmetry.js';\nimport { Structure } from '../structure.js';\nexport class StructureSubsetBuilder {\n    addToUnit(parentId, e) {\n        const unit = this.unitMap.get(parentId);\n        if (!!unit) {\n            unit[unit.length] = e;\n        }\n        else {\n            this.unitMap.set(parentId, [e]);\n            this.ids[this.ids.length] = parentId;\n        }\n        this.elementCount++;\n    }\n    beginUnit(parentId) {\n        this.parentId = parentId;\n        this.currentUnit = this.currentUnit.length > 0 ? [] : this.currentUnit;\n    }\n    addElement(e) {\n        this.currentUnit[this.currentUnit.length] = e;\n        this.elementCount++;\n    }\n    addElementRange(elements, start, end) {\n        for (let i = start; i < end; i++) {\n            this.currentUnit[this.currentUnit.length] = elements[i];\n            this.elementCount++;\n        }\n    }\n    commitUnit() {\n        if (this.currentUnit.length === 0)\n            return;\n        this.ids[this.ids.length] = this.parentId;\n        this.unitMap.set(this.parentId, this.currentUnit);\n        this.parentId = -1;\n    }\n    setUnit(parentId, elements) {\n        this.ids[this.ids.length] = parentId;\n        this.unitMap.set(parentId, elements);\n        this.elementCount += elements.length;\n    }\n    _getStructure(deduplicateElements) {\n        if (this.isEmpty)\n            return Structure.Empty;\n        const newUnits = [];\n        sortArray(this.ids);\n        const symmGroups = StructureSymmetry.UnitEquivalenceBuilder();\n        for (let i = 0, _i = this.ids.length; i < _i; i++) {\n            const id = this.ids[i];\n            const parent = this.parent.unitMap.get(id);\n            let unit = this.unitMap.get(id);\n            let sorted = false;\n            if (deduplicateElements) {\n                if (!this.isSorted)\n                    sortArray(unit);\n                unit = SortedArray.deduplicate(SortedArray.ofSortedArray(this.currentUnit));\n                sorted = true;\n            }\n            const l = unit.length;\n            // if the length is the same, just copy the old unit.\n            if (unit.length === parent.elements.length) {\n                newUnits[newUnits.length] = parent;\n                symmGroups.add(parent.id, parent);\n                continue;\n            }\n            if (!this.isSorted && !sorted && l > 1)\n                sortArray(unit);\n            let child = parent.getChild(SortedArray.ofSortedArray(unit));\n            const pivot = symmGroups.add(child.id, child);\n            if (child !== pivot)\n                child = pivot.applyOperator(child.id, child.conformation.operator, true);\n            newUnits[newUnits.length] = child;\n        }\n        return Structure.create(newUnits, { parent: this.parent });\n    }\n    getStructure() {\n        return this._getStructure(false);\n    }\n    getStructureDeduplicate() {\n        return this._getStructure(true);\n    }\n    setSingletonLocation(location) {\n        const id = this.ids[0];\n        location.unit = this.parent.unitMap.get(id);\n        location.element = this.unitMap.get(id)[0];\n    }\n    get isEmpty() {\n        return this.elementCount === 0;\n    }\n    constructor(parent, isSorted) {\n        this.parent = parent;\n        this.isSorted = isSorted;\n        this.ids = [];\n        this.unitMap = IntMap.Mutable();\n        this.parentId = -1;\n        this.currentUnit = [];\n        this.elementCount = 0;\n    }\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nfunction P(m, n) {\n    let p = 1;\n    while (n--)\n        p *= m--;\n    return p;\n}\nfunction C(m, n) {\n    if (n > m)\n        return 0;\n    return P(m, n) / P(n, n);\n}\nfunction nextIndex(n) {\n    const smallest = n & -n;\n    const ripple = n + smallest;\n    const newSmallest = ripple & -ripple;\n    const ones = ((newSmallest / smallest) >> 1) - 1;\n    return ripple | ones;\n}\n;\nexport class CombinationIterator {\n    move() {\n        if (this.hasNext) {\n            let i = 0, j = 0, n = this.index;\n            for (; n; n >>>= 1, i++) {\n                if (n & 1)\n                    this.value[j++] = this.array[i];\n            }\n            this.index = nextIndex(this.index);\n            this.hasNext = this.index < this.maxIndex;\n        }\n        return this.value;\n    }\n    constructor(array, count) {\n        this.array = array;\n        this.hasNext = false;\n        this.index = (1 << count) - 1;\n        this.size = C(array.length, count);\n        this.maxIndex = 1 << array.length,\n            this.value = new Array(count);\n        this.hasNext = count > 0 && count <= array.length;\n    }\n}\nexport function combinations(array, count) {\n    const out = [];\n    const combinationIt = new CombinationIterator(array, count);\n    while (combinationIt.hasNext)\n        out.push(combinationIt.move().slice());\n    return out;\n}\n","/**\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nconst EmptyArray = [];\nexport const EmptyCarbohydrates = {\n    links: EmptyArray,\n    terminalLinks: EmptyArray,\n    elements: EmptyArray,\n    partialElements: EmptyArray,\n    getElementIndices: () => EmptyArray,\n    getLinkIndices: () => EmptyArray,\n    getTerminalLinkIndices: () => EmptyArray,\n};\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Segmentation, SortedArray } from '../../../../mol-data/int.js';\nimport { combinations } from '../../../../mol-data/util/combination.js';\nimport { IntAdjacencyGraph } from '../../../../mol-math/graph.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nimport { PrincipalAxes } from '../../../../mol-math/linear-algebra/matrix/principal-axes.js';\nimport { fillSerial, arraySetAdd } from '../../../../mol-util/array.js';\nimport { ElementSymbol, BondType } from '../../model/types.js';\nimport { getPositions } from '../../util.js';\nimport { Unit } from '../unit.js';\nimport { EmptyCarbohydrates } from './data.js';\nimport { UnitRings, UnitRing } from '../unit/rings.js';\nimport { cantorPairing } from '../../../../mol-data/util.js';\nconst C = ElementSymbol('C'), O = ElementSymbol('O');\nconst SugarRingFps = [\n    UnitRing.elementFingerprint([C, C, C, O]),\n    UnitRing.elementFingerprint([C, C, C, C, O]),\n    UnitRing.elementFingerprint([C, C, C, C, C, O]),\n    UnitRing.elementFingerprint([C, C, C, C, C, C, O]),\n];\nfunction getAnomericCarbon(unit, ringAtoms) {\n    let indexHasTwoOxygen = -1, indexHasOxygenAndCarbon = -1, indexHasC1Name = -1, indexIsCarbon = -1;\n    const { elements } = unit;\n    const { type_symbol, label_atom_id } = unit.model.atomicHierarchy.atoms;\n    const { b: neighbor, offset } = unit.bonds;\n    for (let i = 0, il = ringAtoms.length; i < il; ++i) {\n        const ei = elements[ringAtoms[i]];\n        if (type_symbol.value(ei) !== C)\n            continue;\n        let linkedOxygenCount = 0;\n        let linkedCarbonCount = 0;\n        for (let j = offset[ringAtoms[i]], jl = offset[ringAtoms[i] + 1]; j < jl; ++j) {\n            const ej = elements[neighbor[j]];\n            const typeSymbol = type_symbol.value(ej);\n            if (typeSymbol === O)\n                ++linkedOxygenCount;\n            else if (typeSymbol === C)\n                ++linkedCarbonCount;\n        }\n        if (linkedOxygenCount === 2) {\n            // found anomeric carbon\n            indexHasTwoOxygen = ei;\n            break;\n        }\n        else if (linkedOxygenCount === 1 && linkedCarbonCount === 1) {\n            // possibly an anomeric carbon if this is a mono-saccharide without a glycosidic bond\n            indexHasOxygenAndCarbon = ei;\n        }\n        else if (label_atom_id.value(ei).startsWith('C1')) {\n            // likely the anomeric carbon as it is named C1 by convention\n            indexHasC1Name = ei;\n        }\n        else {\n            // use any carbon as a fallback\n            indexIsCarbon = ei;\n        }\n    }\n    return (indexHasTwoOxygen !== -1 ? indexHasTwoOxygen\n        : indexHasOxygenAndCarbon !== -1 ? indexHasOxygenAndCarbon\n            : indexHasC1Name !== -1 ? indexHasC1Name\n                : indexIsCarbon !== -1 ? indexIsCarbon\n                    : elements[ringAtoms[0]]);\n}\nfunction getAltId(unit, index) {\n    const { elements } = unit;\n    const { label_alt_id } = unit.model.atomicHierarchy.atoms;\n    return label_alt_id.value(elements[index]);\n}\nfunction getDirection(direction, unit, index, center) {\n    const c = unit.conformation;\n    Vec3.normalize(direction, Vec3.sub(direction, center, c.position(index, direction)));\n    return direction;\n}\nfunction getAtomId(unit, index) {\n    const { elements } = unit;\n    const { label_atom_id } = unit.model.atomicHierarchy.atoms;\n    return label_atom_id.value(elements[index]);\n}\nfunction filterFusedRings(unitRings, rings) {\n    if (!rings || !rings.length)\n        return;\n    const { unit, all } = unitRings;\n    const fusedRings = new Set();\n    const ringCombinations = combinations(fillSerial(new Array(rings.length)), 2);\n    for (let i = 0, il = ringCombinations.length; i < il; ++i) {\n        const rc = ringCombinations[i];\n        const r0 = all[rings[rc[0]]], r1 = all[rings[rc[1]]];\n        if (SortedArray.areIntersecting(r0, r1) &&\n            UnitRing.getAltId(unit, r0) === UnitRing.getAltId(unit, r1)) {\n            fusedRings.add(rings[rc[0]]);\n            fusedRings.add(rings[rc[1]]);\n        }\n    }\n    if (fusedRings.size) {\n        const filteredRings = [];\n        for (let i = 0, il = rings.length; i < il; ++i) {\n            if (!fusedRings.has(rings[i]))\n                filteredRings.push(rings[i]);\n        }\n        return filteredRings;\n    }\n    else {\n        return rings;\n    }\n}\nfunction getSaccharideComp(compId, model) {\n    return model.properties.saccharideComponentMap.get(compId);\n}\nexport function computeCarbohydrates(structure) {\n    // skip computation if there are no saccharide components in any model\n    if (structure.models.reduce((a, v) => a + v.properties.saccharideComponentMap.size, 0) === 0)\n        return EmptyCarbohydrates;\n    const links = [];\n    const terminalLinks = [];\n    const elements = [];\n    const partialElements = [];\n    const elementsWithRingMap = new Map();\n    function ringElementKey(residueIndex, unitId, altId) {\n        return `${residueIndex}|${unitId}|${altId}`;\n    }\n    function addRingElement(key, elementIndex) {\n        if (elementsWithRingMap.has(key))\n            elementsWithRingMap.get(key).push(elementIndex);\n        else\n            elementsWithRingMap.set(key, [elementIndex]);\n    }\n    function fixLinkDirection(iA, iB) {\n        Vec3.sub(elements[iA].geometry.direction, elements[iB].geometry.center, elements[iA].geometry.center);\n        Vec3.normalize(elements[iA].geometry.direction, elements[iA].geometry.direction);\n    }\n    const tmpV = Vec3();\n    function fixTerminalLinkDirection(iA, indexB, unitB) {\n        const c = unitB.conformation, geo = elements[iA].geometry;\n        Vec3.sub(geo.direction, c.position(unitB.elements[indexB], tmpV), geo.center);\n        Vec3.normalize(geo.direction, geo.direction);\n    }\n    // get carbohydrate elements and carbohydrate links induced by intra-residue bonds\n    for (let i = 0, il = structure.units.length; i < il; ++i) {\n        const unit = structure.units[i];\n        if (!Unit.isAtomic(unit))\n            continue;\n        const { model, rings } = unit;\n        const { chainAtomSegments, residueAtomSegments, atoms } = model.atomicHierarchy;\n        const { label_comp_id } = atoms;\n        const chainIt = Segmentation.transientSegments(chainAtomSegments, unit.elements);\n        const residueIt = Segmentation.transientSegments(residueAtomSegments, unit.elements);\n        let sugarResidueMap = void 0;\n        while (chainIt.hasNext) {\n            residueIt.setSegment(chainIt.move());\n            while (residueIt.hasNext) {\n                const { index: residueIndex } = residueIt.move();\n                const saccharideComp = getSaccharideComp(label_comp_id.value(residueAtomSegments.offsets[residueIndex]), model);\n                if (!saccharideComp)\n                    continue;\n                if (!sugarResidueMap) {\n                    sugarResidueMap = UnitRings.byFingerprintAndResidue(rings, SugarRingFps);\n                }\n                const sugarRings = filterFusedRings(rings, sugarResidueMap.get(residueIndex));\n                if (!sugarRings || !sugarRings.length) {\n                    partialElements.push({ unit, residueIndex, component: saccharideComp });\n                    continue;\n                }\n                const ringElements = [];\n                for (let j = 0, jl = sugarRings.length; j < jl; ++j) {\n                    const ringAtoms = rings.all[sugarRings[j]];\n                    const anomericCarbon = getAnomericCarbon(unit, ringAtoms);\n                    const ma = PrincipalAxes.calculateMomentsAxes(getPositions(unit, ringAtoms));\n                    const a = PrincipalAxes.calculateNormalizedAxes(ma);\n                    const center = Vec3.copy(Vec3(), a.origin);\n                    const normal = Vec3.copy(Vec3(), a.dirC);\n                    const direction = getDirection(Vec3(), unit, anomericCarbon, center);\n                    Vec3.orthogonalize(direction, normal, direction);\n                    const ringAltId = UnitRing.getAltId(unit, ringAtoms);\n                    const elementIndex = elements.length;\n                    ringElements.push(elementIndex);\n                    addRingElement(ringElementKey(residueIndex, unit.id, ringAltId), elementIndex);\n                    if (ringAltId)\n                        addRingElement(ringElementKey(residueIndex, unit.id, ''), elementIndex);\n                    elements.push({\n                        geometry: { center, normal, direction },\n                        component: saccharideComp,\n                        ringIndex: sugarRings[j],\n                        altId: ringAltId,\n                        unit, residueIndex\n                    });\n                }\n                // add carbohydrate links induced by intra-residue bonds\n                // (e.g. for structures from the PDB archive __before__ carbohydrate remediation)\n                const ringCombinations = combinations(fillSerial(new Array(sugarRings.length)), 2);\n                for (let j = 0, jl = ringCombinations.length; j < jl; ++j) {\n                    const rc = ringCombinations[j];\n                    const r0 = rings.all[sugarRings[rc[0]]], r1 = rings.all[sugarRings[rc[1]]];\n                    // 1,6 glycosidic links are distance 3 and 1,4 glycosidic links are distance 2\n                    if (IntAdjacencyGraph.areVertexSetsConnected(unit.bonds, r0, r1, 3)) {\n                        const re0 = ringElements[rc[0]];\n                        const re1 = ringElements[rc[1]];\n                        if (elements[re0].altId === elements[re1].altId) {\n                            // TODO handle better, for now fix both directions as it is unclear where the C1 atom is\n                            //      would need to know the path connecting the two rings\n                            fixLinkDirection(re0, re1);\n                            fixLinkDirection(re1, re0);\n                            links.push({ carbohydrateIndexA: re0, carbohydrateIndexB: re1 });\n                            links.push({ carbohydrateIndexA: re1, carbohydrateIndexB: re0 });\n                        }\n                    }\n                }\n            }\n        }\n    }\n    function getRingElementIndices(unit, index) {\n        return elementsWithRingMap.get(ringElementKey(unit.getResidueIndex(index), unit.id, getAltId(unit, index))) || [];\n    }\n    // add carbohydrate links induced by intra-unit bonds\n    // (e.g. for structures from the PDB archive __after__ carbohydrate remediation)\n    for (let i = 0, il = elements.length; i < il; ++i) {\n        const cA = elements[i];\n        const { unit } = cA;\n        for (let j = i + 1; j < il; ++j) {\n            const cB = elements[j];\n            if (unit !== cB.unit || cA.residueIndex === cB.residueIndex)\n                continue;\n            const rA = unit.rings.all[cA.ringIndex];\n            const rB = unit.rings.all[cB.ringIndex];\n            if (IntAdjacencyGraph.areVertexSetsConnected(unit.bonds, rA, rB, 3)) {\n                // TODO handle better, for now fix both directions as it is unclear where the C1 atom is\n                //      would need to know the path connecting the two rings\n                fixLinkDirection(i, j);\n                fixLinkDirection(j, i);\n                links.push({ carbohydrateIndexA: i, carbohydrateIndexB: j });\n                links.push({ carbohydrateIndexA: j, carbohydrateIndexB: i });\n            }\n        }\n    }\n    // get carbohydrate links induced by inter-unit bonds, that is\n    // inter monosaccharide links for structures from the\n    // PDB archive __before__ carbohydrate remediation\n    // plus terminal links for __before__ and __after__\n    for (let i = 0, il = structure.units.length; i < il; ++i) {\n        const unit = structure.units[i];\n        if (!Unit.isAtomic(unit))\n            continue;\n        structure.interUnitBonds.getConnectedUnits(unit.id).forEach(pairBonds => {\n            pairBonds.connectedIndices.forEach(indexA => {\n                pairBonds.getEdges(indexA).forEach(({ props, indexB }) => {\n                    if (!BondType.isCovalent(props.flag))\n                        return;\n                    const unitA = structure.unitMap.get(pairBonds.unitA);\n                    const unitB = structure.unitMap.get(pairBonds.unitB);\n                    const ringElementIndicesA = getRingElementIndices(unitA, indexA);\n                    const ringElementIndicesB = getRingElementIndices(unitB, indexB);\n                    if (ringElementIndicesA.length > 0 && ringElementIndicesB.length > 0) {\n                        const lA = ringElementIndicesA.length;\n                        const lB = ringElementIndicesB.length;\n                        for (let j = 0, jl = Math.max(lA, lB); j < jl; ++j) {\n                            const ringElementIndexA = ringElementIndicesA[Math.min(j, lA - 1)];\n                            const ringElementIndexB = ringElementIndicesB[Math.min(j, lB - 1)];\n                            const atomIdA = getAtomId(unitA, indexA);\n                            if (atomIdA.startsWith('O1') || atomIdA.startsWith('C1')) {\n                                fixLinkDirection(ringElementIndexA, ringElementIndexB);\n                            }\n                            links.push({\n                                carbohydrateIndexA: ringElementIndexA,\n                                carbohydrateIndexB: ringElementIndexB\n                            });\n                        }\n                    }\n                    else if (ringElementIndicesB.length === 0) {\n                        for (const ringElementIndexA of ringElementIndicesA) {\n                            const atomIdA = getAtomId(unitA, indexA);\n                            if (atomIdA.startsWith('O1') || atomIdA.startsWith('C1')) {\n                                fixTerminalLinkDirection(ringElementIndexA, indexB, unitB);\n                            }\n                            terminalLinks.push({\n                                carbohydrateIndex: ringElementIndexA,\n                                elementIndex: indexB,\n                                elementUnit: unitB,\n                                fromCarbohydrate: true\n                            });\n                        }\n                    }\n                    else if (ringElementIndicesA.length === 0) {\n                        for (const ringElementIndexB of ringElementIndicesB) {\n                            terminalLinks.push({\n                                carbohydrateIndex: ringElementIndexB,\n                                elementIndex: indexA,\n                                elementUnit: unitA,\n                                fromCarbohydrate: false\n                            });\n                        }\n                    }\n                });\n            });\n        });\n    }\n    return { links, terminalLinks, elements, partialElements, ...buildLookups(elements, links, terminalLinks) };\n}\nfunction buildLookups(elements, links, terminalLinks) {\n    function key(unit, element) {\n        return cantorPairing(unit.id, element);\n    }\n    function getIndices(map, unit, index) {\n        const indices = [];\n        const il = map.get(key(unit, index));\n        if (il !== undefined) {\n            for (const i of il)\n                arraySetAdd(indices, i);\n        }\n        return indices;\n    }\n    // elements\n    const elementsMap = new Map();\n    for (let i = 0, il = elements.length; i < il; ++i) {\n        const { unit, ringIndex } = elements[i];\n        const ring = unit.rings.all[ringIndex];\n        for (let j = 0, jl = ring.length; j < jl; ++j) {\n            const k = key(unit, unit.elements[ring[j]]);\n            const e = elementsMap.get(k);\n            if (e === undefined)\n                elementsMap.set(k, [i]);\n            else\n                e.push(i);\n        }\n    }\n    function getElementIndices(unit, index) {\n        return getIndices(elementsMap, unit, index);\n    }\n    // links\n    const linksMap = new Map();\n    for (let i = 0, il = links.length; i < il; ++i) {\n        const l = links[i];\n        const { unit, ringIndex } = elements[l.carbohydrateIndexA];\n        const ring = unit.rings.all[ringIndex];\n        for (let j = 0, jl = ring.length; j < jl; ++j) {\n            const k = key(unit, unit.elements[ring[j]]);\n            const e = linksMap.get(k);\n            if (e === undefined)\n                linksMap.set(k, [i]);\n            else\n                e.push(i);\n        }\n    }\n    function getLinkIndices(unit, index) {\n        return getIndices(linksMap, unit, index);\n    }\n    // terminal links\n    const terminalLinksMap = new Map();\n    for (let i = 0, il = terminalLinks.length; i < il; ++i) {\n        const { fromCarbohydrate, carbohydrateIndex, elementUnit, elementIndex } = terminalLinks[i];\n        if (fromCarbohydrate) {\n            const { unit, ringIndex } = elements[carbohydrateIndex];\n            const ring = unit.rings.all[ringIndex];\n            for (let j = 0, jl = ring.length; j < jl; ++j) {\n                const k = key(unit, unit.elements[ring[j]]);\n                const e = terminalLinksMap.get(k);\n                if (e === undefined)\n                    terminalLinksMap.set(k, [i]);\n                else\n                    e.push(i);\n            }\n        }\n        else {\n            const k = key(elementUnit, elementUnit.elements[elementIndex]);\n            const e = terminalLinksMap.get(k);\n            if (e === undefined)\n                terminalLinksMap.set(k, [i]);\n            else\n                e.push(i);\n        }\n    }\n    function getTerminalLinkIndices(unit, index) {\n        return getIndices(terminalLinksMap, unit, index);\n    }\n    return { getElementIndices, getLinkIndices, getTerminalLinkIndices };\n}\n","/**\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Sphere3D } from '../../../../mol-math/geometry.js';\nimport { BoundaryHelper } from '../../../../mol-math/geometry/boundary-helper.js';\nconst tmpSphere = Sphere3D();\nconst boundaryHelperCoarse = new BoundaryHelper('14');\nconst boundaryHelperFine = new BoundaryHelper('98');\nfunction getBoundaryHelper(count) {\n    return count > 500 ? boundaryHelperCoarse : boundaryHelperFine;\n}\nexport function computeStructureBoundary(s) {\n    const { units } = s;\n    const boundaryHelper = getBoundaryHelper(units.length);\n    boundaryHelper.reset();\n    for (let i = 0, _i = units.length; i < _i; i++) {\n        const u = units[i];\n        const invariantBoundary = u.boundary;\n        const o = u.conformation.operator;\n        if (o.isIdentity) {\n            boundaryHelper.includeSphere(invariantBoundary.sphere);\n        }\n        else {\n            Sphere3D.transform(tmpSphere, invariantBoundary.sphere, o.matrix);\n            boundaryHelper.includeSphere(tmpSphere);\n        }\n    }\n    boundaryHelper.finishedIncludeStep();\n    for (let i = 0, _i = units.length; i < _i; i++) {\n        const u = units[i];\n        const invariantBoundary = u.boundary;\n        const o = u.conformation.operator;\n        if (o.isIdentity) {\n            boundaryHelper.radiusSphere(invariantBoundary.sphere);\n        }\n        else {\n            Sphere3D.transform(tmpSphere, invariantBoundary.sphere, o.matrix);\n            boundaryHelper.radiusSphere(tmpSphere);\n        }\n    }\n    return { box: boundaryHelper.getBox(), sphere: boundaryHelper.getSphere() };\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { IntMap, SortedArray, Segmentation, Interval } from '../../../mol-data/int.js';\nimport { UniqueArray } from '../../../mol-data/generic.js';\nimport { SymmetryOperator } from '../../../mol-math/geometry/symmetry-operator.js';\nimport { Model } from '../model.js';\nimport { sort, arraySwap, hash1, sortArray, hashString, hashFnv32a } from '../../../mol-data/util.js';\nimport { StructureElement } from './element.js';\nimport { Unit } from './unit.js';\nimport { StructureLookup3D } from './util/lookup3d.js';\nimport { StructureSubsetBuilder } from './util/subset-builder.js';\nimport { InterUnitBonds, computeInterUnitBonds, Bond } from './unit/bonds.js';\nimport { StructureSymmetry } from './symmetry.js';\nimport { StructureProperties } from './properties.js';\nimport { computeCarbohydrates } from './carbohydrates/compute.js';\nimport { Vec3, Mat4 } from '../../../mol-math/linear-algebra.js';\nimport { idFactory } from '../../../mol-util/id-factory.js';\nimport { CustomProperties } from '../../custom-property.js';\nimport { StructureSelection } from '../query/selection.js';\nimport { CustomStructureProperty } from '../../../mol-model-props/common/custom-structure-property.js';\nimport { Task } from '../../../mol-task/index.js';\nimport { computeStructureBoundary } from './util/boundary.js';\nimport { getIntraUnitBondMapping, getSerialMapping } from './mapping.js';\nclass Structure {\n    subsetBuilder(isSorted) {\n        return new StructureSubsetBuilder(this, isSorted);\n    }\n    /** Count of all elements in the structure, i.e. the sum of the elements in the units */\n    get elementCount() {\n        return this.state.elementCount;\n    }\n    /** Count of all bonds (intra- and inter-unit) in the structure */\n    get bondCount() {\n        if (this.state.bondCount === -1) {\n            this.state.bondCount = (this.interUnitBonds.edgeCount / 2) + Bond.getIntraUnitBondCount(this);\n        }\n        return this.state.bondCount;\n    }\n    get hasCustomProperties() {\n        return !!this.state.customProps && this.state.customProps.all.length > 0;\n    }\n    get customPropertyDescriptors() {\n        if (!this.state.customProps)\n            this.state.customProps = new CustomProperties();\n        return this.state.customProps;\n    }\n    /**\n     * Property data unique to this instance of the structure.\n     */\n    get currentPropertyData() {\n        if (!this.state.propertyData)\n            this.state.propertyData = Object.create(null);\n        return this.state.propertyData;\n    }\n    /**\n     * Property data of the parent structure if it exists, currentPropertyData otherwise.\n     */\n    get inheritedPropertyData() {\n        return this.parent ? this.parent.currentPropertyData : this.currentPropertyData;\n    }\n    /** Count of all polymer residues in the structure */\n    get polymerResidueCount() {\n        if (this.state.polymerResidueCount === -1) {\n            this.state.polymerResidueCount = getPolymerResidueCount(this);\n        }\n        return this.state.polymerResidueCount;\n    }\n    /** Count of all polymer gaps in the structure */\n    get polymerGapCount() {\n        if (this.state.polymerGapCount === -1) {\n            this.state.polymerGapCount = getPolymerGapCount(this);\n        }\n        return this.state.polymerGapCount;\n    }\n    get polymerUnitCount() {\n        if (this.state.polymerUnitCount === -1) {\n            this.state.polymerUnitCount = getPolymerUnitCount(this);\n        }\n        return this.state.polymerUnitCount;\n    }\n    get uniqueElementCount() {\n        if (this.state.uniqueElementCount === -1) {\n            this.state.uniqueElementCount = getUniqueElementCount(this);\n        }\n        return this.state.uniqueElementCount;\n    }\n    get atomicResidueCount() {\n        if (this.state.atomicResidueCount === -1) {\n            this.state.atomicResidueCount = getAtomicResidueCount(this);\n        }\n        return this.state.atomicResidueCount;\n    }\n    /**\n     * True if any model the structure is based on is coarse grained.\n     * @see Model.isCoarseGrained\n     */\n    get isCoarseGrained() {\n        return this.models.some(m => Model.isCoarseGrained(m));\n    }\n    get isEmpty() {\n        return this.units.length === 0;\n    }\n    get hashCode() {\n        if (this.state.hashCode !== -1)\n            return this.state.hashCode;\n        return this.computeHash();\n    }\n    /** Hash based on all unit.id values in the structure, reflecting the units transformation */\n    get transformHash() {\n        if (this.state.transformHash !== -1)\n            return this.state.transformHash;\n        this.state.transformHash = hashFnv32a(this.units.map(u => u.id));\n        return this.state.transformHash;\n    }\n    computeHash() {\n        let hash = 23;\n        for (let i = 0, _i = this.units.length; i < _i; i++) {\n            const u = this.units[i];\n            hash = (31 * hash + u.id) | 0;\n            hash = (31 * hash + SortedArray.hashCode(u.elements)) | 0;\n        }\n        hash = (31 * hash + this.elementCount) | 0;\n        hash = hash1(hash);\n        if (hash === -1)\n            hash = 0;\n        this.state.hashCode = hash;\n        return hash;\n    }\n    /** Returns a new element location iterator */\n    elementLocations() {\n        return new Structure.ElementLocationIterator(this);\n    }\n    /** The parent or itself in case this is the root */\n    get root() {\n        var _a;\n        return (_a = this.state.parent) !== null && _a !== void 0 ? _a : this;\n    }\n    /** The root/top-most parent or `undefined` in case this is the root */\n    get parent() {\n        return this.state.parent;\n    }\n    /**\n     * Conformation transformation that was applied to every unit of this structure.\n     *\n     * Coordinate system applies to the *current* structure only.\n     * A parent structure can have a different coordinate system and thefore it has to be composed \"manualy\"\n     * by the consumer.\n     */\n    get coordinateSystem() {\n        return this.state.coordinateSystem;\n    }\n    get label() {\n        return this.state.label;\n    }\n    get boundary() {\n        if (this.state.boundary)\n            return this.state.boundary;\n        this.state.boundary = computeStructureBoundary(this);\n        return this.state.boundary;\n    }\n    get lookup3d() {\n        if (this.state.lookup3d)\n            return this.state.lookup3d;\n        this.state.lookup3d = new StructureLookup3D(this);\n        return this.state.lookup3d;\n    }\n    get interUnitBonds() {\n        if (this.state.interUnitBonds)\n            return this.state.interUnitBonds;\n        if (this.parent && this.state.dynamicBonds === this.parent.state.dynamicBonds &&\n            this.parent.state.interUnitBonds && this.parent.state.interUnitBonds.edgeCount === 0) {\n            // no need to compute InterUnitBonds if parent's ones are empty\n            this.state.interUnitBonds = new InterUnitBonds(new Map());\n        }\n        else {\n            this.state.interUnitBonds = computeInterUnitBonds(this, {\n                ignoreWater: !this.dynamicBonds,\n                ignoreIon: !this.dynamicBonds,\n                validUnit: this.state.interBondsValidUnit,\n                validUnitPair: this.state.interBondsValidUnitPair,\n            });\n        }\n        return this.state.interUnitBonds;\n    }\n    get dynamicBonds() {\n        return this.state.dynamicBonds;\n    }\n    get interBondsValidUnit() {\n        return this.state.interBondsValidUnit;\n    }\n    get interBondsValidUnitPair() {\n        return this.state.interBondsValidUnitPair;\n    }\n    get unitSymmetryGroups() {\n        if (this.state.unitSymmetryGroups)\n            return this.state.unitSymmetryGroups;\n        this.state.unitSymmetryGroups = StructureSymmetry.computeTransformGroups(this);\n        return this.state.unitSymmetryGroups;\n    }\n    /** Maps unit.id to index of SymmetryGroup in unitSymmetryGroups array */\n    get unitSymmetryGroupsIndexMap() {\n        if (this.state.unitSymmetryGroupsIndexMap)\n            return this.state.unitSymmetryGroupsIndexMap;\n        this.state.unitSymmetryGroupsIndexMap = Unit.SymmetryGroup.getUnitSymmetryGroupsIndexMap(this.unitSymmetryGroups);\n        return this.state.unitSymmetryGroupsIndexMap;\n    }\n    get carbohydrates() {\n        if (this.state.carbohydrates)\n            return this.state.carbohydrates;\n        this.state.carbohydrates = computeCarbohydrates(this);\n        return this.state.carbohydrates;\n    }\n    get models() {\n        if (this.state.models)\n            return this.state.models;\n        this.state.models = getModels(this);\n        return this.state.models;\n    }\n    get uniqueResidueNames() {\n        return this.state.uniqueResidueNames\n            || (this.state.uniqueResidueNames = getUniqueResidueNames(this));\n    }\n    get uniqueElementSymbols() {\n        return this.state.uniqueElementSymbols\n            || (this.state.uniqueElementSymbols = getUniqueElementSymbols(this));\n    }\n    get entityIndices() {\n        return this.state.entityIndices\n            || (this.state.entityIndices = getEntityIndices(this));\n    }\n    get uniqueAtomicResidueIndices() {\n        return this.state.uniqueAtomicResidueIndices\n            || (this.state.uniqueAtomicResidueIndices = getUniqueAtomicResidueIndices(this));\n    }\n    /** Contains only atomic units */\n    get isAtomic() {\n        for (const u of this.units)\n            if (!Unit.isAtomic(u))\n                return false;\n        return true;\n    }\n    /** Contains some atomic units */\n    get hasAtomic() {\n        for (const u of this.units)\n            if (Unit.isAtomic(u))\n                return true;\n        return false;\n    }\n    /** Contains only coarse units */\n    get isCoarse() {\n        for (const u of this.units)\n            if (!Unit.isCoarse(u))\n                return false;\n        return true;\n    }\n    /** Contains some coarse units */\n    get hasCoarse() {\n        for (const u of this.units)\n            if (Unit.isCoarse(u))\n                return true;\n        return false;\n    }\n    /**\n     * Provides mapping for serial element indices accross all units.\n     *\n     * Note that this is especially costly for structures with many units that are grouped\n     * into few symmetry groups. Use only when needed and prefer `StructureElement`\n     * to address elements in a structure.\n     */\n    get serialMapping() {\n        return this.state.serialMapping || (this.state.serialMapping = getSerialMapping(this));\n    }\n    get intraUnitBondMapping() {\n        return this.state.intraUnitBondMapping || (this.state.intraUnitBondMapping = getIntraUnitBondMapping(this));\n    }\n    /**\n     * If the structure is based on a single model or has a master-/representative-model, return it.\n     * Otherwise throw an exception.\n     */\n    get model() {\n        if (this.state.model)\n            return this.state.model;\n        if (this.state.representativeModel)\n            return this.state.representativeModel;\n        if (this.state.masterModel)\n            return this.state.masterModel;\n        const models = this.models;\n        if (models.length > 1) {\n            throw new Error('The structure is based on multiple models and has neither a master- nor a representative-model.');\n        }\n        this.state.model = models[0];\n        return this.state.model;\n    }\n    /** The master-model, other models can have bonds to it  */\n    get masterModel() {\n        return this.state.masterModel;\n    }\n    /** A representative model, e.g. the first model of a trajectory */\n    get representativeModel() {\n        return this.state.representativeModel;\n    }\n    hasElement(e) {\n        if (!this.unitMap.has(e.unit.id))\n            return false;\n        return SortedArray.has(this.unitMap.get(e.unit.id).elements, e.element);\n    }\n    getModelIndex(m) {\n        return this.models.indexOf(m);\n    }\n    remapModel(m) {\n        const { dynamicBonds, interUnitBonds, parent } = this.state;\n        const units = [];\n        for (const ug of this.unitSymmetryGroups) {\n            const unit = ug.units[0].remapModel(m, dynamicBonds);\n            units.push(unit);\n            for (let i = 1, il = ug.units.length; i < il; ++i) {\n                const u = ug.units[i];\n                units.push(u.remapModel(m, dynamicBonds, unit.props));\n            }\n        }\n        return Structure.create(units, {\n            parent: parent === null || parent === void 0 ? void 0 : parent.remapModel(m),\n            label: this.label,\n            interUnitBonds: dynamicBonds ? undefined : interUnitBonds,\n            dynamicBonds,\n            interBondsValidUnit: this.state.interBondsValidUnit,\n            interBondsValidUnitPair: this.state.interBondsValidUnitPair,\n            coordinateSystem: this.state.coordinateSystem,\n            masterModel: this.state.masterModel,\n            representativeModel: this.state.representativeModel,\n        });\n    }\n    /**\n     * For `structure` with `parent` this returns a proxy that\n     * targets `parent` and has `structure` attached as a child.\n     */\n    asParent() {\n        if (this._proxy)\n            return this._proxy;\n        if (this.parent) {\n            const p = this.parent.coordinateSystem.isIdentity ? this.parent : Structure.transform(this.parent, this.parent.coordinateSystem.inverse);\n            const s = this.coordinateSystem.isIdentity ? p : Structure.transform(p, this.coordinateSystem.matrix);\n            this._proxy = new Structure(s.units, s.unitMap, s.unitIndexMap, { ...s.state, dynamicBonds: this.dynamicBonds }, { child: this, target: this.parent });\n        }\n        else {\n            this._proxy = this;\n        }\n        return this._proxy;\n    }\n    get child() {\n        return this._child;\n    }\n    /** Get the proxy target. Usefull for equality checks. */\n    get target() {\n        var _a;\n        return (_a = this._target) !== null && _a !== void 0 ? _a : this;\n    }\n    /**\n     * @param units Array of all units in the structure, sorted by unit.id\n     * @param unitMap Maps unit.id to index of unit in units array\n     * @param unitIndexMap Array of all units in the structure, sorted by unit.id\n     */\n    constructor(units, unitMap, unitIndexMap, state, asParent) {\n        this.units = units;\n        this.unitMap = unitMap;\n        this.unitIndexMap = unitIndexMap;\n        this.state = state;\n        // always assign to ensure object shape\n        this._child = asParent === null || asParent === void 0 ? void 0 : asParent.child;\n        this._target = asParent === null || asParent === void 0 ? void 0 : asParent.target;\n        this._proxy = undefined;\n    }\n}\nfunction cmpUnits(units, i, j) {\n    return units[i].id - units[j].id;\n}\nfunction getModels(s) {\n    const { units } = s;\n    const arr = UniqueArray.create();\n    for (const u of units) {\n        UniqueArray.add(arr, u.model.id, u.model);\n    }\n    return arr.array;\n}\nfunction getUniqueResidueNames(s) {\n    const { microheterogeneityCompIds } = StructureProperties.residue;\n    const names = new Set();\n    const loc = StructureElement.Location.create(s);\n    for (const unitGroup of s.unitSymmetryGroups) {\n        const unit = unitGroup.units[0];\n        // TODO: support coarse unit?\n        if (!Unit.isAtomic(unit))\n            continue;\n        const residues = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, unit.elements);\n        loc.unit = unit;\n        while (residues.hasNext) {\n            const seg = residues.move();\n            loc.element = unit.elements[seg.start];\n            const compIds = microheterogeneityCompIds(loc);\n            for (const compId of compIds)\n                names.add(compId);\n        }\n    }\n    return names;\n}\nfunction getUniqueElementSymbols(s) {\n    const prop = StructureProperties.atom.type_symbol;\n    const symbols = new Set();\n    const loc = StructureElement.Location.create(s);\n    for (const unitGroup of s.unitSymmetryGroups) {\n        const unit = unitGroup.units[0];\n        if (!Unit.isAtomic(unit))\n            continue;\n        loc.unit = unit;\n        for (let i = 0, il = unit.elements.length; i < il; ++i) {\n            loc.element = unit.elements[i];\n            symbols.add(prop(loc));\n        }\n    }\n    return symbols;\n}\nfunction getEntityIndices(structure) {\n    const { units } = structure;\n    const l = StructureElement.Location.create(structure);\n    const keys = UniqueArray.create();\n    for (const unit of units) {\n        const prop = unit.kind === Unit.Kind.Atomic ? StructureProperties.entity.key : StructureProperties.coarse.entityKey;\n        l.unit = unit;\n        const elements = unit.elements;\n        const chainsIt = Segmentation.transientSegments(unit.model.atomicHierarchy.chainAtomSegments, elements);\n        while (chainsIt.hasNext) {\n            const chainSegment = chainsIt.move();\n            l.element = elements[chainSegment.start];\n            const key = prop(l);\n            UniqueArray.add(keys, key, key);\n        }\n    }\n    sortArray(keys.array);\n    return keys.array;\n}\nfunction getUniqueAtomicResidueIndices(structure) {\n    const map = new Map();\n    const modelIds = [];\n    const unitGroups = structure.unitSymmetryGroups;\n    for (const unitGroup of unitGroups) {\n        const unit = unitGroup.units[0];\n        if (!Unit.isAtomic(unit))\n            continue;\n        let uniqueResidues;\n        if (map.has(unit.model.id))\n            uniqueResidues = map.get(unit.model.id);\n        else {\n            uniqueResidues = UniqueArray.create();\n            modelIds.push(unit.model.id);\n            map.set(unit.model.id, uniqueResidues);\n        }\n        const residues = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, unit.elements);\n        while (residues.hasNext) {\n            const seg = residues.move();\n            UniqueArray.add(uniqueResidues, seg.index, seg.index);\n        }\n    }\n    const ret = new Map();\n    for (const id of modelIds) {\n        const array = map.get(id).array;\n        sortArray(array);\n        ret.set(id, array);\n    }\n    return ret;\n}\nfunction getUniqueElementCount(structure) {\n    const { unitSymmetryGroups } = structure;\n    let uniqueElementCount = 0;\n    for (let i = 0, _i = unitSymmetryGroups.length; i < _i; i++) {\n        uniqueElementCount += unitSymmetryGroups[i].elements.length;\n    }\n    return uniqueElementCount;\n}\nfunction getPolymerResidueCount(structure) {\n    const { units } = structure;\n    let polymerResidueCount = 0;\n    for (let i = 0, _i = units.length; i < _i; i++) {\n        polymerResidueCount += units[i].polymerElements.length;\n    }\n    return polymerResidueCount;\n}\nfunction getPolymerGapCount(structure) {\n    const { units } = structure;\n    let polymerGapCount = 0;\n    for (let i = 0, _i = units.length; i < _i; i++) {\n        polymerGapCount += units[i].gapElements.length / 2;\n    }\n    return polymerGapCount;\n}\nfunction getPolymerUnitCount(structure) {\n    const { units } = structure;\n    let polymerUnitCount = 0;\n    for (let i = 0, _i = units.length; i < _i; i++) {\n        if (units[i].polymerElements.length > 0)\n            polymerUnitCount += 1;\n    }\n    return polymerUnitCount;\n}\nfunction getAtomicResidueCount(structure) {\n    const { units } = structure;\n    let atomicResidueCount = 0;\n    for (let i = 0, _i = units.length; i < _i; i++) {\n        const unit = units[i];\n        if (!Unit.isAtomic(unit))\n            continue;\n        const { elements, residueIndex } = unit;\n        let idx = -1;\n        let prevIdx = -1;\n        for (let j = 0, jl = elements.length; j < jl; ++j) {\n            idx = residueIndex[elements[j]];\n            if (idx !== prevIdx) {\n                atomicResidueCount += 1;\n                prevIdx = idx;\n            }\n        }\n    }\n    return atomicResidueCount;\n}\n(function (Structure) {\n    Structure.Empty = create([]);\n    function Loci(structure) {\n        return { kind: 'structure-loci', structure };\n    }\n    Structure.Loci = Loci;\n    function toStructureElementLoci(structure) {\n        const elements = [];\n        for (const unit of structure.units) {\n            elements.push({ unit, indices: Interval.ofBounds(0, unit.elements.length) });\n        }\n        return StructureElement.Loci(structure, elements);\n    }\n    Structure.toStructureElementLoci = toStructureElementLoci;\n    function toSubStructureElementLoci(parent, structure) {\n        return StructureSelection.toLociWithSourceUnits(StructureSelection.Singletons(parent, structure));\n    }\n    Structure.toSubStructureElementLoci = toSubStructureElementLoci;\n    function isLoci(x) {\n        return !!x && x.kind === 'structure-loci';\n    }\n    Structure.isLoci = isLoci;\n    function areLociEqual(a, b) {\n        return a.structure === b.structure;\n    }\n    Structure.areLociEqual = areLociEqual;\n    function isLociEmpty(loci) {\n        return loci.structure.isEmpty;\n    }\n    Structure.isLociEmpty = isLociEmpty;\n    function remapLoci(loci, structure) {\n        if (structure === loci.structure)\n            return loci;\n        return Loci(structure);\n    }\n    Structure.remapLoci = remapLoci;\n    function create(units, props = {}) {\n        // init units\n        const unitMap = IntMap.Mutable();\n        const unitIndexMap = IntMap.Mutable();\n        let elementCount = 0;\n        let isSorted = true;\n        let lastId = units.length > 0 ? units[0].id : 0;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const u = units[i];\n            unitMap.set(u.id, u);\n            elementCount += u.elements.length;\n            if (u.id < lastId)\n                isSorted = false;\n            lastId = u.id;\n        }\n        if (!isSorted)\n            sort(units, 0, units.length, cmpUnits, arraySwap);\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            unitIndexMap.set(units[i].id, i);\n        }\n        // initial state\n        const state = {\n            hashCode: -1,\n            transformHash: -1,\n            elementCount,\n            bondCount: -1,\n            uniqueElementCount: -1,\n            atomicResidueCount: -1,\n            polymerResidueCount: -1,\n            polymerGapCount: -1,\n            polymerUnitCount: -1,\n            dynamicBonds: false,\n            coordinateSystem: SymmetryOperator.Default,\n            label: ''\n        };\n        // handle props\n        if (props.parent)\n            state.parent = props.parent.parent || props.parent;\n        if (props.interUnitBonds)\n            state.interUnitBonds = props.interUnitBonds;\n        if (props.interBondsValidUnit)\n            state.interBondsValidUnit = props.interBondsValidUnit;\n        else if (props.parent)\n            state.interBondsValidUnit = props.parent.interBondsValidUnit;\n        if (props.interBondsValidUnitPair)\n            state.interBondsValidUnitPair = props.interBondsValidUnitPair;\n        else if (props.parent)\n            state.interBondsValidUnitPair = props.parent.interBondsValidUnitPair;\n        if (props.dynamicBonds)\n            state.dynamicBonds = props.dynamicBonds;\n        else if (props.parent)\n            state.dynamicBonds = props.parent.dynamicBonds;\n        if (props.coordinateSystem)\n            state.coordinateSystem = props.coordinateSystem;\n        else if (props.parent)\n            state.coordinateSystem = props.parent.coordinateSystem;\n        if (props.label)\n            state.label = props.label;\n        else if (props.parent)\n            state.label = props.parent.label;\n        if (props.masterModel)\n            state.masterModel = props.masterModel;\n        else if (props.parent)\n            state.masterModel = props.parent.masterModel;\n        if (props.representativeModel)\n            state.representativeModel = props.representativeModel;\n        else if (props.parent)\n            state.representativeModel = props.parent.representativeModel;\n        return new Structure(units, unitMap, unitIndexMap, state);\n    }\n    Structure.create = create;\n    async function ofTrajectory(trajectory, ctx) {\n        if (trajectory.frameCount === 0)\n            return Structure.Empty;\n        const units = [];\n        let first = void 0;\n        let count = 0;\n        for (let i = 0, il = trajectory.frameCount; i < il; ++i) {\n            const frame = await Task.resolveInContext(trajectory.getFrameAtIndex(i), ctx);\n            if (!first)\n                first = frame;\n            const structure = ofModel(frame);\n            for (let j = 0, jl = structure.units.length; j < jl; ++j) {\n                const u = structure.units[j];\n                const invariantId = u.invariantId + count;\n                const chainGroupId = u.chainGroupId + count;\n                const newUnit = Unit.create(units.length, invariantId, chainGroupId, u.traits, u.kind, u.model, u.conformation.operator, u.elements);\n                units.push(newUnit);\n            }\n            count = units.length;\n        }\n        return create(units, { representativeModel: first, label: first.label });\n    }\n    Structure.ofTrajectory = ofTrajectory;\n    /**\n     * Construct a Structure from a model.\n     *\n     * Generally, a single unit corresponds to a single chain, with the exception\n     * of consecutive \"single atom chains\" with same entity_id and same auth_asym_id.\n     */\n    function ofModel(model, props = {}) {\n        const chains = model.atomicHierarchy.chainAtomSegments;\n        const { index } = model.atomicHierarchy;\n        const { auth_asym_id } = model.atomicHierarchy.chains;\n        const { atomicChainOperatorMappinng } = model;\n        const builder = new StructureBuilder({ label: model.label, ...props });\n        for (let c = 0; c < chains.count; c++) {\n            const operator = atomicChainOperatorMappinng.get(c) || SymmetryOperator.Default;\n            const start = chains.offsets[c];\n            let isMultiChain = false;\n            let isWater = false;\n            if (isWaterChain(model, c)) {\n                isWater = true;\n                // merge consecutive water chains\n                while (c + 1 < chains.count && isWaterChain(model, c + 1)) {\n                    const op1 = atomicChainOperatorMappinng.get(c);\n                    const op2 = atomicChainOperatorMappinng.get(c + 1);\n                    if (op1 !== op2)\n                        break;\n                    isMultiChain = true;\n                    c++;\n                }\n            }\n            else {\n                // merge consecutive \"single atom chains\" with same entity_id and auth_asym_id\n                while (c + 1 < chains.count\n                    && chains.offsets[c + 1] - chains.offsets[c] === 1\n                    && chains.offsets[c + 2] - chains.offsets[c + 1] === 1) {\n                    const e1 = index.getEntityFromChain(c);\n                    const e2 = index.getEntityFromChain(c + 1);\n                    if (e1 !== e2)\n                        break;\n                    const a1 = auth_asym_id.value(c);\n                    const a2 = auth_asym_id.value(c + 1);\n                    if (a1 !== a2)\n                        break;\n                    const op1 = atomicChainOperatorMappinng.get(c);\n                    const op2 = atomicChainOperatorMappinng.get(c + 1);\n                    if (op1 !== op2)\n                        break;\n                    isMultiChain = true;\n                    c++;\n                }\n            }\n            const elements = SortedArray.ofBounds(start, chains.offsets[c + 1]);\n            let traits = Unit.Trait.None;\n            if (isMultiChain)\n                traits |= Unit.Trait.MultiChain;\n            if (isWater)\n                traits |= Unit.Trait.Water;\n            if (Model.isCoarseGrained(model))\n                traits |= Unit.Trait.CoarseGrained;\n            builder.addUnit(Unit.Kind.Atomic, model, operator, elements, traits);\n        }\n        const cs = model.coarseHierarchy;\n        if (cs.isDefined) {\n            if (cs.spheres.count > 0) {\n                addCoarseUnits(builder, model, model.coarseHierarchy.spheres, Unit.Kind.Spheres);\n            }\n            if (cs.gaussians.count > 0) {\n                addCoarseUnits(builder, model, model.coarseHierarchy.gaussians, Unit.Kind.Gaussians);\n            }\n        }\n        return builder.getStructure();\n    }\n    Structure.ofModel = ofModel;\n    function isWaterChain(model, chainIndex) {\n        const e = model.atomicHierarchy.index.getEntityFromChain(chainIndex);\n        return model.entities.data.type.value(e) === 'water';\n    }\n    function addCoarseUnits(builder, model, elements, kind) {\n        const { chainElementSegments } = elements;\n        for (let cI = 0; cI < chainElementSegments.count; cI++) {\n            const elements = SortedArray.ofBounds(chainElementSegments.offsets[cI], chainElementSegments.offsets[cI + 1]);\n            builder.addUnit(kind, model, SymmetryOperator.Default, elements, Unit.Trait.None);\n        }\n    }\n    function transform(s, transform) {\n        if (Mat4.isIdentity(transform))\n            return s;\n        if (!Mat4.isRotationAndTranslation(transform, SymmetryOperator.RotationTranslationEpsilon))\n            throw new Error('Only rotation/translation combination can be applied.');\n        const units = [];\n        for (const u of s.units) {\n            const old = u.conformation.operator;\n            const op = SymmetryOperator.create(old.name, transform, old);\n            units.push(u.applyOperator(u.id, op));\n        }\n        const cs = s.coordinateSystem;\n        const newCS = SymmetryOperator.compose(SymmetryOperator.create(cs.name, transform, cs), cs);\n        return create(units, { parent: s, coordinateSystem: newCS });\n    }\n    Structure.transform = transform;\n    function instances(s, transforms) {\n        for (const t of transforms) {\n            if (!Mat4.isRotationAndTranslation(t, SymmetryOperator.RotationTranslationEpsilon)) {\n                throw new Error('Only rotation/translation combination can be applied.');\n            }\n        }\n        const units = [];\n        let id = 0;\n        for (const u of s.units) {\n            const old = u.conformation.operator;\n            for (const transform of transforms) {\n                if (Mat4.isIdentity(transform)) {\n                    units.push(u);\n                    continue;\n                }\n                const op = SymmetryOperator.create(old.name, transform, old);\n                units.push(u.applyOperator(id++, op));\n            }\n        }\n        return create(units, { parent: s });\n    }\n    Structure.instances = instances;\n    class StructureBuilder {\n        beginChainGroup() {\n            this.chainGroupId++;\n            this.inChainGroup = true;\n        }\n        endChainGroup() {\n            this.inChainGroup = false;\n        }\n        addUnit(kind, model, operator, elements, traits, invariantId) {\n            if (invariantId === undefined)\n                invariantId = this.invariantId();\n            const chainGroupId = this.inChainGroup ? this.chainGroupId : ++this.chainGroupId;\n            const unit = Unit.create(this.units.length, invariantId, chainGroupId, traits, kind, model, operator, elements);\n            return this.add(unit);\n        }\n        copyUnit(unit, options) {\n            let invariantId = options === null || options === void 0 ? void 0 : options.invariantId;\n            if (invariantId === undefined)\n                invariantId = this.invariantId();\n            const chainGroupId = this.inChainGroup ? this.chainGroupId : ++this.chainGroupId;\n            const newUnit = unit.getCopy(this.units.length, invariantId, chainGroupId, options);\n            return this.add(newUnit);\n        }\n        add(unit) {\n            // this is to avoid adding many identical single atom units,\n            // for example, from 'degenerate' spacegroups\n            // - Diamond (COD 9008564)\n            if (unit.elements.length === 1) {\n                unit.conformation.position(unit.elements[0], this.p);\n                const hash = [unit.invariantId, this.p[0], this.p[1], this.p[2]].join('|');\n                if (this.singleElementUnits.has(hash)) {\n                    return this.singleElementUnits.get(hash);\n                }\n                else {\n                    this.singleElementUnits.set(hash, unit);\n                }\n            }\n            this.units.push(unit);\n            return unit;\n        }\n        addWithOperator(unit, operator, dontCompose = false) {\n            return this.add(unit.applyOperator(this.units.length, operator, dontCompose));\n        }\n        getStructure() {\n            return create(this.units, this.props);\n        }\n        get isEmpty() {\n            return this.units.length === 0;\n        }\n        constructor(props = {}) {\n            this.props = props;\n            this.units = [];\n            this.invariantId = idFactory();\n            this.chainGroupId = -1;\n            this.inChainGroup = false;\n            this.p = Vec3();\n            this.singleElementUnits = new Map();\n        }\n    }\n    Structure.StructureBuilder = StructureBuilder;\n    function Builder(props = {}) {\n        return new StructureBuilder(props);\n    }\n    Structure.Builder = Builder;\n    function hashCode(s) {\n        return s.hashCode;\n    }\n    Structure.hashCode = hashCode;\n    /** Hash based on all unit.model conformation values in the structure */\n    function conformationHash(s) {\n        return hashString(s.units.map(u => Unit.conformationId(u)).join('|'));\n    }\n    Structure.conformationHash = conformationHash;\n    // TODO: there should be a version that properly supports partitioned units\n    function areUnitIdsEqual(a, b) {\n        if (a === b)\n            return true;\n        if (a.elementCount !== b.elementCount)\n            return false;\n        const len = a.units.length;\n        if (len !== b.units.length)\n            return false;\n        for (let i = 0; i < len; i++) {\n            if (a.units[i].id !== b.units[i].id)\n                return false;\n        }\n        return true;\n    }\n    Structure.areUnitIdsEqual = areUnitIdsEqual;\n    function areUnitIdsAndIndicesEqual(a, b) {\n        if (a === b)\n            return true;\n        if (!areUnitIdsEqual(a, b))\n            return false;\n        for (let i = 0, il = a.units.length; i < il; i++) {\n            if (!SortedArray.areEqual(a.units[i].elements, b.units[i].elements))\n                return false;\n        }\n        return true;\n    }\n    Structure.areUnitIdsAndIndicesEqual = areUnitIdsAndIndicesEqual;\n    function areHierarchiesEqual(a, b) {\n        if (a.hashCode !== b.hashCode)\n            return false;\n        const len = a.models.length;\n        if (len !== b.models.length)\n            return false;\n        for (let i = 0; i < len; i++) {\n            if (!Model.areHierarchiesEqual(a.models[i], b.models[i]))\n                return false;\n        }\n        return true;\n    }\n    Structure.areHierarchiesEqual = areHierarchiesEqual;\n    function areEquivalent(a, b) {\n        return a === b || (a.hashCode === b.hashCode &&\n            StructureSymmetry.areTransformGroupsEquivalent(a.unitSymmetryGroups, b.unitSymmetryGroups));\n    }\n    Structure.areEquivalent = areEquivalent;\n    /** Check if the structures or their parents are equivalent */\n    function areRootsEquivalent(a, b) {\n        return areEquivalent(a.root, b.root);\n    }\n    Structure.areRootsEquivalent = areRootsEquivalent;\n    /** Check if the structures or their parents are equal */\n    function areRootsEqual(a, b) {\n        return a.root === b.root;\n    }\n    Structure.areRootsEqual = areRootsEqual;\n    class ElementLocationIterator {\n        move() {\n            this.advance();\n            this.current.element = this.elements[this.idx];\n            return this.current;\n        }\n        advance() {\n            if (this.idx < this.maxIdx) {\n                this.idx++;\n                if (this.idx === this.maxIdx)\n                    this.hasNext = this.unitIndex + 1 < this.structure.units.length;\n                return;\n            }\n            this.idx = 0;\n            this.unitIndex++;\n            if (this.unitIndex >= this.structure.units.length) {\n                this.hasNext = false;\n                return;\n            }\n            this.current.unit = this.structure.units[this.unitIndex];\n            this.elements = this.current.unit.elements;\n            this.maxIdx = this.elements.length - 1;\n            if (this.maxIdx === 0) {\n                this.hasNext = this.unitIndex + 1 < this.structure.units.length;\n            }\n        }\n        constructor(structure) {\n            this.structure = structure;\n            this.unitIndex = 0;\n            this.maxIdx = 0;\n            this.idx = -1;\n            this.current = StructureElement.Location.create(structure);\n            this.hasNext = structure.elementCount > 0;\n            if (this.hasNext) {\n                this.elements = structure.units[0].elements;\n                this.maxIdx = this.elements.length - 1;\n                this.current.unit = structure.units[0];\n            }\n        }\n    }\n    Structure.ElementLocationIterator = ElementLocationIterator;\n    const distVec = Vec3();\n    function unitElementMinDistance(unit, p, eRadius) {\n        const { elements, conformation: c } = unit, dV = distVec;\n        let minD = Number.MAX_VALUE;\n        for (let i = 0, _i = elements.length; i < _i; i++) {\n            const e = elements[i];\n            const d = Vec3.distance(p, c.position(e, dV)) - eRadius - c.r(e);\n            if (d < minD)\n                minD = d;\n        }\n        return minD;\n    }\n    function minDistanceToPoint(s, point, radius) {\n        const { units } = s;\n        let minD = Number.MAX_VALUE;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const unit = units[i];\n            const d = unitElementMinDistance(unit, point, radius);\n            if (d < minD)\n                minD = d;\n        }\n        return minD;\n    }\n    Structure.minDistanceToPoint = minDistanceToPoint;\n    const distPivot = Vec3();\n    function distance(a, b) {\n        if (a.elementCount === 0 || b.elementCount === 0)\n            return 0;\n        const { units } = a;\n        let minD = Number.MAX_VALUE;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const unit = units[i];\n            const { elements, conformation: c } = unit;\n            for (let i = 0, _i = elements.length; i < _i; i++) {\n                const e = elements[i];\n                const d = minDistanceToPoint(b, c.position(e, distPivot), c.r(e));\n                if (d < minD)\n                    minD = d;\n            }\n        }\n        return minD;\n    }\n    Structure.distance = distance;\n    function elementDescription(s) {\n        return s.elementCount === 1 ? '1 element' : `${s.elementCount} elements`;\n    }\n    Structure.elementDescription = elementDescription;\n    function validUnitPair(s, a, b) {\n        return s.masterModel\n            ? a.model === b.model || a.model === s.masterModel || b.model === s.masterModel\n            : a.model === b.model;\n    }\n    Structure.validUnitPair = validUnitPair;\n    /**\n     * Iterate over all unit pairs of a structure and invokes callback for valid units\n     * and unit pairs if their boundaries are within a max distance.\n     */\n    function eachUnitPair(structure, callback, props) {\n        const { maxRadius, validUnit, validUnitPair } = props;\n        if (!structure.units.some(u => validUnit(u)))\n            return;\n        const lookup = structure.lookup3d;\n        const imageCenter = Vec3();\n        for (const unitA of structure.units) {\n            if (!validUnit(unitA))\n                continue;\n            const bs = unitA.boundary.sphere;\n            Vec3.transformMat4(imageCenter, bs.center, unitA.conformation.operator.matrix);\n            const closeUnits = lookup.findUnitIndices(imageCenter[0], imageCenter[1], imageCenter[2], bs.radius + maxRadius);\n            for (let i = 0; i < closeUnits.count; i++) {\n                const unitB = structure.units[closeUnits.indices[i]];\n                if (unitA.id >= unitB.id)\n                    continue;\n                if (!validUnit(unitB) || !validUnitPair(unitA, unitB))\n                    continue;\n                if (unitB.elements.length >= unitA.elements.length)\n                    callback(unitA, unitB);\n                else\n                    callback(unitB, unitA);\n            }\n        }\n    }\n    Structure.eachUnitPair = eachUnitPair;\n    ;\n    function eachAtomicHierarchyElement(structure, { chain, residue, atom }) {\n        const l = StructureElement.Location.create(structure);\n        for (const unit of structure.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const { elements } = unit;\n            const chainsIt = Segmentation.transientSegments(unit.model.atomicHierarchy.chainAtomSegments, elements);\n            const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, elements);\n            while (chainsIt.hasNext) {\n                const chainSegment = chainsIt.move();\n                if (chain) {\n                    l.element = elements[chainSegment.start];\n                    chain(l);\n                }\n                if (!residue && !atom)\n                    continue;\n                residuesIt.setSegment(chainSegment);\n                while (residuesIt.hasNext) {\n                    const residueSegment = residuesIt.move();\n                    if (residue) {\n                        l.element = elements[residueSegment.start];\n                        residue(l);\n                    }\n                    if (!atom)\n                        continue;\n                    for (let j = residueSegment.start, _j = residueSegment.end; j < _j; j++) {\n                        l.element = elements[j];\n                        atom(l);\n                    }\n                }\n            }\n        }\n    }\n    Structure.eachAtomicHierarchyElement = eachAtomicHierarchyElement;\n    //\n    Structure.DefaultSizeThresholds = {\n        /** Must be lower to be small */\n        smallResidueCount: 10,\n        /** Must be lower to be medium */\n        mediumResidueCount: 5000,\n        /** Must be lower to be large (big ribosomes like 4UG0 should still be `large`) */\n        largeResidueCount: 30000,\n        /**\n         * Structures above `largeResidueCount` are consider huge when they have\n         * a `highSymmetryUnitCount` or gigantic when not\n         */\n        highSymmetryUnitCount: 10,\n        /** Fiber-like structure are consider small when below this */\n        fiberResidueCount: 15,\n    };\n    function getPolymerSymmetryGroups(structure) {\n        return structure.unitSymmetryGroups.filter(ug => ug.units[0].polymerElements.length > 0);\n    }\n    /**\n     * Try to match fiber-like structures like 6nk4\n     */\n    function isFiberLike(structure, thresholds) {\n        const polymerSymmetryGroups = getPolymerSymmetryGroups(structure);\n        return (polymerSymmetryGroups.length === 1 &&\n            polymerSymmetryGroups[0].units.length > 2 &&\n            polymerSymmetryGroups[0].units[0].polymerElements.length < thresholds.fiberResidueCount);\n    }\n    function hasHighSymmetry(structure, thresholds) {\n        const polymerSymmetryGroups = getPolymerSymmetryGroups(structure);\n        return (polymerSymmetryGroups.length >= 1 &&\n            polymerSymmetryGroups[0].units.length > thresholds.highSymmetryUnitCount);\n    }\n    let Size;\n    (function (Size) {\n        Size[Size[\"Small\"] = 0] = \"Small\";\n        Size[Size[\"Medium\"] = 1] = \"Medium\";\n        Size[Size[\"Large\"] = 2] = \"Large\";\n        Size[Size[\"Huge\"] = 3] = \"Huge\";\n        Size[Size[\"Gigantic\"] = 4] = \"Gigantic\";\n    })(Size = Structure.Size || (Structure.Size = {}));\n    /**\n     * @param residueCountFactor - modifies the threshold counts, useful when estimating\n     *                             the size of a structure comprised of multiple models\n     */\n    function getSize(structure, thresholds = {}, residueCountFactor = 1) {\n        const t = { ...Structure.DefaultSizeThresholds, ...thresholds };\n        if (structure.polymerResidueCount >= t.largeResidueCount * residueCountFactor) {\n            if (hasHighSymmetry(structure, t)) {\n                return Size.Huge;\n            }\n            else {\n                return Size.Gigantic;\n            }\n        }\n        else if (isFiberLike(structure, t)) {\n            return Size.Small;\n        }\n        else if (structure.polymerResidueCount < t.smallResidueCount * residueCountFactor) {\n            return Size.Small;\n        }\n        else if (structure.polymerResidueCount < t.mediumResidueCount * residueCountFactor) {\n            return Size.Medium;\n        }\n        else {\n            return Size.Large;\n        }\n    }\n    Structure.getSize = getSize;\n    Structure.Index = CustomStructureProperty.createSimple('index', 'root');\n    Structure.MaxIndex = CustomStructureProperty.createSimple('max_index', 'root');\n    const PrincipalAxesProp = '__PrincipalAxes__';\n    function getPrincipalAxes(structure) {\n        if (structure.currentPropertyData[PrincipalAxesProp])\n            return structure.currentPropertyData[PrincipalAxesProp];\n        const principalAxes = StructureElement.Loci.getPrincipalAxes(Structure.toStructureElementLoci(structure));\n        structure.currentPropertyData[PrincipalAxesProp] = principalAxes;\n        return principalAxes;\n    }\n    Structure.getPrincipalAxes = getPrincipalAxes;\n})(Structure || (Structure = {}));\nexport { Structure };\n","/**\n * Copyright (c) 2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { OrderedSet } from '../../../mol-data/int/ordered-set.js';\nimport { Unit } from './unit.js';\nexport function getSerialMapping(structure) {\n    const { units, elementCount, unitIndexMap } = structure;\n    const cumulativeUnitElementCount = new Uint32Array(units.length);\n    const unitIndices = new Uint32Array(elementCount);\n    const elementIndices = new Uint32Array(elementCount);\n    for (let i = 0, m = 0, il = units.length; i < il; ++i) {\n        cumulativeUnitElementCount[i] = m;\n        const { elements } = units[i];\n        for (let j = 0, jl = elements.length; j < jl; ++j) {\n            const mj = m + j;\n            unitIndices[mj] = i;\n            elementIndices[mj] = elements[j];\n        }\n        m += elements.length;\n    }\n    return {\n        cumulativeUnitElementCount,\n        unitIndices,\n        elementIndices,\n        getSerialIndex: (unit, element) => cumulativeUnitElementCount[unitIndexMap.get(unit.id)] + OrderedSet.indexOf(unit.elements, element)\n    };\n}\nexport function getIntraUnitBondMapping(structure) {\n    let bondCount = 0;\n    const unitGroupOffset = [];\n    for (const ug of structure.unitSymmetryGroups) {\n        unitGroupOffset.push(bondCount);\n        const unit = ug.units[0];\n        if (Unit.isAtomic(unit)) {\n            bondCount += unit.bonds.edgeCount * 2 * ug.units.length;\n        }\n    }\n    const unitIndex = new Uint32Array(bondCount);\n    const unitEdgeIndex = new Uint32Array(bondCount);\n    const unitGroupIndex = new Uint32Array(bondCount);\n    let idx = 0;\n    let unitIdx = 0;\n    for (const ug of structure.unitSymmetryGroups) {\n        const unit = ug.units[0];\n        if (Unit.isAtomic(unit)) {\n            const edgeCount = unit.bonds.edgeCount * 2;\n            for (let i = 0, il = ug.units.length; i < il; ++i) {\n                for (let j = 0, jl = edgeCount; j < jl; ++j) {\n                    unitIndex[idx] = unitIdx;\n                    unitEdgeIndex[idx] = j;\n                    unitGroupIndex[idx] = i;\n                    idx += 1;\n                }\n            }\n        }\n        unitIdx += 1;\n    }\n    return { bondCount, unitIndex, unitEdgeIndex, unitGroupIndex, unitGroupOffset };\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { Sequence } from '../../../sequence.js';\nvar StructureSequence;\n(function (StructureSequence) {\n    const Empty = { byEntityKey: {}, sequences: [] };\n    function merge(...entitySeqs) {\n        const sequences = [];\n        const byEntityKey = {};\n        for (let i = 0, il = entitySeqs.length; i < il; ++i) {\n            sequences.push(...entitySeqs[i].sequences);\n            Object.assign(byEntityKey, entitySeqs[i].byEntityKey);\n        }\n        return { sequences, byEntityKey };\n    }\n    function fromHierarchy(entities, atomicHierarchy, coarseHierarchy) {\n        const atomic = fromAtomicHierarchy(entities, atomicHierarchy);\n        const coarse = coarseHierarchy.isDefined ? fromCoarseHierarchy(entities, coarseHierarchy) : Empty;\n        return merge(atomic, coarse);\n    }\n    StructureSequence.fromHierarchy = fromHierarchy;\n    function fromAtomicHierarchy(entities, hierarchy) {\n        const { label_comp_id } = hierarchy.atoms;\n        const { label_seq_id } = hierarchy.residues;\n        const { chainAtomSegments, residueAtomSegments } = hierarchy;\n        const { count, offsets } = chainAtomSegments;\n        const byEntityKey = {};\n        const sequences = [];\n        // check if chain segments are empty\n        if (count === 1 && offsets[0] === 0 && offsets[1] === 0) {\n            return { byEntityKey, sequences };\n        }\n        for (let cI = 0, _cI = hierarchy.chains._rowCount; cI < _cI; cI++) {\n            const entityKey = hierarchy.index.getEntityFromChain(cI);\n            // Only for polymers, trying to mirror _entity_poly_seq\n            if (byEntityKey[entityKey] !== void 0 || entities.data.type.value(entityKey) !== 'polymer')\n                continue;\n            const start = cI;\n            cI++;\n            while (cI < _cI && entityKey === hierarchy.index.getEntityFromChain(cI) && entities.data.type.value(entityKey) !== 'polymer') {\n                cI++;\n            }\n            cI--;\n            const rStart = residueAtomSegments.index[offsets[start]];\n            const rEnd = residueAtomSegments.index[offsets[cI + 1] - 1] + 1;\n            const seqId = Column.window(label_seq_id, rStart, rEnd);\n            const _compId = [];\n            for (let rI = rStart; rI < rEnd; ++rI) {\n                _compId.push(label_comp_id.value(residueAtomSegments.offsets[rI]));\n            }\n            const compId = Column.ofStringArray(_compId);\n            byEntityKey[entityKey] = {\n                entityId: entities.data.id.value(entityKey),\n                sequence: Sequence.ofResidueNames(compId, seqId)\n            };\n            sequences.push(byEntityKey[entityKey]);\n        }\n        return { byEntityKey, sequences };\n    }\n    StructureSequence.fromAtomicHierarchy = fromAtomicHierarchy;\n    function fromCoarseHierarchy(entities, hierarchy) {\n        const spheres = fromCoarseElements(entities, hierarchy.spheres);\n        const gaussians = fromCoarseElements(entities, hierarchy.gaussians);\n        return merge(spheres, gaussians);\n    }\n    StructureSequence.fromCoarseHierarchy = fromCoarseHierarchy;\n    function fromCoarseElements(entities, elements) {\n        const { chainElementSegments, seq_id_begin, seq_id_end } = elements;\n        const { count, offsets } = chainElementSegments;\n        const byEntityKey = {};\n        const sequences = [];\n        // check if chain segments are empty\n        if (count === 1 && offsets[0] === 0 && offsets[1] === 0) {\n            return { byEntityKey, sequences };\n        }\n        for (let cI = 0, _cI = count; cI < _cI; cI++) {\n            const eK = elements.getEntityFromChain(cI);\n            if (byEntityKey[eK] !== void 0)\n                continue;\n            const start = cI;\n            cI++;\n            while (cI < _cI && eK === elements.getEntityFromChain(cI)) {\n                cI++;\n            }\n            cI--;\n            const eStart = offsets[start];\n            const eEnd = offsets[cI + 1] - 1;\n            const seqIdBegin = Column.window(seq_id_begin, eStart, eEnd);\n            const seqIdEnd = Column.window(seq_id_end, eStart, eEnd);\n            byEntityKey[eK] = {\n                entityId: entities.data.id.value(eK),\n                sequence: Sequence.ofSequenceRanges(seqIdBegin, seqIdEnd)\n            };\n            sequences.push(byEntityKey[eK]);\n        }\n        return { byEntityKey, sequences };\n    }\n    StructureSequence.fromCoarseElements = fromCoarseElements;\n})(StructureSequence || (StructureSequence = {}));\nexport { StructureSequence };\n","/**\n * Copyright (c) 2017-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport const IsNativeEndianLittle = new Uint16Array(new Uint8Array([0x12, 0x34]).buffer)[0] === 0x3412;\nexport function flipByteOrder(data, bytes) {\n    const buffer = new ArrayBuffer(data.length);\n    const ret = new Uint8Array(buffer);\n    for (let i = 0, n = data.length; i < n; i += bytes) {\n        for (let j = 0; j < bytes; j++) {\n            ret[i + bytes - j - 1] = data[i + j];\n        }\n    }\n    return buffer;\n}\nconst ChunkSize = 0x7000;\nexport function uint8ToString(array) {\n    if (array.length > ChunkSize) {\n        const c = [];\n        for (let i = 0; i < array.length; i += ChunkSize) {\n            c.push(String.fromCharCode.apply(null, array.subarray(i, i + ChunkSize)));\n        }\n        return c.join('');\n    }\n    else {\n        return String.fromCharCode.apply(null, array);\n    }\n}\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3 } from '../../mol-math/linear-algebra/3d/vec3.js';\nimport { Sphere3D } from './primitives/sphere3d.js';\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\nconst v3add = Vec3.add;\nconst v3squaredDistance = Vec3.squaredDistance;\nconst v3distance = Vec3.distance;\nexport { CentroidHelper };\nclass CentroidHelper {\n    reset() {\n        Vec3.set(this.center, 0, 0, 0);\n        this.radiusSq = 0;\n        this.count = 0;\n    }\n    includeStep(p) {\n        v3add(this.center, this.center, p);\n        this.count++;\n    }\n    finishedIncludeStep() {\n        if (this.count === 0)\n            return;\n        Vec3.scale(this.center, this.center, 1 / this.count);\n    }\n    radiusStep(p) {\n        const d = v3squaredDistance(p, this.center);\n        if (d > this.radiusSq)\n            this.radiusSq = d;\n    }\n    radiusSphereStep(center, radius) {\n        const _d = v3distance(center, this.center) + radius;\n        const d = _d * _d;\n        if (d > this.radiusSq)\n            this.radiusSq = d;\n    }\n    getSphere(sphere) {\n        if (!sphere)\n            sphere = Sphere3D();\n        Vec3.copy(sphere.center, this.center);\n        sphere.radius = Math.sqrt(this.radiusSq);\n        return sphere;\n    }\n    getCount() {\n        return this.count;\n    }\n    constructor() {\n        this.count = 0;\n        this.center = Vec3();\n        this.radiusSq = 0;\n    }\n}\n(function (CentroidHelper) {\n    const helper = new CentroidHelper();\n    const posA = Vec3();\n    const posB = Vec3();\n    function fromArrays({ x, y, z }, to) {\n        helper.reset();\n        const n = x.length;\n        for (let i = 0; i < n; i++) {\n            Vec3.set(posA, x[i], y[i], z[i]);\n            helper.includeStep(posA);\n        }\n        helper.finishedIncludeStep();\n        for (let i = 0; i < n; i++) {\n            Vec3.set(posA, x[i], y[i], z[i]);\n            helper.radiusStep(posA);\n        }\n        Vec3.copy(to.center, helper.center);\n        to.radius = Math.sqrt(helper.radiusSq);\n        return to;\n    }\n    CentroidHelper.fromArrays = fromArrays;\n    function fromProvider(count, getter, to) {\n        helper.reset();\n        for (let i = 0; i < count; i++) {\n            getter(i, posA);\n            helper.includeStep(posA);\n        }\n        helper.finishedIncludeStep();\n        for (let i = 0; i < count; i++) {\n            getter(i, posA);\n            helper.radiusStep(posA);\n        }\n        Vec3.copy(to.center, helper.center);\n        to.radius = Math.sqrt(helper.radiusSq);\n        return to;\n    }\n    CentroidHelper.fromProvider = fromProvider;\n    function fromPairProvider(count, getter, to) {\n        helper.reset();\n        for (let i = 0; i < count; i++) {\n            getter(i, posA, posB);\n            helper.includeStep(posA);\n            helper.includeStep(posB);\n        }\n        helper.finishedIncludeStep();\n        for (let i = 0; i < count; i++) {\n            getter(i, posA, posB);\n            helper.radiusStep(posA);\n            helper.radiusStep(posB);\n        }\n        Vec3.copy(to.center, helper.center);\n        to.radius = Math.sqrt(helper.radiusSq);\n        return to;\n    }\n    CentroidHelper.fromPairProvider = fromPairProvider;\n})(CentroidHelper || (CentroidHelper = {}));\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { capitalize } from '../string.js';\nimport { ColorList } from './color.js';\nexport const ColorLists = {\n    // Brewer Color Lists\n    // Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The Pennsylvania State University.\n    // Licensed under the Apache License, Version 2.0 (the \"License\");\n    'reds': ColorList('Reds', 'sequential', 'Reds, sequential color scheme from ColorBrewer 2.0', [0xfff5f0, 0xfee0d2, 0xfcbba1, 0xfc9272, 0xfb6a4a, 0xef3b2c, 0xcb181d, 0xa50f15, 0x67000d]),\n    'oranges': ColorList('Oranges', 'sequential', 'Oranges, sequential color scheme from ColorBrewer 2.0', [0xfff5eb, 0xfee6ce, 0xfdd0a2, 0xfdae6b, 0xfd8d3c, 0xf16913, 0xd94801, 0xa63603, 0x7f2704]),\n    'greens': ColorList('Greens', 'sequential', 'Greens, sequential color scheme from ColorBrewer 2.0', [0xf7fcf5, 0xe5f5e0, 0xc7e9c0, 0xa1d99b, 0x74c476, 0x41ab5d, 0x238b45, 0x006d2c, 0x00441b]),\n    'blues': ColorList('Blues', 'sequential', 'Blues, sequential color scheme from ColorBrewer 2.0', [0xf7fbff, 0xdeebf7, 0xc6dbef, 0x9ecae1, 0x6baed6, 0x4292c6, 0x2171b5, 0x08519c, 0x08306b]),\n    'purples': ColorList('Purples', 'sequential', 'Purples, sequential color scheme from ColorBrewer 2.0', [0xfcfbfd, 0xefedf5, 0xdadaeb, 0xbcbddc, 0x9e9ac8, 0x807dba, 0x6a51a3, 0x54278f, 0x3f007d]),\n    'greys': ColorList('Greys', 'sequential', 'Greys, sequential color scheme from ColorBrewer 2.0', [0xffffff, 0xf0f0f0, 0xd9d9d9, 0xbdbdbd, 0x969696, 0x737373, 0x525252, 0x252525, 0x000000]),\n    'orange-red': ColorList('Orange-Red', 'sequential', 'OrRd, sequential color scheme from ColorBrewer 2.0', [0xfff7ec, 0xfee8c8, 0xfdd49e, 0xfdbb84, 0xfc8d59, 0xef6548, 0xd7301f, 0xb30000, 0x7f0000]),\n    'blue-green': ColorList('Blue-Green', 'sequential', 'BuGn, sequential color scheme from ColorBrewer 2.0', [0xf7fcfd, 0xe5f5f9, 0xccece6, 0x99d8c9, 0x66c2a4, 0x41ae76, 0x238b45, 0x006d2c, 0x00441b]),\n    'purple-blue-green': ColorList('Purple-Blue-Green', 'sequential', 'PuBuGn, sequential color scheme from ColorBrewer 2.0', [0xfff7fb, 0xece2f0, 0xd0d1e6, 0xa6bddb, 0x67a9cf, 0x3690c0, 0x02818a, 0x016c59, 0x014636]),\n    'green-blue': ColorList('Green-Blue', 'sequential', 'GnBu, sequential color scheme from ColorBrewer 2.0', [0xf7fcf0, 0xe0f3db, 0xccebc5, 0xa8ddb5, 0x7bccc4, 0x4eb3d3, 0x2b8cbe, 0x0868ac, 0x084081]),\n    'purple-blue': ColorList('Purple-Blue', 'sequential', 'PuBu, sequential color scheme from ColorBrewer 2.0', [0xfff7fb, 0xece7f2, 0xd0d1e6, 0xa6bddb, 0x74a9cf, 0x3690c0, 0x0570b0, 0x045a8d, 0x023858]),\n    'blue-purple': ColorList('Blue-Purple', 'sequential', 'BuPu, sequential color scheme from ColorBrewer 2.0', [0xf7fcfd, 0xe0ecf4, 0xbfd3e6, 0x9ebcda, 0x8c96c6, 0x8c6bb1, 0x88419d, 0x810f7c, 0x4d004b]),\n    'red-purple': ColorList('Red-Purple', 'sequential', 'RdPu, sequential color scheme from ColorBrewer 2.0', [0xfff7f3, 0xfde0dd, 0xfcc5c0, 0xfa9fb5, 0xf768a1, 0xdd3497, 0xae017e, 0x7a0177, 0x49006a]),\n    'purple-red': ColorList('Purple-Red', 'sequential', 'PuRd, sequential color scheme from ColorBrewer 2.0', [0xf7f4f9, 0xe7e1ef, 0xd4b9da, 0xc994c7, 0xdf65b0, 0xe7298a, 0xce1256, 0x980043, 0x67001f]),\n    'yellow-orange-red': ColorList('Yellow-Orange-Red', 'sequential', 'YlOrRd, sequential color scheme from ColorBrewer 2.0', [0xffffcc, 0xffeda0, 0xfed976, 0xfeb24c, 0xfd8d3c, 0xfc4e2a, 0xe31a1c, 0xbd0026, 0x800026]),\n    'yellow-orange-brown': ColorList('Yellow-Orange-Brown', 'sequential', 'YlOrBr, sequential color scheme from ColorBrewer 2.0', [0xffffe5, 0xfff7bc, 0xfee391, 0xfec44f, 0xfe9929, 0xec7014, 0xcc4c02, 0x993404, 0x662506]),\n    'yellow-green': ColorList('Yellow-Green', 'sequential', 'YlGn, sequential color scheme from ColorBrewer 2.0', [0xffffe5, 0xf7fcb9, 0xd9f0a3, 0xaddd8e, 0x78c679, 0x41ab5d, 0x238443, 0x006837, 0x004529]),\n    'yellow-green-blue': ColorList('Yellow-Green-Blue', 'sequential', 'YlGnBu, sequential color scheme from ColorBrewer 2.0', [0xffffd9, 0xedf8b1, 0xc7e9b4, 0x7fcdbb, 0x41b6c4, 0x1d91c0, 0x225ea8, 0x253494, 0x081d58]),\n    'red-blue': ColorList('Red-Blue', 'diverging', 'RdBu, diverging color scheme from ColorBrewer 2.0', [0x67001f, 0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xf7f7f7, 0xd1e5f0, 0x92c5de, 0x4393c3, 0x2166ac, 0x053061]),\n    'red-grey': ColorList('Red-Grey', 'diverging', 'RdGy, diverging color scheme from ColorBrewer 2.0', [0x67001f, 0xb2182b, 0xd6604d, 0xf4a582, 0xfddbc7, 0xffffff, 0xe0e0e0, 0xbababa, 0x878787, 0x4d4d4d, 0x1a1a1a]),\n    'pink-yellow-green': ColorList('Pink-Yellow-Green', 'diverging', 'PiYG, diverging color scheme from ColorBrewer 2.0', [0x8e0152, 0xc51b7d, 0xde77ae, 0xf1b6da, 0xfde0ef, 0xf7f7f7, 0xe6f5d0, 0xb8e186, 0x7fbc41, 0x4d9221, 0x276419]),\n    'brown-white-green': ColorList('Brown-White-Green', 'diverging', 'BrBG, diverging color scheme from ColorBrewer 2.0', [0x543005, 0x8c510a, 0xbf812d, 0xdfc27d, 0xf6e8c3, 0xf5f5f5, 0xc7eae5, 0x80cdc1, 0x35978f, 0x01665e, 0x003c30]),\n    'purple-green': ColorList('Purple-Green', 'diverging', 'PRGn, diverging color scheme from ColorBrewer 2.0', [0x40004b, 0x762a83, 0x9970ab, 0xc2a5cf, 0xe7d4e8, 0xf7f7f7, 0xd9f0d3, 0xa6dba0, 0x5aae61, 0x1b7837, 0x00441b]),\n    // Including both purple-orange and orange-purple here because ColorBrew is a bit messy (calls it PuOr but the order is orange->purple), D3.js has PuOr in the correct order\n    'purple-orange': ColorList('Purple-Orange', 'diverging', 'PuOr, diverging color scheme from ColorBrewer 2.0', [0x2d004b, 0x542788, 0x8073ac, 0xb2abd2, 0xd8daeb, 0xf7f7f7, 0xfee0b6, 0xfdb863, 0xe08214, 0xb35806, 0x7f3b08]),\n    'orange-purple': ColorList('Orange-Purple', 'diverging', 'Reversed PuOr, diverging color scheme from ColorBrewer 2.0', [0x7f3b08, 0xb35806, 0xe08214, 0xfdb863, 0xfee0b6, 0xf7f7f7, 0xd8daeb, 0xb2abd2, 0x8073ac, 0x542788, 0x2d004b]),\n    'red-yellow-green': ColorList('Red-Yellow-Green', 'diverging', 'RdYlGn, diverging color scheme from ColorBrewer 2.0', [0xa50026, 0xd73027, 0xf46d43, 0xfdae61, 0xfee08b, 0xffffbf, 0xd9ef8b, 0xa6d96a, 0x66bd63, 0x1a9850, 0x006837]),\n    'red-yellow-blue': ColorList('Red-Yellow-Blue', 'diverging', 'RdYlBu, diverging color scheme from ColorBrewer 2.0', [0xa50026, 0xd73027, 0xf46d43, 0xfdae61, 0xfee090, 0xffffbf, 0xe0f3f8, 0xabd9e9, 0x74add1, 0x4575b4, 0x313695]),\n    'spectral': ColorList('Spectral', 'diverging', 'Spectral, diverging color scheme from ColorBrewer 2.0', [0x9e0142, 0xd53e4f, 0xf46d43, 0xfdae61, 0xfee08b, 0xffffbf, 0xe6f598, 0xabdda4, 0x66c2a5, 0x3288bd, 0x5e4fa2]),\n    // Matplotlib colormaps, including various perceptually uniform shades, see https://bids.github.io/colormap/\n    'magma': ColorList('Magma', 'sequential', 'Magma, sequential color scheme from Matplotlib, perceptually uniform shades of black-red-white', [0x000004, 0x02020b, 0x050416, 0x090720, 0x0e0b2b, 0x140e36, 0x1a1042, 0x21114d, 0x29115a, 0x331067, 0x3b0f70, 0x440f76, 0x4c117a, 0x54137d, 0x5b157f, 0x641a80, 0x6b1d81, 0x752181, 0x7c2382, 0x842681, 0x8c2981, 0x942c80, 0x9c2e7f, 0xa5317e, 0xad347c, 0xb73779, 0xbf3a77, 0xc73d73, 0xce3f70, 0xd6456b, 0xde4968, 0xe44f64, 0xea5661, 0xef5d5e, 0xf4675c, 0xf7705c, 0xf9795d, 0xfb835f, 0xfc8c63, 0xfd9668, 0xfe9f6d, 0xfea973, 0xfeb47b, 0xfebd82, 0xfec68a, 0xfecf92, 0xfed89a, 0xfde2a3, 0xfdebac, 0xfcf4b6, 0xfcfdbf]),\n    'magma-no-black': ColorList('Magma (no black)', 'sequential', // used to be called 'magma'\n    'Magma, sequential color scheme from Matplotlib, perceptually uniform shades of black-red-white (with the black region removed)', [0x420f74, 0x4a1079, 0x52127c, 0x5a157e, 0x61187f, 0x691c80, 0x711f81, 0x792281, 0x812581, 0x892881, 0x912a80, 0x992d7f, 0xa12f7e, 0xa9327c, 0xb1357a, 0xb93778, 0xc23a75, 0xca3e72, 0xd1426e, 0xd9466a, 0xe04b66, 0xe65162, 0xec585f, 0xf0605d, 0xf4685b, 0xf7715b, 0xf97b5d, 0xfb8460, 0xfc8e63, 0xfd9768, 0xfda16e, 0xfeaa74, 0xfeb37b, 0xfebc82, 0xfec689, 0xfdcf92, 0xfdd89a, 0xfde1a3, 0xfceaac, 0xfcf3b5, 0xfbfcbf]),\n    'inferno': ColorList('Inferno', 'sequential', 'Inferno, sequential color scheme from Matplotlib, perceptually uniform shades of black-red-yellow', [0x000004, 0x02020c, 0x050417, 0x0a0722, 0x10092d, 0x160b39, 0x1e0c45, 0x250c51, 0x2f0a5b, 0x390963, 0x420a68, 0x4a0c6b, 0x520e6d, 0x5a116e, 0x62136e, 0x6a176e, 0x721a6e, 0x7c1d6d, 0x84206b, 0x8c2369, 0x932667, 0x9b2964, 0xa32c61, 0xab2f5e, 0xb3325a, 0xbc3754, 0xc33b4f, 0xca404a, 0xcf4445, 0xd74b3e, 0xdd513a, 0xe25734, 0xe75e2e, 0xeb6628, 0xf06f20, 0xf37819, 0xf68013, 0xf8890c, 0xfa9207, 0xfb9b06, 0xfca50a, 0xfcae12, 0xfbba1f, 0xfac42a, 0xf8cd37, 0xf6d746, 0xf4e156, 0xf2ea69, 0xf2f27d, 0xf5f992, 0xfcffa4]),\n    'inferno-no-black': ColorList('Inferno (no black)', 'sequential', // used to be called 'inferno'\n    'Inferno, sequential color scheme from Matplotlib, perceptually uniform shades of black-red-yellow (with the black region removed)', [0x480b6a, 0x500d6c, 0x58106d, 0x60136e, 0x68166e, 0x70196e, 0x781c6d, 0x801f6b, 0x88216a, 0x902468, 0x982765, 0xa02a62, 0xa72d5f, 0xaf315b, 0xb73456, 0xbe3852, 0xc53d4d, 0xcc4148, 0xd24742, 0xd94d3d, 0xde5337, 0xe45a31, 0xe8612b, 0xed6825, 0xf0701e, 0xf37918, 0xf68111, 0xf88a0b, 0xfa9306, 0xfb9d06, 0xfba60b, 0xfbb014, 0xfbb91e, 0xf9c32a, 0xf8cd37, 0xf5d745, 0xf3e056, 0xf1e968, 0xf1f27d, 0xf5f891, 0xfcfea4]),\n    'plasma': ColorList('Plasma', 'sequential', 'Plasma, sequential color scheme from Matplotlib, perceptually uniform shades of blue-red-yellow', [0x1b068c, 0x250591, 0x2f0495, 0x380499, 0x40039c, 0x49029f, 0x5101a2, 0x5901a4, 0x6100a6, 0x6800a7, 0x7000a8, 0x7801a8, 0x7f03a7, 0x8607a6, 0x8e0ca4, 0x9511a1, 0x9b179e, 0xa21c9a, 0xa82296, 0xae2791, 0xb42d8d, 0xb93388, 0xbe3883, 0xc33e7f, 0xc8447a, 0xcd4975, 0xd14f71, 0xd6556d, 0xda5a68, 0xde6064, 0xe26660, 0xe56c5b, 0xe97257, 0xec7853, 0xef7e4e, 0xf2854a, 0xf58b46, 0xf79241, 0xf9993d, 0xfaa039, 0xfca735, 0xfdaf31, 0xfdb62d, 0xfdbe29, 0xfdc626, 0xfcce25, 0xfad624, 0xf8df24, 0xf5e726, 0xf2f026, 0xeff821]),\n    'viridis': ColorList('Viridis', 'sequential', 'Viridis, sequential color scheme from Matplotlib, perceptually uniform shades of blue-green-yellow', [0x45085b, 0x470f62, 0x471669, 0x481d6f, 0x482374, 0x472a79, 0x46307d, 0x453681, 0x433c84, 0x414286, 0x3e4888, 0x3c4d8a, 0x3a538b, 0x37588c, 0x355d8c, 0x32628d, 0x30678d, 0x2e6c8e, 0x2c718e, 0x2a768e, 0x287a8e, 0x267f8e, 0x24848d, 0x23898d, 0x218d8c, 0x1f928c, 0x1e978a, 0x1e9b89, 0x1ea087, 0x20a585, 0x23a982, 0x28ae7f, 0x2eb27c, 0x35b778, 0x3dbb74, 0x45bf6f, 0x4fc369, 0x59c764, 0x64cb5d, 0x70ce56, 0x7cd24f, 0x88d547, 0x95d73f, 0xa2da37, 0xafdc2e, 0xbdde26, 0xcae01e, 0xd7e219, 0xe4e318, 0xf1e51c, 0xfde724]),\n    'cividis': ColorList('Cividis', 'sequential', 'Cividis, sequential color scheme from Matplotlib, perceptually uniform shades of blue-grey-yellow, should look effectively identical to colorblind and non-colorblind users', [0x002051, 0x002459, 0x00275f, 0x012b64, 0x052e68, 0x0a326a, 0x10366c, 0x15396d, 0x1d3d6e, 0x24406e, 0x2b446e, 0x32486e, 0x394b6e, 0x404f6e, 0x45526d, 0x4d566d, 0x535a6e, 0x595e6e, 0x5e616e, 0x64656f, 0x696970, 0x6e6c71, 0x727072, 0x777473, 0x7b7874, 0x7f7c75, 0x837f76, 0x888377, 0x8c8677, 0x908b78, 0x948f78, 0x999378, 0x9d9778, 0xa29b78, 0xa7a077, 0xada476, 0xb2a874, 0xb8ac72, 0xbeb170, 0xc4b56d, 0xcaba6a, 0xd1be66, 0xd7c363, 0xdec85f, 0xe4cc5a, 0xead156, 0xefd652, 0xf4db4e, 0xf8e04b, 0xfbe548, 0xfdea45]),\n    'twilight': ColorList('Twilight', 'cyclical', 'Twilight, cyclical color scheme from Matplotlib, perceptually uniform shades of white-blue-black-red-white', [0xdfd9e1, 0xd8d7dd, 0xced3d8, 0xc2cdd3, 0xb4c7ce, 0xa7c0ca, 0x9ab8c7, 0x8eb0c5, 0x83a8c3, 0x7a9fc2, 0x7297c0, 0x6b8ebf, 0x6684bd, 0x637bbb, 0x6171b9, 0x5f67b6, 0x5e5cb2, 0x5e51ad, 0x5d46a7, 0x5c3c9f, 0x5b3196, 0x58278b, 0x531e7d, 0x4d176e, 0x46135f, 0x3e1151, 0x381045, 0x32113b, 0x301336, 0x361138, 0x3e113c, 0x471240, 0x521445, 0x5e1749, 0x6a1a4d, 0x761e4f, 0x812350, 0x8b2a50, 0x95324f, 0x9d3a4f, 0xa5434f, 0xac4d50, 0xb25752, 0xb86155, 0xbc6c59, 0xc0775f, 0xc48267, 0xc78d70, 0xc9987b, 0xcca389, 0xceae97, 0xd2b8a6, 0xd6c1b5, 0xdacac4, 0xddd1d1, 0xe0d6db, 0xe1d8e1]),\n    // Qualitative schemes from ColorBrewer (putting them here so that order in UI is sequential, diverging, cyclical, categorical)\n    'set-2': ColorList('Set-2', 'qualitative', 'Set2, categorical color scheme from ColorBrewer 2.0', [0x66c2a5, 0xfc8d62, 0x8da0cb, 0xe78ac3, 0xa6d854, 0xffd92f, 0xe5c494, 0xb3b3b3]),\n    'accent': ColorList('Accent', 'qualitative', 'Accent, categorical color scheme from ColorBrewer 2.0', [0x7fc97f, 0xbeaed4, 0xfdc086, 0xffff99, 0x386cb0, 0xf0027f, 0xbf5b17, 0x666666]),\n    'set-1': ColorList('Set-1', 'qualitative', 'Set1, categorical color scheme from ColorBrewer 2.0', [0xe41a1c, 0x377eb8, 0x4daf4a, 0x984ea3, 0xff7f00, 0xffff33, 0xa65628, 0xf781bf, 0x999999]),\n    'set-3': ColorList('Set-3', 'qualitative', 'Set3, categorical color scheme from ColorBrewer 2.0', [0x8dd3c7, 0xffffb3, 0xbebada, 0xfb8072, 0x80b1d3, 0xfdb462, 0xb3de69, 0xfccde5, 0xd9d9d9, 0xbc80bd, 0xccebc5, 0xffed6f]),\n    'dark-2': ColorList('Dark-2', 'qualitative', 'Dark2, categorical color scheme from ColorBrewer 2.0', [0x1b9e77, 0xd95f02, 0x7570b3, 0xe7298a, 0x66a61e, 0xe6ab02, 0xa6761d, 0x666666]),\n    'paired': ColorList('Paired', 'qualitative', 'Paired, categorical color scheme from ColorBrewer 2.0', [0xa6cee3, 0x1f78b4, 0xb2df8a, 0x33a02c, 0xfb9a99, 0xe31a1c, 0xfdbf6f, 0xff7f00, 0xcab2d6, 0x6a3d9a, 0xffff99, 0xb15928]),\n    'pastel-2': ColorList('Pastel-2', 'qualitative', 'Pastel2, categorical color scheme from ColorBrewer 2.0', [0xb3e2cd, 0xfdcdac, 0xcbd5e8, 0xf4cae4, 0xe6f5c9, 0xfff2ae, 0xf1e2cc, 0xcccccc]),\n    'pastel-1': ColorList('Pastel-1', 'qualitative', 'Pastel1, categorical color scheme from ColorBrewer 2.0', [0xfbb4ae, 0xb3cde3, 0xccebc5, 0xdecbe4, 0xfed9a6, 0xffffcc, 0xe5d8bd, 0xfddaec, 0xf2f2f2]),\n    // https://ai.googleblog.com/2019/08/turbo-improved-rainbow-colormap-for.html\n    'turbo': ColorList('Turbo', 'sequential', 'Turbo color scheme from D3.js, improved (smooth) rainbow colormap for visualization', [0x23171b, 0x362356, 0x422f85, 0x493caa, 0x4b4ac7, 0x4a58dd, 0x4666eb, 0x4174f4, 0x3b82f8, 0x3590f8, 0x2f9df5, 0x2aaaef, 0x27b6e6, 0x25c2dc, 0x25ccd0, 0x27d7c4, 0x2be0b7, 0x31e8aa, 0x38ee9d, 0x42f490, 0x4df884, 0x59fb78, 0x67fd6d, 0x76fe63, 0x85fd59, 0x95fb51, 0xa4f749, 0xb4f242, 0xc2ec3c, 0xd1e436, 0xdedd32, 0xead32e, 0xf4c92b, 0xfcbd28, 0xffb125, 0xffa423, 0xff9721, 0xff891e, 0xff7b1c, 0xfd6d1a, 0xf65f18, 0xec5115, 0xe14412, 0xd5370f, 0xc72c0c, 0xba2208, 0xad1905, 0xa21202, 0x980e00, 0x920c00, 0x900c00]),\n    'turbo-no-black': ColorList('Turbo (no black)', 'sequential', // used to be called 'turbo'\n    'Turbo color scheme from D3.js, improved (smooth) rainbow colormap for visualization, with black region removed', [0x4a41b5, 0x4a58dd, 0x426ff2, 0x3987f9, 0x2f9df5, 0x28b2e9, 0x25c6d8, 0x27d7c4, 0x2ee5ae, 0x3bf098, 0x4df884, 0x62fd70, 0x7bfe5f, 0x95fb51, 0xaff444, 0xc8ea3a, 0xdedd32, 0xf0cc2c, 0xfeb927, 0xffa423, 0xff8e1f, 0xff761c, 0xf65f18, 0xe54813, 0xd0330e, 0xba2208, 0xa51403, 0x960d00]),\n    // Other colormaps from D3.js (https://observablehq.com/@d3/color-schemes)\n    'warm': ColorList('Warm', 'sequential', 'Warm, sequential color scheme from D3.js', [0x6e40aa, 0x753fad, 0x7d3faf, 0x863eb1, 0x8e3eb2, 0x963db3, 0x9e3db3, 0xa73cb3, 0xaf3cb2, 0xb73cb1, 0xbf3caf, 0xc73dac, 0xcf3da9, 0xd63ea6, 0xdc3fa2, 0xe4419d, 0xea4299, 0xf04494, 0xf5468e, 0xfa4988, 0xfe4b83, 0xff4e7c, 0xff5276, 0xff5670, 0xff5a6a, 0xff5e63, 0xff635d, 0xff6757, 0xff6c51, 0xff724b, 0xff7847, 0xff7d42, 0xff833d, 0xff8a39, 0xff9036, 0xfb9633, 0xf69d31, 0xf2a42f, 0xedaa2e, 0xe7b12e, 0xe2b72f, 0xdcbe30, 0xd7c432, 0xd1ca34, 0xccd038, 0xc6d63c, 0xc1dc41, 0xbce146, 0xb7e64c, 0xb3eb53, 0xaff05b]),\n    'cool': ColorList('Cool', 'sequential', 'Cool, sequential color scheme from D3.js', [0x6e40aa, 0x6c43b1, 0x6947b7, 0x674bbd, 0x6450c3, 0x6054c8, 0x5d59cd, 0x595ed1, 0x5563d5, 0x5169d9, 0x4c6edb, 0x4874de, 0x437ae0, 0x3f80e1, 0x3a85e1, 0x368ce1, 0x3292e1, 0x2e98df, 0x2a9fde, 0x27a5db, 0x23abd8, 0x21b1d5, 0x1eb7d1, 0x1cbccc, 0x1bc2c7, 0x1ac7c2, 0x19cdbc, 0x19d1b6, 0x1ad5b0, 0x1bdbaa, 0x1ddfa3, 0x20e29c, 0x23e696, 0x27e98f, 0x2bec89, 0x30ef82, 0x36f17c, 0x3cf276, 0x43f471, 0x4af56c, 0x52f667, 0x5af663, 0x63f75f, 0x6cf65c, 0x75f65a, 0x7ff658, 0x88f557, 0x92f457, 0x9cf357, 0xa6f159, 0xaff05b]),\n    'cubehelix-default': ColorList('CubehelixDefault', 'sequential', 'CubehelixDefault, sequential color scheme from D3.js', [0x000000, 0x080308, 0x0f0612, 0x140a1c, 0x180f26, 0x1a1530, 0x1b1c39, 0x1a2241, 0x192b47, 0x17344b, 0x163d4e, 0x15464e, 0x154f4d, 0x17574a, 0x195e46, 0x1f6642, 0x266c3c, 0x2f7137, 0x397533, 0x467830, 0x54792f, 0x637a2f, 0x737b32, 0x827a37, 0x927a3f, 0xa07949, 0xad7955, 0xb97963, 0xc27a71, 0xca7c82, 0xd07e93, 0xd382a3, 0xd487b3, 0xd48dc1, 0xd294ce, 0xcf9cda, 0xcca5e3, 0xc9aeea, 0xc5b8ef, 0xc3c1f2, 0xc1caf3, 0xc2d3f3, 0xc3dbf2, 0xc7e2f1, 0xcce8f0, 0xd2eeef, 0xdaf2ef, 0xe3f6f0, 0xecf9f3, 0xf6fcf8, 0xffffff]),\n    'rainbow': ColorList('Rainbow', 'cyclical', 'Rainbow, cyclical color scheme from D3.js', [0x6e40aa, 0x7d3faf, 0x8e3eb2, 0x9e3db3, 0xaf3cb2, 0xbf3caf, 0xcf3da9, 0xdc3fa2, 0xea4299, 0xf5468e, 0xfe4b83, 0xff5276, 0xff5a6a, 0xff635d, 0xff6c51, 0xff7847, 0xff833d, 0xff9036, 0xf69d31, 0xedaa2e, 0xe2b72f, 0xd7c432, 0xccd038, 0xc1dc41, 0xb7e64c, 0xaff05b, 0x9cf357, 0x88f557, 0x75f659, 0x62f75f, 0x52f667, 0x43f471, 0x36f17c, 0x2bec89, 0x23e696, 0x1ddfa3, 0x1ad6b0, 0x19cdbc, 0x1bc2c7, 0x1eb7d1, 0x23abd8, 0x2a9fde, 0x3292e1, 0x3a86e1, 0x437ae0, 0x4c6edb, 0x5563d5, 0x5d59cd, 0x6450c3, 0x6947b7, 0x6e40aa]),\n    'sinebow': ColorList('Sinebow', 'cyclical', 'Sinebow, cyclical color scheme from D3.js', [0xff4040, 0xfe4e32, 0xfb5d26, 0xf66d1c, 0xef7d12, 0xe78d0b, 0xdc9d05, 0xd1ab02, 0xc4bb00, 0xb6c800, 0xa7d503, 0x97e007, 0x88ea0d, 0x77f215, 0x68f81e, 0x58fc2a, 0x49ff37, 0x3bff44, 0x2efd53, 0x23fa62, 0x18f472, 0x10ed82, 0x09e392, 0x04d9a2, 0x01cdb1, 0x00bfbf, 0x01b1cd, 0x04a2d9, 0x0892e2, 0x1081ed, 0x1872f4, 0x2362fa, 0x2e53fd, 0x3b44ff, 0x4937ff, 0x582afc, 0x681ff8, 0x7715f2, 0x880dea, 0x9707e0, 0xa703d5, 0xb600c8, 0xc400bb, 0xd102ac, 0xdc059d, 0xe70b8d, 0xef127d, 0xf61c6d, 0xfb265d, 0xfe324e, 0xff4040]),\n    'category-10': ColorList('Category10', 'qualitative', 'Category10, categorical color scheme from D3.js / tab10 from Matplotlib (default in Matplotlib)', [0x1f77b4, 0xff7f0e, 0x2ca02c, 0xd62728, 0x9467bd, 0x8c564b, 0xe377c2, 0x7f7f7f, 0xbcbd22, 0x17becf]),\n    'observable-10': ColorList('Observable10', 'qualitative', 'Observable10, categorical color scheme from D3.js', [0x4269d0, 0xefb118, 0xff725c, 0x6cc5b0, 0x3ca951, 0xff8ab7, 0xa463f2, 0x97bbf5, 0x9c6b4e, 0x9498a0]),\n    'tableau-10': ColorList('Tableau10', 'qualitative', 'Tableau10, categorical color scheme from D3.js', [0x4e79a7, 0xf28e2c, 0xe15759, 0x76b7b2, 0x59a14f, 0xedc949, 0xaf7aa1, 0xff9da7, 0x9c755f, 0xbab0ab]),\n    // Other\n    'simple-rainbow': ColorList('Simple rainbow', 'sequential', // used to be called 'rainbow'\n    'Simple 5-color rainbow (blue-green-yellow-orange-red)', [0x3361E1, 0x35A845, 0xF9FF00, 0xEC8711, 0xBF2222]),\n    'red-white-blue': ColorList('Red-White-Blue', 'diverging', 'Diverging color scheme with red-white-blue', [0xBF2222, 0xFFFFFF, 0x3361E1]),\n    'many-distinct': ColorList('Many-Distinct', 'qualitative', 'Customized color scheme combining colors from multiple standard schemes (Dark2, Set1, Set2)', [\n        // dark-2\n        0x1b9e77, 0xd95f02, 0x7570b3, 0xe7298a, 0x66a61e, 0xe6ab02, 0xa6761d, 0x666666,\n        // set-1\n        0xe41a1c, 0x377eb8, 0x4daf4a, 0x984ea3, 0xff7f00, 0xffff33, 0xa65628, 0xf781bf, 0x999999,\n        // set-2\n        0x66c2a5, 0xfc8d62, 0x8da0cb, 0xe78ac3, 0xa6d854, 0xffd92f, 0xe5c494, 0xb3b3b3\n    ]),\n};\nexport const ColorListNames = Object.keys(ColorLists);\nexport const ColorListOptions = ColorListNames.map(name => [name, ColorLists[name].label, capitalize(ColorLists[name].type), ColorLists[name].description]);\nexport const ColorListOptionsScale = ColorListOptions.filter(v => ColorLists[v[0]].type === 'sequential' || ColorLists[v[0]].type === 'diverging' || ColorLists[v[0]].type === 'cyclical');\nexport const ColorListOptionsSet = ColorListOptions.filter(v => ColorLists[v[0]].type === 'qualitative');\nexport function getColorListFromName(name) {\n    if (name in ColorLists)\n        return ColorLists[name];\n    console.warn(`unknown color list named '${name}'`);\n    return ColorLists['red-yellow-blue'];\n}\n","/**\n * Copyright (c) 2017-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Mat4, Tensor, Vec3 } from '../../../mol-math/linear-algebra.js';\nimport { SymmetryOperator } from '../../../mol-math/geometry/symmetry-operator.js';\nimport { Assembly } from '../../../mol-model/structure/model/properties/symmetry.js';\nimport { Queries as Q } from '../../../mol-model/structure.js';\nimport { StructureProperties } from '../../../mol-model/structure.js';\nexport function createAssemblies(pdbx_struct_assembly, pdbx_struct_assembly_gen, pdbx_struct_oper_list) {\n    if (!pdbx_struct_assembly._rowCount)\n        return [];\n    const matrices = getMatrices(pdbx_struct_oper_list);\n    const assemblies = [];\n    for (let i = 0; i < pdbx_struct_assembly._rowCount; i++) {\n        assemblies[assemblies.length] = createAssembly(pdbx_struct_assembly, pdbx_struct_assembly_gen, i, matrices);\n    }\n    return assemblies;\n}\nfunction createAssembly(pdbx_struct_assembly, pdbx_struct_assembly_gen, index, matrices) {\n    const id = pdbx_struct_assembly.id.value(index);\n    const details = pdbx_struct_assembly.details.value(index);\n    const generators = [];\n    const { assembly_id, oper_expression, asym_id_list } = pdbx_struct_assembly_gen;\n    for (let i = 0, _i = pdbx_struct_assembly_gen._rowCount; i < _i; i++) {\n        if (assembly_id.value(i) !== id)\n            continue;\n        generators[generators.length] = {\n            assemblyId: id,\n            expression: oper_expression.value(i),\n            asymIds: asym_id_list.value(i)\n        };\n    }\n    return Assembly.create(id, details, operatorGroupsProvider(generators, matrices));\n}\nexport function operatorGroupsProvider(generators, matrices) {\n    return () => {\n        const groups = [];\n        let operatorOffset = 0;\n        for (let i = 0; i < generators.length; i++) {\n            const gen = generators[i];\n            const operatorList = parseOperatorList(gen.expression);\n            const operatorNames = expandOperators(operatorList);\n            const operators = getAssemblyOperators(matrices, operatorNames, operatorOffset, gen.assemblyId);\n            const selector = Q.generators.atoms({\n                chainTest: Q.pred.and(Q.pred.eq(ctx => StructureProperties.unit.operator_name(ctx.element), SymmetryOperator.DefaultName), Q.pred.inSet(ctx => StructureProperties.chain.label_asym_id(ctx.element), gen.asymIds))\n            });\n            groups[groups.length] = { selector, operators, asymIds: gen.asymIds };\n            operatorOffset += operators.length;\n        }\n        return groups;\n    };\n}\nexport function getMatrices(pdbx_struct_oper_list) {\n    const { id, matrix, vector, _schema } = pdbx_struct_oper_list;\n    const matrices = new Map();\n    const t = Vec3();\n    for (let i = 0, _i = pdbx_struct_oper_list._rowCount; i < _i; i++) {\n        const m = Tensor.toMat4(Mat4(), _schema.matrix.space, matrix.value(i));\n        Tensor.toVec3(t, _schema.vector.space, vector.value(i));\n        Mat4.setTranslation(m, t);\n        Mat4.setValue(m, 3, 3, 1);\n        matrices.set(id.value(i), m);\n    }\n    return matrices;\n}\nfunction expandOperators(operatorList) {\n    const ops = [];\n    const currentOp = [];\n    for (let i = 0; i < operatorList.length; i++)\n        currentOp[i] = '';\n    expandOperators1(operatorList, ops, operatorList.length - 1, currentOp);\n    return ops;\n}\nfunction expandOperators1(operatorNames, list, i, current) {\n    if (i < 0) {\n        list[list.length] = current.slice(0);\n        return;\n    }\n    const ops = operatorNames[i], len = ops.length;\n    for (let j = 0; j < len; j++) {\n        current[i] = ops[j];\n        expandOperators1(operatorNames, list, i - 1, current);\n    }\n}\nfunction getAssemblyOperators(matrices, operatorNames, startIndex, assemblyId) {\n    const operators = [];\n    let index = startIndex;\n    for (const op of operatorNames) {\n        const m = Mat4.identity();\n        for (let i = 0; i < op.length; i++) {\n            Mat4.mul(m, m, matrices.get(op[i]));\n        }\n        index++;\n        const opName = `ASM_${index}`; // Kept mostly for compatibility reasons\n        const canonicalOpName = SymmetryOperator.getAssemblyOperatorName(op);\n        operators[operators.length] = SymmetryOperator.create(opName, m, { instanceId: canonicalOpName, assembly: { id: assemblyId, operId: index, operList: op } });\n    }\n    return operators;\n}\nfunction parseOperatorList(value) {\n    // '(X0)(1-5)' becomes [['X0'], ['1', '2', '3', '4', '5']]\n    // kudos to Glen van Ginkel.\n    const oeRegex = /\\(?([^\\(\\)]+)\\)?]*/g, groups = [], ret = [];\n    let g;\n    while (g = oeRegex.exec(value))\n        groups[groups.length] = g[1];\n    groups.forEach(g => {\n        const group = [];\n        g.split(',').forEach(e => {\n            const dashIndex = e.indexOf('-');\n            if (dashIndex > 0) {\n                const from = parseInt(e.substring(0, dashIndex)), to = parseInt(e.substr(dashIndex + 1));\n                for (let i = from; i <= to; i++)\n                    group[group.length] = i.toString();\n            }\n            else {\n                group[group.length] = e.trim();\n            }\n        });\n        ret[ret.length] = group;\n    });\n    return ret;\n}\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { mmCIF_Schema } from '../../../mol-io/reader/cif/schema/mmcif.js';\nimport { Spacegroup, SpacegroupCell, SymmetryOperator } from '../../../mol-math/geometry.js';\nimport { Tensor, Vec3, Mat3 } from '../../../mol-math/linear-algebra.js';\nimport { createAssemblies } from './assembly.js';\nimport { FormatPropertyProvider } from '../common/property.js';\nexport { ModelSymmetry };\nvar ModelSymmetry;\n(function (ModelSymmetry) {\n    ModelSymmetry.Descriptor = {\n        name: 'model_symmetry',\n    };\n    ModelSymmetry.Provider = FormatPropertyProvider.create(ModelSymmetry.Descriptor);\n    function fromData(data) {\n        const assemblies = createAssemblies(data.pdbx_struct_assembly, data.pdbx_struct_assembly_gen, data.pdbx_struct_oper_list);\n        const spacegroup = getSpacegroup(data.symmetry, data.cell);\n        const isNonStandardCrystalFrame = checkNonStandardCrystalFrame(data.atom_sites, spacegroup);\n        return { assemblies, spacegroup, isNonStandardCrystalFrame, ncsOperators: getNcsOperators(data.struct_ncs_oper) };\n    }\n    ModelSymmetry.fromData = fromData;\n    function fromCell(size, anglesInRadians) {\n        const spaceCell = SpacegroupCell.create('P 1', size, anglesInRadians);\n        const spacegroup = Spacegroup.create(spaceCell);\n        return { assemblies: [], spacegroup, isNonStandardCrystalFrame: false };\n    }\n    ModelSymmetry.fromCell = fromCell;\n})(ModelSymmetry || (ModelSymmetry = {}));\nfunction checkNonStandardCrystalFrame(atom_sites, spacegroup) {\n    if (atom_sites._rowCount === 0)\n        return false;\n    // TODO: parse atom_sites transform and check if it corresponds to the toFractional matrix\n    return false;\n}\nfunction getSpacegroupNameOrNumber(symmetry) {\n    const groupNumber = symmetry['Int_Tables_number'].value(0);\n    const groupName = symmetry['space_group_name_H-M'].value(0);\n    if (!symmetry['Int_Tables_number'].isDefined)\n        return groupName;\n    if (!symmetry['space_group_name_H-M'].isDefined)\n        return groupNumber;\n    return groupName;\n}\nfunction getSpacegroup(symmetry, cell) {\n    if (symmetry._rowCount === 0 || cell._rowCount === 0)\n        return Spacegroup.ZeroP1;\n    const a = cell.length_a.value(0);\n    const b = cell.length_b.value(0);\n    const c = cell.length_c.value(0);\n    if (a === 0 || b === 0 || c === 0)\n        return Spacegroup.ZeroP1;\n    const alpha = cell.angle_alpha.value(0);\n    const beta = cell.angle_beta.value(0);\n    const gamma = cell.angle_gamma.value(0);\n    if (alpha === 0 || beta === 0 || gamma === 0)\n        return Spacegroup.ZeroP1;\n    const nameOrNumber = getSpacegroupNameOrNumber(symmetry);\n    const spaceCell = SpacegroupCell.create(nameOrNumber, Vec3.create(a, b, c), Vec3.scale(Vec3(), Vec3.create(alpha, beta, gamma), Math.PI / 180));\n    return Spacegroup.create(spaceCell);\n}\nfunction getNcsOperators(struct_ncs_oper) {\n    if (struct_ncs_oper._rowCount === 0)\n        return void 0;\n    const { id, matrix, vector } = struct_ncs_oper;\n    const matrixSpace = mmCIF_Schema.struct_ncs_oper.matrix.space, vectorSpace = mmCIF_Schema.struct_ncs_oper.vector.space;\n    const opers = [];\n    for (let i = 0; i < struct_ncs_oper._rowCount; i++) {\n        const m = Tensor.toMat3(Mat3(), matrixSpace, matrix.value(i));\n        const v = Tensor.toVec3(Vec3(), vectorSpace, vector.value(i));\n        if (!SymmetryOperator.checkIfRotationAndTranslation(m, v))\n            continue;\n        // ignore non-identity 'given' NCS operators\n        if (struct_ncs_oper.code.value(i) === 'given' && !Mat3.isIdentity(m) && !Vec3.isZero(v))\n            continue;\n        const ncsId = id.value(i);\n        opers[opers.length] = SymmetryOperator.ofRotationAndOffset(`ncs_${ncsId}`, m, v, ncsId);\n    }\n    return opers;\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n/** Assign to the object if a given property in update is undefined */\nexport function assignIfUndefined(to, full) {\n    for (const k of Object.keys(full)) {\n        if (!hasOwnProperty.call(full, k))\n            continue;\n        if (typeof to[k] === 'undefined') {\n            to[k] = full[k];\n        }\n    }\n    return to;\n}\n/** Create new object if any property in \"update\" changes in \"source\". */\nexport function shallowMerge2(source, update) {\n    // Adapted from LiteMol (https://github.com/dsehnal/LiteMol)\n    let changed = false;\n    for (const k of Object.keys(update)) {\n        if (!hasOwnProperty.call(update, k))\n            continue;\n        if (update[k] !== source[k]) {\n            changed = true;\n            break;\n        }\n    }\n    if (!changed)\n        return source;\n    return Object.assign({}, source, update);\n}\nexport function shallowEqual(a, b) {\n    if (!a) {\n        if (!b)\n            return true;\n        return false;\n    }\n    if (!b)\n        return false;\n    const keys = Object.keys(a);\n    if (Object.keys(b).length !== keys.length)\n        return false;\n    for (const k of keys) {\n        if (!hasOwnProperty.call(a, k) || a[k] !== b[k])\n            return false;\n    }\n    return true;\n}\nexport function shallowMerge(source, ...rest) {\n    return shallowMergeArray(source, rest);\n}\nexport function shallowMergeArray(source, rest) {\n    // Adapted from LiteMol (https://github.com/dsehnal/LiteMol)\n    let ret = source;\n    for (let s = 0; s < rest.length; s++) {\n        if (!rest[s])\n            continue;\n        ret = shallowMerge2(source, rest[s]);\n        if (ret !== source) {\n            for (let i = s + 1; i < rest.length; i++) {\n                ret = Object.assign(ret, rest[i]);\n            }\n            break;\n        }\n    }\n    return ret;\n}\n/** Simple deep clone for number, boolean, string, null, undefined, object, array */\nexport function deepClone(source) {\n    if (null === source || 'object' !== typeof source)\n        return source;\n    if (source instanceof Array) {\n        const copy = [];\n        for (let i = 0, len = source.length; i < len; i++) {\n            copy[i] = deepClone(source[i]);\n        }\n        return copy;\n    }\n    // `instanceof Object` does not find `Object.create(null)`\n    if (typeof source === 'object' && !('prototype' in source)) {\n        const copy = {};\n        for (const k in source) {\n            if (hasOwnProperty.call(source, k))\n                copy[k] = deepClone(source[k]);\n        }\n        return copy;\n    }\n    throw new Error(`Can't clone, type \"${typeof source}\" unsupported`);\n}\n/** Return a new object with the same keys, where function `f` is applied to each value.\n * Equivalent to Pythonic `{k: f(v) for k, v in obj.items()}` */\nexport function mapObjectMap(obj, f) {\n    const ret = {};\n    for (const k of Object.keys(obj)) {\n        ret[k] = f(obj[k]);\n    }\n    return ret;\n}\n/** Return an object with keys being the elements of `array` and values computed by `getValue` function.\n * Equivalent to Pythonic `{k: getValue(k) for k in array}` */\nexport function mapArrayToObject(array, getValue) {\n    const result = {};\n    for (const key of array) {\n        result[key] = getValue(key);\n    }\n    return result;\n}\nexport function objectForEach(o, f) {\n    if (!o)\n        return;\n    for (const k of Object.keys(o)) {\n        f(o[k], k);\n    }\n}\n/** Return an object with keys `keys` and their values same as in `obj`, i.e. `{ key: obj[key] for key in keys }` */\nexport function pickObjectKeys(obj, keys) {\n    const result = {};\n    for (const key of keys) {\n        if (Object.hasOwn(obj, key)) {\n            result[key] = obj[key];\n        }\n    }\n    return result;\n}\n/** Same as `pickObjectKeys` but allows loading values into a different key or skipping keys, i.e. return `{ key: obj[remapping[key] ?? key] for key in keys if remapping[key] !== null }`  */\nexport function pickObjectKeysWithRemapping(obj, keys, remapping) {\n    const result = {};\n    for (const key of keys) {\n        let srcKey = remapping[key];\n        if (srcKey === null)\n            continue; // Ignore key\n        if (srcKey === undefined)\n            srcKey = key; // Implicit key mapping\n        if (Object.hasOwn(obj, srcKey)) {\n            result[key] = obj[srcKey];\n        }\n    }\n    return result;\n}\nexport function objectOfArraysToArrayOfObjects(objectOfArrays) {\n    let n = undefined;\n    for (const key in objectOfArrays) {\n        const length = objectOfArrays[key].length;\n        if (n !== undefined && n !== length)\n            throw new Error('FormatError: arrays must have the same length.');\n        n = length;\n    }\n    if (n === undefined)\n        return []; // empty input object\n    const out = new Array(n);\n    for (let i = 0; i < n; i++) {\n        const item = {};\n        for (const key in objectOfArrays) {\n            item[key] = objectOfArrays[key][i];\n        }\n        out[i] = item;\n    }\n    return out;\n}\n/** Return an object same as `obj` but without keys `keys` */\nexport function omitObjectKeys(obj, omitKeys) {\n    const result = { ...obj };\n    for (const key of omitKeys) {\n        delete result[key];\n    }\n    return result;\n}\n/** Create an object from keys and values (first key maps to first value etc.) */\nexport function objectFromKeysAndValues(keys, values) {\n    const obj = {};\n    for (let i = 0; i < keys.length; i++) {\n        obj[keys[i]] = values[i];\n    }\n    return obj;\n}\n/** Decide if `obj` is a good old object (not array or null or other type). */\nexport function isPlainObject(obj) {\n    return typeof obj === 'object' && obj !== null && !Array.isArray(obj);\n}\n/** Like `Promise.all` but with objects instead of arrays */\nexport async function promiseAllObj(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = Object.values(promisesObj);\n    const results = await Promise.all(promises);\n    return objectFromKeysAndValues(keys, results);\n}\n","/**\n * Copyright (c) 2017-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/*\n * This code has been modified from https://github.com/toji/gl-matrix/,\n * copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n */\nexport const EPSILON = 0.000001;\nexport function equalEps(a, b, eps) {\n    return Math.abs(a - b) <= eps;\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { ArrayEncoding as E } from './array-encoder.js';\nimport { getArrayDigitCount } from '../../../mol-util/number.js';\nimport { assertUnreachable } from '../../../mol-util/type-helpers.js';\nexport function classifyIntArray(xs) {\n    return IntClassifier.classify(xs);\n}\nexport function classifyFloatArray(xs) {\n    return FloatClassifier.classify(xs);\n}\nvar IntClassifier;\n(function (IntClassifier) {\n    function packSize(value, upperLimit) {\n        return value >= 0\n            ? Math.ceil((value + 1) / upperLimit)\n            : Math.ceil((value + 1) / (-upperLimit - 1));\n    }\n    function getInfo(data) {\n        let signed = false;\n        for (let i = 0, n = data.length; i < n; i++) {\n            if (data[i] < 0) {\n                signed = true;\n                break;\n            }\n        }\n        return signed ? { signed, limit8: 0x7F, limit16: 0x7FFF } : { signed, limit8: 0xFF, limit16: 0xFFFF };\n    }\n    function SizeInfo() { return { pack8: 0, pack16: 0, count: 0 }; }\n    ;\n    function incSize({ limit8, limit16 }, info, value) {\n        info.pack8 += packSize(value, limit8);\n        info.pack16 += packSize(value, limit16);\n        info.count += 1;\n    }\n    function incSizeSigned(info, value) {\n        info.pack8 += packSize(value, 0x7F);\n        info.pack16 += packSize(value, 0x7FFF);\n        info.count += 1;\n    }\n    function byteSize(info) {\n        if (info.count * 4 < info.pack16 * 2)\n            return { length: info.count * 4, elem: 4 };\n        if (info.pack16 * 2 < info.pack8)\n            return { length: info.pack16 * 2, elem: 2 };\n        return { length: info.pack8, elem: 1 };\n    }\n    function packingSize(data, info) {\n        const size = SizeInfo();\n        for (let i = 0, n = data.length; i < n; i++) {\n            incSize(info, size, data[i]);\n        }\n        return { ...byteSize(size), kind: 'pack' };\n    }\n    function deltaSize(data, info) {\n        const size = SizeInfo();\n        let prev = data[0];\n        for (let i = 1, n = data.length; i < n; i++) {\n            incSizeSigned(size, data[i] - prev);\n            prev = data[i];\n        }\n        return { ...byteSize(size), kind: 'delta' };\n    }\n    function rleSize(data, info) {\n        const size = SizeInfo();\n        let run = 1;\n        for (let i = 1, n = data.length; i < n; i++) {\n            if (data[i - 1] !== data[i]) {\n                incSize(info, size, data[i - 1]);\n                incSize(info, size, run);\n                run = 1;\n            }\n            else {\n                run++;\n            }\n        }\n        incSize(info, size, data[data.length - 1]);\n        incSize(info, size, run);\n        return { ...byteSize(size), kind: 'rle' };\n    }\n    function deltaRleSize(data, info) {\n        const size = SizeInfo();\n        let run = 1, prev = 0, prevValue = 0;\n        for (let i = 1, n = data.length; i < n; i++) {\n            const v = data[i] - prev;\n            if (prevValue !== v) {\n                incSizeSigned(size, prevValue);\n                incSizeSigned(size, run);\n                run = 1;\n            }\n            else {\n                run++;\n            }\n            prevValue = v;\n            prev = data[i];\n        }\n        incSizeSigned(size, prevValue);\n        incSizeSigned(size, run);\n        return { ...byteSize(size), kind: 'delta-rle' };\n    }\n    function getSize(data) {\n        const info = getInfo(data);\n        const sizes = [packingSize(data, info), rleSize(data, info), deltaSize(data, info), deltaRleSize(data, info)];\n        sizes.sort((a, b) => a.length - b.length);\n        return sizes;\n    }\n    IntClassifier.getSize = getSize;\n    function classify(data) {\n        if (data.length < 2)\n            return E.by(E.byteArray);\n        const sizes = getSize(data);\n        const size = sizes[0];\n        switch (size.kind) {\n            case 'pack': return E.by(E.integerPacking);\n            case 'rle': return E.by(E.runLength).and(E.integerPacking);\n            case 'delta': return E.by(E.delta).and(E.integerPacking);\n            case 'delta-rle': return E.by(E.delta).and(E.runLength).and(E.integerPacking);\n            default: assertUnreachable(size);\n        }\n    }\n    IntClassifier.classify = classify;\n})(IntClassifier || (IntClassifier = {}));\nvar FloatClassifier;\n(function (FloatClassifier) {\n    const delta = 1e-6;\n    function classify(data) {\n        const maxDigits = 4;\n        const { mantissaDigits, integerDigits } = getArrayDigitCount(data, maxDigits, delta);\n        // TODO: better check for overflows here?\n        if (mantissaDigits < 0 || mantissaDigits + integerDigits > 10)\n            return E.by(E.byteArray);\n        // TODO: this needs a conversion to Int?Array?\n        if (mantissaDigits === 0)\n            return IntClassifier.classify(data);\n        const multiplier = getMultiplier(mantissaDigits);\n        const intArray = new Int32Array(data.length);\n        for (let i = 0, n = data.length; i < n; i++) {\n            intArray[i] = Math.round(multiplier * data[i]);\n            // TODO: enable this again?\n            // const v = Math.round(multiplier * data[i]);\n            // if (Math.abs(Math.round(v) / multiplier - intArray[i] / multiplier) > delta) {\n            //     return E.by(E.byteArray);\n            // }\n        }\n        const sizes = IntClassifier.getSize(intArray);\n        const size = sizes[0];\n        const fp = E.by(E.fixedPoint(multiplier));\n        switch (size.kind) {\n            case 'pack': return fp.and(E.integerPacking);\n            case 'rle': return fp.and(E.runLength).and(E.integerPacking);\n            case 'delta': return fp.and(E.delta).and(E.integerPacking);\n            case 'delta-rle': return fp.and(E.delta).and(E.runLength).and(E.integerPacking);\n            default: assertUnreachable(size);\n        }\n    }\n    FloatClassifier.classify = classify;\n    function getMultiplier(mantissaDigits) {\n        let m = 1;\n        for (let i = 0; i < mantissaDigits; i++)\n            m *= 10;\n        return m;\n    }\n})(FloatClassifier || (FloatClassifier = {}));\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from CIFTools.js (https://github.com/dsehnal/CIFTools.js)\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar StringBuilder;\n(function (StringBuilder) {\n    function create(chunkCapacity = 512) {\n        return {\n            current: [],\n            offset: 0,\n            capacity: chunkCapacity,\n            chunks: []\n        };\n    }\n    StringBuilder.create = create;\n    function getString(builder) {\n        if (!builder.chunks.length) {\n            if (builder.current.length === builder.offset)\n                return builder.current.join('');\n            return builder.current.splice(0, builder.offset).join('');\n        }\n        if (builder.offset > 0) {\n            builder.chunks[builder.chunks.length] = builder.current.length === builder.offset\n                ? builder.current.join('')\n                : builder.current.slice(0, builder.offset).join('');\n        }\n        return builder.chunks.join('');\n    }\n    StringBuilder.getString = getString;\n    function getSize(builder) {\n        let size = 0;\n        for (const c of builder.chunks)\n            size += c.length;\n        for (let i = 0; i < builder.offset; i++)\n            size += builder.current[i].length;\n        return size;\n    }\n    StringBuilder.getSize = getSize;\n    function getChunks(builder) {\n        if (builder.offset > 0) {\n            if (builder.current.length === builder.offset)\n                builder.chunks[builder.chunks.length] = builder.current.join('');\n            else\n                builder.chunks[builder.chunks.length] = builder.current.slice(0, builder.offset).join('');\n            builder.offset = 0;\n        }\n        return builder.chunks;\n    }\n    StringBuilder.getChunks = getChunks;\n    let PaddingSpaces;\n    (function (PaddingSpaces) {\n        PaddingSpaces[PaddingSpaces[\"Count\"] = 512] = \"Count\";\n    })(PaddingSpaces || (PaddingSpaces = {}));\n    const __paddingSpaces = [];\n    (function () {\n        let s = '';\n        for (let i = 0; i < PaddingSpaces.Count; i++) {\n            __paddingSpaces[i] = s;\n            s = s + ' ';\n        }\n    })();\n    function newline(builder) {\n        writeSafe(builder, '\\n');\n    }\n    StringBuilder.newline = newline;\n    function whitespace(builder, len) {\n        if (len > 0)\n            writeSafe(builder, __paddingSpaces[len]);\n    }\n    StringBuilder.whitespace = whitespace;\n    function whitespace1(builder) {\n        writeSafe(builder, ' ');\n    }\n    StringBuilder.whitespace1 = whitespace1;\n    function write(builder, val) {\n        if (!val)\n            return;\n        if (builder.offset === builder.capacity) {\n            builder.chunks[builder.chunks.length] = builder.current.join('');\n            builder.offset = 0;\n        }\n        builder.current[builder.offset++] = val;\n    }\n    StringBuilder.write = write;\n    /** Write without check. */\n    function writeSafe(builder, val) {\n        if (builder.offset === builder.capacity) {\n            builder.chunks[builder.chunks.length] = builder.current.join('');\n            builder.offset = 0;\n        }\n        builder.current[builder.offset++] = val;\n    }\n    StringBuilder.writeSafe = writeSafe;\n    function writePadLeft(builder, val, totalWidth) {\n        if (!val) {\n            whitespace(builder, totalWidth);\n            return;\n        }\n        const padding = totalWidth - val.length;\n        whitespace(builder, padding);\n        writeSafe(builder, val);\n    }\n    StringBuilder.writePadLeft = writePadLeft;\n    function writePadRight(builder, val, totalWidth) {\n        if (!val) {\n            whitespace(builder, totalWidth);\n            return;\n        }\n        const padding = totalWidth - val.length;\n        writeSafe(builder, val);\n        whitespace(builder, padding);\n    }\n    StringBuilder.writePadRight = writePadRight;\n    function writeInteger(builder, val) {\n        writeSafe(builder, '' + val);\n    }\n    StringBuilder.writeInteger = writeInteger;\n    function writeIntegerAndSpace(builder, val) {\n        writeSafe(builder, '' + val + ' ');\n    }\n    StringBuilder.writeIntegerAndSpace = writeIntegerAndSpace;\n    function writeIntegerPadLeft(builder, val, totalWidth) {\n        const s = '' + val;\n        const padding = totalWidth - s.length;\n        whitespace(builder, padding);\n        writeSafe(builder, s);\n    }\n    StringBuilder.writeIntegerPadLeft = writeIntegerPadLeft;\n    function writeIntegerPadRight(builder, val, totalWidth) {\n        const s = '' + val;\n        const padding = totalWidth - s.length;\n        writeSafe(builder, s);\n        whitespace(builder, padding);\n    }\n    StringBuilder.writeIntegerPadRight = writeIntegerPadRight;\n    /**\n     * @example writeFloat(123.2123, 100) -- 2 decim\n     */\n    function writeFloat(builder, val, precisionMultiplier) {\n        writeSafe(builder, '' + Math.round(precisionMultiplier * val) / precisionMultiplier);\n    }\n    StringBuilder.writeFloat = writeFloat;\n    function writeFloatPadLeft(builder, val, precisionMultiplier, totalWidth) {\n        const s = '' + Math.round(precisionMultiplier * val) / precisionMultiplier;\n        const padding = totalWidth - s.length;\n        whitespace(builder, padding);\n        writeSafe(builder, s);\n    }\n    StringBuilder.writeFloatPadLeft = writeFloatPadLeft;\n    function writeFloatPadRight(builder, val, precisionMultiplier, totalWidth) {\n        const s = '' + Math.round(precisionMultiplier * val) / precisionMultiplier;\n        const padding = totalWidth - s.length;\n        writeSafe(builder, s);\n        whitespace(builder, padding);\n    }\n    StringBuilder.writeFloatPadRight = writeFloatPadRight;\n})(StringBuilder || (StringBuilder = {}));\nexport { StringBuilder };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * from https://github.com/dsehnal/CIFTools.js\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar ChunkedArray;\n(function (ChunkedArray) {\n    function is(x) {\n        return x.creator && x.chunkSize;\n    }\n    ChunkedArray.is = is;\n    function allocateNext(array) {\n        const nextSize = array.growBy * array.elementSize;\n        array.currentSize = nextSize;\n        array.currentIndex = 0;\n        array.currentChunk = new array.ctor(nextSize);\n        array.allocatedSize += nextSize;\n        array.chunks[array.chunks.length] = array.currentChunk;\n    }\n    function add4(array, x, y, z, w) {\n        if (array.currentIndex >= array.currentSize)\n            allocateNext(array);\n        const c = array.currentChunk;\n        const i = array.currentIndex;\n        c[i] = x;\n        c[i + 1] = y;\n        c[i + 2] = z;\n        c[i + 3] = w;\n        array.currentIndex += 4;\n        return array.elementCount++;\n    }\n    ChunkedArray.add4 = add4;\n    function add3(array, x, y, z) {\n        if (array.currentIndex >= array.currentSize)\n            allocateNext(array);\n        const c = array.currentChunk;\n        const i = array.currentIndex;\n        c[i] = x;\n        c[i + 1] = y;\n        c[i + 2] = z;\n        array.currentIndex += 3;\n        return array.elementCount++;\n    }\n    ChunkedArray.add3 = add3;\n    function add2(array, x, y) {\n        if (array.currentIndex >= array.currentSize)\n            allocateNext(array);\n        const c = array.currentChunk;\n        const i = array.currentIndex;\n        c[i] = x;\n        c[i + 1] = y;\n        array.currentIndex += 2;\n        return array.elementCount++;\n    }\n    ChunkedArray.add2 = add2;\n    function add(array, x) {\n        if (array.currentIndex >= array.currentSize)\n            allocateNext(array);\n        array.currentChunk[array.currentIndex] = x;\n        array.currentIndex += 1;\n        return array.elementCount++;\n    }\n    ChunkedArray.add = add;\n    function addRepeat(array, n, x) {\n        for (let i = 0; i < n; i++) {\n            if (array.currentIndex >= array.currentSize)\n                allocateNext(array);\n            array.currentChunk[array.currentIndex++] = x;\n            array.elementCount++;\n        }\n        return array.elementCount;\n    }\n    ChunkedArray.addRepeat = addRepeat;\n    function addMany(array, data) {\n        const { elementSize } = array;\n        for (let i = 0, _i = data.length; i < _i; i += elementSize) {\n            if (array.currentIndex >= array.currentSize)\n                allocateNext(array);\n            const { currentChunk } = array;\n            for (let j = 0; j < elementSize; j++) {\n                currentChunk[array.currentIndex++] = data[i + j];\n            }\n            array.elementCount++;\n        }\n        return array.elementCount;\n    }\n    ChunkedArray.addMany = addMany;\n    /** If doNotResizeSingleton = true and the data fit into a single chunk, do not resize it. */\n    function compact(array, doNotResizeSingleton = false) {\n        return _compact(array, doNotResizeSingleton);\n    }\n    ChunkedArray.compact = compact;\n    function _compact(array, doNotResizeSingleton) {\n        const { ctor, chunks, currentIndex } = array;\n        if (!chunks.length)\n            return new ctor(0);\n        if (chunks.length === 1) {\n            if (doNotResizeSingleton || currentIndex === array.allocatedSize) {\n                return chunks[0];\n            }\n        }\n        let size = 0;\n        for (let i = 0, _i = chunks.length - 1; i < _i; i++)\n            size += chunks[i].length;\n        size += array.currentIndex;\n        const ret = new ctor(size);\n        let offset = 0;\n        if (ret.buffer) {\n            for (let i = 0, _i = chunks.length - 1; i < _i; i++) {\n                ret.set(chunks[i], offset);\n                offset += chunks[i].length;\n            }\n        }\n        else {\n            for (let i = 0, _i = chunks.length - 1; i < _i; i++) {\n                const chunk = chunks[i];\n                for (let j = 0, _j = chunk.length; j < _j; j++)\n                    ret[offset + j] = chunk[j];\n                offset += chunk.length;\n            }\n        }\n        const lastChunk = chunks[chunks.length - 1];\n        if (ret.buffer && currentIndex >= array.currentSize) {\n            ret.set(lastChunk, offset);\n        }\n        else {\n            for (let j = 0, _j = lastChunk.length; j < _j; j++)\n                ret[offset + j] = lastChunk[j];\n        }\n        return ret;\n    }\n    ChunkedArray._compact = _compact;\n    /**\n     * The size of the initial chunk is elementSize * initialCount.\n     * Use the provided array as the initial chunk. The size of the array must be divisible by the elementSize.\n     */\n    function create(ctor, elementSize, chunkSize, initialChunkOrCount) {\n        const ret = {\n            ctor,\n            elementSize,\n            growBy: Math.max(1, Math.ceil(chunkSize)),\n            allocatedSize: 0,\n            elementCount: 0,\n            currentSize: 0,\n            currentChunk: void 0,\n            currentIndex: 0,\n            chunks: []\n        };\n        if (typeof initialChunkOrCount === 'undefined')\n            return ret;\n        if (typeof initialChunkOrCount === 'number') {\n            ret.currentChunk = new ctor(initialChunkOrCount * elementSize);\n            ret.allocatedSize = initialChunkOrCount * elementSize;\n            ret.currentSize = ret.currentChunk.length;\n            ret.chunks[0] = ret.currentChunk;\n            return ret;\n        }\n        const initialChunk = initialChunkOrCount;\n        if (initialChunk.length % elementSize !== 0)\n            throw new Error('initialChunk length must be a multiple of the element size.');\n        ret.currentChunk = initialChunk;\n        ret.allocatedSize = initialChunk.length;\n        ret.currentSize = initialChunk.length;\n        ret.chunks[0] = initialChunk;\n        return ret;\n    }\n    ChunkedArray.create = create;\n})(ChunkedArray || (ChunkedArray = {}));\nexport { ChunkedArray };\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { sort, arraySwap } from './sort.js';\nfunction sortAsc(bs, i, j) { return bs[i].key < bs[j].key ? -1 : 1; }\nfunction _makeBuckets(indices, getKey, sortBuckets, start, end) {\n    const buckets = new Map();\n    const bucketList = [];\n    let prevKey = getKey(indices[0]);\n    let isBucketed = true;\n    for (let i = start; i < end; i++) {\n        const key = getKey(indices[i]);\n        if (buckets.has(key)) {\n            buckets.get(key).count++;\n            if (prevKey !== key)\n                isBucketed = false;\n        }\n        else {\n            const bucket = { key, count: 1, offset: i };\n            buckets.set(key, bucket);\n            bucketList[bucketList.length] = bucket;\n        }\n        prevKey = key;\n    }\n    const bucketOffsets = new Int32Array(bucketList.length + 1);\n    bucketOffsets[bucketList.length] = end;\n    let sorted = true;\n    if (sortBuckets) {\n        for (let i = 1, _i = bucketList.length; i < _i; i++) {\n            if (bucketList[i - 1].key > bucketList[i].key) {\n                sorted = false;\n                break;\n            }\n        }\n    }\n    if (isBucketed && sorted) {\n        for (let i = 0; i < bucketList.length; i++)\n            bucketOffsets[i] = bucketList[i].offset;\n        return bucketOffsets;\n    }\n    if (sortBuckets && !sorted) {\n        sort(bucketList, 0, bucketList.length, sortAsc, arraySwap);\n    }\n    let offset = 0;\n    for (let i = 0; i < bucketList.length; i++) {\n        const b = bucketList[i];\n        b.offset = offset;\n        offset += b.count;\n    }\n    const reorderedIndices = new Int32Array(end - start);\n    for (let i = start; i < end; i++) {\n        const key = getKey(indices[i]);\n        const bucket = buckets.get(key);\n        reorderedIndices[bucket.offset++] = indices[i];\n    }\n    for (let i = 0, _i = reorderedIndices.length; i < _i; i++) {\n        indices[i + start] = reorderedIndices[i];\n    }\n    bucketOffsets[0] = start;\n    for (let i = 1; i < bucketList.length; i++)\n        bucketOffsets[i] = bucketList[i - 1].offset + start;\n    return bucketOffsets;\n}\n/**\n * Reorders indices so that the same keys are next to each other, [start, end)\n * Returns the offsets of buckets. So that [offsets[i], offsets[i + 1]) determines the range.\n */\nexport function makeBuckets(indices, getKey, options) {\n    const s = (options && options.start) || 0;\n    const e = (options && options.end) || indices.length;\n    if (e - s <= 0)\n        throw new Error('Can only bucket non-empty collections.');\n    return _makeBuckets(indices, getKey, !!(options && options.sort), s, e);\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport class EquivalenceClassesImpl {\n    createGroup(key, value) {\n        const id = this.id++;\n        const keys = [key];\n        this.groups[id] = keys;\n        return { id, keys, value };\n    }\n    // Return the group representative.\n    add(key, a) {\n        const hash = this.getHash(a);\n        if (this.byHash.has(hash)) {\n            const groups = this.byHash.get(hash);\n            for (let i = 0, _i = groups.length; i < _i; i++) {\n                const group = groups[i];\n                if (this.areEqual(a, group.value)) {\n                    group.keys[group.keys.length] = key;\n                    return group.value;\n                }\n            }\n            const group = this.createGroup(key, a);\n            groups[groups.length] = group;\n            return group.value;\n        }\n        else {\n            const group = this.createGroup(key, a);\n            this.byHash.set(hash, [group]);\n            return group.value;\n        }\n    }\n    constructor(getHash, areEqual) {\n        this.getHash = getHash;\n        this.areEqual = areEqual;\n        this.id = 0;\n        this.byHash = new Map();\n        this.groups = [];\n    }\n}\nexport function EquivalenceClasses(getHash, areEqual) {\n    return new EquivalenceClassesImpl(getHash, areEqual);\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\n// from http://burtleburtle.net/bob/hash/integer.html\nexport function hash1(i) {\n    let a = i ^ (i >> 4);\n    a = (a ^ 0xdeadbeef) + (a << 5);\n    a = a ^ (a >> 11);\n    return a;\n}\nexport function hash2(i, j) {\n    let a = 23;\n    a = (31 * a + i) | 0;\n    a = (31 * a + j) | 0;\n    a = a ^ (a >> 4);\n    a = (a ^ 0xdeadbeef) + (a << 5);\n    a = a ^ (a >> 11);\n    return a;\n}\nexport function hash3(i, j, k) {\n    let a = 23;\n    a = (31 * a + i) | 0;\n    a = (31 * a + j) | 0;\n    a = (31 * a + k) | 0;\n    a = a ^ (a >> 4);\n    a = (a ^ 0xdeadbeef) + (a << 5);\n    a = a ^ (a >> 11);\n    return a;\n}\nexport function hash4(i, j, k, l) {\n    let a = 23;\n    a = (31 * a + i) | 0;\n    a = (31 * a + j) | 0;\n    a = (31 * a + k) | 0;\n    a = (31 * a + l) | 0;\n    a = a ^ (a >> 4);\n    a = (a ^ 0xdeadbeef) + (a << 5);\n    a = a ^ (a >> 11);\n    return a;\n}\nexport function hashString(s) {\n    let h = 0;\n    for (let i = 0, l = s.length; i < l; i++) {\n        h = (h << 5) - h + s.charCodeAt(i) | 0;\n    }\n    return h;\n}\n/**\n * A unique number for each pair of integers\n * Biggest representable pair is (67108863, 67108863) (limit imposed by Number.MAX_SAFE_INTEGER)\n */\nexport function cantorPairing(a, b) {\n    return (a + b) * (a + b + 1) / 2 + b;\n}\n/**\n * A unique number for each sorted pair of integers\n * Biggest representable pair is (67108863, 67108863) (limit imposed by Number.MAX_SAFE_INTEGER)\n */\nexport function sortedCantorPairing(a, b) {\n    return a < b ? cantorPairing(a, b) : cantorPairing(b, a);\n}\nexport function invertCantorPairing(out, z) {\n    const w = Math.floor((Math.sqrt(8 * z + 1) - 1) / 2);\n    const t = (w * w + w) / 2;\n    const y = z - t;\n    out[0] = w - y;\n    out[1] = y;\n    return out;\n}\n/**\n * 32 bit FNV-1a hash, see http://isthe.com/chongo/tech/comp/fnv/\n */\nexport function hashFnv32a(array) {\n    let hval = 0x811c9dc5;\n    for (let i = 0, il = array.length; i < il; ++i) {\n        hval ^= array[i];\n        hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n    }\n    return hval >>> 0;\n}\n/**\n * 256 bit FNV-1a hash, returns 8 32-bit words\n * Based on the FNV-1a algorithm extended to 256 bits\n */\nexport function hashFnv256a(array, out) {\n    out.set(Fnv256Base);\n    for (let i = 0, il = array.length; i < il; ++i) {\n        // XOR with input byte\n        out[0] ^= array[i] & 0xff;\n        // Multiply by FNV prime (256-bit multiplication)\n        multiplyBy256BitPrime(out);\n    }\n    return out;\n}\n/**\n * 256-bit object hash function using FNV-1a\n */\nexport function hashFnv256o(obj) {\n    return _Hasher256.hash(obj);\n}\nclass ObjectHasher256 {\n    constructor() {\n        this.hashTarget = new Uint32Array(8);\n        this.numberBytes = new Uint8Array(8);\n        this.numberView = new DataView(this.numberBytes.buffer);\n    }\n    hash(obj) {\n        this.hashTarget.set(Fnv256Base);\n        this.hashValue(obj, 0);\n        return hashFnv256aToHex(this.hashTarget);\n    }\n    hashValue(value, depth) {\n        if (depth > 50)\n            return;\n        const type = typeof value;\n        this.addByte(type.charCodeAt(0));\n        switch (type) {\n            case 'string':\n                this.addString(value);\n                break;\n            case 'number':\n                this.addNumber(value);\n                break;\n            case 'boolean':\n                this.addByte(value ? 1 : 0);\n                break;\n            case 'object':\n                if (value === null) {\n                    this.addByte(0);\n                }\n                else if (Array.isArray(value)) {\n                    this.addArray(value, depth);\n                }\n                else {\n                    this.addObject(value, depth);\n                }\n                break;\n            case 'undefined':\n                this.addByte(255);\n                break;\n        }\n    }\n    addByte(byte) {\n        // XOR with input byte\n        this.hashTarget[0] ^= byte & 0xff;\n        // Multiply by FNV prime (256-bit multiplication)\n        multiplyBy256BitPrime(this.hashTarget);\n    }\n    addString(str) {\n        for (let i = 0; i < str.length; i++) {\n            const code = str.charCodeAt(i);\n            if (code < 128) {\n                this.addByte(code);\n            }\n            else if (code < 2048) {\n                this.addByte(0xc0 | (code >> 6));\n                this.addByte(0x80 | (code & 0x3f));\n            }\n            else {\n                this.addByte(0xe0 | (code >> 12));\n                this.addByte(0x80 | ((code >> 6) & 0x3f));\n                this.addByte(0x80 | (code & 0x3f));\n            }\n        }\n    }\n    addNumber(num) {\n        if (Number.isNaN(num)) {\n            this.addByte(0x7f);\n            this.addByte(0xc0);\n            this.addByte(0x00);\n            this.addByte(0x00);\n            this.addByte(0x00);\n            this.addByte(0x00);\n            this.addByte(0x00);\n            this.addByte(0x00);\n        }\n        else if (!Number.isFinite(num)) {\n            if (num > 0) {\n                this.addByte(0x7f);\n                this.addByte(0x80);\n                this.addByte(0x00);\n                this.addByte(0x00);\n            }\n            else {\n                this.addByte(0xff);\n                this.addByte(0x80);\n                this.addByte(0x00);\n                this.addByte(0x00);\n            }\n            this.addByte(0x00);\n            this.addByte(0x00);\n            this.addByte(0x00);\n            this.addByte(0x00);\n        }\n        else {\n            this.numberView.setFloat64(0, num, false);\n            for (let i = 0; i < 8; i++) {\n                this.addByte(this.numberBytes[i]);\n            }\n        }\n    }\n    addArray(arr, depth) {\n        this.addNumber(arr.length);\n        for (let i = 0; i < arr.length; i++) {\n            this.addNumber(i);\n            this.hashValue(arr[i], depth + 1);\n        }\n    }\n    addObject(obj, depth) {\n        const keys = Object.keys(obj).sort();\n        this.addNumber(keys.length);\n        for (const key of keys) {\n            this.addString(key);\n            this.hashValue(obj[key], depth + 1);\n        }\n    }\n}\nconst _Hasher256 = new ObjectHasher256();\nconst Fnv256Base = new Uint32Array([\n    0x6c62272e, 0x07bb0142, 0x62b82175, 0x6295c58d,\n    0x16d67530, 0xdd7121e3, 0xb3174000, 0x00000100\n]);\nconst MultTmp1 = new Uint32Array(8);\nconst MultTmp2 = new Uint32Array(8);\n/**\n * Helper function to multiply 256-bit number by FNV prime\n */\nfunction multiplyBy256BitPrime(hash) {\n    // Since FNV 256-bit prime is 2^88 + 2^8 + 0x3b, we can optimize:\n    // hash * prime = hash * (2^88 + 2^8 + 0x3b) = (hash << 88) + (hash << 8) + hash * 0x3b\n    // hash << 88 (shift left by 88 bits = 2 full 32-bit words + 24 bits)\n    MultTmp1[0] = 0;\n    MultTmp1[1] = 0;\n    MultTmp1[2] = hash[0] << 24;\n    MultTmp1[3] = (hash[0] >>> 8) | (hash[1] << 24);\n    MultTmp1[4] = (hash[1] >>> 8) | (hash[2] << 24);\n    MultTmp1[5] = (hash[2] >>> 8) | (hash[3] << 24);\n    MultTmp1[6] = (hash[3] >>> 8) | (hash[4] << 24);\n    MultTmp1[7] = (hash[4] >>> 8) | (hash[5] << 24);\n    // hash << 8\n    MultTmp2[0] = hash[0] << 8;\n    MultTmp2[1] = (hash[0] >>> 24) | (hash[1] << 8);\n    MultTmp2[2] = (hash[1] >>> 24) | (hash[2] << 8);\n    MultTmp2[3] = (hash[2] >>> 24) | (hash[3] << 8);\n    MultTmp2[4] = (hash[3] >>> 24) | (hash[4] << 8);\n    MultTmp2[5] = (hash[4] >>> 24) | (hash[5] << 8);\n    MultTmp2[6] = (hash[5] >>> 24) | (hash[6] << 8);\n    MultTmp2[7] = (hash[6] >>> 24) | (hash[7] << 8);\n    // hash * 0x3b (simple multiplication by small constant)\n    let carry = 0;\n    for (let i = 0; i < 8; i++) {\n        const product = hash[i] * 0x3b + carry;\n        hash[i] = product >>> 0;\n        carry = Math.floor(product / 0x100000000);\n    }\n    // Add all three components: (hash << 88) + (hash << 8) + hash * 0x3b\n    carry = 0;\n    for (let i = 0; i < 8; i++) {\n        const sum = hash[i] + MultTmp1[i] + MultTmp2[i] + carry;\n        hash[i] = sum >>> 0;\n        carry = sum >= 0x100000000 ? 1 : 0;\n    }\n}\nconst _8digit_padding = [\n    '00000000',\n    '0000000',\n    '000000',\n    '00000',\n    '0000',\n    '000',\n    '00',\n    '0'\n];\nfunction padHexNumber(num) {\n    const base = num.toString(16);\n    if (base.length >= 8)\n        return base; // No padding needed\n    return _8digit_padding[base.length] + base;\n}\n/**\n * Convert 256-bit hash to hex string\n */\nfunction hashFnv256aToHex(hash) {\n    let result = '';\n    for (let i = 7; i >= 0; i--) {\n        result += padHexNumber(hash[i]);\n    }\n    return result;\n}\n/**\n * 32-bit Murmur hash\n */\nexport function hashMurmur32o(obj, seed = 42) {\n    const jsonString = JSON.stringify(obj);\n    return murmurHash3_32(jsonString, seed);\n}\n/**\n * 128-bit Murmur hash\n */\nexport function hashMurmur128o(obj, seed = 42) {\n    const jsonString = JSON.stringify(obj);\n    return murmurHash3_128(jsonString, seed);\n}\n/**\n * MurmurHash3 32-bit implementation\n * @param key - The input string to hash\n * @param seed - The seed value (default: 0)\n * @returns The 32-bit hash as a number\n */\nexport function murmurHash3_32(key, seed) {\n    let h = seed >>> 0;\n    const remainder = key.length % 4;\n    const bytes = key.length - remainder;\n    for (let i = 0; i < bytes; i += 4) {\n        let k = (key.charCodeAt(i) & 0xff) |\n            ((key.charCodeAt(i + 1) & 0xff) << 8) |\n            ((key.charCodeAt(i + 2) & 0xff) << 16) |\n            ((key.charCodeAt(i + 3) & 0xff) << 24);\n        k = Math.imul(k, 0xcc9e2d51);\n        k = (k << 15) | (k >>> 17);\n        k = Math.imul(k, 0x1b873593);\n        h ^= k;\n        h = (h << 13) | (h >>> 19);\n        h = Math.imul(h, 5) + 0xe6546b64;\n    }\n    let k = 0;\n    switch (remainder) {\n        case 3: k ^= (key.charCodeAt(bytes + 2) & 0xff) << 16;\n        case 2: k ^= (key.charCodeAt(bytes + 1) & 0xff) << 8;\n        case 1:\n            k ^= (key.charCodeAt(bytes) & 0xff);\n            k = Math.imul(k, 0xcc9e2d51);\n            k = (k << 15) | (k >>> 17);\n            k = Math.imul(k, 0x1b873593);\n            h ^= k;\n    }\n    h ^= key.length;\n    h ^= h >>> 16;\n    h = Math.imul(h, 0x85ebca6b);\n    h ^= h >>> 13;\n    h = Math.imul(h, 0xc2b2ae35);\n    h ^= h >>> 16;\n    return h >>> 0;\n}\n/**\n * MurmurHash3 128-bit implementation\n * @param key - The input data to hash\n * @param seed - The seed value (default: 0)\n * @returns The 128-bit hash as a hexadecimal string\n */\nexport function murmurHash3_128_fromBytes(key, seed) {\n    // This fakeString approach is much faster than `new TextDecoder('ascii').decode(key)`\n    const fakeString = {\n        length: key.length,\n        charCodeAt(i) { return key[i]; },\n    };\n    return murmurHash3_128(fakeString, seed);\n}\n/**\n * MurmurHash3 128-bit implementation\n * @param key - The input string to hash\n * @param seed - The seed value (default: 0)\n * @returns The 128-bit hash as a hexadecimal string\n */\nexport function murmurHash3_128(key, seed) {\n    let h1 = seed >>> 0;\n    let h2 = seed >>> 0;\n    let h3 = seed >>> 0;\n    let h4 = seed >>> 0;\n    const remainder = key.length % 16;\n    const bytes = key.length - remainder;\n    for (let i = 0; i < bytes; i += 16) {\n        let k1 = (key.charCodeAt(i) & 0xff) |\n            ((key.charCodeAt(i + 1) & 0xff) << 8) |\n            ((key.charCodeAt(i + 2) & 0xff) << 16) |\n            ((key.charCodeAt(i + 3) & 0xff) << 24);\n        let k2 = (key.charCodeAt(i + 4) & 0xff) |\n            ((key.charCodeAt(i + 5) & 0xff) << 8) |\n            ((key.charCodeAt(i + 6) & 0xff) << 16) |\n            ((key.charCodeAt(i + 7) & 0xff) << 24);\n        let k3 = (key.charCodeAt(i + 8) & 0xff) |\n            ((key.charCodeAt(i + 9) & 0xff) << 8) |\n            ((key.charCodeAt(i + 10) & 0xff) << 16) |\n            ((key.charCodeAt(i + 11) & 0xff) << 24);\n        let k4 = (key.charCodeAt(i + 12) & 0xff) |\n            ((key.charCodeAt(i + 13) & 0xff) << 8) |\n            ((key.charCodeAt(i + 14) & 0xff) << 16) |\n            ((key.charCodeAt(i + 15) & 0xff) << 24);\n        k1 = Math.imul(k1, 0x239b961b);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = Math.imul(k1, 0xab0e9789);\n        h1 ^= k1;\n        h1 = (h1 << 19) | (h1 >>> 13);\n        h1 += h2;\n        h1 = Math.imul(h1, 5) + 0x561ccd1b;\n        k2 = Math.imul(k2, 0xab0e9789);\n        k2 = (k2 << 16) | (k2 >>> 16);\n        k2 = Math.imul(k2, 0x38b34ae5);\n        h2 ^= k2;\n        h2 = (h2 << 17) | (h2 >>> 15);\n        h2 += h3;\n        h2 = Math.imul(h2, 5) + 0x0bcaa747;\n        k3 = Math.imul(k3, 0x38b34ae5);\n        k3 = (k3 << 17) | (k3 >>> 15);\n        k3 = Math.imul(k3, 0xa1e38b93);\n        h3 ^= k3;\n        h3 = (h3 << 15) | (h3 >>> 17);\n        h3 += h4;\n        h3 = Math.imul(h3, 5) + 0x96cd1c35;\n        k4 = Math.imul(k4, 0xa1e38b93);\n        k4 = (k4 << 13) | (k4 >>> 19);\n        k4 = Math.imul(k4, 0x239b961b);\n        h4 ^= k4;\n        h4 = (h4 << 13) | (h4 >>> 19);\n        h4 += h1;\n        h4 = Math.imul(h4, 5) + 0x32ac3b17;\n    }\n    let k1 = 0, k2 = 0, k3 = 0, k4 = 0;\n    switch (remainder) {\n        case 15: k4 ^= key.charCodeAt(bytes + 14) << 16;\n        case 14: k4 ^= key.charCodeAt(bytes + 13) << 8;\n        case 13:\n            k4 ^= key.charCodeAt(bytes + 12);\n            k4 = Math.imul(k4, 0xa1e38b93);\n            k4 = (k4 << 13) | (k4 >>> 19);\n            k4 = Math.imul(k4, 0x239b961b);\n            h4 ^= k4;\n        case 12: k3 ^= key.charCodeAt(bytes + 11) << 24;\n        case 11: k3 ^= key.charCodeAt(bytes + 10) << 16;\n        case 10: k3 ^= key.charCodeAt(bytes + 9) << 8;\n        case 9:\n            k3 ^= key.charCodeAt(bytes + 8);\n            k3 = Math.imul(k3, 0x38b34ae5);\n            k3 = (k3 << 17) | (k3 >>> 15);\n            k3 = Math.imul(k3, 0xa1e38b93);\n            h3 ^= k3;\n        case 8: k2 ^= key.charCodeAt(bytes + 7) << 24;\n        case 7: k2 ^= key.charCodeAt(bytes + 6) << 16;\n        case 6: k2 ^= key.charCodeAt(bytes + 5) << 8;\n        case 5:\n            k2 ^= key.charCodeAt(bytes + 4);\n            k2 = Math.imul(k2, 0xab0e9789);\n            k2 = (k2 << 16) | (k2 >>> 16);\n            k2 = Math.imul(k2, 0x38b34ae5);\n            h2 ^= k2;\n        case 4: k1 ^= key.charCodeAt(bytes + 3) << 24;\n        case 3: k1 ^= key.charCodeAt(bytes + 2) << 16;\n        case 2: k1 ^= key.charCodeAt(bytes + 1) << 8;\n        case 1:\n            k1 ^= key.charCodeAt(bytes);\n            k1 = Math.imul(k1, 0x239b961b);\n            k1 = (k1 << 15) | (k1 >>> 17);\n            k1 = Math.imul(k1, 0xab0e9789);\n            h1 ^= k1;\n    }\n    h1 ^= key.length;\n    h2 ^= key.length;\n    h3 ^= key.length;\n    h4 ^= key.length;\n    h1 += h2;\n    h1 += h3;\n    h1 += h4;\n    h2 += h1;\n    h3 += h1;\n    h4 += h1;\n    h1 ^= h1 >>> 16;\n    h1 = Math.imul(h1, 0x85ebca6b);\n    h1 ^= h1 >>> 13;\n    h1 = Math.imul(h1, 0xc2b2ae35);\n    h1 ^= h1 >>> 16;\n    h2 ^= h2 >>> 16;\n    h2 = Math.imul(h2, 0x85ebca6b);\n    h2 ^= h2 >>> 13;\n    h2 = Math.imul(h2, 0xc2b2ae35);\n    h2 ^= h2 >>> 16;\n    h3 ^= h3 >>> 16;\n    h3 = Math.imul(h3, 0x85ebca6b);\n    h3 ^= h3 >>> 13;\n    h3 = Math.imul(h3, 0xc2b2ae35);\n    h3 ^= h3 >>> 16;\n    h4 ^= h4 >>> 16;\n    h4 = Math.imul(h4, 0x85ebca6b);\n    h4 ^= h4 >>> 13;\n    h4 = Math.imul(h4, 0xc2b2ae35);\n    h4 ^= h4 >>> 16;\n    h1 += h2;\n    h1 += h3;\n    h1 += h4;\n    h2 += h1;\n    h3 += h1;\n    h4 += h1;\n    return ((h1 >>> 0).toString(16).padStart(8, '0') +\n        (h2 >>> 0).toString(16).padStart(8, '0') +\n        (h3 >>> 0).toString(16).padStart(8, '0') +\n        (h4 >>> 0).toString(16).padStart(8, '0'));\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * from https://github.com/dsehnal/CIFTools.js\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport function arrayFind(array, f) {\n    for (let i = 0, _i = array.length; i < _i; i++) {\n        if (f(array[i]))\n            return array[i];\n    }\n    return void 0;\n}\nexport function iterableToArray(it) {\n    if (Array.from)\n        return Array.from(it);\n    const ret = [];\n    while (true) {\n        const { done, value } = it.next();\n        if (done)\n            break;\n        ret[ret.length] = value;\n    }\n    return ret;\n}\n/** Fills the array so that array[0] = start and array[array.length - 1] = end */\nexport function createRangeArray(start, end, ctor) {\n    const len = end - start + 1;\n    const array = ctor ? new ctor(len) : new Int32Array(len);\n    for (let i = 0; i < len; i++) {\n        array[i] = i + start;\n    }\n    return array;\n}\nexport function arrayPickIndices(array, indices) {\n    const ret = new (arrayGetCtor(array))(indices.length);\n    for (let i = 0, _i = indices.length; i < _i; i++) {\n        ret[i] = array[indices[i]];\n    }\n    return ret;\n}\nexport function arrayGetCtor(data) {\n    const ret = data.constructor;\n    if (!ret)\n        throw new Error('data does not define a constructor and it should');\n    return ret;\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { AminoAcidNames, BaseNames } from '../../types.js';\n/**\n * Map of intra component bond orders in aminoacids and nucleotides assuming standard IUPAC naming.\n * The key is constructed as `${compId}|${atomId1}|${atomId2}` with `atomId1 < atomId2`.\n */\nconst IntraBondOrderTable = new Map([\n    ['HIS|CD2|CG', 2],\n    ['HIS|CE1|ND1', 2],\n    ['ARG|CZ|NH2', 2],\n    ['PHE|CE1|CZ', 2],\n    ['PHE|CD2|CE2', 2],\n    ['PHE|CD1|CG', 2],\n    ['TRP|CD1|CG', 2],\n    ['TRP|CD2|CE2', 2],\n    ['TRP|CE3|CZ3', 2],\n    ['TRP|CH2|CZ2', 2],\n    ['ASN|CG|OD1', 2],\n    ['GLN|CD|OE1', 2],\n    ['TYR|CD1|CG', 2],\n    ['TYR|CD2|CE2', 2],\n    ['TYR|CE1|CZ', 2],\n    ['ASP|CG|OD1', 2],\n    ['GLU|CD|OE1', 2],\n    ['G|C8|N7', 2],\n    ['G|C4|C5', 2],\n    ['G|C2|N3', 2],\n    ['G|C6|O6', 2],\n    ['C|C4|N3', 2],\n    ['C|C5|C6', 2],\n    ['C|C2|O2', 2],\n    ['A|C2|N3', 2],\n    ['A|C6|N1', 2],\n    ['A|C4|C5', 2],\n    ['A|C8|N7', 2],\n    ['U|C5|C6', 2],\n    ['U|C2|O2', 2],\n    ['U|C4|O4', 2],\n    ['DG|C8|N7', 2],\n    ['DG|C4|C5', 2],\n    ['DG|C2|N3', 2],\n    ['DG|C6|O6', 2],\n    ['DC|C4|N3', 2],\n    ['DC|C5|C6', 2],\n    ['DC|C2|O2', 2],\n    ['DA|C2|N3', 2],\n    ['DA|C6|N1', 2],\n    ['DA|C4|C5', 2],\n    ['DA|C8|N7', 2],\n    ['DT|C5|C6', 2],\n    ['DT|C2|O2', 2],\n    ['DT|C4|O4', 2]\n]);\n/**\n * Get order for bonds in aminoacids and nucleotides assuming standard IUPAC naming\n */\nexport function getIntraBondOrderFromTable(compId, atomId1, atomId2) {\n    [atomId1, atomId2] = atomId1 < atomId2 ? [atomId1, atomId2] : [atomId2, atomId1];\n    if (AminoAcidNames.has(compId) && atomId1 === 'C' && atomId2 === 'O')\n        return 2;\n    if (BaseNames.has(compId) && atomId1 === 'OP1' && atomId2 === 'P')\n        return 2;\n    return IntraBondOrderTable.get(`${compId}|${atomId1}|${atomId2}`) || 1;\n}\n/**\n * Map of inter component bond orders assuming PDBx/mmCIF naming.\n * The key is constructed as `${compId1}|${compId2}|${atomId1}|${atomId2}` with `compId1 < compId2`.\n */\nconst InterBondOrderTable = new Map([\n    ['LYS|NZ|RET|C15', 2] // Schiff base in Rhodopsin and Bacteriorhodopsin\n]);\n/**\n * Get order for bonds between component assuming PDBx/mmCIF naming.\n */\nexport function getInterBondOrderFromTable(compId1, atomId1, compId2, atomId2) {\n    if (compId1 > compId2) {\n        [compId1, compId2] = [compId2, compId1];\n        [atomId1, atomId2] = [atomId2, atomId1];\n    }\n    return InterBondOrderTable.get(`${compId1}|${atomId1}|${compId2}|${atomId2}`) || 1;\n}\n","/**\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { UUID } from '../../../mol-util/index.js';\nexport { Topology };\nvar Topology;\n(function (Topology) {\n    function create(label, basic, bonds, format) {\n        return {\n            id: UUID.create22(),\n            label,\n            basic,\n            sourceData: format,\n            bonds\n        };\n    }\n    Topology.create = create;\n})(Topology || (Topology = {}));\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { arrayPickIndices, cantorPairing } from '../../mol-data/util.js';\nimport { LinkedIndex, SortedArray } from '../../mol-data/int.js';\nexport var IntAdjacencyGraph;\n(function (IntAdjacencyGraph) {\n    function areEqual(a, b) {\n        if (a === b)\n            return true;\n        if (a.vertexCount !== b.vertexCount || a.edgeCount !== b.edgeCount)\n            return false;\n        const { a: aa, b: ab, offset: ao } = a;\n        const { a: ba, b: bb, offset: bo } = b;\n        for (let i = 0, _i = a.a.length; i < _i; i++) {\n            if (aa[i] !== ba[i])\n                return false;\n        }\n        for (let i = 0, _i = a.b.length; i < _i; i++) {\n            if (ab[i] !== bb[i])\n                return false;\n        }\n        for (let i = 0, _i = a.offset.length; i < _i; i++) {\n            if (ao[i] !== bo[i])\n                return false;\n        }\n        for (const k of Object.keys(a.edgeProps)) {\n            const pa = a.edgeProps[k], pb = b.edgeProps[k];\n            if (!pb)\n                return false;\n            for (let i = 0, _i = pa.length; i < _i; i++) {\n                if (pa[i] !== pb[i])\n                    return false;\n            }\n        }\n        return true;\n    }\n    IntAdjacencyGraph.areEqual = areEqual;\n    class IntGraphImpl {\n        getEdgeIndex(i, j) {\n            let a, b;\n            if (i < j) {\n                a = i;\n                b = j;\n            }\n            else {\n                a = j;\n                b = i;\n            }\n            for (let t = this.offset[a], _t = this.offset[a + 1]; t < _t; t++) {\n                if (this.b[t] === b)\n                    return t;\n            }\n            return -1;\n        }\n        getDirectedEdgeIndex(i, j) {\n            for (let t = this.offset[i], _t = this.offset[i + 1]; t < _t; t++) {\n                if (this.b[t] === j)\n                    return t;\n            }\n            return -1;\n        }\n        getVertexEdgeCount(i) {\n            return this.offset[i + 1] - this.offset[i];\n        }\n        constructor(offset, a, b, edgeCount, edgeProps, props) {\n            this.offset = offset;\n            this.a = a;\n            this.b = b;\n            this.edgeCount = edgeCount;\n            this.props = props;\n            this.vertexCount = offset.length - 1;\n            this.edgeProps = (edgeProps || {});\n        }\n    }\n    function create(offset, a, b, edgeCount, edgeProps, props) {\n        return new IntGraphImpl(offset, a, b, edgeCount, edgeProps, props);\n    }\n    IntAdjacencyGraph.create = create;\n    class EdgeBuilder {\n        createGraph(edgeProps, props) {\n            return create(this.offsets, this.a, this.b, this.edgeCount, edgeProps, props);\n        }\n        /**\n         * @example\n         *   const property = new Int32Array(builder.slotCount);\n         *   for (let i = 0; i < builder.edgeCount; i++) {\n         *     builder.addNextEdge();\n         *     builder.assignProperty(property, srcProp[i]);\n         *   }\n         *   return builder.createGraph({ property });\n         */\n        addNextEdge() {\n            const a = this.xs[this.current], b = this.ys[this.current];\n            const oa = this.offsets[a] + this.bucketFill[a];\n            this.a[oa] = a;\n            this.b[oa] = b;\n            this.bucketFill[a]++;\n            const ob = this.offsets[b] + this.bucketFill[b];\n            this.a[ob] = b;\n            this.b[ob] = a;\n            this.bucketFill[b]++;\n            this.current++;\n            this.curA = oa;\n            this.curB = ob;\n        }\n        /** Builds property-less graph */\n        addAllEdges() {\n            for (let i = 0; i < this.edgeCount; i++) {\n                this.addNextEdge();\n            }\n        }\n        assignProperty(prop, value) {\n            prop[this.curA] = value;\n            prop[this.curB] = value;\n        }\n        assignDirectedProperty(propA, valueA, propB, valueB) {\n            propA[this.curA] = valueA;\n            propA[this.curB] = valueB;\n            propB[this.curB] = valueA;\n            propB[this.curA] = valueB;\n        }\n        constructor(vertexCount, xs, ys) {\n            this.vertexCount = vertexCount;\n            this.xs = xs;\n            this.ys = ys;\n            this.current = 0;\n            this.curA = 0;\n            this.curB = 0;\n            this.edgeCount = xs.length;\n            this.offsets = new Int32Array(this.vertexCount + 1);\n            this.bucketFill = new Int32Array(this.vertexCount);\n            const bucketSizes = new Int32Array(this.vertexCount);\n            for (let i = 0, _i = this.xs.length; i < _i; i++)\n                bucketSizes[this.xs[i]]++;\n            for (let i = 0, _i = this.ys.length; i < _i; i++)\n                bucketSizes[this.ys[i]]++;\n            let offset = 0;\n            for (let i = 0; i < this.vertexCount; i++) {\n                this.offsets[i] = offset;\n                offset += bucketSizes[i];\n            }\n            this.offsets[this.vertexCount] = offset;\n            this.slotCount = offset;\n            this.a = new Int32Array(offset);\n            this.b = new Int32Array(offset);\n        }\n    }\n    IntAdjacencyGraph.EdgeBuilder = EdgeBuilder;\n    class DirectedEdgeBuilder {\n        createGraph(edgeProps, props) {\n            return create(this.offsets, this.a, this.b, this.edgeCount, edgeProps, props);\n        }\n        /**\n         * @example\n         *   const property = new Int32Array(builder.slotCount);\n         *   for (let i = 0; i < builder.edgeCount; i++) {\n         *     builder.addNextEdge();\n         *     builder.assignProperty(property, srcProp[i]);\n         *   }\n         *   return builder.createGraph({ property });\n         */\n        addNextEdge() {\n            const a = this.xs[this.current], b = this.ys[this.current];\n            const oa = this.offsets[a] + this.bucketFill[a];\n            this.a[oa] = a;\n            this.b[oa] = b;\n            this.bucketFill[a]++;\n            this.current++;\n            this.curA = oa;\n        }\n        /** Builds property-less graph */\n        addAllEdges() {\n            for (let i = 0; i < this.edgeCount; i++) {\n                this.addNextEdge();\n            }\n        }\n        assignProperty(prop, value) {\n            prop[this.curA] = value;\n        }\n        constructor(vertexCount, xs, ys) {\n            this.vertexCount = vertexCount;\n            this.xs = xs;\n            this.ys = ys;\n            this.current = 0;\n            this.curA = 0;\n            this.edgeCount = xs.length;\n            this.offsets = new Int32Array(this.vertexCount + 1);\n            this.bucketFill = new Int32Array(this.vertexCount);\n            const bucketSizes = new Int32Array(this.vertexCount);\n            for (let i = 0, _i = this.xs.length; i < _i; i++)\n                bucketSizes[this.xs[i]]++;\n            let offset = 0;\n            for (let i = 0; i < this.vertexCount; i++) {\n                this.offsets[i] = offset;\n                offset += bucketSizes[i];\n            }\n            this.offsets[this.vertexCount] = offset;\n            this.slotCount = offset;\n            this.a = new Int32Array(offset);\n            this.b = new Int32Array(offset);\n        }\n    }\n    IntAdjacencyGraph.DirectedEdgeBuilder = DirectedEdgeBuilder;\n    class UniqueEdgeBuilder {\n        addEdge(i, j) {\n            let u = i, v = j;\n            if (i > j) {\n                u = j;\n                v = i;\n            }\n            const id = cantorPairing(u, v);\n            if (this.included.has(id))\n                return false;\n            this.included.add(id);\n            this.xs[this.xs.length] = u;\n            this.ys[this.ys.length] = v;\n            return true;\n        }\n        getGraph() {\n            return fromVertexPairs(this.vertexCount, this.xs, this.ys);\n        }\n        // if we cant to add custom props as well\n        getEdgeBuiler() {\n            return new EdgeBuilder(this.vertexCount, this.xs, this.ys);\n        }\n        constructor(vertexCount) {\n            this.vertexCount = vertexCount;\n            this.xs = [];\n            this.ys = [];\n            this.included = new Set();\n        }\n    }\n    IntAdjacencyGraph.UniqueEdgeBuilder = UniqueEdgeBuilder;\n    function fromVertexPairs(vertexCount, xs, ys) {\n        const graphBuilder = new IntAdjacencyGraph.EdgeBuilder(vertexCount, xs, ys);\n        graphBuilder.addAllEdges();\n        return graphBuilder.createGraph({});\n    }\n    IntAdjacencyGraph.fromVertexPairs = fromVertexPairs;\n    function induceByVertices(graph, vertexIndices, props) {\n        const { b, offset, vertexCount, edgeProps } = graph;\n        const vertexMap = new Int32Array(vertexCount);\n        for (let i = 0, _i = vertexIndices.length; i < _i; i++)\n            vertexMap[vertexIndices[i]] = i + 1;\n        let newEdgeCount = 0;\n        for (let i = 0; i < vertexCount; i++) {\n            if (vertexMap[i] === 0)\n                continue;\n            for (let j = offset[i], _j = offset[i + 1]; j < _j; j++) {\n                if (b[j] > i && vertexMap[b[j]] !== 0)\n                    newEdgeCount++;\n            }\n        }\n        const newOffsets = new Int32Array(vertexIndices.length + 1);\n        const edgeIndices = new Int32Array(2 * newEdgeCount);\n        const newA = new Int32Array(2 * newEdgeCount);\n        const newB = new Int32Array(2 * newEdgeCount);\n        let eo = 0, vo = 0;\n        for (let i = 0; i < vertexCount; i++) {\n            if (vertexMap[i] === 0)\n                continue;\n            const aa = vertexMap[i] - 1;\n            for (let j = offset[i], _j = offset[i + 1]; j < _j; j++) {\n                const bb = vertexMap[b[j]];\n                if (bb === 0)\n                    continue;\n                newA[eo] = aa;\n                newB[eo] = bb - 1;\n                edgeIndices[eo] = j;\n                eo++;\n            }\n            newOffsets[++vo] = eo;\n        }\n        const newEdgeProps = {};\n        for (const key of Object.keys(edgeProps)) {\n            newEdgeProps[key] = arrayPickIndices(edgeProps[key], edgeIndices);\n        }\n        return create(newOffsets, newA, newB, newEdgeCount, newEdgeProps, props);\n    }\n    IntAdjacencyGraph.induceByVertices = induceByVertices;\n    function connectedComponents(graph) {\n        const vCount = graph.vertexCount;\n        if (vCount === 0)\n            return { componentCount: 0, componentIndex: new Int32Array(0) };\n        if (graph.edgeCount === 0) {\n            const componentIndex = new Int32Array(vCount);\n            for (let i = 0, _i = vCount; i < _i; i++) {\n                componentIndex[i] = i;\n            }\n            return { componentCount: vCount, componentIndex };\n        }\n        const componentIndex = new Int32Array(vCount);\n        for (let i = 0, _i = vCount; i < _i; i++)\n            componentIndex[i] = -1;\n        let currentComponent = 0;\n        componentIndex[0] = currentComponent;\n        const { offset, b: neighbor } = graph;\n        const stack = [0];\n        const list = LinkedIndex(vCount);\n        list.remove(0);\n        while (stack.length > 0) {\n            const v = stack.pop();\n            const cIdx = componentIndex[v];\n            for (let eI = offset[v], _eI = offset[v + 1]; eI < _eI; eI++) {\n                const n = neighbor[eI];\n                if (!list.has(n))\n                    continue;\n                list.remove(n);\n                stack.push(n);\n                componentIndex[n] = cIdx;\n            }\n            // check if we visited all vertices.\n            // If not, create a new component and continue.\n            if (stack.length === 0 && list.head >= 0) {\n                stack.push(list.head);\n                componentIndex[list.head] = ++currentComponent;\n                list.remove(list.head);\n            }\n        }\n        return { componentCount: vCount, componentIndex };\n    }\n    IntAdjacencyGraph.connectedComponents = connectedComponents;\n    /**\n     * Check if any vertex in `verticesA` is connected to any vertex in `verticesB`\n     * via at most `maxDistance` edges.\n     *\n     * Returns true if verticesA and verticesB are intersecting.\n     */\n    function areVertexSetsConnected(graph, verticesA, verticesB, maxDistance) {\n        // check if A and B are intersecting, this handles maxDistance = 0\n        if (SortedArray.areIntersecting(verticesA, verticesB))\n            return true;\n        if (maxDistance < 1)\n            return false;\n        const visited = new Set();\n        for (let i = 0, il = verticesA.length; i < il; ++i) {\n            visited.add(verticesA[i]);\n        }\n        return areVertexSetsConnectedImpl(graph, verticesA, verticesB, maxDistance, visited);\n    }\n    IntAdjacencyGraph.areVertexSetsConnected = areVertexSetsConnected;\n})(IntAdjacencyGraph || (IntAdjacencyGraph = {}));\nfunction areVertexSetsConnectedImpl(graph, frontier, target, distance, visited) {\n    const { b: neighbor, offset } = graph;\n    const newFrontier = [];\n    for (let i = 0, il = frontier.length; i < il; ++i) {\n        const src = frontier[i];\n        for (let j = offset[src], jl = offset[src + 1]; j < jl; ++j) {\n            const other = neighbor[j];\n            if (visited.has(other))\n                continue;\n            if (SortedArray.has(target, other))\n                return true;\n            visited.add(other);\n            newFrontier[newFrontier.length] = other;\n        }\n    }\n    return distance > 1 ? areVertexSetsConnectedImpl(graph, newFrontier, target, distance - 1, visited) : false;\n}\n","/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { FormatPropertyProvider } from '../../../../mol-model-formats/structure/common/property.js';\nimport { CustomPropertyDescriptor } from '../../../custom-property.js';\nimport { Column, Table } from '../../../../mol-data/db.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { MmcifFormat } from '../../../../mol-model-formats/structure/mmcif.js';\nimport { toTable } from '../../../../mol-io/reader/cif/schema.js';\nexport var GlobalModelTransformInfo;\n(function (GlobalModelTransformInfo) {\n    const CategoryName = 'molstar_global_model_transform_info';\n    GlobalModelTransformInfo.Schema = {\n        [CategoryName]: {\n            matrix: Column.Schema.Matrix(4, 4, Column.Schema.float)\n        }\n    };\n    GlobalModelTransformInfo.Descriptor = CustomPropertyDescriptor({\n        name: CategoryName,\n        cifExport: {\n            categories: [{\n                    name: CategoryName,\n                    instance(ctx) {\n                        const mat = get(ctx.firstModel);\n                        if (!mat)\n                            return CifWriter.Category.Empty;\n                        const table = Table.ofRows(GlobalModelTransformInfo.Schema.molstar_global_model_transform_info, [{ matrix: mat }]);\n                        return CifWriter.Category.ofTable(table);\n                    }\n                }],\n            prefix: 'molstar'\n        }\n    });\n    GlobalModelTransformInfo.Provider = FormatPropertyProvider.create(GlobalModelTransformInfo.Descriptor);\n    function attach(model, matrix) {\n        if (!model.customProperties.has(GlobalModelTransformInfo.Descriptor)) {\n            model.customProperties.add(GlobalModelTransformInfo.Descriptor);\n        }\n        GlobalModelTransformInfo.Provider.set(model, matrix);\n    }\n    GlobalModelTransformInfo.attach = attach;\n    function get(model) {\n        return GlobalModelTransformInfo.Provider.get(model);\n    }\n    GlobalModelTransformInfo.get = get;\n    function fromMmCif(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return;\n        const cat = model.sourceData.data.frame.categories[CategoryName];\n        if (!cat)\n            return;\n        const table = toTable(GlobalModelTransformInfo.Schema[CategoryName], cat);\n        if (table._rowCount === 0)\n            return;\n        return table.matrix.value(0);\n    }\n    GlobalModelTransformInfo.fromMmCif = fromMmCif;\n    function hasData(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const cat = model.sourceData.data.frame.categories[CategoryName];\n        return !!cat && cat.rowCount > 0;\n    }\n    GlobalModelTransformInfo.hasData = hasData;\n    function writeMmCif(encoder, matrix) {\n        encoder.writeCategory({\n            name: CategoryName,\n            instance() {\n                const table = Table.ofRows(GlobalModelTransformInfo.Schema.molstar_global_model_transform_info, [{ matrix: matrix }]);\n                return CifWriter.Category.ofTable(table);\n            }\n        });\n    }\n    GlobalModelTransformInfo.writeMmCif = writeMmCif;\n})(GlobalModelTransformInfo || (GlobalModelTransformInfo = {}));\n","/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n */\nexport function toUint32(x) {\n    return x >>> 0;\n}\nexport function toInt32(x) {\n    return x >> 0;\n}\nexport function readUshort(buff, p) {\n    return (buff[p]) | (buff[p + 1] << 8);\n}\nexport function writeUshort(buff, p, n) {\n    buff[p] = (n) & 255;\n    buff[p + 1] = (n >> 8) & 255;\n}\nexport function readUint(buff, p) {\n    return (buff[p + 3] * (256 * 256 * 256)) + ((buff[p + 2] << 16) | (buff[p + 1] << 8) | buff[p]);\n}\nexport function writeUint(buff, p, n) {\n    buff[p] = n & 255;\n    buff[p + 1] = (n >> 8) & 255;\n    buff[p + 2] = (n >> 16) & 255;\n    buff[p + 3] = (n >> 24) & 255;\n}\nfunction readASCII(buff, p, l) {\n    let s = '';\n    for (let i = 0; i < l; i++)\n        s += String.fromCharCode(buff[p + i]);\n    return s;\n}\n// function writeASCII(data: Uint8Array, p: number, s: string){\n//     for(let i=0; i<s.length; i++) data[p+i] = s.charCodeAt(i);\n// }\nfunction pad(n) {\n    return n.length < 2 ? '0' + n : n;\n}\nexport function readUTF8(buff, p, l) {\n    let s = '', ns;\n    for (let i = 0; i < l; i++)\n        s += '%' + pad(buff[p + i].toString(16));\n    try {\n        ns = decodeURIComponent(s);\n    }\n    catch (e) {\n        return readASCII(buff, p, l);\n    }\n    return ns;\n}\nexport function writeUTF8(buff, p, str) {\n    const strl = str.length;\n    let i = 0;\n    for (let ci = 0; ci < strl; ci++) {\n        const code = str.charCodeAt(ci);\n        if ((code & (0xffffffff - (1 << 7) + 1)) === 0) {\n            buff[p + i] = (code);\n            i++;\n        }\n        else if ((code & (0xffffffff - (1 << 11) + 1)) === 0) {\n            buff[p + i] = (192 | (code >> 6));\n            buff[p + i + 1] = (128 | ((code >> 0) & 63));\n            i += 2;\n        }\n        else if ((code & (0xffffffff - (1 << 16) + 1)) === 0) {\n            buff[p + i] = (224 | (code >> 12));\n            buff[p + i + 1] = (128 | ((code >> 6) & 63));\n            buff[p + i + 2] = (128 | ((code >> 0) & 63));\n            i += 3;\n        }\n        else if ((code & (0xffffffff - (1 << 21) + 1)) === 0) {\n            buff[p + i] = (240 | (code >> 18));\n            buff[p + i + 1] = (128 | ((code >> 12) & 63));\n            buff[p + i + 2] = (128 | ((code >> 6) & 63));\n            buff[p + i + 3] = (128 | ((code >> 0) & 63));\n            i += 4;\n        }\n        else\n            throw new Error('e');\n    }\n    return i;\n}\nexport function sizeUTF8(str) {\n    const strl = str.length;\n    let i = 0;\n    for (let ci = 0; ci < strl; ci++) {\n        const code = str.charCodeAt(ci);\n        if ((code & (0xffffffff - (1 << 7) + 1)) === 0) {\n            i++;\n        }\n        else if ((code & (0xffffffff - (1 << 11) + 1)) === 0) {\n            i += 2;\n        }\n        else if ((code & (0xffffffff - (1 << 16) + 1)) === 0) {\n            i += 3;\n        }\n        else if ((code & (0xffffffff - (1 << 21) + 1)) === 0) {\n            i += 4;\n        }\n        else {\n            throw new Error('e');\n        }\n    }\n    return i;\n}\n","/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n */\nconst CrcTable = (function () {\n    const tab = new Uint32Array(256);\n    for (let n = 0; n < 256; n++) {\n        let c = n;\n        for (let k = 0; k < 8; k++) {\n            if (c & 1)\n                c = 0xedb88320 ^ (c >>> 1);\n            else\n                c = c >>> 1;\n        }\n        tab[n] = c;\n    }\n    return tab;\n})();\nfunction _crc(c, buf, off, len) {\n    for (let i = 0; i < len; i++) {\n        c = CrcTable[(c ^ buf[off + i]) & 0xff] ^ (c >>> 8);\n    }\n    return c;\n}\nexport function crc(b, o, l) {\n    return _crc(0xffffffff, b, o, l) ^ 0xffffffff;\n}\nexport function adler(data, o, len) {\n    let a = 1, b = 0;\n    let off = o;\n    const end = o + len;\n    while (off < end) {\n        const eend = Math.min(off + 5552, end);\n        while (off < eend) {\n            a += data[off++];\n            b += a;\n        }\n        a = a % 65521;\n        b = b % 65521;\n    }\n    return (b << 16) | a;\n}\n","/**\n * Copyright (c) 2020-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n */\nconst hasCompressionStreamSupport = {\n    deflate: undefined,\n    'deflate-raw': undefined,\n    gzip: undefined\n};\nexport function checkCompressionStreamSupport(format) {\n    if (hasCompressionStreamSupport[format] === undefined) {\n        try {\n            new CompressionStream(format);\n            hasCompressionStreamSupport[format] = true;\n        }\n        catch (e) {\n            hasCompressionStreamSupport[format] = false;\n        }\n    }\n    return !!hasCompressionStreamSupport[format];\n}\nexport const U = (function () {\n    const u16 = Uint16Array, u32 = Uint32Array;\n    return {\n        next_code: new u16(16),\n        bl_count: new u16(16),\n        ordr: [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\n        of0: [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 999, 999, 999],\n        exb: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0],\n        ldef: new u16(32),\n        df0: [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 65535, 65535],\n        dxb: [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0],\n        ddef: new u32(32),\n        flmap: new u16(512), fltree: [],\n        fdmap: new u16(32), fdtree: [],\n        lmap: new u16(32768), ltree: [], ttree: [],\n        dmap: new u16(32768), dtree: [],\n        imap: new u16(512), itree: [],\n        // rev9 : new u16(  512)\n        rev15: new u16(1 << 15),\n        lhst: new u32(286), dhst: new u32(30), ihst: new u32(19),\n        lits: new u32(15000),\n        strt: new u16(1 << 16),\n        prev: new u16(1 << 15)\n    };\n})();\n(function () {\n    const len = 1 << 15;\n    for (let i = 0; i < len; i++) {\n        let x = i;\n        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n        U.rev15[i] = (((x >>> 16) | (x << 16))) >>> 17;\n    }\n    function pushV(tgt, n, sv) {\n        while (n-- !== 0)\n            tgt.push(0, sv);\n    }\n    for (let i = 0; i < 32; i++) {\n        U.ldef[i] = (U.of0[i] << 3) | U.exb[i];\n        U.ddef[i] = (U.df0[i] << 4) | U.dxb[i];\n    }\n    pushV(U.fltree, 144, 8);\n    pushV(U.fltree, 255 - 143, 9);\n    pushV(U.fltree, 279 - 255, 7);\n    pushV(U.fltree, 287 - 279, 8);\n    /*\n    var i = 0;\n    for(; i<=143; i++) U.fltree.push(0,8);\n    for(; i<=255; i++) U.fltree.push(0,9);\n    for(; i<=279; i++) U.fltree.push(0,7);\n    for(; i<=287; i++) U.fltree.push(0,8);\n    */\n    makeCodes(U.fltree, 9);\n    codes2map(U.fltree, 9, U.flmap);\n    revCodes(U.fltree, 9);\n    pushV(U.fdtree, 32, 5);\n    // for(i=0;i<32; i++) U.fdtree.push(0,5);\n    makeCodes(U.fdtree, 5);\n    codes2map(U.fdtree, 5, U.fdmap);\n    revCodes(U.fdtree, 5);\n    pushV(U.itree, 19, 0);\n    pushV(U.ltree, 286, 0);\n    pushV(U.dtree, 30, 0);\n    pushV(U.ttree, 320, 0);\n    /*\n    for(var i=0; i< 19; i++) U.itree.push(0,0);\n    for(var i=0; i<286; i++) U.ltree.push(0,0);\n    for(var i=0; i< 30; i++) U.dtree.push(0,0);\n    for(var i=0; i<320; i++) U.ttree.push(0,0);\n    */\n})();\nexport function codes2map(tree, MAX_BITS, map) {\n    const max_code = tree.length;\n    const r15 = U.rev15;\n    for (let i = 0; i < max_code; i += 2) {\n        if (tree[i + 1] !== 0) {\n            const lit = i >> 1;\n            const cl = tree[i + 1], val = (lit << 4) | cl; // :  (0x8000 | (U.of0[lit-257]<<7) | (U.exb[lit-257]<<4) | cl);\n            const rest = (MAX_BITS - cl);\n            let i0 = tree[i] << rest;\n            const i1 = i0 + (1 << rest);\n            // tree[i]=r15[i0]>>>(15-MAX_BITS);\n            while (i0 !== i1) {\n                const p0 = r15[i0] >>> (15 - MAX_BITS);\n                map[p0] = val;\n                i0++;\n            }\n        }\n    }\n}\nexport function makeCodes(tree, MAX_BITS) {\n    const max_code = tree.length;\n    const bl_count = U.bl_count;\n    for (let i = 0; i <= MAX_BITS; i++)\n        bl_count[i] = 0;\n    for (let i = 1; i < max_code; i += 2)\n        bl_count[tree[i]]++;\n    const next_code = U.next_code; // smallest code for each length\n    let code = 0;\n    bl_count[0] = 0;\n    for (let bits = 1; bits <= MAX_BITS; bits++) {\n        code = (code + bl_count[bits - 1]) << 1;\n        next_code[bits] = code;\n    }\n    for (let n = 0; n < max_code; n += 2) {\n        const len = tree[n + 1];\n        if (len !== 0) {\n            tree[n] = next_code[len];\n            next_code[len]++;\n        }\n    }\n}\nexport function revCodes(tree, MAX_BITS) {\n    const r15 = U.rev15, imb = 15 - MAX_BITS;\n    for (let i = 0; i < tree.length; i += 2) {\n        const i0 = (tree[i] << (MAX_BITS - tree[i + 1]));\n        tree[i] = r15[i0] >>> imb;\n    }\n}\n","/**\n * Copyright (c) 2020-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n */\nimport { U, makeCodes, codes2map, checkCompressionStreamSupport } from './util.js';\nfunction InflateContext(data, buf) {\n    const noBuf = buf === undefined;\n    if (buf === undefined)\n        buf = new Uint8Array((data.length >>> 2) << 3);\n    return {\n        data,\n        buf,\n        noBuf,\n        BFINAL: 0,\n        off: 0,\n        pos: 0\n    };\n}\nfunction inflateBlocks(ctx, count) {\n    const { data, noBuf } = ctx;\n    let { buf, BFINAL, off, pos } = ctx;\n    let iBlock = 0;\n    while (BFINAL === 0 && iBlock < count) {\n        let lmap, dmap;\n        let ML = 0, MD = 0;\n        BFINAL = _bitsF(data, pos, 1);\n        iBlock += 1;\n        const BTYPE = _bitsF(data, pos + 1, 2);\n        pos += 3;\n        if (BTYPE === 0) {\n            // uncompressed block\n            if ((pos & 7) !== 0)\n                pos += 8 - (pos & 7);\n            const p8 = (pos >>> 3) + 4;\n            const len = data[p8 - 4] | (data[p8 - 3] << 8);\n            if (noBuf)\n                buf = _check(buf, off + len);\n            buf.set(new Uint8Array(data.buffer, data.byteOffset + p8, len), off);\n            pos = ((p8 + len) << 3);\n            off += len;\n            continue;\n        }\n        // grow output buffer if not provided\n        if (noBuf)\n            buf = _check(buf, off + (1 << 17));\n        if (BTYPE === 1) {\n            // block compressed with fixed Huffman codes\n            lmap = U.flmap;\n            dmap = U.fdmap;\n            ML = (1 << 9) - 1;\n            MD = (1 << 5) - 1;\n        }\n        else if (BTYPE === 2) {\n            // block compressed with dynamic Huffman codes\n            const HLIT = _bitsE(data, pos, 5) + 257;\n            const HDIST = _bitsE(data, pos + 5, 5) + 1;\n            const HCLEN = _bitsE(data, pos + 10, 4) + 4;\n            pos += 14;\n            for (let i = 0; i < 38; i += 2) {\n                U.itree[i] = 0;\n                U.itree[i + 1] = 0;\n            }\n            let tl = 1;\n            for (let i = 0; i < HCLEN; i++) {\n                const l = _bitsE(data, pos + i * 3, 3);\n                U.itree[(U.ordr[i] << 1) + 1] = l;\n                if (l > tl)\n                    tl = l;\n            }\n            pos += 3 * HCLEN;\n            makeCodes(U.itree, tl);\n            codes2map(U.itree, tl, U.imap);\n            lmap = U.lmap;\n            dmap = U.dmap;\n            pos = _decodeTiny(U.imap, (1 << tl) - 1, HLIT + HDIST, data, pos, U.ttree);\n            const mx0 = _copyOut(U.ttree, 0, HLIT, U.ltree);\n            ML = (1 << mx0) - 1;\n            const mx1 = _copyOut(U.ttree, HLIT, HDIST, U.dtree);\n            MD = (1 << mx1) - 1;\n            makeCodes(U.ltree, mx0);\n            codes2map(U.ltree, mx0, lmap);\n            makeCodes(U.dtree, mx1);\n            codes2map(U.dtree, mx1, dmap);\n        }\n        else {\n            throw new Error(`unknown BTYPE ${BTYPE}`);\n        }\n        while (true) {\n            const code = lmap[_get17(data, pos) & ML];\n            pos += code & 15;\n            const lit = code >>> 4;\n            if ((lit >>> 8) === 0) {\n                buf[off++] = lit;\n            }\n            else if (lit === 256) {\n                break;\n            }\n            else {\n                let end = off + lit - 254;\n                if (lit > 264) {\n                    const ebs = U.ldef[lit - 257];\n                    end = off + (ebs >>> 3) + _bitsE(data, pos, ebs & 7);\n                    pos += ebs & 7;\n                }\n                const dcode = dmap[_get17(data, pos) & MD];\n                pos += dcode & 15;\n                const dlit = dcode >>> 4;\n                const dbs = U.ddef[dlit];\n                const dst = (dbs >>> 4) + _bitsF(data, pos, dbs & 15);\n                pos += dbs & 15;\n                if (noBuf)\n                    buf = _check(buf, off + (1 << 17));\n                while (off < end) {\n                    buf[off] = buf[off++ - dst];\n                    buf[off] = buf[off++ - dst];\n                    buf[off] = buf[off++ - dst];\n                    buf[off] = buf[off++ - dst];\n                }\n                off = end;\n            }\n        }\n    }\n    ctx.buf = buf;\n    ctx.BFINAL = BFINAL;\n    ctx.off = off;\n    ctx.pos = pos;\n}\n// inflating a 44 MB gzip file to 225 MB.\n// Using JS\n// inflate: 570.8759765625 ms\n// inflate: 562.950927734375 ms\n// inflate: 595.06591796875 ms\n// inflate: 584.8740234375 ms\n// inflate: 583.31396484375 ms\n// Using DecompressionStream\n// inflate: 502.001953125 ms\n// inflate: 476.818115234375 ms\n// inflate: 476.68701171875 ms\n// inflate: 422.319091796875 ms\n// inflate: 428.925048828125 ms\n// https://tools.ietf.org/html/rfc1951\nexport async function _inflate(runtime, data, buf) {\n    if (data[0] === 3 && data[1] === 0)\n        return (buf ? buf : new Uint8Array(0));\n    if (checkCompressionStreamSupport('deflate-raw')) {\n        const ds = new DecompressionStream('deflate-raw');\n        const blob = new Blob([data]);\n        const decompressedStream = blob.stream().pipeThrough(ds);\n        let offset = 0;\n        const chunks = [];\n        const reader = decompressedStream.getReader();\n        const readChunk = async () => {\n            const { done, value } = await reader.read();\n            if (done)\n                return;\n            if (runtime.shouldUpdate) {\n                await runtime.update({ message: 'Inflating blocks...', current: offset, max: buf === null || buf === void 0 ? void 0 : buf.length });\n            }\n            if (buf) {\n                buf.set(value, offset);\n            }\n            else {\n                chunks.push(value);\n            }\n            offset += value.length;\n            return readChunk();\n        };\n        await readChunk();\n        if (!buf) {\n            buf = new Uint8Array(offset);\n            for (let i = 0, j = 0; i < chunks.length; i++) {\n                buf.set(chunks[i], j);\n                j += chunks[i].length;\n            }\n        }\n        return buf;\n    }\n    const ctx = InflateContext(data, buf);\n    while (ctx.BFINAL === 0) {\n        if (runtime.shouldUpdate) {\n            await runtime.update({ message: 'Inflating blocks...', current: ctx.pos, max: data.length });\n        }\n        inflateBlocks(ctx, 100);\n    }\n    return ctx.buf.length === ctx.off ? ctx.buf : ctx.buf.slice(0, ctx.off);\n}\nfunction _check(buf, len) {\n    const bl = buf.length;\n    if (len <= bl)\n        return buf;\n    const nbuf = new Uint8Array(Math.max(bl << 1, len));\n    nbuf.set(buf, 0);\n    return nbuf;\n}\nfunction _decodeTiny(lmap, LL, len, data, pos, tree) {\n    let i = 0;\n    while (i < len) {\n        const code = lmap[_get17(data, pos) & LL];\n        pos += code & 15;\n        const lit = code >>> 4;\n        if (lit <= 15) {\n            tree[i] = lit;\n            i++;\n        }\n        else {\n            let ll = 0, n = 0;\n            if (lit === 16) {\n                n = (3 + _bitsE(data, pos, 2));\n                pos += 2;\n                ll = tree[i - 1];\n            }\n            else if (lit === 17) {\n                n = (3 + _bitsE(data, pos, 3));\n                pos += 3;\n            }\n            else if (lit === 18) {\n                n = (11 + _bitsE(data, pos, 7));\n                pos += 7;\n            }\n            const ni = i + n;\n            while (i < ni) {\n                tree[i] = ll;\n                i++;\n            }\n        }\n    }\n    return pos;\n}\nfunction _copyOut(src, off, len, tree) {\n    let mx = 0, i = 0;\n    const tl = tree.length >>> 1;\n    while (i < len) {\n        const v = src[i + off];\n        tree[(i << 1)] = 0;\n        tree[(i << 1) + 1] = v;\n        if (v > mx)\n            mx = v;\n        i++;\n    }\n    while (i < tl) {\n        tree[(i << 1)] = 0;\n        tree[(i << 1) + 1] = 0;\n        i++;\n    }\n    return mx;\n}\nfunction _bitsE(dt, pos, length) {\n    return ((dt[pos >>> 3] | (dt[(pos >>> 3) + 1] << 8)) >>> (pos & 7)) & ((1 << length) - 1);\n}\nfunction _bitsF(dt, pos, length) {\n    return ((dt[pos >>> 3] | (dt[(pos >>> 3) + 1] << 8) | (dt[(pos >>> 3) + 2] << 16)) >>> (pos & 7)) & ((1 << length) - 1);\n}\nfunction _get17(dt, pos) {\n    return (dt[pos >>> 3] | (dt[(pos >>> 3) + 1] << 8) | (dt[(pos >>> 3) + 2] << 16)) >>> (pos & 7);\n}\n","/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n */\nexport function _hufTree(hst, tree, MAXL) {\n    const list = [];\n    const hl = hst.length, tl = tree.length;\n    for (let i = 0; i < tl; i += 2) {\n        tree[i] = 0;\n        tree[i + 1] = 0;\n    }\n    for (let i = 0; i < hl; i++)\n        if (hst[i] !== 0)\n            list.push({ lit: i, f: hst[i], d: undefined });\n    const end = list.length, l2 = list.slice(0);\n    if (end === 0)\n        return 0; // empty histogram (usually for dist)\n    if (end === 1) {\n        const lit = list[0].lit, l2 = lit === 0 ? 1 : 0;\n        tree[(lit << 1) + 1] = 1;\n        tree[(l2 << 1) + 1] = 1;\n        return 1;\n    }\n    list.sort(function (a, b) { return a.f - b.f; });\n    let a = list[0], b = list[1], i0 = 0, i1 = 1, i2 = 2;\n    list[0] = {\n        lit: -1,\n        f: a.f + b.f,\n        l: a,\n        r: b,\n        d: 0\n    };\n    while (i1 !== end - 1) {\n        if (i0 !== i1 && (i2 === end || list[i0].f < list[i2].f)) {\n            a = list[i0++];\n        }\n        else {\n            a = list[i2++];\n        }\n        if (i0 !== i1 && (i2 === end || list[i0].f < list[i2].f)) {\n            b = list[i0++];\n        }\n        else {\n            b = list[i2++];\n        }\n        list[i1++] = {\n            lit: -1,\n            f: a.f + b.f,\n            l: a,\n            r: b,\n            d: undefined\n        };\n    }\n    let maxl = setDepth(list[i1 - 1], 0);\n    if (maxl > MAXL) {\n        restrictDepth(l2, MAXL, maxl);\n        maxl = MAXL;\n    }\n    for (let i = 0; i < end; i++)\n        tree[(l2[i].lit << 1) + 1] = l2[i].d;\n    return maxl;\n}\nfunction setDepth(t, d) {\n    if (t.lit !== -1) {\n        t.d = d;\n        return d;\n    }\n    return Math.max(setDepth(t.l, d + 1), setDepth(t.r, d + 1));\n}\nfunction restrictDepth(dps, MD, maxl) {\n    let i = 0, dbt = 0;\n    const bCost = 1 << (maxl - MD);\n    dps.sort(function (a, b) { return b.d === a.d ? a.f - b.f : b.d - a.d; });\n    for (i = 0; i < dps.length; i++) {\n        if (dps[i].d > MD) {\n            const od = dps[i].d;\n            dps[i].d = MD;\n            dbt += bCost - (1 << (maxl - od));\n        }\n        else {\n            break;\n        }\n    }\n    dbt = dbt >>> (maxl - MD);\n    while (dbt > 0) {\n        const od = dps[i].d;\n        if (od < MD) {\n            dps[i].d++;\n            dbt -= (1 << (MD - od - 1));\n        }\n        else {\n            i++;\n        }\n    }\n    for (; i >= 0; i--) {\n        if (dps[i].d === MD && dbt < 0) {\n            dps[i].d--;\n            dbt++;\n        }\n    }\n    if (dbt !== 0)\n        console.log('debt left');\n}\n","/**\n * Copyright (c) 2020-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n */\nimport { assertUnreachable } from '../type-helpers.js';\nimport { _hufTree } from './huffman.js';\nimport { U, revCodes, makeCodes, checkCompressionStreamSupport } from './util.js';\nfunction DeflateContext(data, out, opos, lvl) {\n    const { lits, strt, prev } = U;\n    return {\n        data,\n        out,\n        opt: Opts[lvl],\n        i: 0,\n        pos: opos << 3,\n        cvrd: 0,\n        dlen: data.length,\n        li: 0,\n        lc: 0,\n        bs: 0,\n        ebits: 0,\n        c: 0,\n        nc: 0,\n        lits,\n        strt,\n        prev\n    };\n}\nfunction deflateChunk(ctx, count) {\n    const { data, dlen, out, opt } = ctx;\n    let { i, pos, cvrd, li, lc, bs, ebits, c, nc } = ctx;\n    const { lits, strt, prev } = U;\n    const end = Math.min(i + count, dlen);\n    for (; i < end; i++) {\n        c = nc;\n        if (i + 1 < dlen - 2) {\n            nc = _hash(data, i + 1);\n            const ii = ((i + 1) & 0x7fff);\n            prev[ii] = strt[nc];\n            strt[nc] = ii;\n        }\n        if (cvrd <= i) {\n            if ((li > 14000 || lc > 26697) && (dlen - i) > 100) {\n                if (cvrd < i) {\n                    lits[li] = i - cvrd;\n                    li += 2;\n                    cvrd = i;\n                }\n                pos = _writeBlock(((i === dlen - 1) || (cvrd === dlen)) ? 1 : 0, lits, li, ebits, data, bs, i - bs, out, pos);\n                li = lc = ebits = 0;\n                bs = i;\n            }\n            let mch = 0;\n            if (i < dlen - 2) {\n                mch = _bestMatch(data, i, prev, c, Math.min(opt[2], dlen - i), opt[3]);\n            }\n            if (mch !== 0) {\n                const len = mch >>> 16, dst = mch & 0xffff;\n                const lgi = _goodIndex(len, U.of0);\n                U.lhst[257 + lgi]++;\n                const dgi = _goodIndex(dst, U.df0);\n                U.dhst[dgi]++;\n                ebits += U.exb[lgi] + U.dxb[dgi];\n                lits[li] = (len << 23) | (i - cvrd);\n                lits[li + 1] = (dst << 16) | (lgi << 8) | dgi;\n                li += 2;\n                cvrd = i + len;\n            }\n            else {\n                U.lhst[data[i]]++;\n            }\n            lc++;\n        }\n    }\n    ctx.i = i;\n    ctx.pos = pos;\n    ctx.cvrd = cvrd;\n    ctx.li = li;\n    ctx.lc = lc;\n    ctx.bs = bs;\n    ctx.ebits = ebits;\n    ctx.c = c;\n    ctx.nc = nc;\n}\n/**\n * - good_length: reduce lazy search above this match length;\n * - max_lazy: do not perform lazy search above this match length;\n * - nice_length: quit search above this match length;\n */\nconst Opts = [\n    /*      good lazy nice chain */\n    /* 0 */ [0, 0, 0, 0, 0], /* store only */\n    /* 1 */ [4, 4, 8, 4, 0], /* max speed, no lazy matches */\n    /* 2 */ [4, 5, 16, 8, 0],\n    /* 3 */ [4, 6, 16, 16, 0],\n    /* 4 */ [4, 10, 16, 32, 0], /* lazy matches */\n    /* 5 */ [8, 16, 32, 32, 0],\n    /* 6 */ [8, 16, 128, 128, 0],\n    /* 7 */ [8, 32, 128, 256, 0],\n    /* 8 */ [32, 128, 258, 1024, 1],\n    /* 9 */ [32, 258, 258, 4096, 1] /* max compression */\n];\nexport async function _deflateRaw(runtime, data, out, opos, lvl) {\n    if (checkCompressionStreamSupport('deflate-raw')) {\n        const cs = new CompressionStream('deflate-raw');\n        const blob = new Blob([data]);\n        const compressedStream = blob.stream().pipeThrough(cs);\n        const reader = compressedStream.getReader();\n        let offset = opos;\n        const writeChunk = async () => {\n            const { done, value } = await reader.read();\n            if (done)\n                return;\n            if (runtime.shouldUpdate) {\n                await runtime.update({ message: 'Deflating...', current: offset, max: out.length });\n            }\n            out.set(value, offset);\n            offset += value.length;\n            return writeChunk();\n        };\n        await writeChunk();\n        return offset;\n    }\n    const ctx = DeflateContext(data, out, opos, lvl);\n    const { dlen } = ctx;\n    if (lvl === 0) {\n        let { i, pos } = ctx;\n        while (i < dlen) {\n            const len = Math.min(0xffff, dlen - i);\n            _putsE(out, pos, (i + len === dlen ? 1 : 0));\n            pos = _copyExact(data, i, len, out, pos + 8);\n            i += len;\n        }\n        return pos >>> 3;\n    }\n    if (dlen > 2) {\n        ctx.nc = _hash(data, 0);\n        ctx.strt[ctx.nc] = 0;\n    }\n    while (ctx.i < dlen) {\n        if (runtime.shouldUpdate) {\n            await runtime.update({ message: 'Deflating...', current: ctx.i, max: dlen });\n        }\n        deflateChunk(ctx, 1024 * 1024);\n    }\n    let { li, cvrd, pos } = ctx;\n    const { i, lits, bs, ebits } = ctx;\n    if (bs !== i || data.length === 0) {\n        if (cvrd < i) {\n            lits[li] = i - cvrd;\n            li += 2;\n            cvrd = i;\n        }\n        pos = _writeBlock(1, lits, li, ebits, data, bs, i - bs, out, pos);\n    }\n    while ((pos & 7) !== 0)\n        pos++;\n    return pos >>> 3;\n}\nfunction _bestMatch(data, i, prev, c, nice, chain) {\n    let ci = (i & 0x7fff), pi = prev[ci];\n    // console.log(\"----\", i);\n    let dif = ((ci - pi + (1 << 15)) & 0x7fff);\n    if (pi === ci || c !== _hash(data, i - dif))\n        return 0;\n    let tl = 0, td = 0; // top length, top distance\n    const dlim = Math.min(0x7fff, i);\n    while (dif <= dlim && --chain !== 0 && pi !== ci /* && c==UZIP.F._hash(data,i-dif)*/) {\n        if (tl === 0 || (data[i + tl] === data[i + tl - dif])) {\n            let cl = _howLong(data, i, dif);\n            if (cl > tl) {\n                tl = cl;\n                td = dif;\n                if (tl >= nice)\n                    break; //*\n                if (dif + 2 < cl)\n                    cl = dif + 2;\n                let maxd = 0; // pi does not point to the start of the word\n                for (let j = 0; j < cl - 2; j++) {\n                    const ei = (i - dif + j + (1 << 15)) & 0x7fff;\n                    const li = prev[ei];\n                    const curd = (ei - li + (1 << 15)) & 0x7fff;\n                    if (curd > maxd) {\n                        maxd = curd;\n                        pi = ei;\n                    }\n                }\n            }\n        }\n        ci = pi;\n        pi = prev[ci];\n        dif += ((ci - pi + (1 << 15)) & 0x7fff);\n    }\n    return (tl << 16) | td;\n}\nfunction _howLong(data, i, dif) {\n    if (data[i] !== data[i - dif] || data[i + 1] !== data[i + 1 - dif] || data[i + 2] !== data[i + 2 - dif])\n        return 0;\n    const oi = i, l = Math.min(data.length, i + 258);\n    i += 3;\n    // while(i+4<l && data[i]==data[i-dif] && data[i+1]==data[i+1-dif] && data[i+2]==data[i+2-dif] && data[i+3]==data[i+3-dif]) i+=4;\n    while (i < l && data[i] === data[i - dif])\n        i++;\n    return i - oi;\n}\nfunction _hash(data, i) {\n    return (((data[i] << 8) | data[i + 1]) + (data[i + 2] << 4)) & 0xffff;\n    // var hash_shift = 0, hash_mask = 255;\n    // var h = data[i+1] % 251;\n    // h = (((h << 8) + data[i+2]) % 251);\n    // h = (((h << 8) + data[i+2]) % 251);\n    // h = ((h<<hash_shift) ^ (c) ) & hash_mask;\n    // return h | (data[i]<<8);\n    // return (data[i] | (data[i+1]<<8));\n}\nfunction _writeBlock(BFINAL, lits, li, ebits, data, o0, l0, out, pos) {\n    U.lhst[256]++;\n    const [ML, MD, MH, numl, numd, numh, lset, dset] = getTrees();\n    const cstSize = (((pos + 3) & 7) === 0 ? 0 : 8 - ((pos + 3) & 7)) + 32 + (l0 << 3);\n    const fxdSize = ebits + contSize(U.fltree, U.lhst) + contSize(U.fdtree, U.dhst);\n    let dynSize = ebits + contSize(U.ltree, U.lhst) + contSize(U.dtree, U.dhst);\n    dynSize += 14 + 3 * numh + contSize(U.itree, U.ihst) + (U.ihst[16] * 2 + U.ihst[17] * 3 + U.ihst[18] * 7);\n    for (let j = 0; j < 286; j++)\n        U.lhst[j] = 0;\n    for (let j = 0; j < 30; j++)\n        U.dhst[j] = 0;\n    for (let j = 0; j < 19; j++)\n        U.ihst[j] = 0;\n    const BTYPE = (cstSize < fxdSize && cstSize < dynSize) ? 0 : (fxdSize < dynSize ? 1 : 2);\n    _putsF(out, pos, BFINAL);\n    _putsF(out, pos + 1, BTYPE);\n    pos += 3;\n    // let opos = pos;\n    if (BTYPE === 0) {\n        while ((pos & 7) !== 0)\n            pos++;\n        pos = _copyExact(data, o0, l0, out, pos);\n    }\n    else {\n        let ltree, dtree;\n        if (BTYPE === 1) {\n            ltree = U.fltree;\n            dtree = U.fdtree;\n        }\n        else if (BTYPE === 2) {\n            makeCodes(U.ltree, ML);\n            revCodes(U.ltree, ML);\n            makeCodes(U.dtree, MD);\n            revCodes(U.dtree, MD);\n            makeCodes(U.itree, MH);\n            revCodes(U.itree, MH);\n            ltree = U.ltree;\n            dtree = U.dtree;\n            _putsE(out, pos, numl - 257);\n            pos += 5; // 286\n            _putsE(out, pos, numd - 1);\n            pos += 5; // 30\n            _putsE(out, pos, numh - 4);\n            pos += 4; // 19\n            for (let i = 0; i < numh; i++)\n                _putsE(out, pos + i * 3, U.itree[(U.ordr[i] << 1) + 1]);\n            pos += 3 * numh;\n            pos = _codeTiny(lset, U.itree, out, pos);\n            pos = _codeTiny(dset, U.itree, out, pos);\n        }\n        else {\n            assertUnreachable(BTYPE);\n        }\n        let off = o0;\n        for (let si = 0; si < li; si += 2) {\n            const qb = lits[si], len = (qb >>> 23), end = off + (qb & ((1 << 23) - 1));\n            while (off < end)\n                pos = _writeLit(data[off++], ltree, out, pos);\n            if (len !== 0) {\n                const qc = lits[si + 1], dst = (qc >> 16), lgi = (qc >> 8) & 255, dgi = (qc & 255);\n                pos = _writeLit(257 + lgi, ltree, out, pos);\n                _putsE(out, pos, len - U.of0[lgi]);\n                pos += U.exb[lgi];\n                pos = _writeLit(dgi, dtree, out, pos);\n                _putsF(out, pos, dst - U.df0[dgi]);\n                pos += U.dxb[dgi];\n                off += len;\n            }\n        }\n        pos = _writeLit(256, ltree, out, pos);\n    }\n    // console.log(pos-opos, fxdSize, dynSize, cstSize);\n    return pos;\n}\nfunction _copyExact(data, off, len, out, pos) {\n    let p8 = (pos >>> 3);\n    out[p8] = (len);\n    out[p8 + 1] = (len >>> 8);\n    out[p8 + 2] = 255 - out[p8];\n    out[p8 + 3] = 255 - out[p8 + 1];\n    p8 += 4;\n    out.set(new Uint8Array(data.buffer, off, len), p8);\n    // for(var i=0; i<len; i++) out[p8+i]=data[off+i];\n    return pos + ((len + 4) << 3);\n}\n/*\n    Interesting facts:\n    - decompressed block can have bytes, which do not occur in a Huffman tree (copied from the previous block by reference)\n*/\nfunction getTrees() {\n    const ML = _hufTree(U.lhst, U.ltree, 15);\n    const MD = _hufTree(U.dhst, U.dtree, 15);\n    const lset = [];\n    const numl = _lenCodes(U.ltree, lset);\n    const dset = [];\n    const numd = _lenCodes(U.dtree, dset);\n    for (let i = 0; i < lset.length; i += 2)\n        U.ihst[lset[i]]++;\n    for (let i = 0; i < dset.length; i += 2)\n        U.ihst[dset[i]]++;\n    const MH = _hufTree(U.ihst, U.itree, 7);\n    let numh = 19;\n    while (numh > 4 && U.itree[(U.ordr[numh - 1] << 1) + 1] === 0)\n        numh--;\n    return [ML, MD, MH, numl, numd, numh, lset, dset];\n}\nfunction contSize(tree, hst) {\n    let s = 0;\n    for (let i = 0; i < hst.length; i++)\n        s += hst[i] * tree[(i << 1) + 1];\n    return s;\n}\nfunction _codeTiny(set, tree, out, pos) {\n    for (let i = 0; i < set.length; i += 2) {\n        const l = set[i], rst = set[i + 1]; // console.log(l, pos, tree[(l<<1)+1]);\n        pos = _writeLit(l, tree, out, pos);\n        const rsl = l === 16 ? 2 : (l === 17 ? 3 : 7);\n        if (l > 15) {\n            _putsE(out, pos, rst);\n            pos += rsl;\n        }\n    }\n    return pos;\n}\nfunction _lenCodes(tree, set) {\n    let len = tree.length;\n    while (len !== 2 && tree[len - 1] === 0)\n        len -= 2; // when no distances, keep one code with length 0\n    for (let i = 0; i < len; i += 2) {\n        const l = tree[i + 1], nxt = (i + 3 < len ? tree[i + 3] : -1), nnxt = (i + 5 < len ? tree[i + 5] : -1), prv = (i === 0 ? -1 : tree[i - 1]);\n        if (l === 0 && nxt === l && nnxt === l) {\n            let lz = i + 5;\n            while (lz + 2 < len && tree[lz + 2] === l)\n                lz += 2;\n            const zc = Math.min((lz + 1 - i) >>> 1, 138);\n            if (zc < 11)\n                set.push(17, zc - 3);\n            else\n                set.push(18, zc - 11);\n            i += zc * 2 - 2;\n        }\n        else if (l === prv && nxt === l && nnxt === l) {\n            let lz = i + 5;\n            while (lz + 2 < len && tree[lz + 2] === l)\n                lz += 2;\n            const zc = Math.min((lz + 1 - i) >>> 1, 6);\n            set.push(16, zc - 3);\n            i += zc * 2 - 2;\n        }\n        else {\n            set.push(l, 0);\n        }\n    }\n    return len >>> 1;\n}\nfunction _goodIndex(v, arr) {\n    let i = 0;\n    if (arr[i | 16] <= v)\n        i |= 16;\n    if (arr[i | 8] <= v)\n        i |= 8;\n    if (arr[i | 4] <= v)\n        i |= 4;\n    if (arr[i | 2] <= v)\n        i |= 2;\n    if (arr[i | 1] <= v)\n        i |= 1;\n    return i;\n}\nfunction _writeLit(ch, ltree, out, pos) {\n    _putsF(out, pos, ltree[ch << 1]);\n    return pos + ltree[(ch << 1) + 1];\n}\nfunction _putsE(dt, pos, val) {\n    val = val << (pos & 7);\n    const o = (pos >>> 3);\n    dt[o] |= val;\n    dt[o + 1] |= (val >>> 8);\n}\nfunction _putsF(dt, pos, val) {\n    val = val << (pos & 7);\n    const o = (pos >>> 3);\n    dt[o] |= val;\n    dt[o + 1] |= (val >>> 8);\n    dt[o + 2] |= (val >>> 16);\n}\n","/**\n * Copyright (c) 2020-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * ported from https://github.com/photopea/UZIP.js/blob/master/UZIP.js\n * MIT License, Copyright (c) 2018 Photopea\n *\n * - added `ungzip`\n */\nimport { writeUint, writeUshort, sizeUTF8, writeUTF8, readUshort, readUint, readUTF8, toInt32 } from './bin.js';\nimport { crc, adler } from './checksum.js';\nimport { _inflate } from './inflate.js';\nimport { _deflateRaw } from './deflate.js';\nimport { Task } from '../../mol-task/index.js';\nexport function Unzip(buf, onlyNames = false) {\n    return Task.create('Unzip', ctx => unzip(ctx, buf, onlyNames));\n}\nexport async function unzip(runtime, buf, onlyNames = false) {\n    const out = Object.create(null);\n    const data = new Uint8Array(buf);\n    if (readUshort(data, 0) !== 0x4b50) {\n        throw new Error('Invalid ZIP file. A valid ZIP file must start with two magic bytes \\\\x50\\\\x4b (\"PK\" in ASCII).');\n    }\n    let eocd = data.length - 4;\n    while (readUint(data, eocd) !== 0x06054b50)\n        eocd--;\n    let o = eocd;\n    o += 4; // sign  = 0x06054b50\n    o += 4; // disks = 0;\n    const cnu = readUshort(data, o);\n    o += 2;\n    // const cnt = readUshort(data, o);\n    o += 2;\n    // const csize = readUint(data, o);\n    o += 4;\n    const coffs = readUint(data, o);\n    o += 4;\n    o = coffs;\n    for (let i = 0; i < cnu; i++) {\n        // const sign = readUint(data, o);\n        o += 4;\n        o += 4; // versions;\n        o += 4; // flag + compr\n        o += 4; // time\n        // const crc32 = readUint(data, o);\n        o += 4;\n        // const csize = readUint(data, o);\n        o += 4;\n        // const usize = readUint(data, o);\n        o += 4;\n        const nl = readUshort(data, o);\n        const el = readUshort(data, o + 2);\n        const cl = readUshort(data, o + 4);\n        o += 6; // name, extra, comment\n        o += 8; // disk, attribs\n        const roff = readUint(data, o);\n        o += 4;\n        o += nl + el + cl;\n        await _readLocal(runtime, data, roff, out, onlyNames);\n    }\n    // console.log(out);\n    return out;\n}\nasync function _readLocal(runtime, data, o, out, onlyNames) {\n    // const sign  = readUint(data, o);\n    o += 4;\n    // const ver   = readUshort(data, o);\n    o += 2;\n    // const gpflg = readUshort(data, o);\n    o += 2;\n    // if((gpflg&8)!=0) throw \"unknown sizes\";\n    const cmpr = readUshort(data, o);\n    o += 2;\n    // const time  = readUint(data, o);\n    o += 4;\n    // const crc32 = readUint(data, o);\n    o += 4;\n    const csize = readUint(data, o);\n    o += 4;\n    const usize = readUint(data, o);\n    o += 4;\n    const nlen = readUshort(data, o);\n    o += 2;\n    const elen = readUshort(data, o);\n    o += 2;\n    const name = readUTF8(data, o, nlen);\n    // console.log({ name, nlen, elen });\n    o += nlen;\n    o += elen;\n    if (onlyNames) {\n        out[name] = { size: usize, csize };\n        return;\n    }\n    const file = new Uint8Array(data.buffer, o, csize);\n    if (cmpr === 0) {\n        out[name] = file;\n    }\n    else if (cmpr === 8) {\n        const buf = new Uint8Array(usize);\n        await inflateRaw(runtime, file, buf);\n        out[name] = buf;\n    }\n    else {\n        throw new Error(`unknown compression method: ${cmpr}`);\n    }\n}\nexport async function inflateRaw(runtime, file, buf) {\n    return _inflate(runtime, file, buf);\n}\nexport function inflate(runtime, file, buf) {\n    // const CMF = file[0]\n    // const FLG = file[1]\n    // const CM = (CMF&15)\n    // const CINFO = (CMF>>>4);\n    // console.log(CM, CINFO,CMF,FLG);\n    return inflateRaw(runtime, new Uint8Array(file.buffer, file.byteOffset + 2, file.length - 6), buf);\n}\n// https://tools.ietf.org/html/rfc1952\nexport async function ungzip(runtime, file, buf) {\n    // const id1 = file[0]\n    // const id2 = file[1]\n    // const cm = file[2]\n    const flg = file[3];\n    // const mtime = readUint(file, 4)\n    // const xfl = file[8]\n    // const os = file[9]\n    let o = 10;\n    if (flg & 4) { // FEXTRA\n        const xlen = readUshort(file, o);\n        // console.log('FEXTRA', xlen)\n        o += xlen;\n    }\n    if (flg & 8) { // FNAME\n        let zero = o;\n        while (file[zero] !== 0)\n            ++zero;\n        // const name = readUTF8(file, o, zero - o)\n        // console.log('FNAME', name, zero - o)\n        o = zero + 1;\n    }\n    if (flg & 16) { // FCOMMENT\n        let zero = o;\n        while (file[zero] !== 0)\n            ++zero;\n        // const comment = readUTF8(file, o, zero - o)\n        // console.log('FCOMMENT', comment)\n        o = zero + 1;\n    }\n    if (flg & 1) { // FHCRC\n        // const hcrc = readUshort(file, o)\n        // console.log('FHCRC', hcrc)\n        o += 2;\n    }\n    const crc32 = toInt32(readUint(file, file.length - 8));\n    const isize = readUint(file, file.length - 4);\n    if (buf === undefined)\n        buf = new Uint8Array(isize);\n    const blocks = new Uint8Array(file.buffer, file.byteOffset + o, file.length - o - 8);\n    const inflated = await inflateRaw(runtime, blocks, buf);\n    const crcValue = crc(inflated, 0, inflated.length);\n    if (crc32 !== crcValue) {\n        console.error(\"ungzip: checksums don't match\");\n    }\n    return inflated;\n}\nexport async function deflate(runtime, data, opts /* , buf, off*/) {\n    if (opts === undefined)\n        opts = { level: 6 };\n    let off = 0;\n    const buf = new Uint8Array(50 + Math.floor(data.length * 1.1));\n    buf[off] = 120;\n    buf[off + 1] = 156;\n    off += 2;\n    off = await _deflateRaw(runtime, data, buf, off, opts.level);\n    const crcValue = adler(data, 0, data.length);\n    buf[off + 0] = ((crcValue >>> 24) & 255);\n    buf[off + 1] = ((crcValue >>> 16) & 255);\n    buf[off + 2] = ((crcValue >>> 8) & 255);\n    buf[off + 3] = ((crcValue >>> 0) & 255);\n    return new Uint8Array(buf.buffer, 0, off + 4);\n}\nasync function deflateRaw(runtime, data, opts) {\n    if (opts === undefined)\n        opts = { level: 6 };\n    const buf = new Uint8Array(50 + Math.floor(data.length * 1.1));\n    const off = await _deflateRaw(runtime, data, buf, 0, opts.level);\n    return new Uint8Array(buf.buffer, 0, off);\n}\nexport function Zip(obj, noCmpr = false) {\n    return Task.create('Zip', ctx => zip(ctx, obj, noCmpr));\n}\nexport async function zip(runtime, obj, noCmpr = false) {\n    let tot = 0;\n    const zpd = {};\n    for (const p in obj) {\n        const cpr = !_noNeed(p) && !noCmpr, buf = obj[p];\n        const crcValue = crc(buf, 0, buf.length);\n        zpd[p] = {\n            cpr,\n            usize: buf.length,\n            crc: crcValue,\n            file: (cpr ? await deflateRaw(runtime, buf) : buf)\n        };\n    }\n    for (const p in zpd)\n        tot += zpd[p].file.length + 30 + 46 + 2 * sizeUTF8(p);\n    tot += 22;\n    const data = new Uint8Array(tot);\n    let o = 0;\n    const fof = [];\n    for (const p in zpd) {\n        const file = zpd[p];\n        fof.push(o);\n        o = _writeHeader(data, o, p, file, 0);\n    }\n    let i = 0;\n    const ioff = o;\n    for (const p in zpd) {\n        const file = zpd[p];\n        fof.push(o);\n        o = _writeHeader(data, o, p, file, 1, fof[i++]);\n    }\n    const csize = o - ioff;\n    writeUint(data, o, 0x06054b50);\n    o += 4;\n    o += 4; // disks\n    writeUshort(data, o, i);\n    o += 2;\n    writeUshort(data, o, i);\n    o += 2; // number of c d records\n    writeUint(data, o, csize);\n    o += 4;\n    writeUint(data, o, ioff);\n    o += 4;\n    o += 2;\n    return data.buffer;\n}\n// no need to compress .PNG, .ZIP, .JPEG ....\nfunction _noNeed(fn) {\n    const ext = fn.split('.').pop().toLowerCase();\n    return 'png,jpg,jpeg,zip'.indexOf(ext) !== -1;\n}\nfunction _writeHeader(data, o, p, obj, t, roff = 0) {\n    const file = obj.file;\n    writeUint(data, o, t === 0 ? 0x04034b50 : 0x02014b50);\n    o += 4; // sign\n    if (t === 1)\n        o += 2; // ver made by\n    writeUshort(data, o, 20);\n    o += 2; // ver\n    writeUshort(data, o, 0);\n    o += 2; // gflip\n    writeUshort(data, o, obj.cpr ? 8 : 0);\n    o += 2; // cmpr\n    writeUint(data, o, 0);\n    o += 4; // time\n    writeUint(data, o, obj.crc);\n    o += 4; // crc32\n    writeUint(data, o, file.length);\n    o += 4; // csize\n    writeUint(data, o, obj.usize);\n    o += 4; // usize\n    writeUshort(data, o, sizeUTF8(p));\n    o += 2; // nlen\n    writeUshort(data, o, 0);\n    o += 2; // elen\n    if (t === 1) {\n        o += 2; // comment length\n        o += 2; // disk number\n        o += 6; // attributes\n        writeUint(data, o, roff);\n        o += 4; // usize\n    }\n    const nlen = writeUTF8(data, o, p);\n    o += nlen;\n    if (t === 0) {\n        data.set(file, o);\n        o += file.length;\n    }\n    return o;\n}\n","/**\n * Copyright (c) 2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Gianluca Tomasello <giagitom@gmail.com>\n *\n * Adapted from https://github.com/gwtw/ts-fibonacci-heap, Copyright (c) 2014 Daniel Imms, MIT\n */\nclass Node {\n    constructor(key, value) {\n        this.parent = null;\n        this.child = null;\n        this.degree = 0;\n        this.isMarked = false;\n        this.key = key;\n        this.value = value;\n        this.prev = this;\n        this.next = this;\n    }\n}\nclass NodeListIterator {\n    /**\n   * Creates an Iterator used to simplify the consolidate() method. It works by\n   * making a shallow copy of the nodes in the root list and iterating over the\n   * shallow copy instead of the source as the source will be modified.\n   * @param start A node from the root list.\n   */\n    constructor(start) {\n        this._index = -1;\n        this._items = [];\n        this._len = 0;\n        if (start) {\n            let current = start, l = 0;\n            do {\n                this._items[l++] = current;\n                current = current.next;\n            } while (start !== current);\n            this._len = l;\n        }\n    }\n    /**\n   * @return Whether there is a next node in the iterator.\n   */\n    hasNext() {\n        return this._index < this._len - 1;\n    }\n    /**\n   * @return The next node.\n   */\n    next() {\n        return this._items[++this._index];\n    }\n    /**\n   * @return Resets iterator to reuse it.\n   */\n    reset(start) {\n        this._index = -1;\n        this._len = 0;\n        let current = start, l = 0;\n        do {\n            this._items[l++] = current;\n            current = current.next;\n        } while (start !== current);\n        this._len = l;\n    }\n}\nconst tmpIt = new NodeListIterator();\n/**\n * A Fibonacci heap data structure with a key and optional value.\n*/\nexport class FibonacciHeap {\n    constructor(compare) {\n        this._minNode = null;\n        this._nodeCount = 0;\n        this._compare = compare ? compare : this._defaultCompare;\n    }\n    /**\n   * Clears the heap's data, making it an empty heap.\n   */\n    clear() {\n        this._minNode = null;\n        this._nodeCount = 0;\n    }\n    /**\n   * Decreases a key of a node.\n   * @param node The node to decrease the key of.\n   * @param newKey The new key to assign to the node.\n   */\n    decreaseKey(node, newKey) {\n        if (!node) {\n            throw new Error('Cannot decrease key of non-existent node');\n        }\n        if (this._compare({ key: newKey }, { key: node.key }) > 0) {\n            throw new Error('New key is larger than old key');\n        }\n        node.key = newKey;\n        const parent = node.parent;\n        if (parent && this._compare(node, parent) < 0) {\n            this._cut(node, parent, this._minNode);\n            this._cascadingCut(parent, this._minNode);\n        }\n        if (this._compare(node, this._minNode) < 0) {\n            this._minNode = node;\n        }\n    }\n    /**\n   * Deletes a node.\n   * @param node The node to delete.\n   */\n    delete(node) {\n        // This is a special implementation of decreaseKey that sets the argument to\n        // the minimum value. This is necessary to make generic keys work, since there\n        // is no MIN_VALUE constant for generic types.\n        const parent = node.parent;\n        if (parent) {\n            this._cut(node, parent, this._minNode);\n            this._cascadingCut(parent, this._minNode);\n        }\n        this._minNode = node;\n        this.extractMinimum();\n    }\n    /**\n   * Extracts and returns the minimum node from the heap.\n   * @return The heap's minimum node or null if the heap is empty.\n   */\n    extractMinimum() {\n        const extractedMin = this._minNode;\n        if (extractedMin) {\n            // Set parent to null for the minimum's children\n            if (extractedMin.child) {\n                let child = extractedMin.child;\n                do {\n                    child.parent = null;\n                    child = child.next;\n                } while (child !== extractedMin.child);\n            }\n            let nextInRootList = null;\n            if (extractedMin.next !== extractedMin) {\n                nextInRootList = extractedMin.next;\n            }\n            // Remove min from root list\n            this._removeNodeFromList(extractedMin);\n            this._nodeCount--;\n            // Merge the children of the minimum node with the root list\n            this._minNode = this._mergeLists(nextInRootList, extractedMin.child);\n            if (this._minNode) {\n                this._minNode = this._consolidate(this._minNode);\n            }\n        }\n        return extractedMin;\n    }\n    /**\n   * Returns the minimum node from the heap.\n   * @return The heap's minimum node or null if the heap is empty.\n   */\n    findMinimum() {\n        return this._minNode;\n    }\n    /**\n   * Inserts a new key-value pair into the heap.\n   * @param key The key to insert.\n   * @param value The value to insert.\n   * @return node The inserted node.\n   */\n    insert(key, value) {\n        const node = new Node(key, value);\n        this._minNode = this._mergeLists(this._minNode, node);\n        this._nodeCount++;\n        return node;\n    }\n    /**\n   * @return Whether the heap is empty.\n   */\n    isEmpty() {\n        return this._minNode === null;\n    }\n    /**\n   * @return The size of the heap.\n   */\n    size() {\n        if (this._minNode === null) {\n            return 0;\n        }\n        return this._getNodeListSize(this._minNode);\n    }\n    /**\n   * Joins another heap to this heap.\n   * @param other The other heap.\n   */\n    union(other) {\n        this._minNode = this._mergeLists(this._minNode, other._minNode);\n        this._nodeCount += other._nodeCount;\n    }\n    /**\n   * Compares two nodes with each other.\n   * @param a The first key to compare.\n   * @param b The second key to compare.\n   * @return -1, 0 or 1 if a < b, a == b or a > b respectively.\n   */\n    _defaultCompare(a, b) {\n        if (a.key > b.key) {\n            return 1;\n        }\n        if (a.key < b.key) {\n            return -1;\n        }\n        return 0;\n    }\n    /**\n   * Cut the link between a node and its parent, moving the node to the root list.\n   * @param node The node being cut.\n   * @param parent The parent of the node being cut.\n   * @param minNode The minimum node in the root list.\n   * @return The heap's new minimum node.\n   */\n    _cut(node, parent, minNode) {\n        node.parent = null;\n        parent.degree--;\n        if (node.next === node) {\n            parent.child = null;\n        }\n        else {\n            parent.child = node.next;\n        }\n        this._removeNodeFromList(node);\n        const newMinNode = this._mergeLists(minNode, node);\n        node.isMarked = false;\n        return newMinNode;\n    }\n    /**\n   * Perform a cascading cut on a node; mark the node if it is not marked,\n   * otherwise cut the node and perform a cascading cut on its parent.\n   * @param node The node being considered to be cut.\n   * @param minNode The minimum node in the root list.\n   * @return The heap's new minimum node.\n   */\n    _cascadingCut(node, minNode) {\n        const parent = node.parent;\n        if (parent) {\n            if (node.isMarked) {\n                minNode = this._cut(node, parent, minNode);\n                minNode = this._cascadingCut(parent, minNode);\n            }\n            else {\n                node.isMarked = true;\n            }\n        }\n        return minNode;\n    }\n    /**\n   * Merge all trees of the same order together until there are no two trees of\n   * the same order.\n   * @param minNode The current minimum node.\n   * @return The new minimum node.\n   */\n    _consolidate(minNode) {\n        const aux = [];\n        tmpIt.reset(minNode);\n        while (tmpIt.hasNext()) {\n            let current = tmpIt.next();\n            // If there exists another node with the same degree, merge them\n            let auxCurrent = aux[current.degree];\n            while (auxCurrent) {\n                if (this._compare(current, auxCurrent) > 0) {\n                    const temp = current;\n                    current = auxCurrent;\n                    auxCurrent = temp;\n                }\n                this._linkHeaps(auxCurrent, current);\n                aux[current.degree] = null;\n                current.degree++;\n                auxCurrent = aux[current.degree];\n            }\n            aux[current.degree] = current;\n        }\n        let newMinNode = null;\n        for (let i = 0; i < aux.length; i++) {\n            const node = aux[i];\n            if (node) {\n                // Remove siblings before merging\n                node.next = node;\n                node.prev = node;\n                newMinNode = this._mergeLists(newMinNode, node);\n            }\n        }\n        return newMinNode;\n    }\n    /**\n   * Removes a node from a node list.\n   * @param node The node to remove.\n   */\n    _removeNodeFromList(node) {\n        const prev = node.prev;\n        const next = node.next;\n        prev.next = next;\n        next.prev = prev;\n        node.next = node;\n        node.prev = node;\n    }\n    /**\n   * Links two heaps of the same order together.\n   *\n   * @private\n   * @param max The heap with the larger root.\n   * @param min The heap with the smaller root.\n   */\n    _linkHeaps(max, min) {\n        this._removeNodeFromList(max);\n        min.child = this._mergeLists(max, min.child);\n        max.parent = min;\n        max.isMarked = false;\n    }\n    /**\n   * Merge two lists of nodes together.\n   *\n   * @private\n   * @param a The first list to merge.\n   * @param b The second list to merge.\n   * @return The new minimum node from the two lists.\n   */\n    _mergeLists(a, b) {\n        if (!a) {\n            if (!b) {\n                return null;\n            }\n            return b;\n        }\n        if (!b) {\n            return a;\n        }\n        const temp = a.next;\n        a.next = b.next;\n        a.next.prev = a;\n        b.next = temp;\n        b.next.prev = b;\n        return this._compare(a, b) < 0 ? a : b;\n    }\n    /**\n   * Gets the size of a node list.\n   * @param node A node within the node list.\n   * @return The size of the node list.\n   */\n    _getNodeListSize(node) {\n        let count = 0;\n        let current = node;\n        do {\n            count++;\n            if (current.child) {\n                count += this._getNodeListSize(current.child);\n            }\n            current = current.next;\n        } while (current !== node);\n        return count;\n    }\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nexport function normalize(value, min, max) {\n    return (value - min) / (max - min);\n}\nexport function clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\nexport function pclamp(value) {\n    return clamp(value, 0, 100);\n}\nexport function saturate(value) {\n    return clamp(value, 0, 1);\n}\nexport function damp(value, dampingFactor) {\n    const dampedValue = value * dampingFactor;\n    return Math.abs(dampedValue) < 0.1 ? 0 : dampedValue;\n}\nexport function lerp(start, stop, alpha) {\n    return start + (stop - start) * alpha;\n}\n/** Catmul-Rom spline */\nexport function spline(p0, p1, p2, p3, t, tension) {\n    const v0 = (p2 - p0) * tension;\n    const v1 = (p3 - p1) * tension;\n    const t2 = t * t;\n    const t3 = t * t2;\n    return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\nexport function quadraticBezier(p0, p1, p2, t) {\n    const k = 1 - t;\n    return (k * k * p0) + (2 * k * t * p1) + (t * t * p2);\n}\nexport function smoothstep(min, max, x) {\n    x = saturate(normalize(x, min, max));\n    return x * x * (3 - 2 * x);\n}\nexport function smootherstep(min, max, x) {\n    x = saturate(normalize(x, min, max));\n    return x * x * x * (x * (x * 6 - 15) + 10);\n}\nexport function smootheststep(min, max, x) {\n    x = saturate(normalize(x, min, max));\n    return -20 * Math.pow(x, 7) + 70 * Math.pow(x, 6) - 84 * Math.pow(x, 5) + 35 * Math.pow(x, 4);\n}\nexport function almostIdentity(value, start, stop) {\n    if (value > start)\n        return value;\n    const a = 2 * stop - start;\n    const b = 2 * start - 3 * stop;\n    const t = value / start;\n    return (a * t + b) * t * t + stop;\n}\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Gianluca Tomasello <giagitom@gmail.com>\n */\nimport { Vec3 } from '../../linear-algebra/3d/vec3.js';\nfunction Ray3D() {\n    return Ray3D.create(Vec3.create(0, 0, 0), Vec3.create(1, 0, 0));\n}\n(function (Ray3D) {\n    function create(origin, direction) { return { origin, direction }; }\n    Ray3D.create = create;\n    function copy(out, r) {\n        Vec3.copy(out.origin, r.origin);\n        Vec3.copy(out.direction, r.direction);\n        return out;\n    }\n    Ray3D.copy = copy;\n    function clone(r) {\n        return copy(Ray3D(), r);\n    }\n    Ray3D.clone = clone;\n    function targetTo(out, ray, target) {\n        Vec3.copy(out.origin, ray.origin);\n        Vec3.normalize(out.direction, Vec3.sub(out.direction, target, ray.origin));\n        return out;\n    }\n    Ray3D.targetTo = targetTo;\n    /** Transform ray with a Mat4 */\n    function transform(out, ray, m) {\n        Vec3.transformMat4(out.origin, ray.origin, m);\n        Vec3.transformDirection(out.direction, ray.direction, m);\n        return out;\n    }\n    Ray3D.transform = transform;\n    //\n    const tmpIR = Vec3();\n    function _intersectSphere3D(ray, sphere) {\n        const { center, radius } = sphere;\n        const { origin, direction } = ray;\n        const oc = Vec3.sub(tmpIR, origin, center);\n        const a = Vec3.dot(direction, direction);\n        const b = 2.0 * Vec3.dot(oc, direction);\n        const c = Vec3.dot(oc, oc) - radius * radius;\n        const discriminant = b * b - 4 * a * c;\n        if (discriminant < 0)\n            return -1; // no intersection\n        const t = (-b - Math.sqrt(discriminant)) / (2.0 * a);\n        if (t < 0)\n            return -1; // behind the ray\n        return t;\n    }\n    function intersectSphere3D(out, ray, sphere) {\n        const t = _intersectSphere3D(ray, sphere);\n        if (t < 0)\n            return false;\n        Vec3.scaleAndAdd(out, ray.origin, ray.direction, t);\n        return true;\n    }\n    Ray3D.intersectSphere3D = intersectSphere3D;\n    function isIntersectingSphere3D(ray, sphere) {\n        return _intersectSphere3D(ray, sphere) >= 0;\n    }\n    Ray3D.isIntersectingSphere3D = isIntersectingSphere3D;\n    function isInsideSphere3D(ray, sphere) {\n        return Vec3.distance(ray.origin, sphere.center) < sphere.radius;\n    }\n    Ray3D.isInsideSphere3D = isInsideSphere3D;\n    //\n    function _intersectBox3D(ray, box) {\n        const { origin, direction } = ray;\n        const [minX, minY, minZ] = box.min;\n        const [maxX, maxY, maxZ] = box.max;\n        const [x, y, z] = origin;\n        const invDirX = 1.0 / direction[0];\n        const invDirY = 1.0 / direction[1];\n        const invDirZ = 1.0 / direction[2];\n        let tmin, tmax, tymin, tymax, tzmin, tzmax;\n        if (invDirX >= 0) {\n            tmin = (minX - x) * invDirX;\n            tmax = (maxX - x) * invDirX;\n        }\n        else {\n            tmin = (maxX - x) * invDirX;\n            tmax = (minX - x) * invDirX;\n        }\n        if (invDirY >= 0) {\n            tymin = (minY - y) * invDirY;\n            tymax = (maxY - y) * invDirY;\n        }\n        else {\n            tymin = (maxY - y) * invDirY;\n            tymax = (minY - y) * invDirY;\n        }\n        if ((tmin > tymax) || (tymin > tmax))\n            return -1;\n        if (tymin > tmin)\n            tmin = tymin;\n        if (tymax < tmax)\n            tmax = tymax;\n        if (invDirZ >= 0) {\n            tzmin = (minZ - z) * invDirZ;\n            tzmax = (maxZ - z) * invDirZ;\n        }\n        else {\n            tzmin = (maxZ - z) * invDirZ;\n            tzmax = (minZ - z) * invDirZ;\n        }\n        if ((tmin > tzmax) || (tzmin > tmax))\n            return -1;\n        if (tzmin > tmin)\n            tmin = tzmin;\n        if (tzmax < tmax)\n            tmax = tzmax;\n        return tmin >= 0 ? tmin : -1;\n    }\n    function intersectBox3D(out, ray, box) {\n        const t = _intersectBox3D(ray, box);\n        if (t < 0)\n            return false;\n        Vec3.scaleAndAdd(out, ray.origin, ray.direction, t);\n        return true;\n    }\n    Ray3D.intersectBox3D = intersectBox3D;\n    function isIntersectingBox3D(ray, box) {\n        return _intersectBox3D(ray, box) >= 0;\n    }\n    Ray3D.isIntersectingBox3D = isIntersectingBox3D;\n})(Ray3D || (Ray3D = {}));\nexport { Ray3D };\n","/**\n * Copyright (c) 2019-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Table, Column } from '../../../mol-data/db.js';\nimport { WaterNames, PolymerNames } from '../../../mol-model/structure/model/types.js';\nimport { SetUtils } from '../../../mol-util/set.js';\nimport { BasicSchema } from '../basic/schema.js';\nimport { SaccharideCompIdMap } from '../../../mol-model/structure/structure/carbohydrates/constants.js';\nconst ProteinAtomIdsList = [\n    new Set(['CA']),\n    new Set(['C']),\n    new Set(['N'])\n];\nconst RnaAtomIdsList = [\n    new Set(['P', 'O3\\'', 'O3*']),\n    new Set(['C4\\'', 'C4*']),\n    new Set(['O2\\'', 'O2*', 'F2\\'', 'F2*'])\n];\nconst DnaAtomIdsList = [\n    new Set(['P', 'O3\\'', 'O3*']),\n    new Set(['C3\\'', 'C3*']),\n    new Set(['O2\\'', 'O2*', 'F2\\'', 'F2*'])\n];\n/** Used to reduce false positives for atom name-based type guessing */\nconst NonPolymerNames = new Set([\n    'FMN', 'NCN', 'FNS', 'FMA', 'ATP', 'ADP', 'AMP', 'GTP', 'GDP', 'GMP', // Mononucleotides\n    'LIG'\n]);\nconst StandardComponents = (function () {\n    const map = new Map();\n    const components = [\n        { id: 'HIS', name: 'HISTIDINE', type: 'l-peptide linking' },\n        { id: 'ARG', name: 'ARGININE', type: 'l-peptide linking' },\n        { id: 'LYS', name: 'LYSINE', type: 'l-peptide linking' },\n        { id: 'ILE', name: 'ISOLEUCINE', type: 'l-peptide linking' },\n        { id: 'PHE', name: 'PHENYLALANINE', type: 'l-peptide linking' },\n        { id: 'LEU', name: 'LEUCINE', type: 'l-peptide linking' },\n        { id: 'TRP', name: 'TRYPTOPHAN', type: 'l-peptide linking' },\n        { id: 'ALA', name: 'ALANINE', type: 'l-peptide linking' },\n        { id: 'MET', name: 'METHIONINE', type: 'l-peptide linking' },\n        { id: 'CYS', name: 'CYSTEINE', type: 'l-peptide linking' },\n        { id: 'ASN', name: 'ASPARAGINE', type: 'l-peptide linking' },\n        { id: 'VAL', name: 'VALINE', type: 'l-peptide linking' },\n        { id: 'GLY', name: 'GLYCINE', type: 'peptide linking' },\n        { id: 'SER', name: 'SERINE', type: 'l-peptide linking' },\n        { id: 'GLN', name: 'GLUTAMINE', type: 'l-peptide linking' },\n        { id: 'TYR', name: 'TYROSINE', type: 'l-peptide linking' },\n        { id: 'ASP', name: 'ASPARTIC ACID', type: 'l-peptide linking' },\n        { id: 'GLU', name: 'GLUTAMIC ACID', type: 'l-peptide linking' },\n        { id: 'THR', name: 'THREONINE', type: 'l-peptide linking' },\n        { id: 'PRO', name: 'PROLINE', type: 'l-peptide linking' },\n        { id: 'SEC', name: 'SELENOCYSTEINE', type: 'l-peptide linking' },\n        { id: 'PYL', name: 'PYRROLYSINE', type: 'l-peptide linking' },\n        { id: 'MSE', name: 'SELENOMETHIONINE', type: 'l-peptide linking' },\n        { id: 'SEP', name: 'PHOSPHOSERINE', type: 'l-peptide linking' },\n        { id: 'TPO', name: 'PHOSPHOTHREONINE', type: 'l-peptide linking' },\n        { id: 'PTR', name: 'O-PHOSPHOTYROSINE', type: 'l-peptide linking' },\n        { id: 'PCA', name: 'PYROGLUTAMIC ACID', type: 'l-peptide linking' },\n        { id: 'A', name: 'ADENOSINE-5\\'-MONOPHOSPHATE', type: 'rna linking' },\n        { id: 'C', name: 'CYTIDINE-5\\'-MONOPHOSPHATE', type: 'rna linking' },\n        { id: 'T', name: 'THYMIDINE-5\\'-MONOPHOSPHATE', type: 'rna linking' },\n        { id: 'G', name: 'GUANOSINE-5\\'-MONOPHOSPHATE', type: 'rna linking' },\n        { id: 'I', name: 'INOSINIC ACID', type: 'rna linking' },\n        { id: 'U', name: 'URIDINE-5\\'-MONOPHOSPHATE', type: 'rna linking' },\n        { id: 'DA', name: '2\\'-DEOXYADENOSINE-5\\'-MONOPHOSPHATE', type: 'dna linking' },\n        { id: 'DC', name: '2\\'-DEOXYCYTIDINE-5\\'-MONOPHOSPHATE', type: 'dna linking' },\n        { id: 'DT', name: 'THYMIDINE-5\\'-MONOPHOSPHATE', type: 'dna linking' },\n        { id: 'DG', name: '2\\'-DEOXYGUANOSINE-5\\'-MONOPHOSPHATE', type: 'dna linking' },\n        { id: 'DI', name: '2\\'-DEOXYINOSINE-5\\'-MONOPHOSPHATE', type: 'dna linking' },\n        { id: 'DU', name: '2\\'-DEOXYURIDINE-5\\'-MONOPHOSPHATE', type: 'dna linking' },\n    ];\n    components.forEach(c => map.set(c.id, c));\n    return map;\n})();\nconst CharmmIonComponents = (function () {\n    const map = new Map();\n    const components = [\n        { id: 'ZN2', name: 'ZINC ION', type: 'ion' },\n        { id: 'SOD', name: 'SODIUM ION', type: 'ion' },\n        { id: 'CES', name: 'CESIUM ION', type: 'ion' },\n        { id: 'CLA', name: 'CHLORIDE ION', type: 'ion' },\n        { id: 'CAL', name: 'CALCIUM ION', type: 'ion' },\n        { id: 'POT', name: 'POTASSIUM ION', type: 'ion' },\n    ];\n    components.forEach(c => map.set(c.id, c));\n    return map;\n})();\nexport class ComponentBuilder {\n    set(c) {\n        this.comps.set(c.id, c);\n        this.ids.push(c.id);\n        this.names.push(c.name);\n        this.types.push(c.type);\n        this.mon_nstd_flags.push(PolymerNames.has(c.id) ? 'y' : 'n');\n    }\n    getAtomIds(index) {\n        const atomIds = new Set();\n        const prevSeqId = this.seqId.value(index);\n        while (index < this.seqId.rowCount) {\n            const seqId = this.seqId.value(index);\n            if (seqId !== prevSeqId)\n                break;\n            atomIds.add(this.atomId.value(index));\n            prevSeqId - seqId;\n            index += 1;\n        }\n        return atomIds;\n    }\n    hasAtomIds(atomIds, atomIdsList) {\n        for (let i = 0, il = atomIdsList.length; i < il; ++i) {\n            if (!SetUtils.areIntersecting(atomIds, atomIdsList[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getType(atomIds) {\n        if (this.hasAtomIds(atomIds, ProteinAtomIdsList)) {\n            return 'peptide linking';\n        }\n        else if (this.hasAtomIds(atomIds, RnaAtomIdsList)) {\n            return 'rna linking';\n        }\n        else if (this.hasAtomIds(atomIds, DnaAtomIdsList)) {\n            return 'dna linking';\n        }\n        else {\n            return 'other';\n        }\n    }\n    has(compId) { return this.comps.has(compId); }\n    get(compId) { return this.comps.get(compId); }\n    add(compId, index) {\n        if (!this.has(compId)) {\n            if (StandardComponents.has(compId)) {\n                this.set(StandardComponents.get(compId));\n            }\n            else if (WaterNames.has(compId)) {\n                this.set({ id: compId, name: 'WATER', type: 'non-polymer' });\n            }\n            else if (NonPolymerNames.has(compId.toUpperCase())) {\n                this.set({ id: compId, name: this.namesMap.get(compId) || compId, type: 'non-polymer' });\n            }\n            else if (SaccharideCompIdMap.has(compId.toUpperCase())) {\n                this.set({ id: compId, name: this.namesMap.get(compId) || compId, type: 'saccharide' });\n            }\n            else {\n                const atomIds = this.getAtomIds(index);\n                if (atomIds.size === 1 && CharmmIonComponents.has(compId)) {\n                    this.set(CharmmIonComponents.get(compId));\n                }\n                else {\n                    const type = this.getType(atomIds);\n                    this.set({ id: compId, name: this.namesMap.get(compId) || compId, type });\n                }\n            }\n        }\n        return this.get(compId);\n    }\n    getChemCompTable() {\n        return Table.ofPartialColumns(BasicSchema.chem_comp, {\n            id: Column.ofStringArray(this.ids),\n            name: Column.ofStringArray(this.names),\n            type: Column.ofStringAliasArray(this.types),\n            mon_nstd_flag: Column.ofStringAliasArray(this.mon_nstd_flags),\n        }, this.ids.length);\n    }\n    setNames(names) {\n        names.forEach(n => this.namesMap.set(n[0], n[1]));\n    }\n    constructor(seqId, atomId) {\n        this.seqId = seqId;\n        this.atomId = atomId;\n        this.namesMap = new Map();\n        this.comps = new Map();\n        this.ids = [];\n        this.names = [];\n        this.types = [];\n        this.mon_nstd_flags = [];\n    }\n}\n","/**\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Type } from '../type.js';\nimport { Arguments, Argument } from '../symbol.js';\nimport { symbol, normalizeTable, symbolList } from '../helpers.js';\nexport var Types;\n(function (Types) {\n    Types.AnyVar = Type.Variable('a', Type.Any);\n    Types.AnyValueVar = Type.Variable('a', Type.Any);\n    Types.ConstrainedVar = Type.Variable('a', Type.Any, true);\n    Types.Regex = Type.Value('Core', 'Regex');\n    Types.Set = (t) => Type.Container('Core', 'Set', t || Types.AnyValueVar);\n    Types.List = (t) => Type.Container('Core', 'List', t || Types.AnyVar);\n    Types.Fn = (t, alias) => Type.Container('Core', 'Fn', t || Types.AnyVar, alias);\n    Types.Flags = (t, alias) => Type.Container('Core', 'Flags', t, alias);\n    Types.BitFlags = Types.Flags(Type.Num, 'BitFlags');\n})(Types || (Types = {}));\nfunction unaryOp(type, description) {\n    return symbol(Arguments.Dictionary({ 0: Argument(type) }), type, description);\n}\nfunction binOp(type, description) {\n    return symbol(Arguments.List(type, { nonEmpty: true }), type, description);\n}\nfunction binRel(src, target, description) {\n    return symbol(Arguments.Dictionary({\n        0: Argument(src),\n        1: Argument(src)\n    }), target, description);\n}\nexport const TTargs = Arguments.Dictionary({\n    0: Argument(Type.Num),\n    1: Argument(Type.Num)\n});\nconst type = {\n    '@header': 'Types',\n    bool: symbol(Arguments.Dictionary({ 0: Argument(Type.AnyValue) }), Type.Bool, 'Convert a value to boolean.'),\n    num: symbol(Arguments.Dictionary({ 0: Argument(Type.AnyValue) }), Type.Num, 'Convert a value to number.'),\n    str: symbol(Arguments.Dictionary({ 0: Argument(Type.AnyValue) }), Type.Str, 'Convert a value to string.'),\n    regex: symbol(Arguments.Dictionary({\n        0: Argument(Type.Str, { description: 'Expression' }),\n        1: Argument(Type.Str, { isOptional: true, description: `Flags, e.g. 'i' for ignore case` })\n    }), Types.Regex, 'Creates a regular expression from a string using the ECMAscript syntax.'),\n    list: symbol(Arguments.List(Types.AnyVar), Types.List()),\n    set: symbol(Arguments.List(Types.AnyValueVar), Types.Set()),\n    bitflags: symbol(Arguments.Dictionary({ 0: Argument(Type.Num) }), Types.BitFlags, 'Interpret a number as bitflags.'),\n    compositeKey: symbol(Arguments.List(Type.AnyValue), Type.AnyValue),\n};\nconst logic = {\n    '@header': 'Logic',\n    not: unaryOp(Type.Bool),\n    and: binOp(Type.Bool),\n    or: binOp(Type.Bool),\n};\nconst ctrl = {\n    '@header': 'Control',\n    eval: symbol(Arguments.Dictionary({ 0: Argument(Types.Fn(Types.AnyVar)) }), Types.AnyVar, 'Evaluate a function.'),\n    fn: symbol(Arguments.Dictionary({ 0: Argument(Types.AnyVar) }), Types.Fn(Types.AnyVar), 'Wrap an expression to a \"lazy\" function.'),\n    if: symbol(Arguments.Dictionary({\n        0: Argument(Type.Bool, { description: 'Condition' }),\n        1: Argument(Type.Variable('a', Type.Any), { description: 'If true' }),\n        2: Argument(Type.Variable('b', Type.Any), { description: 'If false' })\n    }), Type.Union([Type.Variable('a', Type.Any), Type.Variable('b', Type.Any)])),\n    assoc: symbol(Arguments.Dictionary({\n        0: Argument(Type.Str, { description: 'Name' }),\n        1: Argument(Type.Variable('a', Type.Any), { description: 'Value to assign' })\n    }), Type.Variable('a', Type.Any))\n};\nconst rel = {\n    '@header': 'Relational',\n    eq: binRel(Type.Variable('a', Type.AnyValue, true), Type.Bool),\n    neq: binRel(Type.Variable('a', Type.AnyValue, true), Type.Bool),\n    lt: binRel(Type.Num, Type.Bool),\n    lte: binRel(Type.Num, Type.Bool),\n    gr: binRel(Type.Num, Type.Bool),\n    gre: binRel(Type.Num, Type.Bool),\n    inRange: symbol(Arguments.Dictionary({\n        0: Argument(Type.Num, { description: 'Value to test' }),\n        1: Argument(Type.Num, { description: 'Minimum value' }),\n        2: Argument(Type.Num, { description: 'Maximum value' })\n    }), Type.Bool, 'Check if the value of the 1st argument is >= 2nd and <= 3rd.'),\n};\nconst math = {\n    '@header': 'Math',\n    add: binOp(Type.Num),\n    sub: binOp(Type.Num),\n    mult: binOp(Type.Num),\n    div: binRel(Type.Num, Type.Num),\n    pow: binRel(Type.Num, Type.Num),\n    mod: binRel(Type.Num, Type.Num),\n    min: binOp(Type.Num),\n    max: binOp(Type.Num),\n    cantorPairing: binRel(Type.Num, Type.Num),\n    sortedCantorPairing: binRel(Type.Num, Type.Num),\n    invertCantorPairing: symbol(Arguments.Dictionary({ 0: Argument(Type.Num) }), Types.List(Type.Num)),\n    floor: unaryOp(Type.Num),\n    ceil: unaryOp(Type.Num),\n    roundInt: unaryOp(Type.Num),\n    trunc: unaryOp(Type.Num),\n    abs: unaryOp(Type.Num),\n    sign: unaryOp(Type.Num),\n    sqrt: unaryOp(Type.Num),\n    cbrt: unaryOp(Type.Num),\n    sin: unaryOp(Type.Num),\n    cos: unaryOp(Type.Num),\n    tan: unaryOp(Type.Num),\n    asin: unaryOp(Type.Num),\n    acos: unaryOp(Type.Num),\n    atan: unaryOp(Type.Num),\n    sinh: unaryOp(Type.Num),\n    cosh: unaryOp(Type.Num),\n    tanh: unaryOp(Type.Num),\n    exp: unaryOp(Type.Num),\n    log: unaryOp(Type.Num),\n    log10: unaryOp(Type.Num),\n    atan2: binRel(Type.Num, Type.Num)\n};\nconst str = {\n    '@header': 'Strings',\n    concat: binOp(Type.Str),\n    match: symbol(Arguments.Dictionary({ 0: Argument(Types.Regex), 1: Argument(Type.Str) }), Type.Bool)\n};\nconst list = {\n    '@header': 'Lists',\n    getAt: symbol(Arguments.Dictionary({ 0: Argument(Types.List()), 1: Argument(Type.Num) }), Types.AnyVar),\n    equal: symbol(Arguments.Dictionary({ 0: Argument(Types.List()), 1: Argument(Types.List()) }), Type.Bool)\n};\nconst set = {\n    '@header': 'Sets',\n    has: symbol(Arguments.Dictionary({ 0: Argument(Types.Set(Types.ConstrainedVar)), 1: Argument(Types.ConstrainedVar) }), Type.Bool, 'Check if the the 1st argument includes the value of the 2nd.'),\n    isSubset: symbol(Arguments.Dictionary({ 0: Argument(Types.Set(Types.ConstrainedVar)), 1: Argument(Types.Set(Types.ConstrainedVar)) }), Type.Bool, 'Check if the the 1st argument is a subset of the 2nd.')\n};\nconst flags = {\n    '@header': 'Flags',\n    hasAny: symbol(Arguments.Dictionary({\n        0: Argument(Types.Flags(Types.ConstrainedVar)),\n        1: Argument(Types.Flags(Types.ConstrainedVar))\n    }), Type.Bool, 'Check if the the 1st argument has at least one of the 2nd one\\'s flags.'),\n    hasAll: symbol(Arguments.Dictionary({\n        0: Argument(Types.Flags(Types.ConstrainedVar)),\n        1: Argument(Types.Flags(Types.ConstrainedVar))\n    }), Type.Bool, 'Check if the the 1st argument has all 2nd one\\'s flags.'),\n};\nexport const core = {\n    '@header': 'Language Primitives',\n    type,\n    logic,\n    ctrl,\n    rel,\n    math,\n    str,\n    list,\n    set,\n    flags\n};\nnormalizeTable(core);\nexport const SymbolList = symbolList(core);\nexport const SymbolMap = (function () {\n    const map = Object.create(null);\n    for (const s of SymbolList)\n        map[s.id] = s;\n    return map;\n})();\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3 } from '../linear-algebra.js';\nimport { Box3D } from './primitives/box3d.js';\nexport function getRegularGrid3dDelta({ box, dimensions }) {\n    return Vec3.div(Vec3(), Box3D.size(Vec3(), box), Vec3.subScalar(Vec3(), dimensions, 1));\n}\nexport function fillGridDim(length, start, step) {\n    const a = new Float32Array(length);\n    for (let i = 0; i < a.length; i++) {\n        a[i] = start + (step * i);\n    }\n    return a;\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nexport const TransformData = [\n    [1.0, 0.0, 0.0, 0.0],\n    [0.0, 1.0, 0.0, 0.0],\n    [0.0, 0.0, 1.0, 0.0],\n    [-1.0, 0.0, 0.0, 0.0],\n    [0.0, -1.0, 0.0, 0.0],\n    [0.0, 0.0, -1.0, 0.0],\n    [0.0, 1.0, 0.0, 0.5],\n    [1.0, 0.0, 0.0, 0.5],\n    [-1.0, 0.0, 0.0, 0.5],\n    [0.0, 0.0, 1.0, 0.5],\n    [0.0, -1.0, 0.0, 0.5],\n    [0.0, 0.0, -1.0, 0.5],\n    [1.0, 0.0, 0.0, 0.25],\n    [0.0, -1.0, 0.0, 0.25],\n    [0.0, 0.0, 1.0, 0.25],\n    [-1.0, 0.0, 0.0, 0.25],\n    [0.0, 1.0, 0.0, 0.25],\n    [0.0, -1.0, 0.0, 0.75],\n    [0.0, 0.0, 1.0, 0.75],\n    [0.0, 1.0, 0.0, 0.75],\n    [1.0, 0.0, 0.0, 0.75],\n    [-1.0, 0.0, 0.0, 0.75],\n    [0.0, 0.0, -1.0, 0.25],\n    [0.0, 0.0, -1.0, 0.75],\n    [1.0, -1.0, 0.0, 0.0],\n    [-1.0, 1.0, 0.0, 0.0],\n    [0.0, 0.0, 1.0, 1 / 3],\n    [0.0, 0.0, 1.0, 2 / 3],\n    [1.0, 0.0, 0.0, 2 / 3],\n    [0.0, 1.0, 0.0, 1 / 3],\n    [0.0, -1.0, 0.0, 2 / 3],\n    [1.0, -1.0, 0.0, 1 / 3],\n    [-1.0, 1.0, 0.0, 2 / 3],\n    [-1.0, 0.0, 0.0, 1 / 3],\n    [1.0, 0.0, 0.0, 1 / 3],\n    [0.0, 1.0, 0.0, 2 / 3],\n    [0.0, -1.0, 0.0, 1 / 3],\n    [1.0, -1.0, 0.0, 2 / 3],\n    [-1.0, 1.0, 0.0, 1 / 3],\n    [-1.0, 0.0, 0.0, 2 / 3],\n    [0.0, 0.0, -1.0, 1 / 3],\n    [0.0, 0.0, -1.0, 2 / 3],\n    [0.0, 0.0, 1.0, 5 / 6],\n    [0.0, 0.0, 1.0, 1 / 6],\n    [0.0, 0.0, -1.0, 5 / 6],\n    [0.0, 0.0, -1.0, 1 / 6],\n];\nexport const OperatorData = [\n    [0, 1, 2],\n    [3, 4, 5],\n    [3, 1, 5],\n    [3, 6, 5],\n    [7, 6, 2],\n    [8, 6, 5],\n    [0, 4, 2],\n    [0, 4, 9],\n    [7, 10, 2],\n    [7, 10, 9],\n    [0, 10, 2],\n    [8, 10, 5],\n    [3, 1, 11],\n    [3, 6, 11],\n    [0, 10, 9],\n    [8, 6, 11],\n    [3, 4, 2],\n    [0, 4, 5],\n    [3, 4, 9],\n    [7, 10, 5],\n    [8, 4, 9],\n    [8, 10, 9],\n    [8, 10, 2],\n    [0, 6, 9],\n    [3, 10, 9],\n    [0, 10, 11],\n    [7, 1, 9],\n    [8, 1, 11],\n    [7, 4, 11],\n    [7, 6, 9],\n    [7, 10, 11],\n    [3, 10, 2],\n    [8, 1, 5],\n    [0, 4, 11],\n    [3, 1, 2],\n    [3, 1, 9],\n    [7, 4, 2],\n    [8, 1, 2],\n    [8, 1, 9],\n    [3, 6, 9],\n    [7, 4, 9],\n    [8, 6, 2],\n    [8, 6, 9],\n    [3, 6, 2],\n    [12, 13, 14],\n    [15, 16, 14],\n    [12, 17, 18],\n    [15, 19, 18],\n    [20, 13, 18],\n    [21, 16, 18],\n    [20, 17, 14],\n    [21, 19, 14],\n    [0, 1, 5],\n    [8, 10, 11],\n    [7, 6, 11],\n    [7, 6, 5],\n    [8, 4, 2],\n    [7, 4, 5],\n    [7, 1, 5],\n    [7, 1, 11],\n    [0, 10, 5],\n    [0, 1, 11],\n    [0, 6, 11],\n    [0, 6, 5],\n    [3, 10, 11],\n    [8, 4, 11],\n    [15, 13, 22],\n    [12, 16, 22],\n    [15, 17, 23],\n    [12, 19, 23],\n    [21, 13, 23],\n    [20, 16, 23],\n    [21, 17, 22],\n    [20, 19, 22],\n    [4, 0, 2],\n    [1, 3, 2],\n    [4, 0, 14],\n    [1, 3, 18],\n    [4, 0, 9],\n    [1, 3, 9],\n    [4, 0, 18],\n    [1, 3, 14],\n    [10, 7, 9],\n    [6, 8, 9],\n    [4, 7, 14],\n    [6, 3, 18],\n    [10, 0, 18],\n    [1, 8, 14],\n    [1, 3, 5],\n    [4, 0, 5],\n    [6, 8, 11],\n    [10, 7, 11],\n    [1, 3, 11],\n    [4, 0, 11],\n    [10, 7, 2],\n    [6, 8, 2],\n    [3, 10, 22],\n    [7, 1, 23],\n    [8, 4, 23],\n    [0, 6, 22],\n    [1, 0, 5],\n    [4, 3, 5],\n    [1, 0, 23],\n    [4, 3, 22],\n    [10, 7, 14],\n    [6, 8, 18],\n    [8, 6, 22],\n    [7, 10, 23],\n    [4, 3, 11],\n    [1, 0, 11],\n    [1, 0, 22],\n    [4, 3, 23],\n    [10, 7, 18],\n    [6, 8, 14],\n    [8, 6, 23],\n    [7, 10, 22],\n    [6, 7, 11],\n    [10, 8, 11],\n    [8, 1, 23],\n    [0, 10, 22],\n    [3, 6, 22],\n    [7, 4, 23],\n    [4, 3, 2],\n    [1, 0, 2],\n    [10, 8, 2],\n    [6, 7, 2],\n    [4, 3, 9],\n    [1, 0, 9],\n    [10, 8, 9],\n    [6, 7, 9],\n    [4, 8, 14],\n    [6, 0, 18],\n    [10, 3, 18],\n    [1, 7, 14],\n    [4, 8, 18],\n    [6, 0, 14],\n    [10, 3, 14],\n    [1, 7, 18],\n    [6, 7, 5],\n    [10, 8, 5],\n    [6, 8, 5],\n    [10, 7, 5],\n    [8, 1, 22],\n    [0, 10, 23],\n    [3, 6, 23],\n    [7, 4, 22],\n    [4, 24, 2],\n    [25, 3, 2],\n    [4, 24, 26],\n    [25, 3, 27],\n    [4, 24, 27],\n    [25, 3, 26],\n    [28, 29, 26],\n    [30, 31, 26],\n    [32, 33, 26],\n    [34, 35, 27],\n    [36, 37, 27],\n    [38, 39, 27],\n    [2, 0, 1],\n    [1, 2, 0],\n    [1, 25, 5],\n    [24, 0, 5],\n    [39, 36, 40],\n    [35, 38, 40],\n    [37, 34, 40],\n    [33, 30, 41],\n    [29, 32, 41],\n    [31, 28, 41],\n    [5, 3, 4],\n    [4, 5, 3],\n    [25, 1, 5],\n    [0, 24, 5],\n    [24, 4, 5],\n    [3, 25, 5],\n    [4, 3, 41],\n    [25, 1, 40],\n    [24, 4, 41],\n    [3, 25, 40],\n    [4, 3, 40],\n    [25, 1, 41],\n    [24, 4, 40],\n    [3, 25, 41],\n    [35, 34, 40],\n    [37, 36, 40],\n    [39, 38, 40],\n    [29, 28, 41],\n    [31, 30, 41],\n    [33, 32, 41],\n    [3, 5, 4],\n    [5, 4, 3],\n    [25, 1, 2],\n    [0, 24, 2],\n    [24, 4, 2],\n    [3, 25, 2],\n    [25, 1, 9],\n    [0, 24, 9],\n    [24, 4, 9],\n    [3, 25, 9],\n    [30, 33, 26],\n    [32, 29, 26],\n    [28, 31, 26],\n    [36, 39, 27],\n    [38, 35, 27],\n    [34, 37, 27],\n    [0, 2, 1],\n    [2, 1, 0],\n    [30, 33, 42],\n    [32, 29, 42],\n    [28, 31, 42],\n    [36, 39, 43],\n    [38, 35, 43],\n    [34, 37, 43],\n    [7, 9, 6],\n    [9, 6, 7],\n    [25, 1, 11],\n    [0, 24, 11],\n    [24, 4, 11],\n    [3, 25, 11],\n    [35, 34, 44],\n    [37, 36, 44],\n    [39, 38, 44],\n    [29, 28, 45],\n    [31, 30, 45],\n    [33, 32, 45],\n    [8, 11, 10],\n    [11, 10, 8],\n    [1, 25, 2],\n    [24, 0, 2],\n    [1, 25, 42],\n    [24, 0, 43],\n    [1, 25, 43],\n    [24, 0, 42],\n    [1, 25, 27],\n    [24, 0, 26],\n    [1, 25, 26],\n    [24, 0, 27],\n    [1, 25, 9],\n    [24, 0, 9],\n    [4, 24, 5],\n    [25, 3, 5],\n    [4, 24, 11],\n    [25, 3, 11],\n    [1, 0, 40],\n    [4, 3, 44],\n    [0, 24, 45],\n    [1, 0, 41],\n    [4, 3, 45],\n    [0, 24, 44],\n    [0, 24, 40],\n    [0, 24, 41],\n    [2, 3, 4],\n    [5, 3, 1],\n    [5, 0, 4],\n    [4, 2, 3],\n    [1, 5, 3],\n    [4, 5, 0],\n    [2, 7, 6],\n    [2, 8, 10],\n    [5, 8, 6],\n    [5, 7, 10],\n    [1, 9, 7],\n    [4, 9, 8],\n    [1, 11, 8],\n    [4, 11, 7],\n    [9, 0, 6],\n    [9, 3, 10],\n    [11, 3, 6],\n    [11, 0, 10],\n    [6, 2, 7],\n    [10, 2, 8],\n    [6, 5, 8],\n    [10, 5, 7],\n    [9, 7, 1],\n    [9, 8, 4],\n    [11, 8, 1],\n    [11, 7, 4],\n    [6, 9, 0],\n    [10, 9, 3],\n    [6, 11, 3],\n    [10, 11, 0],\n    [9, 7, 6],\n    [9, 8, 10],\n    [11, 8, 6],\n    [11, 7, 10],\n    [6, 9, 7],\n    [10, 9, 8],\n    [6, 11, 8],\n    [10, 11, 7],\n    [2, 3, 10],\n    [5, 8, 1],\n    [11, 0, 4],\n    [10, 2, 3],\n    [1, 5, 8],\n    [4, 11, 0],\n    [5, 0, 1],\n    [2, 0, 4],\n    [2, 3, 1],\n    [1, 5, 0],\n    [4, 2, 0],\n    [1, 2, 3],\n    [11, 8, 10],\n    [11, 7, 6],\n    [9, 7, 10],\n    [9, 8, 6],\n    [10, 11, 8],\n    [6, 11, 7],\n    [10, 9, 7],\n    [6, 9, 8],\n    [5, 8, 10],\n    [5, 7, 6],\n    [2, 7, 10],\n    [2, 8, 6],\n    [4, 11, 8],\n    [1, 11, 7],\n    [4, 9, 7],\n    [1, 9, 8],\n    [11, 3, 10],\n    [11, 0, 6],\n    [9, 0, 10],\n    [9, 3, 6],\n    [10, 5, 8],\n    [6, 5, 7],\n    [10, 2, 7],\n    [6, 2, 8],\n    [11, 8, 4],\n    [11, 7, 1],\n    [9, 7, 4],\n    [9, 8, 1],\n    [10, 11, 3],\n    [6, 11, 0],\n    [10, 9, 0],\n    [6, 9, 3],\n    [22, 15, 13],\n    [22, 12, 16],\n    [14, 12, 13],\n    [14, 15, 16],\n    [13, 22, 15],\n    [16, 22, 12],\n    [13, 14, 12],\n    [16, 14, 15],\n    [22, 21, 17],\n    [22, 20, 19],\n    [14, 20, 17],\n    [14, 21, 19],\n    [13, 23, 21],\n    [16, 23, 20],\n    [13, 18, 20],\n    [16, 18, 21],\n    [23, 15, 17],\n    [23, 12, 19],\n    [18, 12, 17],\n    [18, 15, 19],\n    [17, 22, 21],\n    [19, 22, 20],\n    [17, 14, 20],\n    [19, 14, 21],\n    [23, 21, 13],\n    [23, 20, 16],\n    [18, 20, 13],\n    [18, 21, 16],\n    [17, 23, 15],\n    [19, 23, 12],\n    [17, 18, 12],\n    [19, 18, 15],\n    [5, 0, 6],\n    [2, 7, 4],\n    [9, 3, 1],\n    [6, 5, 0],\n    [4, 2, 7],\n    [1, 9, 3],\n    [0, 2, 4],\n    [3, 2, 1],\n    [0, 5, 1],\n    [2, 1, 3],\n    [2, 4, 0],\n    [5, 1, 0],\n    [7, 9, 10],\n    [8, 9, 6],\n    [7, 11, 6],\n    [9, 6, 8],\n    [9, 10, 7],\n    [11, 6, 7],\n    [1, 7, 11],\n    [4, 8, 11],\n    [1, 8, 9],\n    [4, 7, 9],\n    [0, 9, 10],\n    [3, 9, 6],\n    [3, 11, 10],\n    [0, 11, 6],\n    [2, 6, 8],\n    [2, 10, 7],\n    [5, 6, 7],\n    [5, 10, 8],\n    [6, 0, 11],\n    [10, 3, 11],\n    [6, 3, 9],\n    [10, 0, 9],\n    [7, 2, 10],\n    [8, 2, 6],\n    [8, 5, 10],\n    [7, 5, 6],\n    [9, 1, 8],\n    [9, 4, 7],\n    [11, 1, 7],\n    [11, 4, 8],\n    [7, 9, 4],\n    [8, 9, 1],\n    [8, 11, 4],\n    [7, 11, 1],\n    [9, 6, 3],\n    [9, 10, 0],\n    [11, 6, 0],\n    [11, 10, 3],\n    [19, 12, 23],\n    [13, 15, 22],\n    [16, 21, 18],\n    [17, 20, 14],\n    [20, 14, 17],\n    [21, 18, 16],\n    [15, 22, 13],\n    [12, 23, 19],\n    [18, 16, 21],\n    [14, 17, 20],\n    [23, 19, 12],\n    [22, 13, 15],\n    [19, 20, 22],\n    [13, 21, 23],\n    [16, 15, 14],\n    [17, 12, 18],\n    [20, 18, 13],\n    [21, 14, 19],\n    [15, 23, 17],\n    [12, 22, 16],\n    [18, 19, 15],\n    [14, 13, 12],\n    [23, 16, 20],\n    [22, 17, 21],\n    [16, 12, 22],\n    [17, 15, 23],\n    [19, 21, 14],\n    [13, 20, 18],\n    [12, 14, 13],\n    [15, 18, 19],\n    [21, 22, 17],\n    [20, 23, 16],\n    [14, 16, 15],\n    [18, 17, 12],\n    [22, 19, 20],\n    [23, 13, 21],\n    [16, 20, 23],\n    [17, 21, 22],\n    [19, 15, 18],\n    [13, 12, 14],\n    [12, 18, 17],\n    [15, 14, 16],\n    [21, 23, 13],\n    [20, 22, 19],\n    [14, 19, 21],\n    [18, 13, 20],\n    [22, 16, 12],\n    [23, 17, 15],\n    [19, 12, 22],\n    [17, 21, 23],\n    [16, 15, 18],\n    [13, 20, 14],\n    [20, 14, 13],\n    [15, 18, 16],\n    [21, 23, 17],\n    [12, 22, 19],\n    [18, 16, 15],\n    [14, 13, 20],\n    [22, 19, 12],\n    [23, 17, 21],\n    [3, 2, 4],\n    [3, 5, 1],\n    [0, 5, 4],\n    [2, 4, 3],\n    [5, 1, 3],\n    [5, 4, 0],\n    [1, 7, 9],\n    [4, 8, 9],\n    [1, 8, 11],\n    [4, 7, 11],\n    [0, 9, 6],\n    [3, 9, 10],\n    [3, 11, 6],\n    [0, 11, 10],\n    [2, 6, 7],\n    [2, 10, 8],\n    [5, 6, 8],\n    [5, 10, 7],\n    [6, 0, 9],\n    [10, 3, 9],\n    [6, 3, 11],\n    [10, 0, 11],\n    [7, 2, 6],\n    [8, 2, 10],\n    [8, 5, 6],\n    [7, 5, 10],\n    [9, 1, 7],\n    [9, 4, 8],\n    [11, 1, 8],\n    [11, 4, 7],\n    [7, 9, 1],\n    [8, 9, 4],\n    [8, 11, 1],\n    [7, 11, 4],\n    [9, 6, 0],\n    [9, 10, 3],\n    [11, 6, 3],\n    [11, 10, 0],\n    [8, 9, 10],\n    [8, 11, 6],\n    [7, 11, 10],\n    [9, 10, 8],\n    [11, 6, 8],\n    [11, 10, 7],\n    [6, 0, 2],\n    [10, 3, 2],\n    [6, 3, 5],\n    [10, 0, 5],\n    [7, 2, 1],\n    [8, 2, 4],\n    [8, 5, 1],\n    [7, 5, 4],\n    [9, 1, 0],\n    [9, 4, 3],\n    [11, 1, 3],\n    [11, 4, 0],\n    [1, 7, 2],\n    [4, 8, 2],\n    [1, 8, 5],\n    [4, 7, 5],\n    [0, 9, 1],\n    [3, 9, 4],\n    [3, 11, 1],\n    [0, 11, 4],\n    [2, 6, 0],\n    [2, 10, 3],\n    [5, 6, 3],\n    [5, 10, 0],\n    [0, 2, 6],\n    [3, 2, 10],\n    [3, 5, 6],\n    [0, 5, 10],\n    [2, 1, 7],\n    [2, 4, 8],\n    [5, 1, 8],\n    [5, 4, 7],\n    [16, 12, 14],\n    [13, 21, 18],\n    [19, 15, 23],\n    [17, 20, 22],\n    [12, 14, 16],\n    [21, 18, 13],\n    [15, 23, 19],\n    [20, 22, 17],\n    [14, 16, 12],\n    [18, 13, 21],\n    [23, 19, 15],\n    [22, 17, 20],\n    [19, 20, 18],\n    [17, 15, 14],\n    [16, 21, 22],\n    [13, 12, 23],\n    [20, 18, 19],\n    [15, 14, 17],\n    [21, 22, 16],\n    [12, 23, 13],\n    [18, 19, 20],\n    [14, 17, 15],\n    [22, 16, 21],\n    [23, 13, 12],\n    [6, 0, 5],\n    [10, 3, 5],\n    [6, 3, 2],\n    [10, 0, 2],\n    [7, 2, 4],\n    [8, 2, 1],\n    [8, 5, 4],\n    [7, 5, 1],\n    [9, 1, 3],\n    [9, 4, 0],\n    [11, 1, 0],\n    [11, 4, 3],\n    [1, 7, 5],\n    [4, 8, 5],\n    [1, 8, 2],\n    [4, 7, 2],\n    [0, 9, 4],\n    [3, 9, 1],\n    [3, 11, 4],\n    [0, 11, 1],\n    [2, 6, 3],\n    [2, 10, 0],\n    [5, 6, 0],\n    [5, 10, 3],\n    [0, 2, 10],\n    [3, 2, 6],\n    [3, 5, 10],\n    [0, 5, 6],\n    [2, 1, 8],\n    [2, 4, 7],\n    [5, 1, 7],\n    [5, 4, 8],\n    [21, 17, 23],\n    [20, 16, 22],\n    [12, 13, 18],\n    [15, 19, 14],\n    [23, 21, 17],\n    [22, 20, 16],\n    [18, 12, 13],\n    [14, 15, 19],\n    [17, 23, 21],\n    [16, 22, 20],\n    [13, 18, 12],\n    [19, 14, 15],\n    [21, 13, 22],\n    [20, 19, 23],\n    [12, 17, 14],\n    [15, 16, 18],\n    [23, 15, 13],\n    [22, 12, 19],\n    [18, 20, 17],\n    [14, 21, 16],\n    [17, 22, 15],\n    [16, 23, 12],\n    [13, 14, 20],\n    [19, 18, 21],\n    [15, 17, 22],\n    [12, 16, 23],\n    [20, 13, 14],\n    [21, 19, 18],\n    [22, 21, 13],\n    [23, 20, 19],\n    [14, 12, 17],\n    [18, 15, 16],\n    [13, 23, 15],\n    [19, 22, 12],\n    [17, 18, 20],\n    [16, 14, 21],\n    [15, 13, 23],\n    [12, 19, 22],\n    [20, 17, 18],\n    [21, 16, 14],\n    [22, 15, 17],\n    [23, 12, 16],\n    [14, 20, 13],\n    [18, 21, 19],\n    [13, 22, 21],\n    [19, 23, 20],\n    [17, 14, 12],\n    [16, 18, 15],\n    [6, 5, 3],\n    [4, 9, 3],\n    [9, 3, 4],\n    [5, 7, 4],\n    [4, 5, 7],\n    [5, 3, 6],\n];\nexport const GroupData = [\n    [0],\n    [0, 1],\n    [0, 2],\n    [0, 3],\n    [0, 2, 4, 5],\n    [0, 6],\n    [0, 7],\n    [0, 6, 4, 8],\n    [0, 7, 4, 9],\n    [0, 6, 2, 1],\n    [0, 3, 1, 10],\n    [0, 6, 2, 1, 4, 8, 5, 11],\n    [0, 12, 1, 7],\n    [0, 1, 13, 14],\n    [0, 12, 1, 7, 4, 15, 11, 9],\n    [0, 16, 2, 17],\n    [0, 18, 12, 17],\n    [0, 16, 5, 19],\n    [0, 20, 13, 19],\n    [0, 18, 12, 17, 4, 21, 15, 19],\n    [0, 16, 2, 17, 4, 22, 5, 19],\n    [0, 16, 2, 17, 23, 24, 13, 25, 26, 20, 27, 28, 4, 22, 5, 19],\n    [0, 16, 17, 2, 29, 21, 30, 15],\n    [0, 20, 13, 19, 29, 31, 32, 33],\n    [0, 16, 6, 34],\n    [0, 18, 7, 34],\n    [0, 16, 7, 35],\n    [0, 16, 36, 37],\n    [0, 18, 36, 38],\n    [0, 16, 14, 39],\n    [0, 20, 40, 34],\n    [0, 16, 8, 41],\n    [0, 18, 8, 42],\n    [0, 16, 9, 42],\n    [0, 16, 6, 34, 4, 22, 8, 41],\n    [0, 18, 7, 34, 4, 21, 9, 41],\n    [0, 16, 7, 35, 4, 22, 9, 42],\n    [0, 16, 6, 34, 23, 24, 14, 39],\n    [0, 16, 10, 43, 23, 24, 7, 35],\n    [0, 16, 36, 37, 23, 24, 9, 42],\n    [0, 16, 8, 41, 23, 24, 40, 38],\n    [0, 16, 6, 34, 23, 24, 14, 39, 26, 20, 40, 38, 4, 22, 8, 41],\n    [0, 16, 44, 45, 23, 24, 46, 47, 26, 20, 48, 49, 4, 22, 50, 51],\n    [0, 16, 6, 34, 29, 21, 9, 42],\n    [0, 16, 8, 41, 29, 21, 7, 35],\n    [0, 16, 36, 37, 29, 21, 14, 39],\n    [0, 16, 2, 17, 1, 52, 6, 34],\n    [0, 16, 2, 17, 53, 54, 9, 42],\n    [0, 16, 12, 33, 1, 52, 7, 35],\n    [0, 16, 2, 17, 11, 55, 8, 41],\n    [0, 56, 2, 57, 1, 58, 6, 37],\n    [0, 56, 15, 25, 1, 58, 9, 39],\n    [0, 20, 27, 17, 1, 59, 40, 34],\n    [0, 56, 12, 28, 1, 58, 7, 38],\n    [0, 16, 5, 19, 1, 52, 8, 41],\n    [0, 22, 13, 28, 1, 55, 14, 38],\n    [0, 18, 13, 60, 1, 61, 14, 43],\n    [0, 16, 15, 30, 1, 52, 9, 42],\n    [0, 16, 5, 19, 11, 55, 6, 34],\n    [0, 21, 12, 19, 1, 54, 7, 41],\n    [0, 20, 13, 19, 1, 59, 14, 41],\n    [0, 20, 3, 30, 1, 59, 10, 42],\n    [0, 18, 12, 17, 1, 61, 7, 34, 4, 21, 15, 19, 11, 54, 9, 41],\n    [0, 24, 13, 17, 1, 62, 14, 34, 4, 20, 27, 19, 11, 59, 40, 41],\n    [0, 16, 2, 17, 1, 52, 6, 34, 4, 22, 5, 19, 11, 55, 8, 41],\n    [0, 16, 12, 33, 1, 52, 7, 35, 4, 22, 15, 30, 11, 55, 9, 42],\n    [0, 31, 3, 17, 1, 63, 10, 34, 4, 56, 32, 19, 11, 58, 36, 41],\n    [0, 22, 2, 19, 64, 59, 14, 38, 4, 16, 5, 17, 65, 62, 40, 39],\n    [0, 16, 2, 17, 1, 52, 6, 34, 23, 24, 13, 25, 64, 62, 14, 39, 26, 20, 27, 28, 65, 59, 40, 38, 4, 22, 5, 19, 11, 55, 8, 41],\n    [0, 16, 2, 17, 66, 67, 44, 45, 23, 24, 13, 25, 68, 69, 46, 47, 26, 20, 27, 28, 70, 71, 48, 49, 4, 22, 5, 19, 72, 73, 50, 51],\n    [0, 16, 2, 17, 1, 52, 6, 34, 29, 21, 15, 30, 53, 54, 9, 42],\n    [0, 16, 5, 19, 1, 52, 8, 41, 29, 21, 12, 33, 53, 54, 7, 35],\n    [0, 20, 13, 19, 1, 59, 14, 41, 29, 31, 32, 33, 53, 63, 36, 35],\n    [0, 31, 3, 17, 1, 63, 10, 34, 29, 20, 27, 30, 53, 59, 40, 42],\n    [0, 16, 74, 75],\n    [0, 18, 76, 77],\n    [0, 16, 78, 79],\n    [0, 18, 80, 81],\n    [0, 16, 74, 75, 29, 21, 82, 83],\n    [0, 21, 84, 85, 29, 16, 86, 87],\n    [0, 16, 88, 89],\n    [0, 16, 88, 89, 29, 21, 90, 91],\n    [0, 16, 74, 75, 1, 52, 88, 89],\n    [0, 16, 78, 79, 1, 52, 92, 93],\n    [0, 16, 94, 95, 11, 55, 88, 89],\n    [0, 16, 82, 83, 53, 54, 88, 89],\n    [0, 16, 74, 75, 1, 52, 88, 89, 29, 21, 82, 83, 53, 54, 90, 91],\n    [0, 21, 84, 85, 96, 97, 88, 91, 29, 16, 86, 87, 98, 99, 90, 89],\n    [0, 16, 74, 75, 2, 17, 100, 101],\n    [0, 16, 94, 95, 5, 19, 100, 101],\n    [0, 18, 76, 77, 2, 33, 102, 103],\n    [0, 18, 104, 105, 106, 107, 100, 108],\n    [0, 16, 78, 79, 2, 17, 109, 108],\n    [0, 16, 82, 83, 15, 30, 100, 101],\n    [0, 18, 80, 81, 2, 33, 110, 111],\n    [0, 18, 112, 113, 114, 115, 100, 108],\n    [0, 16, 74, 75, 2, 17, 100, 101, 29, 21, 82, 83, 15, 30, 116, 117],\n    [0, 21, 84, 85, 118, 119, 116, 101, 29, 16, 86, 87, 120, 121, 100, 117],\n    [0, 16, 74, 75, 6, 34, 122, 123],\n    [0, 16, 74, 75, 8, 41, 124, 125],\n    [0, 16, 78, 79, 7, 35, 122, 123],\n    [0, 16, 82, 83, 9, 42, 122, 123],\n    [0, 16, 74, 75, 7, 35, 126, 127],\n    [0, 16, 74, 75, 9, 42, 128, 129],\n    [0, 16, 78, 79, 6, 34, 126, 127],\n    [0, 16, 78, 79, 8, 41, 128, 129],\n    [0, 16, 74, 75, 6, 34, 122, 123, 29, 21, 82, 83, 9, 42, 128, 129],\n    [0, 16, 74, 75, 7, 35, 126, 127, 29, 21, 82, 83, 8, 41, 124, 125],\n    [0, 21, 84, 85, 6, 42, 130, 131, 29, 16, 86, 87, 9, 34, 132, 133],\n    [0, 21, 84, 85, 7, 41, 134, 135, 29, 16, 86, 87, 8, 35, 136, 137],\n    [0, 16, 89, 88, 2, 17, 122, 123],\n    [0, 16, 89, 88, 12, 33, 126, 127],\n    [0, 16, 89, 88, 5, 19, 124, 125],\n    [0, 16, 89, 88, 15, 30, 128, 129],\n    [0, 16, 88, 89, 6, 34, 100, 101],\n    [0, 16, 89, 88, 7, 35, 109, 108],\n    [0, 16, 89, 88, 8, 41, 138, 139],\n    [0, 16, 89, 88, 9, 42, 116, 117],\n    [0, 16, 89, 88, 6, 34, 100, 101, 29, 21, 91, 90, 9, 42, 116, 117],\n    [0, 16, 89, 88, 7, 35, 109, 108, 29, 21, 91, 90, 8, 41, 138, 139],\n    [0, 16, 89, 88, 2, 17, 122, 123, 29, 21, 91, 90, 15, 30, 128, 129],\n    [0, 16, 89, 88, 118, 121, 132, 131, 29, 21, 91, 90, 120, 119, 130, 133],\n    [0, 16, 74, 75, 2, 17, 100, 101, 1, 52, 88, 89, 6, 34, 122, 123],\n    [0, 16, 74, 75, 12, 33, 109, 108, 1, 52, 88, 89, 7, 35, 126, 127],\n    [0, 16, 74, 75, 2, 17, 100, 101, 11, 55, 140, 141, 8, 41, 124, 125],\n    [0, 16, 74, 75, 2, 17, 100, 101, 53, 54, 90, 91, 9, 42, 128, 129],\n    [0, 16, 74, 75, 5, 19, 138, 139, 1, 52, 88, 89, 8, 41, 124, 125],\n    [0, 16, 74, 75, 15, 30, 116, 117, 1, 52, 88, 89, 9, 42, 128, 129],\n    [0, 16, 94, 95, 5, 19, 100, 101, 11, 55, 88, 89, 6, 34, 124, 125],\n    [0, 16, 94, 95, 15, 30, 109, 108, 11, 55, 88, 89, 7, 35, 128, 129],\n    [0, 16, 78, 79, 2, 17, 109, 108, 1, 52, 92, 93, 6, 34, 126, 127],\n    [0, 16, 78, 79, 12, 33, 100, 101, 1, 52, 92, 93, 7, 35, 122, 123],\n    [0, 16, 82, 83, 12, 33, 138, 139, 53, 54, 88, 89, 8, 41, 126, 127],\n    [0, 16, 82, 83, 2, 17, 116, 117, 53, 54, 88, 89, 9, 42, 122, 123],\n    [0, 16, 78, 79, 5, 19, 116, 117, 1, 52, 92, 93, 8, 41, 128, 129],\n    [0, 16, 82, 83, 15, 30, 100, 101, 1, 52, 90, 91, 9, 42, 122, 123],\n    [0, 16, 82, 83, 15, 30, 100, 101, 53, 54, 88, 89, 6, 34, 128, 129],\n    [0, 16, 82, 83, 5, 19, 109, 108, 53, 54, 88, 89, 7, 35, 124, 125],\n    [0, 16, 74, 75, 2, 17, 100, 101, 1, 52, 88, 89, 6, 34, 122, 123, 29, 21, 82, 83, 15, 30, 116, 117, 53, 54, 90, 91, 9, 42, 128, 129],\n    [0, 16, 74, 75, 12, 33, 109, 108, 1, 52, 88, 89, 7, 35, 126, 127, 29, 21, 82, 83, 5, 19, 138, 139, 53, 54, 90, 91, 8, 41, 124, 125],\n    [0, 21, 84, 85, 118, 119, 116, 101, 96, 97, 88, 91, 9, 34, 132, 133, 29, 16, 86, 87, 120, 121, 100, 117, 98, 99, 90, 89, 6, 42, 130, 131],\n    [0, 21, 84, 85, 142, 143, 138, 108, 96, 97, 88, 91, 8, 35, 136, 137, 29, 16, 86, 87, 144, 145, 109, 139, 98, 99, 90, 89, 7, 41, 134, 135],\n    [0, 146, 147],\n    [0, 148, 149],\n    [0, 150, 151],\n    [0, 146, 147, 152, 153, 154, 155, 156, 157],\n    [0, 158, 159],\n    [0, 146, 147, 1, 160, 161],\n    [0, 146, 147, 1, 160, 161, 152, 153, 154, 162, 163, 164, 155, 156, 157, 165, 166, 167],\n    [0, 158, 159, 1, 168, 169],\n    [0, 146, 147, 101, 170, 171],\n    [0, 146, 147, 100, 172, 173],\n    [0, 148, 149, 174, 175, 171],\n    [0, 148, 149, 100, 176, 177],\n    [0, 150, 151, 178, 179, 171],\n    [0, 150, 151, 100, 180, 181],\n    [0, 146, 147, 100, 172, 173, 152, 153, 154, 182, 183, 184, 155, 156, 157, 185, 186, 187],\n    [0, 158, 159, 101, 188, 189],\n    [0, 146, 147, 122, 190, 191],\n    [0, 146, 147, 123, 192, 193],\n    [0, 146, 147, 126, 194, 195],\n    [0, 146, 147, 127, 196, 197],\n    [0, 146, 147, 122, 190, 191, 152, 153, 154, 198, 199, 200, 155, 156, 157, 201, 202, 203],\n    [0, 158, 159, 123, 204, 205],\n    [0, 146, 147, 126, 194, 195, 152, 153, 154, 206, 207, 208, 155, 156, 157, 209, 210, 211],\n    [0, 158, 159, 129, 212, 213],\n    [0, 146, 147, 101, 170, 171, 1, 160, 161, 123, 192, 193],\n    [0, 146, 147, 108, 214, 215, 1, 160, 161, 127, 196, 197],\n    [0, 146, 147, 100, 172, 173, 1, 160, 161, 122, 190, 191],\n    [0, 146, 147, 109, 216, 217, 1, 160, 161, 126, 194, 195],\n    [0, 146, 147, 100, 172, 173, 1, 160, 161, 122, 190, 191, 152, 153, 154, 182, 183, 184, 162, 163, 164, 198, 199, 200, 155, 156, 157, 185, 186, 187, 165, 166, 167, 201, 202, 203],\n    [0, 158, 159, 101, 188, 189, 1, 168, 169, 123, 204, 205],\n    [0, 146, 147, 109, 216, 217, 1, 160, 161, 126, 194, 195, 152, 153, 154, 218, 219, 220, 162, 163, 164, 206, 207, 208, 155, 156, 157, 221, 222, 223, 165, 166, 167, 209, 210, 211],\n    [0, 158, 159, 117, 224, 225, 1, 168, 169, 129, 212, 213],\n    [0, 146, 147, 16, 226, 227],\n    [0, 148, 149, 18, 228, 229],\n    [0, 150, 151, 18, 230, 231],\n    [0, 150, 151, 16, 232, 233],\n    [0, 148, 149, 16, 234, 235],\n    [0, 146, 147, 18, 236, 237],\n    [0, 146, 147, 52, 238, 239],\n    [0, 146, 147, 16, 226, 227, 1, 160, 161, 52, 238, 239],\n    [0, 146, 147, 18, 236, 237, 1, 160, 161, 61, 240, 241],\n    [0, 146, 147, 16, 226, 227, 100, 172, 173, 101, 170, 171],\n    [0, 148, 149, 18, 228, 229, 242, 172, 181, 243, 214, 244],\n    [0, 150, 151, 18, 230, 231, 245, 172, 177, 246, 214, 247],\n    [0, 150, 151, 16, 232, 233, 245, 172, 177, 174, 170, 248],\n    [0, 148, 149, 16, 234, 235, 242, 172, 181, 178, 170, 249],\n    [0, 146, 147, 18, 236, 237, 100, 172, 173, 108, 214, 215],\n    [0, 146, 147, 16, 226, 227, 122, 190, 191, 123, 192, 193],\n    [0, 146, 147, 16, 226, 227, 126, 194, 195, 127, 196, 197],\n    [0, 146, 147, 18, 236, 237, 126, 194, 195, 123, 192, 193],\n    [0, 146, 147, 18, 236, 237, 122, 190, 191, 127, 196, 197],\n    [0, 146, 147, 52, 238, 239, 122, 190, 191, 101, 170, 171],\n    [0, 146, 147, 61, 240, 241, 126, 194, 195, 101, 170, 171],\n    [0, 146, 147, 52, 238, 239, 100, 172, 173, 123, 192, 193],\n    [0, 146, 147, 61, 240, 241, 100, 172, 173, 127, 196, 197],\n    [0, 146, 147, 16, 226, 227, 100, 172, 173, 101, 170, 171, 1, 160, 161, 52, 239, 238, 122, 190, 191, 123, 192, 193],\n    [0, 146, 147, 16, 226, 227, 109, 216, 217, 108, 214, 215, 1, 160, 161, 52, 239, 238, 126, 194, 195, 127, 196, 197],\n    [0, 146, 147, 18, 236, 237, 109, 216, 217, 101, 170, 171, 1, 160, 161, 61, 241, 240, 126, 194, 195, 123, 192, 193],\n    [0, 146, 147, 18, 236, 237, 100, 172, 173, 108, 214, 215, 1, 160, 161, 61, 241, 240, 122, 190, 191, 127, 196, 197],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 64, 62, 14, 39, 308, 309, 310, 311, 312, 313, 314, 315, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 65, 59, 40, 38, 316, 317, 318, 319, 320, 321, 322, 323, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 11, 55, 8, 41, 324, 325, 326, 327, 328, 329, 330, 331],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 66, 67, 44, 45, 332, 333, 334, 335, 336, 337, 338, 339, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 68, 69, 46, 47, 340, 341, 342, 343, 344, 345, 346, 347, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 70, 71, 48, 49, 348, 349, 350, 351, 352, 353, 354, 355, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 72, 73, 50, 51, 356, 357, 358, 359, 360, 361, 362, 363],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 1, 59, 14, 41, 168, 325, 318, 311, 169, 313, 330, 323],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 1, 59, 14, 41, 168, 325, 318, 311, 169, 313, 330, 323, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 53, 63, 36, 35, 300, 364, 365, 366, 304, 367, 368, 369],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 138, 139, 95, 94, 406, 407, 408, 409, 410, 411, 412, 413],\n    [0, 24, 5, 28, 158, 265, 258, 275, 159, 277, 270, 263, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 23, 16, 27, 19, 256, 273, 251, 267, 260, 269, 278, 255, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 26, 22, 13, 17, 264, 250, 274, 259, 268, 261, 254, 279, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 4, 20, 2, 25, 272, 257, 266, 252, 276, 253, 262, 271, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 450, 415, 440, 429, 454, 431, 420, 445, 458, 447, 436, 425],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 450, 415, 440, 429, 454, 431, 420, 445, 458, 447, 436, 425],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 123, 122, 88, 89, 204, 474, 475, 476, 205, 477, 478, 479],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 123, 122, 88, 89, 204, 474, 475, 476, 205, 477, 478, 479, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 125, 124, 140, 141, 504, 505, 506, 507, 508, 509, 510, 511],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 123, 122, 88, 89, 204, 474, 475, 476, 205, 477, 478, 479, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 129, 128, 90, 91, 212, 512, 513, 514, 213, 515, 516, 517],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 129, 128, 90, 91, 212, 512, 513, 514, 213, 515, 516, 517],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 129, 128, 90, 91, 212, 512, 513, 514, 213, 515, 516, 517, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 127, 126, 92, 93, 542, 543, 544, 545, 546, 547, 548, 549],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 560, 561, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 64, 62, 14, 39, 308, 309, 310, 311, 312, 313, 314, 315, 481, 480, 483, 482, 486, 487, 484, 485, 491, 490, 489, 488, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 65, 59, 40, 38, 316, 317, 318, 319, 320, 321, 322, 323, 493, 492, 495, 494, 498, 499, 496, 497, 503, 502, 501, 500, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 138, 139, 95, 94, 406, 407, 408, 409, 410, 411, 412, 413, 11, 55, 8, 41, 324, 325, 326, 327, 328, 329, 330, 331, 124, 125, 141, 140, 506, 507, 504, 505, 511, 510, 509, 508],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 64, 62, 14, 39, 308, 309, 310, 311, 312, 313, 314, 315, 519, 518, 521, 520, 524, 525, 522, 523, 529, 528, 527, 526, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 586, 587, 588, 589, 590, 591, 592, 593, 594, 595, 596, 597, 65, 59, 40, 38, 316, 317, 318, 319, 320, 321, 322, 323, 531, 530, 533, 532, 536, 537, 534, 535, 541, 540, 539, 538, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 109, 108, 79, 78, 598, 599, 600, 601, 602, 603, 604, 605, 11, 55, 8, 41, 324, 325, 326, 327, 328, 329, 330, 331, 126, 127, 93, 92, 544, 545, 542, 543, 549, 548, 547, 546],\n    [0, 24, 5, 28, 158, 265, 258, 275, 159, 277, 270, 263, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 66, 69, 50, 49, 332, 349, 342, 359, 336, 361, 354, 347, 493, 123, 483, 140, 498, 507, 204, 485, 503, 490, 509, 205, 23, 16, 27, 19, 256, 273, 251, 267, 260, 269, 278, 255, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 68, 67, 48, 51, 340, 357, 334, 351, 344, 353, 362, 339, 124, 480, 89, 494, 506, 499, 484, 474, 511, 478, 501, 488, 26, 22, 13, 17, 264, 250, 274, 259, 268, 261, 254, 279, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 70, 73, 46, 45, 348, 333, 358, 343, 352, 345, 338, 363, 122, 492, 141, 482, 475, 487, 496, 505, 479, 510, 489, 500, 4, 20, 2, 25, 272, 257, 266, 252, 276, 253, 262, 271, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 72, 71, 44, 47, 356, 341, 350, 335, 360, 337, 346, 355, 481, 125, 495, 88, 486, 476, 504, 497, 491, 502, 477, 508],\n    [0, 24, 5, 28, 158, 265, 258, 275, 159, 277, 270, 263, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 531, 129, 521, 92, 536, 545, 212, 523, 541, 528, 547, 213, 23, 16, 27, 19, 256, 273, 251, 267, 260, 269, 278, 255, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 126, 518, 91, 532, 544, 537, 522, 512, 549, 516, 539, 526, 26, 22, 13, 17, 264, 250, 274, 259, 268, 261, 254, 279, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 640, 641, 128, 530, 93, 520, 513, 525, 534, 543, 517, 548, 527, 538, 4, 20, 2, 25, 272, 257, 266, 252, 276, 253, 262, 271, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 519, 127, 533, 90, 524, 514, 542, 535, 529, 540, 515, 546],\n    [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213],\n    [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 1, 59, 14, 41, 168, 325, 318, 311, 169, 313, 330, 323, 551, 550, 553, 552, 556, 557, 554, 555, 561, 560, 559, 558, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 450, 415, 440, 429, 454, 431, 420, 445, 458, 447, 436, 425, 53, 63, 36, 35, 300, 364, 365, 366, 304, 367, 368, 369, 563, 562, 565, 564, 568, 569, 566, 567, 573, 572, 571, 570],\n    [0, 16],\n    [0, 18],\n    [0, 16, 26, 20],\n    [0, 2, 23, 13],\n    [0, 3, 4, 32],\n    [0, 2, 29, 15],\n    [0, 3, 29, 27],\n    [0, 52],\n    [0, 63],\n    [0, 52, 26, 59],\n    [0, 63, 26, 54],\n    [0, 52, 16, 1],\n    [0, 18, 1, 61],\n    [0, 52, 16, 1, 26, 59, 20, 65],\n    [0, 31, 1, 63],\n    [0, 1, 24, 62],\n    [0, 15, 1, 9], // 'P 1 21/n 1'\n    // X,Y,Z\n    // -X+1/2,Y+1/2,-Z+1/2\n    // -X,-Y,-Z\n    // X+1/2,-Y+1/2,Z+1/2\n    [0, 5, 1, 8], // 'P 1 21/a 1'\n    // X,Y,Z\n    // -X+1/2,Y+1/2,-Z\n    // -X,-Y,-Z\n    // X+1/2,-Y+1/2,Z\n    [0, 31, 1, 63, 26, 21, 65, 54],\n    [0, 2, 57, 56],\n    [0, 60, 3, 16],\n    [0, 22, 57, 3],\n    [0, 2, 28, 20],\n    [0, 17, 13, 24],\n    [0, 20, 19, 13, 4, 24, 17, 27],\n    [0, 22, 57, 3, 4, 16, 60, 32],\n    [0, 22, 57, 3, 23, 20, 30, 12, 26, 24, 33, 15, 4, 16, 60, 32],\n    [0, 22, 57, 3, 29, 18, 27, 25],\n    [0, 22, 3, 57, 1, 55, 10, 37],\n    [0, 22, 385, 396, 3, 57, 109, 117],\n    [0, 22, 57, 3, 159, 279, 654, 655, 158, 274, 656, 657, 29, 18, 25, 27, 284, 658, 262, 269, 280, 659, 257, 267],\n];\nexport const SpacegroupNameToIndexMap = {\n    'P 1': 0,\n    'P -1': 1,\n    'P 1 2 1': 2,\n    'P 1 21 1': 3,\n    'C 1 2 1': 4,\n    'P 1 m 1': 5,\n    'P 1 c 1': 6,\n    'C 1 m 1': 7,\n    'C 1 c 1': 8,\n    'P 1 2/m 1': 9,\n    'P 1 21/m 1': 10,\n    'C 1 2/m 1': 11,\n    'P 1 2/c 1': 12,\n    'P 1 21/c 1': 13,\n    'C 1 2/c 1': 14,\n    'P 2 2 2': 15,\n    'P 2 2 21': 16,\n    'P 21 21 2': 17,\n    'P 21 21 21': 18,\n    'C 2 2 21': 19,\n    'C 2 2 2': 20,\n    'F 2 2 2': 21,\n    'I 2 2 2': 22,\n    'I 21 21 21': 23,\n    'P m m 2': 24,\n    'P m c 21': 25,\n    'P c c 2': 26,\n    'P m a 2': 27,\n    'P c a 21': 28,\n    'P n c 2': 29,\n    'P m n 21': 30,\n    'P b a 2': 31,\n    'P n a 21': 32,\n    'P n n 2': 33,\n    'C m m 2': 34,\n    'C m c 21': 35,\n    'C c c 2': 36,\n    'A m m 2': 37,\n    'A b m 2': 38,\n    'A m a 2': 39,\n    'A b a 2': 40,\n    'F m m 2': 41,\n    'F d d 2': 42,\n    'I m m 2': 43,\n    'I b a 2': 44,\n    'I m a 2': 45,\n    'P 2/m 2/m 2/m': 46,\n    'P m m m': 46,\n    'P 2/n 2/n 2/n': 47,\n    'P n n n': 47,\n    'P 2/c 2/c 2/m': 48,\n    'P c c m': 48,\n    'P 2/b 2/a 2/n': 49,\n    'P b a n': 49,\n    'P 21/m 2/m 2/a': 50,\n    'P m m a': 50,\n    'P 2/n 21/n 2/a': 51,\n    'P n n a': 51,\n    'P 2/m 2/n 21/a': 52,\n    'P m n a': 52,\n    'P 21/c 2/c 2/a': 53,\n    'P c c a': 53,\n    'P 21/b 21/a 2/m': 54,\n    'P b a m': 54,\n    'P 21/c 21/c 2/n': 55,\n    'P c c n': 55,\n    'P 2/b 21/c 21/m': 56,\n    'P b c m': 56,\n    'P 21/n 21/n 2/m': 57,\n    'P n n m': 57,\n    'P 21/m 21/m 2/n': 58,\n    'P m m n': 58,\n    'P 21/b 2/c 21/n': 59,\n    'P b c n': 59,\n    'P 21/b 21/c 21/a': 60,\n    'P b c a': 60,\n    'P 21/n 21/m 21/a': 61,\n    'P n m a': 61,\n    'C 2/m 2/c 21/m': 62,\n    'C m c m': 62,\n    'C 2/m 2/c 21/a': 63,\n    'C m c a': 63,\n    'C 2/m 2/m 2/m': 64,\n    'C m m m': 64,\n    'C 2/c 2/c 2/m': 65,\n    'C c c m': 65,\n    'C 2/m 2/m 2/a': 66,\n    'C m m a': 66,\n    'C 2/c 2/c 2/a': 67,\n    'C c c a': 67,\n    'F 2/m 2/m 2/m': 68,\n    'F m m m': 68,\n    'F 2/d 2/d 2/d': 69,\n    'F d d d': 69,\n    'I 2/m 2/m 2/m': 70,\n    'I m m m': 70,\n    'I 2/b 2/a 2/m': 71,\n    'I b a m': 71,\n    'I 21/b 21/c 21/a': 72,\n    'I b c a': 72,\n    'I 21/m 21/m 21/a': 73,\n    'I m m a': 73,\n    'P 4': 74,\n    'P 41': 75,\n    'P 42': 76,\n    'P 43': 77,\n    'I 4': 78,\n    'I 41': 79,\n    'P -4': 80,\n    'I -4': 81,\n    'P 4/m': 82,\n    'P 42/m': 83,\n    'P 4/n': 84,\n    'P 42/n': 85,\n    'I 4/m': 86,\n    'I 41/a': 87,\n    'P 4 2 2': 88,\n    'P 4 21 2': 89,\n    'P 41 2 2': 90,\n    'P 41 21 2': 91,\n    'P 42 2 2': 92,\n    'P 42 21 2': 93,\n    'P 43 2 2': 94,\n    'P 43 21 2': 95,\n    'I 4 2 2': 96,\n    'I 41 2 2': 97,\n    'P 4 m m': 98,\n    'P 4 b m': 99,\n    'P 42 c m': 100,\n    'P 42 n m': 101,\n    'P 4 c c': 102,\n    'P 4 n c': 103,\n    'P 42 m c': 104,\n    'P 42 b c': 105,\n    'I 4 m m': 106,\n    'I 4 c m': 107,\n    'I 41 m d': 108,\n    'I 41 c d': 109,\n    'P -4 2 m': 110,\n    'P -4 2 c': 111,\n    'P -4 21 m': 112,\n    'P -4 21 c': 113,\n    'P -4 m 2': 114,\n    'P -4 c 2': 115,\n    'P -4 b 2': 116,\n    'P -4 n 2': 117,\n    'I -4 m 2': 118,\n    'I -4 c 2': 119,\n    'I -4 2 m': 120,\n    'I -4 2 d': 121,\n    'P 4/m 2/m 2/m': 122,\n    'P4/m m m': 122,\n    'P 4/m 2/c 2/c': 123,\n    'P4/m c c': 123,\n    'P 4/n 2/b 2/m': 124,\n    'P4/n b m': 124,\n    'P 4/n 2/n 2/c': 125,\n    'P4/n n c': 125,\n    'P 4/m 21/b 2/m': 126,\n    'P4/m b m': 126,\n    'P 4/m 21/n 2/c': 127,\n    'P4/m n c': 127,\n    'P 4/n 21/m 2/m': 128,\n    'P4/n m m': 128,\n    'P 4/n 2/c 2/c': 129,\n    'P4/n c c': 129,\n    'P 42/m 2/m 2/c': 130,\n    'P42/m m c': 130,\n    'P 42/m 2/c 2/m': 131,\n    'P42/m c m': 131,\n    'P 42/n 2/b 2/c': 132,\n    'P42/n b c': 132,\n    'P 42/n 2/n 2/m': 133,\n    'P42/n n m': 133,\n    'P 42/m 21/b 2/c': 134,\n    'P42/m b c': 134,\n    'P 42/m 21/n 2/m': 135,\n    'P42/m n m': 135,\n    'P 42/n 21/m 2/c': 136,\n    'P42/n m c': 136,\n    'P 42/n 21/c 2/m': 137,\n    'P42/n c m': 137,\n    'I 4/m 2/m 2/m': 138,\n    'I4/m m m': 138,\n    'I 4/m 2/c 2/m': 139,\n    'I4/m c m': 139,\n    'I 41/a 2/m 2/d': 140,\n    'I41/a m d': 140,\n    'I 41/a 2/c 2/d': 141,\n    'I41/a c d': 141,\n    'P 3': 142,\n    'P 31': 143,\n    'P 32': 144,\n    'H 3': 145,\n    'R 3': 146,\n    'P -3': 147,\n    'H -3': 148,\n    'R -3': 149,\n    'P 3 1 2': 150,\n    'P 3 2 1': 151,\n    'P 31 1 2': 152,\n    'P 31 2 1': 153,\n    'P 32 1 2': 154,\n    'P 32 2 1': 155,\n    'H 3 2': 156,\n    'R 3 2': 157,\n    'P 3 m 1': 158,\n    'P 3 1 m': 159,\n    'P 3 c 1': 160,\n    'P 3 1 c': 161,\n    'H 3 m': 162,\n    'R 3 m': 163,\n    'H 3 c': 164,\n    'R 3 c': 165,\n    'P -3 1 2/m': 166,\n    'P -3 1 m': 166,\n    'P -3 1 2/c': 167,\n    'P -3 1 c': 167,\n    'P -3 2/m 1': 168,\n    'P -3 m 1': 168,\n    'P -3 2/c 1': 169,\n    'P -3 c 1': 169,\n    'H -3 2/m': 170,\n    'H -3 m': 170,\n    'R -3 2/m': 171,\n    'R -3 m': 171,\n    'H -3 2/c': 172,\n    'H -3 c': 172,\n    'R -3 2/c': 173,\n    'R -3 c': 173,\n    'P 6': 174,\n    'P 61': 175,\n    'P 65': 176,\n    'P 62': 177,\n    'P 64': 178,\n    'P 63': 179,\n    'P -6': 180,\n    'P 6/m': 181,\n    'P 63/m': 182,\n    'P 6 2 2': 183,\n    'P 61 2 2': 184,\n    'P 65 2 2': 185,\n    'P 62 2 2': 186,\n    'P 64 2 2': 187,\n    'P 63 2 2': 188,\n    'P 6 m m': 189,\n    'P 6 c c': 190,\n    'P 63 c m': 191,\n    'P 63 m c': 192,\n    'P -6 m 2': 193,\n    'P -6 c 2': 194,\n    'P -6 2 m': 195,\n    'P -6 2 c': 196,\n    'P 6/m 2/m 2/m': 197,\n    'P 6/m m m': 197,\n    'P 6/m 2/c 2/c': 198,\n    'P 6/m c c': 198,\n    'P 63/m 2/c 2/m': 199,\n    'P 63/m c m': 199,\n    'P 63/m 2/m 2/c': 200,\n    'P 63/m m c': 200,\n    'P 2 3': 201,\n    'F 2 3': 202,\n    'I 2 3': 203,\n    'P 21 3': 204,\n    'I 21 3': 205,\n    'P 2/m -3': 206,\n    'P m -3': 206,\n    'P 2/n -3': 207,\n    'P n -3': 207,\n    'F 2/m -3': 208,\n    'F m -3': 208,\n    'F 2/d -3': 209,\n    'F d -3': 209,\n    'I 2/m -3': 210,\n    'I m -3': 210,\n    'P 21/a -3': 211,\n    'P a -3': 211,\n    'I 21/a -3': 212,\n    'I a -3': 212,\n    'P 4 3 2': 213,\n    'P 42 3 2': 214,\n    'F 4 3 2': 215,\n    'F 41 3 2': 216,\n    'I 4 3 2': 217,\n    'P 43 3 2': 218,\n    'P 41 3 2': 219,\n    'I 41 3 2': 220,\n    'P -4 3 m': 221,\n    'F -4 3 m': 222,\n    'I -4 3 m': 223,\n    'P -4 3 n': 224,\n    'F -4 3 c': 225,\n    'I -4 3 d': 226,\n    'P 4/m -3 2/m': 227,\n    'P m -3 m': 227,\n    'P 4/n -3 2/n': 228,\n    'P n -3 n': 228,\n    'P 42/m -3 2/n': 229,\n    'P m -3 n': 229,\n    'P 42/n -3 2/m': 230,\n    'P n -3 m': 230,\n    'F 4/m -3 2/m': 231,\n    'F m -3 m': 231,\n    'F 4/m -3 2/c': 232,\n    'F m -3 c': 232,\n    'F 41/d -3 2/m': 233,\n    'F d -3 m': 233,\n    'F 41/d -3 2/c': 234,\n    'F d -3 c': 234,\n    'I 4/m -3 2/m': 235,\n    'I m -3 m': 235,\n    'I 41/a -3 2/d': 236,\n    'I a -3 d': 236,\n    'P 1 1 2': 237,\n    'P 1 1 21': 238,\n    'B 1 1 2': 239,\n    'B 2': 239,\n    'A 1 2 1': 240,\n    'C 1 21 1': 241,\n    'I 1 2 1': 242,\n    'I 2': 242,\n    'I 1 21 1': 243,\n    'P 1 1 m': 244,\n    'P 1 1 b': 245,\n    'B 1 1 m': 246,\n    'B 1 1 b': 247,\n    'P 1 1 2/m': 248,\n    'P 1 1 21/m': 249,\n    'B 1 1 2/m': 250,\n    'P 1 1 2/b': 251,\n    'P 1 1 21/b': 252,\n    'P 1 21/n 1': 253,\n    'P 1 21/a 1': 254,\n    'B 1 1 2/b': 255,\n    'P 21 2 2': 256,\n    'P 2 21 2': 257,\n    'P 21 21 2 (a)': 258,\n    'P 21 2 21': 259,\n    'P 2 21 21': 260,\n    'C 2 2 21a)': 261,\n    'C 2 2 2a': 262,\n    'F 2 2 2a': 263,\n    'I 2 2 2a': 264,\n    'P 21/m 21/m 2/n a': 265,\n    'P 42 21 2a': 266,\n    'I 2 3a': 267,\n};\nexport function getSpacegroupIndexFromNumber(num) {\n    // 38 spacegroup variants as given CCP4s symop.lib\n    switch (num) {\n        case 1146: return 146;\n        case 1148: return 149;\n        case 1155: return 157;\n        case 1160: return 163;\n        case 1161: return 165;\n        case 1166: return 171;\n        case 1167: return 173;\n        case 1003: return 237; // 'P 1 1 2'  !(dyad along z)\n        case 1004: return 238; // 'P 1 1 21'  !(unique axis c)\n        case 1005: return 239; // 'B 1 1 2' 'B 2'\n        case 2005: return 240; // 'A 1 2 1'\n        case 3005: return 241; // 'C 1 21 1' ! (Origin on screw at 1/4X)\n        case 4005: return 242; // 'I 1 2 1' 'I 2' !!! GJK @ 2003-06-02\n        case 5005: return 243; // 'I 1 21 1'\n        case 1006: return 244; // 'P 1 1 m'\n        case 1007: return 245; // 'P 1 1 b'\n        case 1008: return 246; // 'B 1 1 m'\n        case 1009: return 247; // 'B 1 1 b'\n        case 1010: return 248; // 'P 1 1 2/m'\n        case 1011: return 249; // 'P 1 1 21/m'\n        case 1012: return 250; // 'B 1 1 2/m'\n        case 1013: return 251; // 'P 1 1 2/b'\n        case 1014: return 252; // 'P 1 1 21/b'\n        case 2014: return 253; // 'P 1 21/n 1'\n        case 3014: return 254; // 'P 1 21/a 1'\n        case 1015: return 255; // 'B 1 1 2/b'\n        case 1017: return 256; // 'P 21 2 2' !(unique axis a)\n        case 2017: return 257; // 'P 2 21 2' !(unique axis b)\n        case 1018: return 258; // 'P 21 21 2 (a)' ! origin on 21 21, shift (1/4,1/4,0)\n        case 2018: return 259; // 'P 21 2 21'  !(unique axis b)\n        case 3018: return 260; // 'P 2 21 21'  !(unique axis a)\n        case 1020: return 261; // 'C 2 2 21a)' ! P212121 with C centring, shift(1/4,0,0)\n        case 1021: return 262; // 'C 2 2 2a'  ! C21212a origin on 21 21\n        case 1022: return 263; // 'F 2 2 2a' ! same as 1018 with face centring  shift (1/4,0,0)\n        case 1023: return 264; // 'I 2 2 2a'  ! as 1018 with origin shift (1/4,1/4,1/4)\n        case 1059: return 265; // 'P 21/m 21/m 2/n a'\n        case 1094: return 266; // 'P 42 21 2a' ! (as P21212a) origin on 21 21 ie Shift 1/4,1/4,1/4\n        case 1197: return 267; // 'I 2 3a' ! Expansion of 1023 which is an expansion of 1018\n    }\n    let offset = 0;\n    if (num > 146)\n        ++offset;\n    if (num > 148)\n        ++offset;\n    if (num > 155)\n        ++offset;\n    if (num > 160)\n        ++offset;\n    if (num > 161)\n        ++offset;\n    if (num > 166)\n        ++offset;\n    if (num > 167)\n        ++offset;\n    return num - 1 + offset;\n}\nexport function getSpacegroupNumberFromIndex(idx) {\n    if (idx < 146)\n        return idx + 1;\n    if (idx === 146)\n        return 1146;\n    if (idx < 149)\n        return idx + 1 - 1;\n    if (idx === 149)\n        return 1148;\n    if (idx < 157)\n        return idx + 1 - 2;\n    if (idx === 157)\n        return 1155;\n    if (idx < 163)\n        return idx + 1 - 3;\n    if (idx === 163)\n        return 1160;\n    if (idx < 165)\n        return idx + 1 - 4;\n    if (idx === 165)\n        return 1161;\n    if (idx < 171)\n        return idx + 1 - 5;\n    if (idx === 171)\n        return 1166;\n    if (idx < 173)\n        return idx + 1 - 6;\n    if (idx === 173)\n        return 1167;\n    if (idx < 237)\n        return idx + 1 - 7;\n    if (idx === 237)\n        return 1003;\n    if (idx === 238)\n        return 1004;\n    if (idx === 239)\n        return 1005;\n    if (idx === 240)\n        return 2005;\n    if (idx === 241)\n        return 3005;\n    if (idx === 242)\n        return 4005;\n    if (idx === 243)\n        return 5005;\n    if (idx === 244)\n        return 1006;\n    if (idx === 245)\n        return 1007;\n    if (idx === 246)\n        return 1008;\n    if (idx === 247)\n        return 1009;\n    if (idx === 248)\n        return 1010;\n    if (idx === 249)\n        return 1011;\n    if (idx === 250)\n        return 1012;\n    if (idx === 251)\n        return 1013;\n    if (idx === 252)\n        return 1014;\n    if (idx === 253)\n        return 2014;\n    if (idx === 254)\n        return 3014;\n    if (idx === 255)\n        return 1015;\n    if (idx === 256)\n        return 1017;\n    if (idx === 257)\n        return 2017;\n    if (idx === 258)\n        return 1018;\n    if (idx === 259)\n        return 2018;\n    if (idx === 260)\n        return 3018;\n    if (idx === 261)\n        return 1020;\n    if (idx === 262)\n        return 1021;\n    if (idx === 263)\n        return 1022;\n    if (idx === 264)\n        return 1023;\n    if (idx === 265)\n        return 1059;\n    if (idx === 266)\n        return 1094;\n    if (idx === 267)\n        return 1197;\n    throw new Error(`unknown spacegroup index '${idx}'`);\n}\n/** Maps spacegroup index to Hermann-Mauguin spacegroup name */\nexport const SpacegroupName = (function () {\n    const names = Object.create(null);\n    for (const n of Object.keys(SpacegroupNameToIndexMap)) {\n        names[SpacegroupNameToIndexMap[n]] = n;\n    }\n    return names;\n}());\n/** Maps spacegroup index to spacegroup number from International Tables for Crystallography */\nexport const SpacegroupNumber = (function () {\n    const numbers = Object.create(null);\n    for (const n of Object.keys(SpacegroupNameToIndexMap)) {\n        const idx = SpacegroupNameToIndexMap[n];\n        numbers[idx] = getSpacegroupNumberFromIndex(idx);\n    }\n    return numbers;\n}());\n/** return -1 if the spacegroup does not exist */\nexport function getSpacegroupIndex(nameOrNumber) {\n    const index = typeof nameOrNumber === 'number'\n        ? getSpacegroupIndexFromNumber(nameOrNumber)\n        : SpacegroupNameToIndexMap[nameOrNumber];\n    if (typeof index === 'undefined' || typeof SpacegroupName[index] === 'undefined')\n        return -1;\n    return index;\n}\n","/**\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3, Mat4 } from '../../linear-algebra.js';\nimport { SpacegroupName, TransformData, GroupData, getSpacegroupIndex, OperatorData, SpacegroupNumber } from './tables.js';\nimport { SymmetryOperator } from '../../geometry/symmetry-operator.js';\nvar SpacegroupCell;\n(function (SpacegroupCell) {\n    /** Create a 'P 1' with cellsize [1, 1, 1] */\n    SpacegroupCell.Zero = create('P 1', Vec3.create(1, 1, 1), Vec3.create(Math.PI / 2, Math.PI / 2, Math.PI / 2));\n    /** True if 'P 1' with cellsize [1, 1, 1] */\n    function isZero(cell) {\n        if (!cell)\n            return true;\n        return cell.index === 0 && cell.size[0] === 1 && cell.size[1] === 1 && cell.size[1] === 1;\n    }\n    SpacegroupCell.isZero = isZero;\n    /** Returns Zero cell if the spacegroup does not exist */\n    function create(nameOrNumber, size, anglesInRadians) {\n        const index = getSpacegroupIndex(nameOrNumber);\n        if (index < 0) {\n            console.warn(`Unknown spacegroup '${nameOrNumber}', returning a 'P 1' with cellsize [1, 1, 1]`);\n            return SpacegroupCell.Zero;\n        }\n        const volume = size[0] * size[1] * size[2];\n        const alpha = anglesInRadians[0];\n        const beta = anglesInRadians[1];\n        const gamma = anglesInRadians[2];\n        const xScale = size[0], yScale = size[1], zScale = size[2];\n        const z1 = Math.cos(beta);\n        const z2 = (Math.cos(alpha) - Math.cos(beta) * Math.cos(gamma)) / Math.sin(gamma);\n        const z3 = Math.sqrt(1.0 - z1 * z1 - z2 * z2);\n        const x = [xScale, 0.0, 0.0];\n        const y = [Math.cos(gamma) * yScale, Math.sin(gamma) * yScale, 0.0];\n        const z = [z1 * zScale, z2 * zScale, z3 * zScale];\n        const fromFractional = Mat4.ofRows([\n            [x[0], y[0], z[0], 0],\n            [0, y[1], z[1], 0],\n            [0, 0, z[2], 0],\n            [0, 0, 0, 1.0]\n        ]);\n        const toFractional = Mat4.invert(Mat4.zero(), fromFractional);\n        return { index, size, volume, anglesInRadians, toFractional, fromFractional };\n    }\n    SpacegroupCell.create = create;\n})(SpacegroupCell || (SpacegroupCell = {}));\nvar Spacegroup;\n(function (Spacegroup) {\n    /** P1 with [1, 1, 1] cell */\n    Spacegroup.ZeroP1 = create(SpacegroupCell.Zero);\n    function create(cell) {\n        const operators = GroupData[cell.index].map(i => getOperatorMatrix(OperatorData[i]));\n        const name = SpacegroupName[cell.index];\n        const num = SpacegroupNumber[cell.index];\n        return { name, num, cell, operators };\n    }\n    Spacegroup.create = create;\n    const _ijkVec = Vec3();\n    const _tempMat = Mat4();\n    function setOperatorMatrix(spacegroup, index, i, j, k, target) {\n        Vec3.set(_ijkVec, i, j, k);\n        Mat4.fromTranslation(_tempMat, _ijkVec);\n        return Mat4.mul(target, Mat4.mul(target, Mat4.mul(target, spacegroup.cell.fromFractional, _tempMat), spacegroup.operators[index]), spacegroup.cell.toFractional);\n    }\n    Spacegroup.setOperatorMatrix = setOperatorMatrix;\n    function getSymmetryOperator(spacegroup, spgrOp, i, j, k) {\n        const operator = setOperatorMatrix(spacegroup, spgrOp, i, j, k, Mat4.zero());\n        return SymmetryOperator.create(SymmetryOperator.getSymmetryOperatorName(spgrOp, i, j, k), operator, { hkl: Vec3.create(i, j, k), spgrOp });\n    }\n    Spacegroup.getSymmetryOperator = getSymmetryOperator;\n    const _translationRef = Vec3();\n    const _translationRefSymop = Vec3();\n    const _translationRefOffset = Vec3();\n    const _translationSymop = Vec3();\n    /**\n     * Get Symmetry operator for transformation around the given\n     * reference point `ref` in fractional coordinates\n     */\n    function getSymmetryOperatorRef(spacegroup, spgrOp, i, j, k, ref) {\n        const operator = Mat4.zero();\n        Vec3.set(_ijkVec, i, j, k);\n        Vec3.floor(_translationRef, ref);\n        Mat4.copy(operator, spacegroup.operators[spgrOp]);\n        Vec3.floor(_translationRefSymop, Vec3.transformMat4(_translationRefSymop, ref, operator));\n        Mat4.getTranslation(_translationSymop, operator);\n        Vec3.sub(_translationSymop, _translationSymop, _translationRefSymop);\n        Vec3.add(_translationSymop, _translationSymop, _translationRef);\n        Vec3.add(_translationSymop, _translationSymop, _ijkVec);\n        Mat4.setTranslation(operator, _translationSymop);\n        Mat4.mul(operator, spacegroup.cell.fromFractional, operator);\n        Mat4.mul(operator, operator, spacegroup.cell.toFractional);\n        Vec3.sub(_translationRefOffset, _translationRefSymop, _translationRef);\n        const _i = i - _translationRefOffset[0];\n        const _j = j - _translationRefOffset[1];\n        const _k = k - _translationRefOffset[2];\n        // const operator = setOperatorMatrixRef(spacegroup, spgrOp, i, j, k, ref, Mat4.zero());\n        return SymmetryOperator.create(SymmetryOperator.getSymmetryOperatorName(spgrOp, _i, _j, _k), operator, { hkl: Vec3.create(_i, _j, _k), spgrOp });\n    }\n    Spacegroup.getSymmetryOperatorRef = getSymmetryOperatorRef;\n    function getOperatorMatrix(ids) {\n        const r1 = TransformData[ids[0]];\n        const r2 = TransformData[ids[1]];\n        const r3 = TransformData[ids[2]];\n        return Mat4.ofRows([r1, r2, r3, [0, 0, 0, 1]]);\n    }\n    function getOperatorXyz(op) {\n        return [\n            formatElement(getRotation(op[0], op[4], op[8]), getShift(op[12])),\n            formatElement(getRotation(op[1], op[5], op[9]), getShift(op[13])),\n            formatElement(getRotation(op[2], op[6], op[10]), getShift(op[14]))\n        ].join(',');\n    }\n    Spacegroup.getOperatorXyz = getOperatorXyz;\n    function getRotation(x, y, z) {\n        const r = [];\n        if (x > 0)\n            r.push('+X');\n        else if (x < 0)\n            r.push('-X');\n        if (y > 0)\n            r.push('+Y');\n        else if (y < 0)\n            r.push('-Y');\n        if (z > 0)\n            r.push('+Z');\n        else if (z < 0)\n            r.push('-Z');\n        if (r.length === 1) {\n            return r[0].charAt(0) === '+' ? r[0].substr(1) : r[0];\n        }\n        if (r.length === 2) {\n            const s0 = r[0].charAt(0);\n            const s1 = r[1].charAt(0);\n            if (s0 === '+')\n                return `${r[0].substr(1)}${r[1]}`;\n            if (s1 === '+')\n                return `${r[1].substr(1)}${r[0]}`;\n        }\n        throw new Error(`unknown rotation '${r}', ${x} ${y} ${z}`);\n    }\n    function getShift(s) {\n        switch (s) {\n            case 1 / 2: return '1/2';\n            case 1 / 4: return '1/4';\n            case 3 / 4: return '3/4';\n            case 1 / 3: return '1/3';\n            case 2 / 3: return '2/3';\n            case 1 / 6: return '1/6';\n            case 5 / 6: return '5/6';\n        }\n        return '';\n    }\n    function formatElement(rotation, shift) {\n        if (shift === '')\n            return rotation;\n        if (rotation.length > 2)\n            return `${rotation}+${shift}`;\n        return rotation.charAt(0) === '-' ? `${shift}${rotation}` : `${shift}+${rotation}`;\n    }\n})(Spacegroup || (Spacegroup = {}));\nexport { Spacegroup, SpacegroupCell };\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3, Mat4, EPSILON } from '../../linear-algebra.js';\nimport { OrderedSet } from '../../../mol-data/int.js';\nimport { Axes3D } from './axes3d.js';\nimport { PrincipalAxes } from '../../linear-algebra/matrix/principal-axes.js';\nfunction Sphere3D() {\n    return Sphere3D.zero();\n}\n(function (Sphere3D) {\n    function hasExtrema(sphere) {\n        return sphere.extrema !== undefined;\n    }\n    Sphere3D.hasExtrema = hasExtrema;\n    function create(center, radius) { return { center, radius }; }\n    Sphere3D.create = create;\n    function zero() { return { center: Vec3(), radius: 0 }; }\n    Sphere3D.zero = zero;\n    function clone(a) {\n        const out = create(Vec3.clone(a.center), a.radius);\n        if (hasExtrema(a))\n            out.extrema = a.extrema.map(e => Vec3.clone(e));\n        return out;\n    }\n    Sphere3D.clone = clone;\n    function set(out, center, radius) {\n        Vec3.copy(out.center, center);\n        out.radius = radius;\n        return out;\n    }\n    Sphere3D.set = set;\n    function copy(out, a) {\n        Vec3.copy(out.center, a.center);\n        out.radius = a.radius;\n        if (hasExtrema(a))\n            setExtrema(out, a.extrema.map(e => Vec3.clone(e)));\n        return out;\n    }\n    Sphere3D.copy = copy;\n    /** Note that `extrema` must not be reused elsewhere */\n    function setExtrema(out, extrema) {\n        if (out.extrema !== undefined) {\n            out.extrema.length = 0;\n            out.extrema.push(...extrema);\n        }\n        else {\n            out.extrema = extrema;\n        }\n        return out;\n    }\n    Sphere3D.setExtrema = setExtrema;\n    function computeBounding(data) {\n        const { x, y, z, indices } = data;\n        let cx = 0, cy = 0, cz = 0;\n        let radiusSq = 0;\n        const size = OrderedSet.size(indices);\n        for (let t = 0; t < size; t++) {\n            const i = OrderedSet.getAt(indices, t);\n            cx += x[i];\n            cy += y[i];\n            cz += z[i];\n        }\n        if (size > 0) {\n            cx /= size;\n            cy /= size;\n            cz /= size;\n        }\n        for (let t = 0; t < size; t++) {\n            const i = OrderedSet.getAt(indices, t);\n            const dx = x[i] - cx, dy = y[i] - cy, dz = z[i] - cz;\n            const d = dx * dx + dy * dy + dz * dz;\n            if (d > radiusSq)\n                radiusSq = d;\n        }\n        return { center: Vec3.create(cx, cy, cz), radius: Math.sqrt(radiusSq) };\n    }\n    Sphere3D.computeBounding = computeBounding;\n    /** Transform sphere with a Mat4 */\n    function transform(out, sphere, m) {\n        Vec3.transformMat4(out.center, sphere.center, m);\n        out.radius = sphere.radius * Mat4.getMaxScaleOnAxis(m);\n        if (hasExtrema(sphere)) {\n            setExtrema(out, sphere.extrema.map(e => Vec3.transformMat4(Vec3(), e, m)));\n        }\n        return out;\n    }\n    Sphere3D.transform = transform;\n    /** Translate sphere by Vec3 */\n    function translate(out, sphere, v) {\n        Vec3.add(out.center, sphere.center, v);\n        if (hasExtrema(sphere)) {\n            setExtrema(out, sphere.extrema.map(e => Vec3.add(Vec3(), e, v)));\n        }\n        return out;\n    }\n    Sphere3D.translate = translate;\n    /** Scale sphere by a number */\n    function scale(out, sphere, s) {\n        Vec3.scale(out.center, sphere.center, s);\n        out.radius = sphere.radius * s;\n        if (hasExtrema(sphere)) {\n            setExtrema(out, sphere.extrema.map(e => Vec3.scale(Vec3(), e, s)));\n        }\n        return out;\n    }\n    Sphere3D.scale = scale;\n    /** Scale sphere by a number but without extrema */\n    function scaleNX(out, sphere, s) {\n        Vec3.scale(out.center, sphere.center, s);\n        out.radius = sphere.radius * s;\n        return out;\n    }\n    Sphere3D.scaleNX = scaleNX;\n    function toArray(s, out, offset) {\n        Vec3.toArray(s.center, out, offset);\n        out[offset + 3] = s.radius;\n        return out;\n    }\n    Sphere3D.toArray = toArray;\n    function fromArray(out, array, offset) {\n        Vec3.fromArray(out.center, array, offset);\n        out.radius = array[offset + 3];\n        return out;\n    }\n    Sphere3D.fromArray = fromArray;\n    function fromBox3D(out, box) {\n        Vec3.scale(out.center, Vec3.add(out.center, box.max, box.min), 0.5);\n        out.radius = Vec3.distance(out.center, box.max);\n        Sphere3D.setExtrema(out, [\n            Vec3.create(box.min[0], box.min[1], box.min[2]),\n            Vec3.create(box.max[0], box.max[1], box.max[2]),\n            Vec3.create(box.max[0], box.min[1], box.min[2]),\n            Vec3.create(box.min[0], box.max[1], box.max[2]),\n            Vec3.create(box.min[0], box.min[1], box.max[2]),\n            Vec3.create(box.max[0], box.min[1], box.max[2]),\n            Vec3.create(box.max[0], box.max[1], box.min[2]),\n            Vec3.create(box.min[0], box.max[1], box.min[2]),\n        ]);\n        return out;\n    }\n    Sphere3D.fromBox3D = fromBox3D;\n    function fromAxes3D(out, axes) {\n        Vec3.copy(out.center, axes.origin);\n        out.radius = Math.max(Vec3.magnitude(axes.dirA), Vec3.magnitude(axes.dirB), Vec3.magnitude(axes.dirC));\n        return out;\n    }\n    Sphere3D.fromAxes3D = fromAxes3D;\n    const tmpCenter = Vec3();\n    /** Get a tight sphere around a transformed box */\n    function fromDimensionsAndTransform(out, dimensions, transform) {\n        const [x, y, z] = dimensions;\n        const cpA = Vec3.create(0, 0, 0);\n        Vec3.transformMat4(cpA, cpA, transform);\n        const cpB = Vec3.create(x, y, z);\n        Vec3.transformMat4(cpB, cpB, transform);\n        const cpC = Vec3.create(x, 0, 0);\n        Vec3.transformMat4(cpC, cpC, transform);\n        const cpD = Vec3.create(0, y, z);\n        Vec3.transformMat4(cpD, cpD, transform);\n        const cpE = Vec3.create(0, 0, z);\n        Vec3.transformMat4(cpE, cpE, transform);\n        const cpF = Vec3.create(x, 0, z);\n        Vec3.transformMat4(cpF, cpF, transform);\n        const cpG = Vec3.create(x, y, 0);\n        Vec3.transformMat4(cpG, cpG, transform);\n        const cpH = Vec3.create(0, y, 0);\n        Vec3.transformMat4(cpH, cpH, transform);\n        Vec3.add(tmpCenter, cpA, cpB);\n        Vec3.scale(tmpCenter, tmpCenter, 0.5);\n        const d = Math.max(Vec3.distance(cpA, cpB), Vec3.distance(cpC, cpD));\n        Sphere3D.set(out, tmpCenter, d / 2);\n        Sphere3D.setExtrema(out, [cpA, cpB, cpC, cpD, cpE, cpF, cpG, cpH]);\n        return out;\n    }\n    Sphere3D.fromDimensionsAndTransform = fromDimensionsAndTransform;\n    const tmpAddVec3 = Vec3();\n    function addVec3(out, s, v) {\n        const d = Vec3.distance(s.center, v);\n        if (d < s.radius)\n            return Sphere3D.copy(out, s);\n        Vec3.sub(tmpAddVec3, s.center, v);\n        Vec3.sub(tmpAddVec3, s.center, tmpAddVec3);\n        Vec3.setMagnitude(tmpAddVec3, tmpAddVec3, s.radius);\n        Vec3.scale(out.center, Vec3.add(tmpAddVec3, tmpAddVec3, v), 0.5);\n        out.radius = Vec3.distance(out.center, v);\n        return out;\n    }\n    Sphere3D.addVec3 = addVec3;\n    /** Expand sphere radius by another sphere */\n    function expandBySphere(out, sphere, by) {\n        Vec3.copy(out.center, sphere.center);\n        out.radius = Math.max(sphere.radius, Vec3.distance(sphere.center, by.center) + by.radius);\n        if (hasExtrema(sphere) && hasExtrema(by)) {\n            setExtrema(out, [\n                ...sphere.extrema.map(e => Vec3.clone(e)),\n                ...by.extrema.map(e => Vec3.clone(e))\n            ]);\n        }\n        return out;\n    }\n    Sphere3D.expandBySphere = expandBySphere;\n    const tmpDir = Vec3();\n    /** Expand sphere radius by delta */\n    function expand(out, sphere, delta) {\n        var _a, _b;\n        Vec3.copy(out.center, sphere.center);\n        out.radius = sphere.radius + delta;\n        if (sphere.radius < 1e-12 || ((_b = (_a = sphere.extrema) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) <= 1) {\n            out.extrema = void 0;\n            return out;\n        }\n        if (hasExtrema(sphere)) {\n            const positions = new Float32Array(sphere.extrema.length * 3);\n            for (let i = 0; i < sphere.extrema.length; i++) {\n                Vec3.toArray(sphere.extrema[i], positions, i * 3);\n            }\n            const axes = PrincipalAxes.calculateMomentsAxes(positions);\n            Axes3D.scale(axes, Axes3D.normalize(axes, axes), delta);\n            setExtrema(out, sphere.extrema.map(e => {\n                Vec3.normalize(tmpDir, Vec3.sub(tmpDir, e, sphere.center));\n                const o = Vec3.clone(e);\n                const sA = Vec3.dot(tmpDir, axes.dirA) < 0 ? -1 : 1;\n                Vec3.scaleAndAdd(o, o, axes.dirA, sA);\n                const sB = Vec3.dot(tmpDir, axes.dirB) < 0 ? -1 : 1;\n                Vec3.scaleAndAdd(o, o, axes.dirB, sB);\n                const sC = Vec3.dot(tmpDir, axes.dirC) < 0 ? -1 : 1;\n                Vec3.scaleAndAdd(o, o, axes.dirC, sC);\n                if (Vec3.distance(out.center, o) > out.radius) {\n                    if (sphere.extrema.length >= 14) { // 14 extrema with coarse boundary helper\n                        Vec3.normalize(tmpDir, Vec3.sub(tmpDir, o, sphere.center));\n                    }\n                    Vec3.scaleAndAdd(o, out.center, tmpDir, out.radius);\n                }\n                return o;\n            }));\n        }\n        return out;\n    }\n    Sphere3D.expand = expand;\n    /**\n     * Returns whether or not the spheres have exactly the same center and radius (when compared with ===)\n     */\n    function exactEquals(a, b) {\n        return a.radius === b.radius && Vec3.exactEquals(a.center, b.center);\n    }\n    Sphere3D.exactEquals = exactEquals;\n    /**\n     * Returns whether or not the spheres have approximately the same center and radius.\n     */\n    function equals(a, b) {\n        const ar = a.radius;\n        const br = b.radius;\n        return (Math.abs(ar - br) <= EPSILON * Math.max(1.0, Math.abs(ar), Math.abs(br)) &&\n            Vec3.equals(a.center, b.center));\n    }\n    Sphere3D.equals = equals;\n    /**\n     * Check if `a` includes `b`, use `extrema` of `b` when available\n     */\n    function includes(a, b) {\n        if (hasExtrema(b)) {\n            for (const e of b.extrema) {\n                if (Vec3.distance(a.center, e) > a.radius)\n                    return false;\n            }\n            return true;\n        }\n        else {\n            return Vec3.distance(a.center, b.center) + b.radius <= a.radius;\n        }\n    }\n    Sphere3D.includes = includes;\n    /** Check if `a` and `b` are overlapping */\n    function overlaps(a, b) {\n        return Vec3.distance(a.center, b.center) <= a.radius + b.radius;\n    }\n    Sphere3D.overlaps = overlaps;\n    /** Get the signed distance of `a` and `b` */\n    function distance(a, b) {\n        return Vec3.distance(a.center, b.center) - a.radius + b.radius;\n    }\n    Sphere3D.distance = distance;\n    /** Get the distance of v from sphere. If negative, v is inside sphere */\n    function distanceToVec(sphere, v) {\n        const { center, radius } = sphere;\n        return Vec3.distance(v, center) - radius;\n    }\n    Sphere3D.distanceToVec = distanceToVec;\n})(Sphere3D || (Sphere3D = {}));\nexport { Sphere3D };\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\n/** Cache the latest result from calls to a function with any number of arguments */\nexport function memoizeLatest(f) {\n    let lastArgs = void 0, value = void 0;\n    return (...args) => {\n        if (!lastArgs || lastArgs.length !== args.length) {\n            lastArgs = args;\n            value = f.apply(void 0, args);\n            return value;\n        }\n        for (let i = 0, _i = args.length; i < _i; i++) {\n            if (args[i] !== lastArgs[i]) {\n                lastArgs = args;\n                value = f.apply(void 0, args);\n                return value;\n            }\n        }\n        return value;\n    };\n}\n/** Cache all results from calls to a function with a single argument */\nexport function memoize1(f) {\n    const cache = new Map();\n    return a => {\n        if (cache.has(a))\n            return cache.get(a);\n        const v = f(a);\n        cache.set(a, v);\n        return v;\n    };\n}\n","/**\n * Copyright (c) 2017-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, ColumnHelpers } from '../../../../../mol-data/db.js';\nimport { parseInt as fastParseInt, parseFloat as fastParseFloat } from '../number-parser.js';\nexport function TokenColumnProvider(tokens) {\n    return function (type) {\n        return TokenColumn(tokens, type);\n    };\n}\nexport function TokenColumn(tokens, schema) {\n    const { data, indices, count: rowCount } = tokens;\n    const { valueType: type } = schema;\n    const value = type === 'str'\n        ? row => data.substring(indices[2 * row], indices[2 * row + 1])\n        : type === 'int'\n            ? row => fastParseInt(data, indices[2 * row], indices[2 * row + 1]) || 0\n            : row => fastParseFloat(data, indices[2 * row], indices[2 * row + 1]) || 0;\n    return {\n        schema: schema,\n        __array: void 0,\n        isDefined: true,\n        rowCount,\n        value,\n        valueKind: row => Column.ValueKinds.Present,\n        toArray: params => ColumnHelpers.createAndFillArray(rowCount, value, params),\n        areValuesEqual: areValuesEqualProvider(tokens)\n    };\n}\nexport function areValuesEqualProvider(tokens) {\n    const { data, indices } = tokens;\n    return function (rowA, rowB) {\n        const aS = indices[2 * rowA], bS = indices[2 * rowB];\n        const len = indices[2 * rowA + 1] - aS;\n        if (len !== indices[2 * rowB + 1] - bS)\n            return false;\n        for (let i = 0; i < len; i++) {\n            if (data.charCodeAt(i + aS) !== data.charCodeAt(i + bS)) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\nexport function areTokensEmpty(tokens) {\n    const { count, indices } = tokens;\n    for (let i = 0; i < count; ++i) {\n        if (indices[2 * i] !== indices[2 * i + 1])\n            return false;\n    }\n    return true;\n}\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { BondType } from '../../model/types.js';\nimport { StructureElement, StructureProperties, Unit } from '../../structure.js';\nimport { sortedCantorPairing } from '../../../../mol-data/util.js';\nexport function molstar_bond_site(ctx) {\n    const entries = getEntries(ctx);\n    if (entries.length === 0)\n        return;\n    return [Category, entries, { ignoreFilter: true }];\n}\nexport const MolstarBondSiteSchema = {\n    molstar_bond_site: {\n        atom_id_1: Column.Schema.int,\n        atom_id_2: Column.Schema.int,\n        value_order: Column.Schema.Aliased(Column.Schema.lstr),\n        type_id: Column.Schema.Aliased(Column.Schema.lstr),\n    }\n};\nconst Fields = CifWriter.fields()\n    .int('atom_id_1', (i, xs) => xs[i].atom_id_1)\n    .int('atom_id_2', (i, xs) => xs[i].atom_id_2)\n    .str('value_order', (i, xs) => { var _a; return (_a = xs[i].value_order) !== null && _a !== void 0 ? _a : ''; }, {\n    valueKind: (i, xs) => xs[i].value_order === undefined ? Column.ValueKinds.NotPresent : Column.ValueKinds.Present,\n})\n    .str('type_id', (i, xs) => { var _a; return (_a = xs[i].type_id) !== null && _a !== void 0 ? _a : ''; }, {\n    valueKind: (i, xs) => xs[i].type_id === undefined ? Column.ValueKinds.NotPresent : Column.ValueKinds.Present,\n})\n    .getFields();\nconst Category = {\n    name: 'molstar_bond_site',\n    instance(entries) {\n        return { fields: Fields, source: [{ data: entries, rowCount: entries.length }] };\n    }\n};\nfunction assignValueOrder(order, flags, out) {\n    out[0] = undefined;\n    out[1] = undefined;\n    if (order === 1)\n        out[0] = 'sing';\n    else if (order === 2)\n        out[0] = 'doub';\n    else if (order === 3)\n        out[0] = 'trip';\n    else if (order === 4)\n        out[0] = 'quad';\n    if (BondType.is(flags, BondType.Flag.Aromatic))\n        out[0] = 'arom';\n    if (BondType.is(flags, BondType.Flag.Disulfide))\n        out[1] = 'disulf';\n    else if (BondType.is(flags, BondType.Flag.Covalent))\n        out[1] = 'covale';\n    else if (BondType.is(flags, BondType.Flag.MetallicCoordination))\n        out[1] = 'metalc';\n    else if (BondType.is(flags, BondType.Flag.HydrogenBond))\n        out[1] = 'hydrog';\n}\nfunction getEntries(ctx) {\n    const entries = [];\n    const added = new Set();\n    const loc = StructureElement.Location.create();\n    const { id: atom_id } = StructureProperties.atom;\n    const info = [undefined, undefined];\n    const add = (a, b) => {\n        const key = sortedCantorPairing(a, b);\n        if (added.has(key))\n            return;\n        added.add(key);\n        if (a > b) {\n            entries.push({ atom_id_1: b, atom_id_2: a, value_order: info[0], type_id: info[1] });\n        }\n        else {\n            entries.push({ atom_id_1: a, atom_id_2: b, value_order: info[0], type_id: info[1] });\n        }\n    };\n    for (const s of ctx.structures) {\n        loc.structure = s;\n        for (const u of s.units) {\n            if (!Unit.isAtomic(u))\n                continue;\n            const { elements } = u;\n            const { a, b, edgeProps } = u.bonds;\n            loc.unit = u;\n            for (let i = 0; i < a.length; i++) {\n                loc.element = elements[a[i]];\n                const atom_id_1 = atom_id(loc);\n                loc.element = elements[b[i]];\n                const atom_id_2 = atom_id(loc);\n                assignValueOrder(edgeProps.order[i], edgeProps.flags[i], info);\n                add(atom_id_1, atom_id_2);\n            }\n        }\n        s.interUnitBonds.edges.forEach((e) => {\n            let u = s.unitMap.get(e.unitA);\n            loc.unit = u;\n            loc.element = u.elements[e.indexA];\n            const atom_id_1 = atom_id(loc);\n            u = s.unitMap.get(e.unitB);\n            loc.unit = u;\n            loc.element = u.elements[e.indexB];\n            const atom_id_2 = atom_id(loc);\n            assignValueOrder(e.props.order, e.props.flag, info);\n            add(atom_id_1, atom_id_2);\n        });\n    }\n    entries.sort((a, b) => {\n        if (a.atom_id_1 !== b.atom_id_1)\n            return a.atom_id_1 - b.atom_id_1;\n        if (a.atom_id_2 !== b.atom_id_2)\n            return a.atom_id_2 - b.atom_id_2;\n        return 0;\n    });\n    return entries;\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { BitFlags } from '../../../../mol-util/index.js';\nexport { DSSPType };\nvar DSSPType;\n(function (DSSPType) {\n    DSSPType.is = BitFlags.has;\n    DSSPType.create = BitFlags.create;\n    let Flag;\n    (function (Flag) {\n        Flag[Flag[\"_\"] = 0] = \"_\";\n        Flag[Flag[\"H\"] = 1] = \"H\";\n        Flag[Flag[\"B\"] = 2] = \"B\";\n        Flag[Flag[\"E\"] = 4] = \"E\";\n        Flag[Flag[\"G\"] = 8] = \"G\";\n        Flag[Flag[\"I\"] = 16] = \"I\";\n        Flag[Flag[\"S\"] = 32] = \"S\";\n        Flag[Flag[\"T\"] = 64] = \"T\";\n        Flag[Flag[\"T3\"] = 128] = \"T3\";\n        Flag[Flag[\"T4\"] = 256] = \"T4\";\n        Flag[Flag[\"T5\"] = 512] = \"T5\";\n        Flag[Flag[\"T3S\"] = 1024] = \"T3S\";\n        Flag[Flag[\"T4S\"] = 2048] = \"T4S\";\n        Flag[Flag[\"T5S\"] = 4096] = \"T5S\";\n    })(Flag = DSSPType.Flag || (DSSPType.Flag = {}));\n})(DSSPType || (DSSPType = {}));\nexport var BridgeType;\n(function (BridgeType) {\n    BridgeType[BridgeType[\"PARALLEL\"] = 0] = \"PARALLEL\";\n    BridgeType[BridgeType[\"ANTI_PARALLEL\"] = 1] = \"ANTI_PARALLEL\";\n})(BridgeType || (BridgeType = {}));\nexport class Bridge {\n    constructor(p1, p2, type) {\n        this.partner1 = Math.min(p1, p2);\n        this.partner2 = Math.max(p1, p2);\n        this.type = type;\n    }\n}\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { IntAdjacencyGraph } from '../../../../mol-math/graph.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\n/** max distance between two C-alpha atoms to check for hbond */\nconst caMaxDist = 9.0;\n/**\n * Constant for electrostatic energy in kcal/mol\n *      f  *  q1 *   q2\n * Q = -332 * 0.42 * 0.20\n *\n * f is the dimensional factor\n *\n * q1 and q2 are partial charges which are placed on the C,O\n * (+q1,-q1) and N,H (-q2,+q2)\n */\nconst Q = -27.888;\n/** cutoff for hbonds in kcal/mol, must be lower to be consider as an hbond */\nconst hbondEnergyCutoff = -0.5;\n/** prevent extremely low hbond energies */\nconst hbondEnergyMinimal = -9.9;\n/**\n * E = Q * (1/r(ON) + l/r(CH) - l/r(OH) - l/r(CN))\n */\nfunction calcHbondEnergy(oPos, cPos, nPos, hPos) {\n    const distOH = Vec3.distance(oPos, hPos);\n    const distCH = Vec3.distance(cPos, hPos);\n    const distCN = Vec3.distance(cPos, nPos);\n    const distON = Vec3.distance(oPos, nPos);\n    const e1 = Q / distOH - Q / distCH;\n    const e2 = Q / distCN - Q / distON;\n    const e = e1 + e2;\n    // cap lowest possible energy\n    if (e < hbondEnergyMinimal)\n        return hbondEnergyMinimal;\n    return e;\n}\nexport function calcUnitBackboneHbonds(unit, proteinInfo, lookup3d) {\n    const { residueIndices, cIndices, hIndices, nIndices, oIndices } = proteinInfo;\n    const { index } = unit.model.atomicHierarchy;\n    const c = unit.conformation;\n    const { traceElementIndex } = unit.model.atomicHierarchy.derived.residue;\n    const residueCount = residueIndices.length;\n    const oAtomResidues = [];\n    const nAtomResidues = [];\n    const energies = [];\n    const oPos = Vec3();\n    const cPos = Vec3();\n    const caPos = Vec3();\n    const nPos = Vec3();\n    const hPos = Vec3();\n    const cPosPrev = Vec3();\n    const oPosPrev = Vec3();\n    for (let i = 0, il = residueIndices.length; i < il; ++i) {\n        const oPI = i;\n        const oRI = residueIndices[i];\n        const oAtom = oIndices[oPI];\n        const cAtom = cIndices[oPI];\n        const caAtom = traceElementIndex[oRI];\n        // continue if residue is missing O or C atom\n        if (oAtom === -1 || cAtom === -1)\n            continue;\n        // ignore C-terminal residue as acceptor\n        if (index.findAtomOnResidue(oRI, 'OXT') !== -1)\n            continue;\n        c.invariantPosition(oAtom, oPos);\n        c.invariantPosition(cAtom, cPos);\n        c.invariantPosition(caAtom, caPos);\n        const { indices, count } = lookup3d.find(caPos[0], caPos[1], caPos[2], caMaxDist);\n        for (let j = 0; j < count; ++j) {\n            const nPI = indices[j];\n            // ignore bonds within a residue or to prev or next residue\n            if (nPI === oPI || nPI - 1 === oPI || nPI + 1 === oPI)\n                continue;\n            const nAtom = nIndices[nPI];\n            if (nAtom === -1)\n                continue;\n            c.invariantPosition(nAtom, nPos);\n            const hAtom = hIndices[nPI];\n            if (hAtom === -1) {\n                // approximate calculation of H position, TODO factor out\n                if (nPI === 0)\n                    continue;\n                const nPIprev = nPI - 1;\n                const oAtomPrev = oIndices[nPIprev];\n                const cAtomPrev = cIndices[nPIprev];\n                if (oAtomPrev === -1 || cAtomPrev === -1)\n                    continue;\n                c.invariantPosition(oAtomPrev, oPosPrev);\n                c.invariantPosition(cAtomPrev, cPosPrev);\n                Vec3.sub(hPos, cPosPrev, oPosPrev);\n                const dist = Vec3.distance(oPosPrev, cPosPrev);\n                Vec3.scaleAndAdd(hPos, nPos, hPos, 1 / dist);\n            }\n            else {\n                c.invariantPosition(hAtom, hPos);\n            }\n            const e = calcHbondEnergy(oPos, cPos, nPos, hPos);\n            if (e > hbondEnergyCutoff)\n                continue;\n            oAtomResidues[oAtomResidues.length] = oPI;\n            nAtomResidues[nAtomResidues.length] = nPI;\n            energies[energies.length] = e;\n        }\n    }\n    return buildHbondGraph(residueCount, oAtomResidues, nAtomResidues, energies);\n}\nfunction buildHbondGraph(residueCount, oAtomResidues, nAtomResidues, energies) {\n    const builder = new IntAdjacencyGraph.DirectedEdgeBuilder(residueCount, oAtomResidues, nAtomResidues);\n    const _energies = new Float32Array(builder.slotCount);\n    for (let i = 0, _i = builder.edgeCount; i < _i; i++) {\n        builder.addNextEdge();\n        builder.assignProperty(_energies, energies[i]);\n    }\n    return builder.createGraph({ energies });\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { BridgeType } from './common.js';\nfunction shouldExtendLadder(ladder, bridge) {\n    // in order to extend ladders, same type must be present\n    if (bridge.type !== ladder.type)\n        return false;\n    // only extend if residue 1 is sequence neighbor with regard to ladder\n    if (bridge.partner1 !== ladder.firstEnd + 1)\n        return false;\n    if (bridge.type === BridgeType.PARALLEL) {\n        if (bridge.partner2 === ladder.secondEnd + 1) {\n            return true;\n        }\n    }\n    else {\n        if (bridge.partner2 === ladder.secondStart - 1) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * For beta structures, we define: a bulge-linked ladder consists of two ladders or bridges of the same type\n * connected by at most one extra residue of one strand and at most four extra residues  on the other strand,\n * all residues in bulge-linked ladders are marked E, including any extra residues.\n */\nfunction resemblesBulge(ladder1, ladder2) {\n    if (!(ladder1.type === ladder2.type && ladder2.firstStart - ladder1.firstEnd < 6 &&\n        ladder1.firstStart < ladder2.firstStart && ladder2.nextLadder === 0))\n        return false;\n    if (ladder1.type === BridgeType.PARALLEL) {\n        return bulgeCriterion2(ladder1, ladder2);\n    }\n    else {\n        return bulgeCriterion2(ladder2, ladder1);\n    }\n}\nfunction bulgeCriterion2(ladder1, ladder2) {\n    return ladder2.secondStart - ladder1.secondEnd > 0 && ((ladder2.secondStart - ladder1.secondEnd < 6 &&\n        ladder2.firstStart - ladder1.firstEnd < 3) || ladder2.secondStart - ladder1.secondEnd < 3);\n}\n/**\n * ladder=: set of one or more consecutive bridges of identical type\n *\n * Type: E\n */\nexport function assignLadders(ctx) {\n    const { bridges, ladders } = ctx;\n    // create ladders\n    for (let bridgeIndex = 0; bridgeIndex < bridges.length; bridgeIndex++) {\n        const bridge = bridges[bridgeIndex];\n        let found = false;\n        for (let ladderIndex = 0; ladderIndex < ladders.length; ladderIndex++) {\n            const ladder = ladders[ladderIndex];\n            if (shouldExtendLadder(ladder, bridge)) {\n                found = true;\n                ladder.firstEnd++;\n                if (bridge.type === BridgeType.PARALLEL) {\n                    ladder.secondEnd++;\n                }\n                else {\n                    ladder.secondStart--;\n                }\n            }\n        }\n        // no suitable assignment: create new ladder with single bridge as content\n        if (!found) {\n            ladders[ladders.length] = {\n                previousLadder: 0,\n                nextLadder: 0,\n                firstStart: bridge.partner1,\n                firstEnd: bridge.partner1,\n                secondStart: bridge.partner2,\n                secondEnd: bridge.partner2,\n                type: bridge.type\n            };\n        }\n    }\n    // connect ladders\n    for (let ladderIndex1 = 0; ladderIndex1 < ladders.length; ladderIndex1++) {\n        const ladder1 = ladders[ladderIndex1];\n        for (let ladderIndex2 = ladderIndex1; ladderIndex2 < ladders.length; ladderIndex2++) {\n            const ladder2 = ladders[ladderIndex2];\n            if (resemblesBulge(ladder1, ladder2)) {\n                ladder1.nextLadder = ladderIndex2;\n                ladder2.previousLadder = ladderIndex1;\n            }\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { DSSPType, BridgeType } from './common.js';\nfunction isHelixType(f) {\n    return DSSPType.is(f, DSSPType.Flag.G) || DSSPType.is(f, DSSPType.Flag.H) || DSSPType.is(f, DSSPType.Flag.I);\n}\n/**\n * sheet=: set of one or more ladders connected by shared residues\n *\n * Type: E\n */\nexport function assignSheets(ctx) {\n    const { ladders, flags } = ctx;\n    for (let ladderIndex = 0; ladderIndex < ladders.length; ladderIndex++) {\n        const ladder = ladders[ladderIndex];\n        for (let lcount = ladder.firstStart; lcount <= ladder.firstEnd; lcount++) {\n            const diff = ladder.firstStart - lcount;\n            const l2count = ladder.secondStart - diff;\n            if (ladder.firstStart !== ladder.firstEnd) {\n                flags[lcount] |= DSSPType.Flag.E;\n                flags[l2count] |= DSSPType.Flag.E;\n            }\n            else {\n                if (!isHelixType(flags[lcount]) && DSSPType.is(flags[lcount], DSSPType.Flag.E)) {\n                    flags[lcount] |= DSSPType.Flag.B;\n                }\n                if (!isHelixType(flags[l2count]) && DSSPType.is(flags[l2count], DSSPType.Flag.E)) {\n                    flags[l2count] |= DSSPType.Flag.B;\n                }\n            }\n        }\n        if (ladder.nextLadder === 0)\n            continue;\n        const conladder = ladders[ladder.nextLadder];\n        for (let lcount = ladder.firstStart; lcount <= conladder.firstEnd; lcount++) {\n            flags[lcount] |= DSSPType.Flag.E;\n        }\n        if (ladder.type === BridgeType.PARALLEL) {\n            for (let lcount = ladder.secondStart; lcount <= conladder.secondEnd; lcount++) {\n                flags[lcount] |= DSSPType.Flag.E;\n            }\n        }\n        else {\n            for (let lcount = conladder.secondEnd; lcount <= ladder.secondStart; lcount++) {\n                flags[lcount] |= DSSPType.Flag.E;\n            }\n        }\n    }\n}\n","/**\n * Copyright (c) 2019-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { SecondaryStructure } from '../../../mol-model/structure/model/properties/secondary-structure.js';\nimport { SecondaryStructureType } from '../../../mol-model/structure/model/types.js';\nimport { ParamDefinition as PD } from '../../../mol-util/param-definition.js';\nimport { assignBends } from './dssp/bends.js';\nimport { calcUnitBackboneHbonds } from './dssp/backbone-hbonds.js';\nimport { DSSPType } from './dssp/common.js';\nimport { assignTurns } from './dssp/turns.js';\nimport { assignHelices } from './dssp/helices.js';\nimport { assignLadders } from './dssp/ladders.js';\nimport { assignBridges } from './dssp/bridges.js';\nimport { assignSheets } from './dssp/sheets.js';\nimport { calculateUnitDihedralAngles } from './dssp/dihedral-angles.js';\nimport { calcUnitProteinTraceLookup3D } from './dssp/trace-lookup.js';\nimport { getUnitProteinInfo } from './dssp/protein-info.js';\nimport { SortedArray } from '../../../mol-data/int.js';\n/**\n * TODO bugs to fix:\n * - some turns are not detected correctly: see e.g. pdb:1acj - maybe more than 2 hbonds require some residue to donate electrons\n * - some sheets are not extended correctly: see e.g. pdb:1acj\n * - validate new helix definition\n * - validate new ordering of secondary structure elements\n */\nexport const DSSPComputationParams = {\n    oldDefinition: PD.Boolean(true, { description: 'Whether to use the old DSSP convention for the annotation of turns and helices, causes them to be two residues shorter' }),\n    oldOrdering: PD.Boolean(true, { description: 'Alpha-helices are preferred over 3-10 helices' })\n};\nexport const DefaultDSSPComputationProps = PD.getDefaultValues(DSSPComputationParams);\nexport async function computeUnitDSSP(unit, params) {\n    const proteinInfo = getUnitProteinInfo(unit);\n    const { residueIndices } = proteinInfo;\n    const lookup3d = calcUnitProteinTraceLookup3D(unit, residueIndices);\n    const hbonds = calcUnitBackboneHbonds(unit, proteinInfo, lookup3d);\n    const residueCount = residueIndices.length;\n    const flags = new Uint32Array(residueCount);\n    // console.log(`calculating secondary structure elements using ${ params.oldDefinition ? 'old' : 'revised'} definition and ${ params.oldOrdering ? 'old' : 'revised'} ordering of secondary structure elements`)\n    const torsionAngles = calculateUnitDihedralAngles(unit, proteinInfo);\n    const ladders = [];\n    const bridges = [];\n    const getResidueFlag = params.oldDefinition ? getOriginalResidueFlag : getUpdatedResidueFlag;\n    const getFlagName = params.oldOrdering ? getOriginalFlagName : getUpdatedFlagName;\n    const ctx = {\n        params,\n        getResidueFlag,\n        getFlagName,\n        unit,\n        proteinInfo,\n        flags,\n        hbonds,\n        torsionAngles,\n        ladders,\n        bridges\n    };\n    assignTurns(ctx);\n    assignHelices(ctx);\n    assignBends(ctx);\n    assignBridges(ctx);\n    assignLadders(ctx);\n    assignSheets(ctx);\n    const assignment = getDSSPAssignment(flags, getResidueFlag);\n    const type = new Uint32Array(residueCount);\n    const keys = [];\n    const elements = [];\n    const getIndex = (rI) => SortedArray.indexOf(residueIndices, rI);\n    for (let i = 0, il = residueIndices.length; i < il; ++i) {\n        const assign = assignment[i];\n        type[i] = assign;\n        const flag = getResidueFlag(flags[i]);\n        // console.log(i, SortedArray.indexOf(residueIndices, i), getFlagName(flags[i]))\n        // TODO is this expected behavior? elements will be strictly split depending on 'winning' flag\n        if (elements.length === 0 /* would fail at very start */ || flag !== elements[elements.length - 1].flags /* flag changed */) {\n            elements[elements.length] = createElement(mapToKind(assign), flags[i], getResidueFlag);\n        }\n        keys[i] = elements.length - 1;\n    }\n    return SecondaryStructure(type, keys, elements, getIndex);\n}\nfunction createElement(kind, flag, getResidueFlag) {\n    // TODO would be nice to add more detailed information\n    if (kind === 'helix') {\n        return {\n            kind: 'helix',\n            flags: getResidueFlag(flag)\n        };\n    }\n    else if (kind === 'sheet') {\n        return {\n            kind: 'sheet',\n            flags: getResidueFlag(flag)\n        };\n    }\n    else if (kind === 'turn' || kind === 'bend') {\n        return {\n            kind: 'turn',\n            flags: getResidueFlag(flag)\n        };\n    }\n    else {\n        return {\n            kind: 'none'\n        };\n    }\n}\nfunction mapToKind(assignment) {\n    if (assignment === SecondaryStructureType.SecondaryStructureDssp.H || assignment === SecondaryStructureType.SecondaryStructureDssp.G || assignment === SecondaryStructureType.SecondaryStructureDssp.I) {\n        return 'helix';\n    }\n    else if (assignment === SecondaryStructureType.SecondaryStructureDssp.B || assignment === SecondaryStructureType.SecondaryStructureDssp.E) {\n        return 'sheet';\n    }\n    else if (assignment === SecondaryStructureType.SecondaryStructureDssp.T) {\n        return 'turn';\n    }\n    else if (assignment === SecondaryStructureType.SecondaryStructureDssp.S) {\n        return 'bend';\n    }\n    else {\n        return 'none';\n    }\n}\n/** Original priority: H,B,E,G,I,T,S */\nfunction getOriginalResidueFlag(f) {\n    if (DSSPType.is(f, DSSPType.Flag.H))\n        return SecondaryStructureType.SecondaryStructureDssp.H;\n    if (DSSPType.is(f, DSSPType.Flag.E))\n        return SecondaryStructureType.SecondaryStructureDssp.E;\n    if (DSSPType.is(f, DSSPType.Flag.B))\n        return SecondaryStructureType.SecondaryStructureDssp.B;\n    if (DSSPType.is(f, DSSPType.Flag.G))\n        return SecondaryStructureType.SecondaryStructureDssp.G;\n    if (DSSPType.is(f, DSSPType.Flag.I))\n        return SecondaryStructureType.SecondaryStructureDssp.I;\n    if (DSSPType.is(f, DSSPType.Flag.T))\n        return SecondaryStructureType.SecondaryStructureDssp.T;\n    if (DSSPType.is(f, DSSPType.Flag.S))\n        return SecondaryStructureType.SecondaryStructureDssp.S;\n    return SecondaryStructureType.Flag.None;\n}\nfunction getOriginalFlagName(f) {\n    if (DSSPType.is(f, DSSPType.Flag.H))\n        return 'H';\n    if (DSSPType.is(f, DSSPType.Flag.E))\n        return 'E';\n    if (DSSPType.is(f, DSSPType.Flag.B))\n        return 'B';\n    if (DSSPType.is(f, DSSPType.Flag.G))\n        return 'G';\n    if (DSSPType.is(f, DSSPType.Flag.I))\n        return 'I';\n    if (DSSPType.is(f, DSSPType.Flag.T))\n        return 'T';\n    if (DSSPType.is(f, DSSPType.Flag.S))\n        return 'S';\n    return '-';\n}\n/** Version 2.1.0 priority: I,H,B,E,G,T,S */\nfunction getUpdatedResidueFlag(f) {\n    if (DSSPType.is(f, DSSPType.Flag.I))\n        return SecondaryStructureType.SecondaryStructureDssp.I;\n    if (DSSPType.is(f, DSSPType.Flag.H))\n        return SecondaryStructureType.SecondaryStructureDssp.H;\n    if (DSSPType.is(f, DSSPType.Flag.E))\n        return SecondaryStructureType.SecondaryStructureDssp.E;\n    if (DSSPType.is(f, DSSPType.Flag.B))\n        return SecondaryStructureType.SecondaryStructureDssp.B;\n    if (DSSPType.is(f, DSSPType.Flag.G))\n        return SecondaryStructureType.SecondaryStructureDssp.G;\n    if (DSSPType.is(f, DSSPType.Flag.T))\n        return SecondaryStructureType.SecondaryStructureDssp.T;\n    if (DSSPType.is(f, DSSPType.Flag.S))\n        return SecondaryStructureType.SecondaryStructureDssp.S;\n    return SecondaryStructureType.Flag.None;\n}\nfunction getUpdatedFlagName(f) {\n    if (DSSPType.is(f, DSSPType.Flag.I))\n        return 'I';\n    if (DSSPType.is(f, DSSPType.Flag.H))\n        return 'H';\n    if (DSSPType.is(f, DSSPType.Flag.E))\n        return 'E';\n    if (DSSPType.is(f, DSSPType.Flag.B))\n        return 'B';\n    if (DSSPType.is(f, DSSPType.Flag.G))\n        return 'G';\n    if (DSSPType.is(f, DSSPType.Flag.T))\n        return 'T';\n    if (DSSPType.is(f, DSSPType.Flag.S))\n        return 'S';\n    return '-';\n}\nfunction getDSSPAssignment(flags, getResidueFlag) {\n    const type = new Uint32Array(flags.length);\n    for (let i = 0, il = flags.length; i < il; ++i) {\n        const f = DSSPType.create(flags[i]);\n        type[i] = getResidueFlag(f);\n    }\n    return type;\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { SortedArray } from '../../../../mol-data/int.js';\nexport function getUnitProteinInfo(unit) {\n    const { index } = unit.model.atomicHierarchy;\n    const { proteinElements, residueIndex } = unit;\n    const residueCount = proteinElements.length;\n    const unitProteinResidues = new Uint32Array(residueCount);\n    const c = new Int32Array(residueCount);\n    const h = new Int32Array(residueCount);\n    const o = new Int32Array(residueCount);\n    const n = new Int32Array(residueCount);\n    for (let i = 0; i < residueCount; ++i) {\n        const rI = residueIndex[proteinElements[i]];\n        unitProteinResidues[i] = rI;\n        c[i] = index.findAtomOnResidue(rI, 'C');\n        h[i] = index.findAtomOnResidue(rI, 'H');\n        o[i] = index.findAtomOnResidue(rI, 'O');\n        n[i] = index.findAtomOnResidue(rI, 'N');\n    }\n    return {\n        residueIndices: SortedArray.ofSortedArray(unitProteinResidues),\n        cIndices: c,\n        hIndices: h,\n        oIndices: o,\n        nIndices: n,\n    };\n}\n","/**\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { GridLookup3D } from '../../../../mol-math/geometry.js';\nimport { SortedArray } from '../../../../mol-data/int.js';\nimport { getBoundary } from '../../../../mol-math/geometry/boundary.js';\nexport function calcUnitProteinTraceLookup3D(unit, unitProteinResidues) {\n    const { x, y, z } = unit.model.atomicConformation;\n    const { traceElementIndex } = unit.model.atomicHierarchy.derived.residue;\n    const indices = new Uint32Array(unitProteinResidues.length);\n    for (let i = 0, il = unitProteinResidues.length; i < il; ++i) {\n        indices[i] = traceElementIndex[unitProteinResidues[i]];\n    }\n    const position = { x, y, z, indices: SortedArray.ofSortedArray(indices) };\n    return GridLookup3D(position, getBoundary(position));\n}\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nimport { radToDeg } from '../../../../mol-math/misc.js';\nexport function calculateUnitDihedralAngles(unit, proteinInfo) {\n    const { cIndices, nIndices, residueIndices } = proteinInfo;\n    const c = unit.conformation;\n    const { index } = unit.model.atomicHierarchy;\n    const { traceElementIndex } = unit.model.atomicHierarchy.derived.residue;\n    const residueCount = residueIndices.length;\n    const p = (i, v) => i === -1 ? Vec3.setNaN(v) : c.position(i, v);\n    let cPosPrev = Vec3(), caPosPrev = Vec3(), nPosPrev = Vec3();\n    let cPos = Vec3(), caPos = Vec3(), nPos = Vec3();\n    const cPosNext = Vec3(), caPosNext = Vec3(), nPosNext = Vec3();\n    if (residueCount === 0)\n        return { phi: new Float32Array(0), psi: new Float32Array(0) };\n    const phi = new Float32Array(residueCount - 1);\n    const psi = new Float32Array(residueCount - 1);\n    p(-1, cPosPrev);\n    p(-1, caPosPrev);\n    p(-1, nPosPrev);\n    p(cIndices[0], cPos);\n    p(traceElementIndex[residueIndices[0]], caPos);\n    p(nIndices[0], nPos);\n    p(cIndices[1], cPosNext);\n    p(traceElementIndex[residueIndices[1]], caPosNext);\n    p(nIndices[1], nPosNext);\n    for (let i = 0; i < residueCount - 1; ++i) {\n        // ignore C-terminal residue as acceptor\n        if (index.findAtomOnResidue(residueIndices[i], 'OXT') !== -1)\n            continue;\n        // returns NaN for missing atoms\n        phi[i] = radToDeg(Vec3.dihedralAngle(cPosPrev, nPos, caPos, cPos));\n        psi[i] = radToDeg(Vec3.dihedralAngle(nPos, caPos, cPos, nPosNext));\n        cPosPrev = cPos, caPosPrev = caPos, nPosPrev = nPos;\n        cPos = cPosNext, caPos = caPosNext, nPos = nPosNext;\n        p(cIndices[i + 1], cPosNext);\n        p(traceElementIndex[residueIndices[i + 1]], caPosNext);\n        p(nIndices[i + 1], nPosNext);\n    }\n    return { phi, psi };\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { DSSPType } from './common.js';\n/**\n * The basic turn pattern is a single H bond of type (i, i + n).\n * We assign an n-turn at residue i if there is an H bond from CO(i) to NH(i + n),\n * i.e., n-turn(i)=: Hbond(i, i + n), n = 3, 4, 5.\n *\n * Type: T\n */\nexport function assignTurns(ctx) {\n    const { proteinInfo, hbonds, flags } = ctx;\n    const turnFlag = [DSSPType.Flag.T3S, DSSPType.Flag.T4S, DSSPType.Flag.T5S, DSSPType.Flag.T3, DSSPType.Flag.T4, DSSPType.Flag.T5];\n    for (let idx = 0; idx < 3; idx++) {\n        for (let i = 0, il = proteinInfo.residueIndices.length - 1; i < il; ++i) {\n            // check if hbond exists\n            if (hbonds.getDirectedEdgeIndex(i, i + idx + 3) !== -1) {\n                flags[i] |= turnFlag[idx + 3] | turnFlag[idx];\n                if (ctx.params.oldDefinition) {\n                    for (let k = 1; k < idx + 3; ++k) {\n                        flags[i + k] |= turnFlag[idx + 3] | DSSPType.Flag.T;\n                    }\n                }\n                else {\n                    for (let k = 0; k <= idx + 3; ++k) {\n                        flags[i + k] |= turnFlag[idx + 3] | DSSPType.Flag.T;\n                    }\n                }\n            }\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { DSSPType } from './common.js';\n/**\n * A minimal helix is defined by two consecutive n-turns.\n * For example, a 4-helix, of minimal length 4 from residues i to i + 3,\n * requires 4-turns at residues i - 1 and i,\n *\n *      3-helix(i,i + 2)=: [3-turn(i - 1) and 3-turn(i)]\n *      4-helix(i,i + 3)=: [4-turn(i - 1) and 4-turn(i)]\n *      5-helix(i,i + 4)=: [5-turn(i - 1) and 5-turn(i)]\n *\n * Type: G (n=3), H (n=4), I (n=5)\n */\nexport function assignHelices(ctx) {\n    const { proteinInfo, flags } = ctx;\n    const residueCount = proteinInfo.residueIndices.length;\n    const turnFlag = [DSSPType.Flag.T3S, DSSPType.Flag.T4S, DSSPType.Flag.T5S, DSSPType.Flag.T3, DSSPType.Flag.T4, DSSPType.Flag.T5];\n    const helixFlag = [0, 0, 0, DSSPType.Flag.G, DSSPType.Flag.H, DSSPType.Flag.I];\n    const helixCheckOrder = ctx.params.oldOrdering ? [4, 3, 5] : [3, 4, 5];\n    for (let ni = 0; ni < helixCheckOrder.length; ni++) {\n        const n = helixCheckOrder[ni];\n        for (let i = 1, il = residueCount - n; i < il; i++) {\n            const fI = DSSPType.create(flags[i]);\n            const fI1 = DSSPType.create(flags[i - 1]);\n            const fI2 = DSSPType.create(flags[i + 1]);\n            // TODO rework to elegant solution which will not break instantly\n            if (ctx.params.oldOrdering) {\n                if ((n === 3 && (DSSPType.is(fI, DSSPType.Flag.H) || DSSPType.is(fI2, DSSPType.Flag.H)) || // for 3-10 yield to alpha helix\n                    (n === 5 && ((DSSPType.is(fI, DSSPType.Flag.H) || DSSPType.is(fI, DSSPType.Flag.G)) || (DSSPType.is(fI2, DSSPType.Flag.H) || DSSPType.is(fI2, DSSPType.Flag.G)))))) { // for pi yield to all other helices\n                    continue;\n                }\n            }\n            else {\n                if ((n === 4 && (DSSPType.is(fI, DSSPType.Flag.G) || DSSPType.is(fI2, DSSPType.Flag.G)) || // for alpha helix yield to 3-10\n                    (n === 5 && ((DSSPType.is(fI, DSSPType.Flag.H) || DSSPType.is(fI, DSSPType.Flag.G)) || (DSSPType.is(fI2, DSSPType.Flag.H) || DSSPType.is(fI2, DSSPType.Flag.G)))))) { // for pi yield to all other helices\n                    continue;\n                }\n            }\n            if (DSSPType.is(fI, turnFlag[n]) && DSSPType.is(fI, turnFlag[n - 3]) && // check fI for turn start of proper type\n                DSSPType.is(fI1, turnFlag[n]) && DSSPType.is(fI1, turnFlag[n - 3])) { // check fI1 accordingly\n                if (ctx.params.oldDefinition) {\n                    for (let k = 0; k < n; k++) {\n                        flags[i + k] |= helixFlag[n];\n                    }\n                }\n                else {\n                    for (let k = -1; k <= n; k++) {\n                        flags[i + k] |= helixFlag[n];\n                    }\n                }\n            }\n        }\n    }\n}\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nimport { radToDeg } from '../../../../mol-math/misc.js';\nimport { DSSPType } from './common.js';\n/**\n * Bend(i) =: [angle ((CW - Ca(i - 2)),(C\"(i + 2) - C\"(i))) > 70\"]\n *\n * Type: S\n */\nexport function assignBends(ctx) {\n    const { unit, flags, proteinInfo } = ctx;\n    const c = unit.conformation;\n    const { traceElementIndex } = unit.model.atomicHierarchy.derived.residue;\n    const { residueIndices, nIndices } = proteinInfo;\n    const residueCount = residueIndices.length;\n    // const position = (i: number, v: Vec3) => Vec3.set(v, x[i], y[i], z[i])\n    const p = (i, v) => i === -1 ? Vec3.setNaN(v) : c.position(i, v);\n    const caPosPrev2 = Vec3();\n    const caPos = Vec3();\n    const caPosNext2 = Vec3();\n    const cPos = Vec3();\n    const nPosNext = Vec3();\n    const caMinus2 = Vec3();\n    const caPlus2 = Vec3();\n    f1: for (let i = 2; i < residueCount - 2; i++) {\n        // check for peptide bond\n        for (let k = 0; k < 4; k++) {\n            const index = i + k - 2;\n            p(traceElementIndex[index], cPos);\n            p(nIndices[index + 1], nPosNext);\n            if (Vec3.squaredDistance(cPos, nPosNext) > 6.25 /* max squared peptide bond distance allowed */) {\n                continue f1;\n            }\n        }\n        const oRIprev2 = residueIndices[i - 2];\n        const oRI = residueIndices[i];\n        const oRInext2 = residueIndices[i + 2];\n        const caAtomPrev2 = traceElementIndex[oRIprev2];\n        const caAtom = traceElementIndex[oRI];\n        const caAtomNext2 = traceElementIndex[oRInext2];\n        p(caAtomPrev2, caPosPrev2);\n        p(caAtom, caPos);\n        p(caAtomNext2, caPosNext2);\n        Vec3.sub(caMinus2, caPosPrev2, caPos);\n        Vec3.sub(caPlus2, caPos, caPosNext2);\n        const angle = radToDeg(Vec3.angle(caMinus2, caPlus2));\n        if (angle && angle > 70.00) {\n            flags[i] |= DSSPType.Flag.S;\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Sebastian Bittrich <sebastian.bittrich@rcsb.org>\n */\nimport { DSSPType, BridgeType, Bridge } from './common.js';\n/**\n * Two nonoverlapping stretches of three residues each, i - 1, i, i + 1 and j - 1, j, j + 1,\n * form either a parallel or antiparallel bridge, depending on which of\n * two basic patterns is matched. We assign a bridge between residues i and j\n * if there are two H bonds characteristic of P-structure; in particular,\n *\n * Parallel Bridge(i, j) =:\n *      [Hbond(i - 1, j) and Hbond(j, i + 1)] or\n *      [Hbond(j - 1, i) and Hbond(i, j + 1)]\n *\n * Antiparallel Bridge(i, j) =:\n *      [Hbond(i, j) and Hbond(j, i)] or\n *      [Hbond(i - 1, j + 1) and Hbond(j - 1, i + l)]\n *\n * Type: B\n */\nexport function assignBridges(ctx) {\n    const { proteinInfo, hbonds, flags, bridges } = ctx;\n    const { offset, b } = hbonds;\n    let i, j;\n    for (let k = 0, kl = proteinInfo.residueIndices.length; k < kl; ++k) {\n        for (let t = offset[k], _t = offset[k + 1]; t < _t; t++) {\n            const l = b[t];\n            if (k > l)\n                continue;\n            // Parallel Bridge(i, j) =: [Hbond(i - 1, j) and Hbond(j, i + 1)]\n            i = k + 1; // k is i - 1\n            j = l;\n            if (i !== j && hbonds.getDirectedEdgeIndex(j, i + 1) !== -1) {\n                flags[i] |= DSSPType.Flag.B;\n                flags[j] |= DSSPType.Flag.B;\n                // TODO move to constructor, actually omit object all together\n                bridges[bridges.length] = new Bridge(i, j, BridgeType.PARALLEL);\n            }\n            // Parallel Bridge(i, j) =: [Hbond(j - 1, i) and Hbond(i, j + 1)]\n            i = k;\n            j = l - 1; // l is j + 1\n            if (i !== j && hbonds.getDirectedEdgeIndex(j - 1, i) !== -1) {\n                flags[i] |= DSSPType.Flag.B;\n                flags[j] |= DSSPType.Flag.B;\n                bridges[bridges.length] = new Bridge(j, i, BridgeType.PARALLEL);\n            }\n            // Antiparallel Bridge(i, j) =: [Hbond(i, j) and Hbond(j, i)]\n            i = k;\n            j = l;\n            if (i !== j && hbonds.getDirectedEdgeIndex(j, i) !== -1) {\n                flags[i] |= DSSPType.Flag.B;\n                flags[j] |= DSSPType.Flag.B;\n                bridges[bridges.length] = new Bridge(j, i, BridgeType.ANTI_PARALLEL);\n            }\n            // Antiparallel Bridge(i, j) =: [Hbond(i - 1, j + 1) and Hbond(j - 1, i + l)]\n            i = k + 1;\n            j = l - 1;\n            if (i !== j && hbonds.getDirectedEdgeIndex(j - 1, i + 1) !== -1) {\n                flags[i] |= DSSPType.Flag.B;\n                flags[j] |= DSSPType.Flag.B;\n                bridges[bridges.length] = new Bridge(j, i, BridgeType.ANTI_PARALLEL);\n            }\n        }\n    }\n    bridges.sort((a, b) => a.partner1 > b.partner1 ? 1 : a.partner1 < b.partner1 ? -1 : 0);\n}\n","/**\n * Copyright (c) 2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SecondaryStructure } from '../../../mol-model/structure/model/properties/secondary-structure.js';\nimport { SecondaryStructureType } from '../../../mol-model/structure/model/types.js';\nimport { SortedArray } from '../../../mol-data/int.js';\nimport { Vec3 } from '../../../mol-math/linear-algebra/3d/vec3.js';\nconst HelixDistances = [5.45, 5.18, 6.37];\nconst HelixDelta = 2.1;\nconst SheetDistances = [6.1, 10.4, 13.0];\nconst SheetDelta = 1.42;\nconst posA = Vec3();\nconst posB = Vec3();\nfunction zhangSkolnickAtomicSS(unit, residueIndices, i, distances, delta) {\n    const c = unit.conformation;\n    const { traceElementIndex } = unit.model.atomicHierarchy.derived.residue;\n    for (let j = Math.max(0, i - 2); j <= i; ++j) {\n        for (let k = 2; k < 5; ++k) {\n            if (j + k >= residueIndices.length)\n                return false;\n            const rA = residueIndices[j];\n            const rB = residueIndices[j + k];\n            const aA = traceElementIndex[rA];\n            const aB = traceElementIndex[rB];\n            if (aA === -1 || aB === -1)\n                return false;\n            c.invariantPosition(aA, posA);\n            c.invariantPosition(aB, posB);\n            const d = Vec3.distance(posA, posB);\n            if (Math.abs(d - distances[k - 2]) >= delta)\n                return false;\n        }\n    }\n    return true;\n}\n/**\n * Secondary-structure assignment based on Zhang and Skolnick's TM-align paper.\n * TM-align: a protein structure alignment algorithm based on the Tm-score (2005) NAR, 33(7) 2302-2309.\n *\n * While not as accurate as DSSP, it is faster and works for coarse-grained/backbone-only models.\n */\nexport async function computeUnitZhangSkolnik(unit) {\n    const count = unit.proteinElements.length;\n    const type = new Uint32Array(count);\n    const keys = [];\n    const elements = [];\n    const { proteinElements, residueIndex } = unit;\n    const residueCount = proteinElements.length;\n    const unitProteinResidues = new Uint32Array(residueCount);\n    for (let i = 0; i < residueCount; ++i) {\n        const rI = residueIndex[proteinElements[i]];\n        unitProteinResidues[i] = rI;\n    }\n    const residueIndices = SortedArray.ofSortedArray(unitProteinResidues);\n    const getIndex = (rI) => SortedArray.indexOf(residueIndices, rI);\n    for (let i = 0, il = residueIndices.length; i < il; ++i) {\n        let flag = SecondaryStructureType.Flag.None;\n        if (zhangSkolnickAtomicSS(unit, residueIndices, i, HelixDistances, HelixDelta)) {\n            flag = SecondaryStructureType.Flag.Helix;\n        }\n        else if (zhangSkolnickAtomicSS(unit, residueIndices, i, SheetDistances, SheetDelta)) {\n            flag = SecondaryStructureType.Flag.Beta;\n        }\n        type[i] = flag;\n        if (elements.length === 0 || flag !== getFlag(elements[elements.length - 1])) {\n            elements[elements.length] = createElement(mapToKind(flag), flag);\n        }\n        keys[i] = elements.length - 1;\n    }\n    return SecondaryStructure(type, keys, elements, getIndex);\n}\nfunction createElement(kind, flag) {\n    if (kind === 'helix') {\n        return { kind: 'helix', flags: flag };\n    }\n    else if (kind === 'sheet') {\n        return { kind: 'sheet', flags: flag };\n    }\n    else {\n        return { kind: 'none' };\n    }\n}\nfunction mapToKind(flag) {\n    if (flag === SecondaryStructureType.Flag.Helix) {\n        return 'helix';\n    }\n    else if (flag === SecondaryStructureType.Flag.Beta) {\n        return 'sheet';\n    }\n    else {\n        return 'none';\n    }\n}\nfunction getFlag(element) {\n    if (element.kind === 'helix') {\n        return element.flags;\n    }\n    else if (element.kind === 'sheet') {\n        return element.flags;\n    }\n    else {\n        return SecondaryStructureType.Flag.None;\n    }\n}\n","/**\n * Copyright (c) 2019-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { DSSPComputationParams, DefaultDSSPComputationProps, computeUnitDSSP } from './secondary-structure/dssp.js';\nimport { ParamDefinition as PD } from '../../mol-util/param-definition.js';\nimport { Unit } from '../../mol-model/structure/structure.js';\nimport { CustomStructureProperty } from '../common/custom-structure-property.js';\nimport { ModelSecondaryStructure } from '../../mol-model-formats/structure/property/secondary-structure.js';\nimport { CustomPropertyDescriptor } from '../../mol-model/custom-property.js';\nimport { Model } from '../../mol-model/structure/model.js';\nimport { computeUnitZhangSkolnik } from './secondary-structure/zhang-skolnik.js';\nfunction getSecondaryStructureParams(_data) {\n    return {\n        type: PD.MappedStatic('auto', {\n            'auto': PD.EmptyGroup({ label: 'Automatic' }),\n            'model': PD.EmptyGroup({ label: 'Model' }),\n            'dssp': PD.Group(DSSPComputationParams, { label: 'DSSP', isFlat: true }),\n            'zhang-skolnick': PD.EmptyGroup({ label: 'Zhang-Skolnick' }),\n        }, { options: [['auto', 'Automatic'], ['model', 'Model'], ['dssp', 'DSSP'], ['zhang-skolnick', 'Zhang-Skolnick']] })\n    };\n}\nexport const SecondaryStructureParams = getSecondaryStructureParams();\nexport const SecondaryStructureProvider = CustomStructureProperty.createProvider({\n    label: 'Secondary Structure',\n    descriptor: CustomPropertyDescriptor({\n        name: 'molstar_computed_secondary_structure',\n        // TODO `cifExport` and `symbol`\n    }),\n    type: 'root',\n    defaultParams: SecondaryStructureParams,\n    getParams: getSecondaryStructureParams,\n    isApplicable: (data) => true,\n    obtain: async (ctx, data, props) => {\n        const p = { ...PD.getDefaultValues(SecondaryStructureParams), ...props };\n        switch (p.type.name) {\n            case 'auto': return { value: await computeAuto(data) };\n            case 'dssp': return { value: await computeDssp(data, p.type.params) };\n            case 'model': return { value: await computeModel(data) };\n            case 'zhang-skolnick': return { value: await computeZhangSkolnik(data) };\n        }\n    }\n});\nasync function computeAuto(structure) {\n    const map = new Map();\n    for (let i = 0, il = structure.unitSymmetryGroups.length; i < il; ++i) {\n        const u = structure.unitSymmetryGroups[i].units[0];\n        const m = u.model;\n        if ((Model.isFromPdbArchive(m) && Model.isExperimental(m) && !Model.isCoarseGrained(m)) || Model.hasSecondaryStructure(m)) {\n            const secondaryStructure = ModelSecondaryStructure.Provider.get(m);\n            if (secondaryStructure)\n                map.set(u.invariantId, secondaryStructure);\n        }\n        else if (Unit.isAtomic(u) && !Model.isCoarseGrained(m)) {\n            const secondaryStructure = await computeUnitDSSP(u, DefaultDSSPComputationProps);\n            map.set(u.invariantId, secondaryStructure);\n        }\n        else if (Unit.isAtomic(u)) {\n            const secondaryStructure = await computeUnitZhangSkolnik(u);\n            map.set(u.invariantId, secondaryStructure);\n        }\n    }\n    return map;\n}\nasync function computeDssp(structure, props) {\n    // TODO take inter-unit hbonds into account for bridge, ladder, sheet assignment\n    const map = new Map();\n    for (let i = 0, il = structure.unitSymmetryGroups.length; i < il; ++i) {\n        const u = structure.unitSymmetryGroups[i].units[0];\n        if (Unit.isAtomic(u) && !Model.isCoarseGrained(u.model)) {\n            const secondaryStructure = await computeUnitDSSP(u, props);\n            map.set(u.invariantId, secondaryStructure);\n        }\n    }\n    return map;\n}\nasync function computeZhangSkolnik(structure) {\n    const map = new Map();\n    for (let i = 0, il = structure.unitSymmetryGroups.length; i < il; ++i) {\n        const u = structure.unitSymmetryGroups[i].units[0];\n        if (Unit.isAtomic(u)) {\n            const secondaryStructure = await computeUnitZhangSkolnik(u);\n            map.set(u.invariantId, secondaryStructure);\n        }\n    }\n    return map;\n}\nasync function computeModel(structure) {\n    const map = new Map();\n    for (let i = 0, il = structure.unitSymmetryGroups.length; i < il; ++i) {\n        const u = structure.unitSymmetryGroups[i].units[0];\n        if (Unit.isAtomic(u)) {\n            const secondaryStructure = ModelSecondaryStructure.Provider.get(u.model);\n            if (secondaryStructure)\n                map.set(u.invariantId, secondaryStructure);\n        }\n    }\n    return map;\n}\n","/**\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { ParamDefinition as PD } from '../../mol-util/param-definition.js';\nimport { ValueBox } from '../../mol-util/index.js';\nimport { CustomPropertyDescriptor } from '../../mol-model/custom-property.js';\nimport { stringToWords } from '../../mol-util/string.js';\nexport { CustomStructureProperty };\nvar CustomStructureProperty;\n(function (CustomStructureProperty) {\n    function createProvider(builder) {\n        const descriptorName = builder.descriptor.name;\n        const propertyDataName = builder.type === 'root' ? 'inheritedPropertyData' : 'currentPropertyData';\n        const get = (data) => {\n            if (!(descriptorName in data[propertyDataName])) {\n                data[propertyDataName][descriptorName] = {\n                    props: { ...PD.getDefaultValues(builder.getParams(data)) },\n                    data: ValueBox.create(undefined)\n                };\n            }\n            return data[propertyDataName][descriptorName];\n        };\n        const set = (data, props, value) => {\n            const property = get(data);\n            data[propertyDataName][descriptorName] = {\n                props,\n                data: ValueBox.withValue(property.data, value)\n            };\n        };\n        return {\n            label: builder.label,\n            descriptor: builder.descriptor,\n            isHidden: builder.isHidden,\n            getParams: (data) => {\n                const params = PD.clone(builder.getParams(data));\n                PD.setDefaultValues(params, get(data).props);\n                return params;\n            },\n            defaultParams: builder.defaultParams,\n            isApplicable: builder.isApplicable,\n            attach: async (ctx, data, props = {}, addRef) => {\n                if (addRef)\n                    data.customPropertyDescriptors.reference(builder.descriptor, true);\n                if (builder.type === 'root')\n                    data = data.root;\n                const rootProps = get(data.root).props;\n                const property = get(data);\n                const p = PD.merge(builder.defaultParams, rootProps, props);\n                if (property.data.value && PD.areEqual(builder.defaultParams, property.props, p))\n                    return;\n                const { value, assets } = await builder.obtain(ctx, data, p);\n                data.customPropertyDescriptors.add(builder.descriptor);\n                data.customPropertyDescriptors.assets(builder.descriptor, assets);\n                set(data, p, value);\n            },\n            ref: (data, add) => data.customPropertyDescriptors.reference(builder.descriptor, add),\n            get: (data) => get(data).data,\n            set: (data, props = {}, value) => {\n                if (builder.type === 'root')\n                    data = data.root;\n                const property = get(data);\n                const p = PD.merge(builder.defaultParams, property.props, props);\n                if (!PD.areEqual(builder.defaultParams, property.props, p)) {\n                    // this invalidates property.value\n                    set(data, p, value);\n                    // dispose of assets\n                    data.customPropertyDescriptors.assets(builder.descriptor);\n                }\n            },\n            props: (data) => get(data).props,\n        };\n    }\n    CustomStructureProperty.createProvider = createProvider;\n    function createSimple(name, type, defaultValue) {\n        const defaultParams = { value: PD.Value(defaultValue, { isHidden: true }) };\n        return createProvider({\n            label: stringToWords(name),\n            descriptor: CustomPropertyDescriptor({ name }),\n            isHidden: true,\n            type,\n            defaultParams,\n            getParams: () => ({ value: PD.Value(defaultValue, { isHidden: true }) }),\n            isApplicable: () => true,\n            obtain: async (ctx, data, props) => {\n                return { ...PD.getDefaultValues(defaultParams), ...props };\n            }\n        });\n    }\n    CustomStructureProperty.createSimple = createSimple;\n})(CustomStructureProperty || (CustomStructureProperty = {}));\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar BitFlags;\n(function (BitFlags) {\n    function create(flags) { return flags; }\n    BitFlags.create = create;\n    function has(flags, flag) { return (flags & flag) !== 0; }\n    BitFlags.has = has;\n    /** toCheck must be non-zero */\n    function hasAll(flags, toCheck) { return !!toCheck && (flags & toCheck) === toCheck; }\n    BitFlags.hasAll = hasAll;\n})(BitFlags || (BitFlags = {}));\nexport { BitFlags };\n","/*\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar Expression;\n(function (Expression) {\n    function Symbol(name) { return { name }; }\n    Expression.Symbol = Symbol;\n    function Apply(head, args) { return args ? { head, args } : { head }; }\n    Expression.Apply = Apply;\n    function isArgumentsArray(e) { return !!e && Array.isArray(e); }\n    Expression.isArgumentsArray = isArgumentsArray;\n    function isArgumentsMap(e) { return !!e && !Array.isArray(e); }\n    Expression.isArgumentsMap = isArgumentsMap;\n    function isLiteral(e) { return !isApply(e) && !isSymbol(e); }\n    Expression.isLiteral = isLiteral;\n    function isApply(e) { return !!e && !!e.head && typeof e === 'object'; }\n    Expression.isApply = isApply;\n    function isSymbol(e) { return !!e && typeof e.name === 'string'; }\n    Expression.isSymbol = isSymbol;\n})(Expression || (Expression = {}));\nexport { Expression };\n","/**\n * Copyright (c) 2017 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\n// TODO check if the removal of FastSet and the removal of the context object for forEach\n// have any performance implications\nfunction _ascSort(a, b) {\n    return a - b;\n}\nexport function sortAsc(array) {\n    Array.prototype.sort.call(array, _ascSort);\n    return array;\n}\nvar Mask;\n(function (Mask) {\n    class EmptyMask {\n        has(i) { return false; }\n        forEach(f, ctx) { return ctx; }\n        constructor() {\n            this.size = 0;\n        }\n    }\n    class SingletonMask {\n        has(i) { return i === this.idx; }\n        forEach(f, ctx) { f(this.idx, ctx); return ctx; }\n        constructor(idx) {\n            this.idx = idx;\n            this.size = 1;\n        }\n    }\n    class BitMask {\n        has(i) { return i < this.length && !!this.mask[i]; }\n        _forEach(f, ctx) {\n            for (let i = 0; i < this.length; i++) {\n                if (this.mask[i])\n                    f(i, ctx);\n            }\n        }\n        forEach(f, ctx) {\n            this._forEach(f, ctx);\n            return ctx;\n        }\n        constructor(mask, size) {\n            this.mask = mask;\n            this.size = size;\n            this.length = mask.length;\n        }\n    }\n    class AllMask {\n        has(i) { return true; }\n        _forEach(f, ctx) {\n            for (let i = 0; i < this.size; i++) {\n                f(i, ctx);\n            }\n        }\n        forEach(f, ctx) {\n            this._forEach(f, ctx);\n            return ctx;\n        }\n        constructor(size) {\n            this.size = size;\n        }\n    }\n    class SetMask {\n        has(i) { return this.set.has(i); }\n        _forEach(f, ctx) {\n            for (const idx of this.flatten()) {\n                f(idx, ctx);\n            }\n        }\n        flatten() {\n            if (this._flat)\n                return this._flat;\n            const indices = new Int32Array(this.size);\n            let offset = 0;\n            this.set.forEach(i => indices[offset++] = i);\n            sortAsc(indices);\n            this._flat = indices;\n            return this._flat;\n        }\n        forEach(f, ctx) {\n            this._forEach(f, ctx);\n            return ctx;\n        }\n        constructor(set) {\n            this.set = set;\n            this._flat = void 0;\n            this.size = set.size;\n        }\n    }\n    function always(size) { return new AllMask(size); }\n    Mask.always = always;\n    Mask.never = new EmptyMask();\n    function ofSet(set) {\n        return new SetMask(set);\n    }\n    Mask.ofSet = ofSet;\n    function singleton(i) {\n        return new SingletonMask(i);\n    }\n    Mask.singleton = singleton;\n    function ofUniqueIndices(indices) {\n        const len = indices.length;\n        if (len === 0)\n            return new EmptyMask();\n        if (len === 1)\n            return new SingletonMask(indices[0]);\n        let max = 0;\n        for (const i of indices) {\n            if (i > max)\n                max = i;\n        }\n        if (len === max)\n            return new AllMask(len);\n        const f = len / max;\n        if (f < 1 / 12) {\n            const set = new Set();\n            for (const i of indices)\n                set.add(i);\n            return new SetMask(set);\n        }\n        const mask = new Int8Array(max + 1);\n        for (const i of indices) {\n            mask[i] = 1;\n        }\n        return new BitMask(mask, indices.length);\n    }\n    Mask.ofUniqueIndices = ofUniqueIndices;\n    function ofMask(mask, size) {\n        return new BitMask(mask, size);\n    }\n    Mask.ofMask = ofMask;\n    function hasAny(mask, xs) {\n        for (const x of xs) {\n            if (mask.has(x))\n                return true;\n        }\n        return false;\n    }\n    Mask.hasAny = hasAny;\n    function complement(mask, against) {\n        let count = 0;\n        let max = 0;\n        against.forEach(i => {\n            if (!mask.has(i)) {\n                count++;\n                if (i > max)\n                    max = i;\n            }\n        });\n        if (count / max < 1 / 12) {\n            // set based\n            const set = new Set();\n            against.forEach(i => {\n                if (!mask.has(i)) {\n                    set.add(i);\n                }\n            });\n            return ofSet(set);\n        }\n        else {\n            // mask based\n            const target = new Uint8Array(max + 1);\n            against.forEach(i => {\n                if (!mask.has(i)) {\n                    target[i] = 1;\n                }\n            });\n            return ofMask(target, count);\n        }\n    }\n    Mask.complement = complement;\n})(Mask || (Mask = {}));\nexport { Mask };\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { BitFlags } from './bit-flags.js';\nimport { StringBuilder } from './string-builder.js';\nimport { UUID } from './uuid.js';\nimport { Mask } from './mask.js';\nexport * from './value-cell.js';\nexport { BitFlags, StringBuilder, UUID, Mask };\nexport const noop = function () { };\nexport function round(n, d) {\n    const f = Math.pow(10, d);\n    return Math.round(f * n) / f;\n}\nexport function arrayEqual(arr1, arr2) {\n    const length = arr1.length;\n    if (length !== arr2.length)\n        return false;\n    for (let i = 0; i < length; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function deepEqual(a, b) {\n    // from https://github.com/epoberezkin/fast-deep-equal MIT\n    if (a === b)\n        return true;\n    const arrA = Array.isArray(a);\n    const arrB = Array.isArray(b);\n    if (arrA && arrB) {\n        if (a.length !== b.length)\n            return false;\n        for (let i = 0; i < a.length; i++) {\n            if (!deepEqual(a[i], b[i]))\n                return false;\n        }\n        return true;\n    }\n    if (arrA !== arrB)\n        return false;\n    if (a && b && typeof a === 'object' && typeof b === 'object') {\n        const keys = Object.keys(a);\n        if (keys.length !== Object.keys(b).length)\n            return false;\n        const dateA = a instanceof Date;\n        const dateB = b instanceof Date;\n        if (dateA && dateB)\n            return a.getTime() === b.getTime();\n        if (dateA !== dateB)\n            return false;\n        const regexpA = a instanceof RegExp;\n        const regexpB = b instanceof RegExp;\n        if (regexpA && regexpB)\n            return a.toString() === b.toString();\n        if (regexpA !== regexpB)\n            return false;\n        for (let i = 0; i < keys.length; i++) {\n            if (!hasOwnProperty.call(b, keys[i]))\n                return false;\n        }\n        for (let i = 0; i < keys.length; i++) {\n            if (!deepEqual(a[keys[i]], b[keys[i]]))\n                return false;\n        }\n        return true;\n    }\n    return false;\n}\nexport function shallowEqual(a, b) {\n    if (a === b)\n        return true;\n    const arrA = Array.isArray(a);\n    const arrB = Array.isArray(b);\n    if (arrA && arrB)\n        return shallowEqualArrays(a, b);\n    if (arrA !== arrB)\n        return false;\n    if (a && b && typeof a === 'object' && typeof b === 'object') {\n        return shallowEqualObjects(a, b);\n    }\n    return false;\n}\nexport function shallowEqualObjects(a, b) {\n    if (a === b)\n        return true;\n    if (!a || !b)\n        return false;\n    const keys = Object.keys(a);\n    if (Object.keys(b).length !== keys.length)\n        return false;\n    for (const k of keys) {\n        if (!hasOwnProperty.call(a, k) || a[k] !== b[k])\n            return false;\n    }\n    return true;\n}\nexport function shallowEqualArrays(a, b) {\n    if (a === b)\n        return true;\n    if (!a || !b)\n        return false;\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0, il = a.length; i < il; ++i) {\n        if (a[i] !== b[i])\n            return false;\n    }\n    return true;\n}\n/** Returns `value` if not `undefined`, otherwise returns `defaultValue` */\nexport function defaults(value, defaultValue) {\n    return value !== undefined ? value : defaultValue;\n}\nexport function extend(object, source, guard) {\n    let v;\n    const s = source;\n    const o = object;\n    const g = guard;\n    for (const k of Object.keys(source)) {\n        v = s[k];\n        if (v !== void 0)\n            o[k] = v;\n        else if (guard)\n            o[k] = g[k];\n    }\n    if (guard) {\n        for (const k of Object.keys(guard)) {\n            v = o[k];\n            if (v === void 0)\n                o[k] = g[k];\n        }\n    }\n    return object;\n}\nexport function shallowClone(o) {\n    return extend({}, o);\n}\nfunction _assign(target) {\n    for (let s = 1; s < arguments.length; s++) {\n        const from = arguments[s];\n        for (const key of Object.keys(from)) {\n            if (hasOwnProperty.call(from, key)) {\n                target[key] = from[key];\n            }\n        }\n    }\n    return target;\n}\nexport const assign = Object.assign || _assign;\nfunction _shallowMerge1(source, update) {\n    let changed = false;\n    for (const k of Object.keys(update)) {\n        if (!hasOwnProperty.call(update, k))\n            continue;\n        if (update[k] !== source[k]) {\n            changed = true;\n            break;\n        }\n    }\n    if (!changed)\n        return source;\n    return assign(shallowClone(source), update);\n}\nfunction _shallowMerge(source) {\n    let ret = source;\n    for (let s = 1; s < arguments.length; s++) {\n        if (!arguments[s])\n            continue;\n        ret = _shallowMerge1(source, arguments[s]);\n        if (ret !== source) {\n            for (let i = s + 1; i < arguments.length; i++) {\n                ret = assign(ret, arguments[i]);\n            }\n            break;\n        }\n    }\n    return ret;\n}\nexport const merge = _shallowMerge;\nfunction padTime(n) { return (n < 10 ? '0' : '') + n; }\nexport function formatTime(d) {\n    const h = d.getHours(), m = d.getMinutes(), s = d.getSeconds();\n    return `${h}:${padTime(m)}:${padTime(s)}`;\n}\nexport function formatProgress(p) {\n    const tp = p.root.progress;\n    if (tp.isIndeterminate)\n        return tp.message;\n    const x = (100 * tp.current / tp.max).toFixed(2);\n    return `${tp.message} ${x}%`;\n}\nexport function formatBytes(count) {\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    const i = Math.floor(Math.log(count) / Math.log(1024));\n    return `${(count / Math.pow(1024, i)).toFixed(2)} ${units[i]}`;\n}\n","/**\n * Copyright (c) 2020-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3 } from '../linear-algebra/3d/vec3.js';\nimport { CentroidHelper } from './centroid-helper.js';\nimport { Sphere3D } from '../geometry/primitives/sphere3d.js';\nimport { Box3D } from './primitives/box3d.js';\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\nconst v3dot = Vec3.dot;\nconst v3copy = Vec3.copy;\nconst v3scaleAndSub = Vec3.scaleAndSub;\nconst v3scaleAndAdd = Vec3.scaleAndAdd;\n// implementing http://www.ep.liu.se/ecp/034/009/ecp083409.pdf\nexport class BoundaryHelper {\n    computeExtrema(i, p) {\n        const d = v3dot(this.dir[i], p);\n        if (d < this.minDist[i]) {\n            this.minDist[i] = d;\n            v3copy(this.extrema[i * 2], p);\n        }\n        if (d > this.maxDist[i]) {\n            this.maxDist[i] = d;\n            v3copy(this.extrema[i * 2 + 1], p);\n        }\n    }\n    computeSphereExtrema(i, center, radius) {\n        const di = this.dir[i];\n        const d = v3dot(di, center);\n        if (d - radius < this.minDist[i]) {\n            this.minDist[i] = d - radius;\n            v3scaleAndSub(this.extrema[i * 2], center, di, radius);\n        }\n        if (d + radius > this.maxDist[i]) {\n            this.maxDist[i] = d + radius;\n            v3scaleAndAdd(this.extrema[i * 2 + 1], center, di, radius);\n        }\n    }\n    includeSphere(s) {\n        if (Sphere3D.hasExtrema(s) && s.extrema.length > 1) {\n            for (const e of s.extrema) {\n                this.includePosition(e);\n            }\n        }\n        else {\n            this.includePositionRadius(s.center, s.radius);\n        }\n    }\n    includePosition(p) {\n        for (let i = 0; i < this.dirLength; ++i) {\n            this.computeExtrema(i, p);\n        }\n    }\n    includePositionRadius(center, radius) {\n        for (let i = 0; i < this.dirLength; ++i) {\n            this.computeSphereExtrema(i, center, radius);\n        }\n    }\n    finishedIncludeStep() {\n        for (let i = 0; i < this.extrema.length; i++) {\n            this.centroidHelper.includeStep(this.extrema[i]);\n        }\n        this.centroidHelper.finishedIncludeStep();\n    }\n    radiusSphere(s) {\n        if (Sphere3D.hasExtrema(s) && s.extrema.length > 1) {\n            for (const e of s.extrema) {\n                this.radiusPosition(e);\n            }\n        }\n        else {\n            this.radiusPositionRadius(s.center, s.radius);\n        }\n    }\n    radiusPosition(p) {\n        this.centroidHelper.radiusStep(p);\n    }\n    radiusPositionRadius(center, radius) {\n        this.centroidHelper.radiusSphereStep(center, radius);\n    }\n    getSphere(sphere) {\n        return Sphere3D.setExtrema(this.centroidHelper.getSphere(sphere), this.extrema.slice());\n    }\n    getBox(box) {\n        return Box3D.fromVec3Array(box || Box3D(), this.extrema);\n    }\n    reset() {\n        for (let i = 0; i < this.dirLength; ++i) {\n            this.minDist[i] = Infinity;\n            this.maxDist[i] = -Infinity;\n            this.extrema[i * 2] = Vec3();\n            this.extrema[i * 2 + 1] = Vec3();\n        }\n        this.centroidHelper.reset();\n    }\n    constructor(quality) {\n        this.minDist = [];\n        this.maxDist = [];\n        this.extrema = [];\n        this.centroidHelper = new CentroidHelper();\n        this.dir = getEposDir(quality);\n        this.dirLength = this.dir.length;\n        this.reset();\n    }\n}\nfunction getEposDir(quality) {\n    let dir;\n    switch (quality) {\n        case '6':\n            dir = [...Type001];\n            break;\n        case '14':\n            dir = [...Type001, ...Type111];\n            break;\n        case '26':\n            dir = [...Type001, ...Type111, ...Type011];\n            break;\n        case '98':\n            dir = [...Type001, ...Type111, ...Type011, ...Type012, ...Type112, ...Type122];\n            break;\n    }\n    return dir.map(a => {\n        const v = Vec3.create(a[0], a[1], a[2]);\n        return Vec3.normalize(v, v);\n    });\n}\nconst Type001 = [\n    [1, 0, 0], [0, 1, 0], [0, 0, 1]\n];\nconst Type111 = [\n    [1, 1, 1], [-1, 1, 1], [-1, -1, 1], [1, -1, 1]\n];\nconst Type011 = [\n    [1, 1, 0], [1, -1, 0], [1, 0, 1], [1, 0, -1], [0, 1, 1], [0, 1, -1]\n];\nconst Type012 = [\n    [0, 1, 2], [0, 2, 1], [1, 0, 2], [2, 0, 1], [1, 2, 0], [2, 1, 0],\n    [0, 1, -2], [0, 2, -1], [1, 0, -2], [2, 0, -1], [1, -2, 0], [2, -1, 0]\n];\nconst Type112 = [\n    [1, 1, 2], [2, 1, 1], [1, 2, 1], [1, -1, 2], [1, 1, -2], [1, -1, -2],\n    [2, -1, 1], [2, 1, -1], [2, -1, -1], [1, -2, 1], [1, 2, -1], [1, -2, -1]\n];\nconst Type122 = [\n    [2, 2, 1], [1, 2, 2], [2, 1, 2], [2, -2, 1], [2, 2, -1], [2, -2, -1],\n    [1, -2, 2], [1, 2, -2], [1, -2, -2], [2, -1, 2], [2, 1, -2], [2, -1, -2]\n];\n","/**\n * Copyright (c) 2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Code-generated lipid params file. Names extracted from Martini FF lipids itp.\n *\n * @author molstar/lipid-params cli\n */\nexport const LipidNames = new Set(['DAPC', 'DBPC', 'DFPC', 'DGPC', 'DIPC', 'DLPC', 'DNPC', 'DOPC', 'DPPC', 'DRPC', 'DTPC', 'DVPC', 'DXPC', 'DYPC', 'LPPC', 'PAPC', 'PEPC', 'PGPC', 'PIPC', 'POPC', 'PRPC', 'PUPC', 'DAPE', 'DBPE', 'DFPE', 'DGPE', 'DIPE', 'DLPE', 'DNPE', 'DOPE', 'DPPE', 'DRPE', 'DTPE', 'DUPE', 'DVPE', 'DXPE', 'DYPE', 'LPPE', 'PAPE', 'PGPE', 'PIPE', 'POPE', 'PQPE', 'PRPE', 'PUPE', 'DAPS', 'DBPS', 'DFPS', 'DGPS', 'DIPS', 'DLPS', 'DNPS', 'DOPS', 'DPPS', 'DRPS', 'DTPS', 'DUPS', 'DVPS', 'DXPS', 'DYPS', 'LPPS', 'PAPS', 'PGPS', 'PIPS', 'POPS', 'PQPS', 'PRPS', 'PUPS', 'DAPA', 'DBPA', 'DFPA', 'DGPA', 'DIPA', 'DLPA', 'DNPA', 'DOPA', 'DPPA', 'DRPA', 'DTPA', 'DVPA', 'DXPA', 'DYPA', 'LPPA', 'PAPA', 'PGPA', 'PIPA', 'POPA', 'PRPA', 'PUPA', 'DAPG', 'DBPG', 'DFPG', 'DGPG', 'DIPG', 'DLPG', 'DNPG', 'DOPG', 'DPPG', 'DRPG', 'DTPG', 'DVPG', 'DXPG', 'DYPG', 'LPPG', 'PAPG', 'PGPG', 'PIPG', 'POPG', 'PRPG', 'DMPC', 'DPP', 'DPPI', 'PAPI', 'PIPI', 'POP', 'POPI', 'PUPI', 'PVP', 'PVPI', 'PADG', 'PIDG', 'PODG', 'PUDG', 'PVDG', 'APC', 'CPC', 'IPC', 'LPC', 'OPC', 'PPC', 'TPC', 'UPC', 'VPC', 'BNSM', 'DBSM', 'DPSM', 'DXSM', 'PGSM', 'PNSM', 'POSM', 'PVSM', 'XNSM', 'DPCE', 'DXCE', 'PNCE', 'XNCE']);\n","/**\n * Copyright (c) 2020-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Code-generated ion names params file. Names extracted from CCD components.\n *\n * @author molstar/chem-comp-dict/create-ions cli\n */\nexport const IonNames = new Set(['118', '119', '543', '1AL', '1CU', '2FK', '2HP', '2OF', '3CO', '3MT', '3NI', '3OF', '3P8', '4MO', '4PU', '4TI', '6MO', 'ACT', 'AG', 'AL', 'ALF', 'AM', 'ATH', 'AU', 'AU3', 'AUC', 'AZI', 'BA', 'BCT', 'BEF', 'BF4', 'BO4', 'BR', 'BS3', 'BSY', 'CA', 'CAC', 'CD', 'CD1', 'CD3', 'CD5', 'CE', 'CF', 'CHT', 'CL', 'CO', 'CO3', 'CO5', 'CON', 'CR', 'CS', 'CSB', 'CU', 'CU1', 'CU3', 'CUA', 'CUZ', 'CYN', 'DME', 'DMI', 'DSC', 'DTI', 'DY', 'E4N', 'EDR', 'EMC', 'ER3', 'EU', 'EU3', 'F', 'FE', 'FE2', 'FPO', 'GA', 'GD3', 'GEP', 'HAI', 'HG', 'HGC', 'IN', 'IOD', 'IR', 'IR3', 'IRI', 'IUM', 'K', 'KO4', 'LA', 'LCO', 'LCP', 'LI', 'LU', 'MAC', 'MG', 'MH2', 'MH3', 'MLI', 'MMC', 'MN', 'MN3', 'MN5', 'MN6', 'MO1', 'MO2', 'MO3', 'MO4', 'MO5', 'MO6', 'MOO', 'MOS', 'MOW', 'MW1', 'MW2', 'MW3', 'NA', 'NA2', 'NA5', 'NA6', 'NAO', 'NAW', 'ND', 'NET', 'NH4', 'NI', 'NI1', 'NI2', 'NI3', 'NO2', 'NO3', 'NRU', 'NT3', 'O4M', 'OAA', 'OC1', 'OC2', 'OC3', 'OC4', 'OC5', 'OC6', 'OC7', 'OC8', 'OCL', 'OCM', 'OCN', 'OCO', 'OF1', 'OF2', 'OF3', 'OH', 'OS', 'OS4', 'OXL', 'PB', 'PBM', 'PD', 'PDV', 'PER', 'PI', 'PO3', 'PO4', 'PR', 'PT', 'PT4', 'PTN', 'RB', 'RH3', 'RHD', 'RHF', 'RU', 'SB', 'SCN', 'SE4', 'SEK', 'SM', 'SMO', 'SO3', 'SO4', 'SR', 'T1A', 'TB', 'TBA', 'TCN', 'TEA', 'TH', 'THE', 'TL', 'TMA', 'TRA', 'UNX', 'V', 'VN3', 'VO4', 'W', 'WO5', 'Y1', 'YB', 'YB2', 'YH', 'YT3', 'ZCM', 'ZN', 'ZN2', 'ZN3', 'ZNO', 'ZO3', 'ZR', 'ZTM', 'NCO', 'OHX']);\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { BitFlags } from '../../../mol-util/bit-flags.js';\nimport { SaccharideCompIdMap } from '../structure/carbohydrates/constants.js';\nimport { SetUtils } from '../../../mol-util/set.js';\nimport { LipidNames } from './types/lipids.js';\nimport { IonNames } from './types/ions.js';\nconst _esCache = (function () {\n    const cache = Object.create(null);\n    const letters = [];\n    for (let i = 'A'.charCodeAt(0); i <= 'Z'.charCodeAt(0); i++)\n        letters[letters.length] = String.fromCharCode(i);\n    for (let i = 'a'.charCodeAt(0); i <= 'z'.charCodeAt(0); i++)\n        letters[letters.length] = String.fromCharCode(i);\n    for (let i = '0'.charCodeAt(0); i <= '9'.charCodeAt(0); i++)\n        letters[letters.length] = String.fromCharCode(i);\n    for (const k of letters) {\n        cache[k] = k.toUpperCase();\n        for (const l of letters) {\n            cache[k + l] = (k + l).toUpperCase();\n            for (const m of letters) {\n                cache[k + l + m] = (k + l + m).toUpperCase();\n            }\n        }\n    }\n    return cache;\n}());\nexport function ElementSymbol(s) {\n    return _esCache[s] || s.toUpperCase();\n}\nconst _elementByAtomicNumber = new Map([[1, 'H'], [2, 'He'], [3, 'Li'], [4, 'Be'], [5, 'B'], [6, 'C'], [7, 'N'], [8, 'O'], [9, 'F'], [10, 'Ne'], [11, 'Na'], [12, 'Mg'], [13, 'Al'], [14, 'Si'], [15, 'P'], [16, 'S'], [17, 'Cl'], [18, 'Ar'], [19, 'K'], [20, 'Ca'], [21, 'Sc'], [22, 'Ti'], [23, 'V'], [24, 'Cr'], [25, 'Mn'], [26, 'Fe'], [27, 'Co'], [28, 'Ni'], [29, 'Cu'], [30, 'Zn'], [31, 'Ga'], [32, 'Ge'], [33, 'As'], [34, 'Se'], [35, 'Br'], [36, 'Kr'], [37, 'Rb'], [38, 'Sr'], [39, 'Y'], [40, 'Zr'], [41, 'Nb'], [42, 'Mo'], [43, 'Tc'], [44, 'Ru'], [45, 'Rh'], [46, 'Pd'], [47, 'Ag'], [48, 'Cd'], [49, 'In'], [50, 'Sn'], [51, 'Sb'], [52, 'Te'], [53, 'I'], [54, 'Xe'], [55, 'Cs'], [56, 'Ba'], [57, 'La'], [58, 'Ce'], [59, 'Pr'], [60, 'Nd'], [61, 'Pm'], [62, 'Sm'], [63, 'Eu'], [64, 'Gd'], [65, 'Tb'], [66, 'Dy'], [67, 'Ho'], [68, 'Er'], [69, 'Tm'], [70, 'Yb'], [71, 'Lu'], [72, 'Hf'], [73, 'Ta'], [74, 'W'], [75, 'Re'], [76, 'Os'], [77, 'Ir'], [78, 'Pt'], [79, 'Au'], [80, 'Hg'], [81, 'Tl'], [82, 'Pb'], [83, 'Bi'], [84, 'Po'], [85, 'At'], [86, 'Rn'], [87, 'Fr'], [88, 'Ra'], [89, 'Ac'], [90, 'Th'], [91, 'Pa'], [92, 'U'], [93, 'Np'], [94, 'Pu'], [95, 'Am'], [96, 'Cm'], [97, 'Bk'], [98, 'Cf'], [99, 'Es'], [100, 'Fm'], [101, 'Md'], [102, 'No'], [103, 'Lr'], [104, 'Rf'], [105, 'Db'], [106, 'Sg'], [107, 'Bh'], [108, 'Hs'], [109, 'Mt'], [110, 'Ds'], [111, 'Rg'], [112, 'Cn'], [113, 'Uut'], [114, 'Fl'], [115, 'Uup'], [116, 'Lv'], [117, 'Uus'], [118, 'Uuo']]\n    .map(e => [e[0], ElementSymbol(e[1])]));\nexport function getElementFromAtomicNumber(n) {\n    if (_elementByAtomicNumber.has(n))\n        return _elementByAtomicNumber.get(n);\n    return ElementSymbol('H');\n}\n/** Entity types as defined in the mmCIF dictionary */\nexport var EntityType;\n(function (EntityType) {\n    EntityType[EntityType[\"unknown\"] = 0] = \"unknown\";\n    EntityType[EntityType[\"polymer\"] = 1] = \"polymer\";\n    EntityType[EntityType[\"non-polymer\"] = 2] = \"non-polymer\";\n    EntityType[EntityType[\"macrolide\"] = 3] = \"macrolide\";\n    EntityType[EntityType[\"water\"] = 4] = \"water\";\n    EntityType[EntityType[\"branched\"] = 5] = \"branched\";\n})(EntityType || (EntityType = {}));\nexport var MoleculeType;\n(function (MoleculeType) {\n    /** The molecule type is not known */\n    MoleculeType[MoleculeType[\"Unknown\"] = 0] = \"Unknown\";\n    /** A known, but here not listed molecule type */\n    MoleculeType[MoleculeType[\"Other\"] = 1] = \"Other\";\n    /** Water molecule */\n    MoleculeType[MoleculeType[\"Water\"] = 2] = \"Water\";\n    /** Small ionic molecule */\n    MoleculeType[MoleculeType[\"Ion\"] = 3] = \"Ion\";\n    /** Lipid molecule */\n    MoleculeType[MoleculeType[\"Lipid\"] = 4] = \"Lipid\";\n    /** Protein, e.g. component type included in `ProteinComponentTypeNames` */\n    MoleculeType[MoleculeType[\"Protein\"] = 5] = \"Protein\";\n    /** RNA, e.g. component type included in `RNAComponentTypeNames` */\n    MoleculeType[MoleculeType[\"RNA\"] = 6] = \"RNA\";\n    /** DNA, e.g. component type included in `DNAComponentTypeNames` */\n    MoleculeType[MoleculeType[\"DNA\"] = 7] = \"DNA\";\n    /** PNA, peptide nucleic acid, comp id included in `PeptideBaseNames` */\n    MoleculeType[MoleculeType[\"PNA\"] = 8] = \"PNA\";\n    /** Saccharide, e.g. component type included in `SaccharideComponentTypeNames` */\n    MoleculeType[MoleculeType[\"Saccharide\"] = 9] = \"Saccharide\";\n})(MoleculeType || (MoleculeType = {}));\nexport var PolymerType;\n(function (PolymerType) {\n    /** not applicable */\n    PolymerType[PolymerType[\"NA\"] = 0] = \"NA\";\n    PolymerType[PolymerType[\"Protein\"] = 1] = \"Protein\";\n    PolymerType[PolymerType[\"GammaProtein\"] = 2] = \"GammaProtein\";\n    PolymerType[PolymerType[\"BetaProtein\"] = 3] = \"BetaProtein\";\n    PolymerType[PolymerType[\"RNA\"] = 4] = \"RNA\";\n    PolymerType[PolymerType[\"DNA\"] = 5] = \"DNA\";\n    PolymerType[PolymerType[\"PNA\"] = 6] = \"PNA\";\n})(PolymerType || (PolymerType = {}));\nexport const PolymerTypeAtomRoleId = {\n    [PolymerType.NA]: {\n        trace: new Set(),\n        directionFrom: new Set(),\n        directionTo: new Set(),\n        backboneStart: new Set(),\n        backboneEnd: new Set(),\n        coarseBackbone: new Set()\n    },\n    [PolymerType.Protein]: {\n        trace: new Set(['CA']),\n        directionFrom: new Set(['C']),\n        directionTo: new Set(['O', 'OC1', 'O1', 'OX1', 'OXT', 'OT1']),\n        backboneStart: new Set(['N']),\n        backboneEnd: new Set(['C']),\n        // CA1 is used e.g. in GFP chromophores\n        // BB, BAS are often used for coarse grained models\n        coarseBackbone: new Set(['CA', 'CA1', 'BB', 'BAS'])\n    },\n    [PolymerType.GammaProtein]: {\n        trace: new Set(['CA']),\n        directionFrom: new Set(['C']),\n        directionTo: new Set(['O']),\n        backboneStart: new Set(['N']),\n        backboneEnd: new Set(['CD']),\n        coarseBackbone: new Set(['CA'])\n    },\n    [PolymerType.BetaProtein]: {\n        trace: new Set(['CA']),\n        directionFrom: new Set(['C']),\n        directionTo: new Set(['O']),\n        backboneStart: new Set(['N']),\n        backboneEnd: new Set(['CG']),\n        coarseBackbone: new Set(['CA'])\n    },\n    [PolymerType.RNA]: {\n        trace: new Set(['O3\\'', 'O3*']),\n        directionFrom: new Set(['C4\\'', 'C4*']),\n        directionTo: new Set(['C3\\'', 'C3*']),\n        backboneStart: new Set(['P']),\n        backboneEnd: new Set(['O3\\'', 'O3*']),\n        coarseBackbone: new Set(['P'])\n    },\n    [PolymerType.DNA]: {\n        trace: new Set(['O3\\'', 'O3*']),\n        directionFrom: new Set(['C3\\'', 'C3*']),\n        directionTo: new Set(['C1\\'', 'C1*']),\n        backboneStart: new Set(['P']),\n        backboneEnd: new Set(['O3\\'', 'O3*']),\n        coarseBackbone: new Set(['P'])\n    },\n    [PolymerType.PNA]: {\n        trace: new Set(['N4\\'', 'N4*']),\n        directionFrom: new Set(['N4\\'', 'N4*']),\n        directionTo: new Set(['C7\\'', 'C7*']),\n        backboneStart: new Set(['N1\\'', 'N1*']),\n        backboneEnd: new Set(['C\\'', 'C*']),\n        coarseBackbone: new Set(['P'])\n    }\n};\nexport const ProteinBackboneAtoms = new Set([\n    'CA', 'C', 'N', 'O',\n    'O1', 'O2', 'OC1', 'OC2', 'OT1', 'OT2', 'OX1', 'OXT',\n    'H', 'H1', 'H2', 'H3', 'HA', 'HN', 'HXT',\n    'BB'\n]);\nexport const NucleicBackboneAtoms = new Set([\n    'P', 'OP1', 'OP2', 'HOP2', 'HOP3',\n    'O2\\'', 'O3\\'', 'O4\\'', 'O5\\'', 'C1\\'', 'C2\\'', 'C3\\'', 'C4\\'', 'C5\\'',\n    'H1\\'', 'H2\\'', 'H2\\'\\'', 'HO2\\'', 'H3\\'', 'H4\\'', 'H5\\'', 'H5\\'\\'', 'HO3\\'', 'HO5\\'',\n    'O2*', 'O3*', 'O4*', 'O5*', 'C1*', 'C2*', 'C3*', 'C4*', 'C5*'\n]);\n/** Chemical component type names for D-linked protein */\nexport const DProteinComponentTypeNames = new Set([\n    'd-peptide linking', 'd-peptide nh3 amino terminus',\n    'd-peptide cooh carboxy terminus', 'd-gamma-peptide, c-delta linking',\n    'd-beta-peptide, c-gamma linking'\n]);\n/** Chemical component type names for L-linked protein */\nexport const LProteinComponentTypeNames = new Set([\n    'l-peptide linking', 'l-peptide nh3 amino terminus',\n    'l-peptide cooh carboxy terminus', 'l-gamma-peptide, c-delta linking',\n    'l-beta-peptide, c-gamma linking'\n]);\n/** Chemical component type names for gamma protein, overlaps with D/L-linked */\nexport const GammaProteinComponentTypeNames = new Set([\n    'd-gamma-peptide, c-delta linking', 'l-gamma-peptide, c-delta linking'\n]);\n/** Chemical component type names for beta protein, overlaps with D/L-linked */\nexport const BetaProteinComponentTypeNames = new Set([\n    'd-beta-peptide, c-gamma linking', 'l-beta-peptide, c-gamma linking'\n]);\n/** Chemical component type names for protein termini, overlaps with D/L-linked */\nexport const ProteinTerminusComponentTypeNames = new Set([\n    'd-peptide nh3 amino terminus', 'd-peptide cooh carboxy terminus',\n    'l-peptide nh3 amino terminus', 'l-peptide cooh carboxy terminus'\n]);\n/** Chemical component type names for peptide-like protein */\nexport const OtherProteinComponentTypeNames = new Set([\n    'peptide linking', 'peptide-like',\n]);\n/** Chemical component type names for protein */\nexport const ProteinComponentTypeNames = SetUtils.unionMany(DProteinComponentTypeNames, LProteinComponentTypeNames, OtherProteinComponentTypeNames);\n/** Chemical component type names for DNA */\nexport const DNAComponentTypeNames = new Set([\n    'dna linking', 'l-dna linking', 'dna oh 5 prime terminus', 'dna oh 3 prime terminus',\n]);\n/** Chemical component type names for RNA */\nexport const RNAComponentTypeNames = new Set([\n    'rna linking', 'l-rna linking', 'rna oh 5 prime terminus', 'rna oh 3 prime terminus',\n]);\n/** Chemical component type names for saccharide */\nexport const SaccharideComponentTypeNames = SetUtils.unionMany(new Set([\n    'd-saccharide, beta linking', 'l-saccharide, beta linking',\n    'd-saccharide, alpha linking', 'l-saccharide, alpha linking',\n    'l-saccharide', 'd-saccharide', 'saccharide',\n]), \n// deprecated in the mmCIF dictionary, kept for backward compatibility\nnew Set([\n    'd-saccharide 1,4 and 1,4 linking', 'l-saccharide 1,4 and 1,4 linking',\n    'd-saccharide 1,4 and 1,6 linking', 'l-saccharide 1,4 and 1,6 linking'\n]));\n/** Chemical component type names for other */\nexport const OtherComponentTypeNames = new Set([\n    'non-polymer', 'other'\n]);\n/** Chemical component type names for ion (extension to mmcif) */\nexport const IonComponentTypeNames = new Set([\n    'ion'\n]);\n/** Chemical component type names for lipid (extension to mmcif) */\nexport const LipidComponentTypeNames = new Set([\n    'lipid'\n]);\n/** Common names for water molecules */\nexport const WaterNames = new Set([\n    'SOL', 'WAT', 'HOH', 'H2O', 'W', 'DOD', 'D3O', 'TIP', 'TIP3', 'TIP4', 'SPC'\n]);\nexport const AminoAcidNamesL = new Set([\n    'HIS', 'ARG', 'LYS', 'ILE', 'PHE', 'LEU', 'TRP', 'ALA', 'MET', 'PRO', 'CYS',\n    'ASN', 'VAL', 'GLY', 'SER', 'GLN', 'TYR', 'ASP', 'GLU', 'THR', 'SEC', 'PYL',\n    'UNK', // unknown amino acid from CCD\n    'MSE', 'SEP', 'TPO', 'PTR', 'PCA', 'HYP', // common from CCD\n    // charmm ff\n    'HSD', 'HSE', 'HSP', 'LSN', 'ASPP', 'GLUP',\n    // amber ff\n    'HID', 'HIE', 'HIP', 'LYN', 'ASH', 'GLH',\n]);\nexport const AminoAcidNamesD = new Set([\n    'DAL', // D-ALANINE\n    'DAR', // D-ARGININE\n    'DSG', // D-ASPARAGINE\n    'DAS', // D-ASPARTIC ACID\n    'DCY', // D-CYSTEINE\n    'DGL', // D-GLUTAMIC ACID\n    'DGN', // D-GLUTAMINE\n    'DHI', // D-HISTIDINE\n    'DIL', // D-ISOLEUCINE\n    'DLE', // D-LEUCINE\n    'DLY', // D-LYSINE\n    'MED', // D-METHIONINE\n    'DPN', // D-PHENYLALANINE\n    'DPR', // D-PROLINE\n    'DSN', // D-SERINE\n    'DTH', // D-THREONINE\n    'DTR', // D-TRYPTOPHAN\n    'DTY', // D-TYROSINE\n    'DVA', // D-VALINE\n    'DNE' // D-NORLEUCINE\n    // ???  // D-SELENOCYSTEINE\n]);\nexport const AminoAcidNames = SetUtils.unionMany(AminoAcidNamesL, AminoAcidNamesD);\nexport const CommonProteinCaps = new Set([\n    'NME', 'ACE', 'NH2', 'FOR', 'FMT'\n    // not including the following\n    // 'E1H' GFP backbone fragmentation in 2G16\n    // 'HOA' complexes zinc\n    // 'NEH' ubiquitine linker\n    // 'MOH' part of peptidomimetics\n]);\nexport const RnaBaseNames = new Set([\n    'A', 'C', 'T', 'G', 'I', 'U',\n    'N' // unknown RNA base from CCD\n]);\nexport const DnaBaseNames = new Set([\n    'DA', 'DC', 'DT', 'DG', 'DI', 'DU',\n    'DN' // unknown DNA base from CCD\n]);\nexport const PeptideBaseNames = new Set(['APN', 'CPN', 'TPN', 'GPN']);\nexport const PurineBaseNames = new Set(['A', 'G', 'I', 'DA', 'DG', 'DI', 'APN', 'GPN']);\nexport const PyrimidineBaseNames = new Set(['C', 'T', 'U', 'DC', 'DT', 'DU', 'CPN', 'TPN']);\nexport const BaseNames = SetUtils.unionMany(RnaBaseNames, DnaBaseNames, PeptideBaseNames);\nexport const isPurineBase = (compId) => PurineBaseNames.has(compId.toUpperCase());\nexport const isPyrimidineBase = (compId) => PyrimidineBaseNames.has(compId.toUpperCase());\nexport const PolymerNames = SetUtils.unionMany(AminoAcidNames, BaseNames);\n/** get the molecule type from component type and id */\nexport function getMoleculeType(compType, compId) {\n    compId = compId.toUpperCase();\n    if (PeptideBaseNames.has(compId)) {\n        return MoleculeType.PNA;\n    }\n    else if (ProteinComponentTypeNames.has(compType)) {\n        return MoleculeType.Protein;\n    }\n    else if (RNAComponentTypeNames.has(compType)) {\n        return MoleculeType.RNA;\n    }\n    else if (DNAComponentTypeNames.has(compType)) {\n        return MoleculeType.DNA;\n    }\n    else if (SaccharideComponentTypeNames.has(compType)) {\n        return MoleculeType.Saccharide;\n    }\n    else if (WaterNames.has(compId)) {\n        return MoleculeType.Water;\n    }\n    else if (IonNames.has(compId)) {\n        return MoleculeType.Ion;\n    }\n    else if (LipidNames.has(compId)) {\n        return MoleculeType.Lipid;\n    }\n    else if (OtherComponentTypeNames.has(compType)) {\n        if (SaccharideCompIdMap.has(compId)) {\n            // trust our saccharide table more than given 'NON-POLYMER' or 'OTHER' component type\n            return MoleculeType.Saccharide;\n        }\n        else if (AminoAcidNames.has(compId)) {\n            return MoleculeType.Protein;\n        }\n        else if (RnaBaseNames.has(compId)) {\n            return MoleculeType.RNA;\n        }\n        else if (DnaBaseNames.has(compId)) {\n            return MoleculeType.DNA;\n        }\n        else {\n            return MoleculeType.Other;\n        }\n    }\n    else {\n        return MoleculeType.Unknown;\n    }\n}\nexport function getPolymerType(compType, molType) {\n    if (molType === MoleculeType.Protein) {\n        if (GammaProteinComponentTypeNames.has(compType)) {\n            return PolymerType.GammaProtein;\n        }\n        else if (BetaProteinComponentTypeNames.has(compType)) {\n            return PolymerType.BetaProtein;\n        }\n        else if (ProteinTerminusComponentTypeNames.has(compType)) {\n            return PolymerType.NA;\n        }\n        else {\n            return PolymerType.Protein;\n        }\n    }\n    else if (molType === MoleculeType.RNA) {\n        return PolymerType.RNA;\n    }\n    else if (molType === MoleculeType.DNA) {\n        return PolymerType.DNA;\n    }\n    else if (molType === MoleculeType.PNA) {\n        return PolymerType.PNA;\n    }\n    else {\n        return PolymerType.NA;\n    }\n}\nexport function getComponentType(compId) {\n    compId = compId.toUpperCase();\n    if (AminoAcidNames.has(compId)) {\n        return 'peptide linking';\n    }\n    else if (RnaBaseNames.has(compId)) {\n        return 'rna linking';\n    }\n    else if (DnaBaseNames.has(compId)) {\n        return 'dna linking';\n    }\n    else if (SaccharideCompIdMap.has(compId)) {\n        return 'saccharide';\n    }\n    else {\n        return 'other';\n    }\n}\nexport function getDefaultChemicalComponent(compId) {\n    // TODO: this is to make the chem_comp_type property work if chem_comp category is not present.\n    // should we try to set the formula etc better?\n    return {\n        formula: '',\n        formula_weight: 0,\n        id: compId,\n        name: compId,\n        mon_nstd_flag: PolymerNames.has(compId) ? 'y' : 'n',\n        pdbx_synonyms: [],\n        type: getComponentType(compId)\n    };\n}\nexport function getEntityType(compId) {\n    compId = compId.toUpperCase();\n    if (WaterNames.has(compId)) {\n        return 'water';\n    }\n    else if (PolymerNames.has(compId)) {\n        return 'polymer';\n    }\n    else if (SaccharideCompIdMap.has(compId)) {\n        return 'branched';\n    }\n    else {\n        return 'non-polymer';\n    }\n}\nexport function getEntitySubtype(compId, compType) {\n    compId = compId.toUpperCase();\n    if (LProteinComponentTypeNames.has(compType)) {\n        return 'polypeptide(L)';\n    }\n    else if (DProteinComponentTypeNames.has(compType)) {\n        return 'polypeptide(D)';\n    }\n    else if (RNAComponentTypeNames.has(compType)) {\n        return 'polyribonucleotide';\n    }\n    else if (DNAComponentTypeNames.has(compType)) {\n        return 'polydeoxyribonucleotide';\n    }\n    else if (SaccharideComponentTypeNames.has(compType)) {\n        return 'oligosaccharide';\n    }\n    else if (SaccharideCompIdMap.has(compId)) {\n        return 'oligosaccharide';\n    }\n    else if (PeptideBaseNames.has(compId)) {\n        return 'peptide nucleic acid';\n    }\n    else if (AminoAcidNamesL.has(compId)) {\n        return 'polypeptide(L)';\n    }\n    else if (AminoAcidNamesD.has(compId)) {\n        return 'polypeptide(D)';\n    }\n    else if (RnaBaseNames.has(compId)) {\n        return 'polyribonucleotide';\n    }\n    else if (DnaBaseNames.has(compId)) {\n        return 'polydeoxyribonucleotide';\n    }\n    else if (IonComponentTypeNames.has(compType) || IonNames.has(compId)) {\n        return 'ion';\n    }\n    else if (LipidComponentTypeNames.has(compType) || LipidNames.has(compId)) {\n        return 'lipid';\n    }\n    else if (OtherProteinComponentTypeNames.has(compType)) {\n        return 'peptide-like';\n    }\n    else {\n        return 'other';\n    }\n}\nexport function isPolymer(moleculeType) {\n    return isNucleic(moleculeType) || isProtein(moleculeType);\n}\nexport function isNucleic(moleculeType) {\n    return moleculeType === MoleculeType.DNA || moleculeType === MoleculeType.RNA || moleculeType === MoleculeType.PNA;\n}\nexport function isProtein(moleculeType) {\n    return moleculeType === MoleculeType.Protein;\n}\nexport var SecondaryStructureType;\n(function (SecondaryStructureType) {\n    SecondaryStructureType.is = BitFlags.has;\n    SecondaryStructureType.create = BitFlags.create;\n    let Flag;\n    (function (Flag) {\n        Flag[Flag[\"None\"] = 0] = \"None\";\n        // category\n        Flag[Flag[\"DoubleHelix\"] = 1] = \"DoubleHelix\";\n        Flag[Flag[\"Helix\"] = 2] = \"Helix\";\n        Flag[Flag[\"Beta\"] = 4] = \"Beta\";\n        Flag[Flag[\"Bend\"] = 8] = \"Bend\";\n        Flag[Flag[\"Turn\"] = 16] = \"Turn\";\n        // category variant\n        Flag[Flag[\"LeftHanded\"] = 32] = \"LeftHanded\";\n        Flag[Flag[\"RightHanded\"] = 64] = \"RightHanded\";\n        Flag[Flag[\"ClassicTurn\"] = 128] = \"ClassicTurn\";\n        Flag[Flag[\"InverseTurn\"] = 256] = \"InverseTurn\";\n        // sub-category\n        Flag[Flag[\"HelixOther\"] = 512] = \"HelixOther\";\n        Flag[Flag[\"Helix27\"] = 1024] = \"Helix27\";\n        Flag[Flag[\"Helix3Ten\"] = 2048] = \"Helix3Ten\";\n        Flag[Flag[\"HelixAlpha\"] = 4096] = \"HelixAlpha\";\n        Flag[Flag[\"HelixGamma\"] = 8192] = \"HelixGamma\";\n        Flag[Flag[\"HelixOmega\"] = 16384] = \"HelixOmega\";\n        Flag[Flag[\"HelixPi\"] = 32768] = \"HelixPi\";\n        Flag[Flag[\"HelixPolyproline\"] = 65536] = \"HelixPolyproline\";\n        Flag[Flag[\"DoubleHelixOther\"] = 131072] = \"DoubleHelixOther\";\n        Flag[Flag[\"DoubleHelixZ\"] = 262144] = \"DoubleHelixZ\";\n        Flag[Flag[\"DoubleHelixA\"] = 524288] = \"DoubleHelixA\";\n        Flag[Flag[\"DoubleHelixB\"] = 1048576] = \"DoubleHelixB\";\n        Flag[Flag[\"BetaOther\"] = 2097152] = \"BetaOther\";\n        Flag[Flag[\"BetaStrand\"] = 4194304] = \"BetaStrand\";\n        Flag[Flag[\"BetaSheet\"] = 8388608] = \"BetaSheet\";\n        Flag[Flag[\"BetaBarell\"] = 16777216] = \"BetaBarell\";\n        Flag[Flag[\"TurnOther\"] = 33554432] = \"TurnOther\";\n        Flag[Flag[\"Turn1\"] = 67108864] = \"Turn1\";\n        Flag[Flag[\"Turn2\"] = 134217728] = \"Turn2\";\n        Flag[Flag[\"Turn3\"] = 268435456] = \"Turn3\";\n        Flag[Flag[\"NA\"] = 536870912] = \"NA\";\n    })(Flag = SecondaryStructureType.Flag || (SecondaryStructureType.Flag = {}));\n    SecondaryStructureType.SecondaryStructureMmcif = {\n        helx_lh_27_p: Flag.Helix | Flag.LeftHanded | Flag.Helix27, // left-handed 2-7 helix (protein)\n        helx_lh_3t_p: Flag.Helix | Flag.LeftHanded | Flag.Helix3Ten, // left-handed 3-10 helix (protein)\n        helx_lh_al_p: Flag.Helix | Flag.LeftHanded | Flag.HelixAlpha, // left-handed alpha helix (protein)\n        helx_lh_a_n: Flag.DoubleHelix | Flag.LeftHanded | Flag.DoubleHelixA, // left-handed A helix (nucleic acid)\n        helx_lh_b_n: Flag.DoubleHelix | Flag.LeftHanded | Flag.DoubleHelixB, // left-handed B helix (nucleic acid)\n        helx_lh_ga_p: Flag.Helix | Flag.LeftHanded | Flag.HelixGamma, // left-handed gamma helix (protein)\n        helx_lh_n: Flag.DoubleHelix | Flag.LeftHanded, // left-handed helix with type not specified (nucleic acid)\n        helx_lh_om_p: Flag.Helix | Flag.LeftHanded | Flag.HelixOmega, // left-handed omega helix (protein)\n        helx_lh_ot_n: Flag.DoubleHelix | Flag.LeftHanded | Flag.DoubleHelixOther, // left-handed helix with type that does not conform to an accepted category (nucleic acid)\n        helx_lh_ot_p: Flag.Helix | Flag.LeftHanded | Flag.HelixOther, // left-handed helix with type that does not conform to an accepted category (protein)\n        helx_lh_p: Flag.Helix | Flag.LeftHanded, // left-handed helix with type not specified (protein)\n        helx_lh_pi_p: Flag.Helix | Flag.LeftHanded | Flag.HelixPi, // left-handed pi helix (protein)\n        helx_lh_pp_p: Flag.Helix | Flag.LeftHanded | Flag.HelixPolyproline, // left-handed polyproline helix (protein)\n        helx_lh_z_n: Flag.DoubleHelix | Flag.LeftHanded | Flag.DoubleHelixZ, // left-handed Z helix (nucleic acid)\n        helx_n: Flag.DoubleHelix, // helix with handedness and type not specified (nucleic acid)\n        helx_ot_n: Flag.DoubleHelix, // helix with handedness and type that do not conform to an accepted category (nucleic acid)\n        helx_ot_p: Flag.Helix, // helix with handedness and type that do not conform to an accepted category (protein)\n        helx_p: Flag.Helix, // helix with handedness and type not specified (protein)\n        helx_rh_27_p: Flag.Helix | Flag.RightHanded | Flag.Helix27, // right-handed 2-7 helix (protein)\n        helx_rh_3t_p: Flag.Helix | Flag.RightHanded | Flag.Helix3Ten, // right-handed 3-10 helix (protein)\n        helx_rh_al_p: Flag.Helix | Flag.RightHanded | Flag.HelixAlpha, // right-handed alpha helix (protein)\n        helx_rh_a_n: Flag.DoubleHelix | Flag.RightHanded | Flag.DoubleHelixA, // right-handed A helix (nucleic acid)\n        helx_rh_b_n: Flag.DoubleHelix | Flag.RightHanded | Flag.DoubleHelixB, // right-handed B helix (nucleic acid)\n        helx_rh_ga_p: Flag.Helix | Flag.RightHanded | Flag.HelixGamma, // right-handed gamma helix (protein)\n        helx_rh_n: Flag.DoubleHelix | Flag.RightHanded, // right-handed helix with type not specified (nucleic acid)\n        helx_rh_om_p: Flag.Helix | Flag.RightHanded | Flag.HelixOmega, // right-handed omega helix (protein)\n        helx_rh_ot_n: Flag.DoubleHelix | Flag.RightHanded | Flag.DoubleHelixOther, // right-handed helix with type that does not conform to an accepted category (rhcleic acid)\n        helx_rh_ot_p: Flag.Helix | Flag.RightHanded | Flag.HelixOther, // right-handed helix with type that does not conform to an accepted category (protein)\n        helx_rh_p: Flag.Helix | Flag.RightHanded, // right-handed helix with type not specified (protein)\n        helx_rh_pi_p: Flag.Helix | Flag.RightHanded | Flag.HelixPi, // right-handed pi helix (protein)\n        helx_rh_pp_p: Flag.Helix | Flag.RightHanded | Flag.HelixPolyproline, // right-handed polyproline helix (protein)\n        helx_rh_z_n: Flag.DoubleHelix | Flag.RightHanded | Flag.DoubleHelixZ, // right-handed Z helix (nucleic acid)\n        strn: Flag.Beta | Flag.BetaStrand, // beta strand (protein)\n        turn_ot_p: Flag.Turn | Flag.TurnOther, // turn with type that does not conform to an accepted category (protein)\n        turn_p: Flag.Turn, // turn with type not specified (protein)\n        turn_ty1p_p: Flag.Turn | Flag.InverseTurn | Flag.Turn1, // type I prime turn (protein)\n        turn_ty1_p: Flag.Turn | Flag.ClassicTurn | Flag.Turn1, // type I turn (protein)\n        turn_ty2p_p: Flag.Turn | Flag.InverseTurn | Flag.Turn2, // type II prime turn (protein)\n        turn_ty2_p: Flag.Turn | Flag.ClassicTurn | Flag.Turn2, // type II turn (protein)\n        turn_ty3p_p: Flag.Turn | Flag.InverseTurn | Flag.Turn3, // type III prime turn (protein)\n        turn_ty3_p: Flag.Turn | Flag.ClassicTurn | Flag.Turn3, // type III turn (protein)\n        bend: Flag.Bend, // region with high backbone curvature without specific hydrogen bonding, a bend at residue i occurs when the angle between C$\\_alpha(i)-C_\\alpha(i-2) and C_\\alpha(i+2) - C_\\alpha(i)$ is greater than 70 degrees (protein)\n        other: Flag.None, // secondary structure type that does not conform to an accepted category, random coil (protein)\n    };\n    SecondaryStructureType.SecondaryStructurePdb = {\n        1: Flag.Helix | Flag.RightHanded | Flag.HelixAlpha, // Right-handed alpha (default)\n        2: Flag.Helix | Flag.RightHanded | Flag.HelixOmega, // Right-handed omega\n        3: Flag.Helix | Flag.RightHanded | Flag.HelixPi, // Right-handed pi\n        4: Flag.Helix | Flag.RightHanded | Flag.HelixGamma, // Right-handed gamma\n        5: Flag.Helix | Flag.RightHanded | Flag.Helix3Ten, // Right-handed 310\n        6: Flag.Helix | Flag.LeftHanded | Flag.HelixAlpha, // Left-handed alpha\n        7: Flag.Helix | Flag.LeftHanded | Flag.HelixOmega, // Left-handed omega\n        8: Flag.Helix | Flag.LeftHanded | Flag.HelixGamma, // Left-handed gamma\n        9: Flag.Helix | Flag.Helix27, // 27 ribbon/helix\n        10: Flag.Helix | Flag.HelixPolyproline, // Polyproline\n    };\n    SecondaryStructureType.SecondaryStructureStride = {\n        H: Flag.Helix | Flag.HelixAlpha, // Alpha helix\n        G: Flag.Helix | Flag.Helix3Ten, // 3-10 helix\n        I: Flag.Helix | Flag.HelixPi, // PI-helix\n        E: Flag.Beta | Flag.BetaSheet, // Extended conformation\n        B: Flag.Beta | Flag.BetaStrand, // Isolated bridge\n        T: Flag.Turn, // Turn\n        C: Flag.NA, // Coil (none of the above)\n    };\n    SecondaryStructureType.SecondaryStructureDssp = {\n        H: Flag.Helix | Flag.HelixAlpha, // alpha-helix\n        B: Flag.Beta | Flag.BetaStrand, // residue in isolated beta-bridge\n        E: Flag.Beta | Flag.BetaSheet, // extended strand, participates in beta ladder\n        G: Flag.Helix | Flag.Helix3Ten, // 3-helix (310 helix)\n        I: Flag.Helix | Flag.HelixPi, // 5 helix (pi-helix)\n        T: Flag.Turn, // hydrogen bonded turn\n        S: Flag.Bend, // bend\n    };\n})(SecondaryStructureType || (SecondaryStructureType = {}));\n/** Maximum accessible surface area observed for amino acids. Taken from: http://dx.doi.org/10.1371/journal.pone.0080635 */\nexport const MaxAsa = {\n    'ALA': 121.0,\n    'ARG': 265.0,\n    'ASN': 187.0,\n    'ASP': 187.0,\n    'CYS': 148.0,\n    'GLU': 214.0,\n    'GLN': 214.0,\n    'GLY': 97.0,\n    'HIS': 216.0,\n    'ILE': 195.0,\n    'LEU': 191.0,\n    'LYS': 230.0,\n    'MET': 203.0,\n    'PHE': 228.0,\n    'PRO': 154.0,\n    'SER': 143.0,\n    'THR': 163.0,\n    'TRP': 264.0,\n    'TYR': 255.0,\n    'VAL': 165.0,\n    // charmm ff\n    'HSD': 216.0, 'HSE': 216.0, 'HSP': 216.0,\n    // amber ff\n    'HID': 216.0, 'HIE': 216.0, 'HIP': 216.0, 'ASH': 187.0, 'GLH': 214.0,\n};\nexport const DefaultMaxAsa = 121.0;\nexport var BondType;\n(function (BondType) {\n    BondType.is = BitFlags.has;\n    let Flag;\n    (function (Flag) {\n        Flag[Flag[\"None\"] = 0] = \"None\";\n        Flag[Flag[\"Covalent\"] = 1] = \"Covalent\";\n        Flag[Flag[\"MetallicCoordination\"] = 2] = \"MetallicCoordination\";\n        Flag[Flag[\"HydrogenBond\"] = 4] = \"HydrogenBond\";\n        Flag[Flag[\"Disulfide\"] = 8] = \"Disulfide\";\n        Flag[Flag[\"Aromatic\"] = 16] = \"Aromatic\";\n        Flag[Flag[\"Computed\"] = 32] = \"Computed\";\n        // currently at most 16 flags are supported!!\n    })(Flag = BondType.Flag || (BondType.Flag = {}));\n    function create(flags) {\n        return BitFlags.create(flags);\n    }\n    BondType.create = create;\n    function isCovalent(flags) {\n        return (flags & BondType.Flag.Covalent) !== 0;\n    }\n    BondType.isCovalent = isCovalent;\n    function isAll(flags) {\n        return flags === Math.pow(2, 6) - 1;\n    }\n    BondType.isAll = isAll;\n    BondType.Names = {\n        'covalent': Flag.Covalent,\n        'metal-coordination': Flag.MetallicCoordination,\n        'hydrogen-bond': Flag.HydrogenBond,\n        'disulfide': Flag.Disulfide,\n        'aromatic': Flag.Aromatic,\n        'computed': Flag.Computed,\n    };\n    function isName(name) {\n        return name in BondType.Names;\n    }\n    BondType.isName = isName;\n    function fromName(name) {\n        switch (name) {\n            case 'covalent': return Flag.Covalent;\n            case 'metal-coordination': return Flag.MetallicCoordination;\n            case 'hydrogen-bond': return Flag.HydrogenBond;\n            case 'disulfide': return Flag.Disulfide;\n            case 'aromatic': return Flag.Aromatic;\n            case 'computed': return Flag.Computed;\n        }\n    }\n    BondType.fromName = fromName;\n    function fromNames(names) {\n        let f = Flag.None;\n        for (let i = 0, il = names.length; i < il; ++i) {\n            f |= fromName(names[i]);\n        }\n        return f;\n    }\n    BondType.fromNames = fromNames;\n})(BondType || (BondType = {}));\n/**\n * \"Experimentally determined hydrophobicity scale for proteins at membrane interfaces\"\n * by Wimely and White (doi:10.1038/nsb1096-842)\n * http://blanco.biomol.uci.edu/Whole_residue_HFscales.txt\n * https://www.nature.com/articles/nsb1096-842\n */\nexport const ResidueHydrophobicity = {\n    // AA  DGwif   DGwoct  Oct-IF\n    'ALA': [0.17, 0.50, 0.33],\n    'ARG': [0.81, 1.81, 1.00],\n    'ASN': [0.42, 0.85, 0.43],\n    'ASP': [1.23, 3.64, 2.41],\n    'ASH': [-0.07, 0.43, 0.50],\n    'CYS': [-0.24, -0.02, 0.22],\n    'GLN': [0.58, 0.77, 0.19],\n    'GLU': [2.02, 3.63, 1.61],\n    'GLH': [-0.01, 0.11, 0.12],\n    'GLY': [0.01, 1.15, 1.14],\n    // \"His+\": [  0.96,  2.33,  1.37 ],\n    'HIS': [0.17, 0.11, -0.06],\n    'ILE': [-0.31, -1.12, -0.81],\n    'LEU': [-0.56, -1.25, -0.69],\n    'LYS': [0.99, 2.80, 1.81],\n    'MET': [-0.23, -0.67, -0.44],\n    'PHE': [-1.13, -1.71, -0.58],\n    'PRO': [0.45, 0.14, -0.31],\n    'SER': [0.13, 0.46, 0.33],\n    'THR': [0.14, 0.25, 0.11],\n    'TRP': [-1.85, -2.09, -0.24],\n    'TYR': [-0.94, -0.71, 0.23],\n    'VAL': [0.07, -0.46, -0.53],\n    // charmm ff\n    'HSD': [0.17, 0.11, -0.06], 'HSE': [0.17, 0.11, -0.06], 'HSP': [0.96, 2.33, 1.37],\n    // amber ff\n    'HID': [0.17, 0.11, -0.06], 'HIE': [0.17, 0.11, -0.06], 'HIP': [0.96, 2.33, 1.37],\n};\nexport const DefaultResidueHydrophobicity = [0.00, 0.00, 0.00];\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { arrayEqual, UUID } from '../../../mol-util/index.js';\nimport { Column } from '../../../mol-data/db.js';\n//\nexport { Time };\nfunction Time(value, unit) {\n    return { value, unit };\n}\n//\nexport { Coordinates };\nvar Coordinates;\n(function (Coordinates) {\n    function create(frames, deltaTime, timeOffset) {\n        const hasCell = !!frames[0].cell;\n        const hasVelocities = !!frames[0].velocities;\n        const hasForces = !!frames[0].forces;\n        return {\n            id: UUID.create22(),\n            frames,\n            hasCell,\n            hasVelocities,\n            hasForces,\n            deltaTime,\n            timeOffset,\n        };\n    }\n    Coordinates.create = create;\n    /**\n     * Only use ordering if it's not identity.\n     */\n    function getAtomicConformation(frame, fields, ordering) {\n        var _a, _b;\n        let { x, y, z } = frame;\n        if (frame.xyzOrdering.frozen) {\n            if (ordering) {\n                if (frame.xyzOrdering.isIdentity) {\n                    // simple list reordering\n                    x = getOrderedCoords(x, ordering);\n                    y = getOrderedCoords(y, ordering);\n                    z = getOrderedCoords(z, ordering);\n                }\n                else if (!arrayEqual(frame.xyzOrdering.index, ordering)) {\n                    x = getSourceOrderedCoords(x, frame.xyzOrdering.index, ordering);\n                    y = getSourceOrderedCoords(y, frame.xyzOrdering.index, ordering);\n                    z = getSourceOrderedCoords(z, frame.xyzOrdering.index, ordering);\n                }\n            }\n            else if (!frame.xyzOrdering.isIdentity) {\n                x = getInvertedCoords(x, frame.xyzOrdering.index);\n                y = getInvertedCoords(y, frame.xyzOrdering.index);\n                z = getInvertedCoords(z, frame.xyzOrdering.index);\n            }\n        }\n        else if (ordering) {\n            if (frame.xyzOrdering.isIdentity) {\n                frame.xyzOrdering.isIdentity = false;\n                frame.xyzOrdering.index = ordering;\n                reorderCoordsInPlace(x, ordering);\n                reorderCoordsInPlace(y, ordering);\n                reorderCoordsInPlace(z, ordering);\n            }\n            else {\n                // is current ordering is not the same as requested?\n                //   => copy the conformations into a new array\n                if (!arrayEqual(frame.xyzOrdering.index, ordering)) {\n                    x = getSourceOrderedCoords(x, frame.xyzOrdering.index, ordering);\n                    y = getSourceOrderedCoords(y, frame.xyzOrdering.index, ordering);\n                    z = getSourceOrderedCoords(z, frame.xyzOrdering.index, ordering);\n                }\n            }\n        }\n        // once the conformation has been accessed at least once, freeze it.\n        //   => any other request to the frame with different ordering will result in a copy.\n        frame.xyzOrdering.frozen = true;\n        return {\n            id: UUID.create22(),\n            atomId: fields.atomId,\n            occupancy: (_a = fields.occupancy) !== null && _a !== void 0 ? _a : Column.ofConst(1, frame.elementCount, Column.Schema.int),\n            B_iso_or_equiv: (_b = fields.B_iso_or_equiv) !== null && _b !== void 0 ? _b : Column.ofConst(0, frame.elementCount, Column.Schema.float),\n            xyzDefined: true,\n            x,\n            y,\n            z,\n        };\n    }\n    Coordinates.getAtomicConformation = getAtomicConformation;\n    const _reorderBuffer = [0.123];\n    function reorderCoordsInPlace(xs, index) {\n        const buffer = _reorderBuffer;\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            buffer[i] = xs[index[i]];\n        }\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            xs[i] = buffer[i];\n        }\n    }\n    function getSourceOrderedCoords(xs, srcIndex, index) {\n        const ret = new Float32Array(xs.length);\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            ret[i] = xs[srcIndex[index[i]]];\n        }\n        return ret;\n    }\n    function getOrderedCoords(xs, index) {\n        const ret = new Float32Array(xs.length);\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            ret[i] = xs[index[i]];\n        }\n        return ret;\n    }\n    function getInvertedCoords(xs, index) {\n        const ret = new Float32Array(xs.length);\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            ret[index[i]] = xs[i];\n        }\n        return ret;\n    }\n})(Coordinates || (Coordinates = {}));\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nclass HashSetImpl {\n    add(a) {\n        const hash = this.getHash(a);\n        if (this.byHash.has(hash)) {\n            const xs = this.byHash.get(hash);\n            for (let i = 0, _i = xs.length; i < _i; i++) {\n                if (this.areEqual(a, xs[i]))\n                    return false;\n            }\n            xs[xs.length] = a;\n            this.size++;\n            return true;\n        }\n        else {\n            this.byHash.set(hash, [a]);\n            this.size++;\n            return true;\n        }\n    }\n    has(v) {\n        const hash = this.getHash(v);\n        if (!this.byHash.has(hash))\n            return false;\n        const xs = this.byHash.get(hash);\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            if (this.areEqual(v, xs[i]))\n                return true;\n        }\n        return false;\n    }\n    constructor(getHash, areEqual) {\n        this.getHash = getHash;\n        this.areEqual = areEqual;\n        this.size = 0;\n        this.byHash = new Map();\n    }\n}\n// TODO: add implementations with multilevel hashing support?\nexport function HashSet(getHash, areEqual) {\n    return new HashSetImpl(getHash, areEqual);\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nfunction LinkedList() {\n    return new LinkedListImpl();\n}\nfunction createListNode(value) {\n    return { previous: null, next: null, inList: true, value };\n}\nclass LinkedListImpl {\n    constructor() {\n        this.count = 0;\n        this.first = null;\n        this.last = null;\n    }\n    addFirst(value) {\n        const node = createListNode(value);\n        node.inList = true;\n        if (this.first)\n            this.first.previous = node;\n        node.next = this.first;\n        this.first = node;\n        this.count++;\n        if (!this.last)\n            this.last = node;\n        return node;\n    }\n    addLast(value) {\n        const node = createListNode(value);\n        if (this.last !== null) {\n            this.last.next = node;\n        }\n        node.previous = this.last;\n        this.last = node;\n        if (this.first === null) {\n            this.first = node;\n        }\n        node.inList = true;\n        this.count++;\n        return node;\n    }\n    removeFirst() {\n        const fst = this.first;\n        if (fst) {\n            this.remove(fst);\n            return fst.value;\n        }\n        return void 0;\n    }\n    removeLast() {\n        const last = this.last;\n        if (last) {\n            this.remove(last);\n            return last.value;\n        }\n        return void 0;\n    }\n    remove(node) {\n        if (!node.inList)\n            return;\n        node.inList = false;\n        if (node.previous !== null) {\n            node.previous.next = node.next;\n        }\n        else if ( /* first == item*/node.previous === null) {\n            this.first = node.next;\n        }\n        if (node.next !== null) {\n            node.next.previous = node.previous;\n        }\n        else if ( /* last == item*/node.next === null) {\n            this.last = node.previous;\n        }\n        node.next = null;\n        node.previous = null;\n        this.count--;\n    }\n    find(value) {\n        let current = this.first;\n        while (current !== null) {\n            if (current.value === value)\n                return current;\n            current = current.next;\n        }\n        return void 0;\n    }\n}\nexport { LinkedList };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar UniqueArray;\n(function (UniqueArray) {\n    function create() {\n        return { keys: new Set(), array: [] };\n    }\n    UniqueArray.create = create;\n    function add({ keys, array }, key, value) {\n        if (keys.has(key))\n            return false;\n        keys.add(key);\n        array[array.length] = value;\n        return true;\n    }\n    UniqueArray.add = add;\n    function has({ keys }, key) {\n        return keys.has(key);\n    }\n    UniqueArray.has = has;\n})(UniqueArray || (UniqueArray = {}));\nexport { UniqueArray };\n","/**\n * Copyright (c) 2020-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { UUID } from './uuid.js';\nimport { iterableToArray } from '../mol-data/util.js';\nimport { ajaxGet, readFromFile } from './data-source.js';\nimport { Task } from '../mol-task/index.js';\nimport { File_ as File } from './nodejs-shims.js';\nexport { AssetManager, Asset };\nvar Asset;\n(function (Asset) {\n    function Url(url, options) {\n        return { kind: 'url', id: UUID.create22(), url, ...options };\n    }\n    Asset.Url = Url;\n    function File(file) {\n        return { kind: 'file', id: UUID.create22(), name: file.name, file };\n    }\n    Asset.File = File;\n    function isUrl(x) {\n        return (x === null || x === void 0 ? void 0 : x.kind) === 'url';\n    }\n    Asset.isUrl = isUrl;\n    function isFile(x) {\n        return (x === null || x === void 0 ? void 0 : x.kind) === 'file';\n    }\n    Asset.isFile = isFile;\n    function Wrapper(data, asset, manager) {\n        return {\n            data,\n            dispose: () => {\n                manager.release(asset);\n            }\n        };\n    }\n    Asset.Wrapper = Wrapper;\n    function getUrl(url) {\n        return typeof url === 'string' ? url : url.url;\n    }\n    Asset.getUrl = getUrl;\n    function getUrlAsset(manager, url, body) {\n        if (typeof url === 'string') {\n            const asset = manager.tryFindUrl(url, body);\n            return asset || Url(url, { body });\n        }\n        return url;\n    }\n    Asset.getUrlAsset = getUrlAsset;\n})(Asset || (Asset = {}));\nclass AssetManager {\n    constructor() {\n        // TODO: add URL based ref-counted cache?\n        // TODO: when serializing, check for duplicates?\n        this._assets = new Map();\n    }\n    get assets() {\n        return iterableToArray(this._assets.values());\n    }\n    tryFindUrl(url, body) {\n        const assets = this.assets.values();\n        while (true) {\n            const v = assets.next();\n            if (v.done)\n                return;\n            const asset = v.value.asset;\n            if (Asset.isUrl(asset) && asset.url === url && (asset.body || '') === (body || ''))\n                return asset;\n        }\n    }\n    tryFindFilename(name) {\n        const it = this._assets.values();\n        while (true) {\n            const { done, value } = it.next();\n            if (done)\n                break;\n            if (value.file.name === name)\n                return value.asset;\n        }\n    }\n    set(asset, file, options) {\n        this._assets.set(asset.id, { asset, file, refCount: 0, tag: options === null || options === void 0 ? void 0 : options.tag, isStatic: options === null || options === void 0 ? void 0 : options.isStatic });\n    }\n    get(asset) {\n        return this._assets.get(asset.id);\n    }\n    delete(asset) {\n        return this._assets.delete(asset.id);\n    }\n    has(asset) {\n        return this._assets.has(asset.id);\n    }\n    resolve(asset, type, store = true) {\n        if (Asset.isUrl(asset)) {\n            return Task.create(`Download ${asset.title || asset.url}`, async (ctx) => {\n                if (this._assets.has(asset.id)) {\n                    const entry = this._assets.get(asset.id);\n                    entry.refCount++;\n                    return Asset.Wrapper(await readFromFile(entry.file, type).runInContext(ctx), asset, this);\n                }\n                if (!store) {\n                    return Asset.Wrapper(await ajaxGet({ ...asset, type }).runInContext(ctx), asset, this);\n                }\n                const data = await ajaxGet({ ...asset, type: 'binary' }).runInContext(ctx);\n                const file = new File([data], 'raw-data');\n                this._assets.set(asset.id, { asset, file, refCount: 1 });\n                return Asset.Wrapper(await readFromFile(file, type).runInContext(ctx), asset, this);\n            });\n        }\n        else {\n            return Task.create(`Read ${asset.name}`, async (ctx) => {\n                if (this._assets.has(asset.id)) {\n                    const entry = this._assets.get(asset.id);\n                    entry.refCount++;\n                    return Asset.Wrapper(await readFromFile(entry.file, type).runInContext(ctx), asset, this);\n                }\n                if (!(asset.file instanceof File)) {\n                    throw new Error(`Cannot resolve file asset '${asset.name}' (${asset.id})`);\n                }\n                if (store) {\n                    this._assets.set(asset.id, { asset, file: asset.file, refCount: 1 });\n                }\n                return Asset.Wrapper(await readFromFile(asset.file, type).runInContext(ctx), asset, this);\n            });\n        }\n    }\n    release(asset) {\n        const entry = this._assets.get(asset.id);\n        if (!entry)\n            return;\n        entry.refCount--;\n        if (entry.refCount <= 0 && !entry.isStatic)\n            this._assets.delete(asset.id);\n    }\n    clearTag(tag) {\n        const keys = Array.from(this._assets.keys());\n        for (const key of keys) {\n            const entry = this._assets.get(key);\n            if (entry && entry.tag === tag) {\n                this._assets.delete(key);\n            }\n        }\n    }\n    clear() {\n        this._assets.clear();\n    }\n    dispose() {\n        this.clear();\n    }\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Structure } from '../../structure.js';\nimport { SortedArray } from '../../../../mol-data/int.js';\nexport function structureUnion(source, structures) {\n    if (structures.length === 0)\n        return Structure.Empty;\n    if (structures.length === 1)\n        return structures[0];\n    const unitMap = new Map();\n    const fullUnits = new Set();\n    for (const { units } of structures) {\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const u = units[i];\n            if (unitMap.has(u.id)) {\n                // check if there is anything more to union in this particual unit.\n                if (fullUnits.has(u.id))\n                    continue;\n                const merged = SortedArray.union(unitMap.get(u.id), u.elements);\n                unitMap.set(u.id, merged);\n                if (merged.length === source.unitMap.get(u.id).elements.length)\n                    fullUnits.add(u.id);\n            }\n            else {\n                unitMap.set(u.id, u.elements);\n                if (u.elements.length === source.unitMap.get(u.id).elements.length)\n                    fullUnits.add(u.id);\n            }\n        }\n    }\n    const builder = source.subsetBuilder(true);\n    unitMap.forEach(buildUnion, builder);\n    return builder.getStructure();\n}\nfunction buildUnion(elements, id) {\n    this.setUnit(id, elements);\n}\nexport function structureAreEqual(sA, sB) {\n    if (sA === sB)\n        return true;\n    if (sA.units.length !== sB.units.length)\n        return false;\n    const aU = sA.units, bU = sB.unitMap;\n    for (let i = 0, _i = aU.length; i < _i; i++) {\n        const u = aU[i];\n        if (!bU.has(u.id))\n            return false;\n        const v = bU.get(u.id);\n        if (!SortedArray.areEqual(u.elements, v.elements))\n            return false;\n    }\n    return true;\n}\nexport function structureAreIntersecting(sA, sB) {\n    if (sA === sB)\n        return true;\n    let a, b;\n    if (sA.units.length < sB.units.length) {\n        a = sA;\n        b = sB;\n    }\n    else {\n        a = sB;\n        b = sA;\n    }\n    const aU = a.units, bU = b.unitMap;\n    for (let i = 0, _i = aU.length; i < _i; i++) {\n        const u = aU[i];\n        if (!bU.has(u.id))\n            continue;\n        const v = bU.get(u.id);\n        if (SortedArray.areIntersecting(u.elements, v.elements))\n            return true;\n    }\n    return false;\n}\nexport function structureIntersect(sA, sB) {\n    if (sA === sB)\n        return sA;\n    if (!structureAreIntersecting(sA, sB))\n        return Structure.Empty;\n    let a, b;\n    if (sA.units.length < sB.units.length) {\n        a = sA;\n        b = sB;\n    }\n    else {\n        a = sB;\n        b = sA;\n    }\n    const aU = a.units, bU = b.unitMap;\n    const units = [];\n    for (let i = 0, _i = aU.length; i < _i; i++) {\n        const u = aU[i];\n        if (!bU.has(u.id))\n            continue;\n        const v = bU.get(u.id);\n        if (SortedArray.areIntersecting(u.elements, v.elements)) {\n            const int = SortedArray.intersect(u.elements, v.elements);\n            units[units.length] = u.getChild(int);\n        }\n    }\n    return Structure.create(units, { parent: sA.parent || sB.parent });\n}\nexport function structureSubtract(a, b) {\n    if (a === b)\n        return Structure.Empty;\n    if (!structureAreIntersecting(a, b))\n        return a;\n    const aU = a.units, bU = b.unitMap;\n    const units = [];\n    for (let i = 0, _i = aU.length; i < _i; i++) {\n        const u = aU[i];\n        if (!bU.has(u.id)) {\n            units[units.length] = u;\n            continue;\n        }\n        const v = bU.get(u.id);\n        const sub = SortedArray.subtract(u.elements, v.elements);\n        if (sub.length > 0) {\n            units[units.length] = u.getChild(sub);\n        }\n    }\n    return Structure.create(units, { parent: a.parent || b.parent });\n}\n","/**\n * Copyright (c) 2020-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nclass FormatRegistry {\n    constructor() {\n        this.map = new Map();\n        this.applicable = new Map();\n    }\n    add(kind, obtain, applicable) {\n        this.map.set(kind, obtain);\n        if (applicable)\n            this.applicable.set(kind, applicable);\n    }\n    remove(kind) {\n        this.map.delete(kind);\n        this.applicable.delete(kind);\n    }\n    get(kind) {\n        return this.map.get(kind);\n    }\n    isApplicable(model) {\n        if (!this.map.has(model.sourceData.kind))\n            return false;\n        const isApplicable = this.applicable.get(model.sourceData.kind);\n        return isApplicable ? isApplicable(model) : true;\n    }\n}\nexport { FormatPropertyProvider };\nvar FormatPropertyProvider;\n(function (FormatPropertyProvider) {\n    function create(descriptor, options) {\n        const { name } = descriptor;\n        const formatRegistry = new FormatRegistry();\n        return {\n            descriptor,\n            formatRegistry,\n            isApplicable(model) {\n                return formatRegistry.isApplicable(model);\n            },\n            get(model) {\n                const store = (options === null || options === void 0 ? void 0 : options.asDynamic) ? model._dynamicPropertyData : model._staticPropertyData;\n                if (store[name])\n                    return store[name];\n                if (model.customProperties.has(descriptor))\n                    return;\n                const obtain = formatRegistry.get(model.sourceData.kind);\n                if (!obtain)\n                    return;\n                store[name] = obtain(model);\n                model.customProperties.add(descriptor);\n                return store[name];\n            },\n            set(model, value) {\n                if (options === null || options === void 0 ? void 0 : options.asDynamic) {\n                    model._dynamicPropertyData[name] = value;\n                }\n                else {\n                    model._staticPropertyData[name] = value;\n                }\n            },\n            delete(model) {\n                if (options === null || options === void 0 ? void 0 : options.asDynamic) {\n                    delete model._dynamicPropertyData[name];\n                }\n                else {\n                    delete model._staticPropertyData[name];\n                }\n            }\n        };\n    }\n    FormatPropertyProvider.create = create;\n})(FormatPropertyProvider || (FormatPropertyProvider = {}));\n","/**\n * Copyright (c) 2017-2022 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/** Default for atomic bonds */\nexport const DefaultBondMaxRadius = 4;\nexport const DefaultBondComputationProps = {\n    forceCompute: false,\n    noCompute: false,\n    maxRadius: DefaultBondMaxRadius,\n};\n// H,D,T are all mapped to H\nconst __ElementIndex = { 'H': 0, 'h': 0, 'D': 0, 'd': 0, 'T': 0, 't': 0, 'He': 2, 'HE': 2, 'he': 2, 'Li': 3, 'LI': 3, 'li': 3, 'Be': 4, 'BE': 4, 'be': 4, 'B': 5, 'b': 5, 'C': 6, 'c': 6, 'N': 7, 'n': 7, 'O': 8, 'o': 8, 'F': 9, 'f': 9, 'Ne': 10, 'NE': 10, 'ne': 10, 'Na': 11, 'NA': 11, 'na': 11, 'Mg': 12, 'MG': 12, 'mg': 12, 'Al': 13, 'AL': 13, 'al': 13, 'Si': 14, 'SI': 14, 'si': 14, 'P': 15, 'p': 15, 'S': 16, 's': 16, 'Cl': 17, 'CL': 17, 'cl': 17, 'Ar': 18, 'AR': 18, 'ar': 18, 'K': 19, 'k': 19, 'Ca': 20, 'CA': 20, 'ca': 20, 'Sc': 21, 'SC': 21, 'sc': 21, 'Ti': 22, 'TI': 22, 'ti': 22, 'V': 23, 'v': 23, 'Cr': 24, 'CR': 24, 'cr': 24, 'Mn': 25, 'MN': 25, 'mn': 25, 'Fe': 26, 'FE': 26, 'fe': 26, 'Co': 27, 'CO': 27, 'co': 27, 'Ni': 28, 'NI': 28, 'ni': 28, 'Cu': 29, 'CU': 29, 'cu': 29, 'Zn': 30, 'ZN': 30, 'zn': 30, 'Ga': 31, 'GA': 31, 'ga': 31, 'Ge': 32, 'GE': 32, 'ge': 32, 'As': 33, 'AS': 33, 'as': 33, 'Se': 34, 'SE': 34, 'se': 34, 'Br': 35, 'BR': 35, 'br': 35, 'Kr': 36, 'KR': 36, 'kr': 36, 'Rb': 37, 'RB': 37, 'rb': 37, 'Sr': 38, 'SR': 38, 'sr': 38, 'Y': 39, 'y': 39, 'Zr': 40, 'ZR': 40, 'zr': 40, 'Nb': 41, 'NB': 41, 'nb': 41, 'Mo': 42, 'MO': 42, 'mo': 42, 'Tc': 43, 'TC': 43, 'tc': 43, 'Ru': 44, 'RU': 44, 'ru': 44, 'Rh': 45, 'RH': 45, 'rh': 45, 'Pd': 46, 'PD': 46, 'pd': 46, 'Ag': 47, 'AG': 47, 'ag': 47, 'Cd': 48, 'CD': 48, 'cd': 48, 'In': 49, 'IN': 49, 'in': 49, 'Sn': 50, 'SN': 50, 'sn': 50, 'Sb': 51, 'SB': 51, 'sb': 51, 'Te': 52, 'TE': 52, 'te': 52, 'I': 53, 'i': 53, 'Xe': 54, 'XE': 54, 'xe': 54, 'Cs': 55, 'CS': 55, 'cs': 55, 'Ba': 56, 'BA': 56, 'ba': 56, 'La': 57, 'LA': 57, 'la': 57, 'Ce': 58, 'CE': 58, 'ce': 58, 'Pr': 59, 'PR': 59, 'pr': 59, 'Nd': 60, 'ND': 60, 'nd': 60, 'Pm': 61, 'PM': 61, 'pm': 61, 'Sm': 62, 'SM': 62, 'sm': 62, 'Eu': 63, 'EU': 63, 'eu': 63, 'Gd': 64, 'GD': 64, 'gd': 64, 'Tb': 65, 'TB': 65, 'tb': 65, 'Dy': 66, 'DY': 66, 'dy': 66, 'Ho': 67, 'HO': 67, 'ho': 67, 'Er': 68, 'ER': 68, 'er': 68, 'Tm': 69, 'TM': 69, 'tm': 69, 'Yb': 70, 'YB': 70, 'yb': 70, 'Lu': 71, 'LU': 71, 'lu': 71, 'Hf': 72, 'HF': 72, 'hf': 72, 'Ta': 73, 'TA': 73, 'ta': 73, 'W': 74, 'w': 74, 'Re': 75, 'RE': 75, 're': 75, 'Os': 76, 'OS': 76, 'os': 76, 'Ir': 77, 'IR': 77, 'ir': 77, 'Pt': 78, 'PT': 78, 'pt': 78, 'Au': 79, 'AU': 79, 'au': 79, 'Hg': 80, 'HG': 80, 'hg': 80, 'Tl': 81, 'TL': 81, 'tl': 81, 'Pb': 82, 'PB': 82, 'pb': 82, 'Bi': 83, 'BI': 83, 'bi': 83, 'Po': 84, 'PO': 84, 'po': 84, 'At': 85, 'AT': 85, 'at': 85, 'Rn': 86, 'RN': 86, 'rn': 86, 'Fr': 87, 'FR': 87, 'fr': 87, 'Ra': 88, 'RA': 88, 'ra': 88, 'Ac': 89, 'AC': 89, 'ac': 89, 'Th': 90, 'TH': 90, 'th': 90, 'Pa': 91, 'PA': 91, 'pa': 91, 'U': 92, 'u': 92, 'Np': 93, 'NP': 93, 'np': 93, 'Pu': 94, 'PU': 94, 'pu': 94, 'Am': 95, 'AM': 95, 'am': 95, 'Cm': 96, 'CM': 96, 'cm': 96, 'Bk': 97, 'BK': 97, 'bk': 97, 'Cf': 98, 'CF': 98, 'cf': 98, 'Es': 99, 'ES': 99, 'es': 99, 'Fm': 100, 'FM': 100, 'fm': 100, 'Md': 101, 'MD': 101, 'md': 101, 'No': 102, 'NO': 102, 'no': 102, 'Lr': 103, 'LR': 103, 'lr': 103, 'Rf': 104, 'RF': 104, 'rf': 104, 'Db': 105, 'DB': 105, 'db': 105, 'Sg': 106, 'SG': 106, 'sg': 106, 'Bh': 107, 'BH': 107, 'bh': 107, 'Hs': 108, 'HS': 108, 'hs': 108, 'Mt': 109, 'MT': 109, 'mt': 109 };\n// Increased P (15) threshold from 1.9 to 2.0 (e.g. for G16 in 1O08)\nconst __ElementBondThresholds = { 0: 1.42, 1: 1.42, 3: 2.7, 4: 2.7, 6: 1.75, 7: 1.6, 8: 1.52, 11: 2.7, 12: 2.7, 13: 2.7, 14: 1.9, 15: 2.0, 16: 1.9, 17: 1.8, 19: 2.7, 20: 2.7, 21: 2.7, 22: 2.7, 23: 2.7, 24: 2.7, 25: 2.7, 26: 2.7, 27: 2.7, 28: 2.7, 29: 2.7, 30: 2.7, 31: 2.7, 33: 2.68, 37: 2.7, 38: 2.7, 39: 2.7, 40: 2.7, 41: 2.7, 42: 2.7, 43: 2.7, 44: 2.7, 45: 2.7, 46: 2.7, 47: 2.7, 48: 2.7, 49: 2.7, 50: 2.7, 55: 2.7, 56: 2.7, 57: 2.7, 58: 2.7, 59: 2.7, 60: 2.7, 61: 2.7, 62: 2.7, 63: 2.7, 64: 2.7, 65: 2.7, 66: 2.7, 67: 2.7, 68: 2.7, 69: 2.7, 70: 2.7, 71: 2.7, 72: 2.7, 73: 2.7, 74: 2.7, 75: 2.7, 76: 2.7, 77: 2.7, 78: 2.7, 79: 2.7, 80: 2.7, 81: 2.7, 82: 2.7, 83: 2.7, 87: 2.7, 88: 2.7, 89: 2.7, 90: 2.7, 91: 2.7, 92: 2.7, 93: 2.7, 94: 2.7, 95: 2.7, 96: 2.7, 97: 2.7, 98: 2.7, 99: 2.7, 100: 2.7, 101: 2.7, 102: 2.7, 103: 2.7, 104: 2.7, 105: 2.7, 106: 2.7, 107: 2.7, 108: 2.7, 109: 2.88 };\n/**\n * Added O-S (316) as 1.8\n * N-O-S bridge (e.g. LYS-CSO in 7B0L, 6ZWJ, 6ZWH)\n * (https://www.nature.com/articles/s41586-021-03513-3?s=09)\n *\n * Increased N-N (112) threshold from 1.55 to 1.6 (e.g. for 0QH in 1BMA)\n *\n * More experimentally observed bond length here (https://cccbdb.nist.gov/expbondlengths1x.asp)\n *\n * H-H (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rHH)\n * - 0.741\n *\n * Changed C-H (27) to 1.2\n * C-H (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rCH)\n * - Average    1.091 (+/- 0.017)\n * - Min        0.931\n * - Max        1.140\n *\n * Changed N-H (35) to 1.15\n * N-H (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rNH)\n * - Average    1.009 (+/- 0.043)\n * - Min        0.836\n * - Max        1.090\n *\n * Changed O-H (44) to 1.1\n * O-H (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rOH)\n * - Average    0.967 (+/- 0.022)\n * - Min        0.912\n * - Max        1.033\n *\n * Added P-H (135) as 1.47\n * P-H (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rPH)\n * - Average    1.423 ((+/- 0.007)\n * - Min        1.414\n * - Max        1.435\n *\n * Added S-H (152) as 1.45\n * S-H (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rSH)\n * - Average    1.345 (+/- 0.020)\n * - Min        1.322\n * - Max        1.400\n *\n * Added Si-Si (420) as 2.37\n * (https://cccbdb.nist.gov/expbondlengths2x.asp?descript=rSiSi)\n */\nconst __ElementPairThresholds = { 0: 0.8, 20: 1.31, 27: 1.2, 35: 1.15, 44: 1.1, 54: 1, 60: 1.84, 72: 1.88, 84: 1.75, 85: 1.56, 86: 1.76, 98: 1.6, 99: 1.68, 100: 1.63, 112: 1.6, 113: 1.59, 114: 1.36, 129: 1.45, 135: 1.47, 144: 1.6, 152: 1.45, 170: 1.4, 180: 1.55, 202: 2.4, 222: 2.24, 224: 1.91, 225: 1.98, 243: 2.02, 269: 2, 293: 1.9, 316: 1.8, 420: 2.37, 480: 2.3, 512: 2.3, 544: 2.3, 612: 2.1, 629: 1.54, 665: 1, 813: 2.6, 854: 2.27, 894: 1.93, 896: 2.1, 937: 2.05, 938: 2.06, 981: 1.62, 1258: 2.68, 1309: 2.33, 1484: 1, 1763: 2.14, 1823: 2.48, 1882: 2.1, 1944: 1.72, 2380: 2.34, 3367: 2.44, 3733: 2.11, 3819: 2.6, 3821: 2.36, 4736: 2.75, 5724: 2.73, 5959: 2.63, 6519: 2.84, 6750: 2.87, 8991: 2.81 };\nconst __DefaultBondingRadius = 2.001;\nexport const MetalsSet = (function () {\n    const metals = ['LI', 'NA', 'K', 'RB', 'CS', 'FR', 'BE', 'MG', 'CA', 'SR', 'BA', 'RA', 'AL', 'GA', 'IN', 'SN', 'TL', 'PB', 'BI', 'SC', 'TI', 'V', 'CR', 'MN', 'FE', 'CO', 'NI', 'CU', 'ZN', 'Y', 'ZR', 'NB', 'MO', 'TC', 'RU', 'RH', 'PD', 'AG', 'CD', 'LA', 'HF', 'TA', 'W', 'RE', 'OS', 'IR', 'PT', 'AU', 'HG', 'AC', 'RF', 'DB', 'SG', 'BH', 'HS', 'MT', 'CE', 'PR', 'ND', 'PM', 'SM', 'EU', 'GD', 'TB', 'DY', 'HO', 'ER', 'TM', 'YB', 'LU', 'TH', 'PA', 'U', 'NP', 'PU', 'AM', 'CM', 'BK', 'CF', 'ES', 'FM', 'MD', 'NO', 'LR'];\n    const set = new Set();\n    for (const m of metals) {\n        set.add(__ElementIndex[m]);\n    }\n    return set;\n})();\nfunction pair(a, b) {\n    if (a < b)\n        return (a + b) * (a + b + 1) / 2 + b;\n    else\n        return (a + b) * (a + b + 1) / 2 + a;\n}\nexport function getElementIdx(e) {\n    const i = __ElementIndex[e];\n    if (i === void 0)\n        return -1;\n    return i;\n}\nexport function getElementPairThreshold(i, j) {\n    if (i < 0 || j < 0)\n        return -1;\n    const r = __ElementPairThresholds[pair(i, j)];\n    if (r === void 0)\n        return -1;\n    return r;\n}\nexport function getElementThreshold(i) {\n    if (i < 0)\n        return __DefaultBondingRadius;\n    const r = __ElementBondThresholds[i];\n    if (r === void 0)\n        return __DefaultBondingRadius;\n    return r;\n}\nexport function getPairingThreshold(elementIndexA, elementIndexB, thresholdA, thresholdB) {\n    const thresholdAB = getElementPairThreshold(elementIndexA, elementIndexB);\n    return thresholdAB > 0\n        ? thresholdAB\n        : elementIndexB < 0\n            ? thresholdA\n            : (thresholdA + thresholdB) / 1.95; // not sure if avg or min but max is too big\n}\nconst H_ID = __ElementIndex['H'];\nexport function isHydrogen(i) {\n    return i === H_ID;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Segmentation } from '../../../../mol-data/int.js';\nimport { StructureElement } from '../../../../mol-model/structure/structure/element.js';\nimport { StructureProperties as P, Unit } from '../../structure.js';\nimport { Structure } from '../../structure/structure.js';\nimport { StructureSelection } from '../selection.js';\nimport { BondType } from '../../model/types.js';\nimport { Bundle } from '../../structure/element/bundle.js';\nexport function defaultBondTest(ctx) {\n    return BondType.isCovalent(ctx.atomicBond.type);\n}\nexport function atomicSequence() {\n    return function query_atomicSequence(ctx) {\n        const { inputStructure } = ctx;\n        const l = StructureElement.Location.create(inputStructure);\n        const units = [];\n        for (const unit of inputStructure.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const elements = unit.elements;\n            l.element = elements[0];\n            if (P.entity.type(l) !== 'polymer')\n                continue;\n            const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, elements);\n            let residueCount = 0;\n            while (residuesIt.hasNext) {\n                residueCount++;\n                residuesIt.move();\n            }\n            if (residueCount < 8)\n                continue;\n            units.push(unit);\n        }\n        return StructureSelection.Singletons(inputStructure, Structure.create(units, { parent: inputStructure }));\n    };\n}\nexport function water() {\n    return function query_water(ctx) {\n        const { inputStructure } = ctx;\n        const l = StructureElement.Location.create(inputStructure);\n        const units = [];\n        for (const unit of inputStructure.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const elements = unit.elements;\n            l.element = elements[0];\n            if (P.entity.type(l) !== 'water')\n                continue;\n            units.push(unit);\n        }\n        return StructureSelection.Singletons(inputStructure, Structure.create(units, { parent: inputStructure }));\n    };\n}\nexport function atomicHet() {\n    return function query_atomicHet(ctx) {\n        const { inputStructure } = ctx;\n        const l = StructureElement.Location.create(inputStructure);\n        const units = [];\n        for (const unit of inputStructure.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const elements = unit.elements;\n            l.element = elements[0];\n            if (P.entity.type(l) === 'water')\n                continue;\n            if (P.entity.type(l) === 'polymer') {\n                const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, elements);\n                let residueCount = 0;\n                while (residuesIt.hasNext) {\n                    residueCount++;\n                    residuesIt.move();\n                }\n                if (residueCount >= 8)\n                    continue;\n            }\n            units.push(unit);\n        }\n        return StructureSelection.Singletons(inputStructure, Structure.create(units, { parent: inputStructure }));\n    };\n}\nexport function spheres() {\n    return function query_spheres(ctx) {\n        const { inputStructure } = ctx;\n        const units = [];\n        for (const unit of inputStructure.units) {\n            if (unit.kind !== Unit.Kind.Spheres)\n                continue;\n            units.push(unit);\n        }\n        return StructureSelection.Singletons(inputStructure, Structure.create(units, { parent: inputStructure }));\n    };\n}\nexport function bundleElementImpl(groupedUnits, ranges, set) {\n    return {\n        groupedUnits: groupedUnits,\n        ranges: ranges,\n        set: set\n    };\n}\nexport function bundleGenerator(elements) {\n    return function query_bundleGenerator(ctx) {\n        const bundle = {\n            hash: ctx.inputStructure.hashCode,\n            elements\n        };\n        return StructureSelection.Sequence(ctx.inputStructure, [Bundle.toStructure(bundle, ctx.inputStructure)]);\n    };\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { isTimingMode } from '../../mol-util/debug.js';\nconst hasPerformance = (typeof performance !== 'undefined') && !!performance.mark && performance.measure;\nconst timingEnabled = hasPerformance && isTimingMode;\nexport var UserTiming;\n(function (UserTiming) {\n    function startMarkName(task) { return `startTask${task.id}`; }\n    function endMarkName(task) { return `endTask${task.id}`; }\n    function markStart(task) {\n        if (timingEnabled)\n            performance.mark(startMarkName(task));\n    }\n    UserTiming.markStart = markStart;\n    function markEnd(task) {\n        if (timingEnabled)\n            performance.mark(endMarkName(task));\n    }\n    UserTiming.markEnd = markEnd;\n    function measure(task) {\n        if (timingEnabled)\n            performance.measure(` ${task.name}`, startMarkName(task), endMarkName(task));\n    }\n    UserTiming.measure = measure;\n})(UserTiming || (UserTiming = {}));\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Task } from '../task.js';\nimport { now } from '../../mol-util/now.js';\nimport { Scheduler } from '../util/scheduler.js';\nimport { UserTiming } from '../util/user-timing.js';\nexport function ExecuteObservable(task, observer, updateRateMs = 250) {\n    const info = ProgressInfo(task, observer, updateRateMs);\n    const ctx = new ObservableRuntimeContext(info, info.root);\n    return execute(task, ctx);\n}\nexport function CreateObservableCtx(task, observer, updateRateMs = 250) {\n    const info = ProgressInfo(task, observer, updateRateMs);\n    return new ObservableRuntimeContext(info, info.root);\n}\nexport function ExecuteInContext(ctx, task) {\n    return execute(task, ctx);\n}\nexport function ExecuteObservableChild(ctx, task, progress) {\n    return ctx.runChild(task, progress);\n}\nfunction defaultProgress(task) {\n    return {\n        taskId: task.id,\n        taskName: task.name,\n        message: '',\n        startedTime: 0,\n        canAbort: true,\n        isIndeterminate: true,\n        current: 0,\n        max: 0\n    };\n}\nfunction ProgressInfo(task, observer, updateRateMs) {\n    const abortToken = { abortRequested: false, treeAborted: false, reason: '' };\n    return {\n        updateRateMs,\n        lastNotified: now(),\n        observer,\n        abortToken,\n        taskId: task.id,\n        root: { progress: defaultProgress(task), children: [] },\n        tryAbort: createAbortFunction(abortToken)\n    };\n}\nfunction createAbortFunction(token) {\n    return (reason) => {\n        token.abortRequested = true;\n        token.reason = reason || token.reason;\n    };\n}\nfunction cloneTree(root) {\n    return { progress: { ...root.progress }, children: root.children.map(cloneTree) };\n}\nfunction canAbort(root) {\n    return root.progress.canAbort && root.children.every(canAbort);\n}\nfunction snapshotProgress(info) {\n    return { root: cloneTree(info.root), canAbort: canAbort(info.root), requestAbort: info.tryAbort };\n}\nasync function execute(task, ctx) {\n    UserTiming.markStart(task);\n    ctx.node.progress.startedTime = now();\n    try {\n        const ret = await task.f(ctx);\n        UserTiming.markEnd(task);\n        UserTiming.measure(task);\n        if (ctx.info.abortToken.abortRequested) {\n            abort(ctx.info);\n        }\n        return ret;\n    }\n    catch (e) {\n        if (Task.isAbort(e)) {\n            ctx.isAborted = true;\n            // wait for all child computations to go thru the abort phase.\n            if (ctx.node.children.length > 0) {\n                await new Promise(res => { ctx.onChildrenFinished = res; });\n            }\n            if (task.onAbort) {\n                task.onAbort();\n            }\n        }\n        throw e;\n    }\n}\nfunction abort(info) {\n    if (!info.abortToken.treeAborted) {\n        info.abortToken.treeAborted = true;\n        abortTree(info.root);\n        notifyObserver(info, now());\n    }\n    throw Task.Aborted(info.abortToken.reason);\n}\nfunction abortTree(root) {\n    const progress = root.progress;\n    progress.isIndeterminate = true;\n    progress.canAbort = false;\n    progress.message = 'Aborting...';\n    for (const c of root.children)\n        abortTree(c);\n}\n// function shouldNotify(info: ProgressInfo, time: number) {\n//     return time - info.lastNotified > info.updateRateMs;\n// }\nfunction notifyObserver(info, time) {\n    info.lastNotified = time;\n    const snapshot = snapshotProgress(info);\n    info.observer(snapshot);\n}\nclass ObservableRuntimeContext {\n    checkAborted() {\n        if (this.info.abortToken.abortRequested) {\n            this.isAborted = true;\n            abort(this.info);\n        }\n    }\n    get shouldUpdate() {\n        this.checkAborted();\n        return now() - this.lastUpdatedTime > this.info.updateRateMs;\n    }\n    updateProgress(update) {\n        this.checkAborted();\n        if (!update)\n            return;\n        const progress = this.node.progress;\n        if (typeof update === 'string') {\n            progress.message = update;\n            progress.isIndeterminate = true;\n        }\n        else {\n            if (typeof update.canAbort !== 'undefined')\n                progress.canAbort = update.canAbort;\n            if (typeof update.message !== 'undefined')\n                progress.message = update.message;\n            if (typeof update.current !== 'undefined')\n                progress.current = update.current;\n            if (typeof update.max !== 'undefined')\n                progress.max = update.max;\n            progress.isIndeterminate = typeof progress.current === 'undefined' || typeof progress.max === 'undefined';\n            if (typeof update.isIndeterminate !== 'undefined')\n                progress.isIndeterminate = update.isIndeterminate;\n        }\n    }\n    update(progress, dontNotify) {\n        // The progress tracking and observer notification are separated\n        // because the computation can have a tree structure.\n        // All nodes of the tree should be regualarly updated at the specified frequency,\n        // however, the notification should only be invoked once per the whole tree.\n        this.lastUpdatedTime = now();\n        this.updateProgress(progress);\n        // TODO: do the shouldNotify check here?\n        if (!!dontNotify /* || !shouldNotify(this.info, this.lastUpdatedTime)*/)\n            return;\n        notifyObserver(this.info, this.lastUpdatedTime);\n        // The computation could have been aborted during the notifycation phase.\n        this.checkAborted();\n        return Scheduler.immediatePromise();\n    }\n    async runChild(task, progress) {\n        this.updateProgress(progress);\n        // Create a new child context and add it to the progress tree.\n        // When the child task finishes, remove the tree node.\n        const node = { progress: defaultProgress(task), children: [] };\n        const children = this.node.children;\n        children.push(node);\n        const ctx = new ObservableRuntimeContext(this.info, node);\n        try {\n            return await execute(task, ctx);\n        }\n        catch (e) {\n            if (Task.isAbort(e)) {\n                // need to catch the error here because otherwise\n                // promises for running child tasks in a tree-like computation\n                // will get orphaned and cause \"uncaught error in Promise\".\n                if (this.isAborted)\n                    return void 0;\n            }\n            throw e;\n        }\n        finally {\n            // remove the progress node after the computation has finished.\n            const idx = children.indexOf(node);\n            if (idx >= 0) {\n                for (let i = idx, _i = children.length - 1; i < _i; i++) {\n                    children[i] = children[i + 1];\n                }\n                children.pop();\n            }\n            if (children.length === 0 && this.onChildrenFinished)\n                this.onChildrenFinished();\n        }\n    }\n    constructor(info, node) {\n        this.isSynchronous = false;\n        this.isExecuting = true;\n        this.lastUpdatedTime = 0;\n        // used for waiting for cancelled computation trees\n        this.onChildrenFinished = void 0;\n        this.node = node;\n        this.info = info;\n    }\n}\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Database, Column, ColumnHelpers } from '../../../mol-data/db.js';\nimport { Tensor } from '../../../mol-math/linear-algebra.js';\nimport { arrayEqual } from '../../../mol-util/index.js';\nimport * as Data from './data-model.js';\nexport var FieldPath;\n(function (FieldPath) {\n    function canonical(path) {\n        return path.replace('.', '_').replace(/\\[/, '_').replace(/(\\[|\\])/g, '');\n    }\n    FieldPath.canonical = canonical;\n    function equal(pathA, pathB) {\n        return canonical(pathA) === canonical(pathB);\n    }\n    FieldPath.equal = equal;\n    function create(category, field, asCanonical = false) {\n        const p = `${category}${field ? `.${field}` : ''}`;\n        return asCanonical ? canonical(p) : p;\n    }\n    FieldPath.create = create;\n})(FieldPath || (FieldPath = {}));\nexport function toDatabaseCollection(schema, file, aliases) {\n    const dbc = {};\n    for (const data of file.blocks) {\n        dbc[data.header] = toDatabase(schema, data, aliases);\n    }\n    return dbc;\n}\nexport function toDatabase(schema, frame, aliases) {\n    return createDatabase(schema, frame, aliases);\n}\nexport function toTable(schema, category) {\n    return new CategoryTable(category, schema, true);\n}\nfunction getColumnCtor(t) {\n    switch (t.valueType) {\n        case 'str': return (f, c, k) => createStringColumn(t, f, f.str, f.toStringArray);\n        case 'int': return (f, c, k) => createColumn(t, f, f.int, f.toIntArray);\n        case 'float': return (f, c, k) => createColumn(t, f, f.float, f.toFloatArray);\n        case 'list': throw new Error('Use createListColumn instead.');\n        case 'tensor': throw new Error('Use createTensorColumn instead.');\n    }\n}\nfunction createStringColumn(schema, field, value, toArray) {\n    return {\n        schema,\n        __array: field.__array,\n        isDefined: field.isDefined,\n        rowCount: field.rowCount,\n        value: schema.transform === 'lowercase'\n            ? row => value(row).toLowerCase()\n            : schema.transform === 'uppercase'\n                ? row => value(row).toUpperCase()\n                : value,\n        valueKind: field.valueKind,\n        areValuesEqual: field.areValuesEqual,\n        toArray: schema.transform === 'lowercase'\n            ? p => Array.from(toArray(p)).map(x => x.toLowerCase())\n            : schema.transform === 'uppercase'\n                ? p => Array.from(toArray(p)).map(x => x.toUpperCase())\n                : toArray,\n    };\n}\nfunction createColumn(schema, field, value, toArray) {\n    return {\n        schema,\n        __array: field.__array,\n        isDefined: field.isDefined,\n        rowCount: field.rowCount,\n        value,\n        valueKind: field.valueKind,\n        areValuesEqual: field.areValuesEqual,\n        toArray\n    };\n}\nfunction createListColumn(schema, category, key) {\n    const separator = schema.separator;\n    const itemParse = schema.itemParse;\n    const f = category.getField(key);\n    const value = f ? (row) => f.str(row).split(separator).map(x => itemParse(x.trim())).filter(x => !!x) : (row) => [];\n    const toArray = params => ColumnHelpers.createAndFillArray(category.rowCount, value, params);\n    return {\n        schema,\n        __array: void 0,\n        isDefined: !!f,\n        rowCount: category.rowCount,\n        value,\n        valueKind: f ? f.valueKind : () => Column.ValueKinds.NotPresent,\n        areValuesEqual: (rowA, rowB) => arrayEqual(value(rowA), value(rowB)),\n        toArray\n    };\n}\nfunction createTensorColumn(schema, category, key) {\n    const space = schema.space;\n    const zeroOffset = (category.fieldNames.includes(`${key}[0]`) ||\n        category.fieldNames.includes(`${key}[0][0]`) ||\n        category.fieldNames.includes(`${key}[0][0][0]`));\n    const fst = zeroOffset ? 0 : 1;\n    const namingVariant = (category.fieldNames.includes(`${key}_1`) ||\n        category.fieldNames.includes(`${key}_11`) ||\n        category.fieldNames.includes(`${key}_111`)) ? 'underscore' : 'brackets';\n    const getName = Data.tensorFieldNameGetter(key, space.rank, zeroOffset, namingVariant);\n    const first = category.getField(getName(fst, fst, fst)) || Column.Undefined(category.rowCount, schema);\n    const value = (row) => Data.getTensor(category, space, row, getName);\n    const toArray = params => ColumnHelpers.createAndFillArray(category.rowCount, value, params);\n    return {\n        schema,\n        __array: void 0,\n        isDefined: first.isDefined,\n        rowCount: category.rowCount,\n        value,\n        valueKind: first.valueKind,\n        areValuesEqual: (rowA, rowB) => Tensor.areEqualExact(value(rowA), value(rowB)),\n        toArray\n    };\n}\nclass CategoryTable {\n    constructor(category, schema, _isDefined) {\n        this._isDefined = _isDefined;\n        const fieldKeys = Object.keys(schema);\n        this._rowCount = category.rowCount;\n        this._columns = fieldKeys;\n        this._schema = schema;\n        const cache = Object.create(null);\n        for (const k of fieldKeys) {\n            Object.defineProperty(this, k, {\n                get: function () {\n                    if (cache[k])\n                        return cache[k];\n                    const fType = schema[k];\n                    if (fType.valueType === 'list') {\n                        cache[k] = createListColumn(fType, category, k);\n                    }\n                    else if (fType.valueType === 'tensor') {\n                        cache[k] = createTensorColumn(fType, category, k);\n                    }\n                    else {\n                        const ctor = getColumnCtor(fType);\n                        const field = category.getField(k);\n                        cache[k] = !!field ? ctor(field, category, k) : Column.Undefined(category.rowCount, fType);\n                    }\n                    return cache[k];\n                },\n                enumerable: true,\n                configurable: false\n            });\n        }\n    }\n}\nfunction createDatabase(schema, frame, aliases) {\n    const tables = Object.create(null);\n    for (const k of Object.keys(schema)) {\n        tables[k] = createTable(k, schema[k], frame, aliases);\n    }\n    return Database.ofTables(frame.header, schema, tables);\n}\nfunction flattenFrame(frame) {\n    const flatFrame = Object.create(null);\n    for (const c of Object.keys(frame.categories)) {\n        for (const f of frame.categories[c].fieldNames) {\n            const p = FieldPath.create(c, f, true);\n            flatFrame[p] = frame.categories[c].getField(f);\n        }\n    }\n    return flatFrame;\n}\nfunction getField(field, category, flatFrame, aliases) {\n    const path = FieldPath.create(category, field);\n    const canonicalPath = FieldPath.canonical(path);\n    if (canonicalPath in flatFrame)\n        return flatFrame[canonicalPath];\n    if (aliases && path in aliases) {\n        for (const aliased of aliases[path]) {\n            const canonicalAliased = FieldPath.canonical(aliased);\n            if (canonicalAliased in flatFrame)\n                return flatFrame[canonicalAliased];\n        }\n    }\n}\nfunction createTable(key, schema, frame, aliases) {\n    let cat = frame.categories[key];\n    if (aliases) {\n        const flatFrame = flattenFrame(frame);\n        const fields = Object.create(null);\n        const fieldNames = [];\n        let rowCount = 0;\n        for (const k of Object.keys(schema)) {\n            const field = getField(k, key, flatFrame, aliases);\n            if (field) {\n                fields[k] = field;\n                fieldNames.push(k);\n                rowCount = field.rowCount;\n            }\n        }\n        cat = {\n            rowCount,\n            name: key,\n            fieldNames: [...fieldNames],\n            getField(name) {\n                return fields[name];\n            }\n        };\n    }\n    return new CategoryTable(cat || Data.CifCategory.empty(key), schema, !!cat);\n}\n","/**\n * Copyright (c) 2018-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { UUID } from '../mol-util/index.js';\nexport { CustomPropertyDescriptor, CustomProperties };\nfunction CustomPropertyDescriptor(desc) {\n    return desc;\n}\n(function (CustomPropertyDescriptor) {\n    function getUUID(prop) {\n        if (!prop.__key) {\n            prop.__key = UUID.create22();\n        }\n        return prop.__key;\n    }\n    CustomPropertyDescriptor.getUUID = getUUID;\n})(CustomPropertyDescriptor || (CustomPropertyDescriptor = {}));\nclass CustomProperties {\n    constructor() {\n        this._list = [];\n        this._set = new Set();\n        this._refs = new Map();\n        this._assets = new Map();\n    }\n    get all() {\n        return this._list;\n    }\n    add(desc) {\n        if (this._set.has(desc))\n            return;\n        this._list.push(desc);\n        this._set.add(desc);\n    }\n    reference(desc, add) {\n        let refs = this._refs.get(desc) || 0;\n        refs += add ? 1 : -1;\n        this._refs.set(desc, Math.max(refs, 0));\n    }\n    hasReference(desc) {\n        return (this._refs.get(desc) || 0) > 0;\n    }\n    has(desc) {\n        return this._set.has(desc);\n    }\n    /** Sets assets for a prop, disposes of existing assets for that prop */\n    assets(desc, assets) {\n        const prevAssets = this._assets.get(desc);\n        if (prevAssets) {\n            for (const a of prevAssets)\n                a.dispose();\n        }\n        if (assets)\n            this._assets.set(desc, assets);\n        else\n            this._assets.delete(desc);\n    }\n    /** Disposes of all assets of all props */\n    dispose() {\n        this._assets.forEach(assets => {\n            for (const a of assets)\n                a.dispose();\n        });\n    }\n}\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { OrderedSet } from '../../../mol-data/int.js';\nimport { Sphere3D } from './sphere3d.js';\nimport { Vec3 } from '../../linear-algebra/3d/vec3.js';\nfunction Box3D() {\n    return Box3D.zero();\n}\n(function (Box3D) {\n    function create(min, max) { return { min, max }; }\n    Box3D.create = create;\n    function zero() { return { min: Vec3(), max: Vec3() }; }\n    Box3D.zero = zero;\n    function copy(out, a) {\n        Vec3.copy(out.min, a.min);\n        Vec3.copy(out.max, a.max);\n        return out;\n    }\n    Box3D.copy = copy;\n    function set(out, min, max) {\n        Vec3.copy(out.min, min);\n        Vec3.copy(out.max, max);\n        return out;\n    }\n    Box3D.set = set;\n    function clone(a) {\n        return copy(zero(), a);\n    }\n    Box3D.clone = clone;\n    const tmpV = Vec3();\n    /** Get box from sphere, uses extrema if available */\n    function fromSphere3D(out, sphere) {\n        if (Sphere3D.hasExtrema(sphere) && sphere.extrema.length >= 14) { // 14 extrema with coarse boundary helper\n            return fromVec3Array(out, sphere.extrema);\n        }\n        Vec3.set(tmpV, sphere.radius, sphere.radius, sphere.radius);\n        Vec3.sub(out.min, sphere.center, tmpV);\n        Vec3.add(out.max, sphere.center, tmpV);\n        return out;\n    }\n    Box3D.fromSphere3D = fromSphere3D;\n    function addVec3Array(out, array) {\n        for (let i = 0, il = array.length; i < il; i++) {\n            add(out, array[i]);\n        }\n        return out;\n    }\n    Box3D.addVec3Array = addVec3Array;\n    function fromVec3Array(out, array) {\n        setEmpty(out);\n        addVec3Array(out, array);\n        return out;\n    }\n    Box3D.fromVec3Array = fromVec3Array;\n    function addSphere3D(out, sphere) {\n        if (Sphere3D.hasExtrema(sphere) && sphere.extrema.length >= 14) { // 14 extrema with coarse boundary helper\n            return addVec3Array(out, sphere.extrema);\n        }\n        add(out, Vec3.subScalar(tmpV, sphere.center, sphere.radius));\n        add(out, Vec3.addScalar(tmpV, sphere.center, sphere.radius));\n        return out;\n    }\n    Box3D.addSphere3D = addSphere3D;\n    function addBox3D(out, box) {\n        add(out, box.min);\n        add(out, box.max);\n        return out;\n    }\n    Box3D.addBox3D = addBox3D;\n    function intersectsSphere3D(box, sphere) {\n        // Find the point on the AABB closest to the sphere center.\n        Vec3.clamp(tmpV, sphere.center, box.min, box.max);\n        // If that point is inside the sphere, the AABB and sphere intersect.\n        return Vec3.squaredDistance(tmpV, sphere.center) <= (sphere.radius * sphere.radius);\n    }\n    Box3D.intersectsSphere3D = intersectsSphere3D;\n    function computeBounding(data) {\n        const min = Vec3.create(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n        const max = Vec3.create(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n        const { x, y, z, indices } = data;\n        for (let t = 0, _t = OrderedSet.size(indices); t < _t; t++) {\n            const i = OrderedSet.getAt(indices, t);\n            min[0] = Math.min(x[i], min[0]);\n            min[1] = Math.min(y[i], min[1]);\n            min[2] = Math.min(z[i], min[2]);\n            max[0] = Math.max(x[i], max[0]);\n            max[1] = Math.max(y[i], max[1]);\n            max[2] = Math.max(z[i], max[2]);\n        }\n        return { min, max };\n    }\n    Box3D.computeBounding = computeBounding;\n    /** Get size/extent of the box */\n    function size(size, box) {\n        return Vec3.sub(size, box.max, box.min);\n    }\n    Box3D.size = size;\n    const tmpSizeV = Vec3();\n    /** Get volume of the box */\n    function volume(box) {\n        size(tmpSizeV, box);\n        return tmpSizeV[0] * tmpSizeV[1] * tmpSizeV[2];\n    }\n    Box3D.volume = volume;\n    /** Sets min to Number.MAX_VALUE and max to -Number.MAX_VALUE */\n    function setEmpty(box) {\n        Vec3.set(box.min, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n        Vec3.set(box.max, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n        return box;\n    }\n    Box3D.setEmpty = setEmpty;\n    /** Add point to box */\n    function add(box, point) {\n        Vec3.min(box.min, box.min, point);\n        Vec3.max(box.max, box.max, point);\n        return box;\n    }\n    Box3D.add = add;\n    /** Expand box by delta */\n    function expand(out, box, delta) {\n        Vec3.sub(out.min, box.min, delta);\n        Vec3.add(out.max, box.max, delta);\n        return out;\n    }\n    Box3D.expand = expand;\n    function expandUniformly(out, box, delta) {\n        Vec3.subScalar(out.min, box.min, delta);\n        Vec3.addScalar(out.max, box.max, delta);\n        return out;\n    }\n    Box3D.expandUniformly = expandUniformly;\n    function scale(out, box, scale) {\n        Vec3.scale(out.min, box.min, scale);\n        Vec3.scale(out.max, box.max, scale);\n        return out;\n    }\n    Box3D.scale = scale;\n    const tmpTransformV = Vec3();\n    /** Transform box with a Mat4 */\n    function transform(out, box, m) {\n        const [minX, minY, minZ] = box.min;\n        const [maxX, maxY, maxZ] = box.max;\n        setEmpty(out);\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, minX, minY, minZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, minX, minY, maxZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, minX, maxY, minZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, minX, maxY, maxZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, maxX, minY, minZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, maxX, minY, maxZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, maxX, maxY, minZ), m));\n        add(out, Vec3.transformMat4(tmpTransformV, Vec3.set(tmpTransformV, maxX, maxY, maxZ), m));\n        return out;\n    }\n    Box3D.transform = transform;\n    function containsVec3(box, v) {\n        return !(v[0] < box.min[0] || v[0] > box.max[0] ||\n            v[1] < box.min[1] || v[1] > box.max[1] ||\n            v[2] < box.min[2] || v[2] > box.max[2]);\n    }\n    Box3D.containsVec3 = containsVec3;\n    function overlaps(a, b) {\n        return !(a.max[0] < b.min[0] || a.min[0] > b.max[0] ||\n            a.max[1] < b.min[1] || a.min[1] > b.max[1] ||\n            a.max[2] < b.min[2] || a.min[2] > b.max[2]);\n    }\n    Box3D.overlaps = overlaps;\n    function containsSphere3D(box, s) {\n        const c = s.center;\n        const r = s.radius;\n        return (c[0] - r < box.min[0] || c[0] + r > box.max[0] ||\n            c[1] - r < box.min[1] || c[1] + r > box.max[1] ||\n            c[2] - r < box.min[2] || c[2] + r > box.max[2]) ? false : true;\n    }\n    Box3D.containsSphere3D = containsSphere3D;\n    function center(out, box) {\n        return Vec3.center(out, box.max, box.min);\n    }\n    Box3D.center = center;\n    function exactEquals(a, b) {\n        return Vec3.exactEquals(a.min, b.min) && Vec3.exactEquals(a.max, b.max);\n    }\n    Box3D.exactEquals = exactEquals;\n    function equals(a, b) {\n        return Vec3.equals(a.min, b.min) && Vec3.equals(a.max, b.max);\n    }\n    Box3D.equals = equals;\n})(Box3D || (Box3D = {}));\nexport { Box3D };\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nfunction SecondaryStructure(type, key, elements, getIndex) {\n    return { type, key, elements, getIndex };\n}\nexport { SecondaryStructure };\n","/**\n * Copyright (c) 2021-23 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../mol-data/db.js';\nimport { MmcifFormat } from '../../mol-model-formats/structure/mmcif.js';\nimport { CustomPropertyDescriptor } from '../../mol-model/custom-property.js';\nimport { CustomModelProperty } from '../common/custom-model-property.js';\nexport { SIFTSMapping as SIFTSMapping };\nvar SIFTSMapping;\n(function (SIFTSMapping) {\n    SIFTSMapping.Provider = CustomModelProperty.createProvider({\n        label: 'SIFTS Mapping',\n        descriptor: CustomPropertyDescriptor({\n            name: 'sifts_sequence_mapping'\n        }),\n        type: 'static',\n        defaultParams: {},\n        getParams: () => ({}),\n        isApplicable: (data) => isAvailable(data),\n        obtain: async (ctx, data) => {\n            return { value: fromCif(data) };\n        }\n    });\n    function isAvailable(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return false;\n        const { pdbx_sifts_xref_db_name: db_name, pdbx_sifts_xref_db_acc: db_acc, pdbx_sifts_xref_db_num: db_num, pdbx_sifts_xref_db_res: db_res } = model.sourceData.data.db.atom_site;\n        return db_name.isDefined && db_acc.isDefined && db_num.isDefined && db_res.isDefined;\n    }\n    SIFTSMapping.isAvailable = isAvailable;\n    function getKey(loc) {\n        const model = loc.unit.model;\n        const data = SIFTSMapping.Provider.get(model).value;\n        if (!data)\n            return '';\n        const rI = model.atomicHierarchy.residueAtomSegments.index[loc.element];\n        return data.accession[rI];\n    }\n    SIFTSMapping.getKey = getKey;\n    function getLabel(loc) {\n        const model = loc.unit.model;\n        const data = SIFTSMapping.Provider.get(model).value;\n        if (!data)\n            return;\n        const rI = model.atomicHierarchy.residueAtomSegments.index[loc.element];\n        const dbName = data.dbName[rI];\n        if (!dbName)\n            return;\n        return `${dbName} ${data.accession[rI]} ${data.num[rI]} ${data.residue[rI]}`;\n    }\n    SIFTSMapping.getLabel = getLabel;\n    function fromCif(model) {\n        if (!MmcifFormat.is(model.sourceData))\n            return;\n        const { pdbx_sifts_xref_db_name: db_name, pdbx_sifts_xref_db_acc: db_acc, pdbx_sifts_xref_db_num: db_num, pdbx_sifts_xref_db_res: db_res } = model.sourceData.data.db.atom_site;\n        if (!db_name.isDefined || !db_acc.isDefined || !db_num.isDefined || !db_res.isDefined)\n            return;\n        const { atomSourceIndex } = model.atomicHierarchy;\n        const { count, offsets: residueOffsets } = model.atomicHierarchy.residueAtomSegments;\n        const dbName = new Array(count);\n        const accession = new Array(count);\n        const num = new Array(count);\n        const residue = new Array(count);\n        for (let i = 0; i < count; i++) {\n            const row = atomSourceIndex.value(residueOffsets[i]);\n            if (db_name.valueKind(row) !== Column.ValueKinds.Present) {\n                dbName[i] = '';\n                accession[i] = '';\n                num[i] = '';\n                residue[i] = '';\n                continue;\n            }\n            dbName[i] = db_name.value(row);\n            accession[i] = db_acc.value(row);\n            num[i] = db_num.value(row);\n            residue[i] = db_res.value(row);\n        }\n        return { dbName, accession, num, residue };\n    }\n})(SIFTSMapping || (SIFTSMapping = {}));\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport * as Impl from './impl/segmentation.js';\nvar Segmentation;\n(function (Segmentation) {\n    Segmentation.create = Impl.create;\n    Segmentation.ofOffsets = Impl.ofOffsets;\n    Segmentation.count = Impl.count;\n    Segmentation.getSegment = Impl.getSegment;\n    Segmentation.projectValue = Impl.projectValue;\n    /** Segment iterator that mutates a single segment object to mark all the segments. */\n    Segmentation.transientSegments = Impl.segments;\n})(Segmentation || (Segmentation = {}));\nexport { Segmentation };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { OrderedSet } from '../ordered-set.js';\nimport { Interval } from '../interval.js';\nimport { SortedArray } from '../sorted-array.js';\nexport function create(values) {\n    const offsets = SortedArray.ofSortedArray(values);\n    const max = SortedArray.max(offsets);\n    const index = new Int32Array(max);\n    for (let i = 0, _i = values.length - 1; i < _i; i++) {\n        for (let j = values[i], _j = values[i + 1]; j < _j; j++) {\n            index[j] = i;\n        }\n    }\n    return { offsets, index, count: values.length - 1 };\n}\nexport function ofOffsets(offsets, bounds) {\n    const s = Interval.start(bounds);\n    const segments = new Int32Array(offsets.length + 1);\n    for (let i = 0, _i = offsets.length; i < _i; i++) {\n        segments[i] = offsets[i] - s;\n    }\n    segments[offsets.length] = Interval.end(bounds) - s;\n    return create(segments);\n}\n/** Get number of segments in a segmentation */\nexport function count({ count }) { return count; }\nexport function getSegment({ index }, value) { return index[value]; }\nexport function projectValue({ offsets }, set, value) {\n    const last = OrderedSet.max(offsets);\n    const idx = value >= last ? -1 : OrderedSet.findPredecessorIndex(offsets, value - 1);\n    return OrderedSet.findRange(set, OrderedSet.getAt(offsets, idx), OrderedSet.getAt(offsets, idx + 1) - 1);\n}\nexport class SegmentIterator {\n    move() {\n        while (this.hasNext) {\n            if (this.updateValue()) {\n                this.value.index = this.segmentMin++;\n                this.hasNext = this.segmentMax >= this.segmentMin && Interval.size(this.setRange) > 0;\n                break;\n            }\n            else {\n                this.updateSegmentRange();\n            }\n        }\n        return this.value;\n    }\n    updateValue() {\n        const segmentEnd = this.segments[this.segmentMin + 1];\n        // TODO: add optimized version for interval and array?\n        const setEnd = OrderedSet.findPredecessorIndexInInterval(this.set, segmentEnd, this.setRange);\n        this.value.start = Interval.start(this.setRange);\n        this.value.end = setEnd;\n        this.setRange = Interval.ofBounds(setEnd, Interval.end(this.setRange));\n        return setEnd > this.value.start;\n    }\n    updateSegmentRange() {\n        const sMin = Interval.min(this.setRange), sMax = Interval.max(this.setRange);\n        if (sMax < sMin) {\n            this.hasNext = false;\n            return;\n        }\n        this.segmentMin = this.segmentMap[OrderedSet.getAt(this.set, sMin)];\n        this.segmentMax = this.segmentMap[OrderedSet.getAt(this.set, sMax)];\n        this.hasNext = this.segmentMax >= this.segmentMin;\n    }\n    setSegment(segment) {\n        this.setRange = Interval.ofBounds(segment.start, segment.end);\n        this.updateSegmentRange();\n    }\n    constructor(segments, segmentMap, set, inputRange) {\n        this.segments = segments;\n        this.segmentMap = segmentMap;\n        this.set = set;\n        this.segmentMin = 0;\n        this.segmentMax = 0;\n        this.setRange = Interval.Empty;\n        this.value = { index: 0, start: 0, end: 0 };\n        this.hasNext = false;\n        this.setRange = inputRange;\n        this.updateSegmentRange();\n    }\n}\nexport function segments(segs, set, segment) {\n    const int = typeof segment !== 'undefined' ? Interval.ofBounds(segment.start, segment.end) : Interval.ofBounds(0, OrderedSet.size(set));\n    return new SegmentIterator(segs.offsets, segs.index, set, int);\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nclass ArrayIteratorImpl {\n    move() {\n        ++this.index;\n        this.lastValue = this.xs[this.index];\n        this.hasNext = this.index < this.length - 1;\n        return this.lastValue;\n    }\n    constructor(xs) {\n        this.xs = [];\n        this.index = -1;\n        this.length = 0;\n        this.hasNext = false;\n        this.length = xs.length;\n        this.hasNext = xs.length > 0;\n        this.xs = xs;\n        this.index = -1;\n        // try to avoid deoptimization with undefined values\n        this.lastValue = xs.length > 0 ? xs[0] : void 0;\n    }\n}\nclass RangeIteratorImpl {\n    move() {\n        ++this.value;\n        this.hasNext = this.value < this.max;\n        return this.value;\n    }\n    constructor(min, max) {\n        this.max = max;\n        this.value = 0;\n        this.hasNext = false;\n        this.value = min - 1;\n        this.hasNext = max >= min;\n    }\n}\nclass ValueIterator {\n    move() { this.hasNext = false; return this.value; }\n    constructor(value) {\n        this.value = value;\n        this.hasNext = true;\n    }\n}\nclass MapIteratorImpl {\n    move() {\n        const v = this.f(this.base.move());\n        this.hasNext = this.base.hasNext;\n        return v;\n    }\n    constructor(base, f) {\n        this.base = base;\n        this.f = f;\n        this.hasNext = false;\n        this.hasNext = base.hasNext;\n    }\n}\nclass FilterIteratorImpl {\n    move() {\n        const ret = this.next;\n        this.hasNext = this.findNext();\n        return ret;\n    }\n    findNext() {\n        while (this.base.hasNext) {\n            this.next = this.base.move();\n            if (this.p(this.next))\n                return true;\n        }\n        return false;\n    }\n    constructor(base, p) {\n        this.base = base;\n        this.p = p;\n        this.hasNext = this.findNext();\n    }\n}\nvar Iterator;\n(function (Iterator) {\n    Iterator.Empty = new RangeIteratorImpl(0, -1);\n    function Array(xs) { return new ArrayIteratorImpl(xs); }\n    Iterator.Array = Array;\n    function Value(value) { return new ValueIterator(value); }\n    Iterator.Value = Value;\n    function Range(min, max) { return new RangeIteratorImpl(min, max); }\n    Iterator.Range = Range;\n    function map(base, f) { return new MapIteratorImpl(base, f); }\n    Iterator.map = map;\n    function filter(base, p) { return new FilterIteratorImpl(base, p); }\n    Iterator.filter = filter;\n    // Iterate until first truthy value is returned.\n    function forEach(it, f, ctx) {\n        while (it.hasNext) {\n            const c = f(it.move(), ctx);\n            if (c)\n                return ctx;\n        }\n        return ctx;\n    }\n    Iterator.forEach = forEach;\n})(Iterator || (Iterator = {}));\nexport { Iterator };\n","/*\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Expression } from './expression.js';\nexport function Argument(type, params) {\n    const { description = void 0, isOptional = false, isRest = false, defaultValue = void 0 } = params || {};\n    return { type, isOptional, isRest, defaultValue, description };\n}\nexport var Arguments;\n(function (Arguments) {\n    Arguments.None = Dictionary({});\n    function Dictionary(map) {\n        return { kind: 'dictionary', map, '@type': 0 };\n    }\n    Arguments.Dictionary = Dictionary;\n    function List(type, params) {\n        const { nonEmpty = false } = params || {};\n        return { kind: 'list', type, nonEmpty, '@type': 0 };\n    }\n    Arguments.List = List;\n})(Arguments || (Arguments = {}));\nexport function MSymbol(name, args, type, description) {\n    const symbol = function (args) {\n        return Expression.Apply(Expression.Symbol(symbol.id), args);\n    };\n    symbol.info = { namespace: '', name, description };\n    symbol.id = '';\n    symbol.args = args;\n    symbol.type = type;\n    return symbol;\n}\nexport function CustomPropSymbol(namespace, name, type, description) {\n    const symbol = function (args) {\n        return Expression.Apply(Expression.Symbol(symbol.id), args);\n    };\n    symbol.info = { namespace, name, description };\n    symbol.id = `${namespace}.${name}`;\n    symbol.args = Arguments.None;\n    symbol.type = type;\n    return symbol;\n}\nexport function isSymbol(x) {\n    const s = x;\n    return typeof s === 'function' && !!s.info && !!s.args && typeof s.info.namespace === 'string' && !!s.type;\n}\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Iterator } from '../../../mol-data/iterator.js';\nimport { ArrayEncoding } from '../../common/binary-cif.js';\nimport { assertUnreachable } from '../../../mol-util/type-helpers.js';\nexport var Field;\n(function (Field) {\n    let Type;\n    (function (Type) {\n        Type[Type[\"Str\"] = 0] = \"Str\";\n        Type[Type[\"Int\"] = 1] = \"Int\";\n        Type[Type[\"Float\"] = 2] = \"Float\";\n    })(Type = Field.Type || (Field.Type = {}));\n    function str(name, value, params) {\n        return { name, type: Type.Str, value, valueKind: params && params.valueKind, defaultFormat: params && params.encoder ? { encoder: params.encoder } : void 0, shouldInclude: params && params.shouldInclude };\n    }\n    Field.str = str;\n    function int(name, value, params) {\n        return {\n            name,\n            type: Type.Int,\n            value,\n            valueKind: params && params.valueKind,\n            defaultFormat: params ? { encoder: params.encoder, typedArray: params.typedArray } : void 0,\n            shouldInclude: params && params.shouldInclude\n        };\n    }\n    Field.int = int;\n    function float(name, value, params) {\n        return {\n            name,\n            type: Type.Float,\n            value,\n            valueKind: params && params.valueKind,\n            defaultFormat: params ? { encoder: params.encoder, typedArray: params.typedArray, digitCount: typeof params.digitCount !== 'undefined' ? params.digitCount : void 0 } : void 0,\n            shouldInclude: params && params.shouldInclude\n        };\n    }\n    Field.float = float;\n    function index(name) {\n        return int(name, (e, d, i) => i + 1, { typedArray: Int32Array, encoder: ArrayEncoding.by(ArrayEncoding.delta).and(ArrayEncoding.runLength).and(ArrayEncoding.integerPacking) });\n    }\n    Field.index = index;\n    class Builder {\n        constructor() {\n            this.fields = [];\n        }\n        index(name) {\n            this.fields.push(Field.index(name));\n            return this;\n        }\n        str(name, value, params) {\n            this.fields.push(Field.str(name, value, params));\n            return this;\n        }\n        int(name, value, params) {\n            this.fields.push(Field.int(name, value, params));\n            return this;\n        }\n        vec(name, values, params) {\n            for (let i = 0; i < values.length; i++) {\n                this.fields.push(Field.int(`${name}[${i + 1}]`, values[i], params));\n            }\n            return this;\n        }\n        float(name, value, params) {\n            this.fields.push(Field.float(name, value, params));\n            return this;\n        }\n        many(fields) {\n            for (let i = 0; i < fields.length; i++)\n                this.fields.push(fields[i]);\n            return this;\n        }\n        add(field) {\n            this.fields.push(field);\n            return this;\n        }\n        getFields() { return this.fields; }\n    }\n    Field.Builder = Builder;\n    function build() {\n        return new Builder();\n    }\n    Field.build = build;\n})(Field || (Field = {}));\nexport var Category;\n(function (Category) {\n    Category.Empty = { fields: [], source: [] };\n    function filterOf(directives) {\n        const cat_whitelist = [];\n        const cat_blacklist = [];\n        const field_whitelist = [];\n        const field_blacklist = [];\n        for (let d of directives.split(/[\\r\\n]+/)) {\n            d = d.trim();\n            // allow for empty lines in config\n            if (d.length === 0)\n                continue;\n            // let ! denote blacklisted entries\n            const blacklist = /^!/.test(d);\n            if (blacklist)\n                d = d.substr(1);\n            const split = d.split(/\\./);\n            const field = split[1];\n            const list = blacklist ? (field ? field_blacklist : cat_blacklist) : (field ? field_whitelist : cat_whitelist);\n            list[list.length] = d;\n            // ensure categories are aware about whitelisted columns\n            if (field && !cat_whitelist.includes(split[0])) {\n                cat_whitelist[cat_whitelist.length] = split[0];\n            }\n        }\n        const wlcatcol = field_whitelist.map(it => it.split('.')[0]);\n        // blacklist has higher priority\n        return {\n            includeCategory(cat) {\n                // block if category in black\n                if (cat_blacklist.includes(cat)) {\n                    return false;\n                }\n                else {\n                    // if there is a whitelist, the category has to be explicitly allowed\n                    return cat_whitelist.length <= 0 ||\n                        // otherwise include if whitelist contains category\n                        cat_whitelist.indexOf(cat) !== -1;\n                }\n            },\n            includeField(cat, field) {\n                // column names are assumed to follow the pattern 'category_name.column_name'\n                const full = cat + '.' + field;\n                if (field_blacklist.includes(full)) {\n                    return false;\n                }\n                else {\n                    // if for this category no whitelist entries exist\n                    return !wlcatcol.includes(cat) ||\n                        // otherwise must be specifically allowed\n                        field_whitelist.includes(full);\n                }\n            }\n        };\n    }\n    Category.filterOf = filterOf;\n    Category.DefaultFilter = {\n        includeCategory(cat) { return true; },\n        includeField(cat, field) { return true; }\n    };\n    Category.DefaultFormatter = {\n        getFormat(cat, field) { return void 0; }\n    };\n    function ofTable(table, indices) {\n        if (indices) {\n            return {\n                fields: cifFieldsFromTableSchema(table._schema),\n                source: [{ data: table, rowCount: indices.length, keys: () => Iterator.Array(indices) }]\n            };\n        }\n        return {\n            fields: cifFieldsFromTableSchema(table._schema),\n            source: [{ data: table, rowCount: table._rowCount }]\n        };\n    }\n    Category.ofTable = ofTable;\n})(Category || (Category = {}));\nexport var Encoder;\n(function (Encoder) {\n    function writeDatabase(encoder, name, database) {\n        encoder.startDataBlock(name);\n        for (const table of database._tableNames) {\n            encoder.writeCategory({ name: table, instance: () => Category.ofTable(database[table]) });\n        }\n    }\n    Encoder.writeDatabase = writeDatabase;\n    function writeDatabaseCollection(encoder, collection) {\n        for (const name of Object.keys(collection)) {\n            writeDatabase(encoder, name, collection[name]);\n        }\n    }\n    Encoder.writeDatabaseCollection = writeDatabaseCollection;\n})(Encoder || (Encoder = {}));\nfunction columnValue(k) {\n    return (i, d) => d[k].value(i);\n}\nfunction columnListValue(k) {\n    return (i, d) => d[k].value(i).join(d[k].schema.separator);\n}\nfunction columnTensorValue(k, ...coords) {\n    return (i, d) => d[k].schema.space.get(d[k].value(i), ...coords);\n}\nfunction columnValueKind(k) {\n    return (i, d) => d[k].valueKind(i);\n}\nfunction getTensorDefinitions(field, space) {\n    const fieldDefinitions = [];\n    const type = Field.Type.Float;\n    const valueKind = columnValueKind(field);\n    if (space.rank === 1) {\n        const rows = space.dimensions[0];\n        for (let i = 0; i < rows; i++) {\n            const name = `${field}[${i + 1}]`;\n            fieldDefinitions.push({ name, type, value: columnTensorValue(field, i), valueKind });\n        }\n    }\n    else if (space.rank === 2) {\n        const rows = space.dimensions[0], cols = space.dimensions[1];\n        for (let i = 0; i < rows; i++) {\n            for (let j = 0; j < cols; j++) {\n                const name = `${field}[${i + 1}][${j + 1}]`;\n                fieldDefinitions.push({ name, type, value: columnTensorValue(field, i, j), valueKind });\n            }\n        }\n    }\n    else if (space.rank === 3) {\n        const d0 = space.dimensions[0], d1 = space.dimensions[1], d2 = space.dimensions[2];\n        for (let i = 0; i < d0; i++) {\n            for (let j = 0; j < d1; j++) {\n                for (let k = 0; k < d2; k++) {\n                    const name = `${field}[${i + 1}][${j + 1}][${k + 1}]`;\n                    fieldDefinitions.push({ name, type, value: columnTensorValue(field, i, j, k), valueKind });\n                }\n            }\n        }\n    }\n    else {\n        throw new Error('Tensors with rank > 3 or rank 0 are currently not supported.');\n    }\n    return fieldDefinitions;\n}\nfunction cifFieldsFromTableSchema(schema) {\n    const fields = [];\n    for (const k of Object.keys(schema)) {\n        const t = schema[k];\n        if (t.valueType === 'int') {\n            fields.push({ name: k, type: Field.Type.Int, value: columnValue(k), valueKind: columnValueKind(k) });\n        }\n        else if (t.valueType === 'float') {\n            fields.push({ name: k, type: Field.Type.Float, value: columnValue(k), valueKind: columnValueKind(k) });\n        }\n        else if (t.valueType === 'str') {\n            fields.push({ name: k, type: Field.Type.Str, value: columnValue(k), valueKind: columnValueKind(k) });\n        }\n        else if (t.valueType === 'list') {\n            fields.push({ name: k, type: Field.Type.Str, value: columnListValue(k), valueKind: columnValueKind(k) });\n        }\n        else if (t.valueType === 'tensor') {\n            fields.push(...getTensorDefinitions(k, t.space));\n        }\n        else {\n            assertUnreachable(t.valueType);\n        }\n    }\n    return fields;\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Iterator } from '../../../../mol-data/index.js';\nexport function getFieldDigitCount(field) {\n    if (field.defaultFormat && typeof field.defaultFormat.digitCount !== 'undefined')\n        return Math.max(0, Math.min(field.defaultFormat.digitCount, 16));\n    return 6;\n}\nexport function getIncludedFields(category) {\n    return category.fields.some(f => !!f.shouldInclude)\n        ? category.fields.filter(f => !f.shouldInclude || category.source.some(src => f.shouldInclude(src.data)))\n        : category.fields;\n}\nexport function getCategoryInstanceData(category, ctx) {\n    const instance = category.instance(ctx);\n    const sources = instance.source.filter(s => s.rowCount > 0);\n    if (!sources.length)\n        return { instance, rowCount: 0, source: [] };\n    const rowCount = sources.reduce((a, c) => a + c.rowCount, 0);\n    const source = sources.map(c => ({\n        data: c.data,\n        keys: () => c.keys ? c.keys() : Iterator.Range(0, c.rowCount - 1),\n        rowCount: c.rowCount\n    }));\n    return { instance, rowCount, source };\n}\n","/**\n * Copyright (c) 2017-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from CIFTools.js (https://github.com/dsehnal/CIFTools.js)\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { StringBuilder } from '../../../../mol-util/string-builder.js';\nimport { Category, Field } from '../encoder.js';\nimport { getFieldDigitCount, getIncludedFields, getCategoryInstanceData } from './util.js';\nexport class TextEncoder {\n    constructor() {\n        this.builder = StringBuilder.create();\n        this.encoded = false;\n        this.dataBlockCreated = false;\n        this.filter = Category.DefaultFilter;\n        this.formatter = Category.DefaultFormatter;\n        this.isBinary = false;\n        this.binaryEncodingProvider = void 0;\n    }\n    setFilter(filter) {\n        this.filter = filter || Category.DefaultFilter;\n    }\n    isCategoryIncluded(name) {\n        return this.filter.includeCategory(name);\n    }\n    setFormatter(formatter) {\n        this.formatter = formatter || Category.DefaultFormatter;\n    }\n    startDataBlock(header) {\n        this.dataBlockCreated = true;\n        StringBuilder.write(this.builder, `data_${(header || '').replace(/[ \\n\\t]/g, '').toUpperCase()}\\n#\\n`);\n    }\n    writeCategory(category, context, options) {\n        if (this.encoded) {\n            throw new Error('The writer contents have already been encoded, no more writing.');\n        }\n        if (!this.dataBlockCreated) {\n            throw new Error('No data block created.');\n        }\n        if (!(options === null || options === void 0 ? void 0 : options.ignoreFilter) && !this.filter.includeCategory(category.name))\n            return;\n        const { instance, rowCount, source } = getCategoryInstanceData(category, context);\n        if (!rowCount)\n            return;\n        if (rowCount === 1) {\n            writeCifSingleRecord(category, instance, source, this.builder, this.filter, this.formatter);\n        }\n        else {\n            writeCifLoop(category, instance, source, this.builder, this.filter, this.formatter);\n        }\n    }\n    encode() {\n        this.encoded = true;\n    }\n    writeTo(stream) {\n        const chunks = StringBuilder.getChunks(this.builder);\n        for (let i = 0, _i = chunks.length; i < _i; i++) {\n            stream.writeString(chunks[i]);\n        }\n    }\n    getSize() {\n        return StringBuilder.getSize(this.builder);\n    }\n    getData() {\n        return StringBuilder.getString(this.builder);\n    }\n}\nfunction writeValue(builder, data, key, f, floatPrecision, index) {\n    const kind = f.valueKind;\n    const p = kind ? kind(key, data) : Column.ValueKinds.Present;\n    if (p !== Column.ValueKinds.Present) {\n        if (p === Column.ValueKinds.NotPresent)\n            writeNotPresent(builder);\n        else\n            writeUnknown(builder);\n    }\n    else {\n        const val = f.value(key, data, index);\n        const t = f.type;\n        if (t === Field.Type.Str) {\n            if (isMultiline(val)) {\n                writeMultiline(builder, val);\n                return true;\n            }\n            else {\n                return writeChecked(builder, val);\n            }\n        }\n        else if (t === Field.Type.Int) {\n            writeInteger(builder, val);\n        }\n        else {\n            writeFloat(builder, val, floatPrecision);\n        }\n    }\n    return false;\n}\nfunction getFloatPrecisions(categoryName, fields, formatter) {\n    const ret = [];\n    for (const f of fields) {\n        const format = formatter.getFormat(categoryName, f.name);\n        if (format && typeof format.digitCount !== 'undefined')\n            ret[ret.length] = f.type === Field.Type.Float ? Math.pow(10, Math.max(0, Math.min(format.digitCount, 15))) : 0;\n        else\n            ret[ret.length] = f.type === Field.Type.Float ? Math.pow(10, getFieldDigitCount(f)) : 0;\n    }\n    return ret;\n}\nfunction writeCifSingleRecord(category, instance, source, builder, filter, formatter) {\n    const fields = getIncludedFields(instance);\n    const src = source[0];\n    const data = src.data;\n    let width = fields.reduce((w, f) => filter.includeField(category.name, f.name) ? Math.max(w, f.name.length) : 0, 0);\n    // this means no field from this category is included.\n    if (width === 0)\n        return;\n    width += category.name.length + 6;\n    const it = src.keys();\n    const key = it.move();\n    const precisions = getFloatPrecisions(category.name, instance.fields, formatter);\n    for (let _f = 0; _f < fields.length; _f++) {\n        const f = fields[_f];\n        if (!filter.includeField(category.name, f.name))\n            continue;\n        StringBuilder.writePadRight(builder, `_${category.name}.${f.name}`, width);\n        const multiline = writeValue(builder, data, key, f, precisions[_f], 0);\n        if (!multiline)\n            StringBuilder.newline(builder);\n    }\n    StringBuilder.write(builder, '#\\n');\n}\nfunction writeCifLoop(category, instance, source, builder, filter, formatter) {\n    const fieldSource = getIncludedFields(instance);\n    const fields = filter === Category.DefaultFilter ? fieldSource : fieldSource.filter(f => filter.includeField(category.name, f.name));\n    const fieldCount = fields.length;\n    if (fieldCount === 0)\n        return;\n    const precisions = getFloatPrecisions(category.name, fields, formatter);\n    writeLine(builder, 'loop_');\n    for (let i = 0; i < fieldCount; i++) {\n        writeLine(builder, `_${category.name}.${fields[i].name}`);\n    }\n    let index = 0;\n    for (let _c = 0; _c < source.length; _c++) {\n        const src = source[_c];\n        const data = src.data;\n        if (src.rowCount === 0)\n            continue;\n        const it = src.keys();\n        while (it.hasNext) {\n            const key = it.move();\n            let multiline = false;\n            for (let _f = 0; _f < fieldCount; _f++) {\n                multiline = writeValue(builder, data, key, fields[_f], precisions[_f], index);\n            }\n            if (!multiline)\n                StringBuilder.newline(builder);\n            index++;\n        }\n    }\n    StringBuilder.write(builder, '#\\n');\n}\nfunction isMultiline(value) {\n    return typeof value === 'string' && value.indexOf('\\n') >= 0;\n}\nfunction writeLine(builder, val) {\n    StringBuilder.write(builder, val);\n    StringBuilder.newline(builder);\n}\nfunction writeInteger(builder, val) {\n    StringBuilder.writeInteger(builder, val);\n    StringBuilder.whitespace1(builder);\n}\nfunction writeFloat(builder, val, precisionMultiplier) {\n    StringBuilder.writeFloat(builder, val, precisionMultiplier);\n    StringBuilder.whitespace1(builder);\n}\nfunction writeNotPresent(builder) {\n    StringBuilder.writeSafe(builder, '. ');\n}\nfunction writeUnknown(builder) {\n    StringBuilder.writeSafe(builder, '? ');\n}\nfunction writeChecked(builder, val) {\n    if (!val) {\n        StringBuilder.writeSafe(builder, '. ');\n        return false;\n    }\n    const fst = val.charCodeAt(0);\n    let escape = false;\n    let escapeKind = 0; // 0 => ', 1 => \"\n    let hasSingleQuote = false, hasDoubleQuote = false;\n    for (let i = 0, _l = val.length - 1; i <= _l; i++) {\n        const c = val.charCodeAt(i);\n        switch (c) {\n            case 9: // \\t\n                escape = true;\n                break;\n            case 10: // \\n\n                writeMultiline(builder, val);\n                return true;\n            case 32: // ' '\n                escape = true;\n                break;\n            case 34: // \"\n                // no need to escape quote if it's the last char and the length is > 1\n                if (i && i === _l)\n                    break;\n                if (hasSingleQuote) {\n                    // the string already has a \" => use multiline value\n                    writeMultiline(builder, val);\n                    return true;\n                }\n                hasDoubleQuote = true;\n                escape = true;\n                escapeKind = 0;\n                break;\n            case 39: // '\n                // no need to escape quote if it's the last char and the length is > 1\n                if (i && i === _l)\n                    break;\n                if (hasDoubleQuote) {\n                    writeMultiline(builder, val);\n                    return true;\n                }\n                hasSingleQuote = true;\n                escape = true;\n                escapeKind = 1;\n                break;\n        }\n    }\n    if (!escape && (fst === 35 /* # */ || fst === 36 /* $ */ || fst === 59 /* ; */ || fst === 91 /* [ */ || fst === 93 /* ] */ || fst === 95 /* _ */)) {\n        escape = true;\n    }\n    if (escape) {\n        StringBuilder.writeSafe(builder, escapeKind ? '\"' : '\\'');\n        StringBuilder.writeSafe(builder, val);\n        StringBuilder.writeSafe(builder, escapeKind ? '\" ' : '\\' ');\n    }\n    else {\n        StringBuilder.writeSafe(builder, val);\n        StringBuilder.writeSafe(builder, ' ');\n    }\n    return false;\n}\nfunction writeMultiline(builder, val) {\n    StringBuilder.writeSafe(builder, '\\n;' + val);\n    StringBuilder.writeSafe(builder, '\\n;\\n');\n}\n","/*\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from https://github.com/rcsb/mmtf-javascript\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { utf8ByteCount, utf8Write } from '../utf8.js';\nexport function encodeMsgPack(value) {\n    const buffer = new ArrayBuffer(encodedSize(value));\n    const view = new DataView(buffer);\n    const bytes = new Uint8Array(buffer);\n    encodeInternal(value, view, bytes, 0);\n    return bytes;\n}\nfunction encodedSize(value) {\n    const type = typeof value;\n    // Raw Bytes\n    if (type === 'string') {\n        const length = utf8ByteCount(value);\n        if (length < 0x20) {\n            return 1 + length;\n        }\n        if (length < 0x100) {\n            return 2 + length;\n        }\n        if (length < 0x10000) {\n            return 3 + length;\n        }\n        if (length < 0x100000000) {\n            return 5 + length;\n        }\n    }\n    if (value instanceof Uint8Array) {\n        const length = value.byteLength;\n        if (length < 0x100) {\n            return 2 + length;\n        }\n        if (length < 0x10000) {\n            return 3 + length;\n        }\n        if (length < 0x100000000) {\n            return 5 + length;\n        }\n    }\n    if (type === 'number') {\n        // Floating Point\n        // double\n        if (Math.floor(value) !== value)\n            return 9;\n        // Integers\n        if (value >= 0) {\n            // positive fixnum\n            if (value < 0x80)\n                return 1;\n            // uint 8\n            if (value < 0x100)\n                return 2;\n            // uint 16\n            if (value < 0x10000)\n                return 3;\n            // uint 32\n            if (value < 0x100000000)\n                return 5;\n            throw new Error('Number too big 0x' + value.toString(16));\n        }\n        // negative fixnum\n        if (value >= -0x20)\n            return 1;\n        // int 8\n        if (value >= -0x80)\n            return 2;\n        // int 16\n        if (value >= -0x8000)\n            return 3;\n        // int 32\n        if (value >= -0x80000000)\n            return 5;\n        throw new Error('Number too small -0x' + value.toString(16).substr(1));\n    }\n    // Boolean, null\n    if (type === 'boolean' || value === null || value === void 0)\n        return 1;\n    // Container Types\n    if (type === 'object') {\n        let length, size = 0;\n        if (Array.isArray(value)) {\n            length = value.length;\n            for (let i = 0; i < length; i++) {\n                size += encodedSize(value[i]);\n            }\n        }\n        else {\n            const keys = Object.keys(value);\n            length = keys.length;\n            for (let i = 0; i < length; i++) {\n                const key = keys[i];\n                size += encodedSize(key) + encodedSize(value[key]);\n            }\n        }\n        if (length < 0x10) {\n            return 1 + size;\n        }\n        if (length < 0x10000) {\n            return 3 + size;\n        }\n        if (length < 0x100000000) {\n            return 5 + size;\n        }\n        throw new Error('Array or object too long 0x' + length.toString(16));\n    }\n    throw new Error('Unknown type ' + type);\n}\nfunction encodeInternal(value, view, bytes, offset) {\n    const type = typeof value;\n    // Strings Bytes\n    if (type === 'string') {\n        const length = utf8ByteCount(value);\n        // fix str\n        if (length < 0x20) {\n            view.setUint8(offset, length | 0xa0);\n            utf8Write(bytes, offset + 1, value);\n            return 1 + length;\n        }\n        // str 8\n        if (length < 0x100) {\n            view.setUint8(offset, 0xd9);\n            view.setUint8(offset + 1, length);\n            utf8Write(bytes, offset + 2, value);\n            return 2 + length;\n        }\n        // str 16\n        if (length < 0x10000) {\n            view.setUint8(offset, 0xda);\n            view.setUint16(offset + 1, length);\n            utf8Write(bytes, offset + 3, value);\n            return 3 + length;\n        }\n        // str 32\n        if (length < 0x100000000) {\n            view.setUint8(offset, 0xdb);\n            view.setUint32(offset + 1, length);\n            utf8Write(bytes, offset + 5, value);\n            return 5 + length;\n        }\n    }\n    if (value instanceof Uint8Array) {\n        const length = value.byteLength;\n        const bytes = new Uint8Array(view.buffer);\n        // bin 8\n        if (length < 0x100) {\n            view.setUint8(offset, 0xc4);\n            view.setUint8(offset + 1, length);\n            bytes.set(value, offset + 2);\n            return 2 + length;\n        }\n        // bin 16\n        if (length < 0x10000) {\n            view.setUint8(offset, 0xc5);\n            view.setUint16(offset + 1, length);\n            bytes.set(value, offset + 3);\n            return 3 + length;\n        }\n        // bin 32\n        if (length < 0x100000000) {\n            view.setUint8(offset, 0xc6);\n            view.setUint32(offset + 1, length);\n            bytes.set(value, offset + 5);\n            return 5 + length;\n        }\n    }\n    if (type === 'number') {\n        if (!isFinite(value)) {\n            throw new Error('Number not finite: ' + value);\n        }\n        // Floating point\n        if (Math.floor(value) !== value) {\n            view.setUint8(offset, 0xcb);\n            view.setFloat64(offset + 1, value);\n            return 9;\n        }\n        // Integers\n        if (value >= 0) {\n            // positive fixnum\n            if (value < 0x80) {\n                view.setUint8(offset, value);\n                return 1;\n            }\n            // uint 8\n            if (value < 0x100) {\n                view.setUint8(offset, 0xcc);\n                view.setUint8(offset + 1, value);\n                return 2;\n            }\n            // uint 16\n            if (value < 0x10000) {\n                view.setUint8(offset, 0xcd);\n                view.setUint16(offset + 1, value);\n                return 3;\n            }\n            // uint 32\n            if (value < 0x100000000) {\n                view.setUint8(offset, 0xce);\n                view.setUint32(offset + 1, value);\n                return 5;\n            }\n            throw new Error('Number too big 0x' + value.toString(16));\n        }\n        // negative fixnum\n        if (value >= -0x20) {\n            view.setInt8(offset, value);\n            return 1;\n        }\n        // int 8\n        if (value >= -0x80) {\n            view.setUint8(offset, 0xd0);\n            view.setInt8(offset + 1, value);\n            return 2;\n        }\n        // int 16\n        if (value >= -0x8000) {\n            view.setUint8(offset, 0xd1);\n            view.setInt16(offset + 1, value);\n            return 3;\n        }\n        // int 32\n        if (value >= -0x80000000) {\n            view.setUint8(offset, 0xd2);\n            view.setInt32(offset + 1, value);\n            return 5;\n        }\n        throw new Error('Number too small -0x' + (-value).toString(16).substr(1));\n    }\n    // null\n    if (value === null || value === undefined) {\n        view.setUint8(offset, 0xc0);\n        return 1;\n    }\n    // Boolean\n    if (type === 'boolean') {\n        view.setUint8(offset, value ? 0xc3 : 0xc2);\n        return 1;\n    }\n    // Container Types\n    if (type === 'object') {\n        let length, size = 0;\n        const isArray = Array.isArray(value);\n        let keys;\n        if (isArray) {\n            length = value.length;\n        }\n        else {\n            keys = Object.keys(value);\n            length = keys.length;\n        }\n        if (length < 0x10) {\n            view.setUint8(offset, length | (isArray ? 0x90 : 0x80));\n            size = 1;\n        }\n        else if (length < 0x10000) {\n            view.setUint8(offset, isArray ? 0xdc : 0xde);\n            view.setUint16(offset + 1, length);\n            size = 3;\n        }\n        else if (length < 0x100000000) {\n            view.setUint8(offset, isArray ? 0xdd : 0xdf);\n            view.setUint32(offset + 1, length);\n            size = 5;\n        }\n        if (isArray) {\n            for (let i = 0; i < length; i++) {\n                size += encodeInternal(value[i], view, bytes, offset + size);\n            }\n        }\n        else {\n            for (let i = 0, _i = keys.length; i < _i; i++) {\n                const key = keys[i];\n                size += encodeInternal(key, view, bytes, offset + size);\n                size += encodeInternal(value[key], view, bytes, offset + size);\n            }\n        }\n        return size;\n    }\n    throw new Error('Unknown type ' + type);\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { TextEncoder } from './cif/encoder/text.js';\nimport { BinaryEncoder } from './cif/encoder/binary.js';\nimport * as _Encoder from './cif/encoder.js';\nimport { ArrayEncoding, ArrayEncoder } from '../common/binary-cif.js';\nexport var CifWriter;\n(function (CifWriter) {\n    CifWriter.Encoder = _Encoder.Encoder;\n    CifWriter.Category = _Encoder.Category;\n    CifWriter.Field = _Encoder.Field;\n    CifWriter.Encoding = ArrayEncoding;\n    function createEncoder(params) {\n        const { binary = false, encoderName = 'mol*' } = params || {};\n        return binary ? new BinaryEncoder(encoderName, params ? params.binaryEncodingPovider : void 0, params ? !!params.binaryAutoClassifyEncoding : false) : new TextEncoder();\n    }\n    CifWriter.createEncoder = createEncoder;\n    function fields() {\n        return CifWriter.Field.build();\n    }\n    CifWriter.fields = fields;\n    var E = CifWriter.Encoding;\n    CifWriter.Encodings = {\n        deltaRLE: E.by(E.delta).and(E.runLength).and(E.integerPacking),\n        fixedPoint2: E.by(E.fixedPoint(100)).and(E.delta).and(E.integerPacking),\n        fixedPoint3: E.by(E.fixedPoint(1000)).and(E.delta).and(E.integerPacking),\n    };\n    function categoryInstance(fields, source) {\n        return { fields, source: [source] };\n    }\n    CifWriter.categoryInstance = categoryInstance;\n    function createEncodingProviderFromCifFrame(frame) {\n        return {\n            get(c, f) {\n                const cat = frame.categories[c];\n                if (!cat)\n                    return void 0;\n                const ff = cat.getField(f);\n                return ff && ff.binaryEncoding ? ArrayEncoder.fromEncoding(ff.binaryEncoding) : void 0;\n            }\n        };\n    }\n    CifWriter.createEncodingProviderFromCifFrame = createEncodingProviderFromCifFrame;\n    ;\n    function createEncodingProviderFromJsonConfig(hints) {\n        return {\n            get(c, f) {\n                for (let i = 0; i < hints.length; i++) {\n                    const hint = hints[i];\n                    if (hint.categoryName === c && hint.columnName === f) {\n                        return resolveEncoding(hint);\n                    }\n                }\n            }\n        };\n    }\n    CifWriter.createEncodingProviderFromJsonConfig = createEncodingProviderFromJsonConfig;\n    function resolveEncoding(hint) {\n        const precision = hint.precision;\n        if (precision !== void 0) {\n            const multiplier = Math.pow(10, precision);\n            const fixedPoint = E.by(E.fixedPoint(multiplier));\n            switch (hint.encoding) {\n                case 'pack':\n                    return fixedPoint.and(E.integerPacking);\n                case 'rle':\n                    return fixedPoint.and(E.runLength).and(E.integerPacking);\n                case 'delta':\n                    return fixedPoint.and(E.delta).and(E.integerPacking);\n                case 'delta-rle':\n                    return fixedPoint.and(E.delta).and(E.runLength).and(E.integerPacking);\n            }\n            ;\n        }\n        else {\n            switch (hint.encoding) {\n                case 'pack':\n                    return E.by(E.integerPacking);\n                case 'rle':\n                    return E.by(E.runLength).and(E.integerPacking);\n                case 'delta':\n                    return E.by(E.delta).and(E.integerPacking);\n                case 'delta-rle':\n                    return E.by(E.delta).and(E.runLength).and(E.integerPacking);\n            }\n        }\n        throw new Error('cannot be reached');\n    }\n})(CifWriter || (CifWriter = {}));\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from CIFTools.js (https://github.com/dsehnal/CIFTools.js)\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { encodeMsgPack } from '../../../common/msgpack/encode.js';\nimport { ArrayEncoder, ArrayEncoding as E, VERSION } from '../../../common/binary-cif.js';\nimport { Field, Category } from '../encoder.js';\nimport { getIncludedFields, getCategoryInstanceData } from './util.js';\nimport { classifyIntArray, classifyFloatArray } from '../../../common/binary-cif/classifier.js';\nexport class BinaryEncoder {\n    setFilter(filter) {\n        this.filter = filter || Category.DefaultFilter;\n    }\n    isCategoryIncluded(name) {\n        return this.filter.includeCategory(name);\n    }\n    setFormatter(formatter) {\n        this.formatter = formatter || Category.DefaultFormatter;\n    }\n    startDataBlock(header) {\n        this.dataBlocks.push({\n            header: (header || '').replace(/[ \\n\\t]/g, '').toUpperCase(),\n            categories: []\n        });\n    }\n    writeCategory(category, context, options) {\n        if (!this.data) {\n            throw new Error('The writer contents have already been encoded, no more writing.');\n        }\n        if (!this.dataBlocks.length) {\n            throw new Error('No data block created.');\n        }\n        if (!(options === null || options === void 0 ? void 0 : options.ignoreFilter) && !this.filter.includeCategory(category.name))\n            return;\n        const { instance, rowCount, source } = getCategoryInstanceData(category, context);\n        if (!rowCount)\n            return;\n        const cat = { name: '_' + category.name, columns: [], rowCount };\n        const fields = getIncludedFields(instance);\n        for (const f of fields) {\n            if (!this.filter.includeField(category.name, f.name))\n                continue;\n            const format = this.formatter.getFormat(category.name, f.name);\n            cat.columns.push(encodeField(category.name, f, source, rowCount, format, this.binaryEncodingProvider, this.autoClassify));\n        }\n        // no columns included.\n        if (!cat.columns.length)\n            return;\n        this.dataBlocks[this.dataBlocks.length - 1].categories.push(cat);\n    }\n    encode() {\n        if (this.encodedData)\n            return;\n        this.encodedData = encodeMsgPack(this.data);\n        this.data = null;\n        this.dataBlocks = null;\n    }\n    writeTo(writer) {\n        writer.writeBinary(this.encodedData);\n    }\n    getData() {\n        this.encode();\n        return this.encodedData;\n    }\n    getSize() {\n        return this.encodedData.length;\n    }\n    constructor(encoder, encodingProvider, autoClassify) {\n        this.autoClassify = autoClassify;\n        this.dataBlocks = [];\n        this.filter = Category.DefaultFilter;\n        this.formatter = Category.DefaultFormatter;\n        this.isBinary = true;\n        this.binaryEncodingProvider = void 0;\n        this.binaryEncodingProvider = encodingProvider;\n        this.data = {\n            encoder,\n            version: VERSION,\n            dataBlocks: this.dataBlocks\n        };\n    }\n}\nfunction getArrayCtor(field, format) {\n    if (format && format.typedArray)\n        return format.typedArray;\n    if (field.defaultFormat && field.defaultFormat.typedArray)\n        return field.defaultFormat.typedArray;\n    if (field.type === Field.Type.Str)\n        return Array;\n    if (field.type === Field.Type.Int)\n        return Int32Array;\n    return Float64Array;\n}\nfunction getDefaultEncoder(type) {\n    if (type === Field.Type.Str)\n        return ArrayEncoder.by(E.stringArray);\n    return ArrayEncoder.by(E.byteArray);\n}\nfunction tryGetEncoder(categoryName, field, format, provider) {\n    if (format && format.encoder) {\n        return format.encoder;\n    }\n    else if (field.defaultFormat && field.defaultFormat.encoder) {\n        return field.defaultFormat.encoder;\n    }\n    else if (provider) {\n        return provider.get(categoryName, field.name);\n    }\n    else {\n        return void 0;\n    }\n}\nfunction classify(type, data) {\n    if (type === Field.Type.Str)\n        return ArrayEncoder.by(E.stringArray);\n    if (type === Field.Type.Int)\n        return classifyIntArray(data);\n    return classifyFloatArray(data);\n}\nfunction encodeField(categoryName, field, data, totalCount, format, encoderProvider, autoClassify) {\n    const { array, allPresent, mask } = getFieldData(field, getArrayCtor(field, format), totalCount, data);\n    let encoder;\n    if (field.type === Field.Type.Str) {\n        // Force string array encoding if field type is str to prevent conflicts between\n        // encoderProvider (determined by automatic classifier) and field type comming from a CIF schema\n        encoder = ArrayEncoder.by(E.stringArray);\n    }\n    else {\n        encoder = tryGetEncoder(categoryName, field, format, encoderProvider);\n    }\n    if (!encoder) {\n        if (autoClassify)\n            encoder = classify(field.type, array);\n        else\n            encoder = getDefaultEncoder(field.type);\n    }\n    const encoded = encoder.encode(array);\n    let maskData = void 0;\n    if (!allPresent) {\n        const maskRLE = ArrayEncoder.by(E.runLength).and(E.byteArray).encode(mask);\n        if (maskRLE.data.length < mask.length) {\n            maskData = maskRLE;\n        }\n        else {\n            maskData = ArrayEncoder.by(E.byteArray).encode(mask);\n        }\n    }\n    return {\n        name: field.name,\n        data: encoded,\n        mask: maskData\n    };\n}\nfunction getFieldData(field, arrayCtor, totalCount, data) {\n    const isStr = field.type === Field.Type.Str;\n    const array = new arrayCtor(totalCount);\n    const mask = new Uint8Array(totalCount);\n    const valueKind = field.valueKind;\n    const getter = field.value;\n    let allPresent = true;\n    let offset = 0;\n    for (let _d = 0; _d < data.length; _d++) {\n        const d = data[_d].data;\n        const keys = data[_d].keys();\n        while (keys.hasNext) {\n            const key = keys.move();\n            const p = valueKind ? valueKind(key, d) : Column.ValueKinds.Present;\n            if (p !== Column.ValueKinds.Present) {\n                mask[offset] = p;\n                if (isStr)\n                    array[offset] = '';\n                allPresent = false;\n            }\n            else {\n                const value = getter(key, d, offset);\n                if (typeof value === 'string' && !value) {\n                    mask[offset] = Column.ValueKinds.NotPresent;\n                    allPresent = false;\n                }\n                else {\n                    mask[offset] = Column.ValueKinds.Present;\n                }\n                array[offset] = value;\n            }\n            offset++;\n        }\n    }\n    return { array, allPresent, mask };\n}\n","/**\n * Copyright (c) 2017-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Interval, Segmentation, SortedArray } from '../../../../../mol-data/int.js';\nimport { AtomicIndex, AtomicHierarchy } from '../atomic/hierarchy.js';\nimport { cantorPairing } from '../../../../../mol-data/util.js';\nfunction getResidueId(seq_id, ins_code) {\n    if (!ins_code)\n        return seq_id;\n    if (ins_code.length === 1)\n        return cantorPairing(ins_code.charCodeAt(0), seq_id);\n    if (ins_code.length === 2)\n        return cantorPairing(ins_code.charCodeAt(0), cantorPairing(ins_code.charCodeAt(1), seq_id));\n    return `${seq_id} ${ins_code}`;\n}\nfunction updateMapMapIndex(map, key0, key1, index) {\n    if (map.has(key0)) {\n        const submap = map.get(key0);\n        if (!submap.has(key1)) {\n            submap.set(key1, index);\n        }\n    }\n    else {\n        const submap = new Map();\n        map.set(key0, submap);\n        submap.set(key1, index);\n    }\n}\nfunction missingEntity(k) {\n    throw new Error(`Missing entity entry for entity id '${k}'.`);\n}\nfunction createMapping(entities, data, segments) {\n    return {\n        entities,\n        segments,\n        label_seq_id: SortedArray.ofSortedArray(data.residues.label_seq_id.toArray({ array: Int32Array })),\n        label_atom_id: data.atoms.label_atom_id,\n        auth_atom_id: data.atoms.auth_atom_id,\n        label_alt_id: data.atoms.label_alt_id,\n        type_symbol: data.atoms.type_symbol,\n        chain_index_entity_index: new Int32Array(data.chains._rowCount),\n        entity_index_label_asym_id: new Map(),\n        chain_index_label_seq_id: new Map(),\n        auth_asym_id_auth_seq_id: new Map(),\n        chain_index_auth_seq_id: new Map(),\n        label_asym_id: new Map(),\n    };\n}\nconst _tempResidueKey = AtomicIndex.EmptyResidueKey();\nclass Index {\n    getEntityFromChain(cI) {\n        return this.map.chain_index_entity_index[cI];\n    }\n    findEntity(label_asym_id) {\n        const entityIndex = this.map.label_asym_id.get(label_asym_id);\n        return entityIndex !== undefined ? entityIndex : -1;\n    }\n    findChainLabel(key) {\n        const eI = this.entityIndex(key.label_entity_id);\n        if (eI < 0 || !this.map.entity_index_label_asym_id.has(eI))\n            return -1;\n        const cm = this.map.entity_index_label_asym_id.get(eI);\n        if (!cm)\n            return -1;\n        return cm.has(key.label_asym_id) ? cm.get(key.label_asym_id) : -1;\n    }\n    findChainAuth(key) {\n        if (!this.map.auth_asym_id_auth_seq_id.has(key.auth_asym_id))\n            return -1;\n        const rm = this.map.auth_asym_id_auth_seq_id.get(key.auth_asym_id);\n        return rm.has(key.auth_seq_id) ? rm.get(key.auth_seq_id) : -1;\n    }\n    findResidue(label_entity_id_or_key, label_asym_id, auth_seq_id, pdbx_PDB_ins_code) {\n        let key;\n        if (arguments.length === 1) {\n            key = label_entity_id_or_key;\n        }\n        else {\n            _tempResidueKey.label_entity_id = label_entity_id_or_key;\n            _tempResidueKey.label_asym_id = label_asym_id;\n            _tempResidueKey.auth_seq_id = auth_seq_id;\n            _tempResidueKey.pdbx_PDB_ins_code = pdbx_PDB_ins_code;\n            key = _tempResidueKey;\n        }\n        const cI = this.findChainLabel(key);\n        if (cI < 0)\n            return -1;\n        const rm = this.map.chain_index_auth_seq_id.get(cI);\n        const id = getResidueId(key.auth_seq_id, key.pdbx_PDB_ins_code || '');\n        return rm.has(id) ? rm.get(id) : -1;\n    }\n    findResidueLabel(key) {\n        const cI = this.findChainLabel(key);\n        if (cI < 0)\n            return -1;\n        const rm = this.map.chain_index_label_seq_id.get(cI);\n        const id = getResidueId(key.label_seq_id, key.pdbx_PDB_ins_code || '');\n        return rm.has(id) ? rm.get(id) : -1;\n    }\n    findResidueAuth(key) {\n        const cI = this.findChainAuth(key);\n        if (cI < 0)\n            return -1;\n        const rm = this.map.chain_index_auth_seq_id.get(cI);\n        const id = getResidueId(key.auth_seq_id, key.pdbx_PDB_ins_code || '');\n        return rm.has(id) ? rm.get(id) : -1;\n    }\n    findResidueInsertion(key) {\n        const cI = this.findChainLabel(key);\n        if (cI < 0)\n            return -1;\n        const rm = this.map.chain_index_label_seq_id.get(cI);\n        const id = getResidueId(key.label_seq_id, key.pdbx_PDB_ins_code || '');\n        if (rm.has(id))\n            return rm.get(id);\n        const idx = SortedArray.findPredecessorIndex(this.map.label_seq_id, key.label_seq_id);\n        const start = AtomicHierarchy.chainStartResidueIndex(this.map.segments, cI);\n        if (idx < start)\n            return start;\n        const end = AtomicHierarchy.chainEndResidueIndexExcl(this.map.segments, cI) - 1;\n        if (idx >= end)\n            return end;\n        return idx;\n    }\n    findAtom(key) {\n        const rI = this.findResidue(key);\n        if (rI < 0)\n            return -1;\n        if (typeof key.label_alt_id === 'undefined') {\n            return findAtomByName(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.label_atom_id, key.label_atom_id);\n        }\n        return findAtomByNameAndAltLoc(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.label_atom_id, this.map.label_alt_id, key.label_atom_id, key.label_alt_id);\n    }\n    findAtomAuth(key) {\n        const rI = this.findResidueAuth(key);\n        if (rI < 0)\n            return -1;\n        if (typeof key.label_alt_id === 'undefined') {\n            return findAtomByName(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.auth_atom_id, key.auth_atom_id);\n        }\n        return findAtomByNameAndAltLoc(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.auth_atom_id, this.map.label_alt_id, key.auth_atom_id, key.label_alt_id);\n    }\n    findAtomOnResidue(rI, label_atom_id, label_alt_id) {\n        if (typeof label_alt_id === 'undefined') {\n            return findAtomByName(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.label_atom_id, label_atom_id);\n        }\n        return findAtomByNameAndAltLoc(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.label_atom_id, this.map.label_alt_id, label_atom_id, label_alt_id);\n    }\n    findAtomsOnResidue(rI, label_atom_ids) {\n        return findAtomByNames(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.label_atom_id, label_atom_ids);\n    }\n    findElementOnResidue(rI, type_symbol) {\n        return findAtomByElement(this.residueOffsets[rI], this.residueOffsets[rI + 1], this.map.type_symbol, type_symbol);\n    }\n    constructor(map) {\n        this.map = map;\n        this.entityIndex = map.entities.getEntityIndex;\n        this.residueOffsets = this.map.segments.residueAtomSegments.offsets;\n    }\n}\nfunction findAtomByName(start, end, data, atomName) {\n    for (let i = start; i < end; i++) {\n        if (data.value(i) === atomName)\n            return i;\n    }\n    return -1;\n}\nfunction findAtomByNames(start, end, data, atomNames) {\n    for (let i = start; i < end; i++) {\n        if (atomNames.has(data.value(i)))\n            return i;\n    }\n    return -1;\n}\nfunction findAtomByNameAndAltLoc(start, end, nameData, altLocData, atomName, altLoc) {\n    for (let i = start; i < end; i++) {\n        if (nameData.value(i) === atomName && altLocData.value(i) === altLoc)\n            return i;\n    }\n    return -1;\n}\nfunction findAtomByElement(start, end, data, typeSymbol) {\n    for (let i = start; i < end; i++) {\n        if (data.value(i) === typeSymbol)\n            return i;\n    }\n    return -1;\n}\nexport function getAtomicIndex(data, entities, segments) {\n    const map = createMapping(entities, data, segments);\n    const { label_seq_id, auth_seq_id, pdbx_PDB_ins_code } = data.residues;\n    const { label_entity_id, label_asym_id, auth_asym_id } = data.chains;\n    const atomSet = Interval.ofBounds(0, data.atoms._rowCount);\n    const chainsIt = Segmentation.transientSegments(segments.chainAtomSegments, atomSet);\n    while (chainsIt.hasNext) {\n        const chainSegment = chainsIt.move();\n        const chainIndex = chainSegment.index;\n        const entityIndex = entities.getEntityIndex(label_entity_id.value(chainIndex));\n        if (entityIndex < 0)\n            missingEntity(label_entity_id.value(chainIndex));\n        map.chain_index_entity_index[chainIndex] = entityIndex;\n        const authAsymId = auth_asym_id.value(chainIndex);\n        let auth_asym_id_auth_seq_id = map.auth_asym_id_auth_seq_id.get(authAsymId);\n        if (!auth_asym_id_auth_seq_id) {\n            auth_asym_id_auth_seq_id = new Map();\n            map.auth_asym_id_auth_seq_id.set(authAsymId, auth_asym_id_auth_seq_id);\n        }\n        const labelAsymId = label_asym_id.value(chainIndex);\n        if (!map.label_asym_id.has(labelAsymId))\n            map.label_asym_id.set(labelAsymId, entityIndex);\n        updateMapMapIndex(map.entity_index_label_asym_id, entityIndex, labelAsymId, chainIndex);\n        const chain_index_label_seq_id = new Map();\n        const chain_index_auth_seq_id = new Map();\n        map.chain_index_label_seq_id.set(chainIndex, chain_index_label_seq_id);\n        map.chain_index_auth_seq_id.set(chainIndex, chain_index_auth_seq_id);\n        const residuesIt = Segmentation.transientSegments(segments.residueAtomSegments, atomSet, chainSegment);\n        while (residuesIt.hasNext) {\n            const residueSegment = residuesIt.move();\n            const rI = residueSegment.index;\n            const authSeqId = auth_seq_id.value(rI);\n            const insCode = pdbx_PDB_ins_code.value(rI);\n            chain_index_label_seq_id.set(getResidueId(label_seq_id.value(rI), insCode), rI);\n            chain_index_auth_seq_id.set(getResidueId(authSeqId, insCode), rI);\n            auth_asym_id_auth_seq_id.set(authSeqId, chainIndex);\n        }\n    }\n    return new Index(map);\n}\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, Table } from '../../../mol-data/db.js';\nimport { Interval, Segmentation } from '../../../mol-data/int.js';\nimport { toDatabase } from '../../../mol-io/reader/cif/schema.js';\nimport { SymmetryOperator } from '../../../mol-math/geometry.js';\nimport { Mat4, Vec3 } from '../../../mol-math/linear-algebra.js';\nimport { AtomSiteOperatorMappingSchema } from '../../../mol-model/structure/export/categories/atom_site_operator_mapping.js';\nimport { AtomsSchema, ChainsSchema, ResiduesSchema } from '../../../mol-model/structure/model/properties/atomic.js';\nimport { getAtomicDerivedData } from '../../../mol-model/structure/model/properties/utils/atomic-derived.js';\nimport { getAtomicIndex } from '../../../mol-model/structure/model/properties/utils/atomic-index.js';\nimport { ElementSymbol } from '../../../mol-model/structure/model/types.js';\nimport { range } from '../../../mol-util/array.js';\nimport { UUID } from '../../../mol-util/uuid.js';\nimport { MmcifFormat } from '../mmcif.js';\nfunction findHierarchyOffsets(atom_site) {\n    if (atom_site._rowCount === 0)\n        return { residues: [], chains: [] };\n    const start = 0, end = atom_site._rowCount;\n    const residues = [start], chains = [start];\n    const { label_entity_id, label_asym_id, label_seq_id, auth_seq_id, pdbx_PDB_ins_code } = atom_site;\n    for (let i = start + 1; i < end; i++) {\n        const newChain = !label_entity_id.areValuesEqual(i - 1, i) || !label_asym_id.areValuesEqual(i - 1, i);\n        const newResidue = newChain\n            || !label_seq_id.areValuesEqual(i - 1, i)\n            || !auth_seq_id.areValuesEqual(i - 1, i)\n            || !pdbx_PDB_ins_code.areValuesEqual(i - 1, i);\n        // not checking label_comp_id to allow for MICROHETEROGENEITY\n        if (newResidue)\n            residues[residues.length] = i;\n        if (newChain)\n            chains[chains.length] = i;\n    }\n    return { residues, chains };\n}\nfunction createHierarchyData(atom_site, sourceIndex, offsets) {\n    const atoms = Table.ofColumns(AtomsSchema, {\n        type_symbol: Column.ofArray({ array: Column.mapToArray(atom_site.type_symbol, ElementSymbol), schema: Column.Schema.Aliased(Column.Schema.str) }),\n        label_atom_id: atom_site.label_atom_id,\n        auth_atom_id: atom_site.auth_atom_id,\n        label_alt_id: atom_site.label_alt_id,\n        label_comp_id: atom_site.label_comp_id,\n        auth_comp_id: atom_site.auth_comp_id,\n        pdbx_formal_charge: atom_site.pdbx_formal_charge\n    });\n    const residues = Table.view(atom_site, ResiduesSchema, offsets.residues);\n    const chains = Table.view(atom_site, ChainsSchema, offsets.chains);\n    if (!residues.label_seq_id.isDefined) {\n        const seqIds = new Int32Array(residues.label_seq_id.rowCount);\n        const { residues: residueOffsets, chains: chainOffsets } = offsets;\n        let cI = 0;\n        let seqId = 0;\n        for (let i = 0, il = seqIds.length; i < il; ++i) {\n            if (residueOffsets[i] >= chainOffsets[cI + 1]) {\n                cI += 1;\n                seqId = 0;\n            }\n            seqIds[i] = ++seqId; // start id on one\n        }\n        residues.label_seq_id = Column.ofIntArray(seqIds);\n    }\n    // Optimize the numeric columns\n    Table.columnToArray(residues, 'label_seq_id', Int32Array);\n    Table.columnToArray(residues, 'auth_seq_id', Int32Array);\n    const residueSourceIndex = getResidueSourceIndex(sourceIndex, offsets.residues.length, offsets.residues);\n    return { atoms, residues, chains, atomSourceIndex: sourceIndex, residueSourceIndex };\n}\nfunction getResidueSourceIndex(atomSourceIndex, nResidues, residueOffsets) {\n    const residueSourceIndex = new Uint32Array(nResidues); // Source index of the first atom of each residue\n    for (let iRes = 0; iRes < nResidues; iRes++) {\n        const fromAtom = residueOffsets[iRes];\n        const toAtom = (iRes + 1 < nResidues) ? residueOffsets[iRes + 1] : atomSourceIndex.rowCount;\n        let firstSrcIdx = atomSourceIndex.value(fromAtom);\n        for (let iAtom = fromAtom + 1; iAtom < toAtom; iAtom++) {\n            const srcIdx = atomSourceIndex.value(iAtom);\n            if (srcIdx < firstSrcIdx)\n                firstSrcIdx = srcIdx;\n        }\n        residueSourceIndex[iRes] = firstSrcIdx;\n    }\n    const sortedResidues = range(nResidues).sort((ia, ib) => residueSourceIndex[ia] - residueSourceIndex[ib]);\n    // Reusing `residueSourceIndex` array for source index of the residue:\n    for (let i = 0; i < nResidues; i++) {\n        residueSourceIndex[sortedResidues[i]] = i;\n    }\n    return Column.ofIntArray(residueSourceIndex);\n}\nfunction getConformation(atom_site) {\n    return {\n        id: UUID.create22(),\n        atomId: atom_site.id,\n        occupancy: atom_site.occupancy.isDefined ? atom_site.occupancy : Column.ofConst(1, atom_site._rowCount, Column.Schema.float),\n        B_iso_or_equiv: atom_site.B_iso_or_equiv,\n        xyzDefined: atom_site.Cartn_x.isDefined && atom_site.Cartn_y.isDefined && atom_site.Cartn_z.isDefined,\n        x: atom_site.Cartn_x.toArray({ array: Float32Array }),\n        y: atom_site.Cartn_y.toArray({ array: Float32Array }),\n        z: atom_site.Cartn_z.toArray({ array: Float32Array }),\n    };\n}\nfunction isHierarchyDataEqual(a, b) {\n    return Table.areEqual(a.chains, b.chains)\n        && Table.areEqual(a.residues, b.residues)\n        && Table.areEqual(a.atoms, b.atoms);\n}\nfunction createChainOperatorMappingAndSubstituteNames(hierarchy, format) {\n    const mapping = new Map();\n    if (!MmcifFormat.is(format))\n        return mapping;\n    const { molstar_atom_site_operator_mapping: entries } = toDatabase(AtomSiteOperatorMappingSchema, format.data.frame);\n    if (entries._rowCount === 0)\n        return mapping;\n    const labelMap = new Map();\n    const authMap = new Map();\n    for (let i = 0; i < entries._rowCount; i++) {\n        const assembly = entries.assembly_operator_id.valueKind(i) === Column.ValueKinds.Present\n            ? { id: entries.assembly_id.value(i), operList: [], operId: entries.assembly_operator_id.value(i) }\n            : void 0;\n        const operator = SymmetryOperator.create(entries.operator_name.value(i), Mat4.identity(), {\n            assembly,\n            spgrOp: entries.symmetry_operator_index.valueKind(i) === Column.ValueKinds.Present ? entries.symmetry_operator_index.value(i) : void 0,\n            hkl: Vec3.ofArray(entries.symmetry_hkl.value(i)),\n            ncsId: entries.ncs_id.value(i)\n        });\n        const suffix = entries.suffix.value(i);\n        const label = entries.label_asym_id.value(i);\n        labelMap.set(`${label}${suffix}`, { name: label, operator });\n        const auth = entries.auth_asym_id.value(i);\n        authMap.set(`${auth}${suffix}`, auth);\n    }\n    const { label_asym_id, auth_asym_id } = hierarchy.chains;\n    const mappedLabel = new Array(label_asym_id.rowCount);\n    const mappedAuth = new Array(label_asym_id.rowCount);\n    for (let i = 0; i < label_asym_id.rowCount; i++) {\n        const label = label_asym_id.value(i), auth = auth_asym_id.value(i);\n        if (!labelMap.has(label)) {\n            mappedLabel[i] = label;\n            mappedAuth[i] = auth;\n            continue;\n        }\n        const { name, operator } = labelMap.get(label);\n        mapping.set(i, operator);\n        mappedLabel[i] = name;\n        mappedAuth[i] = authMap.get(auth) || auth;\n    }\n    hierarchy.chains.label_asym_id = Column.ofArray({ array: mappedLabel, valueKind: hierarchy.chains.label_asym_id.valueKind, schema: hierarchy.chains.label_asym_id.schema });\n    hierarchy.chains.auth_asym_id = Column.ofArray({ array: mappedAuth, valueKind: hierarchy.chains.auth_asym_id.valueKind, schema: hierarchy.chains.auth_asym_id.schema });\n    return mapping;\n}\nfunction getAtomicHierarchy(atom_site, sourceIndex, entities, chemicalComponentMap, format, previous) {\n    const hierarchyOffsets = findHierarchyOffsets(atom_site);\n    const hierarchyData = createHierarchyData(atom_site, sourceIndex, hierarchyOffsets);\n    const chainOperatorMapping = createChainOperatorMappingAndSubstituteNames(hierarchyData, format);\n    if (previous && isHierarchyDataEqual(previous.atomicHierarchy, hierarchyData)) {\n        return {\n            sameAsPrevious: true,\n            hierarchy: previous.atomicHierarchy,\n            chainOperatorMapping\n        };\n    }\n    const hierarchySegments = {\n        residueAtomSegments: Segmentation.ofOffsets(hierarchyOffsets.residues, Interval.ofBounds(0, atom_site._rowCount)),\n        chainAtomSegments: Segmentation.ofOffsets(hierarchyOffsets.chains, Interval.ofBounds(0, atom_site._rowCount)),\n    };\n    const index = getAtomicIndex(hierarchyData, entities, hierarchySegments);\n    const derived = getAtomicDerivedData(hierarchyData, hierarchySegments, index, chemicalComponentMap);\n    const hierarchy = { ...hierarchyData, ...hierarchySegments, index, derived };\n    return { sameAsPrevious: false, hierarchy, chainOperatorMapping };\n}\nexport function getAtomicHierarchyAndConformation(atom_site, sourceIndex, entities, chemicalComponentMap, format, previous) {\n    const { sameAsPrevious, hierarchy, chainOperatorMapping } = getAtomicHierarchy(atom_site, sourceIndex, entities, chemicalComponentMap, format, previous);\n    const conformation = getConformation(atom_site);\n    return { sameAsPrevious, hierarchy, conformation, chainOperatorMapping };\n}\n","/**\n * Copyright (c) 2018-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { AtomNumber } from '../atomic.js';\nimport { getMoleculeType, getComponentType, getPolymerType, isPolymer, ElementSymbol } from '../../types.js';\nimport { getAtomIdForAtomRole } from '../../../../../mol-model/structure/util.js';\nimport { isProductionMode } from '../../../../../mol-util/debug.js';\nexport function getAtomicDerivedData(data, segments, index, chemicalComponentMap) {\n    const { label_comp_id, type_symbol, _rowCount: atomCount } = data.atoms;\n    const { _rowCount: residueCount } = data.residues;\n    const { offsets } = segments.residueAtomSegments;\n    const atomicNumber = new Uint8Array(atomCount);\n    for (let i = 0; i < atomCount; ++i) {\n        atomicNumber[i] = AtomNumber(type_symbol.value(i));\n    }\n    const traceElementIndex = new Int32Array(residueCount);\n    const directionFromElementIndex = new Int32Array(residueCount);\n    const directionToElementIndex = new Int32Array(residueCount);\n    const moleculeType = new Uint8Array(residueCount);\n    const polymerType = new Uint8Array(residueCount);\n    const moleculeTypeMap = new Map();\n    const polymerTypeMap = new Map();\n    for (let i = 0; i < residueCount; ++i) {\n        const compId = label_comp_id.value(offsets[i]);\n        const chemCompMap = chemicalComponentMap;\n        let molType;\n        let polyType;\n        if (moleculeTypeMap.has(compId)) {\n            molType = moleculeTypeMap.get(compId);\n            polyType = polymerTypeMap.get(compId);\n        }\n        else {\n            let type;\n            if (chemCompMap.has(compId)) {\n                type = chemCompMap.get(compId).type;\n            }\n            else {\n                if (!isProductionMode)\n                    console.info('chemComp not found', compId);\n                type = getComponentType(compId);\n            }\n            molType = getMoleculeType(type, compId);\n            // TODO if unknown molecule type, use atom names to guess molecule type\n            polyType = getPolymerType(type, molType);\n            moleculeTypeMap.set(compId, molType);\n            polymerTypeMap.set(compId, polyType);\n        }\n        moleculeType[i] = molType;\n        polymerType[i] = polyType;\n        const traceAtomId = getAtomIdForAtomRole(polyType, 'trace');\n        let traceIndex = index.findAtomsOnResidue(i, traceAtomId);\n        if (traceIndex === -1) {\n            const coarseAtomId = getAtomIdForAtomRole(polyType, 'coarseBackbone');\n            traceIndex = index.findAtomsOnResidue(i, coarseAtomId);\n            if (traceIndex === -1 && isPolymer(molType)) {\n                traceIndex = index.findElementOnResidue(i, ElementSymbol('C'));\n            }\n        }\n        traceElementIndex[i] = traceIndex;\n        const directionFromAtomId = getAtomIdForAtomRole(polyType, 'directionFrom');\n        directionFromElementIndex[i] = index.findAtomsOnResidue(i, directionFromAtomId);\n        const directionToAtomId = getAtomIdForAtomRole(polyType, 'directionTo');\n        directionToElementIndex[i] = index.findAtomsOnResidue(i, directionToAtomId);\n    }\n    return {\n        atom: {\n            atomicNumber: atomicNumber\n        },\n        residue: {\n            traceElementIndex: traceElementIndex,\n            directionFromElementIndex: directionFromElementIndex,\n            directionToElementIndex: directionToElementIndex,\n            moleculeType: moleculeType,\n            polymerType: polymerType,\n        }\n    };\n}\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport function getCoarseIndex(data) {\n    return new Index(data);\n}\nclass EmptyIndex {\n    findElement(key, out) {\n        out.kind = undefined;\n        out.index = -1;\n        return false;\n    }\n    findSphereElement(key) {\n        return -1;\n    }\n    findGaussianElement(key) {\n        return -1;\n    }\n}\nexport const EmptyCoarseIndex = new EmptyIndex();\nclass Index {\n    get sphereMapping() {\n        if (!this._sphereMapping)\n            this._sphereMapping = buildMapping(this.data.spheres);\n        return this._sphereMapping;\n    }\n    get gaussianMapping() {\n        if (!this._gaussianMapping)\n            this._gaussianMapping = buildMapping(this.data.gaussians);\n        return this._gaussianMapping;\n    }\n    findSphereElement(key) {\n        var _a;\n        const mapping = this.sphereMapping;\n        let xs = mapping[key.label_entity_id];\n        if (!xs)\n            return -1;\n        xs = xs[key.label_asym_id];\n        if (!xs)\n            return -1;\n        return (_a = xs[key.label_seq_id]) !== null && _a !== void 0 ? _a : -1;\n    }\n    findGaussianElement(key) {\n        var _a;\n        const mapping = this.gaussianMapping;\n        let xs = mapping[key.label_entity_id];\n        if (!xs)\n            return -1;\n        xs = xs[key.label_asym_id];\n        if (!xs)\n            return -1;\n        return (_a = xs[key.label_seq_id]) !== null && _a !== void 0 ? _a : -1;\n    }\n    findElement(key, out) {\n        const sphere = this.findSphereElement(key);\n        if (sphere >= 0) {\n            out.kind = 'spheres';\n            out.index = sphere;\n            return true;\n        }\n        const gaussian = this.findGaussianElement(key);\n        if (gaussian >= 0) {\n            out.kind = 'gaussians';\n            out.index = gaussian;\n            return true;\n        }\n        return false;\n    }\n    constructor(data) {\n        this.data = data;\n        this._sphereMapping = void 0;\n        this._gaussianMapping = void 0;\n    }\n}\nfunction buildMapping({ count, entity_id, asym_id, seq_id_begin, seq_id_end }) {\n    const ret = {};\n    for (let i = 0; i < count; i++) {\n        const entityId = entity_id.value(i);\n        const asymId = asym_id.value(i);\n        if (!ret[entityId])\n            ret[entityId] = {};\n        if (!ret[entityId][asymId])\n            ret[entityId][asymId] = {};\n        const elements = ret[entityId][asymId];\n        const seqIdBegin = seq_id_begin.value(i);\n        const seqIdEnd = seq_id_end.value(i);\n        for (let seqId = seqIdBegin; seqId <= seqIdEnd; seqId++) {\n            elements[seqId] = i;\n        }\n    }\n    return ret;\n}\n","/**\n * Copyright (c) 2018-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column } from '../../../../../mol-data/db.js';\nimport { Segmentation } from '../../../../../mol-data/int.js';\nimport { SortedRanges } from '../../../../../mol-data/int/sorted-ranges.js';\nimport { EmptyCoarseIndex } from '../utils/coarse-index.js';\nconst EmptyCoarseElements = {\n    chainKey: [],\n    entityKey: [],\n    findSequenceKey: () => -1,\n    findChainKey: () => -1,\n    getEntityFromChain: () => -1,\n    count: 0,\n    entity_id: Column.Undefined(0, Column.Schema.str),\n    asym_id: Column.Undefined(0, Column.Schema.str),\n    seq_id_begin: Column.Undefined(0, Column.Schema.int),\n    seq_id_end: Column.Undefined(0, Column.Schema.int),\n    chainElementSegments: Segmentation.create([]),\n    polymerRanges: SortedRanges.ofSortedRanges([]),\n    gapRanges: SortedRanges.ofSortedRanges([]),\n};\nexport function CoarseElementReference() { return { kind: undefined, index: -1 }; }\nexport function CoarseElementKey() { return { label_entity_id: '', label_asym_id: '', label_seq_id: -1 }; }\nexport var CoarseHierarchy;\n(function (CoarseHierarchy) {\n    CoarseHierarchy.Empty = {\n        isDefined: false,\n        spheres: EmptyCoarseElements,\n        gaussians: EmptyCoarseElements,\n        index: EmptyCoarseIndex,\n    };\n})(CoarseHierarchy || (CoarseHierarchy = {}));\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SortedRanges } from '../../../../../mol-data/int/sorted-ranges.js';\nimport { OrderedSet } from '../../../../../mol-data/int.js';\nfunction getElementKey(map, key, counter) {\n    if (map.has(key))\n        return map.get(key);\n    const ret = counter.index++;\n    map.set(key, ret);\n    return ret;\n}\nfunction getElementSubstructureKeyMap(map, key) {\n    if (map.has(key))\n        return map.get(key);\n    const ret = new Map();\n    map.set(key, ret);\n    return ret;\n}\nfunction createLookUp(entities, chain, seq) {\n    const getEntKey = entities.getEntityIndex;\n    const findChainKey = (e, c) => {\n        const eKey = getEntKey(e);\n        if (eKey < 0)\n            return -1;\n        const cm = chain.get(eKey);\n        if (!cm.has(c))\n            return -1;\n        return cm.get(c);\n    };\n    const findSequenceKey = (e, c, s) => {\n        const eKey = getEntKey(e);\n        if (eKey < 0)\n            return -1;\n        const cm = chain.get(eKey);\n        if (cm === undefined)\n            return -1;\n        const cKey = cm.get(c);\n        if (cKey === undefined)\n            return -1;\n        const sm = seq.get(cKey);\n        const { elementIndices, seqRanges } = sm;\n        const idx = SortedRanges.firstIntersectionIndex(seqRanges, OrderedSet.ofSingleton(s));\n        return (idx !== -1 ? elementIndices[idx] : -1);\n    };\n    return { findChainKey, findSequenceKey };\n}\nfunction missingEntity(k) {\n    throw new Error(`Missing entity entry for entity id '${k}'.`);\n}\nexport function getCoarseKeys(data, entities) {\n    const { entity_id, asym_id, seq_id_begin, seq_id_end, count, chainElementSegments } = data;\n    const seqMaps = new Map();\n    const chainMaps = new Map(), chainCounter = { index: 0 };\n    const chainKey = new Int32Array(count);\n    const entityKey = new Int32Array(count);\n    const chainToEntity = new Int32Array(chainElementSegments.count);\n    for (let i = 0; i < count; i++) {\n        entityKey[i] = entities.getEntityIndex(entity_id.value(i));\n        if (entityKey[i] < 0)\n            missingEntity(entity_id.value(i));\n    }\n    for (let cI = 0; cI < chainElementSegments.count; cI++) {\n        const start = chainElementSegments.offsets[cI];\n        const end = chainElementSegments.offsets[cI + 1];\n        const eK = entityKey[start];\n        chainToEntity[cI] = eK;\n        const map = getElementSubstructureKeyMap(chainMaps, eK);\n        const key = getElementKey(map, asym_id.value(start), chainCounter);\n        for (let i = start; i < end; i++)\n            chainKey[i] = key;\n        // create seq_id map for the ranges defined by seq_id_begin and seq_id_end\n        const elementIndices = [];\n        const seqRanges = [];\n        for (let i = start; i < end; i++) {\n            const seqStart = seq_id_begin.value(i);\n            const seqEnd = seq_id_end.value(i);\n            elementIndices.push(i);\n            seqRanges.push(seqStart, seqEnd);\n        }\n        const seqMap = { elementIndices, seqRanges: SortedRanges.ofSortedRanges(seqRanges) };\n        seqMaps.set(key, seqMap);\n    }\n    const { findChainKey, findSequenceKey } = createLookUp(entities, chainMaps, seqMaps);\n    const getEntityFromChain = c => {\n        return chainToEntity[c];\n    };\n    return { chainKey, entityKey, findSequenceKey, findChainKey, getEntityFromChain };\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Segmentation, Interval } from '../../../../../mol-data/int.js';\nimport { SortedRanges } from '../../../../../mol-data/int/sorted-ranges.js';\n// TODO assumes all coarse elements are part of a polymer\n// TODO add gaps at the ends of the chains by comparing to the polymer sequence data\nexport function getCoarseRanges(data, chemicalComponentMap) {\n    const polymerRanges = [];\n    const gapRanges = [];\n    const chainIt = Segmentation.transientSegments(data.chainElementSegments, Interval.ofBounds(0, data.count));\n    const { seq_id_begin, seq_id_end } = data;\n    while (chainIt.hasNext) {\n        const { start, end } = chainIt.move();\n        let startIndex = -1;\n        let prevSeqEnd = -1;\n        for (let i = start; i < end; ++i) {\n            const seqEnd = seq_id_end.value(i);\n            if (i === start) {\n                startIndex = i;\n                prevSeqEnd = seq_id_end.value(i);\n            }\n            else {\n                if (seq_id_begin.value(i) - prevSeqEnd > 1) {\n                    polymerRanges.push(startIndex, i - 1);\n                    gapRanges.push(i - 1, i);\n                    startIndex = i;\n                }\n            }\n            if (i === end - 1) {\n                polymerRanges.push(startIndex, i);\n            }\n            prevSeqEnd = seqEnd;\n        }\n    }\n    return {\n        polymerRanges: SortedRanges.ofSortedRanges(polymerRanges),\n        gapRanges: SortedRanges.ofSortedRanges(gapRanges)\n    };\n}\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { CoarseHierarchy } from '../../../mol-model/structure/model/properties/coarse.js';\nimport { getCoarseKeys } from '../../../mol-model/structure/model/properties/utils/coarse-keys.js';\nimport { UUID } from '../../../mol-util/index.js';\nimport { Segmentation, Interval } from '../../../mol-data/int.js';\nimport { Mat3, Tensor } from '../../../mol-math/linear-algebra.js';\nimport { getCoarseRanges } from '../../../mol-model/structure/model/properties/utils/coarse-ranges.js';\nimport { BasicSchema } from './schema.js';\nimport { getCoarseIndex } from '../../../mol-model/structure/model/properties/utils/coarse-index.js';\nexport const EmptyCoarse = { hierarchy: CoarseHierarchy.Empty, conformation: void 0 };\nexport function getCoarse(data, chemicalComponentMap) {\n    const { ihm_sphere_obj_site, ihm_gaussian_obj_site } = data;\n    if (ihm_sphere_obj_site._rowCount === 0 && ihm_gaussian_obj_site._rowCount === 0)\n        return EmptyCoarse;\n    const sphereData = getData(ihm_sphere_obj_site);\n    const sphereConformation = getSphereConformation(ihm_sphere_obj_site);\n    const sphereKeys = getCoarseKeys(sphereData, data.entities);\n    const sphereRanges = getCoarseRanges(sphereData, chemicalComponentMap);\n    const gaussianData = getData(ihm_gaussian_obj_site);\n    const gaussianConformation = getGaussianConformation(ihm_gaussian_obj_site);\n    const gaussianKeys = getCoarseKeys(gaussianData, data.entities);\n    const gaussianRanges = getCoarseRanges(gaussianData, chemicalComponentMap);\n    return {\n        hierarchy: {\n            isDefined: true,\n            spheres: { ...sphereData, ...sphereKeys, ...sphereRanges },\n            gaussians: { ...gaussianData, ...gaussianKeys, ...gaussianRanges },\n            index: getCoarseIndex({ spheres: sphereData, gaussians: gaussianData })\n        },\n        conformation: {\n            id: UUID.create22(),\n            spheres: sphereConformation,\n            gaussians: gaussianConformation\n        }\n    };\n}\nfunction getSphereConformation(data) {\n    return {\n        x: data.Cartn_x.toArray({ array: Float32Array }),\n        y: data.Cartn_y.toArray({ array: Float32Array }),\n        z: data.Cartn_z.toArray({ array: Float32Array }),\n        radius: data.object_radius.toArray({ array: Float32Array }),\n        rmsf: data.rmsf.toArray({ array: Float32Array })\n    };\n}\nfunction getGaussianConformation(data) {\n    const matrix_space = BasicSchema.ihm_gaussian_obj_site.covariance_matrix.space;\n    const covariance_matrix = [];\n    const { covariance_matrix: cm } = data;\n    for (let i = 0, _i = cm.rowCount; i < _i; i++) {\n        covariance_matrix[i] = Tensor.toMat3(Mat3(), matrix_space, cm.value(i));\n    }\n    return {\n        x: data.mean_Cartn_x.toArray({ array: Float32Array }),\n        y: data.mean_Cartn_y.toArray({ array: Float32Array }),\n        z: data.mean_Cartn_z.toArray({ array: Float32Array }),\n        weight: data.weight.toArray({ array: Float32Array }),\n        covariance_matrix\n    };\n}\nfunction getSegments(asym_id, seq_id_begin, seq_id_end) {\n    const chainOffsets = [0];\n    for (let i = 1, _i = asym_id.rowCount; i < _i; i++) {\n        const newChain = !asym_id.areValuesEqual(i - 1, i);\n        if (newChain)\n            chainOffsets[chainOffsets.length] = i;\n    }\n    return {\n        chainElementSegments: Segmentation.ofOffsets(chainOffsets, Interval.ofBounds(0, asym_id.rowCount))\n    };\n}\nfunction getData(data) {\n    const { entity_id, seq_id_begin, seq_id_end, asym_id } = data;\n    return { count: entity_id.rowCount, entity_id, asym_id, seq_id_begin, seq_id_end, ...getSegments(asym_id, seq_id_begin, seq_id_end) };\n}\n","/**\n * Copyright (c) 2018-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { StructureSequence } from '../../../mol-model/structure/model/properties/sequence.js';\nimport { Column } from '../../../mol-data/db.js';\nimport { Sequence } from '../../../mol-model/sequence.js';\nexport function getSequence(data, entities, atomicHierarchy, coarseHierarchy) {\n    if (!data.entity_poly_seq || !data.entity_poly_seq._rowCount) {\n        return StructureSequence.fromHierarchy(entities, atomicHierarchy, coarseHierarchy);\n    }\n    const { entity_id, num, mon_id } = data.entity_poly_seq;\n    const byEntityKey = {};\n    const sequences = [];\n    const count = entity_id.rowCount;\n    let i = 0;\n    while (i < count) {\n        const start = i;\n        while (i < count - 1 && entity_id.areValuesEqual(i, i + 1))\n            i++;\n        i++;\n        const id = entity_id.value(start);\n        const compId = Column.window(mon_id, start, i);\n        const seqId = Column.window(num, start, i);\n        const entityKey = entities.getEntityIndex(id);\n        byEntityKey[entityKey] = {\n            entityId: id,\n            sequence: Sequence.ofResidueNames(compId, seqId)\n        };\n        sequences.push(byEntityKey[entityKey]);\n    }\n    return { byEntityKey, sequences };\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { createRangeArray, makeBuckets } from '../../../mol-data/util.js';\nimport { Column, Table } from '../../../mol-data/db.js';\nimport { arrayIsIdentity } from '../../../mol-util/array.js';\nexport async function sortAtomSite(ctx, atom_site, start, end) {\n    const indices = createRangeArray(start, end - 1);\n    const { label_entity_id, label_asym_id, label_seq_id } = atom_site;\n    const entityBuckets = makeBuckets(indices, label_entity_id.value);\n    if (ctx.shouldUpdate)\n        await ctx.update();\n    for (let ei = 0, _eI = entityBuckets.length - 1; ei < _eI; ei++) {\n        const chainBuckets = makeBuckets(indices, label_asym_id.value, { start: entityBuckets[ei], end: entityBuckets[ei + 1] });\n        for (let cI = 0, _cI = chainBuckets.length - 1; cI < _cI; cI++) {\n            const aI = chainBuckets[cI];\n            // are we in HETATM territory?\n            if (label_seq_id.valueKind(aI) !== Column.ValueKinds.Present)\n                continue;\n            makeBuckets(indices, label_seq_id.value, { sort: true, start: aI, end: chainBuckets[cI + 1] });\n            if (ctx.shouldUpdate)\n                await ctx.update();\n        }\n        if (ctx.shouldUpdate)\n            await ctx.update();\n    }\n    if (arrayIsIdentity(indices) && indices.length === atom_site._rowCount) {\n        return { atom_site, sourceIndex: Column.ofIntArray(indices) };\n    }\n    return {\n        atom_site: Table.view(atom_site, atom_site._schema, indices),\n        sourceIndex: Column.ofIntArray(indices)\n    };\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Segmentation, Interval } from '../../../../../mol-data/int.js';\nimport { SortedRanges } from '../../../../../mol-data/int/sorted-ranges.js';\nimport { isPolymer, PolymerType } from '../../types.js';\nimport { getAtomIdForAtomRole } from '../../../util.js';\nimport { Vec3 } from '../../../../../mol-math/linear-algebra.js';\nfunction areBackboneConnected(riStart, riEnd, conformation, index, derived) {\n    const { polymerType, traceElementIndex, directionFromElementIndex, directionToElementIndex } = derived.residue;\n    const ptStart = polymerType[riStart];\n    const ptEnd = polymerType[riEnd];\n    if (ptStart === PolymerType.NA || ptEnd === PolymerType.NA)\n        return false;\n    if (traceElementIndex[riStart] === -1 || traceElementIndex[riEnd] === -1)\n        return false;\n    let eiStart = index.findAtomsOnResidue(riStart, getAtomIdForAtomRole(ptStart, 'backboneStart'));\n    let eiEnd = index.findAtomsOnResidue(riEnd, getAtomIdForAtomRole(ptEnd, 'backboneEnd'));\n    if (eiStart === -1 || eiEnd === -1) {\n        eiStart = index.findAtomsOnResidue(riStart, getAtomIdForAtomRole(ptStart, 'coarseBackbone'));\n        eiEnd = index.findAtomsOnResidue(riEnd, getAtomIdForAtomRole(ptEnd, 'coarseBackbone'));\n    }\n    const { x, y, z } = conformation;\n    const pStart = Vec3.create(x[eiStart], y[eiStart], z[eiStart]);\n    const pEnd = Vec3.create(x[eiEnd], y[eiEnd], z[eiEnd]);\n    const isCoarse = directionFromElementIndex[riStart] === -1 || directionToElementIndex[riStart] === -1 || directionFromElementIndex[riEnd] === -1 || directionToElementIndex[riEnd] === -1;\n    return Vec3.distance(pStart, pEnd) < (isCoarse ? 10 : 3);\n}\nexport function getAtomicRanges(hierarchy, entities, conformation, sequence) {\n    const polymerRanges = [];\n    const gapRanges = [];\n    const cyclicPolymerMap = new Map();\n    const chainIt = Segmentation.transientSegments(hierarchy.chainAtomSegments, Interval.ofBounds(0, hierarchy.atoms._rowCount));\n    const residueIt = Segmentation.transientSegments(hierarchy.residueAtomSegments, Interval.ofBounds(0, hierarchy.atoms._rowCount));\n    const { index, derived } = hierarchy;\n    const { label_seq_id } = hierarchy.residues;\n    const { label_entity_id } = hierarchy.chains;\n    const { moleculeType, traceElementIndex } = derived.residue;\n    let prevSeqId;\n    let prevStart;\n    let prevEnd;\n    let startIndex;\n    while (chainIt.hasNext) {\n        const chainSegment = chainIt.move();\n        residueIt.setSegment(chainSegment);\n        prevSeqId = -1;\n        prevStart = -1;\n        prevEnd = -1;\n        startIndex = -1;\n        const eI = entities.getEntityIndex(label_entity_id.value(chainSegment.index));\n        const seq = sequence.byEntityKey[eI];\n        const maxSeqId = seq ? seq.sequence.seqId.value(seq.sequence.seqId.rowCount - 1) : -1;\n        // check cyclic peptides, seqIds and distance must be compatible\n        const riStart = hierarchy.residueAtomSegments.index[chainSegment.start];\n        const riEnd = hierarchy.residueAtomSegments.index[chainSegment.end - 1];\n        const seqIdStart = label_seq_id.value(riStart);\n        const seqIdEnd = label_seq_id.value(riEnd);\n        if (seqIdStart === 1 && seqIdEnd === maxSeqId && conformation.xyzDefined && areBackboneConnected(riStart, riEnd, conformation, index, derived)) {\n            cyclicPolymerMap.set(riStart, riEnd);\n            cyclicPolymerMap.set(riEnd, riStart);\n        }\n        while (residueIt.hasNext) {\n            const residueSegment = residueIt.move();\n            const residueIndex = residueSegment.index;\n            const seqId = label_seq_id.value(residueIndex);\n            // treat polymers residues that don't have a trace element resolved as gaps\n            if (isPolymer(moleculeType[residueIndex]) && traceElementIndex[residueIndex] !== -1) {\n                if (startIndex !== -1) {\n                    if (seqId !== prevSeqId + 1) {\n                        polymerRanges.push(startIndex, prevEnd - 1);\n                        gapRanges.push(prevStart, residueSegment.end - 1);\n                        startIndex = residueSegment.start;\n                    }\n                    else if (!residueIt.hasNext) {\n                        polymerRanges.push(startIndex, residueSegment.end - 1);\n                        // TODO store terminal gaps\n                    }\n                    else {\n                        const riStart = hierarchy.residueAtomSegments.index[residueSegment.start];\n                        const riEnd = hierarchy.residueAtomSegments.index[prevEnd - 1];\n                        if (conformation.xyzDefined && !areBackboneConnected(riStart, riEnd, conformation, hierarchy.index, derived)) {\n                            polymerRanges.push(startIndex, prevEnd - 1);\n                            // add gap even for consecutive residues if they are not connected\n                            gapRanges.push(prevStart, residueSegment.end - 1);\n                            startIndex = residueSegment.start;\n                        }\n                    }\n                }\n                else {\n                    startIndex = residueSegment.start; // start polymer\n                    // TODO store terminal gaps\n                }\n            }\n            else {\n                if (startIndex !== -1) {\n                    polymerRanges.push(startIndex, prevEnd - 1);\n                    startIndex = -1;\n                }\n            }\n            prevStart = residueSegment.start;\n            prevEnd = residueSegment.end;\n            prevSeqId = seqId;\n        }\n    }\n    return {\n        polymerRanges: SortedRanges.ofSortedRanges(polymerRanges),\n        gapRanges: SortedRanges.ofSortedRanges(gapRanges),\n        cyclicPolymerMap\n    };\n}\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Table } from '../../../mol-data/db.js';\nimport { getDefaultChemicalComponent, getMoleculeType, MoleculeType } from '../../../mol-model/structure/model/types.js';\nimport { SaccharideCompIdMap, SaccharidesSnfgMap, UnknownSaccharideComponent } from '../../../mol-model/structure/structure/carbohydrates/constants.js';\nimport { memoize1 } from '../../../mol-util/memoize.js';\nexport function getMissingResidues(data) {\n    const map = new Map();\n    const getKey = (model_num, asym_id, seq_id) => {\n        return `${model_num}|${asym_id}|${seq_id}`;\n    };\n    const c = data.pdbx_unobs_or_zero_occ_residues;\n    for (let i = 0, il = c._rowCount; i < il; ++i) {\n        const key = getKey(c.PDB_model_num.value(i), c.label_asym_id.value(i), c.label_seq_id.value(i));\n        map.set(key, { polymer_flag: c.polymer_flag.value(i), occupancy_flag: c.occupancy_flag.value(i) });\n    }\n    return {\n        has: (model_num, asym_id, seq_id) => {\n            return map.has(getKey(model_num, asym_id, seq_id));\n        },\n        get: (model_num, asym_id, seq_id) => {\n            return map.get(getKey(model_num, asym_id, seq_id));\n        },\n        size: map.size\n    };\n}\nexport function getChemicalComponentMap(data) {\n    const map = new Map();\n    if (data.chem_comp._rowCount > 0) {\n        const { id } = data.chem_comp;\n        for (let i = 0, il = id.rowCount; i < il; ++i) {\n            map.set(id.value(i), Table.getRow(data.chem_comp, i));\n        }\n    }\n    else {\n        const uniqueNames = getUniqueComponentNames(data);\n        uniqueNames.forEach(n => {\n            map.set(n, getDefaultChemicalComponent(n));\n        });\n    }\n    return map;\n}\nexport function getSaccharideComponentMap(data) {\n    const map = new Map();\n    if (data.pdbx_chem_comp_identifier._rowCount > 0) {\n        // note that `pdbx_chem_comp_identifier` does not contain\n        // a 'SNFG CARBOHYDRATE SYMBOL' entry for 'Unknown' saccharide components\n        // so we always need to check `chem_comp` for those\n        const { comp_id, type, identifier } = data.pdbx_chem_comp_identifier;\n        for (let i = 0, il = comp_id.rowCount; i < il; ++i) {\n            if (type.value(i) === 'SNFG CARBOHYDRATE SYMBOL' ||\n                type.value(i) === 'SNFG CARB SYMBOL' // legacy, to be removed from mmCIF dictionary\n            ) {\n                const snfgName = identifier.value(i);\n                const saccharideComp = SaccharidesSnfgMap.get(snfgName);\n                if (saccharideComp) {\n                    map.set(comp_id.value(i), saccharideComp);\n                }\n                else {\n                    console.warn(`Unknown SNFG name '${snfgName}'`);\n                }\n            }\n        }\n    }\n    if (data.chem_comp._rowCount > 0) {\n        const { id, type } = data.chem_comp;\n        for (let i = 0, il = id.rowCount; i < il; ++i) {\n            const _id = id.value(i);\n            if (map.has(_id))\n                continue;\n            const _type = type.value(i);\n            if (SaccharideCompIdMap.has(_id)) {\n                map.set(_id, SaccharideCompIdMap.get(_id));\n            }\n            else if (getMoleculeType(_type, _id) === MoleculeType.Saccharide) {\n                map.set(_id, UnknownSaccharideComponent);\n            }\n        }\n    }\n    else {\n        const uniqueNames = getUniqueComponentNames(data);\n        SaccharideCompIdMap.forEach((v, k) => {\n            if (!map.has(k) && uniqueNames.has(k))\n                map.set(k, v);\n        });\n    }\n    return map;\n}\nconst getUniqueComponentNames = memoize1((data) => {\n    const uniqueNames = new Set();\n    const { label_comp_id, auth_comp_id } = data.atom_site;\n    const comp_id = label_comp_id.isDefined ? label_comp_id : auth_comp_id;\n    for (let i = 0, il = comp_id.rowCount; i < il; ++i) {\n        uniqueNames.add(comp_id.value(i));\n    }\n    return uniqueNames;\n});\nexport function getStructAsymMap(atomic, data) {\n    const map = new Map();\n    const { auth_asym_id, label_asym_id, label_entity_id } = atomic.chains;\n    for (let i = 0, _i = atomic.chains._rowCount; i < _i; i++) {\n        const id = label_asym_id.value(i);\n        map.set(id, { id, auth_id: auth_asym_id.value(i), entity_id: label_entity_id.value(i) });\n    }\n    // to get asym mapping for coarse/ihm data\n    if (data === null || data === void 0 ? void 0 : data.struct_asym._rowCount) {\n        const { id, entity_id } = data.struct_asym;\n        for (let i = 0, il = id.rowCount; i < il; ++i) {\n            const _id = id.value(i);\n            if (!map.has(_id)) {\n                map.set(_id, {\n                    id: _id,\n                    auth_id: '',\n                    entity_id: entity_id.value(i)\n                });\n            }\n        }\n    }\n    return map;\n}\n","/**\n * Copyright (c) 2018-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nexport const EntitySubtype = Column.Schema.Aliased(Column.Schema.Str());\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, Table } from '../../../mol-data/db.js';\nimport { EntitySubtype } from '../../../mol-model/structure/model/properties/common.js';\nimport { getEntityType, getEntitySubtype } from '../../../mol-model/structure/model/types.js';\nimport { BasicSchema } from './schema.js';\nexport function getEntityData(data) {\n    let entityData;\n    if (!data.entity.id.isDefined) {\n        const entityIds = new Set();\n        const ids = [];\n        const types = [];\n        const { label_entity_id, label_comp_id } = data.atom_site;\n        for (let i = 0, il = data.atom_site._rowCount; i < il; i++) {\n            const entityId = label_entity_id.value(i);\n            if (!entityIds.has(entityId)) {\n                ids.push(entityId);\n                types.push(getEntityType(label_comp_id.value(i)));\n                entityIds.add(entityId);\n            }\n        }\n        const { entity_id: sphere_entity_id } = data.ihm_sphere_obj_site;\n        for (let i = 0, il = data.ihm_sphere_obj_site._rowCount; i < il; i++) {\n            const entityId = sphere_entity_id.value(i);\n            if (!entityIds.has(entityId)) {\n                ids.push(entityId);\n                types.push('polymer');\n                entityIds.add(entityId);\n            }\n        }\n        const { entity_id: gaussian_entity_id } = data.ihm_gaussian_obj_site;\n        for (let i = 0, il = data.ihm_gaussian_obj_site._rowCount; i < il; i++) {\n            const entityId = gaussian_entity_id.value(i);\n            if (!entityIds.has(entityId)) {\n                ids.push(entityId);\n                types.push('polymer');\n                entityIds.add(entityId);\n            }\n        }\n        entityData = Table.ofPartialColumns(BasicSchema.entity, {\n            id: Column.ofArray({ array: ids, schema: BasicSchema.entity.id }),\n            type: Column.ofArray({ array: types, schema: BasicSchema.entity.type }),\n        }, ids.length);\n    }\n    else {\n        entityData = data.entity;\n    }\n    const getEntityIndex = Column.createIndexer(entityData.id);\n    //\n    const subtypes = new Array(entityData._rowCount);\n    subtypes.fill('other');\n    const entityIds = new Set();\n    let assignSubtype = false;\n    if (data.entity_poly && data.entity_poly.type.isDefined) {\n        const { entity_id, type, _rowCount } = data.entity_poly;\n        for (let i = 0; i < _rowCount; ++i) {\n            const entityId = entity_id.value(i);\n            subtypes[getEntityIndex(entityId)] = type.value(i);\n            entityIds.add(entityId);\n        }\n    }\n    else {\n        assignSubtype = true;\n    }\n    if (data.pdbx_entity_branch && data.pdbx_entity_branch.entity_id.isDefined) {\n        const { entity_id, type, _rowCount } = data.pdbx_entity_branch;\n        for (let i = 0; i < _rowCount; ++i) {\n            const entityId = entity_id.value(i);\n            subtypes[getEntityIndex(entityId)] = type.value(i);\n            entityIds.add(entityId);\n        }\n    }\n    else {\n        assignSubtype = true;\n    }\n    if (entityIds.size < subtypes.length) {\n        // still unassigned subtypes, need to derive from component id/type\n        assignSubtype = true;\n    }\n    if (assignSubtype) {\n        const chemCompType = new Map();\n        if (data.chem_comp) {\n            const { id, type } = data.chem_comp;\n            for (let i = 0, il = data.chem_comp._rowCount; i < il; i++) {\n                chemCompType.set(id.value(i), type.value(i));\n            }\n        }\n        if (data.atom_site) {\n            const { label_entity_id, label_comp_id } = data.atom_site;\n            for (let i = 0, il = data.atom_site._rowCount; i < il; i++) {\n                const entityId = label_entity_id.value(i);\n                if (!entityIds.has(entityId)) {\n                    const compId = label_comp_id.value(i);\n                    const compType = chemCompType.get(compId) || 'other';\n                    subtypes[getEntityIndex(entityId)] = getEntitySubtype(compId, compType);\n                    entityIds.add(entityId);\n                }\n            }\n        }\n        // TODO how to handle coarse?\n    }\n    const subtypeColumn = Column.ofArray({ array: subtypes, schema: EntitySubtype });\n    return {\n        data: entityData,\n        subtype: subtypeColumn,\n        getEntityIndex\n    };\n}\nexport function getEntitiesWithPRD(data, entities, structAsymMap) {\n    var _a;\n    if (!data.pdbx_molecule || !data.pdbx_molecule.prd_id.isDefined) {\n        return entities;\n    }\n    const prdIds = new Array(entities.data._rowCount);\n    prdIds.fill('');\n    const { asym_id, prd_id, _rowCount } = data.pdbx_molecule;\n    for (let i = 0; i < _rowCount; ++i) {\n        const asymId = asym_id.value(i);\n        const entityId = (_a = structAsymMap.get(asymId)) === null || _a === void 0 ? void 0 : _a.entity_id;\n        if (entityId !== undefined) {\n            prdIds[entities.getEntityIndex(entityId)] = prd_id.value(i);\n        }\n    }\n    const prdIdColumn = Column.ofArray({ array: prdIds, schema: Column.Schema.str });\n    return {\n        ...entities,\n        prd_id: prdIdColumn\n    };\n}\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, Table } from '../../../mol-data/db.js';\nimport { UUID } from '../../../mol-util/uuid.js';\nimport { Model } from '../../../mol-model/structure/model/model.js';\nimport { CustomProperties } from '../../../mol-model/custom-property.js';\nimport { getAtomicHierarchyAndConformation } from './atomic.js';\nimport { getCoarse, EmptyCoarse } from './coarse.js';\nimport { getSequence } from './sequence.js';\nimport { sortAtomSite } from './sort.js';\nimport { getAtomicRanges } from '../../../mol-model/structure/model/properties/utils/atomic-ranges.js';\nimport { getChemicalComponentMap, getMissingResidues, getSaccharideComponentMap, getStructAsymMap } from './properties.js';\nimport { getEntitiesWithPRD, getEntityData } from './entities.js';\nimport { getModelGroupName } from './util.js';\nimport { ArrayTrajectory } from '../../../mol-model/structure/trajectory.js';\nexport async function createModels(data, format, ctx) {\n    const properties = getCommonProperties(data, format);\n    const models = data.ihm_model_list._rowCount > 0\n        ? await readIntegrative(ctx, data, properties, format)\n        : await readStandard(ctx, data, properties, format);\n    for (let i = 0; i < models.length; i++) {\n        Model.TrajectoryInfo.set(models[i], { index: i, size: models.length });\n    }\n    return new ArrayTrajectory(models);\n}\nfunction getCommonProperties(data, format) {\n    return {\n        missingResidues: getMissingResidues(data),\n        chemicalComponentMap: getChemicalComponentMap(data),\n        saccharideComponentMap: getSaccharideComponentMap(data)\n    };\n}\n/** Standard atomic model */\nfunction createStandardModel(data, atom_site, sourceIndex, entities, properties, format, previous) {\n    const atomic = getAtomicHierarchyAndConformation(atom_site, sourceIndex, entities, properties.chemicalComponentMap, format, previous);\n    const modelNum = atom_site.pdbx_PDB_model_num.value(0);\n    if (previous && atomic.sameAsPrevious) {\n        return {\n            ...previous,\n            id: UUID.create22(),\n            modelNum,\n            atomicConformation: atomic.conformation,\n            _dynamicPropertyData: Object.create(null)\n        };\n    }\n    const coarse = EmptyCoarse;\n    const sequence = getSequence(data, entities, atomic.hierarchy, coarse.hierarchy);\n    const atomicRanges = getAtomicRanges(atomic.hierarchy, entities, atomic.conformation, sequence);\n    const structAsymMap = getStructAsymMap(atomic.hierarchy);\n    const entry = data.entry.id.valueKind(0) === Column.ValueKinds.Present\n        ? data.entry.id.value(0) : format.name;\n    const label = [];\n    if (entry)\n        label.push(entry);\n    if (data.struct.title.valueKind(0) === Column.ValueKinds.Present)\n        label.push(data.struct.title.value(0));\n    return {\n        id: UUID.create22(),\n        entryId: entry,\n        label: label.join(' | '),\n        entry,\n        sourceData: format,\n        modelNum,\n        parent: undefined,\n        entities: getEntitiesWithPRD(data, entities, structAsymMap),\n        sequence,\n        atomicHierarchy: atomic.hierarchy,\n        atomicConformation: atomic.conformation,\n        atomicRanges,\n        atomicChainOperatorMappinng: atomic.chainOperatorMapping,\n        coarseHierarchy: coarse.hierarchy,\n        coarseConformation: coarse.conformation,\n        properties: {\n            ...properties,\n            structAsymMap\n        },\n        customProperties: new CustomProperties(),\n        _staticPropertyData: Object.create(null),\n        _dynamicPropertyData: Object.create(null)\n    };\n}\n/** Integrative model with atomic/coarse parts */\nfunction createIntegrativeModel(data, ihm, properties, format) {\n    const atomic = getAtomicHierarchyAndConformation(ihm.atom_site, ihm.atom_site_sourceIndex, ihm.entities, properties.chemicalComponentMap, format);\n    const coarse = getCoarse(ihm, properties.chemicalComponentMap);\n    const sequence = getSequence(data, ihm.entities, atomic.hierarchy, coarse.hierarchy);\n    const atomicRanges = getAtomicRanges(atomic.hierarchy, ihm.entities, atomic.conformation, sequence);\n    const entry = data.entry.id.valueKind(0) === Column.ValueKinds.Present\n        ? data.entry.id.value(0) : format.name;\n    const label = [];\n    if (entry)\n        label.push(entry);\n    if (data.struct.title.valueKind(0) === Column.ValueKinds.Present)\n        label.push(data.struct.title.value(0));\n    if (ihm.model_name)\n        label.push(ihm.model_name);\n    if (ihm.model_group_name)\n        label.push(ihm.model_group_name);\n    const structAsymMap = getStructAsymMap(atomic.hierarchy, data);\n    return {\n        id: UUID.create22(),\n        entryId: entry,\n        label: label.join(' | '),\n        entry,\n        sourceData: format,\n        modelNum: ihm.model_id,\n        parent: undefined,\n        entities: getEntitiesWithPRD(data, ihm.entities, structAsymMap),\n        sequence,\n        atomicHierarchy: atomic.hierarchy,\n        atomicConformation: atomic.conformation,\n        atomicRanges,\n        atomicChainOperatorMappinng: atomic.chainOperatorMapping,\n        coarseHierarchy: coarse.hierarchy,\n        coarseConformation: coarse.conformation,\n        properties: {\n            ...properties,\n            structAsymMap\n        },\n        customProperties: new CustomProperties(),\n        _staticPropertyData: Object.create(null),\n        _dynamicPropertyData: Object.create(null)\n    };\n}\nfunction findModelEnd(num, startIndex) {\n    const rowCount = num.rowCount;\n    if (!num.isDefined)\n        return rowCount;\n    let endIndex = startIndex + 1;\n    while (endIndex < rowCount && num.areValuesEqual(startIndex, endIndex))\n        endIndex++;\n    return endIndex;\n}\nasync function readStandard(ctx, data, properties, format) {\n    const models = [];\n    if (data.atom_site) {\n        const atomCount = data.atom_site.id.rowCount;\n        const entities = getEntityData(data);\n        let modelStart = 0;\n        while (modelStart < atomCount) {\n            const modelEnd = findModelEnd(data.atom_site.pdbx_PDB_model_num, modelStart);\n            const { atom_site, sourceIndex } = await sortAtomSite(ctx, data.atom_site, modelStart, modelEnd);\n            const model = createStandardModel(data, atom_site, sourceIndex, entities, properties, format, models.length > 0 ? models[models.length - 1] : void 0);\n            models.push(model);\n            modelStart = modelEnd;\n        }\n    }\n    return models;\n}\nfunction splitTable(table, col) {\n    const ret = new Map();\n    const rowCount = table._rowCount;\n    let modelStart = 0;\n    while (modelStart < rowCount) {\n        const modelEnd = findModelEnd(col, modelStart);\n        const id = col.value(modelStart);\n        ret.set(id, {\n            table: Table.window(table, table._schema, modelStart, modelEnd),\n            start: modelStart,\n            end: modelEnd\n        });\n        modelStart = modelEnd;\n    }\n    return ret;\n}\nasync function readIntegrative(ctx, data, properties, format) {\n    const entities = getEntityData(data);\n    // when `atom_site.ihm_model_id` is undefined fall back to `atom_site.pdbx_PDB_model_num`\n    const atom_sites_modelColumn = data.atom_site.ihm_model_id.isDefined\n        ? data.atom_site.ihm_model_id : data.atom_site.pdbx_PDB_model_num;\n    const atom_sites = splitTable(data.atom_site, atom_sites_modelColumn);\n    // TODO: will coarse IHM records require sorting or will we trust it?\n    // ==> Probably implement a sort as as well and store the sourceIndex same as with atomSite\n    // If the sorting is implemented, updated mol-model/structure/properties: atom.sourceIndex\n    const sphere_sites = splitTable(data.ihm_sphere_obj_site, data.ihm_sphere_obj_site.model_id);\n    const gauss_sites = splitTable(data.ihm_gaussian_obj_site, data.ihm_gaussian_obj_site.model_id);\n    const models = [];\n    if (data.ihm_model_list) {\n        const { model_id, model_name } = data.ihm_model_list;\n        for (let i = 0; i < data.ihm_model_list._rowCount; i++) {\n            const id = model_id.value(i);\n            let atom_site, atom_site_sourceIndex;\n            if (atom_sites.has(id)) {\n                const e = atom_sites.get(id);\n                // need to sort `data.atom_site` as `e.start` and `e.end` are indices into that\n                const { atom_site: sorted, sourceIndex } = await sortAtomSite(ctx, data.atom_site, e.start, e.end);\n                atom_site = sorted;\n                atom_site_sourceIndex = sourceIndex;\n            }\n            else {\n                atom_site = Table.window(data.atom_site, data.atom_site._schema, 0, 0);\n                atom_site_sourceIndex = Column.ofIntArray([]);\n            }\n            const ihm = {\n                model_id: id,\n                model_name: model_name.value(i),\n                model_group_name: getModelGroupName(id, data),\n                entities,\n                atom_site,\n                atom_site_sourceIndex,\n                ihm_sphere_obj_site: sphere_sites.has(id) ? sphere_sites.get(id).table : Table.window(data.ihm_sphere_obj_site, data.ihm_sphere_obj_site._schema, 0, 0),\n                ihm_gaussian_obj_site: gauss_sites.has(id) ? gauss_sites.get(id).table : Table.window(data.ihm_gaussian_obj_site, data.ihm_gaussian_obj_site._schema, 0, 0)\n            };\n            const model = createIntegrativeModel(data, ihm, properties, format);\n            models.push(model);\n        }\n    }\n    return models;\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/**\n * mmCIF parser.\n *\n * Trying to be as close to the specification http://www.iucr.org/resources/cif/spec/version1.1/cifsyntax\n *\n * Differences I'm aware of:\n * - Except keywords (data_, loop_, save_) everything is case sensitive.\n * - The tokens . and ? are treated the same as the values '.' and '?'.\n * - Ignores \\ in the multiline values:\n *     ;abc\\\n *     efg\n *     ;\n *   should have the value 'abcefg' but will have the value 'abc\\\\nefg' instead.\n *   Post processing of this is left to the consumer of the data.\n * - Similarly, things like punctuation (\\', ..) are left to be processed by the user if needed.\n *\n */\nimport * as Data from '../data-model.js';\nimport { TokenBuilder, Tokenizer } from '../../common/text/tokenizer.js';\nimport { ReaderResult as Result } from '../../result.js';\nimport { Task, chunkedSubtask } from '../../../../mol-task/index.js';\n/**\n * Types of supported mmCIF tokens.\n */\nvar CifTokenType;\n(function (CifTokenType) {\n    CifTokenType[CifTokenType[\"Data\"] = 0] = \"Data\";\n    CifTokenType[CifTokenType[\"Save\"] = 1] = \"Save\";\n    CifTokenType[CifTokenType[\"Loop\"] = 2] = \"Loop\";\n    CifTokenType[CifTokenType[\"Value\"] = 3] = \"Value\";\n    CifTokenType[CifTokenType[\"ColumnName\"] = 4] = \"ColumnName\";\n    CifTokenType[CifTokenType[\"Comment\"] = 5] = \"Comment\";\n    CifTokenType[CifTokenType[\"End\"] = 6] = \"End\";\n})(CifTokenType || (CifTokenType = {}));\n/**\n * Eat everything until a whitespace/newline occurs.\n */\nfunction eatValue(state) {\n    while (state.position < state.length) {\n        switch (state.data.charCodeAt(state.position)) {\n            case 9: // \\t\n            case 10: // \\n\n            case 13: // \\r\n            case 32: // ' '\n                state.tokenEnd = state.position;\n                return;\n            default:\n                ++state.position;\n                break;\n        }\n    }\n    state.tokenEnd = state.position;\n}\n/**\n * Eats an escaped value. Handles the \"degenerate\" cases as well.\n *\n * \"Degenerate\" cases:\n * - 'xx'x' => xx'x\n * - 'xxxNEWLINE => 'xxx\n *\n */\nfunction eatEscaped(state, esc) {\n    let next, c;\n    ++state.position;\n    while (state.position < state.length) {\n        c = state.data.charCodeAt(state.position);\n        if (c === esc) {\n            next = state.data.charCodeAt(state.position + 1);\n            switch (next) {\n                case 9: // \\t\n                case 10: // \\n\n                case 13: // \\r\n                case 32: // ' '\n                    // get rid of the quotes.\n                    state.tokenStart++;\n                    state.tokenEnd = state.position;\n                    state.isEscaped = true;\n                    ++state.position;\n                    return;\n                default:\n                    if (!Number.isFinite(next)) { // = \"end of stream\"\n                        // get rid of the quotes.\n                        state.tokenStart++;\n                        state.tokenEnd = state.position;\n                        state.isEscaped = true;\n                        ++state.position;\n                        return;\n                    }\n                    ++state.position;\n                    break;\n            }\n        }\n        else {\n            // handle 'xxxNEWLINE => 'xxx\n            if (c === 10 || c === 13) {\n                state.tokenEnd = state.position;\n                return;\n            }\n            ++state.position;\n        }\n    }\n    state.tokenEnd = state.position;\n}\n/**\n * Eats an escaped value \"triple quote\" (''') value.\n */\nfunction eatTripleQuote(state) {\n    // skip the '''\n    state.position += 3;\n    while (state.position < state.length) {\n        if (state.data.charCodeAt(state.position) === 39 /* ' */ && isTripleQuoteAtPosition(state)) {\n            // get rid of the quotes.\n            state.tokenStart += 3;\n            state.tokenEnd = state.position;\n            state.isEscaped = true;\n            state.position += 3;\n            return;\n        }\n        ++state.position;\n    }\n    state.tokenEnd = state.position;\n}\n/**\n * Eats a multiline token of the form NL;....NL;\n */\nfunction eatMultiline(state) {\n    let prev = 59, pos = state.position + 1, c;\n    while (pos < state.length) {\n        c = state.data.charCodeAt(pos);\n        if (c === 59 && (prev === 10 || prev === 13)) { // ;, \\n \\r\n            state.position = pos + 1;\n            // get rid of the ;\n            state.tokenStart++;\n            // remove trailing newlines\n            pos--;\n            c = state.data.charCodeAt(pos);\n            while (c === 10 || c === 13) {\n                pos--;\n                c = state.data.charCodeAt(pos);\n            }\n            state.tokenEnd = pos + 1;\n            state.isEscaped = true;\n            return;\n        }\n        else {\n            // handle line numbers\n            if (c === 13) { // \\r\n                state.lineNumber++;\n            }\n            else if (c === 10 && prev !== 13) { // \\r\\n\n                state.lineNumber++;\n            }\n            prev = c;\n            ++pos;\n        }\n    }\n    state.position = pos;\n    return prev;\n}\nfunction eatImportGet(state) {\n    // _import.get [{'save':orient_matrix  'file':templ_attr.cif}]\n    // skipWhitespace(state)\n    while (state.position < state.length) {\n        switch (state.data.charCodeAt(state.position)) {\n            case 93: // ]\n                ++state.position;\n                state.tokenEnd = state.position;\n                state.isImportGet = false;\n                return;\n            default:\n                ++state.position;\n                break;\n        }\n    }\n}\n/**\n * Skips until \\n or \\r occurs -- therefore the newlines get handled by the \"skipWhitespace\" function.\n */\nfunction skipCommentLine(state) {\n    while (state.position < state.length) {\n        const c = state.data.charCodeAt(state.position);\n        if (c === 10 || c === 13) {\n            return;\n        }\n        ++state.position;\n    }\n}\n/**\n * Skips all the whitespace - space, tab, newline, CR\n * Handles incrementing line count.\n */\nfunction skipWhitespace(state) {\n    let prev = 10;\n    while (state.position < state.length) {\n        const c = state.data.charCodeAt(state.position);\n        switch (c) {\n            case 9: // '\\t'\n            case 32: // ' '\n                prev = c;\n                ++state.position;\n                break;\n            case 10: // \\n\n                // handle \\r\\n\n                if (prev !== 13) {\n                    ++state.lineNumber;\n                }\n                prev = c;\n                ++state.position;\n                break;\n            case 13: // \\r\n                prev = c;\n                ++state.position;\n                ++state.lineNumber;\n                break;\n            default:\n                return prev;\n        }\n    }\n    return prev;\n}\n/**\n * Returns true if there are two consecutive ' in +1 and +2 positions.\n */\nfunction isTripleQuoteAtPosition(state) {\n    if (state.length - state.position < 2)\n        return false;\n    if (state.data.charCodeAt(state.position + 1) !== 39)\n        return false; // '\n    if (state.data.charCodeAt(state.position + 2) !== 39)\n        return false; // '\n    return true;\n}\nfunction isData(state) {\n    // here we already assume the 5th char is _ and that the length >= 5\n    // d/D\n    let c = state.data.charCodeAt(state.tokenStart);\n    if (c !== 68 && c !== 100)\n        return false;\n    // a/A\n    c = state.data.charCodeAt(state.tokenStart + 1);\n    if (c !== 65 && c !== 97)\n        return false;\n    // t/t\n    c = state.data.charCodeAt(state.tokenStart + 2);\n    if (c !== 84 && c !== 116)\n        return false;\n    // a/A\n    c = state.data.charCodeAt(state.tokenStart + 3);\n    if (c !== 65 && c !== 97)\n        return false;\n    return true;\n}\nfunction isSave(state) {\n    // here we already assume the 5th char is _ and that the length >= 5\n    // s/S\n    let c = state.data.charCodeAt(state.tokenStart);\n    if (c !== 83 && c !== 115)\n        return false;\n    // a/A\n    c = state.data.charCodeAt(state.tokenStart + 1);\n    if (c !== 65 && c !== 97)\n        return false;\n    // v/V\n    c = state.data.charCodeAt(state.tokenStart + 2);\n    if (c !== 86 && c !== 118)\n        return false;\n    // e/E\n    c = state.data.charCodeAt(state.tokenStart + 3);\n    if (c !== 69 && c !== 101)\n        return false;\n    return true;\n}\nfunction isLoop(state) {\n    // here we already assume the 5th char is _ and that the length >= 5\n    if (state.tokenEnd - state.tokenStart !== 5)\n        return false;\n    // l/L\n    let c = state.data.charCodeAt(state.tokenStart);\n    if (c !== 76 && c !== 108)\n        return false;\n    // o/O\n    c = state.data.charCodeAt(state.tokenStart + 1);\n    if (c !== 79 && c !== 111)\n        return false;\n    // o/O\n    c = state.data.charCodeAt(state.tokenStart + 2);\n    if (c !== 79 && c !== 111)\n        return false;\n    // p/P\n    c = state.data.charCodeAt(state.tokenStart + 3);\n    if (c !== 80 && c !== 112)\n        return false;\n    return true;\n}\nfunction isImportGet(state) {\n    // _import.get [{'save':orient_matrix  'file':templ_attr.cif}]\n    if (state.tokenEnd - state.tokenStart !== 11)\n        return false;\n    if (state.data.charCodeAt(state.tokenStart + 1) !== 105)\n        return false; // i\n    if (state.data.charCodeAt(state.tokenStart + 2) !== 109)\n        return false; // m\n    if (state.data.charCodeAt(state.tokenStart + 3) !== 112)\n        return false; // p\n    if (state.data.charCodeAt(state.tokenStart + 4) !== 111)\n        return false; // o\n    if (state.data.charCodeAt(state.tokenStart + 5) !== 114)\n        return false; // r\n    if (state.data.charCodeAt(state.tokenStart + 6) !== 116)\n        return false; // t\n    if (state.data.charCodeAt(state.tokenStart + 7) !== 46)\n        return false; // .\n    if (state.data.charCodeAt(state.tokenStart + 8) !== 103)\n        return false; // g\n    if (state.data.charCodeAt(state.tokenStart + 9) !== 101)\n        return false; // e\n    if (state.data.charCodeAt(state.tokenStart + 10) !== 116)\n        return false; // t\n    return true;\n}\n/**\n * Checks if the current token shares the namespace with string at <start,end).\n */\nfunction isNamespace(state, start, end) {\n    let i;\n    const nsLen = end - start;\n    const offset = state.tokenStart - start;\n    const tokenLen = state.tokenEnd - state.tokenStart;\n    if (tokenLen < nsLen)\n        return false;\n    for (i = start; i < end; ++i) {\n        if (state.data.charCodeAt(i) !== state.data.charCodeAt(i + offset))\n            return false;\n    }\n    if (nsLen === tokenLen)\n        return true;\n    if (state.data.charCodeAt(i + offset) === 46) { // .\n        return true;\n    }\n    return false;\n}\n/**\n * Returns the index of '.' in the current token. If no '.' is present, returns currentTokenEnd.\n */\nfunction getNamespaceEnd(state) {\n    let i;\n    for (i = state.tokenStart; i < state.tokenEnd; ++i) {\n        if (state.data.charCodeAt(i) === 46)\n            return i;\n    }\n    return i;\n}\n/**\n * Get the namespace string. endIndex is obtained by the getNamespaceEnd() function.\n */\nfunction getNamespace(state, endIndex) {\n    return state.data.substring(state.tokenStart, endIndex);\n}\n/**\n * Returns true if the current token contain no '.', otherwise returns false.\n */\nfunction isFlatNamespace(state) {\n    let i;\n    for (i = state.tokenStart; i < state.tokenEnd; ++i) {\n        if (state.data.charCodeAt(i) === 46)\n            return false;\n    }\n    return true;\n}\n/**\n * String representation of the current token.\n */\nfunction getTokenString(state) {\n    return state.data.substring(state.tokenStart, state.tokenEnd);\n}\n/**\n * Move to the next token.\n */\nfunction moveNextInternal(state) {\n    const prev = skipWhitespace(state);\n    if (state.position >= state.length) {\n        state.tokenType = CifTokenType.End;\n        return;\n    }\n    state.tokenStart = state.position;\n    state.tokenEnd = state.position;\n    state.isEscaped = false;\n    const c = state.data.charCodeAt(state.position);\n    switch (c) {\n        case 35: // #, comment\n            skipCommentLine(state);\n            state.tokenType = CifTokenType.Comment;\n            break;\n        case 39: // ', escaped value\n            if (isTripleQuoteAtPosition(state)) {\n                eatTripleQuote(state);\n                state.tokenType = CifTokenType.Value;\n                break;\n            }\n        case 34: // \", escaped value\n            eatEscaped(state, c);\n            state.tokenType = CifTokenType.Value;\n            break;\n        case 59: // ;, possible multiline value\n            // multiline value must start at the beginning of the line.\n            if (prev === 10 || prev === 13) { // /n or /r\n                eatMultiline(state);\n            }\n            else {\n                eatValue(state);\n            }\n            state.tokenType = CifTokenType.Value;\n            break;\n        default:\n            if (state.isImportGet) {\n                eatImportGet(state);\n            }\n            else {\n                eatValue(state);\n            }\n            // escaped is always Value\n            if (state.isEscaped) {\n                state.tokenType = CifTokenType.Value;\n                // _ means column name, including _import.get\n            }\n            else if (state.data.charCodeAt(state.tokenStart) === 95) { // _\n                if (state.inSaveFrame && isImportGet(state)) {\n                    state.isImportGet = true;\n                }\n                state.tokenType = CifTokenType.ColumnName;\n                // 5th char needs to be _ for data_, save_ or loop_\n            }\n            else if (state.tokenEnd - state.tokenStart >= 5 && state.data.charCodeAt(state.tokenStart + 4) === 95) {\n                if (isData(state))\n                    state.tokenType = CifTokenType.Data;\n                else if (isSave(state))\n                    state.tokenType = CifTokenType.Save;\n                else if (isLoop(state))\n                    state.tokenType = CifTokenType.Loop;\n                else\n                    state.tokenType = CifTokenType.Value;\n                // all other tests failed, we are at Value token.\n            }\n            else {\n                state.tokenType = CifTokenType.Value;\n            }\n            break;\n    }\n}\n/**\n * Moves to the next non-comment token.\n */\nfunction moveNext(state) {\n    moveNextInternal(state);\n    while (state.tokenType === CifTokenType.Comment)\n        moveNextInternal(state);\n}\nfunction createTokenizer(data, runtimeCtx) {\n    return {\n        data,\n        length: data.length,\n        position: 0,\n        tokenStart: 0,\n        tokenEnd: 0,\n        tokenType: CifTokenType.End,\n        lineNumber: 1,\n        isEscaped: false,\n        isImportGet: false,\n        inSaveFrame: false,\n        runtimeCtx\n    };\n}\nfunction FrameContext() {\n    return { categoryNames: [], categoryData: Object.create(null) };\n}\nfunction CifCategories(categoryNames, categoryData) {\n    const categories = Object.create(null);\n    for (const name of categoryNames) {\n        const d = categoryData[name];\n        categories[name] = Data.CifCategory(d.name, d.rowCount, d.fieldNames, d.fields);\n    }\n    return categories;\n}\nfunction CifBlock(ctx, header, saveFrames) {\n    return Data.CifBlock(ctx.categoryNames, CifCategories(ctx.categoryNames, ctx.categoryData), header, saveFrames);\n}\nfunction CifSaveFrame(ctx, header) {\n    return Data.CifBlock(ctx.categoryNames, CifCategories(ctx.categoryNames, ctx.categoryData), header);\n}\nfunction addFields(ctx, name, rowCount, fieldNames, fields) {\n    if (name in ctx.categoryData) {\n        const cat = ctx.categoryData[name];\n        cat.fieldNames.push(...fieldNames);\n        Object.assign(cat.fields, fields);\n    }\n    else {\n        ctx.categoryData[name] = { name, rowCount, fieldNames, fields };\n        ctx.categoryNames.push(name);\n    }\n}\n/**\n * Reads a category containing a single row.\n */\nfunction handleSingle(tokenizer, ctx) {\n    const nsStart = tokenizer.tokenStart, nsEnd = getNamespaceEnd(tokenizer);\n    const name = getNamespace(tokenizer, nsEnd);\n    const fields = Object.create(null);\n    const fieldNames = [];\n    let readingNames = true;\n    while (readingNames) {\n        if (tokenizer.tokenType !== CifTokenType.ColumnName || !isNamespace(tokenizer, nsStart, nsEnd)) {\n            readingNames = false;\n            break;\n        }\n        const fieldName = getTokenString(tokenizer).substring(name.length + 1);\n        moveNext(tokenizer);\n        if (tokenizer.tokenType !== CifTokenType.Value) {\n            return {\n                hasError: true,\n                errorLine: tokenizer.lineNumber,\n                errorMessage: 'Expected value.'\n            };\n        }\n        fields[fieldName] = Data.CifField.ofTokens({ data: tokenizer.data, indices: [tokenizer.tokenStart, tokenizer.tokenEnd], count: 1 });\n        fieldNames[fieldNames.length] = fieldName;\n        moveNext(tokenizer);\n    }\n    addFields(ctx, name.substr(1), 1, fieldNames, fields);\n    return {\n        hasError: false,\n        errorLine: 0,\n        errorMessage: ''\n    };\n}\nfunction readLoopChunk(chunkSize, state) {\n    const { tokenizer, tokens, fieldCount } = state;\n    let tokenCount = state.tokenCount;\n    let counter = 0;\n    while (tokenizer.tokenType === CifTokenType.Value && counter < chunkSize) {\n        TokenBuilder.add(tokens[(tokenCount++) % fieldCount], tokenizer.tokenStart, tokenizer.tokenEnd);\n        moveNext(tokenizer);\n        counter++;\n    }\n    state.tokenCount = tokenCount;\n    return counter;\n}\nfunction updateLoopChunk(ctx, state) {\n    return ctx.update({ message: 'Parsing...', current: state.tokenizer.position, max: state.tokenizer.data.length });\n}\n// const readLoopChunks = ChunkedSubtask(1000000,\n//     (size, state: LoopReadState) => readLoopChunk(state, size),\n//     (ctx, state) => ctx.update({ message: 'Parsing...', current: state.tokenizer.position, max: state.tokenizer.data.length }));\n/**\n * Reads a loop.\n */\nasync function handleLoop(tokenizer, ctx) {\n    const loopLine = tokenizer.lineNumber;\n    moveNext(tokenizer);\n    const name = getNamespace(tokenizer, getNamespaceEnd(tokenizer));\n    const isFlat = isFlatNamespace(tokenizer);\n    const fieldNames = [];\n    while (tokenizer.tokenType === CifTokenType.ColumnName) {\n        fieldNames[fieldNames.length] = isFlat\n            ? getTokenString(tokenizer)\n            : getTokenString(tokenizer).substring(name.length + 1);\n        moveNext(tokenizer);\n    }\n    const rowCountEstimate = name === '_atom_site' ? (tokenizer.data.length / 100) | 0 : 32;\n    const tokens = [];\n    const fieldCount = fieldNames.length;\n    for (let i = 0; i < fieldCount; i++)\n        tokens[i] = TokenBuilder.create(tokenizer.data, rowCountEstimate);\n    const state = {\n        fieldCount,\n        tokenCount: 0,\n        tokenizer,\n        tokens\n    };\n    await chunkedSubtask(tokenizer.runtimeCtx, 1000000, state, readLoopChunk, updateLoopChunk);\n    if (state.tokenCount % fieldCount !== 0) {\n        return {\n            hasError: true,\n            errorLine: tokenizer.lineNumber,\n            errorMessage: `The number of values for loop starting at line ${loopLine} is not a multiple of the number of columns.`\n        };\n    }\n    const rowCount = (state.tokenCount / fieldCount) | 0;\n    if (isFlat) {\n        for (let i = 0; i < fieldCount; i++) {\n            const fields = { '': Data.CifField.ofTokens(tokens[i]) };\n            addFields(ctx, fieldNames[i].substr(1), rowCount, [''], fields);\n        }\n    }\n    else {\n        const fields = Object.create(null);\n        for (let i = 0; i < fieldCount; i++) {\n            fields[fieldNames[i]] = Data.CifField.ofTokens(tokens[i]);\n        }\n        addFields(ctx, name.substr(1), rowCount, fieldNames, fields);\n    }\n    return {\n        hasError: false,\n        errorLine: 0,\n        errorMessage: ''\n    };\n}\n/**\n * Creates an error result.\n */\nfunction error(line, message) {\n    return Result.error(message, line);\n}\n/**\n * Creates a data result.\n */\nfunction result(data) {\n    return Result.success(data);\n}\n/**\n * Parses an mmCIF file.\n *\n * @returns CifParserResult wrapper of the result.\n */\nasync function parseInternal(data, runtimeCtx) {\n    const dataBlocks = [];\n    const tokenizer = createTokenizer(data, runtimeCtx);\n    let blockHeader = '';\n    let blockCtx = FrameContext();\n    // the next three initial values are never used in valid files\n    let saveFrames = [];\n    let saveCtx = FrameContext();\n    const saveFrame = Data.CifSaveFrame(saveCtx.categoryNames, CifCategories(saveCtx.categoryNames, saveCtx.categoryData), '');\n    let saveHeader = '';\n    runtimeCtx.update({ message: 'Parsing...', current: 0, max: data.length });\n    moveNext(tokenizer);\n    while (tokenizer.tokenType !== CifTokenType.End) {\n        const token = tokenizer.tokenType;\n        // Data block\n        if (token === CifTokenType.Data) {\n            if (tokenizer.inSaveFrame) {\n                return error(tokenizer.lineNumber, 'Unexpected data block inside a save frame.');\n            }\n            if (blockCtx.categoryNames.length > 0) {\n                dataBlocks.push(CifBlock(blockCtx, blockHeader, saveFrames));\n            }\n            blockHeader = data.substring(tokenizer.tokenStart + 5, tokenizer.tokenEnd);\n            blockCtx = FrameContext();\n            saveFrames = [];\n            moveNext(tokenizer);\n            // Save frame\n        }\n        else if (token === CifTokenType.Save) {\n            if (tokenizer.tokenEnd - tokenizer.tokenStart === 5) { // end of save frame\n                if (saveCtx.categoryNames.length > 0) {\n                    saveFrames[saveFrames.length] = CifSaveFrame(saveCtx, saveHeader);\n                }\n                tokenizer.inSaveFrame = false;\n            }\n            else { // start of save frame\n                if (tokenizer.inSaveFrame) {\n                    return error(tokenizer.lineNumber, 'Save frames cannot be nested.');\n                }\n                tokenizer.inSaveFrame = true;\n                saveHeader = data.substring(tokenizer.tokenStart + 5, tokenizer.tokenEnd);\n                saveCtx = FrameContext();\n                // saveFrame = CifSaveFrame(saveCtx, saveHeader);\n            }\n            moveNext(tokenizer);\n            // Loop\n        }\n        else if (token === CifTokenType.Loop) {\n            const cat = await handleLoop(tokenizer, tokenizer.inSaveFrame ? saveCtx : blockCtx);\n            if (cat.hasError) {\n                return error(cat.errorLine, cat.errorMessage);\n            }\n            // Single row\n        }\n        else if (token === CifTokenType.ColumnName) {\n            const cat = handleSingle(tokenizer, tokenizer.inSaveFrame ? saveCtx : blockCtx);\n            if (cat.hasError) {\n                return error(cat.errorLine, cat.errorMessage);\n            }\n            // Out of options\n        }\n        else {\n            console.log(tokenizer.tokenType, Tokenizer.getTokenString(tokenizer));\n            return error(tokenizer.lineNumber, 'Unexpected token. Expected data_, loop_, or data name.');\n        }\n    }\n    // Check if the latest save frame was closed.\n    if (tokenizer.inSaveFrame) {\n        return error(tokenizer.lineNumber, `Unfinished save frame (${saveFrame.header}).`);\n    }\n    if (blockCtx.categoryNames.length > 0 || saveFrames.length > 0) {\n        dataBlocks.push(CifBlock(blockCtx, blockHeader, saveFrames));\n    }\n    return result(Data.CifFile(dataBlocks));\n}\nexport function parseCifText(data) {\n    return Task.create('Parse CIF', async (ctx) => {\n        return await parseInternal(data, ctx);\n    });\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport * as Data from '../data-model.js';\nimport { Field } from './field.js';\nimport { ReaderResult as Result } from '../../result.js';\nimport { decodeMsgPack } from '../../../common/msgpack/decode.js';\nimport { Task } from '../../../../mol-task/index.js';\nfunction checkVersions(min, current) {\n    for (let i = 0; i < 2; i++) {\n        if (min[i] > current[i])\n            return false;\n    }\n    return true;\n}\nfunction Category(data) {\n    const map = Object.create(null);\n    const cache = Object.create(null);\n    for (const col of data.columns)\n        map[col.name] = col;\n    return {\n        rowCount: data.rowCount,\n        name: data.name.substring(1),\n        fieldNames: data.columns.map(c => c.name),\n        getField(name) {\n            const col = map[name];\n            if (!col)\n                return void 0;\n            if (!!cache[name])\n                return cache[name];\n            cache[name] = Field(col);\n            return cache[name];\n        }\n    };\n}\nexport function parseCifBinary(data) {\n    return Task.create('Parse BinaryCIF', async (ctx) => {\n        const minVersion = [0, 3];\n        try {\n            const unpacked = decodeMsgPack(data);\n            if (!checkVersions(minVersion, unpacked.version.match(/(\\d)\\.(\\d)\\.\\d/).slice(1).map(v => +v))) {\n                return Result.error(`Unsupported format version. Current ${unpacked.version}, required ${minVersion.join('.')}.`);\n            }\n            const file = Data.CifFile(unpacked.dataBlocks.map(block => {\n                const cats = Object.create(null);\n                for (const cat of block.categories)\n                    cats[cat.name.substring(1)] = Category(cat);\n                return Data.CifBlock(block.categories.map(c => c.name.substring(1)), cats, block.header);\n            }));\n            return Result.success(file);\n        }\n        catch (e) {\n            return Result.error('' + e);\n        }\n    });\n}\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, ColumnHelpers } from '../../../../mol-data/db.js';\nimport { decode } from '../../../common/binary-cif.js';\nimport { parseInt as fastParseInt, parseFloat as fastParseFloat } from '../../common/text/number-parser.js';\nexport function Field(column) {\n    const mask = column.mask ? decode(column.mask) : void 0;\n    const data = decode(column.data);\n    const isNumeric = ColumnHelpers.isTypedArray(data);\n    const str = isNumeric\n        ? mask\n            ? row => mask[row] === Column.ValueKinds.Present ? '' + data[row] : ''\n            : row => '' + data[row]\n        : mask\n            ? row => mask[row] === Column.ValueKinds.Present ? data[row] : ''\n            : row => data[row];\n    const int = isNumeric\n        ? row => data[row]\n        : row => { const v = data[row]; return fastParseInt(v, 0, v.length); };\n    const float = isNumeric\n        ? row => data[row]\n        : row => { const v = data[row]; return fastParseFloat(v, 0, v.length); };\n    const valueKind = mask\n        ? row => mask[row]\n        : row => Column.ValueKinds.Present;\n    const rowCount = data.length;\n    return {\n        __array: data,\n        binaryEncoding: column.data.encoding,\n        isDefined: true,\n        rowCount,\n        str,\n        int,\n        float,\n        valueKind,\n        areValuesEqual: (rowA, rowB) => data[rowA] === data[rowB],\n        toStringArray: params => ColumnHelpers.createAndFillArray(rowCount, str, params),\n        toIntArray: isNumeric\n            ? params => ColumnHelpers.typedArrayWindow(data, params)\n            : params => ColumnHelpers.createAndFillArray(rowCount, int, params),\n        toFloatArray: isNumeric\n            ? params => ColumnHelpers.typedArrayWindow(data, params)\n            : params => ColumnHelpers.createAndFillArray(rowCount, float, params)\n    };\n}\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Code-generated 'CCD' schema file. Dictionary versions: mmCIF 5.407, IHM 1.28, MA 1.4.8.\n *\n * @author molstar/ciftools package\n */\nimport { Column } from '../../../../mol-data/db.js';\nvar Schema = Column.Schema;\nconst str = Schema.str;\nconst float = Schema.float;\nconst List = Schema.List;\nconst lstr = Schema.lstr;\nconst Aliased = Schema.Aliased;\nconst int = Schema.int;\nconst coord = Schema.coord;\nexport const CCD_Schema = {\n    /**\n     * Data items in the CHEM_COMP category give details about each\n     * of the chemical components from which the relevant chemical\n     * structures can be constructed, such as name, mass or charge.\n     *\n     * The related categories CHEM_COMP_ATOM, CHEM_COMP_BOND,\n     * CHEM_COMP_ANGLE etc. describe the detailed geometry of these\n     * chemical components.\n     */\n    chem_comp: {\n        /**\n         * The formula for the chemical component. Formulae are written\n         * according to the following rules:\n         *\n         * (1) Only recognized element symbols may be used.\n         *\n         * (2) Each element symbol is followed by a 'count' number. A count\n         * of '1' may be omitted.\n         *\n         * (3) A space or parenthesis must separate each cluster of\n         * (element symbol + count), but in general parentheses are\n         * not used.\n         *\n         * (4) The order of elements depends on whether carbon is\n         * present or not. If carbon is present, the order should be:\n         * C, then H, then the other elements in alphabetical order\n         * of their symbol. If carbon is not present, the elements\n         * are listed purely in alphabetic order of their symbol. This\n         * is the 'Hill' system used by Chemical Abstracts.\n         */\n        formula: str,\n        /**\n         * Formula mass in daltons of the chemical component.\n         */\n        formula_weight: float,\n        /**\n         * The value of _chem_comp.id must uniquely identify each item in\n         * the CHEM_COMP list.\n         *\n         * For protein polymer entities, this is the three-letter code for\n         * the amino acid.\n         *\n         * For nucleic acid polymer entities, this is the one-letter code\n         * for the base.\n         */\n        id: str,\n        /**\n         * The identifier for the parent component of the nonstandard\n         * component. May be be a comma separated list if this component\n         * is derived from multiple components.\n         *\n         * Items in this indirectly point to _chem_comp.id in\n         * the CHEM_COMP category.\n         */\n        mon_nstd_parent_comp_id: List(',', x => x),\n        /**\n         * The full name of the component.\n         */\n        name: str,\n        /**\n         * For standard polymer components, the one-letter code for\n         * the component.   For non-standard polymer components, the\n         * one-letter code for parent component if this exists;\n         * otherwise, the one-letter code should be given as 'X'.\n         *\n         * Components that derived from multiple parents components\n         * are described by a sequence of one-letter-codes.\n         */\n        one_letter_code: str,\n        /**\n         * For standard polymer components, the common three-letter code for\n         * the component.   Non-standard polymer components and non-polymer\n         * components are also assigned three-letter-codes.\n         *\n         * For ambiguous polymer components three-letter code should\n         * be given as 'UNK'.  Ambiguous ions are assigned the code 'UNX'.\n         * Ambiguous non-polymer components are assigned the code 'UNL'.\n         */\n        three_letter_code: str,\n        /**\n         * For standard polymer components, the type of the monomer.\n         * Note that monomers that will form polymers are of three types:\n         * linking monomers, monomers with some type of N-terminal (or 5')\n         * cap and monomers with some type of C-terminal (or 3') cap.\n         */\n        type: Aliased(lstr),\n        /**\n         * Synonym list for the component.\n         */\n        pdbx_synonyms: List(';', x => x),\n        /**\n         * A preliminary classification used by PDB.\n         */\n        pdbx_type: str,\n        /**\n         * A preliminary classification used by PDB to indicate\n         * that the chemistry of this component while described\n         * as clearly as possible is still ambiguous.  Software\n         * tools may not be able to process this component\n         * definition.\n         */\n        pdbx_ambiguous_flag: str,\n        /**\n         * Identifies the _chem_comp.id of the component that\n         * has replaced this component.\n         */\n        pdbx_replaced_by: str,\n        /**\n         * Identifies the _chem_comp.id's of the components\n         * which have been replaced by this component.\n         * Multiple id codes should be separated by commas.\n         */\n        pdbx_replaces: str,\n        /**\n         * The net integer charge assigned to this component. This is the\n         * formal charge assignment normally found in chemical diagrams.\n         */\n        pdbx_formal_charge: int,\n        /**\n         * This data item provides additional details about the model coordinates\n         * in the component definition.\n         */\n        pdbx_model_coordinates_details: str,\n        /**\n         * This data item identifies the PDB database code from which the heavy\n         * atom model coordinates were obtained.\n         */\n        pdbx_model_coordinates_db_code: str,\n        /**\n         * This data item identifies the source of the ideal coordinates in the\n         * component definition.\n         */\n        pdbx_ideal_coordinates_details: str,\n        /**\n         * This data item identifies if ideal coordinates are missing in this definition.\n         */\n        pdbx_ideal_coordinates_missing_flag: Aliased(lstr),\n        /**\n         * This data item identifies if model coordinates are missing in this definition.\n         */\n        pdbx_model_coordinates_missing_flag: Aliased(lstr),\n        /**\n         * Date component was added to database.\n         */\n        pdbx_initial_date: str,\n        /**\n         * Date component was last modified.\n         */\n        pdbx_modified_date: str,\n        /**\n         * This data item holds the current release status for the component.\n         */\n        pdbx_release_status: Aliased(str),\n        /**\n         * This data item identifies the deposition site that processed\n         * this chemical component defintion.\n         */\n        pdbx_processing_site: Aliased(str),\n    },\n    /**\n     * Data items in the CHEM_COMP_ATOM category record details about\n     * the atoms in a chemical component. Specifying the atomic\n     * coordinates for the components in this category is an\n     * alternative to specifying the structure of the component\n     * via bonds, angles, planes etc. in the appropriate\n     * CHEM_COMP subcategories.\n     */\n    chem_comp_atom: {\n        /**\n         * An alternative identifier for the atom. This data item would be\n         * used in cases where alternative nomenclatures exist for labelling\n         * atoms in a group.\n         */\n        alt_atom_id: str,\n        /**\n         * The value of _chem_comp_atom.atom_id must uniquely identify\n         * each atom in each monomer in the CHEM_COMP_ATOM list.\n         *\n         * The atom identifiers need not be unique over all atoms in the\n         * data block; they need only be unique for each atom in a\n         * component.\n         *\n         * Note that this item need not be a number; it can be any unique\n         * identifier.\n         */\n        atom_id: str,\n        /**\n         * The net integer charge assigned to this atom. This is the\n         * formal charge assignment normally found in chemical diagrams.\n         */\n        charge: int,\n        /**\n         * The x component of the coordinates for this atom in this\n         * component specified as orthogonal angstroms. The choice of\n         * reference axis frame for the coordinates is arbitrary.\n         *\n         * The set of coordinates input for the entity here is intended to\n         * correspond to the atomic model used to generate restraints for\n         * structure refinement, not to atom sites in the ATOM_SITE\n         * list.\n         */\n        model_Cartn_x: coord,\n        /**\n         * The y component of the coordinates for this atom in this\n         * component specified as orthogonal angstroms. The choice of\n         * reference axis frame for the coordinates is arbitrary.\n         *\n         * The set of coordinates input for the entity here is intended to\n         * correspond to the atomic model used to generate restraints for\n         * structure refinement, not to atom sites in the ATOM_SITE\n         * list.\n         */\n        model_Cartn_y: coord,\n        /**\n         * The z component of the coordinates for this atom in this\n         * component specified as orthogonal angstroms. The choice of\n         * reference axis frame for the coordinates is arbitrary.\n         *\n         * The set of coordinates input for the entity here is intended to\n         * correspond to the atomic model used to generate restraints for\n         * structure refinement, not to atom sites in the ATOM_SITE\n         * list.\n         */\n        model_Cartn_z: coord,\n        /**\n         * This data item is a pointer to _chem_comp.id in the CHEM_COMP\n         * category.\n         */\n        comp_id: str,\n        /**\n         * The code used to identify the atom species representing\n         * this atom type. Normally this code is the element\n         * symbol.\n         */\n        type_symbol: str,\n        /**\n         * Atom name alignment offset in PDB atom field.\n         */\n        pdbx_align: int,\n        /**\n         * Ordinal index for the component atom list.\n         */\n        pdbx_ordinal: int,\n        /**\n         * An alternative x component of the coordinates for this atom in this\n         * component specified as orthogonal angstroms.\n         */\n        pdbx_model_Cartn_x_ideal: coord,\n        /**\n         * An alternative y component of the coordinates for this atom in this\n         * component specified as orthogonal angstroms.\n         */\n        pdbx_model_Cartn_y_ideal: coord,\n        /**\n         * An alternative z component of the coordinates for this atom in this\n         * component specified as orthogonal angstroms.\n         */\n        pdbx_model_Cartn_z_ideal: coord,\n        /**\n         * The chiral configuration of the atom that is a chiral center.\n         */\n        pdbx_stereo_config: Aliased(lstr),\n        /**\n         * A flag indicating an aromatic atom.\n         */\n        pdbx_aromatic_flag: Aliased(lstr),\n        /**\n         * A flag indicating a leaving atom.\n         */\n        pdbx_leaving_atom_flag: Aliased(lstr),\n    },\n    /**\n     * Data items in the CHEM_COMP_BOND category record details about\n     * the bonds between atoms in a chemical component. Target values\n     * may be specified as bond orders, as a distance between the two\n     * atoms, or both.\n     */\n    chem_comp_bond: {\n        /**\n         * The ID of the first of the two atoms that define the bond.\n         *\n         * This data item is a pointer to _chem_comp_atom.atom_id in the\n         * CHEM_COMP_ATOM category.\n         */\n        atom_id_1: str,\n        /**\n         * The ID of the second of the two atoms that define the bond.\n         *\n         * This data item is a pointer to _chem_comp_atom.atom_id in the\n         * CHEM_COMP_ATOM category.\n         */\n        atom_id_2: str,\n        /**\n         * This data item is a pointer to _chem_comp.id in the CHEM_COMP\n         * category.\n         */\n        comp_id: str,\n        /**\n         * The value that should be taken as the target for the chemical\n         * bond associated with the specified atoms, expressed as a bond\n         * order.\n         */\n        value_order: Aliased(lstr),\n        /**\n         * Ordinal index for the component bond list.\n         */\n        pdbx_ordinal: int,\n        /**\n         * Stereochemical configuration across a double bond.\n         */\n        pdbx_stereo_config: Aliased(lstr),\n        /**\n         * A flag indicating an aromatic bond.\n         */\n        pdbx_aromatic_flag: Aliased(lstr),\n    },\n    /**\n     * Data items in the CHEM_COMP_DESCRIPTOR category provide\n     * string descriptors of component chemical structure.\n     */\n    pdbx_chem_comp_descriptor: {\n        /**\n         * This data item is a pointer to _chem_comp.id in the CHEM_COMP\n         * category.\n         */\n        comp_id: str,\n        /**\n         * This data item contains the descriptor value for this\n         * component.\n         */\n        descriptor: str,\n        /**\n         * This data item contains the descriptor type.\n         */\n        type: Aliased(lstr),\n        /**\n         * This data item contains the name of the program\n         * or library used to compute the descriptor.\n         */\n        program: str,\n        /**\n         * This data item contains the version of the program\n         * or library used to compute the descriptor.\n         */\n        program_version: str,\n    },\n    /**\n     * Data items in the CHEM_COMP_IDENTIFIER category provide\n     * identifiers for chemical components.\n     */\n    pdbx_chem_comp_identifier: {\n        /**\n         * This data item is a pointer to _chem_comp.id in the CHEM_COMP\n         * category.\n         */\n        comp_id: str,\n        /**\n         * This data item contains the identifier value for this\n         * component.\n         */\n        identifier: str,\n        /**\n         * This data item contains the identifier type.\n         */\n        type: Aliased(str),\n        /**\n         * This data item contains the name of the program\n         * or library used to compute the identifier.\n         */\n        program: str,\n        /**\n         * This data item contains the version of the program\n         * or library used to compute the identifier.\n         */\n        program_version: str,\n    },\n};\n;\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Code-generated 'BIRD' schema file. Dictionary versions: mmCIF 5.407, IHM 1.28, MA 1.4.8.\n *\n * @author molstar/ciftools package\n */\nimport { Column } from '../../../../mol-data/db.js';\nvar Schema = Column.Schema;\nconst str = Schema.str;\nconst float = Schema.float;\nconst lstr = Schema.lstr;\nconst Aliased = Schema.Aliased;\nconst int = Schema.int;\nexport const BIRD_Schema = {\n    /**\n     * Data items in the PDBX_REFERENCE_MOLECULE category record\n     * reference information about small polymer molecules.\n     */\n    pdbx_reference_molecule: {\n        /**\n         * The value of _pdbx_reference_molecule.prd_id is the unique identifier\n         * for the reference molecule in this family.\n         *\n         * By convention this ID uniquely identifies the reference molecule in\n         * in the PDB reference dictionary.\n         *\n         * The ID has the template form PRD_dddddd (e.g. PRD_000001)\n         */\n        prd_id: str,\n        /**\n         * Formula mass in daltons of the entity.\n         */\n        formula_weight: float,\n        /**\n         * The formula for the reference entity. Formulae are written\n         * according to the rules:\n         *\n         * 1. Only recognised element symbols may be used.\n         *\n         * 2. Each element symbol is followed by a 'count' number. A count\n         * of '1' may be omitted.\n         *\n         * 3. A space or parenthesis must separate each element symbol and\n         * its count, but in general parentheses are not used.\n         *\n         * 4. The order of elements depends on whether or not carbon is\n         * present. If carbon is present, the order should be: C, then\n         * H, then the other elements in alphabetical order of their\n         * symbol. If carbon is not present, the elements are listed\n         * purely in alphabetic order of their symbol. This is the\n         * 'Hill' system used by Chemical Abstracts.\n         */\n        formula: str,\n        /**\n         * Defines the structural classification of the entity.\n         */\n        type: Aliased(lstr),\n        /**\n         * Evidence for the assignment of _pdbx_reference_molecule.type\n         */\n        type_evidence_code: str,\n        /**\n         * Broadly defines the function of the entity.\n         */\n        class: Aliased(lstr),\n        /**\n         * Evidence for the assignment of _pdbx_reference_molecule.class\n         */\n        class_evidence_code: str,\n        /**\n         * A name of the entity.\n         */\n        name: str,\n        /**\n         * Defines how this entity is represented in PDB data files.\n         */\n        represent_as: Aliased(lstr),\n        /**\n         * For entities represented as single molecules, the identifier\n         * corresponding to the chemical definition for the molecule.\n         */\n        chem_comp_id: str,\n        /**\n         * Special details about this molecule.\n         */\n        compound_details: str,\n        /**\n         * Description of this molecule.\n         */\n        description: str,\n        /**\n         * The PDB accession code for the entry containing a representative example of this molecule.\n         */\n        representative_PDB_id_code: str,\n        /**\n         * Defines the current PDB release status for this molecule definition.\n         */\n        release_status: Aliased(lstr),\n        /**\n         * Assigns the identifier for the reference molecule which have been replaced\n         * by this reference molecule.\n         * Multiple molecule identifier codes should be separated by commas.\n         */\n        replaces: str,\n        /**\n         * Assigns the identifier of the reference molecule that has replaced this molecule.\n         */\n        replaced_by: str,\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_LIST category record\n     * the list of entities within each reference molecule.\n     */\n    pdbx_reference_entity_list: {\n        /**\n         * The value of _pdbx_reference_entity_list.prd_id is a reference\n         * _pdbx_reference_molecule.prd_id in the PDBX_REFERENCE_MOLECULE category.\n         */\n        prd_id: str,\n        /**\n         * The value of _pdbx_reference_entity_list.ref_entity_id is a unique identifier\n         * the a constituent entity within this reference molecule.\n         */\n        ref_entity_id: str,\n        /**\n         * Defines the polymer characteristic of the entity.\n         */\n        type: Aliased(lstr),\n        /**\n         * Additional details about this entity.\n         */\n        details: str,\n        /**\n         * The component number of this entity within the molecule.\n         */\n        component_id: int,\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_NONPOLY category record\n     * the list of entities within each reference molecule.\n     */\n    pdbx_reference_entity_nonpoly: {\n        /**\n         * The value of _pdbx_reference_entity_nonpoly.prd_id is a reference\n         * _pdbx_reference_entity_list.prd_id in the PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        prd_id: str,\n        /**\n         * The value of _pdbx_reference_entity_nonpoly.ref_entity_id is a reference\n         * to _pdbx_reference_entity_list.ref_entity_id in PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        ref_entity_id: str,\n        /**\n         * A name of the non-polymer entity.\n         */\n        name: str,\n        /**\n         * For non-polymer entities, the identifier corresponding\n         * to the chemical definition for the molecule.\n         */\n        chem_comp_id: str,\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_LINK category give details about\n     * the linkages between entities within reference molecules.\n     */\n    pdbx_reference_entity_link: {\n        /**\n         * The value of _pdbx_reference_entity_link.link_id uniquely identifies\n         * linkages between entities with a molecule.\n         */\n        link_id: int,\n        /**\n         * The value of _pdbx_reference_entity_link.prd_id is a reference\n         * _pdbx_reference_entity_list.prd_id in the PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        prd_id: str,\n        /**\n         * A description of special aspects of a linkage between\n         * chemical components in the structure.\n         */\n        details: str,\n        /**\n         * The reference entity id of the first of the two entities joined by the\n         * linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_list.ref_entity_id\n         * in the PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        ref_entity_id_1: str,\n        /**\n         * The reference entity id of the second of the two entities joined by the\n         * linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_list.ref_entity_id\n         * in the PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        ref_entity_id_2: str,\n        /**\n         * For a polymer entity, the sequence number in the first of\n         * the two entities containing the linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly_seq.num\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         */\n        entity_seq_num_1: int,\n        /**\n         * For a polymer entity, the sequence number in the second of\n         * the two entities containing the linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly_seq.num\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         */\n        entity_seq_num_2: int,\n        /**\n         * The component identifier in the first of the two entities containing the linkage.\n         *\n         * For polymer entities, this data item is a pointer to _pdbx_reference_entity_poly_seq.mon_id\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         *\n         * For non-polymer entities, this data item is a pointer to\n         * _pdbx_reference_entity_nonpoly.chem_comp_id in the\n         * PDBX_REFERENCE_ENTITY_NONPOLY category.\n         */\n        comp_id_1: str,\n        /**\n         * The component identifier in the second of the two entities containing the linkage.\n         *\n         * For polymer entities, this data item is a pointer to _pdbx_reference_entity_poly_seq.mon_id\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         *\n         * For non-polymer entities, this data item is a pointer to\n         * _pdbx_reference_entity_nonpoly.chem_comp_id in the\n         * PDBX_REFERENCE_ENTITY_NONPOLY category.\n         */\n        comp_id_2: str,\n        /**\n         * The atom identifier/name in the first of the two entities containing the linkage.\n         */\n        atom_id_1: str,\n        /**\n         * The atom identifier/name in the second of the two entities containing the linkage.\n         */\n        atom_id_2: str,\n        /**\n         * The bond order target for the chemical linkage.\n         */\n        value_order: Aliased(lstr),\n        /**\n         * The entity component identifier for the first of two entities containing the linkage.\n         */\n        component_1: int,\n        /**\n         * The entity component identifier for the second of two entities containing the linkage.\n         */\n        component_2: int,\n        /**\n         * A code indicating the entity types involved in the linkage.\n         */\n        link_class: Aliased(str),\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_POLY_LINK category give details about\n     * polymer linkages including both standard and non-standard linkages between\n     * polymer componnents.\n     */\n    pdbx_reference_entity_poly_link: {\n        /**\n         * The value of _pdbx_reference_entity_poly_link.link_id uniquely identifies\n         * a linkage within a polymer entity.\n         */\n        link_id: int,\n        /**\n         * The value of _pdbx_reference_entity_poly_link.prd_id is a reference\n         * _pdbx_reference_entity_list.prd_id in the PDBX_REFERENCE_ENTITY_POLY category.\n         */\n        prd_id: str,\n        /**\n         * The reference entity id of the polymer entity containing the linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly.ref_entity_id\n         * in the PDBX_REFERENCE_ENTITY_POLY category.\n         */\n        ref_entity_id: str,\n        /**\n         * The entity component identifier entity containing the linkage.\n         */\n        component_id: int,\n        /**\n         * For a polymer entity, the sequence number in the first of\n         * the two components making the linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly_seq.num\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         */\n        entity_seq_num_1: int,\n        /**\n         * For a polymer entity, the sequence number in the second of\n         * the two components making the linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly_seq.num\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         */\n        entity_seq_num_2: int,\n        /**\n         * The component identifier in the first of the two components making the\n         * linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly_seq.mon_id\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         */\n        comp_id_1: str,\n        /**\n         * The component identifier in the second of the two components making the\n         * linkage.\n         *\n         * This data item is a pointer to _pdbx_reference_entity_poly_seq.mon_id\n         * in the PDBX_REFERENCE_ENTITY_POLY_SEQ category.\n         */\n        comp_id_2: str,\n        /**\n         * The atom identifier/name in the first of the two components making\n         * the linkage.\n         */\n        atom_id_1: str,\n        /**\n         * The atom identifier/name in the second of the two components making\n         * the linkage.\n         */\n        atom_id_2: str,\n        /**\n         * The bond order target for the non-standard linkage.\n         */\n        value_order: Aliased(lstr),\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_POLY category record details about\n     * the polymer, such as the type of the polymer, the number of\n     * monomers and whether it has nonstandard features.\n     */\n    pdbx_reference_entity_poly: {\n        /**\n         * The value of _pdbx_reference_entity_poly.prd_id is a reference\n         * _pdbx_reference_entity_list.prd_id in the  PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        prd_id: str,\n        /**\n         * The value of _pdbx_reference_entity_poly.ref_entity_id is a reference\n         * to _pdbx_reference_entity_list.ref_entity_id in PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        ref_entity_id: str,\n        /**\n         * The type of the polymer.\n         */\n        type: Aliased(str),\n        /**\n         * The database code for this source information\n         */\n        db_code: str,\n        /**\n         * The database name for this source information\n         */\n        db_name: str,\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_POLY_SEQ category specify the sequence\n     * of monomers in a polymer.\n     */\n    pdbx_reference_entity_poly_seq: {\n        /**\n         * The value of _pdbx_reference_entity_poly_seq.prd_id is a reference\n         * _pdbx_reference_entity_poly.prd_id in the  PDBX_REFERENCE_ENTITY_POLY category.\n         */\n        prd_id: str,\n        /**\n         * The value of _pdbx_reference_entity_poly_seq.ref_entity_id is a reference\n         * to _pdbx_reference_entity_poly.ref_entity_id in PDBX_REFERENCE_ENTITY_POLY category.\n         */\n        ref_entity_id: str,\n        /**\n         * This data item is the chemical component identifier of monomer.\n         */\n        mon_id: str,\n        /**\n         * This data item is the chemical component identifier for the parent component corresponding to this monomer.\n         */\n        parent_mon_id: str,\n        /**\n         * The value of _pdbx_reference_entity_poly_seq.num must uniquely and sequentially\n         * identify a record in the PDBX_REFERENCE_ENTITY_POLY_SEQ list.\n         *\n         * This value is conforms to author numbering conventions and does not map directly\n         * to the numbering conventions used for _entity_poly_seq.num.\n         */\n        num: int,\n        /**\n         * A flag to indicate that this monomer is observed in the instance example.\n         */\n        observed: Aliased(lstr),\n        /**\n         * A flag to indicate that sequence heterogeneity at this monomer position.\n         */\n        hetero: Aliased(lstr),\n    },\n    /**\n     * Additional features associated with the reference entity.\n     */\n    pdbx_reference_entity_sequence: {\n        /**\n         * The value of _pdbx_reference_entity_sequence.prd_id is a reference\n         * _pdbx_reference_entity_list.prd_id in the  PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        prd_id: str,\n        /**\n         * The value of _pdbx_reference_entity_sequence.ref_entity_id is a reference\n         * to _pdbx_reference_entity_list.ref_entity_id in PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        ref_entity_id: str,\n        /**\n         * The monomer type for the sequence.\n         */\n        type: Aliased(str),\n        /**\n         * A flag to indicate a non-ribosomal entity.\n         */\n        NRP_flag: Aliased(str),\n        /**\n         * The one-letter-code sequence for this entity.  Non-standard monomers are represented as 'X'.\n         */\n        one_letter_codes: str,\n    },\n    /**\n     * Data items in the PDBX_REFERENCE_ENTITY_SRC_NAT category record\n     * details of the source from which the entity was obtained.\n     */\n    pdbx_reference_entity_src_nat: {\n        /**\n         * The value of _pdbx_reference_entity_src_nat.prd_id is a reference\n         * _pdbx_reference_entity_list.prd_id in the  PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        prd_id: str,\n        /**\n         * The value of _pdbx_reference_entity_src_nat.ref_entity_id is a reference\n         * to _pdbx_reference_entity_list.ref_entity_id in PDBX_REFERENCE_ENTITY_LIST category.\n         */\n        ref_entity_id: str,\n        /**\n         * The value of _pdbx_reference_entity_src_nat.ordinal distinguishes\n         * source details for this entity.\n         */\n        ordinal: int,\n        /**\n         * The scientific name of the organism from which the entity was isolated.\n         */\n        organism_scientific: str,\n        /**\n         * The NCBI TaxId of the organism from which the entity was isolated.\n         */\n        taxid: str,\n        /**\n         * The database code for this source information\n         */\n        db_code: str,\n        /**\n         * The database name for this source information\n         */\n        db_name: str,\n    },\n    /**\n     * Data items in the PDBX_PRD_AUDIT category records\n     * the status and tracking information for this molecule.\n     */\n    pdbx_prd_audit: {\n        /**\n         * This data item is a pointer to _pdbx_reference_molecule.prd_id in the\n         * pdbx_reference_molecule category.\n         */\n        prd_id: str,\n        /**\n         * The date associated with this audit record.\n         */\n        date: str,\n        /**\n         * An identifier for the wwPDB site creating or modifying the molecule.\n         */\n        processing_site: Aliased(str),\n        /**\n         * The action associated with this audit record.\n         */\n        action_type: Aliased(str),\n    },\n};\n;\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column } from '../../../../mol-data/db.js';\nvar Schema = Column.Schema;\nconst str = Schema.str;\nconst float = Schema.float;\nconst datablock = {\n    id: str,\n    description: str\n};\nconst dictionary = {\n    title: str,\n    datablock_id: str,\n    version: str\n};\nconst dictionary_history = {\n    version: str,\n    update: str,\n    revision: str\n};\nconst sub_category = {\n    id: str,\n    description: str\n};\nconst category_group_list = {\n    id: str,\n    parent_id: str,\n    description: str\n};\nconst item_type_list = {\n    code: str,\n    primitive_code: str,\n    construct: str,\n    detail: str\n};\nconst item_units_list = {\n    code: str,\n    detail: str\n};\nconst item_units_conversion = {\n    from_code: str,\n    to_code: str,\n    operator: str,\n    factor: float\n};\n// TODO save frame dic schema\nexport const dic_Schema = {\n    datablock,\n    dictionary,\n    dictionary_history,\n    sub_category,\n    category_group_list,\n    item_type_list,\n    item_units_list,\n    item_units_conversion\n};\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nvar Schema = Column.Schema;\nconst str = Schema.str;\nconst int = Schema.int;\nconst float = Schema.float;\nconst Aliased = Schema.Aliased;\nconst Vector = Schema.Vector;\nexport const DensityServer_Header_Schema = {\n    density_server_result: {\n        'server_version': str,\n        'datetime_utc': str,\n        'guid': str,\n        'is_empty': Aliased(str),\n        'has_error': Aliased(str),\n        'error': str,\n        'query_source_id': str,\n        'query_type': Aliased(str),\n        'query_box_type': Aliased(str),\n        'query_box_a': Vector(3),\n        'query_box_b': Vector(3)\n    }\n};\nexport const DensityServer_Data_Schema = {\n    volume_data_3d_info: {\n        'name': str,\n        // zero indexed axis order of the data\n        'axis_order': Vector(3, int),\n        // Origin in fractional coords\n        'origin': Vector(3),\n        // Dimension in fractional coords\n        'dimensions': Vector(3),\n        'sample_rate': int,\n        // number of samples along each axis\n        'sample_count': Vector(3, int),\n        'spacegroup_number': int,\n        'spacegroup_cell_size': Vector(3),\n        // angles in degrees\n        'spacegroup_cell_angles': Vector(3),\n        'mean_source': float,\n        'mean_sampled': float,\n        'sigma_source': float,\n        'sigma_sampled': float,\n        'min_source': float,\n        'min_sampled': float,\n        'max_source': float,\n        'max_sampled': float\n    },\n    volume_data_3d: {\n        values: float\n    }\n};\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Code-generated 'CifCore' schema file. Dictionary versions: CifCore 3.3.0.\n *\n * @author molstar/ciftools package\n */\nimport { Column } from '../../../../mol-data/db.js';\nvar Schema = Column.Schema;\nconst float = Schema.float;\nconst str = Schema.str;\nconst int = Schema.int;\nconst Matrix = Schema.Matrix;\nexport const CifCore_Schema = {\n    /**\n     * The category of data items used to describe the parameters of\n     * the crystal unit cell.\n     */\n    cell: {\n        /**\n         * The angle between the bounding cell axes.\n         */\n        angle_alpha: float,\n        /**\n         * The angle between the bounding cell axes.\n         */\n        angle_beta: float,\n        /**\n         * The angle between the bounding cell axes.\n         */\n        angle_gamma: float,\n        /**\n         * The number of the formula units in the unit cell as specified\n         * by _chemical_formula.structural, _chemical_formula.moiety or\n         * _chemical_formula.sum. This is normally an integer value, but\n         * in exceptional circumstances (Brock, 2025) may be reported as\n         * non-integral.\n         *\n         * Reference: Brock, C. P. (2025). Acta Cryst. A81, 405-408.\n         */\n        formula_units_z: float,\n        /**\n         * The length of each cell axis.\n         */\n        length_a: float,\n        /**\n         * The length of each cell axis.\n         */\n        length_b: float,\n        /**\n         * The length of each cell axis.\n         */\n        length_c: float,\n        /**\n         * Volume of the crystal unit cell.\n         */\n        volume: float,\n    },\n    /**\n     * The category of data items which describe the composition and\n     * chemical properties of the compound under study. The formula data\n     * items must be consistent with the density, unit-cell and Z values.\n     */\n    chemical: {\n        /**\n         * The temperature at which a crystalline solid changes to a liquid.\n         */\n        melting_point: float,\n        /**\n         * Trivial name by which the compound is commonly known.\n         */\n        name_common: str,\n        /**\n         * IUPAC or Chemical Abstracts full name of compound.\n         */\n        name_systematic: str,\n    },\n    /**\n     * The category of data items which specify the composition and chemical\n     * properties of the compound. The formula data items must agree\n     * with those that specify the density, unit-cell and Z values.\n     *\n     * The following rules apply to the construction of the data items\n     * _chemical_formula.analytical, *.structural and *.sum. For the\n     * data item *.moiety the formula construction is broken up into\n     * residues or moieties, i.e. groups of atoms that form a molecular\n     * unit or molecular ion. The rules given below apply within each\n     * moiety, but different requirements apply to the way that moieties\n     * are connected (see _chemical_formula.moiety).\n     *\n     * 1. Only recognized element symbols may be used.\n     *\n     * 2. Each element symbol is followed by a 'count' number. A count of\n     * '1' may be omitted.\n     *\n     * 3. A space or parenthesis must separate each cluster of (element\n     * symbol + count).\n     *\n     * 4. Where a group of elements is enclosed in parentheses, the\n     * multiplier for the group must follow the closing parentheses.\n     * That is, all element and group multipliers are assumed to be\n     * printed as subscripted numbers. [An exception to this rule\n     * exists for *.moiety formulae where pre- and post-multipliers\n     * are permitted for molecular units].\n     *\n     * 5. Unless the elements are ordered in a manner that corresponds to\n     * their chemical structure, as in _chemical_formula.structural,\n     * the order of the elements within any group or moiety\n     * depends on whether or not carbon is present. If carbon is\n     * present, the order should be: C, then H, then the other\n     * elements in alphabetical order of their symbol. If carbon is\n     * not present, the elements are listed purely in alphabetical order\n     * of their symbol. This is the 'Hill' system used by Chemical\n     * Abstracts. This ordering is used in _chemical_formula.moiety\n     * and _chemical_formula.sum.\n     *\n     * _chemical_formula.IUPAC      '[Mo (C O)4 (C18 H33 P)2]'\n     * _chemical_formula.moiety     'C40 H66 Mo O4 P2'\n     * _chemical_formula.structural '((C O)4 (P (C6 H11)3)2)Mo'\n     * _chemical_formula.sum         'C40 H66 Mo O4 P2'\n     * _chemical_formula.weight      768.81\n     */\n    chemical_formula: {\n        /**\n         * Formula with each discrete bonded residue or ion shown as a\n         * separate moiety. See above CHEMICAL_FORMULA for rules\n         * for writing chemical formulae. In addition to the general\n         * formulae requirements, the following rules apply:\n         * 1. Moieties are separated by commas ','.\n         * 2. The order of elements within a moiety follows general rule\n         * 5 in CHEMICAL_FORMULA.\n         * 3. Parentheses are not used within moieties but may surround\n         * a moiety. Parentheses may not be nested.\n         * 4. Charges should be placed at the end of the moiety. The\n         * charge '+' or '-' may be preceded by a numerical multiplier\n         * and should be separated from the last (element symbol +\n         * count) by a space. Pre- or post-multipliers may be used for\n         * individual moieties.\n         */\n        moiety: str,\n        /**\n         * Chemical formulae in which all discrete bonded residues and ions are\n         * summed over the constituent elements, following the ordering given\n         * in rule 5 of the category description. Parentheses normally not used.\n         */\n        sum: str,\n        /**\n         * Mass corresponding to the formulae _chemical_formula.structural,\n         * *.IUPAC, *.moiety or *.sum and, together with the Z value and cell\n         * parameters yield the density given as _exptl_crystal.density_diffrn.\n         */\n        weight: float,\n    },\n    /**\n     * The category of data items used to specify space group\n     * information about the crystal used in the diffraction measurements.\n     *\n     * Space-group types are identified by their number as listed in\n     * International Tables for Crystallography Volume A, or by their\n     * Schoenflies symbol. Specific settings of the space groups can\n     * be identified by their Hall symbol, by specifying their\n     * symmetry operations or generators, or by giving the\n     * transformation that relates the specific setting to the\n     * reference setting based on International Tables Volume A and\n     * stored in this dictionary.\n     *\n     * The commonly used Hermann-Mauguin symbol determines the\n     * space-group type uniquely, but several different Hermann-Mauguin\n     * symbols may refer to the same space-group type. A\n     * Hermann-Mauguin symbol contains information on the choice of\n     * the basis, but not on the choice of origin.\n     *\n     * Ref: International Tables for Crystallography (2016). Volume A,\n     * Space-group symmetry, edited by M. I. Aroyo, 6th ed.\n     * Chichester: John Wiley & Sons.\n     */\n    space_group: {\n        /**\n         * The name of the system of geometric crystal classes of space\n         * groups (crystal system) to which the space group belongs.\n         * Note that rhombohedral space groups belong to the\n         * trigonal system.\n         */\n        crystal_system: str,\n        /**\n         * The number as assigned in International Tables for Crystallography\n         * Vol. A, specifying the proper affine class (i.e. the orientation\n         * preserving affine class) of space groups (crystallographic space\n         * group type) to which the space group belongs. This number defines\n         * the space group type but not the coordinate system expressed.\n         */\n        it_number: int,\n        /**\n         * The full international Hermann-Mauguin space-group symbol as\n         * defined in Section 2.1.3.3 and given as the second item of the\n         * second line of each of the space-group tables of Chapter 2.3 of\n         * International Tables for Crystallography Volume A (2016).\n         *\n         * Each component of the space-group name is separated by a\n         * space or an underscore character. The use of a space is\n         * strongly recommended.  The underscore is only retained\n         * because it was used in old CIFs. It should not be used in\n         * new CIFs.\n         *\n         * Subscripts should appear without special symbols. Bars should\n         * be given as negative signs before the numbers to which they\n         * apply. The commonly used Hermann-Mauguin symbol determines the\n         * space-group type uniquely, but a given space-group type may\n         * be described by more than one Hermann-Mauguin symbol. The\n         * space-group type is best described using\n         * _space_group.IT_number or _space_group.name_Schoenflies. The\n         * full international Hermann-Mauguin symbol contains information\n         * about the choice of basis for monoclinic and orthorhombic\n         * space groups, but does not give information about the choice\n         * of origin. To define the setting uniquely use\n         * _space_group.name_Hall, or list the symmetry operations\n         * or generators.\n         *\n         * Ref: International Tables for Crystallography (2016). Volume A,\n         * Space-group symmetry, edited by M. I. Aroyo, 6th ed.\n         * Chichester: John Wiley & Sons.\n         */\n        'name_h-m_full': str,\n    },\n    /**\n     * The category of data items used to describe symmetry equivalent sites\n     * in the crystal unit cell.\n     */\n    space_group_symop: {\n        /**\n         * A parsable string giving one of the symmetry operations of the\n         * space group in algebraic form.  If W is a matrix representation\n         * of the rotational part of the symmetry operation defined by the\n         * positions and signs of x, y and z, and w is a column of\n         * translations defined by fractions, an equivalent position\n         * X' is generated from a given position X by the equation\n         *\n         * X' = WX + w.\n         *\n         * (Note: X is used to represent bold_italics_x in International\n         * Tables for Crystallography Vol. A, Part 5.)\n         *\n         * When a list of symmetry operations is given, it must contain\n         * a complete set of coordinate representatives which generates\n         * all the operations of the space group by the addition of\n         * all primitive translations of the space group. Such\n         * representatives are to be found as the coordinates of\n         * the general-equivalent position in International Tables for\n         * Crystallography Vol. A (2002), to which it is necessary to\n         * add any centring translations shown above the\n         * general-equivalent position.\n         *\n         * That is to say, it is necessary to list explicitly all the\n         * symmetry operations required to generate all the atoms in\n         * the unit cell defined by the setting used.\n         */\n        operation_xyz: str,\n    },\n    /**\n     * The category of data items used to specify the geometry bonds in the\n     * structural model as derived from the atomic sites.\n     */\n    geom_bond: {\n        /**\n         * This label is a unique identifier for a particular site in the\n         * asymmetric unit of the crystal unit cell.\n         */\n        atom_site_label_1: str,\n        /**\n         * This label is a unique identifier for a particular site in the\n         * asymmetric unit of the crystal unit cell.\n         */\n        atom_site_label_2: str,\n        /**\n         * Intramolecular bond distance between the sites identified\n         * by _geom_bond.id\n         */\n        distance: float,\n        /**\n         * This code signals whether the angle is referred to in a\n         * publication or should be placed in a table of significant angles.\n         */\n        publ_flag: str,\n        /**\n         * Data item specifying the symmetry operation codes applied to the atom\n         * sites involved in a specific geometric configuration or other correlated\n         * behaviour.\n         *\n         * The symmetry code of each atom site as the symmetry-equivalent position\n         * number 'n' and the cell translation number 'pqr'. These numbers are\n         * combined to form the code 'n pqr' or n_pqr.\n         *\n         * The character string n_pqr is composed as follows:\n         *\n         * n refers to the symmetry operation that is applied to the\n         * coordinates stored in _atom_site.fract_xyz. It must match\n         * a number given in _space_group_symop.id (or one of its\n         * aliases, such as _symmetry_equiv_pos_site_id).\n         *\n         * p, q and r refer to the translations that are subsequently\n         * applied to the symmetry transformed coordinates to generate\n         * the related atom position. These translations (x,y,z) are related\n         * to (p,q,r) by the relations\n         * p = 5 + x\n         * q = 5 + y\n         * r = 5 + z\n         */\n        site_symmetry_1: str,\n        /**\n         * Data item specifying the symmetry operation codes applied to the atom\n         * sites involved in a specific geometric configuration or other correlated\n         * behaviour.\n         *\n         * The symmetry code of each atom site as the symmetry-equivalent position\n         * number 'n' and the cell translation number 'pqr'. These numbers are\n         * combined to form the code 'n pqr' or n_pqr.\n         *\n         * The character string n_pqr is composed as follows:\n         *\n         * n refers to the symmetry operation that is applied to the\n         * coordinates stored in _atom_site.fract_xyz. It must match\n         * a number given in _space_group_symop.id (or one of its\n         * aliases, such as _symmetry_equiv_pos_site_id).\n         *\n         * p, q and r refer to the translations that are subsequently\n         * applied to the symmetry transformed coordinates to generate\n         * the related atom position. These translations (x,y,z) are related\n         * to (p,q,r) by the relations\n         * p = 5 + x\n         * q = 5 + y\n         * r = 5 + z\n         */\n        site_symmetry_2: str,\n        /**\n         * Valence assigned to the bond between the sites identified by\n         * _geom_bond.id calculated according to the bond-valence model\n         * (Brown, 2002) from the bond distance.\n         *\n         * Ref: Brown, I. D. (2002). The Chemical Bond in Inorganic Chemistry:\n         * the Bond-Valence Model, eq. (3.1). Oxford: Oxford University Press.\n         */\n        valence: float,\n    },\n    /**\n     * The category of data items used to record details about the\n     * creation and subsequent updating of the data block.\n     */\n    audit: {\n        /**\n         * The digital object identifier (DOI) registered to identify\n         * the data set publication represented by the current\n         * data block. This can be used as a unique identifier for\n         * the data block so long as the code used is a valid DOI\n         * (i.e. begins with a valid publisher prefix assigned by a\n         * Registration Agency and a suffix guaranteed to be unique\n         * by the publisher) and has had its metadata deposited\n         * with a DOI Registration Agency.\n         *\n         * A DOI is a unique character string identifying any\n         * object of intellectual property. It provides a\n         * persistent identifier for an object on a digital network\n         * and permits the association of related current data in a\n         * structured extensible way. A DOI is an implementation\n         * of the Internet concepts of Uniform Resource Name and\n         * Universal Resource Locator managed according to the\n         * specifications of the International DOI Foundation\n         * (see https://www.doi.org/).\n         */\n        block_doi: str,\n    },\n    /**\n     * The category of data items recording database deposition. These data items\n     * are assigned by database managers and should only appear in a CIF if they\n     * originate from that source.\n     */\n    database_code: {\n        /**\n         * Code assigned by the Crystallography Open Database (COD).\n         */\n        cod: str,\n        /**\n         * Code assigned by the Cambridge Structural Database.\n         */\n        csd: str,\n        /**\n         * Deposition numbers assigned by the Cambridge Crystallographic\n         * Data Centre (CCDC) to files containing structural information\n         * archived by the CCDC.\n         */\n        depnum_ccdc_archive: str,\n        /**\n         * Deposition numbers assigned by the Fachinformationszentrum\n         * Karlsruhe (FIZ) to files containing structural information\n         * archived by the Cambridge Crystallographic Data Centre (CCDC).\n         */\n        depnum_ccdc_fiz: str,\n        /**\n         * Code assigned by the Inorganic Crystal Structure Database.\n         */\n        icsd: str,\n        /**\n         * Code assigned in the Metals Data File.\n         */\n        mdf: str,\n        /**\n         * Code assigned by the NBS (NIST) Crystal Data Database.\n         */\n        nbs: str,\n    },\n    /**\n     * The category of data items used to describe atom site information\n     * used in crystallographic structure studies.\n     */\n    atom_site: {\n        /**\n         * Code for type of atomic displacement parameters used for the site.\n         */\n        adp_type: str,\n        /**\n         * A standard code to signal if the site coordinates have been\n         * determined from the intensities or calculated from the geometry\n         * of surrounding sites, or have been assigned dummy coordinates.\n         */\n        calc_flag: str,\n        /**\n         * A code which identifies a cluster of atoms that show long range disorder\n         * but are locally ordered. Within each such cluster of atoms,\n         * _atom_site.disorder_group is used to identify the sites that are\n         * simultaneously occupied. This field is only needed if there is more than\n         * one cluster of disordered atoms showing independent local order.\n         */\n        disorder_assembly: str,\n        /**\n         * A code that identifies a group of disordered atom sites that are locally\n         * simultaneously occupied. Atoms that are positionally disordered over two or\n         * more sites (e.g. the H atoms of a methyl group that exists in two\n         * orientations) should be assigned to two or more groups. Similarly, atoms\n         * that describe a specific alternative composition of a compositionally\n         * disordered site should be assigned to a distinct disorder group (e.g. a site\n         * that is partially occupied by Mg and Mn atoms should be described by\n         * assigning the Mg atom to one group and the Mn atom to another group). Sites\n         * belonging to the same group are simultaneously occupied, but those belonging\n         * to different groups are not. A minus prefix (e.g. \"-1\") is used to indicate\n         * sites disordered about a special position.\n         */\n        disorder_group: str,\n        /**\n         * Atom site coordinates as fractions of the cell length values.\n         */\n        fract_x: float,\n        /**\n         * Atom site coordinates as fractions of the cell length values.\n         */\n        fract_y: float,\n        /**\n         * Atom site coordinates as fractions of the cell length values.\n         */\n        fract_z: float,\n        /**\n         * This label is a unique identifier for a particular site in the\n         * asymmetric unit of the crystal unit cell. It is made up of\n         * components, _atom_site.label_component_0 to *_6, which may be\n         * specified as separate data items. Component 0 usually matches one\n         * of the specified _atom_type.symbol codes. This is not mandatory\n         * if an _atom_site.type_symbol item is included in the atom site\n         * list. The _atom_site.type_symbol always takes precedence over\n         * an _atom_site.label in the identification of the atom type. The\n         * label components 1 to 6 are optional, and normally only\n         * components 0 and 1 are used. Note that components 0 and 1 are\n         * concatenated, while all other components, if specified, are\n         * separated by an underline character. Underline separators are\n         * only used if higher-order components exist. If an intermediate\n         * component is not used it may be omitted provided the underline\n         * separators are inserted. For example the label 'C233__ggg' is\n         * acceptable and represents the components C, 233, '', and ggg.\n         * Each label may have a different number of components.\n         */\n        label: str,\n        /**\n         * The fraction of the atom type present at this site.\n         * The sum of the occupancies of all the atom types at this site\n         * may not significantly exceed 1.0 unless it is a dummy site. The\n         * value must lie in the 99.97% Gaussian confidence interval\n         * -3u =< x =< 1 + 3u. The _enumeration.range of 0.0:1.0 is thus\n         * correctly interpreted as meaning (0.0 - 3u) =< x =< (1.0 + 3u).\n         */\n        occupancy: float,\n        /**\n         * A concatenated series of single-letter codes which indicate the\n         * refinement restraints or constraints applied to this site. This\n         * item should not be used. It has been replaced by\n         * _atom_site.refinement_flags_posn, _ADP and _occupancy. It is\n         * retained in this dictionary only to provide compatibility with\n         * legacy CIFs.\n         */\n        refinement_flags: str,\n        /**\n         * The number of different sites that are generated by the\n         * application of the space-group symmetry to the coordinates\n         * given for this site. It is equal to the multiplicity given\n         * for this Wyckoff site in International Tables for Cryst.\n         * Vol. A (2002). It is equal to the multiplicity of the general\n         * position divided by the order of the site symmetry given in\n         * _atom_site.site_symmetry_order.\n         *\n         * The _atom_site_symmetry_multiplicity form of this data name is\n         * deprecated because of historical inconsistencies in practice among\n         * structure refinement software packages and should not be used.\n         */\n        site_symmetry_multiplicity: int,\n        /**\n         * A code to identify the atom specie(s) occupying this site.\n         * This code must match a corresponding _atom_type.symbol. The\n         * specification of this code is optional if component_0 of the\n         * _atom_site.label is used for this purpose. See _atom_type.symbol.\n         */\n        type_symbol: str,\n        /**\n         * Isotropic atomic displacement parameter, or equivalent isotropic\n         * atomic displacement parameter, U(equiv), in angstroms squared,\n         * calculated from anisotropic atomic displacement parameters.\n         *\n         * U(equiv) = (1/3) sum~i~[sum~j~(U^ij^ a*~i~ a*~j~ a~i~.a~j~)]\n         *\n         * a  = the real-space cell vectors\n         * a* = the reciprocal-space cell lengths\n         * Ref: Fischer, R. X. & Tillmanns, E. (1988). Acta Cryst. C44, 775-776.\n         */\n        u_iso_or_equiv: float,\n    },\n    /**\n     * The category of data items used to describe the anisotropic atomic\n     * displacement parameters of the atomic sites in a crystal structure.\n     */\n    atom_site_aniso: {\n        /**\n         * Anisotropic atomic displacement parameters are usually looped in\n         * a separate list. If this is the case, this code must match the\n         * _atom_site.label of the associated atom in the atom coordinate\n         * list and conform with the same rules described in _atom_site.label.\n         */\n        label: str,\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u_11: float,\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u: Matrix(3, 3),\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u_12: float,\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u_13: float,\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u_22: float,\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u_23: float,\n        /**\n         * These are the standard anisotropic atomic displacement components in\n         * angstroms squared which appear in the structure-factor term\n         *\n         * T = exp{ -2^2^ sum~i~ [ sum~j~ (U^ij^ h~i~ h~j~ a*~i~ a*~j~) ] }\n         *\n         * h = the Miller indices\n         * a* = the reciprocal-space cell lengths\n         *\n         * The unique elements of the real symmetric matrix are entered by row.\n         *\n         * The IUCr Commission on Nomenclature recommends the use of U for reporting\n         * atomic displacement parameters.\n         *\n         * Note that U^ij^ = ^ij^/(2 ^2^ a*~i~ a*~j~) = B^ij^/(8 ^2^).\n         *\n         * Ref: Trueblood, K. N. et al. (1996). Acta Cryst. A52, 770-781.\n         */\n        u_33: float,\n    },\n    /**\n     * The category of data items used to describe atomic type information\n     * used in crystallographic structure studies.\n     */\n    atom_type: {\n        /**\n         * A description of the atom(s) designated by this atom type. In\n         * most cases this will be the element name and oxidation state of\n         * a single atom species. For disordered or nonstoichiometric\n         * structures it will describe a combination of atom species.\n         */\n        description: str,\n        /**\n         * The identity of the atom specie(s) representing this atom type.\n         * Normally this code is the element symbol followed by the charge\n         * if there is one. The symbol may be composed of any character except\n         * an underline or a blank, with the proviso that digits designate an\n         * oxidation state and must be followed by a + or - character.\n         */\n        symbol: str,\n    },\n    /**\n     * The category of data items used to describe atomic scattering\n     * information used in crystallographic structure studies.\n     */\n    atom_type_scat: {\n        /**\n         * The imaginary component of the anomalous dispersion scattering factors\n         * for this atom type and radiation by _diffrn_radiation_wavelength.value\n         */\n        dispersion_imag: float,\n        /**\n         * The real component of the anomalous dispersion scattering factors\n         * for this atom type and radiation by _diffrn_radiation_wavelength.value\n         */\n        dispersion_real: float,\n        /**\n         * Reference to source of scattering factors used for this atom type.\n         */\n        source: str,\n    },\n};\nexport const CifCore_Aliases = {\n    'cell.formula_units_z': [\n        'cell_formula_units_Z',\n    ],\n    'space_group.it_number': [\n        'space_group_IT_number',\n        'symmetry_Int_Tables_number',\n    ],\n    'space_group.name_h-m_full': [\n        'symmetry_space_group_name_H-M',\n    ],\n    'space_group_symop.operation_xyz': [\n        'symmetry_equiv_pos_as_xyz',\n    ],\n    'geom_bond.atom_site_label_1': [\n        'geom_bond_atom_site_id_1',\n    ],\n    'geom_bond.atom_site_label_2': [\n        'geom_bond_atom_site_id_2',\n    ],\n    'geom_bond.distance': [\n        'geom_bond_dist',\n    ],\n    'audit.block_doi': [\n        'audit_block_DOI',\n    ],\n    'database_code.cod': [\n        'database_code_COD',\n    ],\n    'database_code.csd': [\n        'database_code_CSD',\n    ],\n    'database_code.depnum_ccdc_archive': [\n        'database_code_depnum_CCDC_archive',\n    ],\n    'database_code.depnum_ccdc_fiz': [\n        'database_code_depnum_CCDC_fiz',\n    ],\n    'database_code.icsd': [\n        'database_code_ICSD',\n    ],\n    'database_code.mdf': [\n        'database_code_MDF',\n    ],\n    'database_code.nbs': [\n        'database_code_NBS',\n    ],\n    'atom_site.adp_type': [\n        'atom_site_ADP_type',\n        'atom_site_thermal_displace_type',\n    ],\n    'atom_site.label': [\n        'atom_site_id',\n    ],\n    'atom_site.site_symmetry_multiplicity': [\n        'atom_site_symmetry_multiplicity',\n    ],\n    'atom_site.u_iso_or_equiv': [\n        'atom_site_U_iso_or_equiv',\n    ],\n    'atom_site_aniso.label': [\n        'atom_site_anisotrop_id',\n    ],\n    'atom_site_aniso.u_11': [\n        'atom_site_aniso_U_11',\n        'atom_site_anisotrop_U_11',\n    ],\n    'atom_site_aniso.u_12': [\n        'atom_site_aniso_U_12',\n        'atom_site_anisotrop_U_12',\n    ],\n    'atom_site_aniso.u_13': [\n        'atom_site_aniso_U_13',\n        'atom_site_anisotrop_U_13',\n    ],\n    'atom_site_aniso.u_22': [\n        'atom_site_aniso_U_22',\n        'atom_site_anisotrop_U_22',\n    ],\n    'atom_site_aniso.u_23': [\n        'atom_site_aniso_U_23',\n        'atom_site_anisotrop_U_23',\n    ],\n    'atom_site_aniso.u_33': [\n        'atom_site_aniso_U_33',\n        'atom_site_anisotrop_U_33',\n    ],\n};\n;\n","/**\n * Copyright (c) 2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { DensityServer_Data_Schema } from './density-server.js';\nvar Schema = Column.Schema;\nconst int = Schema.int;\nexport const Segmentation_Data_Schema = {\n    volume_data_3d_info: DensityServer_Data_Schema.volume_data_3d_info,\n    segmentation_data_table: {\n        set_id: int,\n        segment_id: int,\n    },\n    segmentation_data_3d: {\n        values: int\n    }\n};\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { parseCifText } from './cif/text/parser.js';\nimport { parseCifBinary } from './cif/binary/parser.js';\nimport { toDatabaseCollection, toDatabase } from './cif/schema.js';\nimport { mmCIF_Schema } from './cif/schema/mmcif.js';\nimport { CCD_Schema } from './cif/schema/ccd.js';\nimport { BIRD_Schema } from './cif/schema/bird.js';\nimport { dic_Schema } from './cif/schema/dic.js';\nimport { DensityServer_Data_Schema } from './cif/schema/density-server.js';\nimport { CifCore_Schema, CifCore_Aliases } from './cif/schema/cif-core.js';\nimport { Segmentation_Data_Schema } from './cif/schema/segmentation.js';\nimport { StringLike } from '../common/string-like.js';\nexport const CIF = {\n    parse: (data) => StringLike.is(data) ? parseCifText(data) : parseCifBinary(data),\n    parseText: parseCifText,\n    parseBinary: parseCifBinary,\n    toDatabaseCollection,\n    toDatabase,\n    schema: {\n        mmCIF: (frame) => toDatabase(mmCIF_Schema, frame),\n        CCD: (frame) => toDatabase(CCD_Schema, frame),\n        BIRD: (frame) => toDatabase(BIRD_Schema, frame),\n        dic: (frame) => toDatabase(dic_Schema, frame),\n        cifCore: (frame) => toDatabase(CifCore_Schema, frame, CifCore_Aliases),\n        densityServer: (frame) => toDatabase(DensityServer_Data_Schema, frame),\n        segmentation: (frame) => toDatabase(Segmentation_Data_Schema, frame),\n    }\n};\nexport * from './cif/data-model.js';\n","/**\n * Copyright (c) 2017-2022 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { BondType } from '../../../../mol-model/structure/model/types.js';\nimport { mmCIF_Schema } from '../../../../mol-io/reader/cif/schema/mmcif.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { Table } from '../../../../mol-data/db.js';\nimport { FormatPropertyProvider } from '../../common/property.js';\nexport var ComponentBond;\n(function (ComponentBond) {\n    ComponentBond.Descriptor = {\n        name: 'chem_comp_bond',\n        cifExport: {\n            prefix: '',\n            categories: [{\n                    name: 'chem_comp_bond',\n                    instance(ctx) {\n                        const p = ComponentBond.Provider.get(ctx.firstModel);\n                        if (!p)\n                            return CifWriter.Category.Empty;\n                        const chem_comp_bond = p.data;\n                        if (!chem_comp_bond)\n                            return CifWriter.Category.Empty;\n                        const comp_names = ctx.structures[0].uniqueResidueNames;\n                        const { comp_id, _rowCount } = chem_comp_bond;\n                        const indices = [];\n                        for (let i = 0; i < _rowCount; i++) {\n                            if (comp_names.has(comp_id.value(i)))\n                                indices[indices.length] = i;\n                        }\n                        return CifWriter.Category.ofTable(chem_comp_bond, indices);\n                    }\n                }]\n        }\n    };\n    ComponentBond.Provider = FormatPropertyProvider.create(ComponentBond.Descriptor);\n    function chemCompBondFromTable(model, table) {\n        return Table.pick(table, mmCIF_Schema.chem_comp_bond, (i) => {\n            return model.properties.chemicalComponentMap.has(table.comp_id.value(i));\n        });\n    }\n    ComponentBond.chemCompBondFromTable = chemCompBondFromTable;\n    function getEntriesFromChemCompBond(data) {\n        const entries = new Map();\n        function addEntry(id) {\n            // weird behavior when 'PRO' is requested - will report a single bond\n            // between N and H because a later operation would override real content\n            if (entries.has(id))\n                return entries.get(id);\n            const e = new Entry(id);\n            entries.set(id, e);\n            return e;\n        }\n        const { comp_id, atom_id_1, atom_id_2, value_order, pdbx_aromatic_flag, _rowCount, pdbx_ordinal } = data;\n        let entry = addEntry(comp_id.value(0));\n        for (let i = 0; i < _rowCount; i++) {\n            const id = comp_id.value(i);\n            const nameA = atom_id_1.value(i);\n            const nameB = atom_id_2.value(i);\n            const order = value_order.value(i);\n            const aromatic = pdbx_aromatic_flag.value(i) === 'y';\n            const key = pdbx_ordinal.value(i);\n            if (entry.id !== id) {\n                entry = addEntry(id);\n            }\n            let flags = BondType.Flag.Covalent;\n            let ord = 1;\n            if (aromatic)\n                flags |= BondType.Flag.Aromatic;\n            switch (order.toLowerCase()) {\n                case 'delo':\n                    flags |= BondType.Flag.Aromatic;\n                    break;\n                case 'doub':\n                    ord = 2;\n                    break;\n                case 'trip':\n                    ord = 3;\n                    break;\n                case 'quad':\n                    ord = 4;\n                    break;\n            }\n            entry.add(nameA, nameB, ord, flags, key);\n        }\n        return entries;\n    }\n    ComponentBond.getEntriesFromChemCompBond = getEntriesFromChemCompBond;\n    class Entry {\n        add(a, b, order, flags, key, swap = true) {\n            const e = this.map.get(a);\n            if (e !== void 0) {\n                const f = e.get(b);\n                if (f === void 0) {\n                    e.set(b, { order, flags, key });\n                }\n            }\n            else {\n                const map = new Map();\n                map.set(b, { order, flags, key });\n                this.map.set(a, map);\n            }\n            if (swap)\n                this.add(b, a, order, flags, key, false);\n        }\n        constructor(id) {\n            this.id = id;\n            this.map = new Map();\n        }\n    }\n    ComponentBond.Entry = Entry;\n})(ComponentBond || (ComponentBond = {}));\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Unit } from './unit.js';\nimport { VdwRadius } from '../model/properties/atomic.js';\nimport { SecondaryStructureType } from '../model/types.js';\nimport { SecondaryStructureProvider } from '../../../mol-model-props/computed/secondary-structure.js';\nimport { SymmetryOperator } from '../../../mol-math/geometry.js';\nfunction p(p) { return p; }\nconst constant = {\n    true: p(l => true),\n    false: p(l => false),\n    zero: p(l => 0)\n};\nfunction notAtomic() {\n    throw new Error('Property only available for atomic models.');\n}\nfunction notCoarse(kind) {\n    if (!!kind)\n        throw new Error(`Property only available for coarse models (${kind}).`);\n    throw new Error('Property only available for coarse models.');\n}\n// TODO: remove the type checks?\nconst atom = {\n    key: p(l => l.element),\n    // Conformation\n    x: p(l => l.unit.conformation.x(l.element)),\n    y: p(l => l.unit.conformation.y(l.element)),\n    z: p(l => l.unit.conformation.z(l.element)),\n    id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicConformation.atomId.value(l.element)),\n    occupancy: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicConformation.occupancy.value(l.element)),\n    B_iso_or_equiv: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicConformation.B_iso_or_equiv.value(l.element)),\n    sourceIndex: p(l => Unit.isAtomic(l.unit)\n        ? l.unit.model.atomicHierarchy.atomSourceIndex.value(l.element)\n        // TODO: when implemented, this should map to the source index.\n        : l.element),\n    // Hierarchy\n    type_symbol: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.atoms.type_symbol.value(l.element)),\n    label_atom_id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.atoms.label_atom_id.value(l.element)),\n    auth_atom_id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.atoms.auth_atom_id.value(l.element)),\n    label_alt_id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.atoms.label_alt_id.value(l.element)),\n    label_comp_id: p(compId),\n    auth_comp_id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.atoms.auth_comp_id.value(l.element)),\n    pdbx_formal_charge: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.atoms.pdbx_formal_charge.value(l.element)),\n    // Derived\n    vdw_radius: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : VdwRadius(l.unit.model.atomicHierarchy.atoms.type_symbol.value(l.element))),\n};\nfunction compId(l) {\n    if (!Unit.isAtomic(l.unit))\n        notAtomic();\n    return l.unit.model.atomicHierarchy.atoms.label_comp_id.value(l.element);\n}\nfunction seqId(l) {\n    return !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.residues.label_seq_id.value(l.unit.residueIndex[l.element]);\n}\nfunction hasMicroheterogeneity(l) {\n    if (!Unit.isAtomic(l.unit))\n        notAtomic();\n    const entitySeq = l.unit.model.sequence.byEntityKey[eK(l)];\n    return entitySeq && entitySeq.sequence.microHet.has(seqId(l));\n}\nfunction microheterogeneityCompIds(l) {\n    if (!Unit.isAtomic(l.unit))\n        notAtomic();\n    const entitySeq = l.unit.model.sequence.byEntityKey[eK(l)];\n    if (entitySeq) {\n        return entitySeq.sequence.microHet.get(seqId(l)) || [compId(l)];\n    }\n    else {\n        return [compId(l)];\n    }\n}\nconst residue = {\n    key: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.residueIndex[l.element]),\n    group_PDB: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.residues.group_PDB.value(l.unit.residueIndex[l.element])),\n    label_seq_id: p(seqId),\n    auth_seq_id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.residues.auth_seq_id.value(l.unit.residueIndex[l.element])),\n    pdbx_PDB_ins_code: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.residues.pdbx_PDB_ins_code.value(l.unit.residueIndex[l.element])),\n    // Properties\n    isNonStandard: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : microheterogeneityCompIds(l).some(c => l.unit.model.properties.chemicalComponentMap.get(c).mon_nstd_flag[0] === 'n')),\n    hasMicroheterogeneity: p(hasMicroheterogeneity),\n    microheterogeneityCompIds: p(microheterogeneityCompIds),\n    secondary_structure_type: p(l => {\n        var _a;\n        if (!Unit.isAtomic(l.unit))\n            notAtomic();\n        const secStruc = (_a = SecondaryStructureProvider.get(l.structure).value) === null || _a === void 0 ? void 0 : _a.get(l.unit.invariantId);\n        return secStruc ? secStruc.type[secStruc.getIndex(l.unit.residueIndex[l.element])] : SecondaryStructureType.Flag.NA;\n    }),\n    secondary_structure_key: p(l => {\n        var _a;\n        if (!Unit.isAtomic(l.unit))\n            notAtomic();\n        const secStruc = (_a = SecondaryStructureProvider.get(l.structure).value) === null || _a === void 0 ? void 0 : _a.get(l.unit.invariantId);\n        return secStruc ? secStruc.key[secStruc.getIndex(l.unit.residueIndex[l.element])] : -1;\n    }),\n    chem_comp_type: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.properties.chemicalComponentMap.get(compId(l)).type),\n    residueSourceIndex: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.residueSourceIndex.value(l.unit.residueIndex[l.element])),\n};\nconst chain = {\n    key: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.chainIndex[l.element]),\n    label_asym_id: p(l => !Unit.isAtomic(l.unit) ? l.unit.coarseElements.asym_id.value(l.element) : l.unit.model.atomicHierarchy.chains.label_asym_id.value(l.unit.chainIndex[l.element])),\n    auth_asym_id: p(l => !Unit.isAtomic(l.unit) ? notAtomic() : l.unit.model.atomicHierarchy.chains.auth_asym_id.value(l.unit.chainIndex[l.element])),\n    label_entity_id: p(l => !Unit.isAtomic(l.unit) ? l.unit.coarseElements.entity_id.value(l.element) : l.unit.model.atomicHierarchy.chains.label_entity_id.value(l.unit.chainIndex[l.element]))\n};\nconst coarse = {\n    key: atom.key,\n    entityKey: p(l => !Unit.isCoarse(l.unit) ? notCoarse() : l.unit.coarseElements.entityKey[l.element]),\n    x: atom.x,\n    y: atom.y,\n    z: atom.z,\n    asym_id: p(l => !Unit.isCoarse(l.unit) ? notCoarse() : l.unit.coarseElements.asym_id.value(l.element)),\n    entity_id: p(l => !Unit.isCoarse(l.unit) ? notCoarse() : l.unit.coarseElements.entity_id.value(l.element)),\n    seq_id_begin: p(l => !Unit.isCoarse(l.unit) ? notCoarse() : l.unit.coarseElements.seq_id_begin.value(l.element)),\n    seq_id_end: p(l => !Unit.isCoarse(l.unit) ? notCoarse() : l.unit.coarseElements.seq_id_end.value(l.element)),\n    sphere_radius: p(l => !Unit.isSpheres(l.unit) ? notCoarse('spheres') : l.unit.coarseConformation.radius[l.element]),\n    sphere_rmsf: p(l => !Unit.isSpheres(l.unit) ? notCoarse('spheres') : l.unit.coarseConformation.rmsf[l.element]),\n    gaussian_weight: p(l => !Unit.isGaussians(l.unit) ? notCoarse('gaussians') : l.unit.coarseConformation.weight[l.element]),\n    gaussian_covariance_matrix: p(l => !Unit.isGaussians(l.unit) ? notCoarse('gaussians') : l.unit.coarseConformation.covariance_matrix[l.element])\n};\nfunction eK(l) {\n    switch (l.unit.kind) {\n        case Unit.Kind.Atomic:\n            return l.unit.model.atomicHierarchy.index.getEntityFromChain(l.unit.chainIndex[l.element]);\n        case Unit.Kind.Spheres:\n            return l.unit.model.coarseHierarchy.spheres.entityKey[l.element];\n        case Unit.Kind.Gaussians:\n            return l.unit.model.coarseHierarchy.gaussians.entityKey[l.element];\n    }\n}\nconst entity = {\n    key: p(eK),\n    id: p(l => l.unit.model.entities.data.id.value(eK(l))),\n    type: p(l => l.unit.model.entities.data.type.value(eK(l))),\n    src_method: p(l => l.unit.model.entities.data.src_method.value(eK(l))),\n    pdbx_description: p(l => l.unit.model.entities.data.pdbx_description.value(eK(l))),\n    formula_weight: p(l => l.unit.model.entities.data.formula_weight.value(eK(l))),\n    pdbx_number_of_molecules: p(l => l.unit.model.entities.data.pdbx_number_of_molecules.value(eK(l))),\n    details: p(l => l.unit.model.entities.data.details.value(eK(l))),\n    pdbx_mutation: p(l => l.unit.model.entities.data.pdbx_mutation.value(eK(l))),\n    pdbx_fragment: p(l => l.unit.model.entities.data.pdbx_fragment.value(eK(l))),\n    pdbx_ec: p(l => l.unit.model.entities.data.pdbx_ec.value(eK(l))),\n    pdbx_parent_entity_id: p(l => l.unit.model.entities.data.pdbx_parent_entity_id.value(eK(l))),\n    subtype: p(l => l.unit.model.entities.subtype.value(eK(l))),\n    prd_id: p(l => { var _a, _b; return (_b = (_a = l.unit.model.entities.prd_id) === null || _a === void 0 ? void 0 : _a.value(eK(l))) !== null && _b !== void 0 ? _b : ''; }),\n};\nconst _emptyList = [];\nconst unit = {\n    id: p(l => l.unit.id),\n    chainGroupId: p(l => l.unit.chainGroupId),\n    multiChain: p(l => Unit.Traits.is(l.unit.traits, Unit.Trait.MultiChain)),\n    object_primitive: p(l => l.unit.objectPrimitive),\n    operator_name: p(l => l.unit.conformation.operator.name),\n    instance_id: p(l => l.unit.conformation.operator.instanceId),\n    operator_key: p(l => l.unit.conformation.operator.key),\n    model_index: p(l => l.unit.model.modelNum),\n    model_label: p(l => l.unit.model.label),\n    model_entry_id: p(l => l.unit.model.entryId),\n    hkl: p(l => l.unit.conformation.operator.hkl),\n    spgrOp: p(l => l.unit.conformation.operator.spgrOp),\n    model_num: p(l => l.unit.model.modelNum),\n    pdbx_struct_assembly_id: p(l => { var _a; return ((_a = l.unit.conformation.operator.assembly) === null || _a === void 0 ? void 0 : _a.id) || SymmetryOperator.DefaultName; }),\n    pdbx_struct_oper_list_ids: p(l => { var _a; return ((_a = l.unit.conformation.operator.assembly) === null || _a === void 0 ? void 0 : _a.operList) || _emptyList; }),\n    struct_ncs_oper_id: p(l => l.unit.conformation.operator.ncsId),\n};\nconst StructureProperties = {\n    constant,\n    atom,\n    residue,\n    chain,\n    entity,\n    unit,\n    coarse\n};\nexport { StructureProperties };\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { MolScriptBuilder as MS } from '../../../../mol-script/language/builder.js';\nimport { Bundle } from './bundle.js';\nimport { Loci } from './loci.js';\nfunction isItems(schema) {\n    return !!schema.items;\n}\nfunction schemaItemToExpression(item) {\n    // NOTE: If needed, the schema item lookup can be significantly optimized\n    //       by accessing the data directly instead of constructing\n    //       the expression.\n    const { and } = MS.core.logic;\n    const { eq, gre: gte, lte } = MS.core.rel;\n    const { macromolecular, ihm, core } = MS.struct.atomProperty;\n    const propTests = {};\n    if (isDefined(item.label_entity_id)) {\n        propTests['entity-test'] = eq([macromolecular.label_entity_id(), item.label_entity_id]);\n    }\n    const chainTests = [];\n    if (isDefined(item.operator_name))\n        chainTests.push(eq([core.operatorName(), item.operator_name]));\n    if (isDefined(item.instance_id))\n        chainTests.push(eq([core.instanceId(), item.instance_id]));\n    if (isDefined(item.label_asym_id))\n        chainTests.push(eq([macromolecular.label_asym_id(), item.label_asym_id]));\n    if (isDefined(item.auth_asym_id))\n        chainTests.push(eq([macromolecular.auth_asym_id(), item.auth_asym_id]));\n    if (chainTests.length === 1) {\n        propTests['chain-test'] = chainTests[0];\n    }\n    else if (chainTests.length > 1) {\n        propTests['chain-test'] = and(chainTests);\n    }\n    const residueTests = [];\n    if (isDefined(item.label_seq_id)) {\n        residueTests.push(ihm.hasSeqId({ 0: item.label_seq_id }));\n    }\n    if (isDefined(item.auth_seq_id))\n        residueTests.push(eq([macromolecular.auth_seq_id(), item.auth_seq_id]));\n    if (isDefined(item.residue_index))\n        residueTests.push(eq([macromolecular.residueSourceIndex(), item.residue_index]));\n    if (isDefined(item.pdbx_PDB_ins_code))\n        residueTests.push(eq([macromolecular.pdbx_PDB_ins_code(), item.pdbx_PDB_ins_code]));\n    if (isDefined(item.beg_label_seq_id) || isDefined(item.end_label_seq_id)) {\n        residueTests.push(ihm.overlapsSeqIdRange({ beg: item.beg_label_seq_id, end: item.end_label_seq_id }));\n    }\n    if (isDefined(item.beg_auth_seq_id))\n        residueTests.push(gte([macromolecular.auth_seq_id(), item.beg_auth_seq_id]));\n    if (isDefined(item.end_auth_seq_id))\n        residueTests.push(lte([macromolecular.auth_seq_id(), item.end_auth_seq_id]));\n    if (residueTests.length === 1) {\n        propTests['residue-test'] = residueTests[0];\n    }\n    else if (residueTests.length > 1) {\n        propTests['residue-test'] = and(residueTests);\n    }\n    const atomTests = [];\n    if (isDefined(item.label_comp_id))\n        atomTests.push(eq([macromolecular.label_comp_id(), item.label_comp_id]));\n    if (isDefined(item.auth_comp_id))\n        atomTests.push(eq([macromolecular.auth_comp_id(), item.auth_comp_id]));\n    if (isDefined(item.atom_id))\n        atomTests.push(eq([macromolecular.id(), item.atom_id]));\n    if (isDefined(item.atom_index))\n        atomTests.push(eq([MS.struct.atomProperty.core.sourceIndex(), item.atom_index]));\n    if (isDefined(item.label_atom_id))\n        atomTests.push(eq([macromolecular.label_atom_id(), item.label_atom_id]));\n    if (isDefined(item.auth_atom_id))\n        atomTests.push(eq([macromolecular.auth_atom_id(), item.auth_atom_id]));\n    if (isDefined(item.type_symbol))\n        atomTests.push(eq([MS.struct.atomProperty.core.elementSymbol(), item.type_symbol.toUpperCase()]));\n    if (atomTests.length === 1) {\n        propTests['atom-test'] = atomTests[0];\n    }\n    else if (atomTests.length > 1) {\n        propTests['atom-test'] = and(atomTests);\n    }\n    return MS.struct.generator.atomGroups(propTests);\n}\nfunction toExpression(schema) {\n    const expressions = [];\n    forEachItem(schema, item => expressions.push(schemaItemToExpression(item)));\n    if (expressions.length === 1)\n        return expressions[0];\n    return unionExpression(expressions);\n}\nfunction unionExpression(expressions) {\n    return MS.struct.combinator.merge(expressions.map(e => MS.struct.modifier.union([e])));\n}\nfunction isDefined(value) {\n    return value !== undefined && value !== null;\n}\n/**\n * Iterate over all items in a structure element schema.\n * @param schema Schema to iterate over\n * @param f Function called for each item in the schema.\n *          The value passed to the function can be mutable and should not be\n *          modified => make a copy if the value is used outside the callback.\n */\nfunction forEachItem(schema, f) {\n    if (isItems(schema)) {\n        if (Array.isArray(schema.items)) {\n            if (schema.prefix) {\n                for (const item of schema.items) {\n                    f(Object.assign({}, schema.prefix, item));\n                }\n            }\n            else {\n                for (const item of schema.items) {\n                    f(item);\n                }\n            }\n        }\n        else {\n            const current = { ...schema.prefix };\n            const keys = Object.keys(schema.items);\n            const n = schema.items[keys[0]].length;\n            for (let i = 0; i < n; i++) {\n                for (const k of keys) {\n                    current[k] = schema.items[k][i];\n                }\n                f(current);\n            }\n        }\n    }\n    else {\n        f(schema);\n    }\n}\nfunction toLoci(structure, schema, queryContext) {\n    const expr = toExpression(schema);\n    return Loci.fromExpression(structure, expr, queryContext);\n}\nfunction toBundle(structure, schema, queryContext) {\n    const loci = toLoci(structure, schema, queryContext);\n    return Bundle.fromLoci(loci);\n}\nexport const Schema = {\n    forEachItem,\n    toExpression,\n    toLoci,\n    toBundle,\n};\n","/**\n * Copyright (c) 2017-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, ColumnHelpers } from '../../../mol-data/db.js';\nimport { getNumberType, NumberTypes, parseInt as fastParseInt, parseFloat as fastParseFloat } from '../common/text/number-parser.js';\nimport { areValuesEqualProvider } from '../common/text/column/token.js';\nexport function CifFile(blocks, name) {\n    return { name, blocks: blocks };\n}\nexport function CifBlock(categoryNames, categories, header, saveFrames = []) {\n    return {\n        categoryNames, header, categories, saveFrames,\n        getField(name) {\n            const [category, field] = name.split('.');\n            return categories[category].getField(field || '');\n        }\n    };\n}\nexport function CifSaveFrame(categoryNames, categories, header) {\n    return { categoryNames, header, categories };\n}\nexport function CifCategory(name, rowCount, fieldNames, fields) {\n    return { rowCount, name, fieldNames: [...fieldNames], getField(name) { return fields[name]; } };\n}\n(function (CifCategory) {\n    function empty(name) {\n        return { rowCount: 0, name, fieldNames: [], getField(name) { return void 0; } };\n    }\n    CifCategory.empty = empty;\n    ;\n    function ofFields(name, fields) {\n        const fieldNames = Object.keys(fields);\n        return {\n            rowCount: fieldNames.length > 0 ? fields[fieldNames[0]].rowCount : 0,\n            name,\n            fieldNames,\n            getField(name) { return fields[name]; }\n        };\n    }\n    CifCategory.ofFields = ofFields;\n    function ofTable(name, table) {\n        const fields = {};\n        for (const name of table._columns) {\n            fields[name] = CifField.ofColumn(table[name]);\n        }\n        return ofFields(name, fields);\n    }\n    CifCategory.ofTable = ofTable;\n})(CifCategory || (CifCategory = {}));\nexport var CifField;\n(function (CifField) {\n    function ofString(value) {\n        return ofStrings([value]);\n    }\n    CifField.ofString = ofString;\n    function ofStrings(values) {\n        const rowCount = values.length;\n        const str = row => { const ret = values[row]; if (!ret || ret === '.' || ret === '?')\n            return ''; return ret; };\n        const int = row => { const v = values[row]; return fastParseInt(v, 0, v.length) || 0; };\n        const float = row => { const v = values[row]; return fastParseFloat(v, 0, v.length) || 0; };\n        const valueKind = row => {\n            const v = values[row], l = v.length;\n            if (l > 1)\n                return Column.ValueKinds.Present;\n            if (l === 0)\n                return Column.ValueKinds.NotPresent;\n            const c = v.charCodeAt(0);\n            if (c === 46 /* . */)\n                return Column.ValueKinds.NotPresent;\n            if (c === 63 /* ? */)\n                return Column.ValueKinds.Unknown;\n            return Column.ValueKinds.Present;\n        };\n        return {\n            __array: void 0,\n            binaryEncoding: void 0,\n            isDefined: true,\n            rowCount,\n            str,\n            int,\n            float,\n            valueKind,\n            areValuesEqual: (rowA, rowB) => values[rowA] === values[rowB],\n            toStringArray: params => params ? ColumnHelpers.createAndFillArray(rowCount, str, params) : values,\n            toIntArray: params => ColumnHelpers.createAndFillArray(rowCount, int, params),\n            toFloatArray: params => ColumnHelpers.createAndFillArray(rowCount, float, params)\n        };\n    }\n    CifField.ofStrings = ofStrings;\n    function ofNumbers(values) {\n        const rowCount = values.length;\n        const str = row => { return '' + values[row]; };\n        const float = row => values[row];\n        const valueKind = row => Column.ValueKinds.Present;\n        const toFloatArray = (params) => {\n            if (!params || params.array && values instanceof params.array) {\n                return values;\n            }\n            else {\n                return ColumnHelpers.createAndFillArray(rowCount, float, params);\n            }\n        };\n        return {\n            __array: void 0,\n            binaryEncoding: void 0,\n            isDefined: true,\n            rowCount,\n            str,\n            int: float,\n            float,\n            valueKind,\n            areValuesEqual: (rowA, rowB) => values[rowA] === values[rowB],\n            toStringArray: params => ColumnHelpers.createAndFillArray(rowCount, str, params),\n            toIntArray: toFloatArray,\n            toFloatArray\n        };\n    }\n    CifField.ofNumbers = ofNumbers;\n    function ofTokens(tokens) {\n        const { data, indices, count: rowCount } = tokens;\n        const str = row => {\n            const ret = data.substring(indices[2 * row], indices[2 * row + 1]);\n            if (ret === '.' || ret === '?')\n                return '';\n            return ret;\n        };\n        const int = row => {\n            return fastParseInt(data, indices[2 * row], indices[2 * row + 1]) || 0;\n        };\n        const float = row => {\n            return fastParseFloat(data, indices[2 * row], indices[2 * row + 1]) || 0;\n        };\n        const valueKind = row => {\n            const s = indices[2 * row], l = indices[2 * row + 1] - s;\n            if (l > 1)\n                return Column.ValueKinds.Present;\n            if (l === 0)\n                return Column.ValueKinds.NotPresent;\n            const v = data.charCodeAt(s);\n            if (v === 46 /* . */)\n                return Column.ValueKinds.NotPresent;\n            if (v === 63 /* ? */)\n                return Column.ValueKinds.Unknown;\n            return Column.ValueKinds.Present;\n        };\n        return {\n            __array: void 0,\n            binaryEncoding: void 0,\n            isDefined: true,\n            rowCount,\n            str,\n            int,\n            float,\n            valueKind,\n            areValuesEqual: areValuesEqualProvider(tokens),\n            toStringArray: params => ColumnHelpers.createAndFillArray(rowCount, str, params),\n            toIntArray: params => ColumnHelpers.createAndFillArray(rowCount, int, params),\n            toFloatArray: params => ColumnHelpers.createAndFillArray(rowCount, float, params)\n        };\n    }\n    CifField.ofTokens = ofTokens;\n    function ofColumn(column) {\n        const { rowCount, valueKind, areValuesEqual, isDefined } = column;\n        let str;\n        let int;\n        let float;\n        switch (column.schema.valueType) {\n            case 'float':\n            case 'int':\n                str = row => { return '' + column.value(row); };\n                int = column.value;\n                float = column.value;\n                break;\n            case 'str':\n                str = column.value;\n                int = row => { const v = column.value(row); return fastParseInt(v, 0, v.length) || 0; };\n                float = row => { const v = column.value(row); return fastParseFloat(v, 0, v.length) || 0; };\n                break;\n            case 'list':\n                const { separator } = column.schema;\n                str = row => column.value(row).join(separator);\n                int = row => NaN;\n                float = row => NaN;\n                break;\n            default:\n                throw new Error(`unsupported valueType '${column.schema.valueType}'`);\n        }\n        return {\n            __array: void 0,\n            binaryEncoding: void 0,\n            isDefined,\n            rowCount,\n            str,\n            int,\n            float,\n            valueKind,\n            areValuesEqual,\n            toStringArray: params => ColumnHelpers.createAndFillArray(rowCount, str, params),\n            toIntArray: params => ColumnHelpers.createAndFillArray(rowCount, int, params),\n            toFloatArray: params => ColumnHelpers.createAndFillArray(rowCount, float, params)\n        };\n    }\n    CifField.ofColumn = ofColumn;\n    function ofUndefined(rowCount, schema) {\n        return ofColumn(Column.Undefined(rowCount, schema));\n    }\n    CifField.ofUndefined = ofUndefined;\n})(CifField || (CifField = {}));\nexport function tensorFieldNameGetter(field, rank, zeroIndexed, namingVariant) {\n    const offset = zeroIndexed ? 0 : 1;\n    switch (rank) {\n        case 1:\n            return namingVariant === 'brackets'\n                ? (i) => `${field}[${i + offset}]`\n                : (i) => `${field}_${i + offset}`;\n        case 2:\n            return namingVariant === 'brackets'\n                ? (i, j) => `${field}[${i + offset}][${j + offset}]`\n                : (i, j) => `${field}_${i + offset}${j + offset}`;\n        case 3:\n            return namingVariant === 'brackets'\n                ? (i, j, k) => `${field}[${i + offset}][${j + offset}][${k + offset}]`\n                : (i, j, k) => `${field}_${i + offset}${j + offset}${k + offset}`;\n        default:\n            throw new Error('Tensors with rank > 3 or rank 0 are currently not supported.');\n    }\n}\nexport function getTensor(category, space, row, getName) {\n    const ret = space.create();\n    if (space.rank === 1) {\n        const rows = space.dimensions[0];\n        for (let i = 0; i < rows; i++) {\n            const f = category.getField(getName(i));\n            space.set(ret, i, !!f ? f.float(row) : 0.0);\n        }\n    }\n    else if (space.rank === 2) {\n        const rows = space.dimensions[0], cols = space.dimensions[1];\n        for (let i = 0; i < rows; i++) {\n            for (let j = 0; j < cols; j++) {\n                const f = category.getField(getName(i, j));\n                space.set(ret, i, j, !!f ? f.float(row) : 0.0);\n            }\n        }\n    }\n    else if (space.rank === 3) {\n        const d0 = space.dimensions[0], d1 = space.dimensions[1], d2 = space.dimensions[2];\n        for (let i = 0; i < d0; i++) {\n            for (let j = 0; j < d1; j++) {\n                for (let k = 0; k < d2; k++) {\n                    const f = category.getField(getName(i, j, k));\n                    space.set(ret, i, j, k, !!f ? f.float(row) : 0.0);\n                }\n            }\n        }\n    }\n    else {\n        throw new Error('Tensors with rank > 3 or rank 0 are currently not supported.');\n    }\n    return ret;\n}\nexport function getCifFieldType(field) {\n    let floatCount = 0, hasStringOrScientific = false, undefinedCount = 0;\n    for (let i = 0, _i = field.rowCount; i < _i; i++) {\n        const k = field.valueKind(i);\n        if (k !== Column.ValueKinds.Present) {\n            undefinedCount++;\n            continue;\n        }\n        const type = getNumberType(field.str(i));\n        if (type === NumberTypes.Int)\n            continue;\n        else if (type === NumberTypes.Float)\n            floatCount++;\n        else {\n            hasStringOrScientific = true;\n            break;\n        }\n    }\n    // numbers in scientific notation and plain text are not distinguishable\n    if (hasStringOrScientific || undefinedCount === field.rowCount)\n        return Column.Schema.str;\n    if (floatCount > 0)\n        return Column.Schema.float;\n    return Column.Schema.int;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nfunction LinkedIndex(size) {\n    return new LinkedIndexImpl(size);\n}\nclass LinkedIndexImpl {\n    remove(i) {\n        const { prev, next } = this;\n        const p = prev[i], n = next[i];\n        if (p >= 0) {\n            next[p] = n;\n            prev[i] = -1;\n        }\n        if (n >= 0) {\n            prev[n] = p;\n            next[i] = -1;\n        }\n        if (i === this.head) {\n            if (p < 0)\n                this.head = n;\n            else\n                this.head = p;\n        }\n    }\n    has(i) {\n        return this.prev[i] >= 0 || this.next[i] >= 0 || this.head === i;\n    }\n    constructor(size) {\n        this.head = size > 0 ? 0 : -1;\n        this.prev = new Int32Array(size);\n        this.next = new Int32Array(size);\n        for (let i = 0; i < size; i++) {\n            this.next[i] = i + 1;\n            this.prev[i] = i - 1;\n        }\n        this.prev[0] = -1;\n        this.next[size - 1] = -1;\n    }\n}\nexport { LinkedIndex };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { iterableToArray } from '../util.js';\nvar IntMap;\n(function (IntMap) {\n    IntMap.Empty = new Map();\n    function keyArray(map) {\n        return iterableToArray(map.keys());\n    }\n    IntMap.keyArray = keyArray;\n    function Mutable() {\n        return new Map();\n    }\n    IntMap.Mutable = Mutable;\n    function asImmutable(map) {\n        return map;\n    }\n    IntMap.asImmutable = asImmutable;\n    function copy(map) {\n        const ret = Mutable();\n        const it = map.keys();\n        while (true) {\n            const { done, value } = it.next();\n            if (done)\n                break;\n            ret.set(value, map.get(value));\n        }\n        return ret;\n    }\n    IntMap.copy = copy;\n    function addFrom(map, src) {\n        const it = src.keys();\n        while (true) {\n            const { done, value } = it.next();\n            if (done)\n                break;\n            map.set(value, src.get(value));\n        }\n        return map;\n    }\n    IntMap.addFrom = addFrom;\n})(IntMap || (IntMap = {}));\nexport { IntMap };\n","/*\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from https://github.com/rcsb/mmtf-javascript\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { utf8Read } from '../utf8.js';\nexport function decodeMsgPack(buffer) {\n    return parse({ buffer, offset: 0, dataView: new DataView(buffer.buffer) });\n}\n/**\n * decode all key-value pairs of a map into an object\n */\nfunction map(state, length) {\n    const value = {};\n    for (let i = 0; i < length; i++) {\n        const key = parse(state);\n        value[key] = parse(state);\n    }\n    return value;\n}\n/**\n * decode binary array\n */\nfunction bin(state, length) {\n    // This approach to binary parsing wastes a bit of memory to trade for speed compared to:\n    //\n    //   let value = buffer.subarray(offset, offset + length); //new Uint8Array(buffer.buffer, offset, length);\n    //\n    // It turns out that using the view created by subarray probably uses DataView\n    // in the background, which causes the element access to be several times slower\n    // than creating the new byte array.\n    const value = new Uint8Array(length);\n    const o = state.offset;\n    for (let i = 0; i < length; i++)\n        value[i] = state.buffer[i + o];\n    state.offset += length;\n    return value;\n}\n/**\n * decode string\n */\nfunction str(state, length) {\n    const value = utf8Read(state.buffer, state.offset, length);\n    state.offset += length;\n    return value;\n}\n/**\n * decode array\n */\nfunction array(state, length) {\n    const value = new Array(length);\n    for (let i = 0; i < length; i++) {\n        value[i] = parse(state);\n    }\n    return value;\n}\n/**\n * recursively parse the MessagePack data and return decoded MessagePack data\n */\nfunction parse(state) {\n    const type = state.buffer[state.offset];\n    let value, length;\n    // Positive FixInt\n    if ((type & 0x80) === 0x00) {\n        state.offset++;\n        return type;\n    }\n    // FixMap\n    if ((type & 0xf0) === 0x80) {\n        length = type & 0x0f;\n        state.offset++;\n        return map(state, length);\n    }\n    // FixArray\n    if ((type & 0xf0) === 0x90) {\n        length = type & 0x0f;\n        state.offset++;\n        return array(state, length);\n    }\n    // FixStr\n    if ((type & 0xe0) === 0xa0) {\n        length = type & 0x1f;\n        state.offset++;\n        return str(state, length);\n    }\n    // Negative FixInt\n    if ((type & 0xe0) === 0xe0) {\n        value = state.dataView.getInt8(state.offset);\n        state.offset++;\n        return value;\n    }\n    switch (type) {\n        // nil\n        case 0xc0:\n            state.offset++;\n            return null;\n        // false\n        case 0xc2:\n            state.offset++;\n            return false;\n        // true\n        case 0xc3:\n            state.offset++;\n            return true;\n        // bin 8\n        case 0xc4:\n            length = state.dataView.getUint8(state.offset + 1);\n            state.offset += 2;\n            return bin(state, length);\n        // bin 16\n        case 0xc5:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return bin(state, length);\n        // bin 32\n        case 0xc6:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return bin(state, length);\n        // float 32\n        case 0xca:\n            value = state.dataView.getFloat32(state.offset + 1);\n            state.offset += 5;\n            return value;\n        // float 64\n        case 0xcb:\n            value = state.dataView.getFloat64(state.offset + 1);\n            state.offset += 9;\n            return value;\n        // uint8\n        case 0xcc:\n            value = state.buffer[state.offset + 1];\n            state.offset += 2;\n            return value;\n        // uint 16\n        case 0xcd:\n            value = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return value;\n        // uint 32\n        case 0xce:\n            value = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return value;\n        // int 8\n        case 0xd0:\n            value = state.dataView.getInt8(state.offset + 1);\n            state.offset += 2;\n            return value;\n        // int 16\n        case 0xd1:\n            value = state.dataView.getInt16(state.offset + 1);\n            state.offset += 3;\n            return value;\n        // int 32\n        case 0xd2:\n            value = state.dataView.getInt32(state.offset + 1);\n            state.offset += 5;\n            return value;\n        // str 8\n        case 0xd9:\n            length = state.dataView.getUint8(state.offset + 1);\n            state.offset += 2;\n            return str(state, length);\n        // str 16\n        case 0xda:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return str(state, length);\n        // str 32\n        case 0xdb:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return str(state, length);\n        // array 16\n        case 0xdc:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return array(state, length);\n        // array 32\n        case 0xdd:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return array(state, length);\n        // map 16:\n        case 0xde:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return map(state, length);\n        // map 32\n        case 0xdf:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return map(state, length);\n    }\n    throw new Error('Unknown type 0x' + type.toString(16));\n}\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { OrderedSet, SortedArray, Interval } from '../int.js';\nvar SortedRanges;\n(function (SortedRanges) {\n    function ofSortedRanges(array) { return SortedArray.ofSortedArray(array); }\n    SortedRanges.ofSortedRanges = ofSortedRanges;\n    function start(ranges) { return ranges[0]; }\n    SortedRanges.start = start;\n    function end(ranges) { return ranges[ranges.length - 1] + 1; }\n    SortedRanges.end = end;\n    function min(ranges) { return ranges[0]; }\n    SortedRanges.min = min;\n    function max(ranges) { return ranges[ranges.length - 1]; }\n    SortedRanges.max = max;\n    function size(ranges) {\n        let size = 0;\n        for (let i = 0, il = ranges.length; i < il; i += 2) {\n            size += ranges[i + 1] - ranges[i] + 1;\n        }\n        return size;\n    }\n    SortedRanges.size = size;\n    function count(ranges) { return ranges.length / 2; }\n    SortedRanges.count = count;\n    function startAt(ranges, index) {\n        return ranges[index * 2];\n    }\n    SortedRanges.startAt = startAt;\n    function endAt(ranges, index) {\n        return ranges[index * 2 + 1] + 1;\n    }\n    SortedRanges.endAt = endAt;\n    function minAt(ranges, index) {\n        return ranges[index * 2];\n    }\n    SortedRanges.minAt = minAt;\n    function maxAt(ranges, index) {\n        return ranges[index * 2 + 1];\n    }\n    SortedRanges.maxAt = maxAt;\n    function areEqual(a, b) {\n        if (a.length !== b.length)\n            return false;\n        for (let i = 0, il = a.length; i < il; ++i) {\n            if (a[i] !== b[i])\n                return false;\n        }\n        return true;\n    }\n    SortedRanges.areEqual = areEqual;\n    function forEach(ranges, f) {\n        let k = 0;\n        for (let i = 0, il = ranges.length; i < il; i += 2) {\n            for (let j = ranges[i], jl = ranges[i + 1]; j <= jl; ++j) {\n                f(j, k);\n                ++k;\n            }\n        }\n    }\n    SortedRanges.forEach = forEach;\n    /** Returns if a value of `set` is included in `ranges` */\n    function has(ranges, set) {\n        return firstIntersectionIndex(ranges, set) !== -1;\n    }\n    SortedRanges.has = has;\n    /** Returns if a value of `set` is included in `ranges` from given index */\n    function hasFrom(ranges, set, from) {\n        return firstIntersectionIndexFrom(ranges, set, from) !== -1;\n    }\n    SortedRanges.hasFrom = hasFrom;\n    function firstIntersectionIndex(ranges, set) {\n        return firstIntersectionIndexFrom(ranges, set, 0);\n    }\n    SortedRanges.firstIntersectionIndex = firstIntersectionIndex;\n    function firstIntersectionIndexFrom(ranges, set, from) {\n        if (minAt(ranges, from) > OrderedSet.max(set) || max(ranges) < OrderedSet.min(set))\n            return -1;\n        for (let i = from, il = count(ranges); i < il; ++i) {\n            const interval = Interval.ofRange(minAt(ranges, i), maxAt(ranges, i));\n            if (OrderedSet.areIntersecting(interval, set))\n                return i;\n        }\n        return -1;\n    }\n    SortedRanges.firstIntersectionIndexFrom = firstIntersectionIndexFrom;\n    function transientSegments(ranges, set) {\n        return new Iterator(ranges, set);\n    }\n    SortedRanges.transientSegments = transientSegments;\n    class Iterator {\n        updateValue() {\n            this.value.index = this.curIndex;\n            this.value.start = OrderedSet.findPredecessorIndex(this.set, startAt(this.ranges, this.curIndex));\n            this.value.end = OrderedSet.findPredecessorIndex(this.set, endAt(this.ranges, this.curIndex));\n        }\n        move() {\n            if (this.hasNext) {\n                this.updateValue();\n                this.curIndex = firstIntersectionIndexFrom(this.ranges, this.set, this.curIndex + 1);\n                this.hasNext = this.curIndex !== -1;\n            }\n            return this.value;\n        }\n        constructor(ranges, set) {\n            this.ranges = ranges;\n            this.set = set;\n            this.value = { index: 0, start: 0, end: 0 };\n            this.curIndex = 0;\n            this.hasNext = false;\n            this.curIndex = firstIntersectionIndex(ranges, set);\n            this.hasNext = this.curIndex !== -1;\n        }\n    }\n    SortedRanges.Iterator = Iterator;\n})(SortedRanges || (SortedRanges = {}));\nexport { SortedRanges };\n","/*\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar Type;\n(function (Type) {\n    function Variable(name, type, isConstraint) { return { kind: 'variable', name, type: type, isConstraint }; }\n    Type.Variable = Variable;\n    function Value(namespace, name, parent) { return { kind: 'value', namespace, name, parent }; }\n    Type.Value = Value;\n    function Container(namespace, name, child, alias) { return { kind: 'container', namespace, name, child, alias }; }\n    Type.Container = Container;\n    function Union(types) { return { kind: 'union', types }; }\n    Type.Union = Union;\n    function OneOf(namespace, name, type, values) {\n        const vals = Object.create(null);\n        for (const v of values)\n            vals[v] = true;\n        return { kind: 'oneof', namespace, name, type, values: vals };\n    }\n    Type.OneOf = OneOf;\n    Type.Any = { kind: 'any' };\n    Type.AnyValue = { kind: 'any-value' };\n    Type.Num = Value('', 'Number');\n    Type.Str = Value('', 'String');\n    Type.Bool = OneOf('', 'Bool', Type.Str, ['true', 'false']);\n    function oneOfValues({ values }) { return Object.keys(values).sort(); }\n    Type.oneOfValues = oneOfValues;\n})(Type || (Type = {}));\nexport { Type };\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { PrincipalAxes } from '../../../../mol-math/linear-algebra/matrix/principal-axes.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nconst tempPos = Vec3();\nexport function toPositionsArray(unit) {\n    const { elements, conformation } = unit;\n    const positions = new Float32Array(elements.length * 3);\n    for (let i = 0, il = elements.length; i < il; i++) {\n        conformation.invariantPosition(elements[i], tempPos);\n        Vec3.toArray(tempPos, positions, i * 3);\n    }\n    return positions;\n}\nexport function getPrincipalAxes(unit) {\n    const positions = toPositionsArray(unit);\n    return PrincipalAxes.ofPositions(positions);\n}\n","/**\n * Copyright (c) 2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { SortedArray } from '../../../../../mol-data/int.js';\nexport class ElementSetIntraBondCache {\n    constructor() {\n        this.data = new Map();\n    }\n    get(xs) {\n        const hash = SortedArray.hashCode(xs);\n        if (!this.data.has(hash))\n            return void 0;\n        for (const [s, b] of this.data.get(hash)) {\n            if (SortedArray.areEqual(xs, s))\n                return b;\n        }\n    }\n    set(xs, bonds) {\n        const hash = SortedArray.hashCode(xs);\n        if (this.data.has(hash)) {\n            const es = this.data.get(hash);\n            for (const e of es) {\n                if (SortedArray.areEqual(xs, e[0])) {\n                    e[1] = bonds;\n                    return;\n                }\n            }\n            es.push([xs, bonds]);\n        }\n        else {\n            this.data.set(hash, [[xs, bonds]]);\n        }\n    }\n    static get(model) {\n        if (!model._dynamicPropertyData.ElementSetIntraBondCache) {\n            model._dynamicPropertyData.ElementSetIntraBondCache = new ElementSetIntraBondCache();\n        }\n        return model._dynamicPropertyData.ElementSetIntraBondCache;\n    }\n}\n","/**\n * Copyright (c) 2022-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SortedArray } from '../../../../mol-data/int/sorted-array.js';\nimport { sortedCantorPairing } from '../../../../mol-data/util.js';\nimport { BondType } from '../../model/types.js';\nimport { Unit } from '../unit.js';\nconst EmptyUnitResonance = {\n    delocalizedTriplets: {\n        getThirdElement: () => undefined,\n        getTripletIndices: () => undefined,\n        triplets: []\n    }\n};\nexport function getResonance(unit) {\n    if (Unit.Traits.is(unit.traits, Unit.Trait.Water) || Unit.Traits.is(unit.traits, Unit.Trait.CoarseGrained)) {\n        return EmptyUnitResonance;\n    }\n    return {\n        delocalizedTriplets: getDelocalizedTriplets(unit)\n    };\n}\nfunction getDelocalizedTriplets(unit) {\n    const bonds = unit.bonds;\n    const { b, edgeProps, offset } = bonds;\n    const { order: _order, flags: _flags } = edgeProps;\n    const { elementAromaticRingIndices } = unit.rings;\n    const triplets = [];\n    const thirdElementMap = new Map();\n    const indicesMap = new Map();\n    const add = (a, b, c) => {\n        const index = triplets.length;\n        triplets.push(SortedArray.ofUnsortedArray([a, b, c]));\n        thirdElementMap.set(sortedCantorPairing(a, b), c);\n        if (indicesMap.has(a))\n            indicesMap.get(a).push(index);\n        else\n            indicesMap.set(a, [index]);\n    };\n    for (let i = 0; i < unit.elements.length; i++) {\n        if (elementAromaticRingIndices.has(i))\n            continue;\n        const count = offset[i + 1] - offset[i] + 1;\n        if (count < 2)\n            continue;\n        const deloBonds = [];\n        for (let t = offset[i], _t = offset[i + 1]; t < _t; t++) {\n            const f = _flags[t];\n            if (!BondType.is(f, BondType.Flag.Aromatic))\n                continue;\n            deloBonds.push(b[t]);\n        }\n        if (deloBonds.length >= 2) {\n            add(i, deloBonds[0], deloBonds[1]);\n            for (let j = 1, jl = deloBonds.length; j < jl; j++) {\n                add(i, deloBonds[j], deloBonds[0]);\n            }\n        }\n    }\n    return {\n        getThirdElement: (a, b) => {\n            return thirdElementMap.get(sortedCantorPairing(a, b));\n        },\n        getTripletIndices: (a) => {\n            return indicesMap.get(a);\n        },\n        triplets,\n    };\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { SymmetryOperator } from '../../../mol-math/geometry/symmetry-operator.js';\nimport { Model } from '../model.js';\nimport { GridLookup3D, Spacegroup } from '../../../mol-math/geometry.js';\nimport { computeIntraUnitBonds } from './unit/bonds.js';\nimport { VdwRadius } from '../model/properties/atomic.js';\nimport { BitFlags } from '../../../mol-util/index.js';\nimport { UnitRings } from './unit/rings.js';\nimport { IntMap, SortedArray, Segmentation } from '../../../mol-data/int.js';\nimport { hash2, hashFnv32a } from '../../../mol-data/util.js';\nimport { getAtomicPolymerElements, getCoarsePolymerElements, getAtomicGapElements, getCoarseGapElements, getNucleotideElements, getProteinElements } from './util/polymer.js';\nimport { getPrincipalAxes } from './util/principal-axes.js';\nimport { getBoundary, getFastBoundary } from '../../../mol-math/geometry/boundary.js';\nimport { Mat4, Vec3 } from '../../../mol-math/linear-algebra.js';\nimport { IndexPairBonds } from '../../../mol-model-formats/structure/property/bonds/index-pair.js';\nimport { ElementSetIntraBondCache } from './unit/bonds/element-set-intra-bond-cache.js';\nimport { ModelSymmetry } from '../../../mol-model-formats/structure/property/symmetry.js';\nimport { getResonance } from './unit/resonance.js';\nvar Unit;\n(function (Unit) {\n    let Kind;\n    (function (Kind) {\n        Kind[Kind[\"Atomic\"] = 0] = \"Atomic\";\n        Kind[Kind[\"Spheres\"] = 1] = \"Spheres\";\n        Kind[Kind[\"Gaussians\"] = 2] = \"Gaussians\";\n    })(Kind = Unit.Kind || (Unit.Kind = {}));\n    // To use with isolatedModules\n    let Kinds;\n    (function (Kinds) {\n        Kinds[Kinds[\"Atomic\"] = 0] = \"Atomic\";\n        Kinds[Kinds[\"Spheres\"] = 1] = \"Spheres\";\n        Kinds[Kinds[\"Gaussians\"] = 2] = \"Gaussians\";\n    })(Kinds = Unit.Kinds || (Unit.Kinds = {}));\n    function isAtomic(u) { return u.kind === Kind.Atomic; }\n    Unit.isAtomic = isAtomic;\n    function isCoarse(u) { return u.kind === Kind.Spheres || u.kind === Kind.Gaussians; }\n    Unit.isCoarse = isCoarse;\n    function isSpheres(u) { return u.kind === Kind.Spheres; }\n    Unit.isSpheres = isSpheres;\n    function isGaussians(u) { return u.kind === Kind.Gaussians; }\n    Unit.isGaussians = isGaussians;\n    function create(id, invariantId, chainGroupId, traits, kind, model, operator, elements, props) {\n        switch (kind) {\n            case Kind.Atomic: return new Atomic(id, invariantId, chainGroupId, traits, model, elements, SymmetryOperator.createMapping(operator, model.atomicConformation, getAtomicRadiusFunc(model)), props !== null && props !== void 0 ? props : AtomicProperties());\n            case Kind.Spheres: return createCoarse(id, invariantId, chainGroupId, traits, model, Kind.Spheres, elements, SymmetryOperator.createMapping(operator, model.coarseConformation.spheres, getSphereRadiusFunc(model)), props !== null && props !== void 0 ? props : CoarseProperties());\n            case Kind.Gaussians: return createCoarse(id, invariantId, chainGroupId, traits, model, Kind.Gaussians, elements, SymmetryOperator.createMapping(operator, model.coarseConformation.gaussians, getGaussianRadiusFunc(model)), props !== null && props !== void 0 ? props : CoarseProperties());\n        }\n    }\n    Unit.create = create;\n    function getUnitIndexMap(units) {\n        const unitIndexMap = IntMap.Mutable();\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            unitIndexMap.set(units[i].id, i);\n        }\n        return unitIndexMap;\n    }\n    function getTransformHash(units) {\n        const ids = [];\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            ids.push(units[i].id);\n        }\n        return hashFnv32a(ids);\n    }\n    function SymmetryGroup(units) {\n        const props = {};\n        return {\n            elements: units[0].elements,\n            units,\n            get unitIndexMap() {\n                if (props.unitIndexMap)\n                    return props.unitIndexMap;\n                props.unitIndexMap = getUnitIndexMap(units);\n                return props.unitIndexMap;\n            },\n            hashCode: hashUnit(units[0]),\n            transformHash: getTransformHash(units)\n        };\n    }\n    Unit.SymmetryGroup = SymmetryGroup;\n    (function (SymmetryGroup) {\n        function areInvariantElementsEqual(a, b) {\n            if (a.hashCode !== b.hashCode)\n                return false;\n            return SortedArray.areEqual(a.elements, b.elements);\n        }\n        SymmetryGroup.areInvariantElementsEqual = areInvariantElementsEqual;\n        function getUnitSymmetryGroupsIndexMap(symmetryGroups) {\n            const unitSymmetryGroupsIndexMap = IntMap.Mutable();\n            for (let i = 0, il = symmetryGroups.length; i < il; ++i) {\n                const sg = symmetryGroups[i];\n                for (let j = 0, jl = sg.units.length; j < jl; ++j) {\n                    unitSymmetryGroupsIndexMap.set(sg.units[j].id, i);\n                }\n            }\n            return unitSymmetryGroupsIndexMap;\n        }\n        SymmetryGroup.getUnitSymmetryGroupsIndexMap = getUnitSymmetryGroupsIndexMap;\n    })(SymmetryGroup = Unit.SymmetryGroup || (Unit.SymmetryGroup = {}));\n    function conformationId(unit) {\n        return Unit.isAtomic(unit) ? unit.model.atomicConformation.id : unit.model.coarseConformation.id;\n    }\n    Unit.conformationId = conformationId;\n    function hashUnit(u) {\n        return hash2(u.invariantId, SortedArray.hashCode(u.elements));\n    }\n    Unit.hashUnit = hashUnit;\n    let Trait;\n    (function (Trait) {\n        Trait[Trait[\"None\"] = 0] = \"None\";\n        Trait[Trait[\"MultiChain\"] = 1] = \"MultiChain\";\n        Trait[Trait[\"Partitioned\"] = 2] = \"Partitioned\";\n        Trait[Trait[\"FastBoundary\"] = 4] = \"FastBoundary\";\n        Trait[Trait[\"Water\"] = 8] = \"Water\";\n        Trait[Trait[\"CoarseGrained\"] = 16] = \"CoarseGrained\";\n    })(Trait = Unit.Trait || (Unit.Trait = {}));\n    let Traits;\n    (function (Traits) {\n        Traits.is = BitFlags.has;\n        Traits.create = BitFlags.create;\n    })(Traits = Unit.Traits || (Unit.Traits = {}));\n    function BaseProperties() {\n        return {};\n    }\n    function getAtomicRadiusFunc(model) {\n        const type_symbol = model.atomicHierarchy.atoms.type_symbol.value;\n        return (i) => VdwRadius(type_symbol(i));\n    }\n    function getSphereRadiusFunc(model) {\n        const r = model.coarseConformation.spheres.radius;\n        return (i) => r[i];\n    }\n    function getGaussianRadiusFunc(_model) {\n        // TODO: compute radius for gaussians\n        return (i) => 0;\n    }\n    /**\n     * A bulding block of a structure that corresponds\n     * to a \"natural group of atoms\" (most often a \"chain\")\n     * together with a transformation (rotation and translation)\n     * that is dynamically applied to the underlying atom set.\n     *\n     * An atom set can be referenced by multiple different units which\n     * makes construction of assemblies and spacegroups very efficient.\n     */\n    class Atomic {\n        get transientCache() {\n            if (this._transientCache === void 0)\n                this._transientCache = new Map();\n            return this._transientCache;\n        }\n        getChild(elements) {\n            if (elements.length === this.elements.length)\n                return this;\n            return new Atomic(this.id, this.invariantId, this.chainGroupId, this.traits, this.model, elements, this.conformation, AtomicProperties());\n        }\n        getCopy(id, invariantId, chainGroupId, options) {\n            const unit = new Atomic(id, invariantId, chainGroupId, this.traits, this.model, this.elements, this.conformation, this.props);\n            if (options === null || options === void 0 ? void 0 : options.propagateTransientCache) {\n                unit._transientCache = this._transientCache;\n            }\n            return unit;\n        }\n        applyOperator(id, operator, dontCompose = false) {\n            const op = dontCompose ? operator : SymmetryOperator.compose(this.conformation.operator, operator);\n            return new Atomic(id, this.invariantId, this.chainGroupId, this.traits, this.model, this.elements, SymmetryOperator.createMapping(op, this.model.atomicConformation, this.conformation.r), this.props);\n        }\n        remapModel(model, dynamicBonds, props) {\n            var _a, _b;\n            if (!props) {\n                props = {\n                    ...this.props,\n                    bonds: dynamicBonds && !((_b = (_a = this.props.bonds) === null || _a === void 0 ? void 0 : _a.props) === null || _b === void 0 ? void 0 : _b.canRemap)\n                        ? undefined\n                        : tryRemapBonds(this, this.props.bonds, model, dynamicBonds)\n                };\n                if (!Unit.isSameConformation(this, model)) {\n                    props.boundary = undefined;\n                    props.lookup3d = undefined;\n                    props.principalAxes = undefined;\n                }\n            }\n            let operator = this.conformation.operator;\n            const symmetry = ModelSymmetry.Provider.get(model);\n            if (operator.spgrOp !== -1 && symmetry && symmetry !== ModelSymmetry.Provider.get(this.model)) {\n                const [i, j, k] = operator.hkl;\n                const { toFractional } = symmetry.spacegroup.cell;\n                const ref = Vec3.transformMat4(Vec3(), Model.getCenter(model), toFractional);\n                operator = Spacegroup.getSymmetryOperatorRef(symmetry.spacegroup, operator.spgrOp, i, j, k, ref);\n            }\n            const conformation = (this.model.atomicConformation !== model.atomicConformation || operator !== this.conformation.operator)\n                ? SymmetryOperator.createMapping(operator, model.atomicConformation, getAtomicRadiusFunc(model))\n                : this.conformation;\n            return new Atomic(this.id, this.invariantId, this.chainGroupId, this.traits, model, this.elements, conformation, props);\n        }\n        get boundary() {\n            if (this.props.boundary)\n                return this.props.boundary;\n            const { x, y, z } = this.model.atomicConformation;\n            const radius = Model.getAtomicRadii(this.model);\n            this.props.boundary = Traits.is(this.traits, Trait.FastBoundary)\n                ? getFastBoundary({ x, y, z, radius, indices: this.elements })\n                : getBoundary({ x, y, z, radius, indices: this.elements });\n            return this.props.boundary;\n        }\n        get lookup3d() {\n            if (this.props.lookup3d)\n                return this.props.lookup3d;\n            const { x, y, z } = this.model.atomicConformation;\n            this.props.lookup3d = GridLookup3D({ x, y, z, indices: this.elements }, this.boundary);\n            return this.props.lookup3d;\n        }\n        get principalAxes() {\n            if (this.props.principalAxes)\n                return this.props.principalAxes;\n            this.props.principalAxes = getPrincipalAxes(this);\n            return this.props.principalAxes;\n        }\n        get bonds() {\n            var _a;\n            if (this.props.bonds)\n                return this.props.bonds;\n            const cache = ElementSetIntraBondCache.get(this.model);\n            let bonds = cache.get(this.elements);\n            if (!bonds) {\n                bonds = computeIntraUnitBonds(this);\n                if ((_a = bonds.props) === null || _a === void 0 ? void 0 : _a.cacheable) {\n                    cache.set(this.elements, bonds);\n                }\n            }\n            this.props.bonds = bonds;\n            return this.props.bonds;\n        }\n        get rings() {\n            if (this.props.rings)\n                return this.props.rings;\n            this.props.rings = UnitRings.create(this);\n            return this.props.rings;\n        }\n        get resonance() {\n            if (this.props.resonance)\n                return this.props.resonance;\n            this.props.resonance = getResonance(this);\n            return this.props.resonance;\n        }\n        get polymerElements() {\n            if (this.props.polymerElements)\n                return this.props.polymerElements;\n            this.props.polymerElements = getAtomicPolymerElements(this);\n            return this.props.polymerElements;\n        }\n        get gapElements() {\n            if (this.props.gapElements)\n                return this.props.gapElements;\n            this.props.gapElements = getAtomicGapElements(this);\n            return this.props.gapElements;\n        }\n        get nucleotideElements() {\n            if (this.props.nucleotideElements)\n                return this.props.nucleotideElements;\n            this.props.nucleotideElements = getNucleotideElements(this);\n            return this.props.nucleotideElements;\n        }\n        get proteinElements() {\n            if (this.props.proteinElements)\n                return this.props.proteinElements;\n            this.props.proteinElements = getProteinElements(this);\n            return this.props.proteinElements;\n        }\n        get residueCount() {\n            if (this.props.residueCount !== undefined)\n                return this.props.residueCount;\n            let residueCount = 0;\n            const residueIt = Segmentation.transientSegments(this.model.atomicHierarchy.residueAtomSegments, this.elements);\n            while (residueIt.hasNext) {\n                residueIt.move();\n                residueCount += 1;\n            }\n            this.props.residueCount = residueCount;\n            return this.props.residueCount;\n        }\n        getResidueIndex(elementIndex) {\n            return this.residueIndex[this.elements[elementIndex]];\n        }\n        constructor(id, invariantId, chainGroupId, traits, model, elements, conformation, props) {\n            this.kind = Kind.Atomic;\n            this.objectPrimitive = 'atomistic';\n            this._transientCache = undefined;\n            this.id = id;\n            this.invariantId = invariantId;\n            this.chainGroupId = chainGroupId;\n            this.traits = traits;\n            this.model = model;\n            this.elements = elements;\n            this.conformation = conformation;\n            this.residueIndex = model.atomicHierarchy.residueAtomSegments.index;\n            this.chainIndex = model.atomicHierarchy.chainAtomSegments.index;\n            this.props = props;\n        }\n    }\n    Unit.Atomic = Atomic;\n    function AtomicProperties() {\n        return BaseProperties();\n    }\n    class Coarse {\n        get transientCache() {\n            if (this._transientCache === void 0)\n                this._transientCache = new Map();\n            return this._transientCache;\n        }\n        getChild(elements) {\n            if (elements.length === this.elements.length)\n                return this; // lets call this an ugly temporary hack\n            return createCoarse(this.id, this.invariantId, this.chainGroupId, this.traits, this.model, this.kind, elements, this.conformation, CoarseProperties());\n        }\n        getCopy(id, invariantId, chainGroupId, options) {\n            const unit = createCoarse(id, invariantId, chainGroupId, this.traits, this.model, this.kind, this.elements, this.conformation, this.props);\n            if (options === null || options === void 0 ? void 0 : options.propagateTransientCache) {\n                unit._transientCache = this._transientCache;\n            }\n            return unit;\n        }\n        applyOperator(id, operator, dontCompose = false) {\n            const op = dontCompose ? operator : SymmetryOperator.compose(this.conformation.operator, operator);\n            return createCoarse(id, this.invariantId, this.chainGroupId, this.traits, this.model, this.kind, this.elements, SymmetryOperator.createMapping(op, this.getCoarseConformation(), this.conformation.r), this.props);\n        }\n        remapModel(model, dynamicBonds, props) {\n            const coarseConformation = this.getCoarseConformation();\n            const modelCoarseConformation = getCoarseConformation(this.kind, model);\n            if (!props) {\n                props = { ...this.props };\n                if (!Unit.isSameConformation(this, model)) { // TODO get rid of casting\n                    props.boundary = undefined;\n                    props.lookup3d = undefined;\n                    props.principalAxes = undefined;\n                }\n            }\n            const conformation = coarseConformation !== modelCoarseConformation\n                ? SymmetryOperator.createMapping(this.conformation.operator, modelCoarseConformation, this.kind === Unit.Kind.Spheres ? getSphereRadiusFunc(model) : getGaussianRadiusFunc(model))\n                : this.conformation;\n            return new Coarse(this.id, this.invariantId, this.chainGroupId, this.traits, model, this.kind, this.elements, conformation, props); // TODO get rid of casting\n        }\n        get boundary() {\n            if (this.props.boundary)\n                return this.props.boundary;\n            const { x, y, z } = this.getCoarseConformation();\n            const radius = this.getCoarseRadii();\n            this.props.boundary = Traits.is(this.traits, Trait.FastBoundary)\n                ? getFastBoundary({ x, y, z, radius, indices: this.elements })\n                : getBoundary({ x, y, z, radius, indices: this.elements });\n            return this.props.boundary;\n        }\n        get lookup3d() {\n            if (this.props.lookup3d)\n                return this.props.lookup3d;\n            // TODO: support sphere radius?\n            const { x, y, z } = this.getCoarseConformation();\n            this.props.lookup3d = GridLookup3D({ x, y, z, indices: this.elements }, this.boundary);\n            return this.props.lookup3d;\n        }\n        get principalAxes() {\n            if (this.props.principalAxes)\n                return this.props.principalAxes;\n            this.props.principalAxes = getPrincipalAxes(this); // TODO get rid of casting\n            return this.props.principalAxes;\n        }\n        get polymerElements() {\n            if (this.props.polymerElements)\n                return this.props.polymerElements;\n            this.props.polymerElements = getCoarsePolymerElements(this); // TODO get rid of casting\n            return this.props.polymerElements;\n        }\n        get gapElements() {\n            if (this.props.gapElements)\n                return this.props.gapElements;\n            this.props.gapElements = getCoarseGapElements(this); // TODO get rid of casting\n            return this.props.gapElements;\n        }\n        getCoarseConformation() {\n            return getCoarseConformation(this.kind, this.model);\n        }\n        getCoarseRadii() {\n            return getCoarseRadii(this.kind, this.model);\n        }\n        constructor(id, invariantId, chainGroupId, traits, model, kind, elements, conformation, props) {\n            this._transientCache = undefined;\n            this.kind = kind;\n            this.objectPrimitive = kind === Kind.Spheres ? 'sphere' : 'gaussian';\n            this.id = id;\n            this.invariantId = invariantId;\n            this.chainGroupId = chainGroupId;\n            this.traits = traits;\n            this.model = model;\n            this.elements = elements;\n            this.conformation = conformation;\n            this.coarseElements = kind === Kind.Spheres ? model.coarseHierarchy.spheres : model.coarseHierarchy.gaussians;\n            this.coarseConformation = (kind === Kind.Spheres ? model.coarseConformation.spheres : model.coarseConformation.gaussians);\n            this.props = props;\n        }\n    }\n    function getCoarseConformation(kind, model) {\n        return kind === Kind.Spheres ? model.coarseConformation.spheres : model.coarseConformation.gaussians;\n    }\n    function getCoarseRadii(kind, model) {\n        return kind === Kind.Spheres ? model.coarseConformation.spheres.radius : undefined; // Zero radius for gaussians\n    }\n    function CoarseProperties() {\n        return BaseProperties();\n    }\n    class Spheres extends Coarse {\n    }\n    Unit.Spheres = Spheres;\n    class Gaussians extends Coarse {\n    }\n    Unit.Gaussians = Gaussians;\n    function createCoarse(id, invariantId, chainGroupId, traits, model, kind, elements, conformation, props) {\n        return new Coarse(id, invariantId, chainGroupId, traits, model, kind, elements, conformation, props); // lets call this an ugly temporary hack\n    }\n    function areSameChainOperatorGroup(a, b) {\n        return a.chainGroupId === b.chainGroupId && a.conformation.operator.name === b.conformation.operator.name;\n    }\n    Unit.areSameChainOperatorGroup = areSameChainOperatorGroup;\n    function areOperatorsEqual(a, b) {\n        return Mat4.areEqual(a.conformation.operator.matrix, b.conformation.operator.matrix, 1e-6);\n    }\n    Unit.areOperatorsEqual = areOperatorsEqual;\n    function areConformationsEqual(a, b) {\n        if (a === b)\n            return true;\n        if (!SortedArray.areEqual(a.elements, b.elements))\n            return false;\n        return isSameConformation(a, b.model);\n    }\n    Unit.areConformationsEqual = areConformationsEqual;\n    function tryRemapBonds(a, old, model, dynamicBonds) {\n        // TODO: should include additional checks?\n        var _a;\n        if (!old)\n            return void 0;\n        if (a.model.atomicConformation.id === model.atomicConformation.id)\n            return old;\n        const oldIndex = IndexPairBonds.Provider.get(a.model);\n        if (oldIndex) {\n            const newIndex = IndexPairBonds.Provider.get(model);\n            // TODO: check the actual indices instead of just reference equality?\n            if (!newIndex || oldIndex === newIndex)\n                return old;\n            return void 0;\n        }\n        if (((_a = old.props) === null || _a === void 0 ? void 0 : _a.canRemap) || !dynamicBonds) {\n            return old;\n        }\n        return isSameConformation(a, model) ? old : void 0;\n    }\n    function isSameConformation(u, model) {\n        const coordsHistory = Model.CoordinatesHistory.get(Model.getRoot(model));\n        if (coordsHistory)\n            return coordsHistory.areEqual(u.elements, u.kind, model);\n        const xs = u.elements;\n        const { x: xa, y: ya, z: za } = u.conformation.coordinates;\n        const { x: xb, y: yb, z: zb } = getModelConformationOfKind(u.kind, model);\n        for (let i = 0, _i = xs.length; i < _i; i++) {\n            const u = xs[i];\n            if (xa[u] !== xb[u] || ya[u] !== yb[u] || za[u] !== zb[u])\n                return false;\n        }\n        return true;\n    }\n    Unit.isSameConformation = isSameConformation;\n    function getModelConformationOfKind(kind, model) {\n        return kind === Kind.Atomic ? model.atomicConformation :\n            kind === Kind.Spheres ? model.coarseConformation.spheres :\n                model.coarseConformation.gaussians;\n    }\n    Unit.getModelConformationOfKind = getModelConformationOfKind;\n    function getConformation(u) {\n        return getModelConformationOfKind(u.kind, u.model);\n    }\n    Unit.getConformation = getConformation;\n    function getModelHierarchyOfKind(kind, model) {\n        return kind === Kind.Atomic ? model.atomicHierarchy :\n            kind === Kind.Spheres ? model.coarseHierarchy.spheres :\n                model.coarseHierarchy.gaussians;\n    }\n    Unit.getModelHierarchyOfKind = getModelHierarchyOfKind;\n    function getHierarchy(u) {\n        return getModelHierarchyOfKind(u.kind, u.model);\n    }\n    Unit.getHierarchy = getHierarchy;\n})(Unit || (Unit = {}));\nexport { Unit };\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Unit } from '../../../../mol-model/structure.js';\nimport { Segmentation, OrderedSet, Interval, SortedArray } from '../../../../mol-data/int.js';\nimport { SortedRanges } from '../../../../mol-data/int/sorted-ranges.js';\nimport { isNucleic, isProtein } from '../../../../mol-model/structure/model/types.js';\nexport function getAtomicPolymerElements(unit) {\n    const indices = [];\n    const { elements, model } = unit;\n    const { residueAtomSegments } = unit.model.atomicHierarchy;\n    const { traceElementIndex } = model.atomicHierarchy.derived.residue;\n    const polymerIt = SortedRanges.transientSegments(unit.model.atomicRanges.polymerRanges, elements);\n    const residueIt = Segmentation.transientSegments(residueAtomSegments, elements);\n    while (polymerIt.hasNext) {\n        const polymerSegment = polymerIt.move();\n        residueIt.setSegment(polymerSegment);\n        while (residueIt.hasNext) {\n            const residueSegment = residueIt.move();\n            const { start, end, index } = residueSegment;\n            if (OrderedSet.areIntersecting(Interval.ofRange(elements[start], elements[end - 1]), elements)) {\n                const elementIndex = traceElementIndex[index];\n                indices.push(elementIndex === -1 ? residueAtomSegments.offsets[index] : elementIndex);\n            }\n        }\n    }\n    return SortedArray.ofSortedArray(indices);\n}\nexport function getCoarsePolymerElements(unit) {\n    const indices = [];\n    const { elements, model } = unit;\n    const { spheres, gaussians } = model.coarseHierarchy;\n    const polymerRanges = Unit.isSpheres(unit) ? spheres.polymerRanges : gaussians.polymerRanges;\n    const polymerIt = SortedRanges.transientSegments(polymerRanges, elements);\n    while (polymerIt.hasNext) {\n        const { start, end } = polymerIt.move();\n        for (let i = start; i < end; ++i) {\n            indices.push(elements[i]);\n        }\n    }\n    return SortedArray.ofSortedArray(indices);\n}\n//\nexport function getAtomicGapElements(unit) {\n    const indices = [];\n    const { elements, model, residueIndex } = unit;\n    const { residueAtomSegments } = unit.model.atomicHierarchy;\n    const { traceElementIndex } = model.atomicHierarchy.derived.residue;\n    const gapIt = SortedRanges.transientSegments(unit.model.atomicRanges.gapRanges, unit.elements);\n    while (gapIt.hasNext) {\n        const gapSegment = gapIt.move();\n        const indexStart = residueIndex[elements[gapSegment.start]];\n        const indexEnd = residueIndex[elements[gapSegment.end - 1]];\n        const elementIndexStart = traceElementIndex[indexStart];\n        const elementIndexEnd = traceElementIndex[indexEnd];\n        indices.push(elementIndexStart === -1 ? residueAtomSegments.offsets[indexStart] : elementIndexStart);\n        indices.push(elementIndexEnd === -1 ? residueAtomSegments.offsets[indexEnd] : elementIndexEnd);\n    }\n    return SortedArray.ofSortedArray(indices);\n}\nexport function getCoarseGapElements(unit) {\n    const indices = [];\n    const { elements, model } = unit;\n    const { spheres, gaussians } = model.coarseHierarchy;\n    const gapRanges = Unit.isSpheres(unit) ? spheres.gapRanges : gaussians.gapRanges;\n    const gapIt = SortedRanges.transientSegments(gapRanges, elements);\n    while (gapIt.hasNext) {\n        const { start, end } = gapIt.move();\n        indices.push(elements[start], elements[end - 1]);\n    }\n    return SortedArray.ofSortedArray(indices);\n}\n//\nexport function getNucleotideElements(unit) {\n    const indices = [];\n    const { elements, model } = unit;\n    const { chainAtomSegments, residueAtomSegments } = model.atomicHierarchy;\n    const { moleculeType, traceElementIndex } = model.atomicHierarchy.derived.residue;\n    const chainIt = Segmentation.transientSegments(chainAtomSegments, elements);\n    const residueIt = Segmentation.transientSegments(residueAtomSegments, elements);\n    while (chainIt.hasNext) {\n        residueIt.setSegment(chainIt.move());\n        while (residueIt.hasNext) {\n            const { index } = residueIt.move();\n            if (isNucleic(moleculeType[index])) {\n                const elementIndex = traceElementIndex[index];\n                indices.push(elementIndex === -1 ? residueAtomSegments.offsets[index] : elementIndex);\n            }\n        }\n    }\n    return SortedArray.ofSortedArray(indices);\n}\nexport function getProteinElements(unit) {\n    const indices = [];\n    const { elements, model } = unit;\n    const { chainAtomSegments, residueAtomSegments } = model.atomicHierarchy;\n    const { moleculeType, traceElementIndex } = model.atomicHierarchy.derived.residue;\n    const chainIt = Segmentation.transientSegments(chainAtomSegments, elements);\n    const residueIt = Segmentation.transientSegments(residueAtomSegments, elements);\n    while (chainIt.hasNext) {\n        residueIt.setSegment(chainIt.move());\n        while (residueIt.hasNext) {\n            const { index } = residueIt.move();\n            if (isProtein(moleculeType[index])) {\n                const elementIndex = traceElementIndex[index];\n                indices.push(elementIndex === -1 ? residueAtomSegments.offsets[index] : elementIndex);\n            }\n        }\n    }\n    return SortedArray.ofSortedArray(indices);\n}\n","/**\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { MoleculeType, isPolymer } from '../../../mol-model/structure/model/types.js';\nimport { Column, Table } from '../../../mol-data/db.js';\nimport { BasicSchema } from '../basic/schema.js';\nexport class EntityBuilder {\n    constructor() {\n        this.count = 0;\n        this.ids = [];\n        this.types = [];\n        this.descriptions = [];\n        this.compoundsMap = new Map();\n        this.namesMap = new Map();\n        this.heteroMap = new Map();\n        this.chainMap = new Map();\n    }\n    set(type, description) {\n        this.count += 1;\n        this.ids.push(`${this.count}`);\n        this.types.push(type);\n        this.descriptions.push([description]);\n    }\n    getEntityId(compId, moleculeType, chainId, options) {\n        if (moleculeType === MoleculeType.Water) {\n            if (this.waterId === undefined) {\n                this.set('water', (options === null || options === void 0 ? void 0 : options.customName) || 'Water');\n                this.waterId = `${this.count}`;\n            }\n            return this.waterId;\n        }\n        else if (isPolymer(moleculeType)) {\n            if (this.compoundsMap.has(chainId)) {\n                return this.compoundsMap.get(chainId);\n            }\n            else {\n                if (!this.chainMap.has(chainId)) {\n                    this.set('polymer', (options === null || options === void 0 ? void 0 : options.customName) || `Polymer ${this.chainMap.size + 1}`);\n                    this.chainMap.set(chainId, `${this.count}`);\n                }\n                return this.chainMap.get(chainId);\n            }\n        }\n        else {\n            if (!this.heteroMap.has(compId)) {\n                this.set('non-polymer', (options === null || options === void 0 ? void 0 : options.customName) || this.namesMap.get(compId) || compId);\n                this.heteroMap.set(compId, `${this.count}`);\n            }\n            return this.heteroMap.get(compId);\n        }\n    }\n    getEntityTable() {\n        return Table.ofPartialColumns(BasicSchema.entity, {\n            id: Column.ofStringArray(this.ids),\n            type: Column.ofStringAliasArray(this.types),\n            pdbx_description: Column.ofStringListArray(this.descriptions),\n        }, this.count);\n    }\n    setCompounds(compounds) {\n        for (let i = 0, il = compounds.length; i < il; ++i) {\n            const { chains, description } = compounds[i];\n            this.set('polymer', description);\n            for (let j = 0, jl = chains.length; j < jl; ++j) {\n                this.compoundsMap.set(chains[j], `${this.count}`);\n            }\n        }\n    }\n    setNames(names) {\n        names.forEach(n => this.namesMap.set(n[0], n[1]));\n    }\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { now } from '../mol-util/now.js';\nvar UUID;\n(function (UUID) {\n    const _btoa = typeof btoa !== 'undefined' ? btoa : (s) => Buffer.from(s).toString('base64');\n    const chars = [];\n    /** Creates a 22 characters 'base64' encoded UUID */\n    function create22() {\n        let d = (+new Date()) + now();\n        for (let i = 0; i < 16; i++) {\n            chars[i] = String.fromCharCode((d + Math.random() * 0xff) % 0xff | 0);\n            d = Math.floor(d / 0xff);\n        }\n        return _btoa(chars.join('')).replace(/\\+/g, '-').replace(/\\//g, '_').substr(0, 22);\n    }\n    UUID.create22 = create22;\n    function createv4() {\n        let d = (+new Date()) + now();\n        const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            const r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return uuid;\n    }\n    UUID.createv4 = createv4;\n    function is(x) {\n        return typeof x === 'string';\n    }\n    UUID.is = is;\n})(UUID || (UUID = {}));\nexport { UUID };\n","/**\n * Copyright (c) 2017-2025 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Yakov Pechersky <ffxen158@gmail.com>\n */\nimport { BondType } from '../../../../mol-model/structure/model/types.js';\nimport { Column } from '../../../../mol-data/db.js';\nimport { SortedArray } from '../../../../mol-data/int.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { getInterBondOrderFromTable } from '../../../../mol-model/structure/model/properties/atomic/bonds.js';\nimport { FormatPropertyProvider } from '../../common/property.js';\nexport var StructConn;\n(function (StructConn) {\n    StructConn.Descriptor = {\n        name: 'struct_conn',\n        cifExport: {\n            prefix: '',\n            categories: [{\n                    name: 'struct_conn',\n                    instance(ctx) {\n                        const p = StructConn.Provider.get(ctx.firstModel);\n                        if (!p || p.entries.length === 0)\n                            return CifWriter.Category.Empty;\n                        const structure = ctx.structures[0];\n                        const indices = [];\n                        for (const e of p.entries) {\n                            if (hasAtom(structure, e.partnerA.atomIndex) &&\n                                hasAtom(structure, e.partnerB.atomIndex)) {\n                                indices[indices.length] = e.rowIndex;\n                            }\n                        }\n                        return CifWriter.Category.ofTable(p.data, indices);\n                    }\n                }]\n        }\n    };\n    StructConn.Provider = FormatPropertyProvider.create(StructConn.Descriptor);\n    /**\n     * Heuristic to test if StructConn likely provides all atomic bonds by\n     * checking if the fraction of bonds and atoms is high (> 0.95).\n     */\n    function isExhaustive(model) {\n        const structConn = StructConn.Provider.get(model);\n        return !!structConn && (structConn.entries.length / model.atomicConformation.atomId.rowCount) > 0.95;\n    }\n    StructConn.isExhaustive = isExhaustive;\n    function hasAtom({ units }, element) {\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            if (SortedArray.indexOf(units[i].elements, element) >= 0)\n                return true;\n        }\n        return false;\n    }\n    function getAtomIndexFromEntries(entries) {\n        const m = new Map();\n        for (const e of entries) {\n            const { partnerA: { atomIndex: iA }, partnerB: { atomIndex: iB } } = e;\n            if (m.has(iA))\n                m.get(iA).push(e);\n            else\n                m.set(iA, [e]);\n            if (m.has(iB))\n                m.get(iB).push(e);\n            else\n                m.set(iB, [e]);\n        }\n        return m;\n    }\n    StructConn.getAtomIndexFromEntries = getAtomIndexFromEntries;\n    function getEntriesFromStructConn(struct_conn, model) {\n        const { conn_type_id, pdbx_dist_value, pdbx_value_order } = struct_conn;\n        const p1 = {\n            label_asym_id: struct_conn.ptnr1_label_asym_id,\n            label_seq_id: struct_conn.ptnr1_label_seq_id,\n            auth_seq_id: struct_conn.ptnr1_auth_seq_id,\n            label_atom_id: struct_conn.ptnr1_label_atom_id,\n            label_alt_id: struct_conn.pdbx_ptnr1_label_alt_id,\n            ins_code: struct_conn.pdbx_ptnr1_PDB_ins_code,\n            symmetry: struct_conn.ptnr1_symmetry\n        };\n        const p2 = {\n            label_asym_id: struct_conn.ptnr2_label_asym_id,\n            label_seq_id: struct_conn.ptnr2_label_seq_id,\n            auth_seq_id: struct_conn.ptnr2_auth_seq_id,\n            label_atom_id: struct_conn.ptnr2_label_atom_id,\n            label_alt_id: struct_conn.pdbx_ptnr2_label_alt_id,\n            ins_code: struct_conn.pdbx_ptnr2_PDB_ins_code,\n            symmetry: struct_conn.ptnr2_symmetry\n        };\n        const entityIds = Array.from(model.entities.data.id.toArray());\n        const _p = (row, ps) => {\n            if (ps.label_asym_id.valueKind(row) !== Column.ValueKinds.Present)\n                return void 0;\n            const asymId = ps.label_asym_id.value(row);\n            const atomName = ps.label_atom_id.value(row);\n            // turns out \"mismat\" records might not have atom name value\n            if (!atomName)\n                return undefined;\n            // prefer auth_seq_id, but if it is absent, then fall back to label_seq_id\n            const resId = (ps.auth_seq_id.valueKind(row) === Column.ValueKind.Present) ?\n                ps.auth_seq_id.value(row) :\n                ps.label_seq_id.value(row);\n            const resInsCode = ps.ins_code.value(row);\n            const altId = ps.label_alt_id.value(row);\n            for (const eId of entityIds) {\n                const residueIndex = model.atomicHierarchy.index.findResidue(eId, asymId, resId, resInsCode);\n                if (residueIndex < 0)\n                    continue;\n                const atomIndex = model.atomicHierarchy.index.findAtomOnResidue(residueIndex, atomName, altId);\n                if (atomIndex < 0)\n                    continue;\n                return { residueIndex, atomIndex, symmetry: ps.symmetry.value(row) };\n            }\n            return void 0;\n        };\n        const entries = [];\n        for (let i = 0; i < struct_conn._rowCount; i++) {\n            const partnerA = _p(i, p1);\n            const partnerB = _p(i, p2);\n            if (partnerA === undefined || partnerB === undefined)\n                continue;\n            const type = conn_type_id.value(i);\n            const orderType = (pdbx_value_order.value(i) || '');\n            let flags = BondType.Flag.None;\n            let order = 1;\n            switch (orderType) {\n                case 'sing':\n                    order = 1;\n                    break;\n                case 'doub':\n                    order = 2;\n                    break;\n                case 'trip':\n                    order = 3;\n                    break;\n                case 'quad':\n                    order = 4;\n                    break;\n                default:\n                    order = getInterBondOrderFromTable(struct_conn.ptnr1_label_comp_id.value(i), struct_conn.ptnr1_label_atom_id.value(i), struct_conn.ptnr2_label_comp_id.value(i), struct_conn.ptnr2_label_atom_id.value(i));\n            }\n            switch (type) {\n                case 'covale':\n                    flags = BondType.Flag.Covalent;\n                    break;\n                case 'disulf':\n                    flags = BondType.Flag.Covalent | BondType.Flag.Disulfide;\n                    break;\n                case 'hydrog':\n                    flags = BondType.Flag.HydrogenBond;\n                    break;\n                case 'metalc':\n                    flags = BondType.Flag.MetallicCoordination;\n                    break;\n            }\n            entries.push({\n                rowIndex: i, flags, order, distance: pdbx_dist_value.value(i), partnerA, partnerB\n            });\n        }\n        return entries;\n    }\n    StructConn.getEntriesFromStructConn = getEntriesFromStructConn;\n})(StructConn || (StructConn = {}));\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nexport function TableLegend(table) {\n    return { kind: 'table-legend', table };\n}\nexport function ScaleLegend(minLabel, maxLabel, colors) {\n    return { kind: 'scale-legend', minLabel, maxLabel, colors };\n}\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3 } from '../linear-algebra.js';\nimport { OrderedSet } from '../../mol-data/int.js';\nimport { BoundaryHelper } from './boundary-helper.js';\nimport { Box3D } from '../geometry/primitives/box3d.js';\nimport { Sphere3D } from '../geometry/primitives/sphere3d.js';\n// avoiding namespace lookup improved performance in Chrome (Aug 2020)\nconst v3set = Vec3.set;\nconst boundaryHelperCoarse = new BoundaryHelper('14');\nconst boundaryHelperFine = new BoundaryHelper('98');\nfunction getBoundaryHelper(count) {\n    return count > 10000 ? boundaryHelperCoarse : boundaryHelperFine;\n}\nexport function getFastBoundary(data) {\n    const box = Box3D.computeBounding(data);\n    return { box, sphere: Sphere3D.fromBox3D(Sphere3D(), box) };\n}\nconst p = Vec3();\nexport function getBoundary(data) {\n    const { x, y, z, radius, indices } = data;\n    const n = OrderedSet.size(indices);\n    if (n > 250000) {\n        return getFastBoundary(data);\n    }\n    const boundaryHelper = getBoundaryHelper(n);\n    boundaryHelper.reset();\n    for (let t = 0; t < n; t++) {\n        const i = OrderedSet.getAt(indices, t);\n        v3set(p, x[i], y[i], z[i]);\n        boundaryHelper.includePositionRadius(p, (radius && radius[i]) || 0);\n    }\n    boundaryHelper.finishedIncludeStep();\n    for (let t = 0; t < n; t++) {\n        const i = OrderedSet.getAt(indices, t);\n        v3set(p, x[i], y[i], z[i]);\n        boundaryHelper.radiusPositionRadius(p, (radius && radius[i]) || 0);\n    }\n    const sphere = boundaryHelper.getSphere();\n    if (!radius && Sphere3D.hasExtrema(sphere) && n <= sphere.extrema.length) {\n        const extrema = [];\n        for (let t = 0; t < n; t++) {\n            const i = OrderedSet.getAt(indices, t);\n            extrema.push(Vec3.create(x[i], y[i], z[i]));\n        }\n        Sphere3D.setExtrema(sphere, extrema);\n    }\n    return { box: boundaryHelper.getBox(), sphere };\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport function arrayLess(arr, i, j) {\n    return arr[i] - arr[j];\n}\nexport function arraySwap(arr, i, j) {\n    const temp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = temp;\n}\nfunction medianPivotIndex(data, cmp, l, r) {\n    const m = (l + r) >> 1;\n    if (cmp(data, l, r) > 0)\n        return cmp(data, l, m) > 0 ? cmp(data, m, r) > 0 ? m : r : l;\n    else\n        return cmp(data, r, m) > 0 ? cmp(data, m, l) > 0 ? m : l : r;\n}\nfunction partition(ctx, l, r) {\n    const { cmp, swap, data, parts } = ctx;\n    let equals = l + 1, tail = r;\n    // move the median to the 1st spot\n    swap(data, l, medianPivotIndex(data, cmp, l, r));\n    while (cmp(data, tail, l) > 0) {\n        --tail;\n    }\n    for (let i = l + 1; i <= tail; i++) {\n        const c = cmp(data, i, l);\n        if (c > 0) {\n            swap(data, i, tail);\n            --tail;\n            while (cmp(data, tail, l) > 0) {\n                --tail;\n            }\n            i--;\n        }\n        else if (c === 0) {\n            swap(data, i, equals);\n            equals++;\n        }\n    }\n    // move the medians to the correct spots\n    for (let i = l; i < equals; i++) {\n        swap(data, i, l + tail - i);\n    }\n    parts[0] = tail - equals + l + 1;\n    parts[1] = tail;\n}\nfunction insertionSort({ data, cmp, swap }, start, end) {\n    for (let i = start + 1; i <= end; i++) {\n        let j = i - 1;\n        while (j >= start && cmp(data, j, j + 1) > 0) {\n            swap(data, j, j + 1);\n            j = j - 1;\n        }\n    }\n}\nfunction quickSort(ctx, low, high) {\n    const { parts } = ctx;\n    while (low < high) {\n        if (high - low < 16) {\n            insertionSort(ctx, low, high);\n            return;\n        }\n        partition(ctx, low, high);\n        const li = parts[0], ri = parts[1];\n        if (li - low < high - ri) {\n            quickSort(ctx, low, li - 1);\n            low = ri + 1;\n        }\n        else {\n            quickSort(ctx, ri + 1, high);\n            high = li - 1;\n        }\n    }\n}\nfunction partitionArrayAsc(data, parts, l, r) {\n    let equals = l + 1, tail = r;\n    // move the median to the 1st spot\n    arraySwap(data, l, medianPivotIndex(data, arrayLess, l, r));\n    const pivot = data[l];\n    while (data[tail] > pivot) {\n        --tail;\n    }\n    for (let i = l + 1; i <= tail; i++) {\n        const v = data[i];\n        if (v > pivot) {\n            arraySwap(data, i, tail);\n            --tail;\n            while (data[tail] > pivot) {\n                --tail;\n            }\n            i--;\n        }\n        else if (v === pivot) {\n            arraySwap(data, i, equals);\n            ++equals;\n        }\n    }\n    // move all medians to the correct spots\n    for (let i = l; i < equals; i++) {\n        arraySwap(data, i, l + tail - i);\n    }\n    parts[0] = tail - equals + l + 1;\n    parts[1] = tail;\n}\nfunction insertionSortArrayAsc(data, start, end) {\n    for (let i = start + 1; i <= end; i++) {\n        const key = data[i];\n        let j = i - 1;\n        while (j >= start && data[j] > key) {\n            data[j + 1] = data[j];\n            j = j - 1;\n        }\n        data[j + 1] = key;\n    }\n}\nfunction quickSortArrayAsc(data, parts, low, high) {\n    while (low < high) {\n        if (high - low < 16) {\n            insertionSortArrayAsc(data, low, high);\n            return;\n        }\n        partitionArrayAsc(data, parts, low, high);\n        const li = parts[0], ri = parts[1];\n        if (li - low < high - ri) {\n            quickSortArrayAsc(data, parts, low, li - 1);\n            low = ri + 1;\n        }\n        else {\n            quickSortArrayAsc(data, parts, ri + 1, high);\n            high = li - 1;\n        }\n    }\n}\nexport function sortArray(data, cmp = arrayLess) {\n    return sortArrayRange(data, 0, data.length, cmp);\n}\nexport function sortArrayRange(data, start, end, cmp = arrayLess) {\n    if (cmp === arrayLess)\n        quickSortArrayAsc(data, [0, 0], start, end - 1);\n    else\n        quickSort({ data, cmp, swap: arraySwap, parts: [0, 0] }, start, end - 1);\n    return data;\n}\nexport function sort(data, start, end, cmp, swap) {\n    const ctx = { data, cmp, swap, parts: [0, 0] };\n    quickSort(ctx, start, end - 1);\n    return data;\n}\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Gianluca Tomasello <giagitom@gmail.com>\n */\nimport { Result } from './common.js';\nimport { Box3D } from '../primitives/box3d.js';\nimport { Vec3 } from '../../linear-algebra.js';\nimport { OrderedSet } from '../../../mol-data/int.js';\nimport { FibonacciHeap } from '../../../mol-util/fibonacci-heap.js';\nimport { memoize1 } from '../../../mol-util/memoize.js';\nimport { Ray3D } from '../primitives/ray3d.js';\nfunction GridLookup3D(data, boundary, cellSizeOrCount) {\n    return new GridLookup3DImpl(data, boundary, cellSizeOrCount);\n}\nexport { GridLookup3D };\nclass GridLookup3DImpl {\n    find(x, y, z, radius, result) {\n        this.ctx.x = x;\n        this.ctx.y = y;\n        this.ctx.z = z;\n        this.ctx.radius = radius;\n        this.ctx.isCheck = false;\n        const ret = result !== null && result !== void 0 ? result : this.result;\n        query(this.ctx, ret);\n        return ret;\n    }\n    nearest(x, y, z, k = 1, stopIf, result) {\n        this.ctx.x = x;\n        this.ctx.y = y;\n        this.ctx.z = z;\n        this.ctx.k = k;\n        this.ctx.stopIf = stopIf;\n        const ret = result !== null && result !== void 0 ? result : this.result;\n        queryNearest(this.ctx, ret);\n        return ret;\n    }\n    check(x, y, z, radius) {\n        this.ctx.x = x;\n        this.ctx.y = y;\n        this.ctx.z = z;\n        this.ctx.radius = radius;\n        this.ctx.isCheck = true;\n        return query(this.ctx, this.result);\n    }\n    approxNearest(x, y, z, radius, result) {\n        this.ctx.x = x;\n        this.ctx.y = y;\n        this.ctx.z = z;\n        this.ctx.radius = radius;\n        this.ctx.isCheck = false;\n        const ret = result !== null && result !== void 0 ? result : this.result;\n        approxQueryNearest(this.ctx, ret);\n        return ret;\n    }\n    constructor(data, boundary, cellSizeOrCount) {\n        const structure = build(data, boundary, cellSizeOrCount);\n        this.ctx = createContext(structure);\n        this.boundary = { box: structure.boundingBox, sphere: structure.boundingSphere };\n        this.buckets = { offset: structure.bucketOffset, count: structure.bucketCounts, array: structure.bucketArray };\n        this.result = Result.create();\n    }\n}\nfunction _build(state) {\n    const { expandedBox, size: [sX, sY, sZ], data: { x: px, y: py, z: pz, radius, indices }, elementCount, delta } = state;\n    const n = sX * sY * sZ;\n    const { min: [minX, minY, minZ] } = expandedBox;\n    let maxRadius = 0;\n    let bucketCount = 0;\n    const grid = new Uint32Array(n);\n    const bucketIndex = new Int32Array(elementCount);\n    for (let t = 0; t < elementCount; t++) {\n        const i = OrderedSet.getAt(indices, t);\n        const x = Math.floor((px[i] - minX) / delta[0]);\n        const y = Math.floor((py[i] - minY) / delta[1]);\n        const z = Math.floor((pz[i] - minZ) / delta[2]);\n        const idx = (((x * sY) + y) * sZ) + z;\n        if ((grid[idx] += 1) === 1) {\n            bucketCount += 1;\n        }\n        bucketIndex[t] = idx;\n    }\n    if (radius) {\n        for (let t = 0; t < elementCount; t++) {\n            const i = OrderedSet.getAt(indices, t);\n            if (radius[i] > maxRadius)\n                maxRadius = radius[i];\n        }\n    }\n    const bucketCounts = new Int32Array(bucketCount);\n    for (let i = 0, j = 0; i < n; i++) {\n        const c = grid[i];\n        if (c > 0) {\n            grid[i] = j + 1;\n            bucketCounts[j] = c;\n            j += 1;\n        }\n    }\n    const bucketOffset = new Uint32Array(bucketCount);\n    for (let i = 1; i < bucketCount; ++i) {\n        bucketOffset[i] += bucketOffset[i - 1] + bucketCounts[i - 1];\n    }\n    const bucketFill = new Int32Array(bucketCount);\n    const bucketArray = new Int32Array(elementCount);\n    for (let i = 0; i < elementCount; i++) {\n        const bucketIdx = grid[bucketIndex[i]];\n        if (bucketIdx > 0) {\n            const k = bucketIdx - 1;\n            bucketArray[bucketOffset[k] + bucketFill[k]] = i;\n            bucketFill[k] += 1;\n        }\n    }\n    return {\n        size: state.size,\n        bucketArray,\n        bucketCounts,\n        bucketOffset,\n        grid,\n        delta,\n        min: state.expandedBox.min,\n        data: state.data,\n        maxRadius,\n        expandedBox: state.expandedBox,\n        boundingBox: state.boundingBox,\n        boundingSphere: state.boundingSphere\n    };\n}\nconst MaxVolume = 2 ** 24;\nfunction build(data, boundary, cellSizeOrCount) {\n    // need to expand the grid bounds to avoid rounding errors\n    const expandedBox = Box3D.expand(Box3D(), boundary.box, Vec3.create(0.5, 0.5, 0.5));\n    const { indices } = data;\n    const S = Box3D.size(Vec3(), expandedBox);\n    let delta, size;\n    const elementCount = OrderedSet.size(indices);\n    const cellCount = typeof cellSizeOrCount === 'number' ? cellSizeOrCount : 32;\n    const cellSize = Array.isArray(cellSizeOrCount) && cellSizeOrCount;\n    if (cellSize && !Vec3.isZero(cellSize)) {\n        size = [Math.ceil(S[0] / cellSize[0]), Math.ceil(S[1] / cellSize[1]), Math.ceil(S[2] / cellSize[2])];\n        delta = cellSize;\n    }\n    else if (elementCount > 0) {\n        // size of the box\n        // required \"grid volume\" so that each cell contains on average 'cellCount' elements.\n        const V = Math.ceil(elementCount / cellCount);\n        const f = Math.pow(V / (S[0] * S[1] * S[2]), 1 / 3);\n        size = [Math.ceil(S[0] * f), Math.ceil(S[1] * f), Math.ceil(S[2] * f)];\n        delta = [S[0] / size[0], S[1] / size[1], S[2] / size[2]];\n    }\n    else {\n        delta = S;\n        size = [1, 1, 1];\n    }\n    // guard against overly large grids\n    const volume = size[0] * size[1] * size[2];\n    if (volume > MaxVolume) {\n        const f = Math.cbrt(volume / MaxVolume);\n        size = [Math.ceil(size[0] / f), Math.ceil(size[1] / f), Math.ceil(size[2] / f)];\n        delta = [S[0] / size[0], S[1] / size[1], S[2] / size[2]];\n    }\n    const inputData = {\n        x: data.x,\n        y: data.y,\n        z: data.z,\n        indices,\n        radius: data.radius\n    };\n    const state = {\n        size,\n        data: inputData,\n        expandedBox,\n        boundingBox: boundary.box,\n        boundingSphere: boundary.sphere,\n        elementCount,\n        delta\n    };\n    return _build(state);\n}\nfunction createContext(grid) {\n    return { grid, x: 0.1, y: 0.1, z: 0.1, k: 1, stopIf: undefined, radius: 0.1, isCheck: false };\n}\nfunction query(ctx, result) {\n    const { min, size: [sX, sY, sZ], bucketOffset, bucketCounts, bucketArray, grid, data: { x: px, y: py, z: pz, indices, radius }, delta, maxRadius } = ctx.grid;\n    const { radius: inputRadius, isCheck, x, y, z } = ctx;\n    const r = inputRadius + maxRadius;\n    const rSq = r * r;\n    Result.reset(result);\n    const loX = Math.max(0, Math.floor((x - r - min[0]) / delta[0]));\n    const loY = Math.max(0, Math.floor((y - r - min[1]) / delta[1]));\n    const loZ = Math.max(0, Math.floor((z - r - min[2]) / delta[2]));\n    const hiX = Math.min(sX - 1, Math.floor((x + r - min[0]) / delta[0]));\n    const hiY = Math.min(sY - 1, Math.floor((y + r - min[1]) / delta[1]));\n    const hiZ = Math.min(sZ - 1, Math.floor((z + r - min[2]) / delta[2]));\n    if (loX > hiX || loY > hiY || loZ > hiZ)\n        return false;\n    for (let ix = loX; ix <= hiX; ix++) {\n        for (let iy = loY; iy <= hiY; iy++) {\n            for (let iz = loZ; iz <= hiZ; iz++) {\n                const bucketIdx = grid[(((ix * sY) + iy) * sZ) + iz];\n                if (bucketIdx === 0)\n                    continue;\n                const k = bucketIdx - 1;\n                const offset = bucketOffset[k];\n                const count = bucketCounts[k];\n                const end = offset + count;\n                for (let i = offset; i < end; i++) {\n                    const idx = OrderedSet.getAt(indices, bucketArray[i]);\n                    const dx = px[idx] - x;\n                    const dy = py[idx] - y;\n                    const dz = pz[idx] - z;\n                    const distSq = dx * dx + dy * dy + dz * dz;\n                    if (distSq <= rSq) {\n                        if (maxRadius > 0 && Math.sqrt(distSq) - radius[idx] > inputRadius)\n                            continue;\n                        if (isCheck)\n                            return true;\n                        Result.add(result, bucketArray[i], distSq);\n                    }\n                }\n            }\n        }\n    }\n    return result.count > 0;\n}\nfunction _insideOut(r) {\n    const cells = [];\n    const n = r * 2 + 1;\n    for (let x = 0; x < n; ++x) {\n        for (let y = 0; y < n; ++y) {\n            for (let z = 0; z < n; ++z) {\n                cells.push(Vec3.create(x - r, y - r, z - r));\n            }\n        }\n    }\n    cells.sort((a, b) => Vec3.squaredMagnitude(a) - Vec3.squaredMagnitude(b));\n    return cells.flat();\n}\nconst insideOut = memoize1(_insideOut);\n/**\n * The maximum error is on the order of cell size + max radius (if the grid has radii).\n */\nfunction approxQueryNearest(ctx, result) {\n    const { min, size: [sX, sY, sZ], bucketOffset, bucketCounts, bucketArray, grid, data: { x: px, y: py, z: pz, indices }, delta } = ctx.grid;\n    const { radius, x, y, z } = ctx;\n    const rSq = radius * radius;\n    Result.reset(result);\n    const loX = Math.max(0, Math.floor((x - radius - min[0]) / delta[0]));\n    const loY = Math.max(0, Math.floor((y - radius - min[1]) / delta[1]));\n    const loZ = Math.max(0, Math.floor((z - radius - min[2]) / delta[2]));\n    const hiX = Math.min(sX - 1, Math.floor((x + radius - min[0]) / delta[0]));\n    const hiY = Math.min(sY - 1, Math.floor((y + radius - min[1]) / delta[1]));\n    const hiZ = Math.min(sZ - 1, Math.floor((z + radius - min[2]) / delta[2]));\n    if (loX > hiX || loY > hiY || loZ > hiZ)\n        return false;\n    const miX = Math.floor((x - min[0]) / delta[0]);\n    const miY = Math.floor((y - min[1]) / delta[1]);\n    const miZ = Math.floor((z - min[2]) / delta[2]);\n    const cells = insideOut(Math.max(hiX - loX, hiY - loY, hiZ - loZ) + 1);\n    for (let i = 0, _i = cells.length; i < _i; i += 3) {\n        const ix = miX + cells[i];\n        const iy = miY + cells[i + 1];\n        const iz = miZ + cells[i + 2];\n        if (ix < loX || ix > hiX || iy < loY || iy > hiY || iz < loZ || iz > hiZ)\n            continue;\n        const bucketIdx = grid[(((ix * sY) + iy) * sZ) + iz];\n        if (bucketIdx === 0)\n            continue;\n        const k = bucketIdx - 1;\n        const offset = bucketOffset[k];\n        const count = bucketCounts[k];\n        const end = offset + count;\n        let minDistSq = Number.MAX_VALUE;\n        for (let i = offset; i < end; i++) {\n            const idx = OrderedSet.getAt(indices, bucketArray[i]);\n            const dx = px[idx] - x;\n            const dy = py[idx] - y;\n            const dz = pz[idx] - z;\n            const distSq = dx * dx + dy * dy + dz * dz;\n            if (distSq <= rSq && distSq < minDistSq) {\n                Result.add(result, bucketArray[i], distSq);\n                minDistSq = distSq;\n            }\n        }\n        if (minDistSq !== Number.MAX_VALUE)\n            return true;\n    }\n    return result.count > 0;\n}\nconst tmpRay = Ray3D();\nconst tmpSetG = new Set();\nconst tmpSetG2 = new Set();\nconst tmpArrG1 = [0.1];\nconst tmpArrG2 = [0.1];\nconst tmpArrG3 = [0.1];\nconst tmpHeapG = new FibonacciHeap();\nfunction queryNearest(ctx, result) {\n    const { min, expandedBox: box, boundingSphere: { center }, size: [sX, sY, sZ], bucketOffset, bucketCounts, bucketArray, grid, data: { x: px, y: py, z: pz, indices, radius }, delta, maxRadius } = ctx.grid;\n    const { x, y, z, k, stopIf } = ctx;\n    const indicesCount = OrderedSet.size(indices);\n    Result.reset(result);\n    if (indicesCount === 0 || k <= 0)\n        return false;\n    let gX, gY, gZ, stop = false, gCount = 1, expandGrid = true, nextGCount = 0, arrG = tmpArrG1, nextArrG = tmpArrG2, maxRange = 0, expandRange = true, gridId, gridPointsFinished = false;\n    const expandedArrG = tmpArrG3, sqMaxRadius = maxRadius * maxRadius;\n    arrG.length = 0;\n    expandedArrG.length = 0;\n    tmpSetG.clear();\n    tmpHeapG.clear();\n    Vec3.set(tmpRay.origin, x, y, z);\n    if (!Box3D.containsVec3(box, tmpRay.origin)) {\n        // intersect ray pointing to box center\n        Ray3D.targetTo(tmpRay, tmpRay, center);\n        Ray3D.intersectBox3D(tmpRay.origin, tmpRay, box);\n        gX = Math.max(0, Math.min(sX - 1, Math.floor((tmpRay.origin[0] - min[0]) / delta[0])));\n        gY = Math.max(0, Math.min(sY - 1, Math.floor((tmpRay.origin[1] - min[1]) / delta[1])));\n        gZ = Math.max(0, Math.min(sZ - 1, Math.floor((tmpRay.origin[2] - min[2]) / delta[2])));\n    }\n    else {\n        gX = Math.floor((x - min[0]) / delta[0]);\n        gY = Math.floor((y - min[1]) / delta[1]);\n        gZ = Math.floor((z - min[2]) / delta[2]);\n    }\n    const dX = maxRadius !== 0 ? Math.max(1, Math.min(sX - 1, Math.ceil(maxRadius / delta[0]))) : 1;\n    const dY = maxRadius !== 0 ? Math.max(1, Math.min(sY - 1, Math.ceil(maxRadius / delta[1]))) : 1;\n    const dZ = maxRadius !== 0 ? Math.max(1, Math.min(sZ - 1, Math.ceil(maxRadius / delta[2]))) : 1;\n    arrG.push(gX, gY, gZ, (((gX * sY) + gY) * sZ) + gZ);\n    while (result.count < indicesCount) {\n        const arrGLen = gCount * 4;\n        for (let ig = 0; ig < arrGLen; ig += 4) {\n            gridId = arrG[ig + 3];\n            if (!tmpSetG.has(gridId)) {\n                tmpSetG.add(gridId);\n                gridPointsFinished = tmpSetG.size >= grid.length;\n                const bucketIdx = grid[gridId];\n                if (bucketIdx !== 0) {\n                    const _maxRange = maxRange;\n                    const ki = bucketIdx - 1;\n                    const offset = bucketOffset[ki];\n                    const count = bucketCounts[ki];\n                    const end = offset + count;\n                    for (let i = offset; i < end; i++) {\n                        const bIdx = bucketArray[i];\n                        const idx = OrderedSet.getAt(indices, bIdx);\n                        const dx = px[idx] - x;\n                        const dy = py[idx] - y;\n                        const dz = pz[idx] - z;\n                        let distSq = dx * dx + dy * dy + dz * dz;\n                        if (maxRadius !== 0) {\n                            const r = radius[idx];\n                            distSq -= r * r;\n                        }\n                        if (expandRange && distSq > maxRange) {\n                            maxRange = distSq;\n                        }\n                        tmpHeapG.insert(distSq, bIdx);\n                    }\n                    if (_maxRange < maxRange)\n                        expandRange = false;\n                }\n            }\n        }\n        // find next grid points\n        nextArrG.length = 0;\n        nextGCount = 0;\n        tmpSetG2.clear();\n        for (let ig = 0; ig < arrGLen; ig += 4) {\n            gX = arrG[ig];\n            gY = arrG[ig + 1];\n            gZ = arrG[ig + 2];\n            // fill grid points array with valid adiacent positions\n            for (let ix = -dX; ix <= dX; ix++) {\n                const xPos = gX + ix;\n                if (xPos < 0 || xPos >= sX)\n                    continue;\n                for (let iy = -dY; iy <= dY; iy++) {\n                    const yPos = gY + iy;\n                    if (yPos < 0 || yPos >= sY)\n                        continue;\n                    for (let iz = -dZ; iz <= dZ; iz++) {\n                        const zPos = gZ + iz;\n                        if (zPos < 0 || zPos >= sZ)\n                            continue;\n                        gridId = (((xPos * sY) + yPos) * sZ) + zPos;\n                        if (tmpSetG2.has(gridId))\n                            continue; // already scanned\n                        tmpSetG2.add(gridId);\n                        if (tmpSetG.has(gridId))\n                            continue; // already visited\n                        if (!expandGrid) {\n                            const xP = min[0] + xPos * delta[0] - x;\n                            const yP = min[1] + yPos * delta[1] - y;\n                            const zP = min[2] + zPos * delta[2] - z;\n                            const distSqG = (xP * xP) + (yP * yP) + (zP * zP) - sqMaxRadius; // is sqMaxRadius necessary?\n                            if (distSqG > maxRange) {\n                                expandedArrG.push(xPos, yPos, zPos, gridId);\n                                continue;\n                            }\n                        }\n                        nextArrG.push(xPos, yPos, zPos, gridId);\n                        nextGCount++;\n                    }\n                }\n            }\n        }\n        expandGrid = false;\n        if (nextGCount === 0) {\n            if (k === 1) {\n                const node = tmpHeapG.findMinimum();\n                if (node) {\n                    const { key: squaredDistance, value: index } = node;\n                    // const squaredDistance = node!.key, index = node!.value;\n                    Result.add(result, index, squaredDistance);\n                    return true;\n                }\n            }\n            else {\n                while (!tmpHeapG.isEmpty() && (gridPointsFinished || tmpHeapG.findMinimum().key <= maxRange) && result.count < k) {\n                    const node = tmpHeapG.extractMinimum();\n                    const squaredDistance = node.key, index = node.value;\n                    Result.add(result, index, squaredDistance);\n                    if (stopIf && !stop) {\n                        stop = stopIf(index, squaredDistance);\n                    }\n                }\n            }\n            if (result.count >= k || stop || result.count >= indicesCount)\n                return result.count > 0;\n            expandGrid = true;\n            expandRange = true;\n            if (expandedArrG.length > 0) {\n                for (let i = 0, l = expandedArrG.length; i < l; i++) {\n                    arrG.push(expandedArrG[i]);\n                }\n                expandedArrG.length = 0;\n                gCount = arrG.length;\n            }\n        }\n        else {\n            const tmp = arrG;\n            arrG = nextArrG;\n            nextArrG = tmp;\n            gCount = nextGCount;\n        }\n    }\n    return result.count > 0;\n}\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column, Table } from '../../../mol-data/db.js';\nexport function getModelGroupName(model_id, data) {\n    const { ihm_model_group, ihm_model_group_link } = data;\n    const link = Table.pickRow(ihm_model_group_link, i => ihm_model_group_link.model_id.value(i) === model_id);\n    if (link) {\n        const group = Table.pickRow(ihm_model_group, i => ihm_model_group.id.value(i) === link.group_id);\n        if (group)\n            return group.name;\n    }\n    return '';\n}\n//\nfunction hasPresentValues(column) {\n    for (let i = 0, il = column.rowCount; i < il; i++) {\n        if (column.valueKind(i) === Column.ValueKinds.Present)\n            return true;\n    }\n    return false;\n}\nfunction substUndefinedColumn(table, a, b) {\n    if (!table[a].isDefined || !hasPresentValues(table[a]))\n        table[a] = table[b];\n    if (!table[b].isDefined || !hasPresentValues(table[b]))\n        table[b] = table[a];\n}\n/** Fix possibly missing auth_/label_ columns */\nexport function getNormalizedAtomSite(atom_site) {\n    const normalized = Table.ofColumns(atom_site._schema, atom_site);\n    substUndefinedColumn(normalized, 'label_atom_id', 'auth_atom_id');\n    substUndefinedColumn(normalized, 'label_comp_id', 'auth_comp_id');\n    substUndefinedColumn(normalized, 'label_seq_id', 'auth_seq_id');\n    substUndefinedColumn(normalized, 'label_asym_id', 'auth_asym_id');\n    substUndefinedColumn(normalized, 'label_entity_id', 'label_asym_id');\n    return normalized;\n}\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureSelection } from './selection.js';\nimport { QueryContext } from './context.js';\nvar StructureQuery;\n(function (StructureQuery) {\n    function run(query, structure, options) {\n        return query(new QueryContext(structure, options));\n    }\n    StructureQuery.run = run;\n    function loci(query, structure, options) {\n        const sel = query(new QueryContext(structure, options));\n        return StructureSelection.toLociWithSourceUnits(sel);\n    }\n    StructureQuery.loci = loci;\n})(StructureQuery || (StructureQuery = {}));\nexport { StructureQuery };\n","/**\n * Copyright (c) 2018-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { StructureElement } from '../structure.js';\nimport { now } from '../../../mol-util/now.js';\nimport { BondType } from '../model/types.js';\nimport { defaultBondTest } from './queries/internal.js';\nexport class QueryContext {\n    pushCurrentElement() {\n        this.currentElementStack[this.currentElementStack.length] = this.element;\n        this.element = StructureElement.Location.create(void 0);\n        return this.element;\n    }\n    popCurrentElement() {\n        this.element = this.currentElementStack.pop();\n    }\n    pushCurrentBond() {\n        if (this.atomicBond)\n            this.currentAtomicBondStack.push(this.atomicBond);\n        this.atomicBond = new QueryContextBondInfo();\n        return this.atomicBond;\n    }\n    popCurrentBond() {\n        if (this.currentAtomicBondStack.length > 0) {\n            this.atomicBond = this.currentAtomicBondStack.pop();\n        }\n        else {\n            this.atomicBond = void 0;\n        }\n    }\n    pushCurrentStructure() {\n        if (this.currentStructure)\n            this.currentStructureStack.push(this.currentStructure);\n    }\n    popCurrentStructure() {\n        if (this.currentStructureStack.length)\n            this.currentStructure = this.currentStructureStack.pop();\n        else\n            this.currentStructure = void 0;\n    }\n    pushInputStructure(structure) {\n        this.inputStructureStack.push(this.inputStructure);\n        this.inputStructure = structure;\n    }\n    popInputStructure() {\n        if (this.inputStructureStack.length === 0)\n            throw new Error('Must push before pop.');\n        this.inputStructure = this.inputStructureStack.pop();\n    }\n    throwIfTimedOut() {\n        if (this.timeoutMs === 0)\n            return;\n        if (now() - this.timeCreated > this.timeoutMs) {\n            throw new Error(`The query took too long to execute (> ${this.timeoutMs / 1000}s).`);\n        }\n    }\n    tryGetCurrentSelection() {\n        if (!this.currentSelection)\n            throw new Error('The current selection is not assigned.');\n        return this.currentSelection;\n    }\n    constructor(structure, options) {\n        this.currentElementStack = [];\n        this.currentAtomicBondStack = [];\n        this.currentStructureStack = [];\n        this.inputStructureStack = [];\n        this.timeCreated = now();\n        /** Current element */\n        this.element = StructureElement.Location.create(void 0);\n        this.currentStructure = void 0;\n        /** Current bond between atoms */\n        this.atomicBond = new QueryContextBondInfo();\n        /** Supply this from the outside. Used by the internal.generator.current symbol */\n        this.currentSelection = void 0;\n        this.inputStructure = structure;\n        this.timeoutMs = (options && options.timeoutMs) || 0;\n        this.currentSelection = options && options.currentSelection;\n    }\n}\nclass QueryContextBondInfo {\n    constructor() {\n        this.a = StructureElement.Location.create(void 0);\n        this.aIndex = 0;\n        this.b = StructureElement.Location.create(void 0);\n        this.bIndex = 0;\n        this.type = BondType.Flag.None;\n        this.order = 0;\n        this.key = -1;\n        this.testFn = defaultBondTest;\n    }\n    setStructure(s) {\n        this.a.structure = s;\n        this.b.structure = s;\n    }\n    setTestFn(fn) {\n        this.testFn = fn || defaultBondTest;\n    }\n    test(ctx, trySwap) {\n        if (this.testFn(ctx))\n            return true;\n        if (trySwap) {\n            this.swap();\n            return this.testFn(ctx);\n        }\n        return false;\n    }\n    swap() {\n        // const sA = this.a.structure;\n        // this.a.structure = this.b.structure;\n        // this.b.structure = sA;\n        const idxA = this.aIndex;\n        this.aIndex = this.bIndex;\n        this.bIndex = idxA;\n        const unitA = this.a.unit;\n        this.a.unit = this.b.unit;\n        this.b.unit = unitA;\n        const eA = this.a.element;\n        this.a.element = this.b.element;\n        this.b.element = eA;\n    }\n    get length() {\n        return StructureElement.Location.distance(this.a, this.b);\n    }\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureElement, Structure } from '../../structure.js';\nimport { StructureSelection } from '../selection.js';\nimport { HashSet } from '../../../../mol-data/generic.js';\nimport { structureUnion } from './structure-set.js';\nexport class UniqueStructuresBuilder {\n    add(s) {\n        if (!s.elementCount)\n            return;\n        if (s.elementCount !== 1)\n            this.allSingletons = false;\n        if (this.set.add(s)) {\n            this.structures[this.structures.length] = s;\n        }\n    }\n    getSelection() {\n        if (this.allSingletons)\n            return StructureSelection.Singletons(this.source, structureUnion(this.source, this.structures));\n        return StructureSelection.Sequence(this.source, this.structures);\n    }\n    constructor(source) {\n        this.source = source;\n        this.set = HashSet(Structure.hashCode, Structure.areUnitIdsAndIndicesEqual);\n        this.structures = [];\n        this.allSingletons = true;\n    }\n}\nexport class LinearGroupingBuilder {\n    add(key, unit, element) {\n        let b = this.builderMap.get(key);\n        if (!b) {\n            b = this.source.subsetBuilder(true);\n            this.builders[this.builders.length] = b;\n            this.builderMap.set(key, b);\n        }\n        b.addToUnit(unit, element);\n    }\n    allSingletons() {\n        for (let i = 0, _i = this.builders.length; i < _i; i++) {\n            if (this.builders[i].elementCount > 1)\n                return false;\n        }\n        return true;\n    }\n    singletonSelection() {\n        const builder = this.source.subsetBuilder(true);\n        const loc = StructureElement.Location.create(this.source);\n        for (let i = 0, _i = this.builders.length; i < _i; i++) {\n            this.builders[i].setSingletonLocation(loc);\n            builder.addToUnit(loc.unit.id, loc.element);\n        }\n        return StructureSelection.Singletons(this.source, builder.getStructure());\n    }\n    fullSelection() {\n        const structures = new Array(this.builders.length);\n        for (let i = 0, _i = this.builders.length; i < _i; i++) {\n            structures[i] = this.builders[i].getStructure();\n        }\n        return StructureSelection.Sequence(this.source, structures);\n    }\n    getSelection() {\n        const len = this.builders.length;\n        if (len === 0)\n            return StructureSelection.Empty(this.source);\n        if (this.allSingletons())\n            return this.singletonSelection();\n        return this.fullSelection();\n    }\n    constructor(source) {\n        this.source = source;\n        this.builders = [];\n        this.builderMap = new Map();\n    }\n}\n","/**\n * Copyright (c) 2017-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { UniqueArray } from '../../../../mol-data/generic.js';\nimport { Segmentation, SortedArray } from '../../../../mol-data/int.js';\nimport { StructureProperties as P, Unit } from '../../structure.js';\nimport { Structure } from '../../structure/structure.js';\nimport { StructureSelection } from '../selection.js';\nimport { LinearGroupingBuilder } from '../utils/builders.js';\nimport { structureSubtract } from '../utils/structure-set.js';\nexport const none = ctx => StructureSelection.Sequence(ctx.inputStructure, []);\nexport const all = ctx => StructureSelection.Singletons(ctx.inputStructure, ctx.inputStructure);\nexport function residues(params) { return atoms({ ...params, groupBy: ctx => P.residue.key(ctx.element) }); }\nexport function chains(params) { return atoms({ ...params, groupBy: ctx => P.chain.key(ctx.element) }); }\nfunction _true(ctx) { return true; }\nfunction _zero(ctx) { return 0; }\nexport function atoms(params) {\n    if (!params || (!params.atomTest && !params.residueTest && !params.chainTest && !params.entityTest && !params.unitTest && !params.groupBy))\n        return all;\n    if (!!params.atomTest && !params.residueTest && !params.chainTest && !params.entityTest && !params.unitTest && !params.groupBy)\n        return atomGroupsLinear(params.atomTest);\n    const normalized = {\n        unitTest: params.unitTest || _true,\n        entityTest: params.entityTest || _true,\n        chainTest: params.chainTest || _true,\n        residueTest: params.residueTest || _true,\n        atomTest: params.atomTest || _true,\n        groupBy: params.groupBy || _zero,\n    };\n    if (!params.groupBy)\n        return atomGroupsSegmented(normalized);\n    return atomGroupsGrouped(normalized);\n}\nfunction atomGroupsLinear(atomTest) {\n    return function query_atomGroupsLinear(ctx) {\n        const { inputStructure } = ctx;\n        const { units } = inputStructure;\n        const l = ctx.pushCurrentElement();\n        const builder = inputStructure.subsetBuilder(true);\n        l.structure = inputStructure;\n        for (const unit of units) {\n            l.unit = unit;\n            const elements = unit.elements;\n            builder.beginUnit(unit.id);\n            for (let j = 0, _j = elements.length; j < _j; j++) {\n                l.element = elements[j];\n                if (atomTest(ctx))\n                    builder.addElement(l.element);\n            }\n            builder.commitUnit();\n            ctx.throwIfTimedOut();\n        }\n        ctx.popCurrentElement();\n        return StructureSelection.Singletons(inputStructure, builder.getStructure());\n    };\n}\nfunction atomGroupsSegmented({ unitTest, entityTest, chainTest, residueTest, atomTest }) {\n    return function query_atomGroupsSegmented(ctx) {\n        const { inputStructure } = ctx;\n        const { units } = inputStructure;\n        const l = ctx.pushCurrentElement();\n        const builder = inputStructure.subsetBuilder(true);\n        const chainLevel = residueTest === _true && atomTest === _true;\n        const residueLevel = atomTest === _true;\n        l.structure = inputStructure;\n        for (const unit of units) {\n            l.unit = unit;\n            if (!unitTest(ctx))\n                continue;\n            const { elements, model } = unit;\n            builder.beginUnit(unit.id);\n            if (unit.kind === Unit.Kind.Atomic) {\n                const chainsIt = Segmentation.transientSegments(unit.model.atomicHierarchy.chainAtomSegments, elements);\n                const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, elements);\n                while (chainsIt.hasNext) {\n                    const chainSegment = chainsIt.move();\n                    l.element = elements[chainSegment.start];\n                    // test entity and chain\n                    if (!entityTest(ctx) || !chainTest(ctx))\n                        continue;\n                    if (chainLevel) {\n                        builder.addElementRange(elements, chainSegment.start, chainSegment.end);\n                        continue;\n                    }\n                    residuesIt.setSegment(chainSegment);\n                    while (residuesIt.hasNext) {\n                        const residueSegment = residuesIt.move();\n                        l.element = elements[residueSegment.start];\n                        // test residue\n                        if (!residueTest(ctx))\n                            continue;\n                        if (residueLevel) {\n                            builder.addElementRange(elements, residueSegment.start, residueSegment.end);\n                            continue;\n                        }\n                        for (let j = residueSegment.start, _j = residueSegment.end; j < _j; j++) {\n                            l.element = elements[j];\n                            // test atom\n                            if (atomTest(ctx)) {\n                                builder.addElement(l.element);\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                const { chainElementSegments } = unit.kind === Unit.Kind.Spheres ? model.coarseHierarchy.spheres : model.coarseHierarchy.gaussians;\n                const chainsIt = Segmentation.transientSegments(chainElementSegments, elements);\n                while (chainsIt.hasNext) {\n                    const chainSegment = chainsIt.move();\n                    l.element = elements[chainSegment.start];\n                    // test entity and chain\n                    if (!entityTest(ctx) || !chainTest(ctx))\n                        continue;\n                    if (chainLevel) {\n                        builder.addElementRange(elements, chainSegment.start, chainSegment.end);\n                        continue;\n                    }\n                    for (let j = chainSegment.start, _j = chainSegment.end; j < _j; j++) {\n                        l.element = elements[j];\n                        // test residue/coarse element\n                        if (residueTest(ctx)) {\n                            builder.addElement(l.element);\n                        }\n                    }\n                }\n            }\n            builder.commitUnit();\n            ctx.throwIfTimedOut();\n        }\n        ctx.popCurrentElement();\n        return StructureSelection.Singletons(inputStructure, builder.getStructure());\n    };\n}\nfunction atomGroupsGrouped({ unitTest, entityTest, chainTest, residueTest, atomTest, groupBy }) {\n    return function query_atomGroupsGrouped(ctx) {\n        const { inputStructure } = ctx;\n        const { units } = inputStructure;\n        const l = ctx.pushCurrentElement();\n        const builder = new LinearGroupingBuilder(inputStructure);\n        l.structure = inputStructure;\n        for (const unit of units) {\n            l.unit = unit;\n            if (!unitTest(ctx))\n                continue;\n            const { elements, model } = unit;\n            if (unit.kind === Unit.Kind.Atomic) {\n                const chainsIt = Segmentation.transientSegments(model.atomicHierarchy.chainAtomSegments, elements);\n                const residuesIt = Segmentation.transientSegments(model.atomicHierarchy.residueAtomSegments, elements);\n                while (chainsIt.hasNext) {\n                    const chainSegment = chainsIt.move();\n                    l.element = elements[chainSegment.start];\n                    // test entity and chain\n                    if (!entityTest(ctx) || !chainTest(ctx))\n                        continue;\n                    residuesIt.setSegment(chainSegment);\n                    while (residuesIt.hasNext) {\n                        const residueSegment = residuesIt.move();\n                        l.element = elements[residueSegment.start];\n                        // test residue\n                        if (!residueTest(ctx))\n                            continue;\n                        for (let j = residueSegment.start, _j = residueSegment.end; j < _j; j++) {\n                            l.element = elements[j];\n                            // test atom\n                            if (atomTest(ctx)) {\n                                builder.add(groupBy(ctx), unit.id, l.element);\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                const { chainElementSegments } = unit.kind === Unit.Kind.Spheres ? model.coarseHierarchy.spheres : model.coarseHierarchy.gaussians;\n                const chainsIt = Segmentation.transientSegments(chainElementSegments, elements);\n                while (chainsIt.hasNext) {\n                    const chainSegment = chainsIt.move();\n                    l.element = elements[chainSegment.start];\n                    // test entity and chain\n                    if (!entityTest(ctx) || !chainTest(ctx))\n                        continue;\n                    for (let j = chainSegment.start, _j = chainSegment.end; j < _j; j++) {\n                        l.element = elements[j];\n                        // test residue/coarse element\n                        if (residueTest(ctx)) {\n                            builder.add(groupBy(ctx), unit.id, l.element);\n                        }\n                    }\n                }\n            }\n            ctx.throwIfTimedOut();\n        }\n        ctx.popCurrentElement();\n        return builder.getSelection();\n    };\n}\nfunction getRingStructure(unit, ring, inputStructure) {\n    const elements = new Int32Array(ring.length);\n    for (let i = 0, _i = ring.length; i < _i; i++)\n        elements[i] = unit.elements[ring[i]];\n    return Structure.create([unit.getChild(SortedArray.ofSortedArray(elements))], { parent: inputStructure });\n}\nexport function rings(fingerprints, onlyAromatic) {\n    return function query_rings(ctx) {\n        const { units } = ctx.inputStructure;\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        if (!fingerprints || fingerprints.length === 0) {\n            for (const u of units) {\n                if (!Unit.isAtomic(u))\n                    continue;\n                if (onlyAromatic) {\n                    for (const r of u.rings.aromaticRings) {\n                        ret.add(getRingStructure(u, u.rings.all[r], ctx.inputStructure));\n                    }\n                }\n                else {\n                    for (const r of u.rings.all) {\n                        ret.add(getRingStructure(u, r, ctx.inputStructure));\n                    }\n                }\n            }\n        }\n        else {\n            const uniqueFps = UniqueArray.create();\n            for (let i = 0; i < fingerprints.length; i++)\n                UniqueArray.add(uniqueFps, fingerprints[i], fingerprints[i]);\n            for (const u of units) {\n                if (!Unit.isAtomic(u))\n                    continue;\n                const rings = u.rings;\n                for (const fp of uniqueFps.array) {\n                    if (!rings.byFingerprint.has(fp))\n                        continue;\n                    for (const r of rings.byFingerprint.get(fp)) {\n                        if (onlyAromatic && !rings.aromaticRings.includes(r))\n                            continue;\n                        ret.add(getRingStructure(u, rings.all[r], ctx.inputStructure));\n                    }\n                }\n            }\n        }\n        return ret.getSelection();\n    };\n}\nexport function querySelection(selection, query, inComplement = false) {\n    return function query_querySelection(ctx) {\n        const targetSel = selection(ctx);\n        if (StructureSelection.structureCount(targetSel) === 0)\n            return targetSel;\n        const target = inComplement\n            ? structureSubtract(ctx.inputStructure, StructureSelection.unionStructure(targetSel))\n            : StructureSelection.unionStructure(targetSel);\n        if (target.elementCount === 0)\n            return StructureSelection.Empty(ctx.inputStructure);\n        ctx.throwIfTimedOut();\n        ctx.pushInputStructure(target);\n        const result = query(ctx);\n        ctx.popInputStructure();\n        return StructureSelection.withInputStructure(result, ctx.inputStructure);\n    };\n}\nexport function bondedAtomicPairs(bondTest) {\n    return function query_bondedAtomicPairs(ctx) {\n        const structure = ctx.inputStructure;\n        const interBonds = structure.interUnitBonds;\n        // Note: each bond is called twice, that's why we need the unique builder.\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        ctx.pushCurrentBond();\n        const atomicBond = ctx.atomicBond;\n        atomicBond.setTestFn(bondTest);\n        atomicBond.setStructure(structure);\n        // Process intra unit bonds\n        for (const unit of structure.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            const { offset: intraBondOffset, b: intraBondB, edgeProps: { flags, order, key } } = unit.bonds;\n            atomicBond.a.unit = unit;\n            atomicBond.b.unit = unit;\n            for (let i = 0, _i = unit.elements.length; i < _i; i++) {\n                atomicBond.aIndex = i;\n                atomicBond.a.element = unit.elements[i];\n                // check intra unit bonds\n                for (let lI = intraBondOffset[i], _lI = intraBondOffset[i + 1]; lI < _lI; lI++) {\n                    atomicBond.bIndex = intraBondB[lI];\n                    atomicBond.b.element = unit.elements[intraBondB[lI]];\n                    atomicBond.type = flags[lI];\n                    atomicBond.order = order[lI];\n                    atomicBond.key = key[lI];\n                    // No need to \"swap test\" because each bond direction will be visited eventually.\n                    if (atomicBond.test(ctx, false)) {\n                        const b = structure.subsetBuilder(false);\n                        b.beginUnit(unit.id);\n                        b.addElement(atomicBond.a.element);\n                        b.addElement(atomicBond.b.element);\n                        b.commitUnit();\n                        ret.add(b.getStructure());\n                    }\n                }\n            }\n        }\n        // Process inter unit bonds\n        for (const bond of interBonds.edges) {\n            atomicBond.a.unit = structure.unitMap.get(bond.unitA);\n            atomicBond.a.element = atomicBond.a.unit.elements[bond.indexA];\n            atomicBond.aIndex = bond.indexA;\n            atomicBond.b.unit = structure.unitMap.get(bond.unitB);\n            atomicBond.b.element = atomicBond.b.unit.elements[bond.indexB];\n            atomicBond.bIndex = bond.indexB;\n            atomicBond.order = bond.props.order;\n            atomicBond.type = bond.props.flag;\n            atomicBond.key = bond.props.key;\n            // No need to \"swap test\" because each bond direction will be visited eventually.\n            if (atomicBond.test(ctx, false)) {\n                const b = structure.subsetBuilder(false);\n                b.addToUnit(atomicBond.a.unit.id, atomicBond.a.element);\n                b.addToUnit(atomicBond.b.unit.id, atomicBond.b.element);\n                ret.add(b.getStructure());\n            }\n        }\n        ctx.popCurrentBond();\n        return ret.getSelection();\n    };\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { IntMap, SortedArray } from '../../../../mol-data/int.js';\nimport { sortArray } from '../../../../mol-data/util.js';\nimport { StructureSymmetry } from '../symmetry.js';\nimport { Structure } from '../structure.js';\nimport { UniqueArray } from '../../../../mol-data/generic.js';\nexport class StructureUniqueSubsetBuilder {\n    addToUnit(parentId, e) {\n        const unit = this.unitMap.get(parentId);\n        if (!!unit) {\n            if (UniqueArray.add(unit, e, e))\n                this.elementCount++;\n        }\n        else {\n            const arr = UniqueArray.create();\n            UniqueArray.add(arr, e, e);\n            this.unitMap.set(parentId, arr);\n            this.ids[this.ids.length] = parentId;\n            this.elementCount++;\n        }\n    }\n    has(parentId, e) {\n        const unit = this.unitMap.get(parentId);\n        if (!unit)\n            return false;\n        return UniqueArray.has(unit, e);\n    }\n    beginUnit(parentId) {\n        this.parentId = parentId;\n        if (this.unitMap.has(parentId)) {\n            this.currentUnit = this.unitMap.get(parentId);\n        }\n        else {\n            this.currentUnit = this.currentUnit.array.length > 0 ? UniqueArray.create() : this.currentUnit;\n        }\n    }\n    addElement(e) {\n        if (UniqueArray.add(this.currentUnit, e, e))\n            this.elementCount++;\n    }\n    commitUnit() {\n        if (this.currentUnit.array.length === 0 || this.unitMap.has(this.parentId))\n            return;\n        this.ids[this.ids.length] = this.parentId;\n        this.unitMap.set(this.parentId, this.currentUnit);\n        this.parentId = -1;\n    }\n    getStructure() {\n        if (this.isEmpty)\n            return Structure.Empty;\n        const newUnits = [];\n        sortArray(this.ids);\n        const symmGroups = StructureSymmetry.UnitEquivalenceBuilder();\n        for (let i = 0, _i = this.ids.length; i < _i; i++) {\n            const id = this.ids[i];\n            const parent = this.parent.unitMap.get(id);\n            const unit = this.unitMap.get(id).array;\n            const l = unit.length;\n            // if the length is the same, just copy the old unit.\n            if (unit.length === parent.elements.length) {\n                newUnits[newUnits.length] = parent;\n                symmGroups.add(parent.id, parent);\n                continue;\n            }\n            if (l > 1)\n                sortArray(unit);\n            let child = parent.getChild(SortedArray.ofSortedArray(unit));\n            const pivot = symmGroups.add(child.id, child);\n            if (child !== pivot)\n                child = pivot.applyOperator(child.id, child.conformation.operator, true);\n            newUnits[newUnits.length] = child;\n        }\n        return Structure.create(newUnits, { parent: this.parent });\n    }\n    get isEmpty() {\n        return this.elementCount === 0;\n    }\n    constructor(parent) {\n        this.parent = parent;\n        this.ids = [];\n        this.unitMap = IntMap.Mutable();\n        this.parentId = -1;\n        this.currentUnit = UniqueArray.create();\n        this.elementCount = 0;\n    }\n}\n","/**\n * Copyright (c) 2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureProperties } from '../../../structure/properties.js';\nexport class ResidueSet {\n    add(entry) {\n        let root = this.index.get(entry.label_asym_id);\n        if (!root) {\n            root = new Map();\n            this.index.set(entry.label_asym_id, root);\n        }\n        let entries = root.get(entry.label_seq_id);\n        if (!entries) {\n            entries = [];\n            root.set(entry.label_seq_id, entries);\n        }\n        const exists = this._find(entry, entries);\n        if (!exists) {\n            entries.push(entry);\n            return true;\n        }\n        return false;\n    }\n    hasLabelAsymId(asym_id) {\n        return this.index.has(asym_id);\n    }\n    has(loc) {\n        var _a, _b;\n        const asym_id = this._asym_id(loc);\n        if (!this.index.has(asym_id))\n            return;\n        const root = this.index.get(asym_id);\n        const seq_id = this._seq_id(loc);\n        if (!root.has(seq_id))\n            return;\n        const entries = root.get(seq_id);\n        const comp_id = this._comp_id(loc);\n        const alt_id = this._alt_id(loc);\n        const ins_code = this._ins_code(loc);\n        const op_name = (_a = this._op_name(loc)) !== null && _a !== void 0 ? _a : '1_555';\n        for (const e of entries) {\n            if (e.label_comp_id !== comp_id || e.label_alt_id !== alt_id || e.ins_code !== ins_code)\n                continue;\n            if (this.checkOperator && ((_b = e.operator_name) !== null && _b !== void 0 ? _b : '1_555') !== op_name)\n                continue;\n            return e;\n        }\n    }\n    static getLabel(entry, checkOperator = false) {\n        var _a;\n        return `${entry.label_asym_id} ${entry.label_comp_id} ${entry.label_seq_id}:${entry.ins_code}:${entry.label_alt_id}${checkOperator ? ' ' + ((_a = entry.operator_name) !== null && _a !== void 0 ? _a : '1_555') : ''}`;\n    }\n    static getEntryFromLocation(loc) {\n        var _a;\n        return {\n            label_asym_id: StructureProperties.chain.label_asym_id(loc),\n            label_comp_id: StructureProperties.atom.label_comp_id(loc),\n            label_seq_id: StructureProperties.residue.label_seq_id(loc),\n            label_alt_id: StructureProperties.atom.label_alt_id(loc),\n            ins_code: StructureProperties.residue.pdbx_PDB_ins_code(loc),\n            operator_name: (_a = StructureProperties.unit.operator_name(loc)) !== null && _a !== void 0 ? _a : '1_555'\n        };\n    }\n    _find(entry, xs) {\n        var _a, _b;\n        for (const e of xs) {\n            if (e.label_comp_id !== entry.label_comp_id || e.label_alt_id !== entry.label_alt_id || e.ins_code !== entry.ins_code)\n                continue;\n            if (this.checkOperator && ((_a = e.operator_name) !== null && _a !== void 0 ? _a : '1_555') !== ((_b = entry.operator_name) !== null && _b !== void 0 ? _b : '1_555'))\n                continue;\n            return true;\n        }\n        return false;\n    }\n    constructor(options) {\n        var _a;\n        this.index = new Map();\n        this.checkOperator = false;\n        // perf optimization for .has()\n        this._asym_id = StructureProperties.chain.label_asym_id;\n        this._seq_id = StructureProperties.residue.label_seq_id;\n        this._comp_id = StructureProperties.atom.label_comp_id;\n        this._alt_id = StructureProperties.atom.label_alt_id;\n        this._ins_code = StructureProperties.residue.pdbx_PDB_ins_code;\n        this._op_name = StructureProperties.unit.operator_name;\n        this.checkOperator = (_a = options === null || options === void 0 ? void 0 : options.checkOperator) !== null && _a !== void 0 ? _a : false;\n    }\n}\n","/**\n * Copyright (c) 2017-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Segmentation, SortedArray } from '../../../../mol-data/int.js';\nimport { Unit } from '../../structure.js';\nimport { StructureSelection } from '../selection.js';\nimport { UniqueStructuresBuilder } from '../utils/builders.js';\nimport { StructureUniqueSubsetBuilder } from '../../structure/util/unique-subset-builder.js';\nimport { structureIntersect, structureSubtract, structureUnion } from '../utils/structure-set.js';\nimport { UniqueArray } from '../../../../mol-data/generic.js';\nimport { StructureElement } from '../../structure/element.js';\nimport { ResidueSet } from '../../model/properties/utils/residue-set.js';\nimport { StructureProperties } from '../../structure/properties.js';\nimport { arraySetAdd } from '../../../../mol-util/array.js';\nfunction getWholeResidues(ctx, source, structure) {\n    const builder = source.subsetBuilder(true);\n    for (const unit of structure.units) {\n        if (unit.kind !== Unit.Kind.Atomic) {\n            // just copy non-atomic units.\n            builder.setUnit(unit.id, unit.elements);\n            continue;\n        }\n        const { residueAtomSegments } = unit.model.atomicHierarchy;\n        const sourceElements = source.unitMap.get(unit.id).elements;\n        const elements = unit.elements;\n        builder.beginUnit(unit.id);\n        const residuesIt = Segmentation.transientSegments(residueAtomSegments, elements);\n        while (residuesIt.hasNext) {\n            const rI = residuesIt.move().index;\n            for (let j = residueAtomSegments.offsets[rI], _j = residueAtomSegments.offsets[rI + 1]; j < _j; j++) {\n                if (SortedArray.has(sourceElements, j))\n                    builder.addElement(j);\n            }\n        }\n        builder.commitUnit();\n        ctx.throwIfTimedOut();\n    }\n    return builder.getStructure();\n}\nexport function wholeResidues(query) {\n    return function query_wholeResidues(ctx) {\n        const inner = query(ctx);\n        if (StructureSelection.isSingleton(inner)) {\n            return StructureSelection.Singletons(ctx.inputStructure, getWholeResidues(ctx, ctx.inputStructure, inner.structure));\n        }\n        else {\n            const builder = new UniqueStructuresBuilder(ctx.inputStructure);\n            for (const s of inner.structures) {\n                builder.add(getWholeResidues(ctx, ctx.inputStructure, s));\n            }\n            return builder.getSelection();\n        }\n    };\n}\nfunction getIncludeSurroundings(ctx, source, structure, params) {\n    const builder = new StructureUniqueSubsetBuilder(source);\n    const lookup = source.lookup3d;\n    const r = params.radius;\n    for (const unit of structure.units) {\n        const c = unit.conformation;\n        const elements = unit.elements;\n        for (let i = 0, _i = elements.length; i < _i; i++) {\n            const e = elements[i];\n            lookup.findIntoBuilder(c.x(e), c.y(e), c.z(e), r, builder);\n        }\n        ctx.throwIfTimedOut();\n    }\n    return !!params.wholeResidues ? getWholeResidues(ctx, source, builder.getStructure()) : builder.getStructure();\n}\nfunction getIncludeSurroundingsWithRadius(ctx, source, structure, params) {\n    const builder = new StructureUniqueSubsetBuilder(source);\n    const lookup = source.lookup3d;\n    const { elementRadius, elementRadiusClosure, sourceMaxRadius, radius } = params;\n    ctx.pushCurrentElement();\n    ctx.element.structure = structure;\n    for (const unit of structure.units) {\n        ctx.element.unit = unit;\n        const c = unit.conformation;\n        const elements = unit.elements;\n        for (let i = 0, _i = elements.length; i < _i; i++) {\n            const e = elements[i];\n            ctx.element.element = e;\n            const eRadius = elementRadius(ctx);\n            lookup.findIntoBuilderWithRadius(c.x(e), c.y(e), c.z(e), eRadius, sourceMaxRadius, radius, elementRadiusClosure, builder);\n        }\n        ctx.throwIfTimedOut();\n    }\n    ctx.popCurrentElement();\n    return !!params.wholeResidues ? getWholeResidues(ctx, source, builder.getStructure()) : builder.getStructure();\n}\nfunction createElementRadiusFn(ctx, eRadius) {\n    return e => {\n        ctx.element.structure = e.structure;\n        ctx.element.unit = e.unit;\n        ctx.element.element = e.element;\n        return eRadius(ctx);\n    };\n}\nfunction findStructureRadius(ctx, eRadius) {\n    let r = 0;\n    ctx.element.structure = ctx.inputStructure;\n    for (const unit of ctx.inputStructure.units) {\n        ctx.element.unit = unit;\n        const elements = unit.elements;\n        for (let i = 0, _i = elements.length; i < _i; i++) {\n            const e = elements[i];\n            ctx.element.element = e;\n            const eR = eRadius(ctx);\n            if (eR > r)\n                r = eR;\n        }\n    }\n    ctx.throwIfTimedOut();\n    return r;\n}\nexport function includeSurroundings(query, params) {\n    return function query_includeSurroundings(ctx) {\n        const inner = query(ctx);\n        if (params.elementRadius) {\n            const prms = {\n                ...params,\n                elementRadius: params.elementRadius,\n                elementRadiusClosure: createElementRadiusFn(ctx, params.elementRadius),\n                sourceMaxRadius: findStructureRadius(ctx, params.elementRadius)\n            };\n            if (StructureSelection.isSingleton(inner)) {\n                const surr = getIncludeSurroundingsWithRadius(ctx, ctx.inputStructure, inner.structure, prms);\n                const ret = StructureSelection.Singletons(ctx.inputStructure, surr);\n                return ret;\n            }\n            else {\n                const builder = new UniqueStructuresBuilder(ctx.inputStructure);\n                for (const s of inner.structures) {\n                    builder.add(getIncludeSurroundingsWithRadius(ctx, ctx.inputStructure, s, prms));\n                }\n                return builder.getSelection();\n            }\n        }\n        if (StructureSelection.isSingleton(inner)) {\n            const surr = getIncludeSurroundings(ctx, ctx.inputStructure, inner.structure, params);\n            const ret = StructureSelection.Singletons(ctx.inputStructure, surr);\n            return ret;\n        }\n        else {\n            const builder = new UniqueStructuresBuilder(ctx.inputStructure);\n            for (const s of inner.structures) {\n                builder.add(getIncludeSurroundings(ctx, ctx.inputStructure, s, params));\n            }\n            return builder.getSelection();\n        }\n    };\n}\nexport function querySelection(selection, query) {\n    return function query_querySelection(ctx) {\n        const targetSel = selection(ctx);\n        if (StructureSelection.structureCount(targetSel) === 0)\n            return targetSel;\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        const add = (s) => ret.add(s);\n        StructureSelection.forEach(targetSel, (s, sI) => {\n            ctx.pushInputStructure(s);\n            StructureSelection.forEach(query(ctx), add);\n            ctx.popInputStructure();\n            if (sI % 10 === 0)\n                ctx.throwIfTimedOut();\n        });\n        return ret.getSelection();\n    };\n}\nexport function intersectBy(query, by) {\n    return function query_intersectBy(ctx) {\n        const selection = query(ctx);\n        if (StructureSelection.structureCount(selection) === 0)\n            return selection;\n        const bySel = by(ctx);\n        if (StructureSelection.structureCount(bySel) === 0)\n            return StructureSelection.Empty(ctx.inputStructure);\n        const unionBy = StructureSelection.unionStructure(bySel);\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        StructureSelection.forEach(selection, (s, sI) => {\n            const ii = structureIntersect(unionBy, s);\n            if (ii.elementCount !== 0)\n                ret.add(ii);\n            if (sI % 50 === 0)\n                ctx.throwIfTimedOut();\n        });\n        return ret.getSelection();\n    };\n}\nexport function exceptBy(query, by) {\n    return function query_exceptBy(ctx) {\n        const selection = query(ctx);\n        if (StructureSelection.structureCount(selection) === 0)\n            return selection;\n        const bySel = by(ctx);\n        if (StructureSelection.structureCount(bySel) === 0)\n            return selection;\n        const subtractBy = StructureSelection.unionStructure(bySel);\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        StructureSelection.forEach(selection, (s, sI) => {\n            const diff = structureSubtract(s, subtractBy);\n            if (diff.elementCount !== 0)\n                ret.add(diff);\n            if (sI % 50 === 0)\n                ctx.throwIfTimedOut();\n        });\n        return ret.getSelection();\n    };\n}\nexport function union(query) {\n    return function query_union(ctx) {\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        ret.add(StructureSelection.unionStructure(query(ctx)));\n        return ret.getSelection();\n    };\n}\nexport function expandProperty(query, property) {\n    return function query_expandProperty(ctx) {\n        const src = query(ctx);\n        const propertyToStructureIndexMap = new Map();\n        const builders = [];\n        ctx.pushCurrentElement();\n        StructureSelection.forEach(src, (s, sI) => {\n            ctx.element.structure = s;\n            for (const unit of s.units) {\n                ctx.element.unit = unit;\n                const elements = unit.elements;\n                for (let i = 0, _i = elements.length; i < _i; i++) {\n                    ctx.element.element = elements[i];\n                    const p = property(ctx);\n                    let arr;\n                    if (propertyToStructureIndexMap.has(p))\n                        arr = propertyToStructureIndexMap.get(p);\n                    else {\n                        arr = UniqueArray.create();\n                        propertyToStructureIndexMap.set(p, arr);\n                    }\n                    UniqueArray.add(arr, sI, sI);\n                }\n            }\n            builders[sI] = ctx.inputStructure.subsetBuilder(true);\n            if (sI % 10 === 0)\n                ctx.throwIfTimedOut();\n        });\n        ctx.element.structure = ctx.inputStructure;\n        for (const unit of ctx.inputStructure.units) {\n            ctx.element.unit = unit;\n            const elements = unit.elements;\n            for (let i = 0, _i = elements.length; i < _i; i++) {\n                ctx.element.element = elements[i];\n                const p = property(ctx);\n                if (!propertyToStructureIndexMap.has(p))\n                    continue;\n                const indices = propertyToStructureIndexMap.get(p).array;\n                for (let _sI = 0, __sI = indices.length; _sI < __sI; _sI++) {\n                    builders[indices[_sI]].addToUnit(unit.id, elements[i]);\n                }\n            }\n        }\n        ctx.popCurrentElement();\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        for (const b of builders)\n            ret.add(b.getStructure());\n        return ret.getSelection();\n    };\n}\nexport function includeConnected({ query, layerCount, wholeResidues, bondTest, fixedPoint }) {\n    const lc = Math.max(layerCount, 0);\n    return function query_includeConnected(ctx) {\n        const builder = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        const src = query(ctx);\n        ctx.pushCurrentBond();\n        ctx.atomicBond.setTestFn(bondTest);\n        StructureSelection.forEach(src, (s, sI) => {\n            let incl = s;\n            if (fixedPoint) {\n                while (true) {\n                    const prevCount = incl.elementCount;\n                    incl = includeConnectedStep(ctx, wholeResidues, incl);\n                    if (incl.elementCount === prevCount)\n                        break;\n                }\n            }\n            else {\n                for (let i = 0; i < lc; i++) {\n                    incl = includeConnectedStep(ctx, wholeResidues, incl);\n                }\n            }\n            builder.add(incl);\n            if (sI % 10 === 0)\n                ctx.throwIfTimedOut();\n        });\n        ctx.popCurrentBond();\n        return builder.getSelection();\n    };\n}\nfunction includeConnectedStep(ctx, wholeResidues, structure) {\n    const expanded = expandConnected(ctx, structure);\n    if (wholeResidues)\n        return getWholeResidues(ctx, ctx.inputStructure, expanded);\n    return expanded;\n}\nfunction expandConnected(ctx, structure) {\n    const inputStructure = ctx.inputStructure;\n    const interBonds = inputStructure.interUnitBonds;\n    const builder = new StructureUniqueSubsetBuilder(inputStructure);\n    const atomicBond = ctx.atomicBond;\n    // Process intra unit bonds\n    for (const unit of structure.units) {\n        if (unit.kind !== Unit.Kind.Atomic) {\n            // add the whole unit\n            builder.beginUnit(unit.id);\n            for (let i = 0, _i = unit.elements.length; i < _i; i++) {\n                builder.addElement(unit.elements[i]);\n            }\n            builder.commitUnit();\n            continue;\n        }\n        const inputUnitA = inputStructure.unitMap.get(unit.id);\n        const { offset: intraBondOffset, b: intraBondB, edgeProps: { flags, order, key } } = inputUnitA.bonds;\n        atomicBond.setStructure(inputStructure);\n        // Process intra unit bonds\n        atomicBond.a.unit = inputUnitA;\n        atomicBond.b.unit = inputUnitA;\n        for (let i = 0, _i = unit.elements.length; i < _i; i++) {\n            // add the current element\n            builder.addToUnit(unit.id, unit.elements[i]);\n            const aIndex = SortedArray.indexOf(inputUnitA.elements, unit.elements[i]);\n            // check intra unit bonds\n            for (let lI = intraBondOffset[aIndex], _lI = intraBondOffset[aIndex + 1]; lI < _lI; lI++) {\n                const bIndex = intraBondB[lI];\n                const bElement = inputUnitA.elements[bIndex];\n                // Check if the element is already present:\n                if (SortedArray.has(unit.elements, bElement) || builder.has(unit.id, bElement))\n                    continue;\n                atomicBond.aIndex = aIndex;\n                atomicBond.a.element = unit.elements[i];\n                atomicBond.bIndex = bIndex;\n                atomicBond.b.element = bElement;\n                atomicBond.type = flags[lI];\n                atomicBond.order = order[lI];\n                atomicBond.key = key[lI];\n                if (atomicBond.test(ctx, true)) {\n                    builder.addToUnit(unit.id, bElement);\n                }\n            }\n        }\n        // Process inter unit bonds\n        for (const bondedUnit of interBonds.getConnectedUnits(inputUnitA.id)) {\n            const currentUnitB = structure.unitMap.get(bondedUnit.unitB);\n            const inputUnitB = inputStructure.unitMap.get(bondedUnit.unitB);\n            for (const aI of bondedUnit.connectedIndices) {\n                // check if the element is in the expanded structure\n                if (!SortedArray.has(unit.elements, inputUnitA.elements[aI]))\n                    continue;\n                for (const bond of bondedUnit.getEdges(aI)) {\n                    const bElement = inputUnitB.elements[bond.indexB];\n                    // Check if the element is already present:\n                    if ((currentUnitB && SortedArray.has(currentUnitB.elements, bElement)) || builder.has(bondedUnit.unitB, bElement))\n                        continue;\n                    atomicBond.a.unit = inputUnitA;\n                    atomicBond.aIndex = aI;\n                    atomicBond.a.element = inputUnitA.elements[aI];\n                    atomicBond.b.unit = inputUnitB;\n                    atomicBond.bIndex = bond.indexB;\n                    atomicBond.b.element = bElement;\n                    atomicBond.type = bond.props.flag;\n                    atomicBond.order = bond.props.order;\n                    atomicBond.key = bond.props.key;\n                    if (atomicBond.test(ctx, true)) {\n                        builder.addToUnit(bondedUnit.unitB, bElement);\n                    }\n                }\n            }\n        }\n    }\n    return builder.getStructure();\n}\n/**\n * Includes expanded surrounding ligands based on radius from the source, struct_conn entries & pdbx_molecule entries.\n */\nexport function surroundingLigands({ query, radius, includeWater }) {\n    const _ent_type = StructureProperties.entity.type;\n    function testIsWater(l) {\n        return _ent_type(l) === 'water';\n    }\n    return function query_surroundingLigands(ctx) {\n        const inner = StructureSelection.unionStructure(query(ctx));\n        const surroundings = getWholeResidues(ctx, ctx.inputStructure, getIncludeSurroundings(ctx, ctx.inputStructure, inner, { radius }));\n        const prd = getPrdAsymIdx(ctx.inputStructure);\n        const graph = getStructConnInfo(ctx.inputStructure);\n        const l = StructureElement.Location.create(surroundings);\n        const includedPrdChains = new Map();\n        const componentResidues = new ResidueSet({ checkOperator: true });\n        for (const unit of surroundings.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const { elements } = unit;\n            const chainsIt = Segmentation.transientSegments(unit.model.atomicHierarchy.chainAtomSegments, elements);\n            const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, elements);\n            while (chainsIt.hasNext) {\n                const chainSegment = chainsIt.move();\n                l.element = elements[chainSegment.start];\n                const asym_id = StructureProperties.chain.label_asym_id(l);\n                const op_name = StructureProperties.unit.operator_name(l);\n                // check for PRD molecules\n                if (prd.has(asym_id)) {\n                    if (includedPrdChains.has(asym_id)) {\n                        arraySetAdd(includedPrdChains.get(asym_id), op_name);\n                    }\n                    else {\n                        includedPrdChains.set(asym_id, [op_name]);\n                    }\n                    continue;\n                }\n                const entityType = StructureProperties.entity.type(l);\n                // test entity and chain\n                if (entityType === 'water' || entityType === 'polymer')\n                    continue;\n                residuesIt.setSegment(chainSegment);\n                while (residuesIt.hasNext) {\n                    const residueSegment = residuesIt.move();\n                    l.element = elements[residueSegment.start];\n                    graph.addComponent(ResidueSet.getEntryFromLocation(l), componentResidues);\n                }\n            }\n            ctx.throwIfTimedOut();\n        }\n        // assemble the core structure\n        const builder = ctx.inputStructure.subsetBuilder(true);\n        for (const unit of ctx.inputStructure.units) {\n            if (unit.kind !== Unit.Kind.Atomic)\n                continue;\n            l.unit = unit;\n            const { elements } = unit;\n            const chainsIt = Segmentation.transientSegments(unit.model.atomicHierarchy.chainAtomSegments, elements);\n            const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, elements);\n            builder.beginUnit(unit.id);\n            while (chainsIt.hasNext) {\n                const chainSegment = chainsIt.move();\n                l.element = elements[chainSegment.start];\n                const asym_id = StructureProperties.chain.label_asym_id(l);\n                const op_name = StructureProperties.unit.operator_name(l);\n                if (includedPrdChains.has(asym_id) && includedPrdChains.get(asym_id).indexOf(op_name) >= 0) {\n                    builder.addElementRange(elements, chainSegment.start, chainSegment.end);\n                    continue;\n                }\n                if (!componentResidues.hasLabelAsymId(asym_id)) {\n                    continue;\n                }\n                residuesIt.setSegment(chainSegment);\n                while (residuesIt.hasNext) {\n                    const residueSegment = residuesIt.move();\n                    l.element = elements[residueSegment.start];\n                    if (!componentResidues.has(l))\n                        continue;\n                    builder.addElementRange(elements, residueSegment.start, residueSegment.end);\n                }\n            }\n            builder.commitUnit();\n            ctx.throwIfTimedOut();\n        }\n        const components = structureUnion(ctx.inputStructure, [builder.getStructure(), inner]);\n        // add water\n        if (includeWater) {\n            const finalBuilder = new StructureUniqueSubsetBuilder(ctx.inputStructure);\n            const lookup = ctx.inputStructure.lookup3d;\n            for (const unit of components.units) {\n                const c = unit.conformation;\n                const elements = unit.elements;\n                for (let i = 0, _i = elements.length; i < _i; i++) {\n                    const e = elements[i];\n                    lookup.findIntoBuilderIf(c.x(e), c.y(e), c.z(e), radius, finalBuilder, testIsWater);\n                    finalBuilder.addToUnit(unit.id, e);\n                }\n                ctx.throwIfTimedOut();\n            }\n            return StructureSelection.Sequence(ctx.inputStructure, [finalBuilder.getStructure()]);\n        }\n        else {\n            return StructureSelection.Sequence(ctx.inputStructure, [components]);\n        }\n    };\n}\nfunction getPrdAsymIdx(structure) {\n    var _a;\n    const model = structure.models[0];\n    const ids = new Set();\n    // Need to do this manually to prevent a cyclical import causing\n    // errors with turbopack when ES6 modules are used.\n    if (((_a = model.sourceData) === null || _a === void 0 ? void 0 : _a.kind) !== 'mmCIF')\n        return ids;\n    const { _rowCount, asym_id } = model.sourceData.data.db.pdbx_molecule;\n    for (let i = 0; i < _rowCount; i++) {\n        ids.add(asym_id.value(i));\n    }\n    return ids;\n}\nfunction getStructConnInfo(structure) {\n    var _a, _b, _c;\n    const model = structure.models[0];\n    const graph = new StructConnGraph();\n    // Need to do this manually to prevent a cyclical import causing\n    // errors with turbopack when ES6 modules are used.\n    if (((_a = model.sourceData) === null || _a === void 0 ? void 0 : _a.kind) !== 'mmCIF')\n        return graph;\n    const struct_conn = model.sourceData.data.db.struct_conn;\n    const { conn_type_id } = struct_conn;\n    const { ptnr1_label_asym_id, ptnr1_label_comp_id, ptnr1_label_seq_id, ptnr1_symmetry, pdbx_ptnr1_label_alt_id, pdbx_ptnr1_PDB_ins_code } = struct_conn;\n    const { ptnr2_label_asym_id, ptnr2_label_comp_id, ptnr2_label_seq_id, ptnr2_symmetry, pdbx_ptnr2_label_alt_id, pdbx_ptnr2_PDB_ins_code } = struct_conn;\n    for (let i = 0; i < struct_conn._rowCount; i++) {\n        const bondType = conn_type_id.value(i);\n        if (bondType !== 'covale' && bondType !== 'metalc')\n            continue;\n        const a = {\n            label_asym_id: ptnr1_label_asym_id.value(i),\n            label_comp_id: ptnr1_label_comp_id.value(i),\n            label_seq_id: ptnr1_label_seq_id.value(i),\n            label_alt_id: pdbx_ptnr1_label_alt_id.value(i),\n            ins_code: pdbx_ptnr1_PDB_ins_code.value(i),\n            operator_name: (_b = ptnr1_symmetry.value(i)) !== null && _b !== void 0 ? _b : '1_555'\n        };\n        const b = {\n            label_asym_id: ptnr2_label_asym_id.value(i),\n            label_comp_id: ptnr2_label_comp_id.value(i),\n            label_seq_id: ptnr2_label_seq_id.value(i),\n            label_alt_id: pdbx_ptnr2_label_alt_id.value(i),\n            ins_code: pdbx_ptnr2_PDB_ins_code.value(i),\n            operator_name: (_c = ptnr2_symmetry.value(i)) !== null && _c !== void 0 ? _c : '1_555'\n        };\n        graph.addEdge(a, b);\n    }\n    return graph;\n}\nclass StructConnGraph {\n    constructor() {\n        this.vertices = new Map();\n        this.edges = new Map();\n    }\n    addVertex(e, label) {\n        if (this.vertices.has(label))\n            return;\n        this.vertices.set(label, e);\n        this.edges.set(label, []);\n    }\n    addEdge(a, b) {\n        const al = ResidueSet.getLabel(a);\n        const bl = ResidueSet.getLabel(b);\n        this.addVertex(a, al);\n        this.addVertex(b, bl);\n        arraySetAdd(this.edges.get(al), bl);\n        arraySetAdd(this.edges.get(bl), al);\n    }\n    addComponent(start, set) {\n        const startLabel = ResidueSet.getLabel(start);\n        if (!this.vertices.has(startLabel)) {\n            set.add(start);\n            return;\n        }\n        const visited = new Set();\n        const added = new Set();\n        const stack = [startLabel];\n        added.add(startLabel);\n        set.add(start);\n        while (stack.length > 0) {\n            const a = stack.pop();\n            visited.add(a);\n            const u = this.vertices.get(a);\n            for (const b of this.edges.get(a)) {\n                if (visited.has(b))\n                    continue;\n                stack.push(b);\n                if (added.has(b))\n                    continue;\n                added.add(b);\n                const v = this.vertices.get(b);\n                if (u.operator_name === v.operator_name) {\n                    set.add({ ...v, operator_name: start.operator_name });\n                }\n                else {\n                    set.add(v);\n                }\n            }\n        }\n    }\n}\n// TODO: unionBy (skip this one?), cluster\n","/**\n * Copyright (c) 2017-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nexport function checkStructureMinMaxDistance(ctx, a, b, minDist, maxDist, elementRadius) {\n    if (a.elementCount === 0 || b.elementCount === 0)\n        return true;\n    if (a.elementCount <= b.elementCount)\n        return MinMaxDist.check(ctx, a, b, minDist, maxDist, elementRadius);\n    return MinMaxDist.check(ctx, b, a, minDist, maxDist, elementRadius);\n}\nexport function checkStructureMaxRadiusDistance(ctx, a, b, maxDist, elementRadius) {\n    if (a.elementCount === 0 || b.elementCount === 0)\n        return true;\n    if (a.elementCount <= b.elementCount)\n        return MaxRadiusDist.check(ctx, a, b, maxDist, elementRadius);\n    return MaxRadiusDist.check(ctx, b, a, maxDist, elementRadius);\n}\nvar MinMaxDist;\n(function (MinMaxDist) {\n    let Result;\n    (function (Result) {\n        Result[Result[\"BelowMin\"] = 0] = \"BelowMin\";\n        Result[Result[\"WithinMax\"] = 1] = \"WithinMax\";\n        Result[Result[\"Miss\"] = 2] = \"Miss\";\n    })(Result || (Result = {}));\n    const distVec = Vec3();\n    function inUnit(ctx, unit, p, eRadius, minDist, maxDist, elementRadius) {\n        const { elements, conformation: c } = unit, dV = distVec;\n        ctx.element.unit = unit;\n        let withinRange = false;\n        for (let i = 0, _i = elements.length; i < _i; i++) {\n            const e = elements[i];\n            ctx.element.element = e;\n            const d = Math.max(0, Vec3.distance(p, c.position(e, dV)) - eRadius - elementRadius(ctx));\n            if (d < minDist)\n                return Result.BelowMin;\n            if (d < maxDist)\n                withinRange = true;\n        }\n        return withinRange ? Result.WithinMax : Result.Miss;\n    }\n    function toPoint(ctx, s, point, radius, minDist, maxDist, elementRadius) {\n        const { units } = s;\n        let withinRange = false;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const iu = inUnit(ctx, units[i], point, radius, minDist, maxDist, elementRadius);\n            if (iu === Result.BelowMin)\n                return Result.BelowMin;\n            if (iu === Result.WithinMax)\n                withinRange = true;\n        }\n        return withinRange ? Result.WithinMax : Result.Miss;\n    }\n    const distPivot = Vec3();\n    function check(ctx, a, b, minDist, maxDist, elementRadius) {\n        if (a.elementCount === 0 || b.elementCount === 0)\n            return 0;\n        const { units } = a;\n        let withinRange = false;\n        ctx.element.structure = a;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const unit = units[i];\n            const { elements, conformation: c } = unit;\n            ctx.element.unit = unit;\n            for (let i = 0, _i = elements.length; i < _i; i++) {\n                const e = elements[i];\n                ctx.element.element = e;\n                const tp = toPoint(ctx, b, c.position(e, distPivot), elementRadius(ctx), minDist, maxDist, elementRadius);\n                if (tp === Result.BelowMin)\n                    return false;\n                if (tp === Result.WithinMax)\n                    withinRange = true;\n            }\n        }\n        return withinRange;\n    }\n    MinMaxDist.check = check;\n})(MinMaxDist || (MinMaxDist = {}));\nvar MaxRadiusDist;\n(function (MaxRadiusDist) {\n    const distVec = Vec3();\n    function inUnit(ctx, unit, p, eRadius, maxDist, elementRadius) {\n        const { elements, conformation: c } = unit, dV = distVec;\n        ctx.element.unit = unit;\n        for (let i = 0, _i = elements.length; i < _i; i++) {\n            const e = elements[i];\n            ctx.element.element = e;\n            if (Math.max(0, Vec3.distance(p, c.position(e, dV)) - eRadius - elementRadius(ctx)) <= maxDist)\n                return true;\n        }\n        return false;\n    }\n    function toPoint(ctx, s, point, radius, maxDist, elementRadius) {\n        const { units } = s;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            if (inUnit(ctx, units[i], point, radius, maxDist, elementRadius))\n                return true;\n        }\n        return false;\n    }\n    const distPivot = Vec3();\n    function check(ctx, a, b, maxDist, elementRadius) {\n        if (a.elementCount === 0 || b.elementCount === 0)\n            return 0;\n        const { units } = a;\n        ctx.element.structure = a;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const unit = units[i];\n            ctx.element.unit = unit;\n            const { elements, conformation: c } = unit;\n            for (let i = 0, _i = elements.length; i < _i; i++) {\n                const e = elements[i];\n                ctx.element.element = e;\n                if (toPoint(ctx, b, c.position(e, distPivot), elementRadius(ctx), maxDist, elementRadius))\n                    return true;\n            }\n        }\n        return false;\n    }\n    MaxRadiusDist.check = check;\n})(MaxRadiusDist || (MaxRadiusDist = {}));\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nvar Predicates;\n(function (Predicates) {\n    function isSetLike(x) { return !!x && !!x.has; }\n    function eq(p, value) { return l => p(l) === value; }\n    Predicates.eq = eq;\n    function lt(p, value) { return l => p(l) < value; }\n    Predicates.lt = lt;\n    function lte(p, value) { return l => p(l) <= value; }\n    Predicates.lte = lte;\n    function gt(p, value) { return l => p(l) > value; }\n    Predicates.gt = gt;\n    function gte(p, value) { return l => p(l) >= value; }\n    Predicates.gte = gte;\n    function _true(ctx) { return true; }\n    function _false(ctx) { return false; }\n    function inSet(p, values) {\n        if (isSetLike(values)) {\n            return l => values.has(p(l));\n        }\n        else {\n            if (values.length === 0)\n                return _false;\n            const set = new Set();\n            for (let i = 0; i < values.length; i++)\n                set.add(values[i]);\n            return l => set.has(p(l));\n        }\n    }\n    Predicates.inSet = inSet;\n    function and(...ps) {\n        switch (ps.length) {\n            case 0: return _true;\n            case 1: return ps[0];\n            case 2: {\n                const a = ps[0], b = ps[1];\n                return l => a(l) && b(l);\n            }\n            case 3: {\n                const a = ps[0], b = ps[1], c = ps[2];\n                return l => a(l) && b(l) && c(l);\n            }\n            case 4: {\n                const a = ps[0], b = ps[1], c = ps[2], d = ps[3];\n                return l => a(l) && b(l) && c(l) && d(l);\n            }\n            case 5: {\n                const a = ps[0], b = ps[1], c = ps[2], d = ps[3], e = ps[4];\n                return l => a(l) && b(l) && c(l) && d(l) && e(l);\n            }\n            case 6: {\n                const a = ps[0], b = ps[1], c = ps[2], d = ps[3], e = ps[4], f = ps[5];\n                return l => a(l) && b(l) && c(l) && d(l) && e(l) && f(l);\n            }\n            default: {\n                const count = ps.length;\n                return l => {\n                    for (let i = 0; i < count; i++)\n                        if (!ps[i])\n                            return false;\n                    return true;\n                };\n            }\n        }\n    }\n    Predicates.and = and;\n    function or(...ps) {\n        switch (ps.length) {\n            case 0: return _false;\n            case 1: return ps[0];\n            case 2: {\n                const a = ps[0], b = ps[1];\n                return l => a(l) || b(l);\n            }\n            case 3: {\n                const a = ps[0], b = ps[1], c = ps[2];\n                return l => a(l) || b(l) || c(l);\n            }\n            case 4: {\n                const a = ps[0], b = ps[1], c = ps[2], d = ps[3];\n                return l => a(l) || b(l) || c(l) || d(l);\n            }\n            case 5: {\n                const a = ps[0], b = ps[1], c = ps[2], d = ps[3], e = ps[4];\n                return l => a(l) || b(l) || c(l) || d(l) || e(l);\n            }\n            case 6: {\n                const a = ps[0], b = ps[1], c = ps[2], d = ps[3], e = ps[4], f = ps[5];\n                return l => a(l) || b(l) || c(l) || d(l) || e(l) || f(l);\n            }\n            default: {\n                const count = ps.length;\n                return l => {\n                    for (let i = 0; i < count; i++)\n                        if (ps[i])\n                            return true;\n                    return false;\n                };\n            }\n        }\n    }\n    Predicates.or = or;\n})(Predicates || (Predicates = {}));\nexport { Predicates };\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SetUtils } from '../../../../mol-util/set.js';\nimport { Unit } from '../../structure.js';\nimport { StructureSelection } from '../selection.js';\nimport { structureAreIntersecting } from '../utils/structure-set.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nimport { checkStructureMaxRadiusDistance, checkStructureMinMaxDistance } from '../utils/structure-distance.js';\nimport { Structure } from '../../structure/structure.js';\nimport { SortedArray } from '../../../../mol-data/int.js';\nexport function pick(query, pred) {\n    return ctx => {\n        const sel = query(ctx);\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        ctx.pushCurrentElement();\n        StructureSelection.forEach(sel, (s, i) => {\n            ctx.currentStructure = s;\n            if (pred(ctx))\n                ret.add(s);\n            if (i % 100)\n                ctx.throwIfTimedOut();\n        });\n        ctx.popCurrentStructure();\n        return ret.getSelection();\n    };\n}\nexport function first(query) {\n    return ctx => {\n        const sel = query(ctx);\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        if (sel.kind === 'singletons') {\n            if (sel.structure.elementCount > 0) {\n                const u = sel.structure.units[0];\n                const s = Structure.create([u.getChild(SortedArray.ofSingleton(u.elements[0]))], { parent: ctx.inputStructure });\n                ret.add(s);\n            }\n        }\n        else {\n            if (sel.structures.length > 0) {\n                ret.add(sel.structures[0]);\n            }\n        }\n        return ret.getSelection();\n    };\n}\nexport function getCurrentStructureProperties(ctx, props, set) {\n    const { units } = ctx.currentStructure;\n    const l = ctx.pushCurrentElement();\n    l.structure = ctx.currentStructure;\n    for (const unit of units) {\n        l.unit = unit;\n        const elements = unit.elements;\n        const fn = props;\n        //        if (Unit.isAtomic(unit)) fn = props.atomic;\n        //        else fn = props.coarse;\n        if (!fn)\n            continue;\n        for (let j = 0, _j = elements.length; j < _j; j++) {\n            l.element = elements[j];\n            set.add(fn(ctx));\n        }\n        ctx.throwIfTimedOut();\n    }\n    ctx.popCurrentElement();\n    return set;\n}\nfunction getSelectionProperties(ctx, query, props) {\n    const set = new Set();\n    const sel = query(ctx);\n    ctx.pushCurrentElement();\n    StructureSelection.forEach(sel, (s, i) => {\n        ctx.currentStructure = s;\n        getCurrentStructureProperties(ctx, props, set);\n        if (i % 10)\n            ctx.throwIfTimedOut();\n    });\n    ctx.popCurrentElement();\n    return set;\n}\nexport function withSameAtomProperties(query, propertySource, props) {\n    return ctx => {\n        const sel = query(ctx);\n        const propSet = getSelectionProperties(ctx, propertySource, props);\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        ctx.pushCurrentStructure();\n        StructureSelection.forEach(sel, (s, i) => {\n            ctx.currentStructure = s;\n            const currentProps = getCurrentStructureProperties(ctx, props, new Set());\n            if (SetUtils.isSuperset(propSet, currentProps)) {\n                ret.add(s);\n            }\n            if (i % 10)\n                ctx.throwIfTimedOut();\n        });\n        ctx.popCurrentStructure();\n        return ret.getSelection();\n    };\n}\nexport function areIntersectedBy(query, by) {\n    return ctx => {\n        const mask = StructureSelection.unionStructure(by(ctx));\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        StructureSelection.forEach(query(ctx), (s, i) => {\n            if (structureAreIntersecting(mask, s))\n                ret.add(s);\n            if (i % 10)\n                ctx.throwIfTimedOut();\n        });\n        return ret.getSelection();\n    };\n}\nexport function within(params) {\n    return queryCtx => {\n        const ctx = {\n            queryCtx,\n            selection: params.query(queryCtx),\n            target: params.target(queryCtx),\n            maxRadius: params.maxRadius,\n            minRadius: params.minRadius ? Math.max(0, params.minRadius) : 0,\n            elementRadius: params.elementRadius,\n            invert: !!params.invert,\n        };\n        if (ctx.minRadius === 0 && typeof params.minRadius === 'undefined') {\n            return withinMaxRadiusLookup(ctx);\n        }\n        else if (ctx.minRadius === 0) {\n            return withinMaxRadius(ctx);\n        }\n        else {\n            return withinMinMaxRadius(ctx);\n        }\n    };\n}\nfunction withinMaxRadiusLookup({ queryCtx, selection, target, maxRadius, invert }) {\n    const targetLookup = StructureSelection.unionStructure(target).lookup3d;\n    const ret = StructureSelection.LinearBuilder(queryCtx.inputStructure);\n    const pos = Vec3.zero();\n    StructureSelection.forEach(selection, (s, sI) => {\n        const { units } = s;\n        let withinRadius = false;\n        for (let i = 0, _i = units.length; i < _i; i++) {\n            const unit = units[i];\n            const { elements, conformation: c } = unit;\n            for (let i = 0, _i = elements.length; i < _i; i++) {\n                const e = elements[i];\n                c.position(e, pos);\n                if (targetLookup.check(pos[0], pos[1], pos[2], maxRadius + c.r(e))) {\n                    withinRadius = true;\n                    break;\n                }\n            }\n            if (withinRadius)\n                break;\n        }\n        if (invert)\n            withinRadius = !withinRadius;\n        if (withinRadius)\n            ret.add(s);\n        if (sI % 10 === 0)\n            queryCtx.throwIfTimedOut();\n    });\n    return ret.getSelection();\n}\nfunction withinMaxRadius({ queryCtx, selection, target, maxRadius, invert, elementRadius }) {\n    const targetStructure = StructureSelection.unionStructure(target);\n    const ret = StructureSelection.LinearBuilder(queryCtx.inputStructure);\n    queryCtx.pushCurrentElement();\n    StructureSelection.forEach(selection, (s, sI) => {\n        let withinRadius = checkStructureMaxRadiusDistance(queryCtx, targetStructure, s, maxRadius, elementRadius);\n        if (invert)\n            withinRadius = !withinRadius;\n        if (withinRadius)\n            ret.add(s);\n        if (sI % 10 === 0)\n            queryCtx.throwIfTimedOut();\n    });\n    queryCtx.popCurrentElement();\n    return ret.getSelection();\n}\nfunction withinMinMaxRadius({ queryCtx, selection, target, minRadius, maxRadius, invert, elementRadius }) {\n    const targetStructure = StructureSelection.unionStructure(target);\n    const ret = StructureSelection.LinearBuilder(queryCtx.inputStructure);\n    queryCtx.pushCurrentElement();\n    StructureSelection.forEach(selection, (s, sI) => {\n        let withinRadius = checkStructureMinMaxDistance(queryCtx, targetStructure, s, minRadius, maxRadius, elementRadius);\n        if (invert)\n            withinRadius = !withinRadius;\n        if (withinRadius)\n            ret.add(s);\n        if (sI % 10 === 0)\n            queryCtx.throwIfTimedOut();\n    });\n    queryCtx.popCurrentElement();\n    return ret.getSelection();\n}\nfunction checkConnected(ctx, structure) {\n    const { queryCtx, input, target, disjunct } = ctx;\n    const atomicBond = queryCtx.atomicBond;\n    const interBonds = input.interUnitBonds;\n    atomicBond.setStructure(input);\n    for (const unit of structure.units) {\n        if (!Unit.isAtomic(unit))\n            continue;\n        const inputUnit = input.unitMap.get(unit.id);\n        const { offset, b, edgeProps: { flags, order, key } } = inputUnit.bonds;\n        const bondedUnits = interBonds.getConnectedUnits(unit.id);\n        const buCount = bondedUnits.length;\n        const srcElements = unit.elements;\n        const inputElements = inputUnit.elements;\n        for (let i = 0, _i = srcElements.length; i < _i; i++) {\n            const inputIndex = SortedArray.indexOf(inputElements, srcElements[i]);\n            atomicBond.a.unit = inputUnit;\n            atomicBond.b.unit = inputUnit;\n            // tElement.unit = unit;\n            for (let l = offset[inputIndex], _l = offset[inputIndex + 1]; l < _l; l++) {\n                // tElement.element = inputElements[b[l]];\n                atomicBond.b.element = inputUnit.elements[b[l]];\n                if (disjunct && SortedArray.has(unit.elements, atomicBond.b.element))\n                    continue;\n                if (!target.hasElement(atomicBond.b))\n                    continue;\n                atomicBond.aIndex = inputIndex;\n                atomicBond.a.element = srcElements[i];\n                atomicBond.bIndex = b[l];\n                atomicBond.type = flags[l];\n                atomicBond.order = order[l];\n                atomicBond.key = key[l];\n                if (atomicBond.test(queryCtx, true))\n                    return true;\n            }\n            for (let li = 0; li < buCount; li++) {\n                const lu = bondedUnits[li];\n                const bUnit = input.unitMap.get(lu.unitB);\n                const bElements = bUnit.elements;\n                const bonds = lu.getEdges(inputIndex);\n                for (let bi = 0, _bi = bonds.length; bi < _bi; bi++) {\n                    const bond = bonds[bi];\n                    atomicBond.b.unit = bUnit;\n                    atomicBond.b.element = bElements[bond.indexB];\n                    if (!target.hasElement(atomicBond.b))\n                        continue;\n                    if (disjunct && structure.hasElement(atomicBond.b))\n                        continue;\n                    atomicBond.a.unit = inputUnit;\n                    atomicBond.aIndex = inputIndex;\n                    atomicBond.a.element = srcElements[i];\n                    atomicBond.bIndex = bond.indexB;\n                    atomicBond.type = bond.props.flag;\n                    atomicBond.order = bond.props.order;\n                    atomicBond.key = bond.props.key;\n                    if (atomicBond.test(queryCtx, true))\n                        return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nexport function isConnectedTo({ query, target, disjunct, invert, bondTest }) {\n    return ctx => {\n        const targetSel = target(ctx);\n        if (StructureSelection.isEmpty(targetSel))\n            return targetSel;\n        const selection = query(ctx);\n        if (StructureSelection.isEmpty(selection))\n            return selection;\n        const connCtx = {\n            queryCtx: ctx,\n            input: ctx.inputStructure,\n            disjunct,\n            target: StructureSelection.unionStructure(targetSel)\n        };\n        const ret = StructureSelection.LinearBuilder(ctx.inputStructure);\n        ctx.pushCurrentBond();\n        ctx.atomicBond.setTestFn(bondTest);\n        StructureSelection.forEach(selection, (s, sI) => {\n            if (checkConnected(connCtx, s)) {\n                ret.add(s);\n            }\n            else if (invert) {\n                ret.add(s);\n            }\n            if (sI % 5 === 0)\n                ctx.throwIfTimedOut();\n        });\n        ctx.popCurrentBond();\n        return ret.getSelection();\n    };\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureSelection } from '../selection.js';\nimport { none } from './generators.js';\nimport { HashSet } from '../../../../mol-data/generic.js';\nimport { Structure } from '../../structure.js';\nexport function merge(queries) {\n    if (queries.length === 0) {\n        return none;\n    }\n    else if (queries.length === 1) {\n        return queries[0];\n    }\n    return ctx => {\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        for (let i = 0; i < queries.length; i++) {\n            StructureSelection.forEach(queries[i](ctx), (s, j) => {\n                ret.add(s);\n                if (i % 100)\n                    ctx.throwIfTimedOut();\n            });\n        }\n        return ret.getSelection();\n    };\n}\nexport function intersect(queries) {\n    if (queries.length === 0) {\n        return none;\n    }\n    else if (queries.length === 1) {\n        return queries[0];\n    }\n    return ctx => {\n        const selections = [];\n        for (let i = 0; i < queries.length; i++)\n            selections.push(queries[i](ctx));\n        let pivotIndex = 0, pivotLength = StructureSelection.structureCount(selections[0]);\n        for (let i = 1; i < selections.length; i++) {\n            const len = StructureSelection.structureCount(selections[i]);\n            if (len < pivotLength) {\n                pivotIndex = i;\n                pivotLength = len;\n            }\n        }\n        ctx.throwIfTimedOut();\n        const pivotSet = HashSet(s => s.hashCode, Structure.areUnitIdsAndIndicesEqual);\n        StructureSelection.forEach(selections[pivotIndex], s => pivotSet.add(s));\n        const ret = StructureSelection.UniqueBuilder(ctx.inputStructure);\n        for (let pI = 0; pI < selections.length; pI++) {\n            if (pI === pivotIndex)\n                continue;\n            StructureSelection.forEach(selections[pI], s => {\n                if (pivotSet.has(s))\n                    ret.add(s);\n            });\n            ctx.throwIfTimedOut();\n        }\n        return ret.getSelection();\n    };\n}\n// TODO: distanceCluster\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Koya Sakuma\n * Adapted from MolQL implemtation of atom-set.ts\n *\n * Copyright (c) 2017 MolQL contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureSelection } from '../selection.js';\nimport { getCurrentStructureProperties } from './filters.js';\nexport function atomCount(ctx) {\n    return ctx.currentStructure.elementCount;\n}\nexport function countQuery(query) {\n    return (ctx) => {\n        const sel = query(ctx);\n        return StructureSelection.structureCount(sel);\n    };\n}\nexport function propertySet(prop) {\n    return (ctx) => {\n        const set = new Set();\n        return getCurrentStructureProperties(ctx, prop, set);\n    };\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { StructureSelection } from './query/selection.js';\nimport { StructureQuery } from './query/query.js';\nexport * from './query/context.js';\nimport * as generators from './query/queries/generators.js';\nimport * as modifiers from './query/queries/modifiers.js';\nimport * as filters from './query/queries/filters.js';\nimport * as combinators from './query/queries/combinators.js';\nimport * as internal from './query/queries/internal.js';\nimport * as atomset from './query/queries/atom-set.js';\nimport { Predicates as pred } from './query/predicates.js';\nexport const Queries = {\n    generators,\n    filters,\n    modifiers,\n    combinators,\n    pred,\n    internal,\n    atomset\n};\nexport { StructureSelection, StructureQuery };\n","import { Mat3 } from './3d/mat3.js';\n/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Mat4 } from './3d/mat4.js';\nexport var Tensor;\n(function (Tensor) {\n    function Layout(dimensions, axisOrderSlowToFast, ctor) {\n        // need to reverse the axis order for better access.\n        const axisOrderFastToSlow = [];\n        for (let i = 0; i < axisOrderSlowToFast.length; i++)\n            axisOrderFastToSlow[i] = axisOrderSlowToFast[axisOrderSlowToFast.length - i - 1];\n        const accessDimensions = [1];\n        for (let i = 1; i < dimensions.length; i++)\n            accessDimensions[i] = dimensions[axisOrderFastToSlow[i - 1]];\n        return { dimensions, axisOrderFastToSlow, axisOrderSlowToFast, accessDimensions, defaultCtor: ctor || Float64Array };\n    }\n    function create(space, data) { return { space, data }; }\n    Tensor.create = create;\n    function Space(dimensions, axisOrderSlowToFast, ctor) {\n        const layout = Layout(dimensions, axisOrderSlowToFast, ctor);\n        const { get, set, add, dataOffset, getCoords } = accessors(layout);\n        return { rank: dimensions.length, dimensions, axisOrderSlowToFast, create: creator(layout), get, set, add, dataOffset, getCoords };\n    }\n    Tensor.Space = Space;\n    function Data1(values) { return values; }\n    Tensor.Data1 = Data1;\n    function Vector(d, ctor) { return Space([d], [0], ctor); }\n    Tensor.Vector = Vector;\n    function ColumnMajorMatrix(rows, cols, ctor) { return Space([rows, cols], [1, 0], ctor); }\n    Tensor.ColumnMajorMatrix = ColumnMajorMatrix;\n    function RowMajorMatrix(rows, cols, ctor) { return Space([rows, cols], [0, 1], ctor); }\n    Tensor.RowMajorMatrix = RowMajorMatrix;\n    function toMat4(out, space, data) {\n        if (space.rank !== 2)\n            throw new Error('Invalid tensor rank');\n        const d0 = Math.min(4, space.dimensions[0]), d1 = Math.min(4, space.dimensions[1]);\n        for (let i = 0; i < d0; i++) {\n            for (let j = 0; j < d1; j++)\n                Mat4.setValue(out, i, j, space.get(data, i, j));\n        }\n        return out;\n    }\n    Tensor.toMat4 = toMat4;\n    function toMat3(out, space, data) {\n        if (space.rank !== 2)\n            throw new Error('Invalid tensor rank');\n        const d0 = Math.min(3, space.dimensions[0]), d1 = Math.min(3, space.dimensions[1]);\n        for (let i = 0; i < d0; i++) {\n            for (let j = 0; j < d1; j++)\n                Mat3.setValue(out, i, j, space.get(data, i, j));\n        }\n        return out;\n    }\n    Tensor.toMat3 = toMat3;\n    function toVec3(out, space, data) {\n        if (space.rank !== 1)\n            throw new Error('Invalid tensor rank');\n        const d0 = Math.min(3, space.dimensions[0]);\n        for (let i = 0; i < d0; i++)\n            out[i] = data[i];\n        return out;\n    }\n    Tensor.toVec3 = toVec3;\n    function toVec4(out, space, data) {\n        if (space.rank !== 1)\n            throw new Error('Invalid tensor rank');\n        const d0 = Math.min(4, space.dimensions[0]);\n        for (let i = 0; i < d0; i++)\n            out[i] = data[i];\n        return out;\n    }\n    Tensor.toVec4 = toVec4;\n    function areEqualExact(a, b) {\n        const len = a.length;\n        if (len !== b.length)\n            return false;\n        for (let i = 0; i < len; i++)\n            if (a[i] !== b[i])\n                return false;\n        return true;\n    }\n    Tensor.areEqualExact = areEqualExact;\n    function accessors(layout) {\n        const { dimensions, axisOrderFastToSlow: ao } = layout;\n        switch (dimensions.length) {\n            case 1: return {\n                get: (t, d) => t[d],\n                set: (t, d, x) => t[d] = x,\n                add: (t, d, x) => t[d] += x,\n                dataOffset: (d) => d,\n                getCoords: (o, c) => {\n                    c[0] = o;\n                    return c;\n                }\n            };\n            case 2: {\n                // column major\n                if (ao[0] === 0 && ao[1] === 1) {\n                    const rows = dimensions[0];\n                    return {\n                        get: (t, i, j) => t[j * rows + i],\n                        set: (t, i, j, x) => t[j * rows + i] = x,\n                        add: (t, i, j, x) => t[j * rows + i] += x,\n                        dataOffset: (i, j) => j * rows + i,\n                        getCoords: (o, c) => {\n                            c[0] = o % rows;\n                            c[1] = Math.floor(o / rows);\n                            return c;\n                        }\n                    };\n                }\n                if (ao[0] === 1 && ao[1] === 0) {\n                    const cols = dimensions[1];\n                    return {\n                        get: (t, i, j) => t[i * cols + j],\n                        set: (t, i, j, x) => t[i * cols + j] = x,\n                        add: (t, i, j, x) => t[i * cols + j] += x,\n                        dataOffset: (i, j) => i * cols + j,\n                        getCoords: (o, c) => {\n                            c[0] = Math.floor(o / cols);\n                            c[1] = o % cols;\n                            return c;\n                        }\n                    };\n                }\n                throw new Error('bad axis order');\n            }\n            case 3: {\n                if (ao[0] === 0 && ao[1] === 1 && ao[2] === 2) { // 012 ijk\n                    const u = dimensions[0], v = dimensions[1], uv = u * v;\n                    return {\n                        get: (t, i, j, k) => t[i + j * u + k * uv],\n                        set: (t, i, j, k, x) => t[i + j * u + k * uv] = x,\n                        add: (t, i, j, k, x) => t[i + j * u + k * uv] += x,\n                        dataOffset: (i, j, k) => i + j * u + k * uv,\n                        getCoords: (o, c) => {\n                            const p = Math.floor(o / u);\n                            c[0] = o % u;\n                            c[1] = p % v;\n                            c[2] = Math.floor(p / v);\n                            return c;\n                        }\n                    };\n                }\n                if (ao[0] === 0 && ao[1] === 2 && ao[2] === 1) { // 021 ikj\n                    const u = dimensions[0], v = dimensions[2], uv = u * v;\n                    return {\n                        get: (t, i, j, k) => t[i + k * u + j * uv],\n                        set: (t, i, j, k, x) => t[i + k * u + j * uv] = x,\n                        add: (t, i, j, k, x) => t[i + k * u + j * uv] += x,\n                        dataOffset: (i, j, k) => i + k * u + j * uv,\n                        getCoords: (o, c) => {\n                            const p = Math.floor(o / u);\n                            c[0] = o % u;\n                            c[1] = Math.floor(p / v);\n                            c[2] = p % v;\n                            return c;\n                        }\n                    };\n                }\n                if (ao[0] === 1 && ao[1] === 0 && ao[2] === 2) { // 102 jik\n                    const u = dimensions[1], v = dimensions[0], uv = u * v;\n                    return {\n                        get: (t, i, j, k) => t[j + i * u + k * uv],\n                        set: (t, i, j, k, x) => t[j + i * u + k * uv] = x,\n                        add: (t, i, j, k, x) => t[j + i * u + k * uv] += x,\n                        dataOffset: (i, j, k) => j + i * u + k * uv,\n                        getCoords: (o, c) => {\n                            const p = Math.floor(o / u);\n                            c[0] = p % v;\n                            c[1] = o % u;\n                            c[2] = Math.floor(p / v);\n                            return c;\n                        }\n                    };\n                }\n                if (ao[0] === 1 && ao[1] === 2 && ao[2] === 0) { // 120 jki\n                    const u = dimensions[1], v = dimensions[2], uv = u * v;\n                    return {\n                        get: (t, i, j, k) => t[j + k * u + i * uv],\n                        set: (t, i, j, k, x) => t[j + k * u + i * uv] = x,\n                        add: (t, i, j, k, x) => t[j + k * u + i * uv] += x,\n                        dataOffset: (i, j, k) => j + k * u + i * uv,\n                        getCoords: (o, c) => {\n                            const p = Math.floor(o / u);\n                            c[0] = Math.floor(p / v);\n                            c[1] = o % u;\n                            c[2] = p % v;\n                            return c;\n                        }\n                    };\n                }\n                if (ao[0] === 2 && ao[1] === 0 && ao[2] === 1) { // 201 kij\n                    const u = dimensions[2], v = dimensions[0], uv = u * v;\n                    return {\n                        get: (t, i, j, k) => t[k + i * u + j * uv],\n                        set: (t, i, j, k, x) => t[k + i * u + j * uv] = x,\n                        add: (t, i, j, k, x) => t[k + i * u + j * uv] += x,\n                        dataOffset: (i, j, k) => k + i * u + j * uv,\n                        getCoords: (o, c) => {\n                            const p = Math.floor(o / u);\n                            c[0] = p % v;\n                            c[1] = Math.floor(p / v);\n                            c[2] = o % u;\n                            return c;\n                        }\n                    };\n                }\n                if (ao[0] === 2 && ao[1] === 1 && ao[2] === 0) { // 210 kji\n                    const u = dimensions[2], v = dimensions[1], uv = u * v;\n                    return {\n                        get: (t, i, j, k) => t[k + j * u + i * uv],\n                        set: (t, i, j, k, x) => t[k + j * u + i * uv] = x,\n                        add: (t, i, j, k, x) => t[k + j * u + i * uv] += x,\n                        dataOffset: (i, j, k) => k + j * u + i * uv,\n                        getCoords: (o, c) => {\n                            const p = Math.floor(o / u);\n                            c[0] = Math.floor(p / v);\n                            c[1] = p % v;\n                            c[2] = o % u;\n                            return c;\n                        }\n                    };\n                }\n                throw new Error('bad axis order');\n            }\n            default: return {\n                get: (t, ...c) => t[dataOffset(layout, c)],\n                set: (t, ...c) => t[dataOffset(layout, c)] = c[c.length - 1],\n                add: (t, ...c) => t[dataOffset(layout, c)] += c[c.length - 1],\n                dataOffset: (...c) => dataOffset(layout, c),\n                getCoords: (o, c) => getCoords(layout, o, c),\n            };\n        }\n    }\n    function creator(layout) {\n        const { dimensions: ds } = layout;\n        let size = 1;\n        for (let i = 0, _i = ds.length; i < _i; i++)\n            size *= ds[i];\n        return ctor => new (ctor || layout.defaultCtor)(size);\n    }\n    function dataOffset(layout, coord) {\n        const { accessDimensions: acc, axisOrderFastToSlow: ao } = layout;\n        const d = acc.length - 1;\n        let o = acc[d] * coord[ao[d]];\n        for (let i = d - 1; i >= 0; i--) {\n            o = (o + coord[ao[i]]) * acc[i];\n        }\n        return o;\n    }\n    function getCoords(layout, o, coords) {\n        const { dimensions: dim, axisOrderFastToSlow: ao } = layout;\n        const d = dim.length;\n        let c = o;\n        for (let i = 0; i < d; i++) {\n            const d = dim[ao[i]];\n            coords[ao[i]] = c % d;\n            c = Math.floor(c / d);\n        }\n        coords[ao[d + 1]] = c;\n        return coords;\n    }\n    // Convers \"slow to fast\" axis order to \"fast to slow\" and vice versa.\n    function invertAxisOrder(v) {\n        const ret = [];\n        for (let i = 0; i < v.length; i++) {\n            ret[i] = v[v.length - i - 1];\n        }\n        return ret;\n    }\n    Tensor.invertAxisOrder = invertAxisOrder;\n    function reorder(xs, indices) {\n        const ret = [];\n        for (let i = 0; i < xs.length; i++)\n            ret[i] = xs[indices[i]];\n        return ret;\n    }\n    function convertToCanonicalAxisIndicesFastToSlow(order) {\n        const indices = new Int32Array(order.length);\n        for (let i = 0; i < order.length; i++)\n            indices[order[i]] = i;\n        return (xs) => reorder(xs, indices);\n    }\n    Tensor.convertToCanonicalAxisIndicesFastToSlow = convertToCanonicalAxisIndicesFastToSlow;\n    function convertToCanonicalAxisIndicesSlowToFast(order) {\n        const indices = new Int32Array(order.length);\n        for (let i = 0; i < order.length; i++)\n            indices[order[order.length - i - 1]] = i;\n        return (xs) => reorder(xs, indices);\n    }\n    Tensor.convertToCanonicalAxisIndicesSlowToFast = convertToCanonicalAxisIndicesSlowToFast;\n})(Tensor || (Tensor = {}));\n","/**\n * Copyright (c) 2018-2025 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Type } from '../type.js';\nimport * as Core from './core.js';\nimport { Arguments, Argument } from '../symbol.js';\nimport { symbol } from '../helpers.js';\nexport var Types;\n(function (Types) {\n    Types.ElementSymbol = Type.Value('Structure', 'ElementSymbol');\n    Types.AtomName = Type.Value('Structure', 'AtomName');\n    Types.BondFlag = Type.OneOf('Structure', 'BondFlag', Type.Str, ['covalent', 'metallic', 'ion', 'hydrogen', 'sulfide', 'computed', 'aromatic']);\n    Types.BondFlags = Core.Types.Flags(Types.BondFlag, 'BondFlags');\n    Types.SecondaryStructureFlag = Type.OneOf('Structure', 'SecondaryStructureFlag', Type.Str, ['alpha', 'beta', '3-10', 'pi', 'sheet', 'strand', 'helix', 'turn', 'none']);\n    Types.SecondaryStructureFlags = Core.Types.Flags(Types.SecondaryStructureFlag, 'SecondaryStructureFlag');\n    Types.RingFingerprint = Type.Value('Structure', 'RingFingerprint');\n    Types.EntityType = Type.OneOf('Structure', 'EntityType', Type.Str, ['polymer', 'non-polymer', 'water', 'branched']);\n    Types.EntitySubtype = Type.OneOf('Structure', 'EntitySubtype', Type.Str, ['other', 'polypeptide(D)', 'polypeptide(L)', 'polydeoxyribonucleotide', 'polyribonucleotide', 'polydeoxyribonucleotide/polyribonucleotide hybrid', 'cyclic-pseudo-peptide', 'peptide nucleic acid', 'oligosaccharide']);\n    Types.ObjectPrimitive = Type.OneOf('Structure', 'ObjectPrimitive', Type.Str, ['atomistic', 'sphere', 'gaussian', 'other']);\n    Types.ResidueId = Type.Value('Structure', 'ResidueId');\n    Types.ElementSet = Type.Value('Structure', 'ElementSet');\n    Types.ElementSelection = Type.Value('Structure', 'ElementSelection');\n    Types.ElementReference = Type.Value('Structure', 'ElementReference');\n    Types.ElementSelectionQuery = Core.Types.Fn(Types.ElementSelection, 'ElementSelectionQuery');\n})(Types || (Types = {}));\nconst type = {\n    '@header': 'Types',\n    elementSymbol: symbol(Arguments.Dictionary({ 0: Argument(Type.Str) }), Types.ElementSymbol, 'Create element symbol representation from a string value.'),\n    atomName: symbol(Arguments.Dictionary({ 0: Argument(Type.AnyValue) }), Types.AtomName, 'Convert a value to an atom name.'),\n    entityType: symbol(Arguments.Dictionary({ 0: Argument(Types.EntityType) }), Types.EntityType, `Create normalized representation of entity type: ${Type.oneOfValues(Types.EntityType).join(', ')}.`),\n    bondFlags: symbol(Arguments.List(Types.BondFlag), Types.BondFlags, `Create bond flags representation from a list of strings. Allowed flags: ${Type.oneOfValues(Types.BondFlag).join(', ')}.`),\n    ringFingerprint: symbol(Arguments.List(Types.ElementSymbol, { nonEmpty: true }), Types.RingFingerprint, 'Create ring fingerprint from the supplied atom element list.'),\n    secondaryStructureFlags: symbol(Arguments.List(Types.SecondaryStructureFlag), Types.SecondaryStructureFlags, `Create secondary structure flags representation from a list of strings. Allowed flags: ${Type.oneOfValues(Types.SecondaryStructureFlag).join(', ')}.`),\n    authResidueId: symbol(Arguments.Dictionary({\n        0: Argument(Type.Str, { description: 'auth_asym_id' }),\n        1: Argument(Type.Num, { description: 'auth_seq_id' }),\n        2: Argument(Type.Str, { description: 'pdbx_PDB_ins_code', isOptional: true })\n    }), Types.ResidueId, `Residue identifier based on \"auth_\" annotation.`),\n    labelResidueId: symbol(Arguments.Dictionary({\n        0: Argument(Type.Str, { description: 'label_entity_id' }),\n        1: Argument(Type.Str, { description: 'label_asym_id' }),\n        2: Argument(Type.Num, { description: 'label_seq_id' }),\n        3: Argument(Type.Str, { description: 'pdbx_PDB_ins_code', isOptional: true })\n    }), Types.ResidueId, `Residue identifier based on mmCIF's \"label_\" annotation.`)\n};\nconst slot = {\n    '@header': 'Iteration Slots',\n    element: symbol(Arguments.None, Types.ElementReference, 'A reference to the current element.'),\n    elementSetReduce: symbol(Arguments.None, Type.Variable('a', Type.AnyValue, true), 'Current value of the element set reducer.')\n};\nconst generator = {\n    '@header': 'Generators',\n    all: symbol(Arguments.None, Types.ElementSelectionQuery, 'The entire structure.'),\n    atomGroups: symbol(Arguments.Dictionary({\n        'entity-test': Argument(Type.Bool, { isOptional: true, defaultValue: true, description: 'Test for the 1st atom of every entity' }),\n        'chain-test': Argument(Type.Bool, { isOptional: true, defaultValue: true, description: 'Test for the 1st atom of every chain' }),\n        'residue-test': Argument(Type.Bool, { isOptional: true, defaultValue: true, description: 'Test for the 1st atom every residue' }),\n        'atom-test': Argument(Type.Bool, { isOptional: true, defaultValue: true }),\n        'group-by': Argument(Type.Any, { isOptional: true, defaultValue: `atom-key`, description: 'Group atoms to sets based on this property. Default: each atom has its own set' }),\n    }), Types.ElementSelectionQuery, 'Return all atoms for which the tests are satisfied, grouped into sets.'),\n    bondedAtomicPairs: symbol(Arguments.Dictionary({\n        0: Argument(Type.Bool, { isOptional: true, defaultValue: 'true for covalent bonds', description: 'Test each bond with this predicate. Each bond is visited twice with swapped atom order.' }),\n        // TODO: shoud we support this or just use queryEach to get similar behavior\n        // 'group-by': Argument(Type.Any, { isOptional: true, defaultValue: ``, description: 'Group the bonds using the privided value' }),\n    }), Types.ElementSelectionQuery, 'Return all pairs of atoms for which the test is satisfied.'),\n    rings: symbol(Arguments.Dictionary({\n        'fingerprint': Argument(Types.RingFingerprint, { isOptional: true }),\n        'only-aromatic': Argument(Type.Bool, { isOptional: true, defaultValue: false }),\n    }), Types.ElementSelectionQuery, 'Return all rings or those with the specified fingerprint and/or only aromatic rings.'),\n    queryInSelection: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        query: Argument(Types.ElementSelectionQuery),\n        'in-complement': Argument(Type.Bool, { isOptional: true, defaultValue: false })\n    }), Types.ElementSelectionQuery, 'Executes query only on atoms that are in the source selection.'),\n    empty: symbol(Arguments.None, Types.ElementSelectionQuery, 'Nada.'),\n};\nconst modifier = {\n    '@header': 'Selection Modifications',\n    queryEach: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        query: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, 'Query every atom set in the input selection separately.'),\n    intersectBy: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        by: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, 'Intersect each atom set from the first sequence from atoms in the second one.'),\n    exceptBy: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        by: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, `Remove all atoms from 'selection' that occur in 'by'.`),\n    unionBy: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        by: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, 'For each atom set A in the orginal sequence, combine all atoms sets in the target selection that intersect with A.'),\n    union: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, 'Collects all atom sets in the sequence into a single atom set.'),\n    cluster: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        'min-distance': Argument(Type.Num, { isOptional: true, defaultValue: 0 }),\n        'max-distance': Argument(Type.Num),\n        'min-size': Argument(Type.Num, { description: 'Minimal number of sets to merge, must be at least 2', isOptional: true, defaultValue: 2 }),\n        'max-size': Argument(Type.Num, { description: 'Maximal number of sets to merge, if not set, no limit', isOptional: true }),\n    }), Types.ElementSelectionQuery, 'Combines atom sets that have mutual distance in the interval [min-radius, max-radius]. Minimum/maximum size determines how many atom sets can be combined.'),\n    includeSurroundings: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        radius: Argument(Type.Num),\n        'atom-radius': Argument(Type.Num, { isOptional: true, defaultValue: 0, description: 'Value added to each atom before the distance check, for example VDW radius. Using this argument is computationally demanding.' }),\n        'as-whole-residues': Argument(Type.Bool, { isOptional: true })\n    }), Types.ElementSelectionQuery, 'For each atom set in the selection, include all surrouding atoms/residues that are within the specified radius.'),\n    surroundingLigands: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        radius: Argument(Type.Num),\n        'include-water': Argument(Type.Bool, { isOptional: true, defaultValue: true })\n    }), Types.ElementSelectionQuery, 'Find all ligands components around the source query.'),\n    includeConnected: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        'bond-test': Argument(Type.Bool, { isOptional: true, defaultValue: 'true for covalent bonds' }),\n        'layer-count': Argument(Type.Num, { isOptional: true, defaultValue: 1, description: 'Number of bonded layers to include.' }),\n        'fixed-point': Argument(Type.Bool, { isOptional: true, defaultValue: false, description: 'Continue adding layers as long as new connections exist.' }),\n        'as-whole-residues': Argument(Type.Bool, { isOptional: true })\n    }), Types.ElementSelectionQuery, 'Pick all atom sets that are connected to the target.'),\n    wholeResidues: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n    }), Types.ElementSelectionQuery, 'Expand the selection to whole residues.'),\n    expandProperty: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        property: Argument(Type.AnyValue)\n    }), Types.ElementSelectionQuery, 'To each atom set in the selection, add all atoms that have the same property value that was already present in the set.')\n};\nconst filter = {\n    '@header': 'Selection Filters',\n    pick: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        test: Argument(Type.Bool)\n    }), Types.ElementSelectionQuery, 'Pick all atom sets that satisfy the test.'),\n    first: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, 'Take the 1st atom set in the sequence.'),\n    withSameAtomProperties: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        source: Argument(Types.ElementSelectionQuery),\n        property: Argument(Type.Any)\n    }), Types.ElementSelectionQuery, 'Pick all atom sets for which the set of given atom properties is a subset of the source properties.'),\n    intersectedBy: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        by: Argument(Types.ElementSelectionQuery)\n    }), Types.ElementSelectionQuery, 'Pick all atom sets that have non-zero intersection with the target.'),\n    within: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        target: Argument(Types.ElementSelectionQuery),\n        'min-radius': Argument(Type.Num, { isOptional: true, defaultValue: 0 }),\n        'max-radius': Argument(Type.Num),\n        'atom-radius': Argument(Type.Num, { isOptional: true, defaultValue: 0, description: 'Value added to each atom before the distance check, for example VDW radius. Using this argument is computationally demanding.' }),\n        invert: Argument(Type.Bool, { isOptional: true, defaultValue: false, description: 'If true, pick only atom sets that are further than the specified radius.' }),\n    }), Types.ElementSelectionQuery, 'Pick all atom sets from selection that have any atom within the radius of any atom from target.'),\n    isConnectedTo: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery),\n        target: Argument(Types.ElementSelectionQuery),\n        'bond-test': Argument(Type.Bool, { isOptional: true, defaultValue: 'true for covalent bonds' }),\n        disjunct: Argument(Type.Bool, { isOptional: true, defaultValue: true, description: 'If true, there must exist a bond to an atom that lies outside the given atom set to pass test.' }),\n        invert: Argument(Type.Bool, { isOptional: true, defaultValue: false, description: 'If true, return atom sets that are not connected.' })\n    }), Types.ElementSelectionQuery, 'Pick all atom sets that are connected to the target.'),\n};\nconst combinator = {\n    '@header': 'Selection Combinators',\n    intersect: symbol(Arguments.List(Types.ElementSelectionQuery), Types.ElementSelectionQuery, 'Return all unique atom sets that appear in all of the source selections.'),\n    merge: symbol(Arguments.List(Types.ElementSelectionQuery), Types.ElementSelectionQuery, 'Merges multiple selections into a single one. Only unique atom sets are kept.'),\n    distanceCluster: symbol(Arguments.Dictionary({\n        matrix: Argument(Core.Types.List(Core.Types.List(Type.Num)), { description: 'Distance matrix, represented as list of rows (num[][])). Lower triangle is min distance, upper triangle is max distance.' }),\n        selections: Argument(Core.Types.List(Types.ElementSelectionQuery), { description: 'A list of held selections.' })\n    }), Types.ElementSelectionQuery, 'Pick combinations of atom sets from the source sequences that are mutually within distances specified by a matrix.')\n};\nconst atomSet = {\n    '@header': 'Atom Sets',\n    atomCount: symbol(Arguments.None, Type.Num),\n    countQuery: symbol(Arguments.Dictionary({\n        0: Argument(Types.ElementSelectionQuery)\n    }), Type.Num, 'Counts the number of occurences of a specific query inside the current atom set.'),\n    reduce: symbol(Arguments.Dictionary({\n        initial: Argument(Type.Variable('a', Type.AnyValue, true), { description: 'Initial value assigned to slot.atom-set-reduce. Current atom is set to the 1st atom of the current set for this.' }),\n        value: Argument(Type.Variable('a', Type.AnyValue, true), { description: 'Expression executed for each atom in the set' })\n    }), Type.Variable('a', Type.AnyValue, true), 'Execute the value expression for each atom in the current atom set and return the result. Works the same way as Array.reduce in JavaScript (``result = value(value(...value(initial)))``)'),\n    propertySet: symbol(Arguments.Dictionary({\n        0: Argument(Core.Types.ConstrainedVar),\n    }), Core.Types.Set(Core.Types.ConstrainedVar), 'Returns a set with all values of the given property in the current atom set.'),\n};\nconst atomProperty = {\n    '@header': 'Atom Properties',\n    core: {\n        '@header': 'Core Properties',\n        elementSymbol: atomProp(Types.ElementSymbol),\n        vdw: atomProp(Type.Num, 'Van der Waals radius'),\n        mass: atomProp(Type.Num, 'Atomic weight'),\n        atomicNumber: atomProp(Type.Num, 'Atomic number'),\n        x: atomProp(Type.Num, 'Cartesian X coordinate'),\n        y: atomProp(Type.Num, 'Cartesian Y coordinate'),\n        z: atomProp(Type.Num, 'Cartesian Z coordinate'),\n        atomKey: atomProp(Type.AnyValue, 'Unique value for each atom. Main use case is grouping of atoms.'),\n        bondCount: symbol(Arguments.Dictionary({\n            0: Argument(Types.ElementReference, { isOptional: true, defaultValue: 'slot.current-atom' }),\n            flags: Argument(Types.BondFlags, { isOptional: true, defaultValue: 'covalent' }),\n        }), Type.Num, 'Number of bonds (by default only covalent bonds are counted).'),\n        sourceIndex: atomProp(Type.Num, 'Index of the atom/element in the input file.'),\n        operatorName: atomProp(Type.Str, 'Name of the symmetry operator applied to this element.'),\n        instanceId: atomProp(Type.Str, 'Canonical name of the symmetry operator applied to this element.'),\n        operatorKey: atomProp(Type.Num, 'Key of the symmetry operator applied to this element.'),\n        modelIndex: atomProp(Type.Num, 'Index of the model in the input file.'),\n        modelLabel: atomProp(Type.Str, 'Label/header of the model in the input file.'),\n        modelEntryId: atomProp(Type.Str, 'Entry ID of the model (e.g., PDB ID).')\n    },\n    topology: {\n        connectedComponentKey: atomProp(Type.AnyValue, 'Unique value for each connected component.')\n    },\n    macromolecular: {\n        '@header': 'Macromolecular Properties (derived from the mmCIF format)',\n        authResidueId: atomProp(Types.ResidueId, `type.auth-residue-id symbol executed on current atom's residue`),\n        labelResidueId: atomProp(Types.ResidueId, `type.label-residue-id symbol executed on current atom's residue`),\n        residueKey: atomProp(Type.AnyValue, 'Unique value for each tuple ``(label_entity_id,auth_asym_id, auth_seq_id, pdbx_PDB_ins_code)``, main use case is grouping of atoms'),\n        chainKey: atomProp(Type.AnyValue, 'Unique value for each tuple ``(label_entity_id, auth_asym_id)``, main use case is grouping of atoms'),\n        entityKey: atomProp(Type.AnyValue, 'Unique value for each tuple ``label_entity_id``, main use case is grouping of atoms'),\n        isHet: atomProp(Type.Bool, 'Equivalent to atom_site.group_PDB !== ATOM'),\n        id: atomProp(Type.Num, '_atom_site.id'),\n        label_atom_id: atomProp(Types.AtomName),\n        label_alt_id: atomProp(Type.Str),\n        label_comp_id: atomProp(Type.Str),\n        label_asym_id: atomProp(Type.Str),\n        label_entity_id: atomProp(Type.Str),\n        label_seq_id: atomProp(Type.Num),\n        auth_atom_id: atomProp(Types.AtomName),\n        auth_comp_id: atomProp(Type.Str),\n        auth_asym_id: atomProp(Type.Str),\n        auth_seq_id: atomProp(Type.Num),\n        residueSourceIndex: atomProp(Type.Num),\n        pdbx_PDB_ins_code: atomProp(Type.Str),\n        pdbx_formal_charge: atomProp(Type.Num),\n        occupancy: atomProp(Type.Num),\n        B_iso_or_equiv: atomProp(Type.Num),\n        entityType: atomProp(Types.EntityType, 'Type of the entity as defined in mmCIF (polymer, non-polymer, branched, water)'),\n        entitySubtype: atomProp(Types.EntitySubtype, 'Subtype of the entity as defined in mmCIF _entity_poly.type and _pdbx_entity_branch.type (other, polypeptide(D), polypeptide(L), polydeoxyribonucleotide, polyribonucleotide, polydeoxyribonucleotide/polyribonucleotide hybrid, cyclic-pseudo-peptide, peptide nucleic acid, oligosaccharide)'),\n        entityPrdId: atomProp(Type.Str, `The PRD ID of the entity.`),\n        entityDescription: atomProp(Core.Types.List(Type.Str)),\n        objectPrimitive: atomProp(Types.ObjectPrimitive, 'Type of the primitive object used to model this segment as defined in mmCIF/IHM (atomistic, sphere, gaussian, other)'),\n        secondaryStructureKey: atomProp(Type.AnyValue, 'Unique value for each secondary structure element.'),\n        secondaryStructureFlags: atomProp(Types.SecondaryStructureFlags),\n        isModified: atomProp(Type.Bool, 'True if the atom belongs to modification of a standard residue.'),\n        modifiedParentName: atomProp(Type.Str, `'3-letter' code of the modifed parent residue.`),\n        isNonStandard: atomProp(Type.Bool, 'True if this is a non-standard residue.'),\n        chemCompType: atomProp(Type.Str, `Type of the chemical component as defined in mmCIF.`),\n    },\n    ihm: {\n        hasSeqId: symbol(Arguments.Dictionary({ 0: Argument(Type.Num) }), Type.Bool, 'Checks if the current element represents a given sequence id'),\n        overlapsSeqIdRange: symbol(Arguments.Dictionary({ beg: Argument(Type.Num), end: Argument(Type.Num) }), Type.Bool, 'Checks if the current element overlaps with the specified residue range'),\n    },\n};\nconst bondProperty = {\n    '@header': 'Bond Properties',\n    flags: bondProp(Types.BondFlags),\n    order: bondProp(Type.Num),\n    key: bondProp(Type.Num),\n    length: bondProp(Type.Num),\n    atomA: bondProp(Types.ElementReference),\n    atomB: bondProp(Types.ElementReference)\n};\nfunction atomProp(type, description) {\n    return symbol(Arguments.Dictionary({ 0: Argument(Types.ElementReference, { isOptional: true, defaultValue: 'slot.current-atom' }) }), type, description);\n}\nfunction bondProp(type, description) {\n    return symbol(Arguments.None, type, description);\n}\nexport const structureQuery = {\n    '@header': 'Structure Queries',\n    type,\n    slot,\n    generator,\n    modifier,\n    filter,\n    combinator,\n    atomSet,\n    atomProperty,\n    bondProperty\n};\n","/**\n * Copyright (c) 2019-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { ParamDefinition as PD } from '../../mol-util/param-definition.js';\nimport { ValueBox } from '../../mol-util/index.js';\nimport { CustomPropertyDescriptor } from '../../mol-model/custom-property.js';\nimport { stringToWords } from '../../mol-util/string.js';\nexport { CustomModelProperty };\nvar CustomModelProperty;\n(function (CustomModelProperty) {\n    function createProvider(builder) {\n        const descriptorName = builder.descriptor.name;\n        const propertyDataName = builder.type === 'static' ? '_staticPropertyData' : '_dynamicPropertyData';\n        const get = (data) => {\n            if (!(descriptorName in data[propertyDataName])) {\n                data[propertyDataName][descriptorName] = {\n                    props: { ...PD.getDefaultValues(builder.getParams(data)) },\n                    data: ValueBox.create(undefined)\n                };\n            }\n            return data[propertyDataName][descriptorName];\n        };\n        const set = (data, props, value) => {\n            const property = get(data);\n            data[propertyDataName][descriptorName] = {\n                props,\n                data: ValueBox.withValue(property.data, value)\n            };\n        };\n        return {\n            label: builder.label,\n            descriptor: builder.descriptor,\n            isHidden: builder.isHidden,\n            getParams: (data) => {\n                const params = PD.clone(builder.getParams(data));\n                PD.setDefaultValues(params, get(data).props);\n                return params;\n            },\n            defaultParams: builder.defaultParams,\n            isApplicable: builder.isApplicable,\n            attach: async (ctx, data, props = {}, addRef) => {\n                if (addRef)\n                    data.customProperties.reference(builder.descriptor, true);\n                const property = get(data);\n                const p = PD.merge(builder.defaultParams, property.props, props);\n                if (property.data.value && PD.areEqual(builder.defaultParams, property.props, p))\n                    return;\n                const { value, assets } = await builder.obtain(ctx, data, p);\n                data.customProperties.add(builder.descriptor);\n                data.customProperties.assets(builder.descriptor, assets);\n                set(data, p, value);\n            },\n            ref: (data, add) => data.customProperties.reference(builder.descriptor, add),\n            get: (data) => { var _a; return (_a = get(data)) === null || _a === void 0 ? void 0 : _a.data; },\n            set: (data, props = {}, value) => {\n                const property = get(data);\n                const p = PD.merge(builder.defaultParams, property.props, props);\n                if (!PD.areEqual(builder.defaultParams, property.props, p)) {\n                    // this invalidates property.value\n                    set(data, p, value);\n                    // dispose of assets\n                    data.customProperties.assets(builder.descriptor);\n                }\n            },\n            props: (data) => get(data).props,\n        };\n    }\n    CustomModelProperty.createProvider = createProvider;\n    function createSimple(name, type, defaultValue) {\n        const defaultParams = { value: PD.Value(defaultValue, { isHidden: true }) };\n        return createProvider({\n            label: stringToWords(name),\n            descriptor: CustomPropertyDescriptor({ name }),\n            isHidden: true,\n            type,\n            defaultParams,\n            getParams: () => ({ value: PD.Value(defaultValue, { isHidden: true }) }),\n            isApplicable: () => true,\n            obtain: async (ctx, data, props) => {\n                return { ...PD.getDefaultValues(defaultParams), ...props };\n            }\n        });\n    }\n    CustomModelProperty.createSimple = createSimple;\n})(CustomModelProperty || (CustomModelProperty = {}));\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Matrix } from './matrix.js';\n// svd method adapted from http://inspirit.github.io/jsfeat/ MIT Eugene Zatepyakin\nexport function swap(A, i0, i1, t) {\n    t = A[i0];\n    A[i0] = A[i1];\n    A[i1] = t;\n}\nexport function hypot(a, b) {\n    a = Math.abs(a);\n    b = Math.abs(b);\n    if (a > b) {\n        b /= a;\n        return a * Math.sqrt(1.0 + b * b);\n    }\n    if (b > 0) {\n        a /= b;\n        return b * Math.sqrt(1.0 + a * a);\n    }\n    return 0.0;\n}\nconst EPSILON = 0.0000001192092896;\nconst FLT_MIN = 1E-37;\nexport function JacobiSVDImpl(At, astep, _W, Vt, vstep, m, n, n1) {\n    const eps = EPSILON * 2.0;\n    const minval = FLT_MIN;\n    let i = 0;\n    let j = 0;\n    let k = 0;\n    let iter = 0;\n    const maxIter = Math.max(m, 30);\n    let Ai = 0;\n    let Aj = 0;\n    let Vi = 0;\n    let Vj = 0;\n    let changed = 0;\n    let c = 0.0;\n    let s = 0.0;\n    let t = 0.0;\n    let t0 = 0.0;\n    let t1 = 0.0;\n    let sd = 0.0;\n    let beta = 0.0;\n    let gamma = 0.0;\n    let delta = 0.0;\n    let a = 0.0;\n    let p = 0.0;\n    let b = 0.0;\n    let seed = 0x1234;\n    let val = 0.0;\n    let val0 = 0.0;\n    let asum = 0.0;\n    const W = new Float64Array(n << 3);\n    for (; i < n; i++) {\n        for (k = 0, sd = 0; k < m; k++) {\n            t = At[i * astep + k];\n            sd += t * t;\n        }\n        W[i] = sd;\n        if (Vt) {\n            for (k = 0; k < n; k++) {\n                Vt[i * vstep + k] = 0;\n            }\n            Vt[i * vstep + i] = 1;\n        }\n    }\n    for (; iter < maxIter; iter++) {\n        changed = 0;\n        for (i = 0; i < n - 1; i++) {\n            for (j = i + 1; j < n; j++) {\n                Ai = (i * astep) | 0;\n                Aj = (j * astep) | 0;\n                a = W[i];\n                p = 0;\n                b = W[j];\n                k = 2;\n                p += At[Ai] * At[Aj];\n                p += At[Ai + 1] * At[Aj + 1];\n                for (; k < m; k++) {\n                    p += At[Ai + k] * At[Aj + k];\n                }\n                if (Math.abs(p) <= eps * Math.sqrt(a * b))\n                    continue;\n                p *= 2.0;\n                beta = a - b;\n                gamma = hypot(p, beta);\n                if (beta < 0) {\n                    delta = (gamma - beta) * 0.5;\n                    s = Math.sqrt(delta / gamma);\n                    c = (p / (gamma * s * 2.0));\n                }\n                else {\n                    c = Math.sqrt((gamma + beta) / (gamma * 2.0));\n                    s = (p / (gamma * c * 2.0));\n                }\n                a = 0.0;\n                b = 0.0;\n                k = 2; // unroll\n                t0 = c * At[Ai] + s * At[Aj];\n                t1 = -s * At[Ai] + c * At[Aj];\n                At[Ai] = t0;\n                At[Aj] = t1;\n                a += t0 * t0;\n                b += t1 * t1;\n                t0 = c * At[Ai + 1] + s * At[Aj + 1];\n                t1 = -s * At[Ai + 1] + c * At[Aj + 1];\n                At[Ai + 1] = t0;\n                At[Aj + 1] = t1;\n                a += t0 * t0;\n                b += t1 * t1;\n                for (; k < m; k++) {\n                    t0 = c * At[Ai + k] + s * At[Aj + k];\n                    t1 = -s * At[Ai + k] + c * At[Aj + k];\n                    At[Ai + k] = t0;\n                    At[Aj + k] = t1;\n                    a += t0 * t0;\n                    b += t1 * t1;\n                }\n                W[i] = a;\n                W[j] = b;\n                changed = 1;\n                if (Vt) {\n                    Vi = (i * vstep) | 0;\n                    Vj = (j * vstep) | 0;\n                    k = 2;\n                    t0 = c * Vt[Vi] + s * Vt[Vj];\n                    t1 = -s * Vt[Vi] + c * Vt[Vj];\n                    Vt[Vi] = t0;\n                    Vt[Vj] = t1;\n                    t0 = c * Vt[Vi + 1] + s * Vt[Vj + 1];\n                    t1 = -s * Vt[Vi + 1] + c * Vt[Vj + 1];\n                    Vt[Vi + 1] = t0;\n                    Vt[Vj + 1] = t1;\n                    for (; k < n; k++) {\n                        t0 = c * Vt[Vi + k] + s * Vt[Vj + k];\n                        t1 = -s * Vt[Vi + k] + c * Vt[Vj + k];\n                        Vt[Vi + k] = t0;\n                        Vt[Vj + k] = t1;\n                    }\n                }\n            }\n        }\n        if (changed === 0)\n            break;\n    }\n    for (i = 0; i < n; i++) {\n        for (k = 0, sd = 0; k < m; k++) {\n            t = At[i * astep + k];\n            sd += t * t;\n        }\n        W[i] = Math.sqrt(sd);\n    }\n    for (i = 0; i < n - 1; i++) {\n        j = i;\n        for (k = i + 1; k < n; k++) {\n            if (W[j] < W[k]) {\n                j = k;\n            }\n        }\n        if (i !== j) {\n            swap(W, i, j, sd);\n            if (Vt) {\n                for (k = 0; k < m; k++) {\n                    swap(At, i * astep + k, j * astep + k, t);\n                }\n                for (k = 0; k < n; k++) {\n                    swap(Vt, i * vstep + k, j * vstep + k, t);\n                }\n            }\n        }\n    }\n    for (i = 0; i < n; i++) {\n        _W[i] = W[i];\n    }\n    if (!Vt) {\n        return;\n    }\n    for (i = 0; i < n1; i++) {\n        sd = i < n ? W[i] : 0;\n        while (sd <= minval) {\n            // if we got a zero singular value, then in order to get the corresponding left singular vector\n            // we generate a random vector, project it to the previously computed left singular vectors,\n            // subtract the projection and normalize the difference.\n            val0 = (1.0 / m);\n            for (k = 0; k < m; k++) {\n                seed = (seed * 214013 + 2531011);\n                val = (((seed >> 16) & 0x7fff) & 256) !== 0 ? val0 : -val0;\n                At[i * astep + k] = val;\n            }\n            for (iter = 0; iter < 2; iter++) {\n                for (j = 0; j < i; j++) {\n                    sd = 0;\n                    for (k = 0; k < m; k++) {\n                        sd += At[i * astep + k] * At[j * astep + k];\n                    }\n                    asum = 0.0;\n                    for (k = 0; k < m; k++) {\n                        t = (At[i * astep + k] - sd * At[j * astep + k]);\n                        At[i * astep + k] = t;\n                        asum += Math.abs(t);\n                    }\n                    asum = asum ? 1.0 / asum : 0;\n                    for (k = 0; k < m; k++) {\n                        At[i * astep + k] *= asum;\n                    }\n                }\n            }\n            sd = 0;\n            for (k = 0; k < m; k++) {\n                t = At[i * astep + k];\n                sd += t * t;\n            }\n            sd = Math.sqrt(sd);\n        }\n        s = (1.0 / sd);\n        for (k = 0; k < m; k++) {\n            At[i * astep + k] *= s;\n        }\n    }\n}\nexport function svd(A, W, U, V) {\n    let at = 0;\n    let i = 0;\n    const _m = A.rows;\n    const _n = A.cols;\n    let m = _m;\n    let n = _n;\n    if (m < n) {\n        at = 1;\n        i = m;\n        m = n;\n        n = i;\n    }\n    const amt = Matrix.create(m, m);\n    const wmt = Matrix.create(1, n);\n    const vmt = Matrix.create(n, n);\n    if (at === 0) {\n        Matrix.transpose(amt, A);\n    }\n    else {\n        for (i = 0; i < _n * _m; i++) {\n            amt.data[i] = A.data[i];\n        }\n        for (; i < n * m; i++) {\n            amt.data[i] = 0;\n        }\n    }\n    JacobiSVDImpl(amt.data, m, wmt.data, vmt.data, n, m, n, m);\n    if (W) {\n        for (i = 0; i < n; i++) {\n            W.data[i] = wmt.data[i];\n        }\n        for (; i < _n; i++) {\n            W.data[i] = 0;\n        }\n    }\n    if (at === 0) {\n        if (U)\n            Matrix.transpose(U, amt);\n        if (V)\n            Matrix.transpose(V, vmt);\n    }\n    else {\n        if (U)\n            Matrix.transpose(U, vmt);\n        if (V)\n            Matrix.transpose(V, amt);\n    }\n}\n","/**\n * Copyright (c) 2018-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Gianluca Tomasello <giagitom@gmail.com>\n */\nimport { Matrix } from './matrix.js';\nimport { Vec3 } from '../3d/vec3.js';\nimport { svd } from './svd.js';\nimport { Axes3D } from '../../geometry/primitives/axes3d.js';\nimport { EPSILON } from '../3d/common.js';\nexport { PrincipalAxes };\nvar PrincipalAxes;\n(function (PrincipalAxes) {\n    function ofPositions(positions) {\n        const momentsAxes = calculateMomentsAxes(positions);\n        const boxAxes = calculateBoxAxes(positions, momentsAxes);\n        return { momentsAxes, boxAxes };\n    }\n    PrincipalAxes.ofPositions = ofPositions;\n    function calculateMomentsAxes(positions) {\n        if (positions.length === 3) {\n            return Axes3D.create(Vec3.fromArray(Vec3(), positions, 0), Vec3.create(1, 0, 0), Vec3.create(0, 1, 0), Vec3.create(0, 0, 1));\n        }\n        const points = Matrix.fromArray(positions, 3, positions.length / 3);\n        const n = points.rows;\n        const n3 = n / 3;\n        const A = Matrix.create(3, 3);\n        const W = Matrix.create(1, 3);\n        const U = Matrix.create(3, 3);\n        const V = Matrix.create(3, 3);\n        // calculate\n        const mean = Matrix.meanRows(points);\n        const pointsM = Matrix.subRows(Matrix.clone(points), mean);\n        const pointsT = Matrix.transpose(Matrix.create(n, 3), pointsM);\n        Matrix.multiplyABt(A, pointsT, pointsT);\n        svd(A, W, U, V);\n        // origin\n        const origin = Vec3.create(mean[0], mean[1], mean[2]);\n        // directions\n        const dirA = Vec3.create(U.data[0], U.data[3], U.data[6]);\n        const dirB = Vec3.create(U.data[1], U.data[4], U.data[7]);\n        const dirC = Vec3.create(U.data[2], U.data[5], U.data[8]);\n        Vec3.scale(dirA, dirA, Math.sqrt(W.data[0] / n3));\n        Vec3.scale(dirB, dirB, Math.sqrt(W.data[1] / n3));\n        Vec3.scale(dirC, dirC, Math.sqrt(W.data[2] / n3));\n        return Axes3D.create(origin, dirA, dirB, dirC);\n    }\n    PrincipalAxes.calculateMomentsAxes = calculateMomentsAxes;\n    function calculateNormalizedAxes(momentsAxes) {\n        const a = Axes3D.clone(momentsAxes);\n        if (Vec3.magnitude(a.dirC) < EPSILON) {\n            Vec3.cross(a.dirC, a.dirA, a.dirB);\n        }\n        return Axes3D.normalize(a, a);\n    }\n    PrincipalAxes.calculateNormalizedAxes = calculateNormalizedAxes;\n    const tmpBoxVec = Vec3();\n    /**\n     * Get the scale/length for each dimension for a box around the axes\n     * to enclose the given positions\n     */\n    function calculateBoxAxes(positions, momentsAxes) {\n        if (positions.length === 3) {\n            return Axes3D.clone(momentsAxes);\n        }\n        let d1a = -Infinity;\n        let d1b = -Infinity;\n        let d2a = -Infinity;\n        let d2b = -Infinity;\n        let d3a = -Infinity;\n        let d3b = -Infinity;\n        const p = Vec3();\n        const t = Vec3();\n        const center = momentsAxes.origin;\n        const a = calculateNormalizedAxes(momentsAxes);\n        for (let i = 0, il = positions.length; i < il; i += 3) {\n            Vec3.projectPointOnVector(p, Vec3.fromArray(p, positions, i), a.dirA, center);\n            const dp1 = Vec3.dot(a.dirA, Vec3.normalize(t, Vec3.sub(t, p, center)));\n            const dt1 = Vec3.distance(p, center);\n            if (dp1 > 0) {\n                if (dt1 > d1a)\n                    d1a = dt1;\n            }\n            else {\n                if (dt1 > d1b)\n                    d1b = dt1;\n            }\n            Vec3.projectPointOnVector(p, Vec3.fromArray(p, positions, i), a.dirB, center);\n            const dp2 = Vec3.dot(a.dirB, Vec3.normalize(t, Vec3.sub(t, p, center)));\n            const dt2 = Vec3.distance(p, center);\n            if (dp2 > 0) {\n                if (dt2 > d2a)\n                    d2a = dt2;\n            }\n            else {\n                if (dt2 > d2b)\n                    d2b = dt2;\n            }\n            Vec3.projectPointOnVector(p, Vec3.fromArray(p, positions, i), a.dirC, center);\n            const dp3 = Vec3.dot(a.dirC, Vec3.normalize(t, Vec3.sub(t, p, center)));\n            const dt3 = Vec3.distance(p, center);\n            if (dp3 > 0) {\n                if (dt3 > d3a)\n                    d3a = dt3;\n            }\n            else {\n                if (dt3 > d3b)\n                    d3b = dt3;\n            }\n        }\n        const dirA = Vec3.setMagnitude(Vec3(), a.dirA, (d1a + d1b) / 2);\n        const dirB = Vec3.setMagnitude(Vec3(), a.dirB, (d2a + d2b) / 2);\n        const dirC = Vec3.setMagnitude(Vec3(), a.dirC, (d3a + d3b) / 2);\n        const okDirA = Vec3.isFinite(dirA);\n        const okDirB = Vec3.isFinite(dirB);\n        const okDirC = Vec3.isFinite(dirC);\n        const origin = Vec3();\n        const addCornerHelper = function (d1, d2, d3) {\n            Vec3.copy(tmpBoxVec, center);\n            if (okDirA)\n                Vec3.scaleAndAdd(tmpBoxVec, tmpBoxVec, a.dirA, d1);\n            if (okDirB)\n                Vec3.scaleAndAdd(tmpBoxVec, tmpBoxVec, a.dirB, d2);\n            if (okDirC)\n                Vec3.scaleAndAdd(tmpBoxVec, tmpBoxVec, a.dirC, d3);\n            Vec3.add(origin, origin, tmpBoxVec);\n        };\n        addCornerHelper(d1a, d2a, d3a);\n        addCornerHelper(d1a, d2a, -d3b);\n        addCornerHelper(d1a, -d2b, -d3b);\n        addCornerHelper(d1a, -d2b, d3a);\n        addCornerHelper(-d1b, -d2b, -d3b);\n        addCornerHelper(-d1b, -d2b, d3a);\n        addCornerHelper(-d1b, d2a, d3a);\n        addCornerHelper(-d1b, d2a, -d3b);\n        Vec3.scale(origin, origin, 1 / 8);\n        return Axes3D.create(origin, dirA, dirB, dirC);\n    }\n    PrincipalAxes.calculateBoxAxes = calculateBoxAxes;\n})(PrincipalAxes || (PrincipalAxes = {}));\n","/**\n * Copyright (c) 2018-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nexport const halfPI = Math.PI / 2;\nexport const PiDiv180 = Math.PI / 180;\nexport function degToRad(deg) {\n    return deg * PiDiv180; // deg * Math.PI / 180\n}\nexport function radToDeg(rad) {\n    return rad / PiDiv180; // rad * 180 / Math.PI\n}\nexport function isPowerOfTwo(x) {\n    return (x !== 0) && (x & (x - 1)) === 0;\n}\n/** return the value that has the largest absolute value */\nexport function absMax(...values) {\n    let max = 0;\n    let absMax = 0;\n    for (let i = 0, il = values.length; i < il; ++i) {\n        const value = values[i];\n        const abs = Math.abs(value);\n        if (abs > absMax) {\n            max = value;\n            absMax = abs;\n        }\n    }\n    return max;\n}\n/** Length of an arc with angle in radians */\nexport function arcLength(angle, radius) {\n    return angle * radius;\n}\n/** Create an outward spiral of given `radius` on a 2d grid */\nexport function spiral2d(radius) {\n    let x = 0;\n    let y = 0;\n    let deltaX = 0;\n    let deltaY = -1;\n    const size = radius * 2 + 1;\n    const halfSize = size / 2;\n    const out = [];\n    for (let i = Math.pow(size, 2); i > 0; --i) {\n        if ((-halfSize < x && x <= halfSize) && (-halfSize < y && y <= halfSize)) {\n            out.push([x, y]);\n        }\n        if (x === y || (x < 0 && x === -y) || (x > 0 && x === 1 - y)) {\n            // change direction\n            const prevDeltaX = deltaX;\n            const prevDeltaY = deltaY;\n            deltaX = -prevDeltaY;\n            deltaY = prevDeltaX;\n        }\n        x += deltaX;\n        y += deltaY;\n    }\n    return out;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * From CIFTools.js\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport const VERSION = '0.3.0';\nexport var Encoding;\n(function (Encoding) {\n    let IntDataType;\n    (function (IntDataType) {\n        IntDataType[IntDataType[\"Int8\"] = 1] = \"Int8\";\n        IntDataType[IntDataType[\"Int16\"] = 2] = \"Int16\";\n        IntDataType[IntDataType[\"Int32\"] = 3] = \"Int32\";\n        IntDataType[IntDataType[\"Uint8\"] = 4] = \"Uint8\";\n        IntDataType[IntDataType[\"Uint16\"] = 5] = \"Uint16\";\n        IntDataType[IntDataType[\"Uint32\"] = 6] = \"Uint32\";\n    })(IntDataType = Encoding.IntDataType || (Encoding.IntDataType = {}));\n    let FloatDataType;\n    (function (FloatDataType) {\n        FloatDataType[FloatDataType[\"Float32\"] = 32] = \"Float32\";\n        FloatDataType[FloatDataType[\"Float64\"] = 33] = \"Float64\";\n    })(FloatDataType = Encoding.FloatDataType || (Encoding.FloatDataType = {}));\n    function getDataType(data) {\n        let srcType;\n        if (data instanceof Int8Array)\n            srcType = Encoding.IntDataType.Int8;\n        else if (data instanceof Int16Array)\n            srcType = Encoding.IntDataType.Int16;\n        else if (data instanceof Int32Array)\n            srcType = Encoding.IntDataType.Int32;\n        else if (data instanceof Uint8Array)\n            srcType = Encoding.IntDataType.Uint8;\n        else if (data instanceof Uint16Array)\n            srcType = Encoding.IntDataType.Uint16;\n        else if (data instanceof Uint32Array)\n            srcType = Encoding.IntDataType.Uint32;\n        else if (data instanceof Float32Array)\n            srcType = Encoding.FloatDataType.Float32;\n        else if (data instanceof Float64Array)\n            srcType = Encoding.FloatDataType.Float64;\n        else\n            srcType = Encoding.IntDataType.Int32; // throw new Error('Unsupported integer data type.');\n        return srcType;\n    }\n    Encoding.getDataType = getDataType;\n    function isSignedIntegerDataType(data) {\n        if (data instanceof Int8Array || data instanceof Int16Array || data instanceof Int32Array)\n            return true;\n        for (let i = 0, _i = data.length; i < _i; i++) {\n            if (i < 0)\n                return false;\n        }\n        return true;\n    }\n    Encoding.isSignedIntegerDataType = isSignedIntegerDataType;\n})(Encoding || (Encoding = {}));\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { UniqueArray } from '../../mol-data/generic.js';\nimport { cantorPairing } from '../../mol-data/util.js';\nexport { InterUnitGraph };\nclass InterUnitGraph {\n    /** Get an array of unit-pair-edges that are connected to the given unit */\n    getConnectedUnits(unit) {\n        if (!this.map.has(unit))\n            return emptyArray;\n        return this.map.get(unit);\n    }\n    /** Index into this.edges */\n    getEdgeIndex(indexA, unitA, indexB, unitB) {\n        const indices = this.edgeKeyIndex.get(InterUnitGraph.getEdgeUnitKey(unitA, unitB));\n        if (indices === undefined)\n            return -1;\n        const index = indices.get(InterUnitGraph.getEdgeIndexKey(indexA, indexB));\n        return index !== undefined ? index : -1;\n    }\n    /** Check if edge exists */\n    hasEdge(indexA, unitA, indexB, unitB) {\n        return this.getEdgeIndex(indexA, unitA, indexB, unitB) !== -1;\n    }\n    /** Get inter-unit edge given a pair of indices and units */\n    getEdge(indexA, unitA, indexB, unitB) {\n        const index = this.getEdgeIndex(indexA, unitA, indexB, unitB);\n        return index !== -1 ? this.edges[index] : undefined;\n    }\n    /** Indices into this.edges */\n    getEdgeIndices(index, unit) {\n        return this.vertexKeyIndex.get(InterUnitGraph.getVertexKey(index, unit)) || [];\n    }\n    constructor(map) {\n        this.map = map;\n        let count = 0;\n        const edges = [];\n        const edgeKeyIndex = new Map();\n        const vertexKeyIndex = new Map();\n        this.map.forEach(pairEdgesArray => {\n            pairEdgesArray.forEach(pairEdges => {\n                count += pairEdges.edgeCount;\n                pairEdges.connectedIndices.forEach(indexA => {\n                    pairEdges.getEdges(indexA).forEach(edgeInfo => {\n                        const { unitA, unitB } = pairEdges;\n                        const edgeUnitKey = InterUnitGraph.getEdgeIndexKey(unitA, unitB);\n                        const edgeIndexKey = InterUnitGraph.getEdgeIndexKey(indexA, edgeInfo.indexB);\n                        const e = edgeKeyIndex.get(edgeUnitKey);\n                        if (e === undefined)\n                            edgeKeyIndex.set(edgeUnitKey, new Map([[edgeIndexKey, edges.length]]));\n                        else\n                            e.set(edgeIndexKey, edges.length);\n                        const vertexKey = InterUnitGraph.getVertexKey(indexA, unitA);\n                        const v = vertexKeyIndex.get(vertexKey);\n                        if (v === undefined)\n                            vertexKeyIndex.set(vertexKey, [edges.length]);\n                        else\n                            v.push(edges.length);\n                        edges.push({ ...edgeInfo, indexA, unitA, unitB });\n                    });\n                });\n            });\n        });\n        this.edgeCount = count;\n        this.edges = edges;\n        this.edgeKeyIndex = edgeKeyIndex;\n        this.vertexKeyIndex = vertexKeyIndex;\n    }\n}\n(function (InterUnitGraph) {\n    class UnitPairEdges {\n        hasEdges(indexA) {\n            return this.edgeMap.has(indexA);\n        }\n        getEdges(indexA) {\n            if (!this.edgeMap.has(indexA))\n                return emptyArray;\n            return this.edgeMap.get(indexA);\n        }\n        get areUnitsOrdered() {\n            return this.unitA < this.unitB;\n        }\n        constructor(unitA, unitB, edgeCount, connectedIndices, edgeMap) {\n            this.unitA = unitA;\n            this.unitB = unitB;\n            this.edgeCount = edgeCount;\n            this.connectedIndices = connectedIndices;\n            this.edgeMap = edgeMap;\n        }\n    }\n    InterUnitGraph.UnitPairEdges = UnitPairEdges;\n    function getEdgeUnitKey(unitA, unitB) {\n        return cantorPairing(unitA, unitB);\n    }\n    InterUnitGraph.getEdgeUnitKey = getEdgeUnitKey;\n    function getEdgeIndexKey(indexA, indexB) {\n        return cantorPairing(indexA, indexB);\n    }\n    InterUnitGraph.getEdgeIndexKey = getEdgeIndexKey;\n    function getVertexKey(index, unit) {\n        return cantorPairing(index, unit);\n    }\n    InterUnitGraph.getVertexKey = getVertexKey;\n    //\n    function addMapEntry(map, a, b) {\n        if (map.has(a))\n            map.get(a).push(b);\n        else\n            map.set(a, [b]);\n    }\n    class Builder {\n        constructor() {\n            this.map = new Map();\n        }\n        startUnitPair(unitA, unitB) {\n            this.uA = unitA;\n            this.uB = unitB;\n            this.mapAB = new Map();\n            this.mapBA = new Map();\n            this.linkedA = UniqueArray.create();\n            this.linkedB = UniqueArray.create();\n            this.linkCount = 0;\n        }\n        finishUnitPair() {\n            if (this.linkCount === 0)\n                return;\n            addMapEntry(this.map, this.uA, new UnitPairEdges(this.uA, this.uB, this.linkCount, this.linkedA.array, this.mapAB));\n            addMapEntry(this.map, this.uB, new UnitPairEdges(this.uB, this.uA, this.linkCount, this.linkedB.array, this.mapBA));\n        }\n        add(indexA, indexB, props) {\n            addMapEntry(this.mapAB, indexA, { indexB, props });\n            addMapEntry(this.mapBA, indexB, { indexB: indexA, props });\n            UniqueArray.add(this.linkedA, indexA, indexA);\n            UniqueArray.add(this.linkedB, indexB, indexB);\n            this.linkCount += 1;\n        }\n        getMap() {\n            return this.map;\n        }\n    }\n    InterUnitGraph.Builder = Builder;\n})(InterUnitGraph || (InterUnitGraph = {}));\nconst emptyArray = [];\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { MmcifFormat } from '../../../../mol-model-formats/structure/mmcif.js';\nimport { SIFTSMapping } from '../../../../mol-model-props/sequence/sifts-mapping.js';\nimport { StructureProperties as P } from '../../structure.js';\nvar CifField = CifWriter.Field;\nvar E = CifWriter.Encodings;\nfunction atom_site_label_asym_id(e) {\n    const l = P.chain.label_asym_id(e);\n    const suffix = e.unit.conformation.operator.suffix;\n    if (!suffix)\n        return l;\n    return l + suffix;\n}\nfunction atom_site_auth_asym_id(e) {\n    const l = P.chain.auth_asym_id(e);\n    const suffix = e.unit.conformation.operator.suffix;\n    if (!suffix)\n        return l;\n    return l + suffix;\n}\nconst atom_site_pdbx_label_index = {\n    shouldInclude(s) {\n        var _a;\n        return !!((_a = s.atom_site) === null || _a === void 0 ? void 0 : _a.pdbx_label_index.isDefined);\n    },\n    value(e, d) {\n        const srcIndex = d.sourceIndex.value(e.element);\n        return d.atom_site.pdbx_label_index.value(srcIndex);\n    },\n};\nconst SIFTS = {\n    shouldInclude(s) {\n        return SIFTSMapping.isAvailable(s.structure.models[0]);\n    },\n    pdbx_sifts_xref_db_name: {\n        value(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_name.value(srcIndex);\n        },\n        valueKind(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_name.valueKind(srcIndex);\n        },\n    },\n    pdbx_sifts_xref_db_acc: {\n        value(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_acc.value(srcIndex);\n        },\n        valueKind(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_acc.valueKind(srcIndex);\n        },\n    },\n    pdbx_sifts_xref_db_num: {\n        value(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_num.value(srcIndex);\n        },\n        valueKind(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_num.valueKind(srcIndex);\n        },\n    },\n    pdbx_sifts_xref_db_res: {\n        value(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_res.value(srcIndex);\n        },\n        valueKind(e, d) {\n            const srcIndex = d.sourceIndex.value(e.element);\n            return d.atom_site.pdbx_sifts_xref_db_res.valueKind(srcIndex);\n        },\n    }\n};\nconst atom_site_fields = (keepId) => {\n    const fields = CifWriter.fields();\n    fields.str('group_PDB', P.residue.group_PDB);\n    if (keepId) {\n        fields.int('id', P.atom.id);\n    }\n    else {\n        fields.index('id');\n    }\n    fields\n        .str('type_symbol', P.atom.type_symbol)\n        .str('label_atom_id', P.atom.label_atom_id)\n        .str('label_comp_id', P.atom.label_comp_id)\n        .int('label_seq_id', P.residue.label_seq_id, {\n        encoder: E.deltaRLE,\n        valueKind: (k, d) => {\n            const m = k.unit.model;\n            return m.atomicHierarchy.residues.label_seq_id.valueKind(m.atomicHierarchy.residueAtomSegments.index[k.element]);\n        }\n    })\n        .str('label_alt_id', P.atom.label_alt_id)\n        .str('pdbx_PDB_ins_code', P.residue.pdbx_PDB_ins_code)\n        .str('label_asym_id', atom_site_label_asym_id)\n        .str('label_entity_id', P.chain.label_entity_id)\n        .float('Cartn_x', P.atom.x, { digitCount: 3, encoder: E.fixedPoint3 })\n        .float('Cartn_y', P.atom.y, { digitCount: 3, encoder: E.fixedPoint3 })\n        .float('Cartn_z', P.atom.z, { digitCount: 3, encoder: E.fixedPoint3 })\n        .float('occupancy', P.atom.occupancy, { digitCount: 2, encoder: E.fixedPoint2 })\n        .float('B_iso_or_equiv', P.atom.B_iso_or_equiv, { digitCount: 2, encoder: E.fixedPoint2 })\n        .int('pdbx_formal_charge', P.atom.pdbx_formal_charge, {\n        encoder: E.deltaRLE,\n        valueKind: (k, d) => k.unit.model.atomicHierarchy.atoms.pdbx_formal_charge.valueKind(k.element)\n    })\n        .str('auth_atom_id', P.atom.auth_atom_id)\n        .str('auth_comp_id', P.atom.auth_comp_id)\n        .int('auth_seq_id', P.residue.auth_seq_id, { encoder: E.deltaRLE })\n        .str('auth_asym_id', atom_site_auth_asym_id)\n        .int('pdbx_PDB_model_num', P.unit.model_num, { encoder: E.deltaRLE })\n        .int('pdbx_label_index', atom_site_pdbx_label_index.value, { shouldInclude: atom_site_pdbx_label_index.shouldInclude })\n        // SIFTS\n        .str('pdbx_sifts_xref_db_name', SIFTS.pdbx_sifts_xref_db_name.value, { shouldInclude: SIFTS.shouldInclude, valueKind: SIFTS.pdbx_sifts_xref_db_name.valueKind })\n        .str('pdbx_sifts_xref_db_acc', SIFTS.pdbx_sifts_xref_db_acc.value, { shouldInclude: SIFTS.shouldInclude, valueKind: SIFTS.pdbx_sifts_xref_db_acc.valueKind })\n        .str('pdbx_sifts_xref_db_num', SIFTS.pdbx_sifts_xref_db_num.value, { shouldInclude: SIFTS.shouldInclude, valueKind: SIFTS.pdbx_sifts_xref_db_num.valueKind })\n        .str('pdbx_sifts_xref_db_res', SIFTS.pdbx_sifts_xref_db_res.value, { shouldInclude: SIFTS.shouldInclude, valueKind: SIFTS.pdbx_sifts_xref_db_res.valueKind });\n    // .str('operator_name', P.unit.operator_name, {\n    //     shouldInclude: structure => structure.units.some(u => !u.conformation.operator.isIdentity)\n    // })\n    return fields.getFields();\n};\nexport const _atom_site = (options) => ({\n    name: 'atom_site',\n    instance({ structures }) {\n        return {\n            fields: atom_site_fields(options === null || options === void 0 ? void 0 : options.keepId),\n            source: structures.map(s => ({\n                data: {\n                    structure: s,\n                    sourceIndex: s.model.atomicHierarchy.atomSourceIndex,\n                    atom_site: MmcifFormat.is(s.model.sourceData) ? s.model.sourceData.data.db.atom_site : void 0\n                },\n                rowCount: s.elementCount,\n                keys: () => s.elementLocations()\n            }))\n        };\n    }\n});\nfunction prepostfixed(prefix, name) {\n    if (prefix)\n        return `${prefix}_${name}`;\n    return name;\n}\nfunction prefixedInsCode(prefix) {\n    if (!prefix)\n        return 'pdbx_PDB_ins_code';\n    return `pdbx_${prefix}_PDB_ins_code`;\n}\nfunction mappedProp(loc, prop) {\n    return (k, d) => prop(loc(k, d));\n}\nfunction addModelNum(fields, getLocation, options) {\n    if (options && options.includeModelNum) {\n        fields.int('pdbx_PDB_model_num', mappedProp(getLocation, P.unit.model_num));\n    }\n}\nexport function residueIdFields(getLocation, options) {\n    const prefix = options && options.prefix;\n    const ret = CifWriter.fields()\n        .str(prepostfixed(prefix, `label_comp_id`), mappedProp(getLocation, P.atom.label_comp_id))\n        .int(prepostfixed(prefix, `label_seq_id`), mappedProp(getLocation, P.residue.label_seq_id), {\n        encoder: E.deltaRLE,\n        valueKind: (k, d) => {\n            const e = getLocation(k, d);\n            const m = e.unit.model;\n            return m.atomicHierarchy.residues.label_seq_id.valueKind(m.atomicHierarchy.residueAtomSegments.index[e.element]);\n        }\n    })\n        .str(prefixedInsCode(prefix), mappedProp(getLocation, P.residue.pdbx_PDB_ins_code))\n        .str(prepostfixed(prefix, `label_asym_id`), mappedProp(getLocation, P.chain.label_asym_id))\n        .str(prepostfixed(prefix, `label_entity_id`), mappedProp(getLocation, P.chain.label_entity_id))\n        .str(prepostfixed(prefix, `auth_comp_id`), mappedProp(getLocation, P.atom.auth_comp_id))\n        .int(prepostfixed(prefix, `auth_seq_id`), mappedProp(getLocation, P.residue.auth_seq_id), { encoder: E.deltaRLE })\n        .str(prepostfixed(prefix, `auth_asym_id`), mappedProp(getLocation, P.chain.auth_asym_id));\n    addModelNum(ret, getLocation, options);\n    return ret.getFields();\n}\nexport function chainIdFields(getLocation, options) {\n    const prefix = options && options.prefix;\n    const ret = CifField.build()\n        .str(prepostfixed(prefix, `label_asym_id`), mappedProp(getLocation, P.chain.label_asym_id))\n        .str(prepostfixed(prefix, `label_entity_id`), mappedProp(getLocation, P.chain.label_entity_id))\n        .str(prepostfixed(prefix, `auth_asym_id`), mappedProp(getLocation, P.chain.auth_asym_id));\n    addModelNum(ret, getLocation, options);\n    return ret.getFields();\n}\nexport function entityIdFields(getLocation, options) {\n    const prefix = options && options.prefix;\n    const ret = CifField.build()\n        .str(prepostfixed(prefix, `label_entity_id`), mappedProp(getLocation, P.chain.label_entity_id));\n    addModelNum(ret, getLocation, options);\n    return ret.getFields();\n}\nexport function atomIdFields(getLocation, options) {\n    const prefix = options && options.prefix;\n    const ret = CifWriter.fields()\n        .str(prepostfixed(prefix, `label_atom_id`), mappedProp(getLocation, P.atom.label_atom_id))\n        .str(prepostfixed(prefix, `label_comp_id`), mappedProp(getLocation, P.atom.label_comp_id))\n        .int(prepostfixed(prefix, `label_seq_id`), mappedProp(getLocation, P.residue.label_seq_id), {\n        encoder: E.deltaRLE,\n        valueKind: (k, d) => {\n            const e = getLocation(k, d);\n            const m = e.unit.model;\n            return m.atomicHierarchy.residues.label_seq_id.valueKind(m.atomicHierarchy.residueAtomSegments.index[e.element]);\n        }\n    })\n        .str(prepostfixed(prefix, `label_alt_id`), mappedProp(getLocation, P.atom.label_alt_id))\n        .str(prefixedInsCode(prefix), mappedProp(getLocation, P.residue.pdbx_PDB_ins_code))\n        .str(prepostfixed(prefix, `label_asym_id`), mappedProp(getLocation, P.chain.label_asym_id))\n        .str(prepostfixed(prefix, `label_entity_id`), mappedProp(getLocation, P.chain.label_entity_id))\n        .str(prepostfixed(prefix, `auth_atom_id`), mappedProp(getLocation, P.atom.auth_atom_id))\n        .str(prepostfixed(prefix, `auth_comp_id`), mappedProp(getLocation, P.atom.auth_comp_id))\n        .int(prepostfixed(prefix, `auth_seq_id`), mappedProp(getLocation, P.residue.auth_seq_id), { encoder: E.deltaRLE })\n        .str(prepostfixed(prefix, `auth_asym_id`), mappedProp(getLocation, P.chain.auth_asym_id));\n    addModelNum(ret, getLocation, options);\n    return ret.getFields();\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Segmentation } from '../../../../mol-data/int.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { StructureElement, Unit } from '../../structure.js';\nvar CifField = CifWriter.Field;\nimport { Column } from '../../../../mol-data/db.js';\nimport { residueIdFields } from './atom_site.js';\nimport { ModelSecondaryStructure } from '../../../../mol-model-formats/structure/property/secondary-structure.js';\nexport const _struct_conf = {\n    name: 'struct_conf',\n    instance(ctx) {\n        const elements = findElements(ctx, 'helix');\n        return {\n            fields: struct_conf_fields(),\n            source: [{ data: elements, rowCount: elements.length }]\n        };\n    }\n};\nexport const _struct_sheet_range = {\n    name: 'struct_sheet_range',\n    instance(ctx) {\n        const elements = findElements(ctx, 'sheet').sort(compare_ssr);\n        return {\n            fields: struct_sheet_range_fields(),\n            source: [{ data: elements, rowCount: elements.length }]\n        };\n    }\n};\nfunction compare_ssr(x, y) {\n    const a = x.element, b = y.element;\n    return a.sheet_id < b.sheet_id ? -1 : a.sheet_id === b.sheet_id ? x.start.element - y.start.element : 1;\n}\n;\nconst struct_conf_fields = () => [\n    CifField.str('conf_type_id', (i, data) => data[i].element.type_id),\n    CifField.str('id', (i, data, idx) => `${data[i].element.type_id}${idx + 1}`),\n    ...residueIdFields((i, e) => e[i].start, { prefix: 'beg' }),\n    ...residueIdFields((i, e) => e[i].end, { prefix: 'end' }),\n    CifField.str('pdbx_PDB_helix_class', (i, data) => data[i].element.helix_class),\n    CifField.str('details', (i, data) => data[i].element.details || '', {\n        valueKind: (i, d) => !!d[i].element.details ? Column.ValueKinds.Present : Column.ValueKinds.Unknown\n    }),\n    CifField.int('pdbx_PDB_helix_length', (i, data) => data[i].length)\n];\nconst struct_sheet_range_fields = () => [\n    CifField.str('sheet_id', (i, data) => data[i].element.sheet_id),\n    CifField.index('id'),\n    ...residueIdFields((i, e) => e[i].start, { prefix: 'beg' }),\n    ...residueIdFields((i, e) => e[i].end, { prefix: 'end' }),\n    CifField.str('symmetry', (i, data) => '', { valueKind: (i, d) => Column.ValueKinds.Unknown })\n];\nfunction findElements(ctx, kind) {\n    // TODO: encode secondary structure for different models?\n    const secondaryStructure = ModelSecondaryStructure.Provider.get(ctx.firstModel);\n    if (!secondaryStructure)\n        return [];\n    const { key, elements } = secondaryStructure;\n    const ssElements = [];\n    const structure = ctx.structures[0];\n    for (const { units } of structure.unitSymmetryGroups) {\n        const u = units[0];\n        if (!Unit.isAtomic(u))\n            continue;\n        const segs = u.model.atomicHierarchy.residueAtomSegments;\n        const residues = Segmentation.transientSegments(segs, u.elements);\n        let current, move = true;\n        while (residues.hasNext) {\n            if (move)\n                current = residues.move();\n            const start = current.index;\n            const startIdx = key[start];\n            const element = elements[startIdx];\n            if (element.kind !== kind) {\n                move = true;\n                continue;\n            }\n            let prev = start;\n            while (residues.hasNext) {\n                prev = current.index;\n                current = residues.move();\n                if (startIdx !== key[current.index]) {\n                    move = false;\n                    ssElements[ssElements.length] = {\n                        start: StructureElement.Location.create(structure, u, segs.offsets[start]),\n                        end: StructureElement.Location.create(structure, u, segs.offsets[prev]),\n                        length: prev - start + 1,\n                        element\n                    };\n                    break;\n                }\n            }\n        }\n    }\n    return ssElements;\n}\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { SetUtils } from '../../../../mol-util/set.js';\nimport { UniqueArray } from '../../../../mol-data/generic.js';\nimport { sortArray } from '../../../../mol-data/util.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { MmcifFormat } from '../../../../mol-model-formats/structure/mmcif.js';\nimport { getCifFieldType } from '../../../../mol-io/reader/cif.js';\nexport function getModelMmCifCategory(model, name) {\n    if (!MmcifFormat.is(model.sourceData))\n        return;\n    return model.sourceData.data.db[name];\n}\nexport function getUniqueResidueNamesFromStructures(structures) {\n    return SetUtils.unionMany(...structures.map(s => s.uniqueResidueNames));\n}\nexport function getUniqueEntityIdsFromStructures(structures) {\n    if (structures.length === 0)\n        return new Set();\n    const names = structures[0].model.entities.data.id;\n    return new Set(getUniqueEntityIndicesFromStructures(structures).map(i => names.value(i)));\n}\nexport function getUniqueEntityIndicesFromStructures(structures) {\n    if (structures.length === 0)\n        return [];\n    if (structures.length === 1)\n        return structures[0].entityIndices;\n    const ret = UniqueArray.create();\n    for (const s of structures) {\n        for (const e of s.entityIndices) {\n            UniqueArray.add(ret, e, e);\n        }\n    }\n    sortArray(ret.array);\n    return ret.array;\n}\nexport function copy_mmCif_category(name, condition) {\n    return {\n        name,\n        instance({ structures }) {\n            if (condition && !condition(structures[0]))\n                return CifWriter.Category.Empty;\n            const model = structures[0].model;\n            if (!MmcifFormat.is(model.sourceData))\n                return CifWriter.Category.Empty;\n            const table = model.sourceData.data.db[name];\n            if (!table || !table._rowCount)\n                return CifWriter.Category.Empty;\n            return CifWriter.Category.ofTable(table);\n        }\n    };\n}\nexport function copy_source_mmCifCategory(encoder, ctx, category) {\n    if (!MmcifFormat.is(ctx.firstModel.sourceData))\n        return;\n    const fs = CifWriter.fields();\n    if (encoder.isBinary) {\n        for (const f of category.fieldNames) {\n            // TODO: this could be optimized\n            const field = classifyField(f, category.getField(f));\n            fs.add(field);\n        }\n    }\n    else {\n        for (const f of category.fieldNames) {\n            const field = category.getField(f);\n            fs.str(f, row => field.str(row));\n        }\n    }\n    const fields = fs.getFields();\n    return {\n        name: category.name,\n        instance() {\n            return { fields, source: [{ data: void 0, rowCount: category.rowCount }] };\n        }\n    };\n}\nfunction classifyField(name, field) {\n    const type = getCifFieldType(field);\n    if (type['@type'] === 'str') {\n        return { name, type: CifWriter.Field.Type.Str, value: field.str, valueKind: field.valueKind };\n    }\n    else if (type['@type'] === 'float') {\n        return CifWriter.Field.float(name, field.float, { valueKind: field.valueKind, typedArray: Float64Array });\n    }\n    else {\n        return CifWriter.Field.int(name, field.int, { valueKind: field.valueKind, typedArray: Int32Array });\n    }\n}\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { getModelMmCifCategory, getUniqueResidueNamesFromStructures } from './utils.js';\nvar CifCategory = CifWriter.Category;\nexport const _chem_comp = {\n    name: 'chem_comp',\n    instance({ firstModel, structures, cache }) {\n        const chem_comp = getModelMmCifCategory(structures[0].model, 'chem_comp');\n        if (!chem_comp)\n            return CifCategory.Empty;\n        const { id } = chem_comp;\n        const names = cache.uniqueResidueNames || (cache.uniqueResidueNames = getUniqueResidueNamesFromStructures(structures));\n        const indices = Column.indicesOf(id, id => names.has(id));\n        return CifCategory.ofTable(chem_comp, indices);\n    }\n};\nexport const _chem_comp_bond = {\n    name: 'chem_comp_bond',\n    instance({ firstModel, structures, cache }) {\n        const chem_comp_bond = getModelMmCifCategory(structures[0].model, 'chem_comp_bond');\n        if (!chem_comp_bond)\n            return CifCategory.Empty;\n        const { comp_id } = chem_comp_bond;\n        const names = cache.uniqueResidueNames || (cache.uniqueResidueNames = getUniqueResidueNamesFromStructures(structures));\n        const indices = Column.indicesOf(comp_id, id => names.has(id));\n        return CifCategory.ofTable(chem_comp_bond, indices);\n    }\n};\nexport const _pdbx_chem_comp_identifier = {\n    name: 'pdbx_chem_comp_identifier',\n    instance({ firstModel, structures, cache }) {\n        const pdbx_chem_comp_identifier = getModelMmCifCategory(firstModel, 'pdbx_chem_comp_identifier');\n        if (!pdbx_chem_comp_identifier)\n            return CifCategory.Empty;\n        const { comp_id } = pdbx_chem_comp_identifier;\n        const names = cache.uniqueResidueNames || (cache.uniqueResidueNames = getUniqueResidueNamesFromStructures(structures));\n        const indices = Column.indicesOf(comp_id, id => names.has(id));\n        return CifCategory.ofTable(pdbx_chem_comp_identifier, indices);\n    }\n};\nexport const _pdbx_nonpoly_scheme = {\n    name: 'pdbx_nonpoly_scheme',\n    instance({ firstModel, structures, cache }) {\n        const pdbx_nonpoly_scheme = getModelMmCifCategory(firstModel, 'pdbx_nonpoly_scheme');\n        if (!pdbx_nonpoly_scheme)\n            return CifCategory.Empty;\n        // TODO: filter?\n        return CifCategory.ofTable(pdbx_nonpoly_scheme);\n    }\n};\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Column } from '../../../../mol-data/db.js';\nimport { CifWriter } from '../../../../mol-io/writer/cif.js';\nimport { getModelMmCifCategory, getUniqueEntityIdsFromStructures } from './utils.js';\nvar CifCategory = CifWriter.Category;\nexport const _struct_asym = createCategory('struct_asym');\nexport const _entity_poly = createCategory('entity_poly');\nexport const _entity_poly_seq = createCategory('entity_poly_seq');\nfunction createCategory(categoryName) {\n    return {\n        name: categoryName,\n        instance({ structures, cache }) {\n            return getCategoryInstance(structures, categoryName, cache);\n        }\n    };\n}\nfunction getCategoryInstance(structures, categoryName, cache) {\n    const category = getModelMmCifCategory(structures[0].model, categoryName);\n    if (!category)\n        return CifCategory.Empty;\n    const { entity_id } = category;\n    const names = cache.uniqueEntityIds || (cache.uniqueEntityIds = getUniqueEntityIdsFromStructures(structures));\n    const indices = Column.indicesOf(entity_id, id => names.has(id));\n    return CifCategory.ofTable(category, indices);\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Kim Juho <juho_kim@outlook.com>\n */\nimport { CifWriter } from '../../../mol-io/writer/cif.js';\nimport { _atom_site } from './categories/atom_site.js';\nvar CifCategory = CifWriter.Category;\nimport { _struct_conf, _struct_sheet_range } from './categories/secondary-structure.js';\nimport { _chem_comp, _chem_comp_bond, _pdbx_chem_comp_identifier, _pdbx_nonpoly_scheme } from './categories/misc.js';\nimport { getUniqueEntityIndicesFromStructures, copy_mmCif_category, copy_source_mmCifCategory } from './categories/utils.js';\nimport { _struct_asym, _entity_poly, _entity_poly_seq } from './categories/sequence.js';\nimport { CustomPropertyDescriptor } from '../../custom-property.js';\nimport { atom_site_operator_mapping } from './categories/atom_site_operator_mapping.js';\nimport { MmcifFormat } from '../../../mol-model-formats/structure/mmcif.js';\nimport { molstar_bond_site } from './categories/molstar_bond_site.js';\nexport var CifExportContext;\n(function (CifExportContext) {\n    function create(structures) {\n        const structureArray = Array.isArray(structures) ? structures : [structures];\n        return {\n            structures: structureArray,\n            firstModel: structureArray[0].model,\n            cache: Object.create(null)\n        };\n    }\n    CifExportContext.create = create;\n})(CifExportContext || (CifExportContext = {}));\nconst _entity = {\n    name: 'entity',\n    instance({ structures }) {\n        const indices = getUniqueEntityIndicesFromStructures(structures);\n        return CifCategory.ofTable(structures[0].model.entities.data, indices);\n    }\n};\nfunction isWithoutSymmetry(structure) {\n    return structure.units.every(u => u.conformation.operator.isIdentity);\n}\nfunction isWithoutOperator(structure) {\n    return isWithoutSymmetry(structure) && structure.units.every(u => !u.conformation.operator.assembly && !u.conformation.operator.suffix);\n}\nconst Categories = (options) => [\n    // Basics\n    copy_mmCif_category('entry'),\n    copy_mmCif_category('exptl'),\n    _entity,\n    // Symmetry\n    copy_mmCif_category('cell', isWithoutSymmetry),\n    copy_mmCif_category('symmetry', isWithoutSymmetry),\n    // Assemblies\n    copy_mmCif_category('pdbx_struct_assembly', isWithoutOperator),\n    copy_mmCif_category('pdbx_struct_assembly_gen', isWithoutOperator),\n    copy_mmCif_category('pdbx_struct_oper_list', isWithoutOperator),\n    // Secondary structure\n    _struct_conf,\n    _struct_sheet_range,\n    // Sequence\n    _struct_asym,\n    _entity_poly,\n    _entity_poly_seq,\n    // Branch\n    copy_mmCif_category('pdbx_entity_branch'),\n    copy_mmCif_category('pdbx_entity_branch_link'),\n    copy_mmCif_category('pdbx_branch_scheme'),\n    // Struct conn\n    copy_mmCif_category('struct_conn'),\n    // Misc\n    _chem_comp,\n    _chem_comp_bond,\n    _pdbx_chem_comp_identifier,\n    copy_mmCif_category('atom_sites'),\n    _pdbx_nonpoly_scheme,\n    // Atoms\n    _atom_site({ keepId: options === null || options === void 0 ? void 0 : options.keepAtomSiteId }),\n];\nvar _Filters;\n(function (_Filters) {\n    _Filters.AtomSitePositionsFieldNames = new Set(['id', 'Cartn_x', 'Cartn_y', 'Cartn_z']);\n})(_Filters || (_Filters = {}));\nexport const mmCIF_Export_Filters = {\n    onlyPositions: {\n        includeCategory(name) { return name === 'atom_site'; },\n        includeField(cat, field) { return _Filters.AtomSitePositionsFieldNames.has(field); }\n    }\n};\nfunction getCustomPropCategories(customProp, ctx, params) {\n    var _a;\n    if (!customProp.cifExport || customProp.cifExport.categories.length === 0)\n        return [];\n    const prefix = customProp.cifExport.prefix;\n    const cats = customProp.cifExport.categories;\n    let propCtx = ctx;\n    if (customProp.cifExport.context) {\n        const propId = CustomPropertyDescriptor.getUUID(customProp);\n        if (ctx.cache[propId + '__ctx'])\n            propCtx = ctx.cache[propId + '__ctx'];\n        else {\n            propCtx = customProp.cifExport.context(ctx) || ctx;\n            ctx.cache[propId + '__ctx'] = propCtx;\n        }\n    }\n    const ret = [];\n    for (const cat of cats) {\n        if ((_a = params === null || params === void 0 ? void 0 : params.skipCategoryNames) === null || _a === void 0 ? void 0 : _a.has(cat.name))\n            continue;\n        if ((params === null || params === void 0 ? void 0 : params.includedCategoryNames) && !params.includedCategoryNames.has(cat.name))\n            continue;\n        if (cat.name.indexOf(prefix) !== 0)\n            throw new Error(`Custom category '${cat.name}' name must start with prefix '${prefix}.'`);\n        ret.push([cat, propCtx]);\n    }\n    return ret;\n}\n/** Doesn't start a data block */\nexport function encode_mmCIF_categories(encoder, structures, params) {\n    const first = Array.isArray(structures) ? structures[0] : structures;\n    const models = first.models;\n    if (models.length !== 1)\n        throw new Error('Can\\'t export stucture composed from multiple models.');\n    const ctx = (params === null || params === void 0 ? void 0 : params.exportCtx) || CifExportContext.create(structures);\n    if ((params === null || params === void 0 ? void 0 : params.copyAllCategories) && MmcifFormat.is(models[0].sourceData)) {\n        encode_mmCIF_categories_copyAll(encoder, ctx, params);\n    }\n    else {\n        encode_mmCIF_categories_default(encoder, ctx, params);\n    }\n}\nfunction encode_mmCIF_categories_default(encoder, ctx, params) {\n    var _a, _b, _c;\n    for (const cat of Categories({\n        keepAtomSiteId: ((_a = params === null || params === void 0 ? void 0 : params.extensions) === null || _a === void 0 ? void 0 : _a.molstar_bond_site) || (params === null || params === void 0 ? void 0 : params.doNotReindexAtomSiteId)\n    })) {\n        if ((params === null || params === void 0 ? void 0 : params.skipCategoryNames) && (params === null || params === void 0 ? void 0 : params.skipCategoryNames.has(cat.name)))\n            continue;\n        if ((params === null || params === void 0 ? void 0 : params.includedCategoryNames) && !params.includedCategoryNames.has(cat.name))\n            continue;\n        encoder.writeCategory(cat, ctx);\n    }\n    if (!((_b = params === null || params === void 0 ? void 0 : params.skipCategoryNames) === null || _b === void 0 ? void 0 : _b.has('atom_site')) && encoder.isCategoryIncluded('atom_site')) {\n        const info = atom_site_operator_mapping(ctx);\n        if (info)\n            encoder.writeCategory(info[0], info[1], info[2]);\n    }\n    if ((_c = params === null || params === void 0 ? void 0 : params.extensions) === null || _c === void 0 ? void 0 : _c.molstar_bond_site) {\n        const info = molstar_bond_site(ctx);\n        if (info)\n            encoder.writeCategory(info[0], info[1], info[2]);\n    }\n    const _params = params || {};\n    for (const customProp of ctx.firstModel.customProperties.all) {\n        for (const [cat, propCtx] of getCustomPropCategories(customProp, ctx, _params)) {\n            encoder.writeCategory(cat, propCtx);\n        }\n    }\n    if (params === null || params === void 0 ? void 0 : params.customProperties) {\n        for (const customProp of params === null || params === void 0 ? void 0 : params.customProperties) {\n            for (const [cat, propCtx] of getCustomPropCategories(customProp, ctx, _params)) {\n                encoder.writeCategory(cat, propCtx);\n            }\n        }\n    }\n    for (const s of ctx.structures) {\n        if (!s.hasCustomProperties)\n            continue;\n        for (const customProp of s.customPropertyDescriptors.all) {\n            for (const [cat, propCtx] of getCustomPropCategories(customProp, ctx, _params)) {\n                encoder.writeCategory(cat, propCtx);\n            }\n        }\n    }\n}\nfunction encode_mmCIF_categories_copyAll(encoder, ctx, params) {\n    var _a, _b;\n    const providedCategories = new Map();\n    for (const cat of Categories({\n        keepAtomSiteId: ((_a = params === null || params === void 0 ? void 0 : params.extensions) === null || _a === void 0 ? void 0 : _a.molstar_bond_site) || (params === null || params === void 0 ? void 0 : params.doNotReindexAtomSiteId)\n    })) {\n        providedCategories.set(cat.name, [cat, ctx]);\n    }\n    const mapping = atom_site_operator_mapping(ctx);\n    if (mapping)\n        providedCategories.set(mapping[0].name, mapping);\n    const _params = params || {};\n    for (const customProp of ctx.firstModel.customProperties.all) {\n        for (const info of getCustomPropCategories(customProp, ctx, _params)) {\n            providedCategories.set(info[0].name, info);\n        }\n    }\n    if (params === null || params === void 0 ? void 0 : params.customProperties) {\n        for (const customProp of params === null || params === void 0 ? void 0 : params.customProperties) {\n            for (const info of getCustomPropCategories(customProp, ctx, _params)) {\n                providedCategories.set(info[0].name, info);\n            }\n        }\n    }\n    for (const s of ctx.structures) {\n        if (!s.hasCustomProperties)\n            continue;\n        for (const customProp of s.customPropertyDescriptors.all) {\n            for (const info of getCustomPropCategories(customProp, ctx)) {\n                providedCategories.set(info[0].name, info);\n            }\n        }\n    }\n    const handled = new Set();\n    const data = ctx.firstModel.sourceData.data;\n    for (const catName of data.frame.categoryNames) {\n        handled.add(catName);\n        if (providedCategories.has(catName)) {\n            const info = providedCategories.get(catName);\n            encoder.writeCategory(info[0], info[1], info[2]);\n        }\n        else {\n            if (data.db[catName]) {\n                const cat = copy_mmCif_category(catName);\n                encoder.writeCategory(cat, ctx);\n            }\n            else {\n                const cat = copy_source_mmCifCategory(encoder, ctx, data.frame.categories[catName]);\n                if (cat)\n                    encoder.writeCategory(cat);\n            }\n        }\n    }\n    providedCategories.forEach((info, name) => {\n        if (!handled.has(name))\n            encoder.writeCategory(info[0], info[1], info[2]);\n    });\n    if ((_b = params === null || params === void 0 ? void 0 : params.extensions) === null || _b === void 0 ? void 0 : _b.molstar_bond_site) {\n        const info = molstar_bond_site(ctx);\n        if (info)\n            encoder.writeCategory(info[0], info[1], info[2]);\n    }\n}\nfunction to_mmCIF(name, structures, asBinary = false, params) {\n    var _a;\n    const enc = (_a = params === null || params === void 0 ? void 0 : params.encoder) !== null && _a !== void 0 ? _a : CifWriter.createEncoder({ binary: asBinary });\n    enc.startDataBlock(name);\n    encode_mmCIF_categories(enc, structures, params);\n    return enc.getData();\n}\nexport { to_mmCIF };\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nexport { Location };\nvar Location;\n(function (Location) {\n    function create(structure, unit, element) {\n        return {\n            kind: 'element-location',\n            structure: structure,\n            unit: unit,\n            element: element || 0\n        };\n    }\n    Location.create = create;\n    function clone(l) {\n        return create(l.structure, l.unit, l.element);\n    }\n    Location.clone = clone;\n    function set(a, structure, unit, element) {\n        if (structure)\n            a.structure = structure;\n        if (unit)\n            a.unit = unit;\n        if (element !== undefined)\n            a.element = element;\n        return a;\n    }\n    Location.set = set;\n    function copy(out, a) {\n        out.unit = a.unit;\n        out.element = a.element;\n        return out;\n    }\n    Location.copy = copy;\n    function is(x) {\n        return !!x && x.kind === 'element-location';\n    }\n    Location.is = is;\n    function areEqual(a, b) {\n        return a.unit === b.unit && a.element === b.element;\n    }\n    Location.areEqual = areEqual;\n    const pA = Vec3(), pB = Vec3();\n    function distance(a, b) {\n        a.unit.conformation.position(a.element, pA);\n        b.unit.conformation.position(b.element, pB);\n        return Vec3.distance(pA, pB);\n    }\n    Location.distance = distance;\n    function position(out, l) {\n        return l.unit.conformation.position(l.element, out);\n    }\n    Location.position = position;\n    function residueIndex(l) {\n        return l.unit.model.atomicHierarchy.residueAtomSegments.index[l.element];\n    }\n    Location.residueIndex = residueIndex;\n    function chainIndex(l) {\n        return l.unit.model.atomicHierarchy.chainAtomSegments.index[l.element];\n    }\n    Location.chainIndex = chainIndex;\n})(Location || (Location = {}));\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/*\n * This code has been modified from https://github.com/toji/gl-matrix/,\n * copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n */\n/*\n * Quat.fromUnitVec3 has been modified from https://github.com/Jam3/quat-from-unit-vec3,\n * copyright (c) 2015 Jam3. MIT License\n */\nimport { Mat3 } from './mat3.js';\nimport { Vec3 } from './vec3.js';\nimport { EPSILON } from './common.js';\nimport { assertUnreachable } from '../../../mol-util/type-helpers.js';\nimport { Mat4 } from './mat4.js';\nimport { clamp } from '../../interpolate.js';\nfunction Quat() {\n    return Quat.zero();\n}\n(function (Quat) {\n    function zero() {\n        // force double backing array by 0.1.\n        const ret = [0.1, 0, 0, 0];\n        ret[0] = 0.0;\n        return ret;\n    }\n    Quat.zero = zero;\n    function identity() {\n        const out = zero();\n        out[3] = 1;\n        return out;\n    }\n    Quat.identity = identity;\n    function setIdentity(out) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n    }\n    Quat.setIdentity = setIdentity;\n    function hasNaN(q) {\n        return Number.isNaN(q[0]) || Number.isNaN(q[1]) || Number.isNaN(q[2]) || Number.isNaN(q[3]);\n    }\n    Quat.hasNaN = hasNaN;\n    function create(x, y, z, w) {\n        const out = identity();\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = w;\n        return out;\n    }\n    Quat.create = create;\n    function setAxisAngle(out, axis, rad) {\n        rad = rad * 0.5;\n        const s = Math.sin(rad);\n        out[0] = s * axis[0];\n        out[1] = s * axis[1];\n        out[2] = s * axis[2];\n        out[3] = Math.cos(rad);\n        return out;\n    }\n    Quat.setAxisAngle = setAxisAngle;\n    /**\n     * Gets the rotation axis and angle for a given\n     *  quaternion. If a quaternion is created with\n     *  setAxisAngle, this method will return the same\n     *  values as providied in the original parameter list\n     *  OR functionally equivalent values.\n     * Example: The quaternion formed by axis [0, 0, 1] and\n     *  angle -90 is the same as the quaternion formed by\n     *  [0, 0, 1] and 270. This method favors the latter.\n     */\n    function getAxisAngle(out_axis, q) {\n        const rad = Math.acos(q[3]) * 2.0;\n        const s = Math.sin(rad / 2.0);\n        if (s !== 0.0) {\n            out_axis[0] = q[0] / s;\n            out_axis[1] = q[1] / s;\n            out_axis[2] = q[2] / s;\n        }\n        else {\n            // If s is zero, return any axis (no rotation - axis does not matter)\n            out_axis[0] = 1;\n            out_axis[1] = 0;\n            out_axis[2] = 0;\n        }\n        return rad;\n    }\n    Quat.getAxisAngle = getAxisAngle;\n    function multiply(out, a, b) {\n        const ax = a[0], ay = a[1], az = a[2], aw = a[3];\n        const bx = b[0], by = b[1], bz = b[2], bw = b[3];\n        out[0] = ax * bw + aw * bx + ay * bz - az * by;\n        out[1] = ay * bw + aw * by + az * bx - ax * bz;\n        out[2] = az * bw + aw * bz + ax * by - ay * bx;\n        out[3] = aw * bw - ax * bx - ay * by - az * bz;\n        return out;\n    }\n    Quat.multiply = multiply;\n    function rotateX(out, a, rad) {\n        rad *= 0.5;\n        const ax = a[0], ay = a[1], az = a[2], aw = a[3];\n        const bx = Math.sin(rad), bw = Math.cos(rad);\n        out[0] = ax * bw + aw * bx;\n        out[1] = ay * bw + az * bx;\n        out[2] = az * bw - ay * bx;\n        out[3] = aw * bw - ax * bx;\n        return out;\n    }\n    Quat.rotateX = rotateX;\n    function rotateY(out, a, rad) {\n        rad *= 0.5;\n        const ax = a[0], ay = a[1], az = a[2], aw = a[3];\n        const by = Math.sin(rad), bw = Math.cos(rad);\n        out[0] = ax * bw - az * by;\n        out[1] = ay * bw + aw * by;\n        out[2] = az * bw + ax * by;\n        out[3] = aw * bw - ay * by;\n        return out;\n    }\n    Quat.rotateY = rotateY;\n    function rotateZ(out, a, rad) {\n        rad *= 0.5;\n        const ax = a[0], ay = a[1], az = a[2], aw = a[3];\n        const bz = Math.sin(rad), bw = Math.cos(rad);\n        out[0] = ax * bw + ay * bz;\n        out[1] = ay * bw - ax * bz;\n        out[2] = az * bw + aw * bz;\n        out[3] = aw * bw - az * bz;\n        return out;\n    }\n    Quat.rotateZ = rotateZ;\n    /**\n     * Calculates the W component of a quat from the X, Y, and Z components.\n     * Assumes that quaternion is 1 unit in length.\n     * Any existing W component will be ignored.\n     */\n    function calculateW(out, a) {\n        const x = a[0], y = a[1], z = a[2];\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n        return out;\n    }\n    Quat.calculateW = calculateW;\n    /**\n     * Performs a spherical linear interpolation between two quat\n     */\n    function slerp(out, a, b, t) {\n        // benchmarks:\n        //    http://jsperf.com/quaternion-slerp-implementations\n        const ax = a[0], ay = a[1], az = a[2], aw = a[3];\n        let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n        let omega, cosom, sinom, scale0, scale1;\n        // calc cosine\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\n        // adjust signs (if necessary)\n        if (cosom < 0.0) {\n            cosom = -cosom;\n            bx = -bx;\n            by = -by;\n            bz = -bz;\n            bw = -bw;\n        }\n        // calculate coefficients\n        if ((1.0 - cosom) > 0.000001) {\n            // standard case (slerp)\n            omega = Math.acos(cosom);\n            sinom = Math.sin(omega);\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\n            scale1 = Math.sin(t * omega) / sinom;\n        }\n        else {\n            // \"from\" and \"to\" quaternions are very close\n            //  ... so we can do a linear interpolation\n            scale0 = 1.0 - t;\n            scale1 = t;\n        }\n        // calculate final values\n        out[0] = scale0 * ax + scale1 * bx;\n        out[1] = scale0 * ay + scale1 * by;\n        out[2] = scale0 * az + scale1 * bz;\n        out[3] = scale0 * aw + scale1 * bw;\n        return out;\n    }\n    Quat.slerp = slerp;\n    function invert(out, a) {\n        const a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n        const dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n        const invDot = dot ? 1.0 / dot : 0;\n        // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n        out[0] = -a0 * invDot;\n        out[1] = -a1 * invDot;\n        out[2] = -a2 * invDot;\n        out[3] = a3 * invDot;\n        return out;\n    }\n    Quat.invert = invert;\n    /**\n     * Calculates the conjugate of a quat\n     * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n     */\n    function conjugate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        out[3] = a[3];\n        return out;\n    }\n    Quat.conjugate = conjugate;\n    function dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n    }\n    Quat.dot = dot;\n    /**\n     * Creates a quaternion from the given 3x3 rotation matrix.\n     *\n     * NOTE: The resultant quaternion is not normalized, so you should be sure\n     * to renormalize the quaternion yourself where necessary.\n     */\n    function fromMat3(out, m) {\n        // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n        // article \"Quaternion Calculus and Fast Animation\".\n        const fTrace = m[0] + m[4] + m[8];\n        let fRoot;\n        if (fTrace > 0.0) {\n            // |w| > 1/2, may as well choose w > 1/2\n            fRoot = Math.sqrt(fTrace + 1.0); // 2w\n            out[3] = 0.5 * fRoot;\n            fRoot = 0.5 / fRoot; // 1/(4w)\n            out[0] = (m[5] - m[7]) * fRoot;\n            out[1] = (m[6] - m[2]) * fRoot;\n            out[2] = (m[1] - m[3]) * fRoot;\n        }\n        else {\n            // |w| <= 1/2\n            let i = 0;\n            if (m[4] > m[0])\n                i = 1;\n            if (m[8] > m[i * 3 + i])\n                i = 2;\n            const j = (i + 1) % 3;\n            const k = (i + 2) % 3;\n            fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n            out[i] = 0.5 * fRoot;\n            fRoot = 0.5 / fRoot;\n            out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n            out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n            out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n        }\n        return out;\n    }\n    Quat.fromMat3 = fromMat3;\n    const m3tmp = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    function fromMat4(out, m) {\n        Mat3.fromMat4(m3tmp, m);\n        return fromMat3(out, m3tmp);\n    }\n    Quat.fromMat4 = fromMat4;\n    function fromEuler(out, euler, order) {\n        const [x, y, z] = euler;\n        // http://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/content/SpinCalc.m\n        const c1 = Math.cos(x / 2);\n        const c2 = Math.cos(y / 2);\n        const c3 = Math.cos(z / 2);\n        const s1 = Math.sin(x / 2);\n        const s2 = Math.sin(y / 2);\n        const s3 = Math.sin(z / 2);\n        switch (order) {\n            case 'XYZ':\n                out[0] = s1 * c2 * c3 + c1 * s2 * s3;\n                out[1] = c1 * s2 * c3 - s1 * c2 * s3;\n                out[2] = c1 * c2 * s3 + s1 * s2 * c3;\n                out[3] = c1 * c2 * c3 - s1 * s2 * s3;\n                break;\n            case 'YXZ':\n                out[0] = s1 * c2 * c3 + c1 * s2 * s3;\n                out[1] = c1 * s2 * c3 - s1 * c2 * s3;\n                out[2] = c1 * c2 * s3 - s1 * s2 * c3;\n                out[3] = c1 * c2 * c3 + s1 * s2 * s3;\n                break;\n            case 'ZXY':\n                out[0] = s1 * c2 * c3 - c1 * s2 * s3;\n                out[1] = c1 * s2 * c3 + s1 * c2 * s3;\n                out[2] = c1 * c2 * s3 + s1 * s2 * c3;\n                out[3] = c1 * c2 * c3 - s1 * s2 * s3;\n                break;\n            case 'ZYX':\n                out[0] = s1 * c2 * c3 - c1 * s2 * s3;\n                out[1] = c1 * s2 * c3 + s1 * c2 * s3;\n                out[2] = c1 * c2 * s3 - s1 * s2 * c3;\n                out[3] = c1 * c2 * c3 + s1 * s2 * s3;\n                break;\n            case 'YZX':\n                out[0] = s1 * c2 * c3 + c1 * s2 * s3;\n                out[1] = c1 * s2 * c3 + s1 * c2 * s3;\n                out[2] = c1 * c2 * s3 - s1 * s2 * c3;\n                out[3] = c1 * c2 * c3 - s1 * s2 * s3;\n                break;\n            case 'XZY':\n                out[0] = s1 * c2 * c3 - c1 * s2 * s3;\n                out[1] = c1 * s2 * c3 - s1 * c2 * s3;\n                out[2] = c1 * c2 * s3 + s1 * s2 * c3;\n                out[3] = c1 * c2 * c3 + s1 * s2 * s3;\n                break;\n            default:\n                assertUnreachable(order);\n        }\n        return out;\n    }\n    Quat.fromEuler = fromEuler;\n    const fromUnitVec3Temp = [0, 0, 0];\n    /** Quaternion from two normalized unit vectors. */\n    function fromUnitVec3(out, a, b) {\n        // assumes a and b are normalized\n        let r = Vec3.dot(a, b) + 1;\n        if (r < EPSILON) {\n            // If u and v are exactly opposite, rotate 180 degrees\n            // around an arbitrary orthogonal axis. Axis normalisation\n            // can happen later, when we normalise the quaternion.\n            r = 0;\n            if (Math.abs(a[0]) > Math.abs(a[2])) {\n                Vec3.set(fromUnitVec3Temp, -a[1], a[0], 0);\n            }\n            else {\n                Vec3.set(fromUnitVec3Temp, 0, -a[2], a[1]);\n            }\n        }\n        else {\n            // Otherwise, build quaternion the standard way.\n            Vec3.cross(fromUnitVec3Temp, a, b);\n        }\n        out[0] = fromUnitVec3Temp[0];\n        out[1] = fromUnitVec3Temp[1];\n        out[2] = fromUnitVec3Temp[2];\n        out[3] = r;\n        normalize(out, out);\n        return out;\n    }\n    Quat.fromUnitVec3 = fromUnitVec3;\n    const m4tmp = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    function fromBasis(out, x, y, z) {\n        Mat4.fromBasis(m4tmp, x, y, z);\n        return fromMat4(out, m4tmp);\n    }\n    Quat.fromBasis = fromBasis;\n    function clone(a) {\n        const out = zero();\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    Quat.clone = clone;\n    function fromObj(a) {\n        return create(a.x, a.y, a.z, a.w);\n    }\n    Quat.fromObj = fromObj;\n    function toObj(a) {\n        return { x: a[0], y: a[1], z: a[2], w: a[3] };\n    }\n    Quat.toObj = toObj;\n    function toArray(a, out, offset) {\n        out[offset + 0] = a[0];\n        out[offset + 1] = a[1];\n        out[offset + 2] = a[2];\n        out[offset + 3] = a[3];\n        return out;\n    }\n    Quat.toArray = toArray;\n    function fromArray(a, array, offset) {\n        a[0] = array[offset + 0];\n        a[1] = array[offset + 1];\n        a[2] = array[offset + 2];\n        a[3] = array[offset + 3];\n        return a;\n    }\n    Quat.fromArray = fromArray;\n    function copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    Quat.copy = copy;\n    function set(out, x, y, z, w) {\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = w;\n        return out;\n    }\n    Quat.set = set;\n    /**\n     * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n     */\n    function exactEquals(a, b) {\n        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n    }\n    Quat.exactEquals = exactEquals;\n    /**\n     * Returns whether or not the quaternions have approximately the same elements in the same position.\n     */\n    function equals(a, b) {\n        const a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n        const b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n    }\n    Quat.equals = equals;\n    function add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        return out;\n    }\n    Quat.add = add;\n    function magnitude(a) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        return Math.sqrt(x * x + y * y + z * z + w * w);\n    }\n    Quat.magnitude = magnitude;\n    function squaredMagnitude(a) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        return x * x + y * y + z * z + w * w;\n    }\n    Quat.squaredMagnitude = squaredMagnitude;\n    function angle(a, b) {\n        return 2 * Math.acos(Math.abs(clamp(dot(a, b), -1, 1)));\n    }\n    Quat.angle = angle;\n    function normalize(out, a) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        const w = a[3];\n        let len = x * x + y * y + z * z + w * w;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            out[0] = x * len;\n            out[1] = y * len;\n            out[2] = z * len;\n            out[3] = w * len;\n        }\n        return out;\n    }\n    Quat.normalize = normalize;\n    /**\n     * Sets a quaternion to represent the shortest rotation from one\n     * vector to another.\n     *\n     * Both vectors are assumed to be unit length.\n     */\n    const rotTmpVec3 = [0, 0, 0];\n    const rotTmpVec3UnitX = [1, 0, 0];\n    const rotTmpVec3UnitY = [0, 1, 0];\n    function rotationTo(out, a, b) {\n        const dot = Vec3.dot(a, b);\n        if (dot < -0.999999) {\n            Vec3.cross(rotTmpVec3, rotTmpVec3UnitX, a);\n            if (Vec3.magnitude(rotTmpVec3) < 0.000001)\n                Vec3.cross(rotTmpVec3, rotTmpVec3UnitY, a);\n            Vec3.normalize(rotTmpVec3, rotTmpVec3);\n            setAxisAngle(out, rotTmpVec3, Math.PI);\n            return out;\n        }\n        else if (dot > 0.999999) {\n            out[0] = 0;\n            out[1] = 0;\n            out[2] = 0;\n            out[3] = 1;\n            return out;\n        }\n        else {\n            Vec3.cross(rotTmpVec3, a, b);\n            out[0] = rotTmpVec3[0];\n            out[1] = rotTmpVec3[1];\n            out[2] = rotTmpVec3[2];\n            out[3] = 1 + dot;\n            return normalize(out, out);\n        }\n    }\n    Quat.rotationTo = rotationTo;\n    /**\n     * Performs a spherical linear interpolation with two control points\n     */\n    const sqlerpTemp1 = zero();\n    const sqlerpTemp2 = zero();\n    function sqlerp(out, a, b, c, d, t) {\n        slerp(sqlerpTemp1, a, d, t);\n        slerp(sqlerpTemp2, b, c, t);\n        slerp(out, sqlerpTemp1, sqlerpTemp2, 2 * t * (1 - t));\n        return out;\n    }\n    Quat.sqlerp = sqlerp;\n    /**\n     * Sets the specified quaternion with values corresponding to the given\n     * axes. Each axis is a vec3 and is expected to be unit length and\n     * perpendicular to all other specified axes.\n     */\n    const axesTmpMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n    function setAxes(out, view, right, up) {\n        axesTmpMat[0] = right[0];\n        axesTmpMat[3] = right[1];\n        axesTmpMat[6] = right[2];\n        axesTmpMat[1] = up[0];\n        axesTmpMat[4] = up[1];\n        axesTmpMat[7] = up[2];\n        axesTmpMat[2] = -view[0];\n        axesTmpMat[5] = -view[1];\n        axesTmpMat[8] = -view[2];\n        return normalize(out, fromMat3(out, axesTmpMat));\n    }\n    Quat.setAxes = setAxes;\n    function toString(a, precision) {\n        return `[${a[0].toPrecision(precision)} ${a[1].toPrecision(precision)} ${a[2].toPrecision(precision)}  ${a[3].toPrecision(precision)}]`;\n    }\n    Quat.toString = toString;\n    Quat.Identity = identity();\n})(Quat || (Quat = {}));\nexport { Quat };\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nconst reLine = /^/mg;\nexport function indentString(str, count, indent) {\n    return count === 0 ? str : str.replace(reLine, indent.repeat(count));\n}\n/** Add space between camelCase text. */\nexport function splitCamelCase(str, separator = ' ') {\n    return str.replace(/([a-z\\xE0-\\xFF])([A-Z\\xC0\\xDF])/g, `$1${separator}$2`);\n}\n/** Split camelCase text and capitalize. */\nexport function camelCaseToWords(str) {\n    return capitalize(splitCamelCase(str));\n}\nexport const lowerCase = (str) => str.toLowerCase();\nexport const upperCase = (str) => str.toUpperCase();\n/** Return upper case if string, otherwise return empty string */\nexport function upperCaseAny(value) {\n    if (!value)\n        return '';\n    return typeof value === 'string' ? value.toUpperCase() : `${value}`.toUpperCase();\n}\n/** Uppercase the first character of each word. */\nexport function capitalize(str) {\n    return str.toLowerCase().replace(/^\\w|\\s\\w/g, upperCase);\n}\nexport function splitSnakeCase(str) {\n    return str.replace(/_/g, ' ');\n}\nexport function snakeCaseToWords(str) {\n    return capitalize(splitSnakeCase(str));\n}\nexport function splitKebabCase(str) {\n    return str.replace(/-/g, ' ');\n}\nexport function kebabCaseToWords(str) {\n    return capitalize(splitKebabCase(str));\n}\nexport function stringToWords(str) {\n    return capitalize(splitCamelCase(splitSnakeCase(splitKebabCase(str))));\n}\nexport function substringStartsWith(str, start, end, target) {\n    const len = target.length;\n    if (len > end - start)\n        return false;\n    for (let i = 0; i < len; i++) {\n        if (str.charCodeAt(start + i) !== target.charCodeAt(i))\n            return false;\n    }\n    return true;\n}\nexport function interpolate(str, params) {\n    const names = Object.keys(params);\n    const values = Object.values(params);\n    return new Function(...names, `return \\`${str}\\`;`)(...values);\n}\nexport function trimChar(str, char) {\n    let start = 0;\n    let end = str.length;\n    while (start < end && str[start] === char)\n        ++start;\n    while (end > start && str[end - 1] === char)\n        --end;\n    return (start > 0 || end < str.length) ? str.substring(start, end) : str;\n}\nexport function trimCharStart(str, char) {\n    let start = 0;\n    const end = str.length;\n    while (start < end && str[start] === char)\n        ++start;\n    return (start > 0) ? str.substring(start, end) : str;\n}\nexport function trimCharEnd(str, char) {\n    let end = str.length;\n    while (end > 0 && str[end - 1] === char)\n        --end;\n    return (end < str.length) ? str.substring(0, end) : str;\n}\n/** Simple function to strip tags from a string */\nexport function stripTags(str) {\n    return str.replace(/<\\/?[^>]+>/g, '');\n}\n/**\n * Escape string for use in Javascript regex\n *\n * From https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex/6969486#6969486\n */\nexport function escapeRegExp(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n","/**\n * Copyright (c) 2017-2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { ExecuteObservable, ExecuteObservableChild, ExecuteInContext } from './execution/observable.js';\nimport { SyncRuntimeContext } from './execution/synchronous.js';\nimport { idFactory } from '../mol-util/id-factory.js';\nvar Task;\n(function (Task) {\n    class Impl {\n        run(observer, updateRateMs = 250) {\n            if (observer)\n                return ExecuteObservable(this, observer, updateRateMs);\n            return this.f(SyncRuntimeContext);\n        }\n        runAsChild(ctx, progress) {\n            if (ctx.isSynchronous)\n                return this.f(SyncRuntimeContext);\n            return ExecuteObservableChild(ctx, this, progress);\n        }\n        runInContext(ctx) {\n            if (ctx.isSynchronous)\n                return this.f(SyncRuntimeContext);\n            return ExecuteInContext(ctx, this);\n        }\n        constructor(name, f, onAbort) {\n            this.name = name;\n            this.f = f;\n            this.onAbort = onAbort;\n            this.id = getNextId();\n        }\n    }\n    function is(t) {\n        const _t = t;\n        return !!t && typeof _t.id === 'number' && typeof _t.name === 'string' && !!_t.run;\n    }\n    Task.is = is;\n    function isAbort(e) { return !!e && !!e.isAborted; }\n    Task.isAbort = isAbort;\n    function Aborted(reason) { return { isAborted: true, reason, toString() { return `Aborted${reason ? ': ' + reason : ''}`; } }; }\n    Task.Aborted = Aborted;\n    function create(name, f, onAbort) {\n        return new Impl(name, f, onAbort);\n    }\n    Task.create = create;\n    function constant(name, value) { return create(name, async (ctx) => value); }\n    Task.constant = constant;\n    function empty() { return create('', async (ctx) => { }); }\n    Task.empty = empty;\n    function fail(name, reason) { return create(name, async (ctx) => { throw new Error(reason); }); }\n    Task.fail = fail;\n    function resolveInContext(object, ctx) {\n        if (is(object))\n            return ctx ? object.runInContext(ctx) : object.run();\n        return object;\n    }\n    Task.resolveInContext = resolveInContext;\n    const getNextId = idFactory(0, 0x3fffffff);\n})(Task || (Task = {}));\nexport { Task };\n","/*\n * Copyright (c) 2018 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { MSymbol, isSymbol } from './symbol.js';\nexport function symbol(args, type, description) {\n    return MSymbol('', args, type, description);\n}\nexport function normalizeTable(table) {\n    _normalizeTable('', '', table);\n}\nexport function symbolList(table) {\n    const list = [];\n    _symbolList(table, list);\n    return list;\n}\nfunction formatKey(key) {\n    const regex = /([a-z])([A-Z])([a-z]|$)/g;\n    // do this twice because 'xXxX'\n    return key.replace(regex, (s, a, b, c) => `${a}-${b.toLocaleLowerCase()}${c}`).replace(regex, (s, a, b, c) => `${a}-${b.toLocaleLowerCase()}${c}`);\n}\nfunction _normalizeTable(namespace, key, obj) {\n    if (isSymbol(obj)) {\n        obj.info.namespace = namespace;\n        obj.info.name = obj.info.name || formatKey(key);\n        obj.id = `${obj.info.namespace}.${obj.info.name}`;\n        return;\n    }\n    const currentNs = `${obj['@namespace'] || formatKey(key)}`;\n    const newNs = namespace ? `${namespace}.${currentNs}` : currentNs;\n    for (const childKey of Object.keys(obj)) {\n        if (typeof obj[childKey] !== 'object' && !isSymbol(obj[childKey]))\n            continue;\n        _normalizeTable(newNs, childKey, obj[childKey]);\n    }\n}\nfunction _symbolList(obj, list) {\n    if (isSymbol(obj)) {\n        list.push(obj);\n        return;\n    }\n    for (const childKey of Object.keys(obj)) {\n        if (typeof obj[childKey] !== 'object' && !isSymbol(obj[childKey]))\n            continue;\n        _symbolList(obj[childKey], list);\n    }\n}\n","/**\n * Copyright (c) 2019-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { mmCIF_Schema } from '../../../mol-io/reader/cif/schema/mmcif.js';\nimport { CifWriter } from '../../../mol-io/writer/cif.js';\nimport { FormatPropertyProvider } from '../common/property.js';\nimport { MmcifFormat } from '../mmcif.js';\nexport { AtomSiteAnisotrop };\nconst Anisotrop = {\n    U: mmCIF_Schema.atom_site_anisotrop.U,\n    U_esd: mmCIF_Schema.atom_site_anisotrop.U_esd\n};\nvar AtomSiteAnisotrop;\n(function (AtomSiteAnisotrop) {\n    AtomSiteAnisotrop.Schema = Anisotrop;\n    AtomSiteAnisotrop.Descriptor = {\n        name: 'atom_site_anisotrop',\n        cifExport: {\n            prefix: '',\n            categories: [{\n                    name: 'atom_site_anisotrop',\n                    instance(ctx) {\n                        const p = AtomSiteAnisotrop.Provider.get(ctx.firstModel);\n                        if (!p)\n                            return CifWriter.Category.Empty;\n                        if (!MmcifFormat.is(ctx.firstModel.sourceData))\n                            return CifWriter.Category.Empty;\n                        // TODO filter to write only data for elements that exist in model\n                        return CifWriter.Category.ofTable(ctx.firstModel.sourceData.data.db.atom_site_anisotrop);\n                    }\n                }]\n        }\n    };\n    AtomSiteAnisotrop.Provider = FormatPropertyProvider.create(AtomSiteAnisotrop.Descriptor);\n    function getElementToAnsiotrop(atomId, ansioId) {\n        const atomIdToElement = new Int32Array(atomId.rowCount);\n        atomIdToElement.fill(-1);\n        for (let i = 0, il = atomId.rowCount; i < il; i++) {\n            atomIdToElement[atomId.value(i)] = i;\n        }\n        const elementToAnsiotrop = new Int32Array(atomId.rowCount);\n        elementToAnsiotrop.fill(-1);\n        for (let i = 0, il = ansioId.rowCount; i < il; ++i) {\n            const ei = atomIdToElement[ansioId.value(i)];\n            if (ei !== -1)\n                elementToAnsiotrop[ei] = i;\n        }\n        return elementToAnsiotrop;\n    }\n    AtomSiteAnisotrop.getElementToAnsiotrop = getElementToAnsiotrop;\n    function getElementToAnsiotropFromLabel(atomLabel, ansioLabel) {\n        const atomLabelToElement = {};\n        for (let i = 0, il = atomLabel.rowCount; i < il; i++) {\n            atomLabelToElement[atomLabel.value(i)] = i;\n        }\n        const elementToAnsiotrop = new Int32Array(atomLabel.rowCount);\n        elementToAnsiotrop.fill(-1);\n        for (let i = 0, il = ansioLabel.rowCount; i < il; ++i) {\n            const ei = atomLabelToElement[ansioLabel.value(i)];\n            if (ei !== undefined)\n                elementToAnsiotrop[ei] = i;\n        }\n        return elementToAnsiotrop;\n    }\n    AtomSiteAnisotrop.getElementToAnsiotropFromLabel = getElementToAnsiotropFromLabel;\n})(AtomSiteAnisotrop || (AtomSiteAnisotrop = {}));\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Adam Midlik <midlik@gmail.com>\n * @author Russell Parker <russell@benchling.com>\n *\n * Implements some browser-only global variables for Node.js environment.\n * These workarounds will also work in browsers as usual.\n */\n/** Determines whether the current code is running in Node.js */\nexport const RUNNING_IN_NODEJS = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n/** Like `File` but works also in Node.js */\nexport const File_ = getFile();\nfunction getFile() {\n    if (typeof File === 'undefined' || RUNNING_IN_NODEJS) {\n        class File_NodeJs {\n            arrayBuffer() { return this.blob.arrayBuffer(); }\n            slice(start, end, contentType) { return this.blob.slice(start, end, contentType); }\n            stream() { return this.blob.stream(); }\n            text() { return this.blob.text(); }\n            bytes() { return this.blob.bytes(); }\n            constructor(fileBits, fileName, options) {\n                var _a;\n                this.blob = new Blob(fileBits, options);\n                // Blob fields\n                this.size = this.blob.size;\n                this.type = this.blob.type;\n                // File fields\n                this.name = fileName;\n                this.lastModified = (_a = options === null || options === void 0 ? void 0 : options.lastModified) !== null && _a !== void 0 ? _a : 0;\n                this.webkitRelativePath = '';\n            }\n        }\n        return File_NodeJs;\n    }\n    else {\n        return File;\n    }\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/** Builds id function returning ids within [firstId, maxId) */\nexport function idFactory(firstId = 0, maxId = Number.MAX_SAFE_INTEGER) {\n    let _nextId = firstId;\n    return () => {\n        const ret = _nextId;\n        _nextId = (_nextId + 1) % maxId;\n        return ret;\n    };\n}\n","/**\n * Copyright (c) 2018-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { mmCIF_Schema } from './mmcif.js';\nimport { Column } from '../../../../mol-data/db.js';\nexport const mmCIF_residueId_schema = {\n    label_comp_id: mmCIF_Schema.atom_site.label_comp_id,\n    label_seq_id: mmCIF_Schema.atom_site.label_seq_id,\n    pdbx_PDB_ins_code: mmCIF_Schema.atom_site.pdbx_PDB_ins_code,\n    label_asym_id: mmCIF_Schema.atom_site.label_asym_id,\n    label_entity_id: mmCIF_Schema.atom_site.label_entity_id,\n    auth_comp_id: mmCIF_Schema.atom_site.auth_atom_id,\n    auth_seq_id: mmCIF_Schema.atom_site.auth_seq_id,\n    auth_asym_id: mmCIF_Schema.atom_site.auth_asym_id\n};\nexport const mmCIF_chemCompBond_schema = {\n    ...mmCIF_Schema.chem_comp_bond,\n    /** Indicates if the bond entry was taken from the protonation variant dictionary */\n    molstar_protonation_variant: Column.Schema.Str()\n};\n/** Has `type` extended with 'ION' and 'LIPID' */\nexport const mmCIF_chemComp_schema = {\n    ...mmCIF_Schema.chem_comp,\n    type: Column.Schema.Aliased(Column.Schema.str)\n};\n","/**\n * Copyright (c) 2020-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { mmCIF_Schema } from '../../../mol-io/reader/cif/schema/mmcif.js';\nimport { Table } from '../../../mol-data/db.js';\nimport { mmCIF_chemComp_schema } from '../../../mol-io/reader/cif/schema/mmcif-extras.js';\nimport { getNormalizedAtomSite } from './util.js';\nexport const BasicSchema = {\n    entry: mmCIF_Schema.entry,\n    struct: mmCIF_Schema.struct,\n    struct_asym: mmCIF_Schema.struct_asym,\n    ihm_model_list: mmCIF_Schema.ihm_model_list,\n    ihm_model_group: mmCIF_Schema.ihm_model_group,\n    ihm_model_group_link: mmCIF_Schema.ihm_model_group_link,\n    entity: mmCIF_Schema.entity,\n    entity_poly: mmCIF_Schema.entity_poly,\n    entity_poly_seq: mmCIF_Schema.entity_poly_seq,\n    pdbx_entity_branch: mmCIF_Schema.pdbx_entity_branch,\n    chem_comp: mmCIF_chemComp_schema,\n    pdbx_chem_comp_identifier: mmCIF_Schema.pdbx_chem_comp_identifier,\n    atom_site: mmCIF_Schema.atom_site,\n    ihm_sphere_obj_site: mmCIF_Schema.ihm_sphere_obj_site,\n    ihm_gaussian_obj_site: mmCIF_Schema.ihm_gaussian_obj_site,\n    pdbx_unobs_or_zero_occ_residues: mmCIF_Schema.pdbx_unobs_or_zero_occ_residues,\n    pdbx_molecule: mmCIF_Schema.pdbx_molecule,\n};\nexport function createBasic(data, normalize = false) {\n    const basic = Object.create(null);\n    for (const name of Object.keys(BasicSchema)) {\n        if (name in data) {\n            basic[name] = data[name];\n        }\n        else {\n            basic[name] = Table.ofUndefinedColumns(BasicSchema[name], 0);\n        }\n    }\n    if (normalize) {\n        basic.atom_site = getNormalizedAtomSite(basic.atom_site);\n    }\n    return basic;\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nconst now = (function () {\n    if (typeof window !== 'undefined' && window.performance) {\n        const perf = window.performance;\n        return () => perf.now();\n    }\n    else if (typeof process !== 'undefined' && process.hrtime !== 'undefined' && typeof process.hrtime === 'function') {\n        return () => {\n            const t = process.hrtime();\n            return t[0] * 1000 + t[1] / 1000000;\n        };\n    }\n    else if (Date.now) {\n        return () => Date.now();\n    }\n    else {\n        return () => +new Date();\n    }\n}());\nfunction formatTimespan(t, includeMsZeroes = true) {\n    if (isNaN(t))\n        return 'n/a';\n    const h = Math.floor(t / (60 * 60 * 1000)), m = Math.floor(t / (60 * 1000) % 60), s = Math.floor(t / 1000 % 60);\n    let ms = Math.floor(t % 1000).toString();\n    while (ms.length < 3)\n        ms = '0' + ms;\n    while (!includeMsZeroes && ms.length > 1 && ms[ms.length - 1] === '0')\n        ms = ms.substr(0, ms.length - 1);\n    if (h > 0)\n        return `${h}h${m}m${s}.${ms}s`;\n    if (m > 0)\n        return `${m}m${s}.${ms}s`;\n    if (s > 0)\n        return `${s}.${ms}s`;\n    return `${t.toFixed(0)}ms`;\n}\nexport { now, formatTimespan };\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from https://github.com/rcsb/mmtf-javascript\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { ChunkedBigString, MAX_STRING_LENGTH } from './string-like.js';\nexport function utf8Write(data, offset, str) {\n    for (let i = 0, l = str.length; i < l; i++) {\n        const codePoint = str.charCodeAt(i);\n        // One byte of UTF-8\n        if (codePoint < 0x80) {\n            data[offset++] = codePoint >>> 0 & 0x7f | 0x00;\n            continue;\n        }\n        // Two bytes of UTF-8\n        if (codePoint < 0x800) {\n            data[offset++] = codePoint >>> 6 & 0x1f | 0xc0;\n            data[offset++] = codePoint >>> 0 & 0x3f | 0x80;\n            continue;\n        }\n        // Three bytes of UTF-8.\n        if (codePoint < 0x10000) {\n            data[offset++] = codePoint >>> 12 & 0x0f | 0xe0;\n            data[offset++] = codePoint >>> 6 & 0x3f | 0x80;\n            data[offset++] = codePoint >>> 0 & 0x3f | 0x80;\n            continue;\n        }\n        // Four bytes of UTF-8\n        if (codePoint < 0x110000) {\n            data[offset++] = codePoint >>> 18 & 0x07 | 0xf0;\n            data[offset++] = codePoint >>> 12 & 0x3f | 0x80;\n            data[offset++] = codePoint >>> 6 & 0x3f | 0x80;\n            data[offset++] = codePoint >>> 0 & 0x3f | 0x80;\n            continue;\n        }\n        throw new Error('bad codepoint ' + codePoint);\n    }\n}\nconst __chars = function () {\n    const data = [];\n    for (let i = 0; i < 1024; i++)\n        data[i] = String.fromCharCode(i);\n    return data;\n}();\nfunction throwError(err) {\n    throw new Error(err);\n}\nfunction _utf8Read(data, offset, length) {\n    const chars = __chars;\n    let str = void 0, chunkOffset = 0;\n    const chunk = [], chunkSize = 512;\n    for (let i = offset, end = offset + length; i < end; i++) {\n        const byte = data[i];\n        if ((byte & 0x80) === 0x00) {\n            // One byte character\n            chunk[chunkOffset++] = chars[byte];\n        }\n        else if ((byte & 0xe0) === 0xc0) {\n            // Two byte character\n            chunk[chunkOffset++] = chars[((byte & 0x0f) << 6) | (data[++i] & 0x3f)];\n        }\n        else if ((byte & 0xf0) === 0xe0) {\n            // Three byte character\n            chunk[chunkOffset++] = String.fromCharCode(((byte & 0x0f) << 12) |\n                ((data[++i] & 0x3f) << 6) |\n                ((data[++i] & 0x3f) << 0));\n        }\n        else if ((byte & 0xf8) === 0xf0) {\n            // Four byte character\n            chunk[chunkOffset++] = String.fromCharCode(((byte & 0x07) << 18) |\n                ((data[++i] & 0x3f) << 12) |\n                ((data[++i] & 0x3f) << 6) |\n                ((data[++i] & 0x3f) << 0));\n        }\n        else\n            throwError('Invalid byte ' + byte.toString(16));\n        if (chunkOffset === chunkSize) {\n            str = str || [];\n            str[str.length] = chunk.join('');\n            chunkOffset = 0;\n        }\n    }\n    if (!str)\n        return chunk.slice(0, chunkOffset).join('');\n    if (chunkOffset > 0) {\n        str[str.length] = chunk.slice(0, chunkOffset).join('');\n    }\n    return str.join('');\n}\nconst utf8Decoder = (typeof TextDecoder !== 'undefined') ? new TextDecoder() : undefined;\n/** Decode UTF8 data. Return as primitive `string` type, or fail if the result is longer than MAX_STRING_LENGTH. */\nexport function utf8Read(data, offset = 0, length = data.length) {\n    if (utf8Decoder) {\n        const input = (offset || length !== data.length) ? data.subarray(offset, offset + length) : data;\n        return utf8Decoder.decode(input);\n    }\n    else {\n        return _utf8Read(data, offset, length);\n    }\n}\n/** Decode UTF8 data, potentially exceeding MAX_STRING_LENGTH. Return as primitive `string` if possible; or as `ChunkedBigString` if the result is longer than MAX_STRING_LENGTH. */\nexport function utf8ReadLong(data, offset = 0, length = data.length) {\n    if (length <= MAX_STRING_LENGTH) {\n        return utf8Read(data, offset, length);\n    }\n    const out = ChunkedBigString.fromUtf8Data(data, offset, offset + length);\n    return out.length <= MAX_STRING_LENGTH ? out.toString() : out;\n}\nexport function utf8ByteCount(str) {\n    let count = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        const codePoint = str.charCodeAt(i);\n        if (codePoint < 0x80) {\n            count += 1;\n            continue;\n        }\n        if (codePoint < 0x800) {\n            count += 2;\n            continue;\n        }\n        if (codePoint < 0x10000) {\n            count += 3;\n            continue;\n        }\n        if (codePoint < 0x110000) {\n            count += 4;\n            continue;\n        }\n        throwError('bad codepoint ' + codePoint);\n    }\n    return count;\n}\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { sortArray, hash3, hash4, createRangeArray } from '../../util.js';\nimport { Interval } from '../interval.js';\nexport const Empty = [];\nexport function ofSingleton(v) { return [v]; }\nexport function ofSortedArray(xs) { return xs; }\nexport function ofUnsortedArray(xs) { sortArray(xs); return xs; }\nexport function ofRange(min, max) {\n    if (max < min)\n        return [];\n    const ret = new Int32Array(max - min + 1);\n    for (let i = min; i <= max; i++)\n        ret[i - min] = i;\n    return ret;\n}\nexport function is(xs) { return xs && (Array.isArray(xs) || !!xs.buffer); }\nexport function isRange(xs) { return xs[xs.length - 1] - xs[0] + 1 === xs.length; }\nexport function start(xs) { return xs[0]; }\nexport function end(xs) { return xs[xs.length - 1] + 1; }\nexport function min(xs) { return xs[0]; }\nexport function max(xs) { return xs[xs.length - 1]; }\nexport function size(xs) { return xs.length; }\nexport function hashCode(xs) {\n    // hash of tuple (size, min, max, mid)\n    const s = xs.length;\n    if (!s)\n        return 0;\n    if (s > 2)\n        return hash4(s, xs[0], xs[s - 1], xs[s >> 1]);\n    return hash3(s, xs[0], xs[s - 1]);\n}\nexport function toString(xs) {\n    const s = xs.length;\n    if (s > 5)\n        return `[${xs[0]}, ${xs[1]}, ..., ${xs[s - 1]}], length ${s}`;\n    return `[${xs.join(', ')}]`;\n}\n/** Returns the index of `x` in `set` or -1 if not found. */\nexport function indexOf(xs, v) {\n    const l = xs.length;\n    return l === 0 ? -1 : xs[0] <= v && v <= xs[l - 1] ? binarySearchRange(xs, v, 0, l) : -1;\n}\nexport function indexOfInInterval(xs, v, bounds) {\n    return indexOfInRange(xs, v, Interval.start(bounds), Interval.end(bounds));\n}\nexport function indexOfInRange(xs, v, s, e) {\n    const l = xs.length;\n    return l === 0 || e <= s ? -1 : xs[s] <= v && v <= xs[e - 1] ? binarySearchRange(xs, v, s, e) : -1;\n}\nexport function has(xs, v) { return indexOf(xs, v) >= 0; }\nexport function getAt(xs, i) { return xs[i]; }\nexport function areEqual(a, b) {\n    if (a === b)\n        return true;\n    let aSize = a.length;\n    if (aSize !== b.length || a[0] !== b[0] || a[aSize - 1] !== b[aSize - 1])\n        return false;\n    if (isRange(a))\n        return true;\n    aSize--;\n    for (let i = 1; i < aSize; i++) {\n        if (a[i] !== b[i])\n            return false;\n    }\n    return true;\n}\n/**\n * Returns 0 if `query` is smaller or equal the first element of `xs`.\n * Returns length of `xs` if `query` is bigger than the last element of `xs`.\n * Otherwise returns the first index where the value of `xs` is equal or bigger than `query`.\n */\nexport function findPredecessorIndex(xs, query) {\n    return binarySearchPredIndexRange(xs, query, 0, xs.length);\n}\n/**\n * Return index of the first element of `xs` within range `bounds` which is greater than or equal to `query`.\n * Return end of `bounds` (exclusive) if all elements in the range are less than `query`.\n*/\nexport function findPredecessorIndexInInterval(xs, query, bounds) {\n    return binarySearchPredIndexRange(xs, query, Interval.start(bounds), Interval.end(bounds));\n}\nexport function findRange(xs, min, max) {\n    return Interval.ofBounds(findPredecessorIndex(xs, min), findPredecessorIndex(xs, max + 1));\n}\nfunction binarySearchRange(xs, value, start, end) {\n    let min = start, max = end - 1;\n    while (min <= max) {\n        // do a linear search if there are only 10 or less items remaining\n        if (min + 11 > max) {\n            for (let i = min; i <= max; i++) {\n                if (value === xs[i])\n                    return i;\n            }\n            return -1;\n        }\n        const mid = (min + max) >> 1;\n        const v = xs[mid];\n        if (value < v)\n            max = mid - 1;\n        else if (value > v)\n            min = mid + 1;\n        else\n            return mid;\n    }\n    return -1;\n}\n/** Return index of the first element within range [start, end) which is greater than or equal to `query`.\n* Return `end` if all elements in the range are less than `query`. */\nfunction binarySearchPredIndexRange(xs, query, start, end) {\n    if (start === end)\n        return start;\n    if (xs[start] >= query)\n        return start;\n    if (xs[end - 1] < query)\n        return end;\n    // Invariants: xs[i] < query for each i < min, xs[i] >= query for each i >= max\n    let min = start, max = end;\n    while (max - min > 4) {\n        const mid = (min + max) >> 1;\n        if (xs[mid] >= query) {\n            max = mid;\n        }\n        else {\n            min = mid + 1;\n        }\n    }\n    // Linear search remaining elements:\n    for (let i = min; i < max; i++) {\n        if (xs[i] >= query) {\n            return i;\n        }\n    }\n    return max;\n}\nexport function areIntersecting(a, b) {\n    if (a === b)\n        return true;\n    let { startI: i, startJ: j, endI, endJ } = getSuitableIntersectionRange(a, b);\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y)\n            i++;\n        else if (x > y)\n            j++;\n        else\n            return true;\n    }\n    return false;\n}\nexport function isSubset(a, b) {\n    if (a === b)\n        return true;\n    const lenB = b.length;\n    let { startI: i, startJ: j, endI, endJ } = getSuitableIntersectionRange(a, b);\n    // must be able to advance by lenB elements\n    if (endJ - j < lenB || endI - i < lenB)\n        return false;\n    let equal = 0;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            i++;\n            j++;\n            equal++;\n        }\n    }\n    return equal === lenB;\n}\nexport function union(a, b) {\n    if (a === b)\n        return a;\n    const lenA = a.length, lenB = b.length;\n    if (lenA === 0)\n        return b;\n    if (lenB === 0)\n        return a;\n    if (a[0] > b[0])\n        return union(b, a);\n    const { startI, startJ, endI, endJ } = getSuitableIntersectionRange(a, b);\n    const commonCount = getCommonCount(a, b, startI, startJ, endI, endJ);\n    // A === B || B is subset of A ==> A\n    if ((commonCount === lenA && commonCount === lenB) || commonCount === lenB)\n        return a;\n    // A is subset of B ===> B\n    if (commonCount === lenA)\n        return b;\n    const indices = new Int32Array(lenA + lenB - commonCount);\n    let i = 0, j = 0, offset = 0;\n    // insert the \"prefixes\"\n    for (i = 0; i < startI; i++)\n        indices[offset++] = a[i];\n    while (j < endJ && a[startI] > b[j])\n        indices[offset++] = b[j++];\n    // insert the common part\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            indices[offset++] = x;\n            i++;\n        }\n        else if (x > y) {\n            indices[offset++] = y;\n            j++;\n        }\n        else {\n            indices[offset++] = x;\n            i++;\n            j++;\n        }\n    }\n    // insert the remaining common part\n    for (; i < endI; i++)\n        indices[offset++] = a[i];\n    for (; j < endJ; j++)\n        indices[offset++] = b[j];\n    // insert the \"tail\"\n    for (; i < lenA; i++)\n        indices[offset++] = a[i];\n    for (; j < lenB; j++)\n        indices[offset++] = b[j];\n    return ofSortedArray(indices);\n}\nexport function intersectionSize(a, b) {\n    if (a === b)\n        return size(a);\n    const { startI, startJ, endI, endJ } = getSuitableIntersectionRange(a, b);\n    return getCommonCount(a, b, startI, startJ, endI, endJ);\n}\nfunction getCommonCount(a, b, startI, startJ, endI, endJ) {\n    let i = startI, j = startJ;\n    let commonCount = 0;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            i++;\n            j++;\n            commonCount++;\n        }\n    }\n    return commonCount;\n}\nexport function intersect(a, b) {\n    if (a === b)\n        return a;\n    const { startI, startJ, endI, endJ } = getSuitableIntersectionRange(a, b);\n    const commonCount = getCommonCount(a, b, startI, startJ, endI, endJ);\n    const lenA = a.length, lenB = b.length;\n    // no common elements\n    if (!commonCount)\n        return Empty;\n    // A === B || B is subset of A ==> B\n    if ((commonCount === lenA && commonCount === lenB) || commonCount === lenB)\n        return b;\n    // A is subset of B ==> A\n    if (commonCount === lenA)\n        return a;\n    const indices = new Int32Array(commonCount);\n    let offset = 0;\n    let i = startI;\n    let j = startJ;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            indices[offset++] = x;\n            i++;\n            j++;\n        }\n    }\n    return ofSortedArray(indices);\n}\nexport function subtract(a, b) {\n    if (a === b)\n        return Empty;\n    const lenA = a.length;\n    const { startI: sI, startJ: sJ, endI, endJ } = getSuitableIntersectionRange(a, b);\n    let i = sI, j = sJ;\n    let commonCount = 0;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            i++;\n            j++;\n            commonCount++;\n        }\n    }\n    // A isnt intersecting B ===> A\n    if (!commonCount)\n        return a;\n    // A === B || A is subset of B ===> Empty\n    if (commonCount >= lenA)\n        return Empty;\n    const indices = new Int32Array(lenA - commonCount);\n    let offset = 0;\n    // insert the \"prefix\"\n    for (let k = 0; k < sI; k++)\n        indices[offset++] = a[k];\n    i = sI;\n    j = sJ;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            indices[offset++] = x;\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            i++;\n            j++;\n        }\n    }\n    // insert the \"tail\"\n    for (; i < lenA; i++)\n        indices[offset++] = a[i];\n    return ofSortedArray(indices);\n}\nexport function deduplicate(xs) {\n    if (xs.length < 2)\n        return xs;\n    let count = 1;\n    for (let i = 0, _i = xs.length - 1; i < _i; i++) {\n        if (xs[i] !== xs[i + 1])\n            count++;\n    }\n    if (count === xs.length)\n        return xs;\n    const ret = new Int32Array(count);\n    let o = 0;\n    for (let i = 0, _i = xs.length - 1; i < _i; i++) {\n        if (xs[i] !== xs[i + 1])\n            ret[o++] = xs[i];\n    }\n    ret[o] = xs[xs.length - 1];\n    return ret;\n}\nexport function indicesOf(a, b) {\n    if (areEqual(a, b))\n        return ofSortedArray(createRangeArray(0, a.length - 1));\n    const { startI: sI, startJ: sJ, endI, endJ } = getSuitableIntersectionRange(a, b);\n    let i = sI, j = sJ;\n    let commonCount = 0;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            i++;\n            j++;\n            commonCount++;\n        }\n    }\n    const lenA = a.length;\n    // no common elements\n    if (!commonCount)\n        return Empty;\n    // A is subset of B ==> A\n    if (commonCount === lenA)\n        return ofSortedArray(createRangeArray(0, a.length - 1));\n    const indices = new Int32Array(commonCount);\n    let offset = 0;\n    i = sI;\n    j = sJ;\n    while (i < endI && j < endJ) {\n        const x = a[i], y = b[j];\n        if (x < y) {\n            i++;\n        }\n        else if (x > y) {\n            j++;\n        }\n        else {\n            indices[offset++] = i;\n            i++;\n            j++;\n        }\n    }\n    return ofSortedArray(indices);\n}\nconst _maxIntRangeRet = { startI: 0, startJ: 0, endI: 0, endJ: 0 };\n// for small sets, just gets the whole range, for large sets does a bunch of binary searches\nfunction getSuitableIntersectionRange(a, b) {\n    const la = a.length, lb = b.length;\n    const ratio = la / lb;\n    if (la >= 128 || lb >= 128 || ratio <= 0.34 || ratio >= 2.99) {\n        _maxIntRangeRet.startI = findPredecessorIndex(a, start(b));\n        _maxIntRangeRet.startJ = findPredecessorIndex(b, start(a));\n        _maxIntRangeRet.endI = findPredecessorIndex(a, end(b));\n        _maxIntRangeRet.endJ = findPredecessorIndex(b, end(a));\n    }\n    else {\n        _maxIntRangeRet.startI = 0;\n        _maxIntRangeRet.startJ = 0;\n        _maxIntRangeRet.endI = la;\n        _maxIntRangeRet.endJ = lb;\n    }\n    return _maxIntRangeRet;\n}\n","/**\n * Copyright (c) 2017-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport * as Impl from './impl/sorted-array.js';\nvar SortedArray;\n(function (SortedArray) {\n    SortedArray.Empty = Impl.Empty;\n    SortedArray.ofUnsortedArray = Impl.ofUnsortedArray;\n    SortedArray.ofSingleton = Impl.ofSingleton;\n    SortedArray.ofSortedArray = Impl.ofSortedArray;\n    /** create sorted array [min, max] (it DOES contain the max value) */\n    SortedArray.ofRange = Impl.ofRange;\n    /** create sorted array [min, max) (it does NOT contain the max value) */\n    SortedArray.ofBounds = (min, max) => Impl.ofRange(min, max - 1);\n    SortedArray.is = Impl.is;\n    SortedArray.isRange = Impl.isRange;\n    SortedArray.has = Impl.has;\n    /** Returns the index of `x` in `set` or -1 if not found. */\n    SortedArray.indexOf = Impl.indexOf;\n    SortedArray.indexOfInInterval = Impl.indexOfInInterval;\n    SortedArray.indexOfInRange = Impl.indexOfInRange;\n    /** Returns `array[0]` */\n    SortedArray.start = Impl.start;\n    /** Returns `array[array.length - 1] + 1` */\n    SortedArray.end = Impl.end;\n    SortedArray.min = Impl.min;\n    SortedArray.max = Impl.max;\n    SortedArray.size = Impl.size;\n    SortedArray.hashCode = Impl.hashCode;\n    SortedArray.toString = Impl.toString;\n    SortedArray.areEqual = Impl.areEqual;\n    SortedArray.areIntersecting = Impl.areIntersecting;\n    SortedArray.isSubset = Impl.isSubset;\n    SortedArray.union = Impl.union;\n    SortedArray.intersect = Impl.intersect;\n    SortedArray.subtract = Impl.subtract;\n    SortedArray.findPredecessorIndex = Impl.findPredecessorIndex;\n    SortedArray.findPredecessorIndexInInterval = Impl.findPredecessorIndexInInterval;\n    SortedArray.findRange = Impl.findRange;\n    SortedArray.intersectionSize = Impl.intersectionSize;\n    SortedArray.deduplicate = Impl.deduplicate;\n    /** Returns indices of xs in the array. E.g. indicesOf([10, 11, 12], [10, 12]) ==> [0, 2] */\n    SortedArray.indicesOf = Impl.indicesOf;\n})(SortedArray || (SortedArray = {}));\nexport { SortedArray };\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { OrderedSet, SortedArray, Interval } from '../../../../mol-data/int.js';\nimport { Structure } from '../structure.js';\nimport { hashFnv32a, hash2 } from '../../../../mol-data/util.js';\nimport { SortedRanges } from '../../../../mol-data/int/sorted-ranges.js';\nimport { Loci } from './loci.js';\nimport { MolScriptBuilder as MS } from '../../../../mol-script/language/builder.js';\nimport { StructureSelection } from '../../query.js';\nimport { Schema } from './schema.js';\nexport var Bundle;\n(function (Bundle) {\n    Bundle.Empty = { hash: -1, elements: [] };\n    function fromSubStructure(parent, structure) {\n        return fromLoci(StructureSelection.toLociWithSourceUnits(StructureSelection.Singletons(parent, structure)));\n    }\n    Bundle.fromSubStructure = fromSubStructure;\n    function fromSelection(selection) {\n        return fromLoci(StructureSelection.toLociWithSourceUnits(selection));\n    }\n    Bundle.fromSelection = fromSelection;\n    function fromExpression(structure, expression, queryContext) {\n        return fromLoci(Loci.fromExpression(structure, expression, queryContext));\n    }\n    Bundle.fromExpression = fromExpression;\n    function fromQuery(structure, query, queryContext) {\n        return fromLoci(Loci.fromQuery(structure, query, queryContext));\n    }\n    Bundle.fromQuery = fromQuery;\n    function fromSchema(structure, schema, queryContext) {\n        return Schema.toBundle(structure, schema, queryContext);\n    }\n    Bundle.fromSchema = fromSchema;\n    function fromLoci(loci) {\n        const _elements = [];\n        for (const e of loci.elements) {\n            const { unit, indices } = e;\n            if (OrderedSet.size(indices) === 0)\n                continue;\n            const ranges = [];\n            const set = [];\n            if (OrderedSet.isInterval(indices)) {\n                if (OrderedSet.size(indices) === 1) {\n                    set.push(Interval.min(indices));\n                }\n                else {\n                    ranges.push(Interval.min(indices), Interval.max(indices));\n                }\n            }\n            else {\n                let i = 0;\n                const len = indices.length;\n                while (i < len) {\n                    const start = i;\n                    i++;\n                    while (i < len && indices[i - 1] + 1 === indices[i])\n                        i++;\n                    const end = i;\n                    if (end - start > 2) {\n                        ranges.push(indices[start], indices[end - 1]);\n                    }\n                    else {\n                        for (let j = start; j < end; j++) {\n                            set[set.length] = indices[j];\n                        }\n                    }\n                }\n            }\n            _elements.push({\n                unit,\n                set: SortedArray.ofSortedArray(set),\n                ranges: SortedRanges.ofSortedRanges(ranges)\n            });\n        }\n        const elementGroups = new Map();\n        for (let i = 0, il = _elements.length; i < il; ++i) {\n            const e = _elements[i];\n            const key = hash2(hashFnv32a(e.ranges), hashFnv32a(e.set));\n            if (elementGroups.has(key)) {\n                const { groupedUnits } = elementGroups.get(key);\n                if (groupedUnits.has(e.unit.invariantId)) {\n                    groupedUnits.get(e.unit.invariantId).push(e.unit.id);\n                }\n                else {\n                    groupedUnits.set(e.unit.invariantId, [e.unit.id]);\n                }\n            }\n            else {\n                const groupedUnits = new Map();\n                groupedUnits.set(e.unit.invariantId, [e.unit.id]);\n                elementGroups.set(key, { groupedUnits, set: e.set, ranges: e.ranges });\n            }\n        }\n        const elements = [];\n        elementGroups.forEach(e => {\n            const groupedUnits = [];\n            e.groupedUnits.forEach(g => groupedUnits.push(SortedArray.ofUnsortedArray(g)));\n            groupedUnits.sort((a, b) => a[0] - b[0]); // sort by first unit id of each group\n            elements.push({ groupedUnits, set: e.set, ranges: e.ranges });\n        });\n        return { hash: loci.structure.hashCode, elements };\n    }\n    Bundle.fromLoci = fromLoci;\n    function getUnitsFromIds(unitIds, structure) {\n        const units = [];\n        for (let i = 0, il = unitIds.length; i < il; ++i) {\n            const unitId = unitIds[i];\n            if (structure.unitMap.has(unitId))\n                units.push(structure.unitMap.get(unitId));\n        }\n        return units;\n    }\n    function toLoci(bundle, structure) {\n        if (bundle.hash !== -1 && bundle.hash !== structure.hashCode) {\n            new Error('Bundle not compatible with given structure');\n        }\n        const elements = [];\n        for (const e of bundle.elements) {\n            for (const g of e.groupedUnits) {\n                const units = getUnitsFromIds(g, structure);\n                if (units.length === 0)\n                    continue;\n                let indices;\n                if (e.ranges.length === 0) {\n                    indices = e.set;\n                }\n                else if (e.set.length === 0) {\n                    if (e.ranges.length === 2) {\n                        indices = Interval.ofRange(e.ranges[0], e.ranges[1]);\n                    }\n                    else {\n                        const _indices = new Int32Array(SortedRanges.size(e.ranges));\n                        SortedRanges.forEach(e.ranges, (v, i) => _indices[i] = v);\n                        indices = SortedArray.ofSortedArray(_indices);\n                    }\n                }\n                else {\n                    const rangesSize = SortedRanges.size(e.ranges);\n                    const _indices = new Int32Array(e.set.length + rangesSize);\n                    SortedRanges.forEach(e.ranges, (v, i) => _indices[i] = v);\n                    _indices.set(e.set, rangesSize);\n                    indices = SortedArray.ofUnsortedArray(_indices); // requires sort\n                }\n                for (const unit of units) {\n                    elements.push({ unit, indices });\n                }\n            }\n        }\n        return Loci(structure, elements);\n    }\n    Bundle.toLoci = toLoci;\n    function toStructure(bundle, parent) {\n        if (bundle.hash !== -1 && bundle.hash !== parent.hashCode) {\n            new Error('Bundle not compatible with given structure');\n        }\n        const units = [];\n        for (const e of bundle.elements) {\n            for (const g of e.groupedUnits) {\n                const _units = getUnitsFromIds(g, parent);\n                if (_units.length === 0)\n                    continue;\n                const ue = _units[0].elements; // the elements are grouped by unit.invariantId\n                const rangesSize = SortedRanges.size(e.ranges);\n                const setSize = e.set.length;\n                const _indices = new Int32Array(setSize + rangesSize);\n                let indices;\n                if (rangesSize === 0) {\n                    for (let i = 0, il = setSize; i < il; ++i) {\n                        _indices[i] = ue[e.set[i]];\n                    }\n                    indices = SortedArray.ofSortedArray(_indices);\n                }\n                else if (setSize === 0) {\n                    SortedRanges.forEach(e.ranges, (v, i) => _indices[i] = ue[v]);\n                    indices = SortedArray.ofSortedArray(_indices);\n                }\n                else {\n                    if (SortedArray.min(e.set) > SortedRanges.max(e.ranges)) {\n                        SortedRanges.forEach(e.ranges, (v, i) => _indices[i] = ue[v]);\n                        for (let i = 0, il = setSize; i < il; ++i) {\n                            _indices[i + rangesSize] = ue[e.set[i]];\n                        }\n                        indices = SortedArray.ofSortedArray(_indices);\n                    }\n                    else if (SortedRanges.min(e.ranges) > SortedArray.max(e.set)) {\n                        for (let i = 0, il = setSize; i < il; ++i) {\n                            _indices[i] = ue[e.set[i]];\n                        }\n                        SortedRanges.forEach(e.ranges, (v, i) => _indices[i + setSize] = ue[v]);\n                        indices = SortedArray.ofSortedArray(_indices);\n                    }\n                    else {\n                        SortedRanges.forEach(e.ranges, (v, i) => _indices[i] = ue[v]);\n                        for (let i = 0, il = setSize; i < il; ++i) {\n                            _indices[i + rangesSize] = ue[e.set[i]];\n                        }\n                        indices = SortedArray.ofUnsortedArray(_indices); // requires sort\n                    }\n                }\n                for (const unit of _units) {\n                    units.push(unit.getChild(indices));\n                }\n            }\n        }\n        return Structure.create(units, { parent });\n    }\n    Bundle.toStructure = toStructure;\n    function elementToExpression(e) {\n        return MS.internal.generator.bundleElement({\n            groupedUnits: MS.core.type.list(e.groupedUnits.map(u => MS.core.type.list(u))),\n            ranges: MS.core.type.list(e.ranges),\n            set: MS.core.type.list(e.set),\n        });\n    }\n    function toExpression(bundle) {\n        return MS.internal.generator.bundle({\n            elements: MS.core.type.list(bundle.elements.map(elementToExpression))\n        });\n    }\n    Bundle.toExpression = toExpression;\n    function areEqual(a, b) {\n        if (a.elements.length !== b.elements.length)\n            return false;\n        for (let i = 0, il = a.elements.length; i < il; ++i) {\n            const elementA = a.elements[i], elementB = b.elements[i];\n            if (elementA.groupedUnits.length !== elementB.groupedUnits.length)\n                return false;\n            for (let j = 0, jl = elementB.groupedUnits.length; j < jl; ++j) {\n                if (!SortedArray.areEqual(elementA.groupedUnits[j], elementB.groupedUnits[j]))\n                    return false;\n            }\n            if (!SortedArray.areEqual(elementA.set, elementB.set))\n                return false;\n            if (!SortedRanges.areEqual(elementA.ranges, elementB.ranges))\n                return false;\n        }\n        return true;\n    }\n    Bundle.areEqual = areEqual;\n})(Bundle || (Bundle = {}));\n","/**\n * Copyright (c) 2017-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Column } from '../../../../../mol-data/db.js';\nimport { mmCIF_Schema as mmCIF } from '../../../../../mol-io/reader/cif/schema/mmcif.js';\nexport const AtomsSchema = {\n    /**\n     * The chemical element of this atom site.\n     * For mmCIF files, this points to atom_type.symbol in the ATOM_TYPE category.\n     */\n    type_symbol: Column.Schema.Aliased(mmCIF.atom_site.type_symbol),\n    /**\n     * A component of the identifier for this atom site.\n     * This is a standardized name for the atom within its residue.\n     * For mmCIF files, this points to chem_comp_atom.atom_id in the CHEM_COMP_ATOM category.\n     */\n    label_atom_id: mmCIF.atom_site.label_atom_id,\n    /**\n     * An alternative identifier for label_atom_id that may be provided by an author\n     * in order to match the identification used in the publication that describes the structure.\n     */\n    auth_atom_id: mmCIF.atom_site.auth_atom_id,\n    /**\n     * A component of the identifier for this atom site.\n     * Identifies an alternative conformation for this atom site.\n     */\n    label_alt_id: mmCIF.atom_site.label_alt_id,\n    /**\n     * A component of the identifier for this atom site.\n     * For mmCIF files, this points to chem_comp.id in the CHEM_COMP category.\n     */\n    label_comp_id: mmCIF.atom_site.label_comp_id,\n    /**\n     * An alternative identifier for atom_site.label_comp_id that may be provided by an author\n     * in order to match the identification used in the publication that describes the structure.\n     */\n    auth_comp_id: mmCIF.atom_site.auth_comp_id,\n    /**\n     * The net integer charge assigned to this atom.\n     * This is the formal charge assignment normally found in chemical diagrams.\n     */\n    pdbx_formal_charge: mmCIF.atom_site.pdbx_formal_charge,\n    // id, occupancy and B_iso_or_equiv are part of conformation\n};\nexport const ResiduesSchema = {\n    /**\n     * The group of atoms to which the atom site belongs. This data item is provided for\n     * compatibility with the original Protein Data Bank format, and only for that purpose.\n     */\n    group_PDB: mmCIF.atom_site.group_PDB,\n    /**\n     * For mmCIF files, this points to entity_poly_seq.num in the ENTITY_POLY_SEQ category.\n     */\n    label_seq_id: mmCIF.atom_site.label_seq_id,\n    /**\n     * An alternative identifier for atom_site.label_seq_id that may be provided by an author\n     * in order to match the identification used in the publication that describes the structure.\n     */\n    auth_seq_id: mmCIF.atom_site.auth_seq_id,\n    /**\n     * PDB insertion code.\n     */\n    pdbx_PDB_ins_code: mmCIF.atom_site.pdbx_PDB_ins_code,\n    // comp_id is part of atoms because of microheterogeneity\n};\nexport const ChainsSchema = {\n    /**\n     * A component of the identifier for this atom site.\n     * For mmCIF files, this points to struct_asym.id in the STRUCT_ASYM category.\n     */\n    label_asym_id: mmCIF.atom_site.label_asym_id,\n    /**\n     * An alternative identifier for atomsite.label_asym_id that may be provided by an author\n     * in order to match the identification used in the publication that describes the structure.\n     */\n    auth_asym_id: mmCIF.atom_site.auth_asym_id,\n    /**\n     * For mmCIF files, this points to _entity.id in the ENTITY category.\n     */\n    label_entity_id: mmCIF.atom_site.label_entity_id\n};\nexport var AtomicIndex;\n(function (AtomicIndex) {\n    function EmptyResidueKey() { return { label_entity_id: '', label_asym_id: '', auth_seq_id: 0, pdbx_PDB_ins_code: void 0 }; }\n    AtomicIndex.EmptyResidueKey = EmptyResidueKey;\n})(AtomicIndex || (AtomicIndex = {}));\nexport var AtomicHierarchy;\n(function (AtomicHierarchy) {\n    /** Start residue inclusive */\n    function chainStartResidueIndex(segs, cI) {\n        return segs.residueAtomSegments.index[segs.chainAtomSegments.offsets[cI]];\n    }\n    AtomicHierarchy.chainStartResidueIndex = chainStartResidueIndex;\n    /** End residue exclusive */\n    function chainEndResidueIndexExcl(segs, cI) {\n        return segs.residueAtomSegments.index[segs.chainAtomSegments.offsets[cI + 1] - 1] + 1;\n    }\n    AtomicHierarchy.chainEndResidueIndexExcl = chainEndResidueIndexExcl;\n    function chainResidueCount(segs, cI) {\n        return chainEndResidueIndexExcl(segs, cI) - chainStartResidueIndex(segs, cI);\n    }\n    AtomicHierarchy.chainResidueCount = chainResidueCount;\n    function residueFirstAtomIndex(hierarchy, rI) {\n        return hierarchy.residueAtomSegments.offsets[rI];\n    }\n    AtomicHierarchy.residueFirstAtomIndex = residueFirstAtomIndex;\n    function atomChainIndex(hierarchy, eI) {\n        return hierarchy.chainAtomSegments.index[eI];\n    }\n    AtomicHierarchy.atomChainIndex = atomChainIndex;\n    function residueChainIndex(hierarchy, rI) {\n        return hierarchy.chainAtomSegments.index[hierarchy.residueAtomSegments.offsets[rI]];\n    }\n    AtomicHierarchy.residueChainIndex = residueChainIndex;\n})(AtomicHierarchy || (AtomicHierarchy = {}));\n","/**\n * Copyright (c) 2019-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/**\n * on node `process.env.NODE_ENV` is available, in webpack build it is automatically set\n * by the DefinePlugin to the webpack `mode` value\n */\nlet isProductionMode = function () {\n    try {\n        return process.env.NODE_ENV === 'production';\n    }\n    catch (_a) {\n        return false;\n    }\n}();\n/**\n * set to true to enable more comprehensive checks and assertions,\n * mostly used in `mol-gl` and in valence-model calculation\n */\nlet isDebugMode = function getIsDebug() {\n    try {\n        const val = process.env.DEBUG;\n        return val === '*' || val === 'molstar';\n    }\n    catch (_a) {\n        return false;\n    }\n}();\n/**\n * set to true to gather timings, mostly used in `mol-gl`\n */\nlet isTimingMode = false;\nexport { isProductionMode, isDebugMode, isTimingMode };\nexport function setProductionMode(value) {\n    if (typeof value !== 'undefined')\n        isProductionMode = value;\n}\nexport function setDebugMode(value) {\n    if (typeof value !== 'undefined')\n        isDebugMode = value;\n}\nexport function setTimingMode(value) {\n    if (typeof value !== 'undefined')\n        isTimingMode = value;\n}\nconst consoleStatsProviders = [];\nexport function addConsoleStatsProvider(p) {\n    if (!consoleStatsProviders.includes(p))\n        consoleStatsProviders.push(p);\n}\nexport function removeConsoleStatsProvider(p) {\n    const idx = consoleStatsProviders.indexOf(p);\n    if (idx !== -1)\n        consoleStatsProviders.splice(idx, 1);\n}\nexport function consoleStats() {\n    for (const p of consoleStatsProviders) {\n        p();\n    }\n}\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { IntTuple as Tuple } from '../tuple.js';\nexport const Empty = Tuple.Zero;\nexport function ofRange(min, max) { return max < min ? Tuple.create(min, min) : Tuple.create(min, max + 1); }\nexport function ofBounds(start, end) { return end <= start ? Tuple.create(start, start) : Tuple.create(start, end); }\nexport function ofLength(length) { return length < 0 ? Tuple.create(0, 0) : Tuple.create(0, length); }\nexport const is = Tuple.is;\nexport const start = Tuple.fst;\nexport const end = Tuple.snd;\nexport const min = Tuple.fst;\nexport function max(i) { return Tuple.snd(i) - 1; }\nexport const size = Tuple.diff;\nexport const hashCode = Tuple.hashCode;\nexport const toString = Tuple.toString;\nexport function has(int, v) { return Tuple.fst(int) <= v && v < Tuple.snd(int); }\n/** Returns the index of `x` in `set` or -1 if not found. */\nexport function indexOf(int, x) { const m = start(int); return x >= m && x < end(int) ? x - m : -1; }\nexport function getAt(int, i) { return Tuple.fst(int) + i; }\nexport const areEqual = Tuple.areEqual;\nexport function areIntersecting(a, b) {\n    const sa = size(a), sb = size(b);\n    if (sa === 0 && sb === 0)\n        return true;\n    return sa > 0 && sb > 0 && max(a) >= min(b) && min(a) <= max(b);\n}\nexport function isSubInterval(a, b) {\n    if (!size(a))\n        return size(b) === 0;\n    if (!size(b))\n        return true;\n    return start(a) <= start(b) && end(a) >= end(b);\n}\nexport function findPredecessorIndex(int, v) {\n    const s = start(int);\n    if (v <= s)\n        return 0;\n    const e = end(int);\n    if (v >= e)\n        return e - s;\n    return v - s;\n}\nexport function findPredecessorIndexInInterval(int, v, bounds) {\n    const bS = start(bounds);\n    const s = start(int);\n    if (v <= bS + s)\n        return bS;\n    const bE = end(bounds);\n    if (v >= bE + s)\n        return bE;\n    return v - s;\n}\nexport function findRange(int, min, max) {\n    return ofBounds(findPredecessorIndex(int, min), findPredecessorIndex(int, max + 1));\n}\nexport function intersect(a, b) {\n    if (!areIntersecting(a, b))\n        return Empty;\n    return ofBounds(Math.max(start(a), start(b)), Math.min(end(a), end(b)));\n}\nexport function intersectionSize(a, b) {\n    return size(findRange(a, min(b), max(b)));\n}\nexport function offset(int, offset) {\n    return Tuple.create(start(int) + offset, end(int) + offset);\n}\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport * as Impl from './impl/interval.js';\nvar Interval;\n(function (Interval) {\n    Interval.Empty = Impl.Empty;\n    Interval.ofSingleton = (v) => Impl.ofRange(v, v);\n    /** Create interval from range [min, max] */\n    Interval.ofRange = Impl.ofRange;\n    /** Create interval from bounds [start, end), i.e. [start, end - 1] */\n    Interval.ofBounds = Impl.ofBounds;\n    /** Create interval from length [0, length), i.e. [0, length - 1] */\n    Interval.ofLength = Impl.ofLength;\n    Interval.is = Impl.is;\n    /** Test if a value is within the bounds of the interval */\n    Interval.has = Impl.has;\n    /** Returns the index of `x` in `set` or -1 if not found. */\n    Interval.indexOf = Impl.indexOf;\n    Interval.getAt = Impl.getAt;\n    /** Start value of the Interval<T>, same as min value */\n    Interval.start = Impl.start;\n    /** End value of the Interval<T>, same as max + 1 */\n    Interval.end = Impl.end;\n    /** Min value of the Interval<T>, same as start value */\n    Interval.min = Impl.min;\n    /** Max value of the Interval<T>, same as end - 1 */\n    Interval.max = Impl.max;\n    /** Number of values in the interval */\n    Interval.size = Impl.size;\n    /** Hash code describing the interval */\n    Interval.hashCode = Impl.hashCode;\n    /** String representation of the interval */\n    Interval.toString = Impl.toString;\n    /** Test if two intervals are identical */\n    Interval.areEqual = Impl.areEqual;\n    /** Test if two intervals are intersecting, i.e. their bounds overlap */\n    Interval.areIntersecting = Impl.areIntersecting;\n    /** Test if interval b is fully included in interval a */\n    Interval.isSubInterval = Impl.isSubInterval;\n    Interval.findPredecessorIndex = Impl.findPredecessorIndex;\n    Interval.findPredecessorIndexInInterval = Impl.findPredecessorIndexInInterval;\n    Interval.findRange = Impl.findRange;\n    /** Size of the intersection of the two intervals */\n    Interval.intersectionSize = Impl.intersectionSize;\n    /** Get a new interval that is the intersection of the two intervals */\n    Interval.intersect = Impl.intersect;\n    /** Get new interval that is shifted by the given offset */\n    Interval.offset = Impl.offset;\n})(Interval || (Interval = {}));\nexport { Interval };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport class SynchronousRuntimeContext {\n    constructor() {\n        this.shouldUpdate = false;\n        this.isSynchronous = true;\n    }\n    update(progress, dontNotify) { }\n}\nexport const SyncRuntimeContext = new SynchronousRuntimeContext();\n","/**\n * Copyright (c) 2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Code-generated ion names params file. Names extracted from CCD components.\n *\n * @author molstar/cli/chem-comp-dict/create-saccharides\n */\nexport const SaccharideNames = new Set(['145', '147', '149', '289', '291', '293', '445', '475', '491', '510', '604', '045', '05L', '07E', '07Y', '08U', '09X', '0AT', '0BD', '0H0', '0HX', '0LP', '0MK', '0NZ', '0TS', '0UB', '0V4', '0WK', '0XY', '0YT', '10M', '12E', '14T', '15L', '16F', '16G', '16O', '17T', '18D', '18O', '18T', '1AR', '1BW', '1CF', '1FT', '1GL', '1GN', '1JB', '1LL', '1NA', '1S3', '1S4', '1SD', '1X4', '20S', '20X', '22O', '22S', '23V', '24S', '25E', '26M', '26O', '26Q', '26R', '26V', '26W', '26Y', '27C', '2DG', '2DR', '2F8', '2FG', '2FL', '2FP', '2GL', '2GS', '2H5', '2HA', '2M4', '2M5', '2M8', '2OS', '2SI', '2WP', '2WS', '32O', '34V', '38J', '3BU', '3CM', '3DO', '3DY', '3FM', '3GR', '3HD', '3J3', '3J4', '3LJ', '3LR', '3MF', '3MG', '3MK', '3R3', '3S6', '3SA', '3YW', '40J', '42D', '44S', '46D', '46M', '46Z', '48Z', '49A', '49S', '49T', '49V', '4AM', '4CQ', '4GC', '4GL', '4GP', '4JA', '4N2', '4NN', '4QY', '4R1', '4RS', '4SG', '4U0', '4U1', '4U2', '4UZ', '4V5', '50A', '51N', '56N', '57S', '5DI', '5GF', '5GO', '5II', '5KQ', '5KS', '5KT', '5KV', '5L2', '5L3', '5LS', '5LT', '5MM', '5N6', '5QP', '5RP', '5SA', '5SP', '5TH', '5TJ', '5TK', '5TM', '61J', '62I', '64K', '66O', '6BG', '6C2', '6DM', '6GB', '6GP', '6GR', '6K3', '6KH', '6KL', '6KS', '6KU', '6KW', '6LA', '6LS', '6LW', '6MJ', '6MN', '6PG', '6PY', '6PZ', '6S2', '6SA', '6UD', '6Y6', '6YR', '6ZC', '73E', '79J', '7CV', '7D1', '7GP', '7JZ', '7K2', '7K3', '7NU', '7SA', '83Y', '89Y', '8B7', '8B9', '8EX', '8GA', '8GG', '8GP', '8I4', '8LM', '8LR', '8OQ', '8PK', '8S0', '8YV', '95Z', '96O', '98U', '9AM', '9C1', '9CD', '9GP', '9KJ', '9MR', '9OK', '9PG', '9QG', '9QZ', '9RN', '9S7', '9SG', '9SJ', '9SM', '9SP', '9T1', '9T7', '9VP', '9WJ', '9WN', '9WZ', '9YW', 'A0K', 'A1AIO', 'A1APB', 'A1APC', 'A1APD', 'A1CCV', 'A1CCW', 'A1EAX', 'A1EFW', 'A1EGT', 'A1EGV', 'A1EGW', 'A1EGX', 'A1EGY', 'A1EJ0', 'A1EJ2', 'A1EKO', 'A1EN6', 'A1H03', 'A1H0P', 'A1H0Z', 'A1H10', 'A1H1B', 'A1H1F', 'A1H1V', 'A1I9U', 'A1ID6', 'A1IH4', 'A1IZL', 'A1JAQ', 'A1L1P', 'A1Q', 'A2G', 'A5C', 'A6P', 'AAL', 'AAO', 'ABC', 'ABD', 'ABE', 'ABF', 'ABL', 'AC1', 'ACG', 'ACR', 'ACX', 'ADA', 'ADG', 'ADR', 'AF1', 'AFD', 'AFL', 'AFO', 'AFP', 'AFR', 'AGC', 'AGH', 'AGL', 'AGR', 'AH2', 'AH8', 'AHG', 'AHM', 'AHR', 'AIG', 'ALL', 'ALX', 'AMG', 'AMN', 'AMU', 'AMV', 'ANA', 'AOG', 'AOS', 'AQA', 'ARA', 'ARB', 'ARE', 'ARI', 'ARW', 'ASC', 'ASG', 'ASO', 'AXP', 'AXR', 'AY9', 'AZC', 'B0D', 'B16', 'B1H', 'B1N', 'B2G', 'B4G', 'B6D', 'B7G', 'B8D', 'B9D', 'BBK', 'BBV', 'BCD', 'BCW', 'BDF', 'BDG', 'BDP', 'BDR', 'BDZ', 'BEM', 'BFN', 'BFP', 'BG6', 'BG8', 'BGC', 'BGL', 'BGN', 'BGP', 'BGS', 'BHG', 'BM3', 'BM7', 'BMA', 'BMX', 'BND', 'BNG', 'BNX', 'BO1', 'BOG', 'BQY', 'BRI', 'BS7', 'BTG', 'BTU', 'BW3', 'BWG', 'BXF', 'BXP', 'BXX', 'BXY', 'BZD', 'C3B', 'C3G', 'C3X', 'C4B', 'C4W', 'C4X', 'C5X', 'CAP', 'CBF', 'CBI', 'CBK', 'CDR', 'CE5', 'CE6', 'CE8', 'CEG', 'CEX', 'CEY', 'CEZ', 'CGF', 'CJB', 'CKB', 'CKP', 'CNP', 'CR1', 'CR6', 'CRA', 'CT3', 'CTO', 'CTR', 'CTT', 'D0N', 'D1M', 'D5E', 'D6G', 'DAF', 'DAG', 'DAN', 'DDA', 'DDB', 'DDL', 'DEG', 'DEL', 'DFR', 'DFX', 'DG0', 'DGC', 'DGD', 'DGM', 'DGO', 'DGS', 'DGU', 'DIG', 'DJB', 'DJE', 'DK4', 'DKX', 'DKZ', 'DL6', 'DLD', 'DLF', 'DLG', 'DMU', 'DNO', 'DO8', 'DOM', 'DP5', 'DPC', 'DQQ', 'DQR', 'DR2', 'DR3', 'DR4', 'DR5', 'DRI', 'DSR', 'DT6', 'DVC', 'DYM', 'E3M', 'E4P', 'E5G', 'EAG', 'EBG', 'EBQ', 'ED6', 'EEN', 'EEQ', 'EGA', 'EJT', 'EMP', 'EMZ', 'EPG', 'EQP', 'EQV', 'ERE', 'ERI', 'ETT', 'EUS', 'F1P', 'F1X', 'F55', 'F58', 'F6P', 'F8X', 'FBP', 'FCA', 'FCB', 'FCT', 'FDP', 'FDQ', 'FFC', 'FFX', 'FIF', 'FIX', 'FK9', 'FKD', 'FMF', 'FMO', 'FNG', 'FNY', 'FRU', 'FSA', 'FSI', 'FSM', 'FSR', 'FSW', 'FU4', 'FUB', 'FUC', 'FUD', 'FUF', 'FUL', 'FUY', 'FVQ', 'FX1', 'FYJ', 'G0S', 'G16', 'G1P', 'G20', 'G28', 'G2F', 'G3F', 'G3I', 'G4D', 'G4S', 'G6D', 'G6P', 'G6S', 'G7P', 'G8Z', 'GAA', 'GAC', 'GAD', 'GAF', 'GAL', 'GAT', 'GBH', 'GC1', 'GC4', 'GC9', 'GCB', 'GCD', 'GCN', 'GCO', 'GCS', 'GCT', 'GCU', 'GCV', 'GCW', 'GDA', 'GDL', 'GE1', 'GE3', 'GFP', 'GIV', 'GL0', 'GL1', 'GL2', 'GL4', 'GL5', 'GL6', 'GL7', 'GL9', 'GLA', 'GLB', 'GLC', 'GLD', 'GLF', 'GLG', 'GLO', 'GLP', 'GLS', 'GLT', 'GLW', 'GM0', 'GMB', 'GMH', 'GMT', 'GMZ', 'GN1', 'GN4', 'GNS', 'GNX', 'GP0', 'GP1', 'GP4', 'GPH', 'GPK', 'GPM', 'GPO', 'GPQ', 'GPU', 'GPV', 'GPW', 'GQ1', 'GRF', 'GRX', 'GS1', 'GS4', 'GS9', 'GSA', 'GSD', 'GTE', 'GTH', 'GTK', 'GTM', 'GTR', 'GU0', 'GU1', 'GU2', 'GU3', 'GU4', 'GU5', 'GU6', 'GU8', 'GU9', 'GUF', 'GUL', 'GUP', 'GUZ', 'GXL', 'GXV', 'GYE', 'GYG', 'GYP', 'GYU', 'GYV', 'GZL', 'H1M', 'H1S', 'H2P', 'H3S', 'H53', 'H6Q', 'H6Z', 'HBZ', 'HD4', 'HDL', 'HLA', 'HMS', 'HNV', 'HNW', 'HSG', 'HSH', 'HSJ', 'HSQ', 'HSR', 'HSU', 'HSX', 'HSY', 'HSZ', 'HTG', 'HTM', 'HVC', 'I57', 'IAB', 'IDC', 'IDF', 'IDG', 'IDR', 'IDS', 'IDT', 'IDU', 'IDX', 'IDY', 'IEM', 'IN1', 'IPT', 'ISD', 'ISL', 'ISX', 'IVG', 'IXD', 'J5B', 'JFZ', 'JHM', 'JLT', 'JRV', 'JS2', 'JSV', 'JV4', 'JVA', 'JVS', 'JZR', 'K5B', 'K99', 'KBA', 'KBG', 'KD5', 'KDA', 'KDB', 'KDD', 'KDE', 'KDF', 'KDM', 'KDN', 'KDO', 'KDR', 'KFN', 'KG1', 'KGM', 'KHP', 'KME', 'KO1', 'KO2', 'KOT', 'KQC', 'KTU', 'L1L', 'L6N', 'L6S', 'L6T', 'LAG', 'LAH', 'LAI', 'LAK', 'LAO', 'LAT', 'LB2', 'LBS', 'LBT', 'LCN', 'LDY', 'LEC', 'LER', 'LFC', 'LFR', 'LGC', 'LGU', 'LKA', 'LKS', 'LM2', 'LMO', 'LMT', 'LMU', 'LNV', 'LOG', 'LOX', 'LPK', 'LRH', 'LSM', 'LTG', 'LTM', 'LVO', 'LVZ', 'LXB', 'LXC', 'LXZ', 'LZ0', 'M1F', 'M1P', 'M2F', 'M3M', 'M3N', 'M55', 'M6D', 'M6P', 'M7B', 'M7P', 'M8C', 'MA1', 'MA2', 'MA3', 'MA8', 'MAB', 'MAF', 'MAG', 'MAL', 'MAN', 'MAT', 'MAV', 'MAW', 'MBE', 'MBF', 'MBG', 'MCU', 'MDA', 'MDP', 'MFA', 'MFB', 'MFU', 'MG5', 'MGA', 'MGC', 'MGL', 'MGS', 'MJJ', 'MLB', 'MLR', 'MMA', 'MMN', 'MN0', 'MNA', 'MQG', 'MQT', 'MRH', 'MRP', 'MSX', 'MTT', 'MUB', 'MUG', 'MUR', 'MVP', 'MXY', 'MXZ', 'MYG', 'N1L', 'N3U', 'N9S', 'NA1', 'NAA', 'NAG', 'NBG', 'NBX', 'NBY', 'NDG', 'NED', 'NFG', 'NG1', 'NG6', 'NGA', 'NGB', 'NGC', 'NGE', 'NGF', 'NGK', 'NGL', 'NGR', 'NGS', 'NGY', 'NGZ', 'NHF', 'NLC', 'NM6', 'NM9', 'NNG', 'NOJ', 'NPF', 'NSQ', 'NT1', 'NTF', 'NTO', 'NTP', 'NXD', 'NYT', 'O1G', 'OAK', 'OEL', 'OI7', 'OPM', 'ORP', 'OSU', 'OTG', 'OTN', 'OTU', 'OX2', 'P53', 'P6P', 'P8E', 'PA1', 'PA5', 'PAV', 'PDX', 'PH5', 'PKM', 'PNA', 'PNG', 'PNJ', 'PNW', 'PPC', 'PRP', 'PSG', 'PSJ', 'PSV', 'PTQ', 'PUF', 'PZU', 'QDK', 'QIF', 'QKH', 'QPS', 'QV4', 'R1P', 'R1X', 'R2B', 'R2G', 'R5P', 'RAA', 'RAE', 'RAF', 'RAM', 'RAO', 'RAT', 'RB5', 'RBL', 'RCD', 'RDP', 'REL', 'RER', 'RF5', 'RG1', 'RGG', 'RHA', 'RHC', 'RI2', 'RIB', 'RIP', 'RM4', 'RNS', 'RNT', 'ROB', 'ROR', 'RP3', 'RP5', 'RP6', 'RPA', 'RR7', 'RRJ', 'RRY', 'RST', 'RTG', 'RTV', 'RUB', 'RUG', 'RUU', 'RV7', 'RVG', 'RVM', 'RWI', 'RY7', 'RZM', 'S6P', 'S7P', 'S81', 'SA0', 'SCG', 'SCR', 'SDD', 'SDY', 'SEJ', 'SF6', 'SF9', 'SFJ', 'SFU', 'SG4', 'SG5', 'SG6', 'SG7', 'SGA', 'SGC', 'SGD', 'SGN', 'SGS', 'SHB', 'SHD', 'SHG', 'SI3', 'SIA', 'SID', 'SIO', 'SIZ', 'SLB', 'SLM', 'SLT', 'SMD', 'SN5', 'SNG', 'SOE', 'SOG', 'SOL', 'SOR', 'SR1', 'SSG', 'SSH', 'STW', 'STZ', 'SUC', 'SUP', 'SUS', 'SWE', 'SZZ', 'T68', 'T6D', 'T6P', 'T6T', 'TA6', 'TAG', 'TCB', 'TCG', 'TDG', 'TEU', 'TF0', 'TFU', 'TGA', 'TGK', 'TGR', 'TGY', 'TH1', 'TM5', 'TM6', 'TM9', 'TMR', 'TMX', 'TNX', 'TOA', 'TOC', 'TQY', 'TRE', 'TRV', 'TS8', 'TT7', 'TTV', 'TTZ', 'TU4', 'TUG', 'TUJ', 'TUP', 'TUR', 'TVD', 'TVG', 'TVM', 'TVS', 'TVV', 'TVY', 'TW7', 'TWA', 'TWD', 'TWG', 'TWJ', 'TWY', 'TXB', 'TY6', 'TYV', 'U1Y', 'U2A', 'U2D', 'U63', 'U8V', 'U97', 'U9A', 'U9D', 'U9G', 'U9J', 'U9M', 'UAP', 'UBH', 'UBO', 'UCD', 'UDC', 'UEA', 'V3M', 'V3P', 'V71', 'VDF', 'VG1', 'VJ1', 'VJ4', 'VKN', 'VTB', 'W9T', 'WIA', 'WKO', 'WKT', 'WOO', 'WT8', 'WUN', 'WZ1', 'WZ2', 'WZ4', 'X0X', 'X1P', 'X1X', 'X2F', 'X2Y', 'X34', 'X4S', 'X5S', 'X6N', 'X6X', 'X6Y', 'X6Z', 'XBP', 'XDP', 'XDX', 'XGP', 'XIL', 'XIQ', 'XKJ', 'XLF', 'XLS', 'XMM', 'XS2', 'XUL', 'XXM', 'XXR', 'XXX', 'XY6', 'XY9', 'XYB', 'XYF', 'XYL', 'XYP', 'XYS', 'XYT', 'XYZ', 'YDR', 'YIO', 'YJM', 'YKR', 'YO5', 'YX0', 'YX1', 'YYB', 'YYD', 'YYH', 'YYJ', 'YYK', 'YYM', 'YYQ', 'YYR', 'YZ0', 'YZT', 'Z0F', 'Z15', 'Z16', 'Z2D', 'Z2T', 'Z3K', 'Z3L', 'Z3Q', 'Z3U', 'Z4K', 'Z4R', 'Z4S', 'Z4U', 'Z4V', 'Z4W', 'Z4Y', 'Z57', 'Z5J', 'Z5L', 'Z61', 'Z6G', 'Z6H', 'Z6J', 'Z6W', 'Z8H', 'Z8T', 'Z9D', 'Z9E', 'Z9H', 'Z9K', 'Z9L', 'Z9M', 'Z9N', 'Z9W', 'ZB0', 'ZB1', 'ZB2', 'ZB3', 'ZCD', 'ZCZ', 'ZD0', 'ZDC', 'ZDM', 'ZDO', 'ZEE', 'ZEL', 'ZGE', 'ZMR', 'UMQ', 'SQD']);\n","/**\n * Copyright (c) 2018-2025s mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { ColorMap } from '../../../../mol-util/color/index.js';\nimport { SaccharideNames } from '../../model/types/saccharides.js';\n// follows community standard from https://www.ncbi.nlm.nih.gov/glycans/snfg.html\nexport var SaccharideShape;\n(function (SaccharideShape) {\n    // standard shapes\n    SaccharideShape[SaccharideShape[\"FilledSphere\"] = 0] = \"FilledSphere\";\n    SaccharideShape[SaccharideShape[\"FilledCube\"] = 1] = \"FilledCube\";\n    SaccharideShape[SaccharideShape[\"CrossedCube\"] = 2] = \"CrossedCube\";\n    SaccharideShape[SaccharideShape[\"DividedDiamond\"] = 3] = \"DividedDiamond\";\n    SaccharideShape[SaccharideShape[\"FilledCone\"] = 4] = \"FilledCone\";\n    SaccharideShape[SaccharideShape[\"DevidedCone\"] = 5] = \"DevidedCone\";\n    SaccharideShape[SaccharideShape[\"FlatBox\"] = 6] = \"FlatBox\";\n    SaccharideShape[SaccharideShape[\"FilledStar\"] = 7] = \"FilledStar\";\n    SaccharideShape[SaccharideShape[\"FilledDiamond\"] = 8] = \"FilledDiamond\";\n    SaccharideShape[SaccharideShape[\"FlatDiamond\"] = 9] = \"FlatDiamond\";\n    SaccharideShape[SaccharideShape[\"FlatHexagon\"] = 10] = \"FlatHexagon\";\n    SaccharideShape[SaccharideShape[\"Pentagon\"] = 11] = \"Pentagon\";\n    // generic shapes for rings with 4, 5, 6, or 7 members\n    SaccharideShape[SaccharideShape[\"DiamondPrism\"] = 12] = \"DiamondPrism\";\n    SaccharideShape[SaccharideShape[\"PentagonalPrism\"] = 13] = \"PentagonalPrism\";\n    SaccharideShape[SaccharideShape[\"HexagonalPrism\"] = 14] = \"HexagonalPrism\";\n    SaccharideShape[SaccharideShape[\"HeptagonalPrism\"] = 15] = \"HeptagonalPrism\";\n})(SaccharideShape || (SaccharideShape = {}));\nexport const SaccharideColors = ColorMap({\n    Blue: 0x0090bc,\n    Green: 0x00a651,\n    Yellow: 0xffd400,\n    Orange: 0xf47920,\n    Pink: 0xf69ea1,\n    Purple: 0xa54399,\n    LightBlue: 0x8fcce9,\n    Brown: 0xa17a4d,\n    Red: 0xed1c24,\n    Secondary: 0xf1ece1\n});\nexport var SaccharideType;\n(function (SaccharideType) {\n    SaccharideType[SaccharideType[\"Hexose\"] = 0] = \"Hexose\";\n    SaccharideType[SaccharideType[\"HexNAc\"] = 1] = \"HexNAc\";\n    SaccharideType[SaccharideType[\"Hexosamine\"] = 2] = \"Hexosamine\";\n    SaccharideType[SaccharideType[\"Hexuronate\"] = 3] = \"Hexuronate\";\n    SaccharideType[SaccharideType[\"Deoxyhexose\"] = 4] = \"Deoxyhexose\";\n    SaccharideType[SaccharideType[\"DeoxyhexNAc\"] = 5] = \"DeoxyhexNAc\";\n    SaccharideType[SaccharideType[\"DiDeoxyhexose\"] = 6] = \"DiDeoxyhexose\";\n    SaccharideType[SaccharideType[\"Pentose\"] = 7] = \"Pentose\";\n    SaccharideType[SaccharideType[\"Deoxynonulosonate\"] = 8] = \"Deoxynonulosonate\";\n    SaccharideType[SaccharideType[\"DiDeoxynonulosonate\"] = 9] = \"DiDeoxynonulosonate\";\n    SaccharideType[SaccharideType[\"Unknown\"] = 10] = \"Unknown\";\n    SaccharideType[SaccharideType[\"Assigned\"] = 11] = \"Assigned\";\n})(SaccharideType || (SaccharideType = {}));\nconst SaccharideTypeNameMap = {\n    [SaccharideType.Hexose]: 'Hexose',\n    [SaccharideType.HexNAc]: 'HexNAc',\n    [SaccharideType.Hexosamine]: 'Hexosamine',\n    [SaccharideType.Hexuronate]: 'Hexuronate',\n    [SaccharideType.Deoxyhexose]: 'Deoxyhexose',\n    [SaccharideType.DeoxyhexNAc]: 'DeoxyhexNAc',\n    [SaccharideType.DiDeoxyhexose]: 'Di-deoxyhexose',\n    [SaccharideType.Pentose]: 'Pentose',\n    [SaccharideType.Deoxynonulosonate]: 'Deoxynonulosonate',\n    [SaccharideType.DiDeoxynonulosonate]: 'Di-deoxynonulosonate',\n    [SaccharideType.Unknown]: 'Unknown',\n    [SaccharideType.Assigned]: 'Assigned',\n};\nexport function getSaccharideName(type) {\n    return SaccharideTypeNameMap[type];\n}\nconst SaccharideTypeShapeMap = {\n    [SaccharideType.Hexose]: SaccharideShape.FilledSphere,\n    [SaccharideType.HexNAc]: SaccharideShape.FilledCube,\n    [SaccharideType.Hexosamine]: SaccharideShape.CrossedCube,\n    [SaccharideType.Hexuronate]: SaccharideShape.DividedDiamond,\n    [SaccharideType.Deoxyhexose]: SaccharideShape.FilledCone,\n    [SaccharideType.DeoxyhexNAc]: SaccharideShape.DevidedCone,\n    [SaccharideType.DiDeoxyhexose]: SaccharideShape.FlatBox,\n    [SaccharideType.Pentose]: SaccharideShape.FilledStar,\n    [SaccharideType.Deoxynonulosonate]: SaccharideShape.FilledDiamond,\n    [SaccharideType.DiDeoxynonulosonate]: SaccharideShape.FlatDiamond,\n    [SaccharideType.Unknown]: SaccharideShape.FlatHexagon,\n    [SaccharideType.Assigned]: SaccharideShape.Pentagon,\n};\nexport function getSaccharideShape(type, ringMemberCount) {\n    if (type === SaccharideType.Unknown) {\n        if (ringMemberCount === 4)\n            return SaccharideShape.DiamondPrism;\n        else if (ringMemberCount === 5)\n            return SaccharideShape.PentagonalPrism;\n        else if (ringMemberCount === 6)\n            return SaccharideShape.HexagonalPrism;\n        else if (ringMemberCount === 7)\n            return SaccharideShape.HeptagonalPrism;\n        else\n            return SaccharideShape.FlatHexagon;\n    }\n    else {\n        return SaccharideTypeShapeMap[type];\n    }\n}\nexport const UnknownSaccharideComponent = {\n    abbr: 'Unk',\n    name: 'Unknown',\n    color: SaccharideColors.Secondary,\n    type: SaccharideType.Unknown\n};\n/**\n * Unless stated otherwise, these follow SNFG recommendations.\n */\nconst Monosaccharides = [\n    { abbr: 'Glc', name: 'Glucose', color: SaccharideColors.Blue, type: SaccharideType.Hexose },\n    { abbr: 'Man', name: 'Mannose', color: SaccharideColors.Green, type: SaccharideType.Hexose },\n    { abbr: 'Gal', name: 'Galactose', color: SaccharideColors.Yellow, type: SaccharideType.Hexose },\n    { abbr: 'Gul', name: 'Gulose', color: SaccharideColors.Orange, type: SaccharideType.Hexose },\n    { abbr: 'Alt', name: 'Altrose', color: SaccharideColors.Pink, type: SaccharideType.Hexose },\n    { abbr: 'All', name: 'Allose', color: SaccharideColors.Purple, type: SaccharideType.Hexose },\n    { abbr: 'Tal', name: 'Talose', color: SaccharideColors.LightBlue, type: SaccharideType.Hexose },\n    { abbr: 'Ido', name: 'Idose', color: SaccharideColors.Brown, type: SaccharideType.Hexose },\n    { abbr: 'GlcNAc', name: 'N-Acetyl Glucosamine', color: SaccharideColors.Blue, type: SaccharideType.HexNAc },\n    { abbr: 'ManNAc', name: 'N-Acetyl Mannosamine', color: SaccharideColors.Green, type: SaccharideType.HexNAc },\n    { abbr: 'GalNAc', name: 'N-Acetyl Galactosamine', color: SaccharideColors.Yellow, type: SaccharideType.HexNAc },\n    { abbr: 'GulNAc', name: 'N-Acetyl Gulosamine', color: SaccharideColors.Orange, type: SaccharideType.HexNAc },\n    { abbr: 'AltNAc', name: 'N-Acetyl Altrosamine', color: SaccharideColors.Pink, type: SaccharideType.HexNAc },\n    { abbr: 'AllNAc', name: 'N-Acetyl Allosamine', color: SaccharideColors.Purple, type: SaccharideType.HexNAc },\n    { abbr: 'TalNAc', name: 'N-Acetyl Talosamine', color: SaccharideColors.LightBlue, type: SaccharideType.HexNAc },\n    { abbr: 'IdoNAc', name: 'N-Acetyl Idosamine', color: SaccharideColors.Brown, type: SaccharideType.HexNAc },\n    { abbr: 'GlcN', name: 'Glucosamine', color: SaccharideColors.Blue, type: SaccharideType.Hexosamine },\n    { abbr: 'ManN', name: 'Mannosamine', color: SaccharideColors.Green, type: SaccharideType.Hexosamine },\n    { abbr: 'GalN', name: 'Galactosamine', color: SaccharideColors.Yellow, type: SaccharideType.Hexosamine },\n    { abbr: 'GulN', name: 'Gulosamine', color: SaccharideColors.Orange, type: SaccharideType.Hexosamine },\n    { abbr: 'AltN', name: 'Altrosamine', color: SaccharideColors.Pink, type: SaccharideType.Hexosamine },\n    { abbr: 'AllN', name: 'Allosamine', color: SaccharideColors.Purple, type: SaccharideType.Hexosamine },\n    { abbr: 'TalN', name: 'Talosamine', color: SaccharideColors.LightBlue, type: SaccharideType.Hexosamine },\n    { abbr: 'IdoN', name: 'Idosamine', color: SaccharideColors.Brown, type: SaccharideType.Hexosamine },\n    { abbr: 'GlcNS', name: 'N-sulfo Glucosamine', color: SaccharideColors.Blue, type: SaccharideType.Hexosamine }, // from GLYCAM\n    { abbr: 'GlcA', name: 'Glucuronic Acid', color: SaccharideColors.Blue, type: SaccharideType.Hexuronate },\n    { abbr: 'ManA', name: 'Mannuronic Acid', color: SaccharideColors.Green, type: SaccharideType.Hexuronate },\n    { abbr: 'GalA', name: 'Galacturonic Acid', color: SaccharideColors.Yellow, type: SaccharideType.Hexuronate },\n    { abbr: 'GulA', name: 'Guluronic Acid', color: SaccharideColors.Orange, type: SaccharideType.Hexuronate },\n    { abbr: 'AltA', name: 'Altruronic Acid', color: SaccharideColors.Pink, type: SaccharideType.Hexuronate },\n    { abbr: 'AllA', name: 'Alluronic Acid', color: SaccharideColors.Purple, type: SaccharideType.Hexuronate },\n    { abbr: 'TalA', name: 'Taluronic Acid', color: SaccharideColors.LightBlue, type: SaccharideType.Hexuronate },\n    { abbr: 'IdoA', name: 'Iduronic Acid', color: SaccharideColors.Brown, type: SaccharideType.Hexuronate },\n    { abbr: 'Qui', name: 'Quinovose', color: SaccharideColors.Blue, type: SaccharideType.Deoxyhexose },\n    { abbr: 'Rha', name: 'Rhamnose', color: SaccharideColors.Green, type: SaccharideType.Deoxyhexose },\n    { abbr: '6dGul', name: '6-Deoxy Gulose', color: SaccharideColors.Orange, type: SaccharideType.Deoxyhexose },\n    { abbr: '6dAlt', name: '6-Deoxy Altrose', color: SaccharideColors.Pink, type: SaccharideType.Deoxyhexose },\n    { abbr: '6dTal', name: '6-Deoxy Talose', color: SaccharideColors.LightBlue, type: SaccharideType.Deoxyhexose },\n    { abbr: 'Fuc', name: 'Fucose', color: SaccharideColors.Red, type: SaccharideType.Deoxyhexose },\n    { abbr: 'QuiNAc', name: 'N-Acetyl Quinovosamine', color: SaccharideColors.Blue, type: SaccharideType.DeoxyhexNAc },\n    { abbr: 'RhaNAc', name: 'N-Acetyl Rhamnosamine', color: SaccharideColors.Green, type: SaccharideType.DeoxyhexNAc },\n    { abbr: '6dAltNAc', name: 'N-Acetyl 6-Deoxy Altrosamine', color: SaccharideColors.Pink, type: SaccharideType.DeoxyhexNAc },\n    { abbr: '6dTalNAc', name: 'N-Acetyl 6-Deoxy Talosamine', color: SaccharideColors.LightBlue, type: SaccharideType.DeoxyhexNAc },\n    { abbr: 'FucNAc', name: 'N-Acetyl Fucosamine', color: SaccharideColors.Red, type: SaccharideType.DeoxyhexNAc },\n    { abbr: 'AAT', name: 'AAT', color: SaccharideColors.Red, type: SaccharideType.DeoxyhexNAc }, // from GLYCAM\n    { abbr: 'Oli', name: 'Olivose', color: SaccharideColors.Blue, type: SaccharideType.DiDeoxyhexose },\n    { abbr: 'Tyv', name: 'Tyvelose', color: SaccharideColors.Green, type: SaccharideType.DiDeoxyhexose },\n    { abbr: 'Abe', name: 'Abequose', color: SaccharideColors.Orange, type: SaccharideType.DiDeoxyhexose },\n    { abbr: 'Par', name: 'Paratose', color: SaccharideColors.Pink, type: SaccharideType.DiDeoxyhexose },\n    { abbr: 'Dig', name: 'Digitoxose', color: SaccharideColors.Purple, type: SaccharideType.DiDeoxyhexose },\n    { abbr: 'Col', name: 'Colitose', color: SaccharideColors.LightBlue, type: SaccharideType.DiDeoxyhexose },\n    { abbr: 'Ara', name: 'Arabinose', color: SaccharideColors.Green, type: SaccharideType.Pentose },\n    { abbr: 'Lyx', name: 'Lyxose', color: SaccharideColors.Yellow, type: SaccharideType.Pentose },\n    { abbr: 'Xyl', name: 'Xylose', color: SaccharideColors.Orange, type: SaccharideType.Pentose },\n    { abbr: 'Rib', name: 'Ribose', color: SaccharideColors.Pink, type: SaccharideType.Pentose },\n    { abbr: 'Kdn', name: 'Keto-Deoxy Nonulonic Acid', color: SaccharideColors.Green, type: SaccharideType.Deoxynonulosonate },\n    { abbr: 'Neu5Ac', name: 'N-Acetyl Neuraminic Acid', color: SaccharideColors.Purple, type: SaccharideType.Deoxynonulosonate },\n    { abbr: 'Neu5Gc', name: 'N-Glycolyl Neuraminic Acid', color: SaccharideColors.LightBlue, type: SaccharideType.Deoxynonulosonate },\n    { abbr: 'Neu', name: 'Neuraminic Acid', color: SaccharideColors.Brown, type: SaccharideType.Deoxynonulosonate },\n    { abbr: 'Sia', name: 'Sialic acid', color: SaccharideColors.Red, type: SaccharideType.Deoxynonulosonate },\n    { abbr: 'Pse', name: 'Pseudaminic Acid', color: SaccharideColors.Green, type: SaccharideType.DiDeoxynonulosonate },\n    { abbr: 'Leg', name: 'Legionaminic Acid', color: SaccharideColors.Yellow, type: SaccharideType.DiDeoxynonulosonate },\n    { abbr: 'Aci', name: 'Acinetaminic Acid', color: SaccharideColors.Pink, type: SaccharideType.DiDeoxynonulosonate },\n    { abbr: '4eLeg', name: '4-Epilegionaminic Acid', color: SaccharideColors.LightBlue, type: SaccharideType.DiDeoxynonulosonate },\n    { abbr: 'Bac', name: 'Bacillosamine', color: SaccharideColors.Blue, type: SaccharideType.Unknown },\n    { abbr: 'LDmanHep', name: 'L-Glycero-D-Manno Heptose', color: SaccharideColors.Green, type: SaccharideType.Unknown },\n    { abbr: 'Kdo', name: 'Keto-Deoxy Octulonic Acid', color: SaccharideColors.Yellow, type: SaccharideType.Unknown },\n    { abbr: 'Dha', name: '3-Deoxy Lyxo-Heptulosaric Acid', color: SaccharideColors.Orange, type: SaccharideType.Unknown },\n    { abbr: 'DDmanHep', name: 'D-Glycero-D-Manno-Heptose', color: SaccharideColors.Pink, type: SaccharideType.Unknown },\n    { abbr: 'MurNAc', name: 'N-Acetyl Muramic Acid', color: SaccharideColors.Purple, type: SaccharideType.Unknown },\n    { abbr: 'MurNGc', name: 'N-Glycolyl Muramic Acid', color: SaccharideColors.LightBlue, type: SaccharideType.Unknown },\n    { abbr: 'Mur', name: 'Muramic Acid', color: SaccharideColors.Brown, type: SaccharideType.Unknown },\n    { abbr: 'K3O', name: 'D-glycero-a-D-talo-oct-2-Ulosonic Acid', color: SaccharideColors.Red, type: SaccharideType.Unknown }, // from GLYCAM\n    { abbr: 'dUA', name: '4-deoxy-4,5-didehydro iduronic acid', color: SaccharideColors.Secondary, type: SaccharideType.Unknown }, // from GLYCAM\n    { abbr: 'Api', name: 'Apicose', color: SaccharideColors.Green, type: SaccharideType.Assigned },\n    { abbr: 'Fru', name: 'Fructose', color: SaccharideColors.Green, type: SaccharideType.Assigned },\n    { abbr: 'Tag', name: 'Tagatose', color: SaccharideColors.Yellow, type: SaccharideType.Assigned },\n    { abbr: 'Sor', name: 'Sorbose', color: SaccharideColors.Orange, type: SaccharideType.Assigned },\n    { abbr: 'Psi', name: 'Psicose', color: SaccharideColors.Pink, type: SaccharideType.Assigned },\n];\nexport const SaccharidesSnfgMap = (function () {\n    const map = new Map();\n    for (let i = 0, il = Monosaccharides.length; i < il; ++i) {\n        const saccharide = Monosaccharides[i];\n        map.set(saccharide.abbr, saccharide);\n    }\n    return map;\n})();\nexport const MonosaccharidesColorTable = [\n    ['Glc-family', SaccharideColors.Blue],\n    ['Man-family', SaccharideColors.Green],\n    ['Gal-family', SaccharideColors.Yellow],\n    ['Gul-family', SaccharideColors.Orange],\n    ['Alt-family', SaccharideColors.Pink],\n    ['All-family', SaccharideColors.Purple],\n    ['Tal-family', SaccharideColors.LightBlue],\n    ['Ido-family', SaccharideColors.Brown],\n    ['Fuc-family', SaccharideColors.Red],\n    ['Generic/Unknown/Secondary', SaccharideColors.Secondary],\n];\nconst CommonSaccharideNames = {\n    // Hexose\n    Glc: [\n        'GLC', 'BGC', 'Z8T',\n        'TRE', // di-saccharide but homomer\n        'MLR', // tri-saccharide but homomer\n    ],\n    Man: ['MAN', 'BMA'],\n    Gal: ['GLA', 'GAL', 'GZL', 'GXL', 'GIV'],\n    Gul: ['4GL', 'GL0', 'GUP', 'Z8H'],\n    Alt: ['Z6H', '3MK', 'SHD'],\n    All: ['AFD', 'ALL', 'WOO', 'Z2D'],\n    Tal: ['ZEE', 'A5C', 'SDY'],\n    Ido: ['ZCD', 'Z0F', '4N2'],\n    // HexNAc\n    GlcNAc: ['NDG', 'NAG', 'NGZ'],\n    ManNAc: ['BM3', 'BM7'],\n    GalNAc: ['A2G', 'NGA', 'YYQ'],\n    GulNAc: ['LXB'],\n    AltNAc: [],\n    AllNAc: ['NAA'],\n    TalNAc: [],\n    IdoNAc: ['LXZ', 'HSQ'],\n    // Hexosamine\n    GlcN: ['PA1', 'GCS'],\n    ManN: ['95Z'],\n    GalN: ['X6X', '1GN'],\n    GulN: [],\n    AltN: [],\n    AllN: [],\n    TalN: [],\n    IdoN: [],\n    // Hexuronate\n    GlcA: ['GCU', 'BDP'],\n    ManA: ['MAV', 'BEM'],\n    GalA: ['ADA', 'GTR', 'GTK'],\n    GulA: ['LGU'],\n    AltA: [],\n    AllA: [],\n    TalA: ['X1X', 'X0X'],\n    IdoA: ['IDR'],\n    // Deoxyhexose\n    Qui: ['G6D', 'YYK'],\n    Rha: ['RAM', 'RM4', 'XXR'],\n    '6dGul': ['66O'],\n    '6dAlt': [],\n    '6dTal': [],\n    Fuc: ['FUC', 'FUL', 'FCA', 'FCB', 'GYE'],\n    // DeoxyhexNAc\n    QuiNAc: ['Z9W'],\n    RhaNAc: [],\n    '6dAltNAc': [],\n    '6dTalNAc': [],\n    FucNAc: ['49T'],\n    // Di-deoxyhexose\n    Oli: ['DDA', 'RAE', 'Z5J'],\n    Tyv: ['TYV'],\n    Abe: ['ABE'],\n    Par: ['PZU'],\n    Dig: ['Z3U'],\n    Col: [],\n    // Pentose\n    Ara: ['64K', 'ARA', 'ARB', 'AHR', 'FUB', 'BXY', 'BXX', 'SEJ'],\n    Lyx: ['LDY', 'Z4W'],\n    Xyl: ['XYS', 'XYP', 'XYZ', 'HSY', 'LXC'],\n    Rib: ['YYM', 'RIP', 'RIB', 'BDR', '0MK', 'Z6J', '32O'],\n    // Deoxynonulosonate\n    Kdn: ['KDM', 'KDN'],\n    Neu5Ac: ['SIA', 'SLB'],\n    Neu5Gc: ['NGC', 'NGE'],\n    Neu: [],\n    Sia: [],\n    // Di-deoxynonulosonate\n    Pse: [],\n    Leg: [],\n    Aci: [],\n    '4eLeg': [],\n    // Unknown\n    Bac: [],\n    LDmanHep: ['GMH'],\n    Kdo: ['KDO'],\n    Dha: [],\n    DDmanHep: ['289'],\n    MurNAc: ['MUB', 'AMU'],\n    MurNGc: [],\n    Mur: ['1S4', 'MUR'],\n    // Assigned\n    Api: ['XXM'],\n    Fru: ['BDF', 'Z9N', 'FRU', 'LFR'],\n    Tag: ['T6T'],\n    Sor: ['SOE', 'UEA'],\n    Psi: ['PSV', 'SF6', 'SF9', 'TTV'],\n};\n/**\n * From http://glycam.org/docs/othertoolsservice/2016/06/09/3d-snfg-list-of-residue-names/#CHARMM\n */\nconst CharmmSaccharideNames = {\n    Glc: ['AGLC', 'BGLC'],\n    GlcNAc: ['AGLCNA', 'BGLCNA', 'BGLCN0'],\n    GlcA: ['AGLCA', 'BGLCA', 'BGLCA0'],\n    Man: ['AMAN', 'BMAN'],\n    Rha: ['ARHM', 'BRHM'],\n    Ara: ['AARB', 'BARB'],\n    Gal: ['AGAL', 'BGAL'],\n    GalNAc: ['AGALNA', 'BGALNA'],\n    Gul: ['AGUL', 'BGUL'],\n    Alt: ['AALT', 'BALT'],\n    All: ['AALL', 'BALL'],\n    Tal: ['ATAL', 'BTAL'],\n    Ido: ['AIDO', 'BIDO'],\n    IdoA: ['AIDOA', 'BIDOA'],\n    Fuc: ['AFUC', 'BFUC'],\n    Lyx: ['ALYF', 'BLYF'],\n    Xyl: ['AXYL', 'BXYL', 'AXYF', 'BXYF'],\n    Rib: ['ARIB', 'BRIB'],\n    Fru: ['AFRU', 'BFRU'],\n    Neu5Ac: ['ANE5AC', 'BNE5AC'],\n};\n/**\n * From http://glycam.org/docs/othertoolsservice/2016/06/09/3d-snfg-list-of-residue-names/#GLYCAM\n */\nconst GlycamSaccharideNames = {\n    Glc: ['0GA', '0GB', '1GA', '1GB', '2GA', '2GB', '3GA', '3GB', '4GA', '4GB', '6GA', '6GB', 'ZGA', 'ZGB', 'YGA', 'YGB', 'XGA', 'XGB', 'WGA', 'WGB', 'VGA', 'VGB', 'UGA', 'UGB', 'TGA', 'TGB', 'SGA', 'SGB', 'RGA', 'RGB', 'QGA', 'QGB', 'PGA', 'PGB', '0gA', '0gB', '1gA', '1gB', '2gA', '2gB', '3gA', '3gB', '4gA', '4gB', '6gA', '6gB', 'ZgA', 'ZgB', 'YgA', 'YgB', 'XgA', 'XgB', 'WgA', 'WgB', 'VgA', 'VgB', 'UgA', 'UgB', 'TgA', 'TgB', 'SgA', 'SgB', 'RgA', 'RgB', 'QgA', 'QgB', 'PgA', 'PgB'],\n    GlcNAc: ['0YA', '0YB', '1YA', '1YB', '3YA', '3YB', '4YA', '4YB', '6YA', '6YB', 'WYA', 'WYB', 'VYA', 'VYB', 'UYA', 'UYB', 'QYA', 'QYB', '0yA', '0yB', '1yA', '1yB', '3yA', '3yB', '4yA', '4yB', '6yA', '6yB', 'WyA', 'WyB', 'VyA', 'VyB', 'UyA', 'UyB', 'QyA', 'QyB', '0YS', '0Ys', '3YS', '3Ys', '4YS', '4Ys', '6YS', '6Ys', 'QYS', 'QYs', 'UYS', 'UYs', 'VYS', 'VYs', 'WYS', 'WYs', '0yS', '0ys', '3yS', '3ys', '4yS', '4ys'],\n    GlcA: ['0ZA', '0ZB', '1ZA', '1ZB', '2ZA', '2ZB', '3ZA', '3ZB', '4ZA', '4ZB', 'ZZA', 'ZZB', 'YZA', 'YZB', 'WZA', 'WZB', 'TZA', 'TZB', '0zA', '0zB', '1zA', '1zB', '2zA', '2zB', '3zA', '3zB', '4zA', '4zB', 'ZzA', 'ZzB', 'YzA', 'YzB', 'WzA', 'WzB', 'TzA', 'TzB', 'TZBP', 'WZBP', 'YZBP', '4ZBP', 'ZZBP', '3ZBP', '2ZBP', '1ZBP', '0ZBP', '0ZF', '1ZF', '4ZF', '0Zf', '1Zf', '4Zf'],\n    GlcN: ['0YN', '3YN', '4YN', '6YN', 'WYN', 'VYN', 'UYN', 'QYN', '3Yn', '4Yn', 'WYn', '0Yn', '0YP', '3YP', '4YP', '6YP', 'WYP', 'VYP', 'UYP', 'QYP', '0Yp', '3Yp', '4Yp', 'WYp', 'QYN', 'WYN', 'VYN', '3YN', 'UYN', '4YN', '6YN', '1YN', '0YN', 'QYn', 'VYn', 'WYn', '3Yn', 'UYn', '6Yn', '4Yn', '1Yn', '0Yn', 'QYNP', 'WYNP', 'VYNP', '3YNP', 'UYNP', '4YNP', '6YNP', '1YNP', '0YNP', 'QYnP', 'UYnP', 'VYnP', '6YnP', 'WYnP', '4YnP', '3YnP', '1YnP', '0YnP'],\n    Man: ['0MA', '0MB', '1MA', '1MB', '2MA', '2MB', '3MA', '3MB', '4MA', '4MB', '6MA', '6MB', 'ZMA', 'ZMB', 'YMA', 'YMB', 'XMA', 'XMB', 'WMA', 'WMB', 'VMA', 'VMB', 'UMA', 'UMB', 'TMA', 'TMB', 'SMA', 'SMB', 'RMA', 'RMB', 'QMA', 'QMB', 'PMA', 'PMB', '0mA', '0mB', '1mA', '1mB', '2mA', '2mB', '3mA', '3mB', '4mA', '4mB', '6mA', '6mB', 'ZmA', 'ZmB', 'YmA', 'YmB', 'XmA', 'XmB', 'WmA', 'WmB', 'VmA', 'VmB', 'UmA', 'UmB', 'TmA', 'TmB', 'SmA', 'SmB', 'RmA', 'RmB', 'QmA', 'QmB', 'PmA', 'PmB'],\n    ManNAc: ['0WA', '0WB', '1WA', '1WB', '3WA', '3WB', '4WA', '4WB', '6WA', '6WB', 'WWA', 'WWB', 'VWA', 'VWB', 'UWA', 'UWB', 'QWA', 'QWB', '0wA', '0wB', '1wA', '1wB', '3wA', '3wB', '4wA', '4wB', '6wA', '6wB', 'WwA', 'WwB', 'VwA', 'VwB', 'UwA', 'UwB', 'QwA', 'QwB'],\n    Ara: ['0AA', '0AB', '1AA', '1AB', '2AA', '2AB', '3AA', '3AB', '4AA', '4AB', 'ZAA', 'ZAB', 'YAA', 'YAB', 'WAA', 'WAB', 'TAA', 'TAB', '0AD', '0AU', '1AD', '1AU', '2AD', '2AU', '3AD', '3AU', '5AD', '5AU', 'ZAD', 'ZAU', '0aA', '0aB', '1aA', '1aB', '2aA', '2aB', '3aA', '3aB', '4aA', '4aB', 'ZaA', 'ZaB', 'YaA', 'YaB', 'WaA', 'WaB', 'TaA', 'TaB', '0aD', '0aU', '1aD', '1aU', '2aD', '2aU', '3aD', '3aU', '5aD', '5aU', 'ZaD', 'ZaU'],\n    Gal: ['0LA', '0LB', '1LA', '1LB', '2LA', '2LB', '3LA', '3LB', '4LA', '4LB', '6LA', '6LB', 'ZLA', 'ZLB', 'YLA', 'YLB', 'XLA', 'XLB', 'WLA', 'WLB', 'VLA', 'VLB', 'ULA', 'ULB', 'TLA', 'TLB', 'SLA', 'SLB', 'RLA', 'RLB', 'QLA', 'QLB', 'PLA', 'PLB', '0lA', '0lB', '1lA', '1lB', '2lA', '2lB', '3lA', '3lB', '4lA', '4lB', '6lA', '6lB', 'ZlA', 'ZlB', 'YlA', 'YlB', 'XlA', 'XlB', 'WlA', 'WlB', 'VlA', 'VlB', 'UlA', 'UlB', 'TlA', 'TlB', 'SlA', 'SlB', 'RlA', 'RlB', 'QlA', 'QlB', 'PlA', 'PlB'],\n    GalNAc: ['0VA', '0VB', '1VA', '1VB', '3VA', '3VB', '4VA', '4VB', '6VA', '6VB', 'WVA', 'WVB', 'VVA', 'VVB', 'UVA', 'UVB', 'QVA', 'QVB', '0vA', '0vB', '1vA', '1vB', '3vA', '3vB', '4vA', '4vB', '6vA', '6vB', 'WvA', 'WvB', 'VvA', 'VvB', 'UvA', 'UvB', 'QvA', 'QvB'],\n    GalA: ['0OA', '0OB', '1OA', '1OB', '2OA', '2OB', '3OA', '3OB', '4OA', '4OB', 'ZOA', 'ZOB', 'YOA', 'YOB', 'WOA', 'WOB', 'TOA', 'TOB', '0oA', '0oB', '1oA', '1oB', '2oA', '2oB', '3oA', '3oB', '4oA', '4oB', 'ZoA', 'ZoB', 'YoA', 'YoB', 'WoA', 'WoB', 'ToA', 'ToB'],\n    Gul: ['0KA', '0KB', '1KA', '1KB', '2KA', '2KB', '3KA', '3KB', '4KA', '4KB', '6KA', '6KB', 'ZKA', 'ZKB', 'YKA', 'YKB', 'XKA', 'XKB', 'WKA', 'WKB', 'VKA', 'VKB', 'UKA', 'UKB', 'TKA', 'TKB', 'SKA', 'SKB', 'RKA', 'RKB', 'QKA', 'QKB', 'PKA', 'PKB', '0kA', '0kB', '1kA', '1kB', '2kA', '2kB', '3kA', '3kB', '4kA', '4kB', '6kA', '6kB', 'ZkA', 'ZkB', 'YkA', 'YkB', 'XkA', 'XkB', 'WkA', 'WkB', 'VkA', 'VkB', 'UkA', 'UkB', 'TkA', 'TkB', 'SkA', 'SkB', 'RkA', 'RkB', 'QkA', 'QkB', 'PkA', 'PkB'],\n    Alt: ['0EA', '0EB', '1EA', '1EB', '2EA', '2EB', '3EA', '3EB', '4EA', '4EB', '6EA', '6EB', 'ZEA', 'ZEB', 'YEA', 'YEB', 'XEA', 'XEB', 'WEA', 'WEB', 'VEA', 'VEB', 'UEA', 'UEB', 'TEA', 'TEB', 'SEA', 'SEB', 'REA', 'REB', 'QEA', 'QEB', 'PEA', 'PEB', '0eA', '0eB', '1eA', '1eB', '2eA', '2eB', '3eA', '3eB', '4eA', '4eB', '6eA', '6eB', 'ZeA', 'ZeB', 'YeA', 'YeB', 'XeA', 'XeB', 'WeA', 'WeB', 'VeA', 'VeB', 'UeA', 'UeB', 'TeA', 'TeB', 'SeA', 'SeB', 'ReA', 'ReB', 'QeA', 'QeB', 'PeA', 'PeB'],\n    All: ['0NA', '0NB', '1NA', '1NB', '2NA', '2NB', '3NA', '3NB', '4NA', '4NB', '6NA', '6NB', 'ZNA', 'ZNB', 'YNA', 'YNB', 'XNA', 'XNB', 'WNA', 'WNB', 'VNA', 'VNB', 'UNA', 'UNB', 'TNA', 'TNB', 'SNA', 'SNB', 'RNA', 'RNB', 'QNA', 'QNB', 'PNA', 'PNB', '0nA', '0nB', '1nA', '1nB', '2nA', '2nB', '3nA', '3nB', '4nA', '4nB', '6nA', '6nB', 'ZnA', 'ZnB', 'YnA', 'YnB', 'XnA', 'XnB', 'WnA', 'WnB', 'VnA', 'VnB', 'UnA', 'UnB', 'TnA', 'TnB', 'SnA', 'SnB', 'RnA', 'RnB', 'QnA', 'QnB', 'PnA', 'PnB'],\n    Tal: ['0TA', '0TB', '1TA', '1TB', '2TA', '2TB', '3TA', '3TB', '4TA', '4TB', '6TA', '6TB', 'ZTA', 'ZTB', 'YTA', 'YTB', 'XTA', 'XTB', 'WTA', 'WTB', 'VTA', 'VTB', 'UTA', 'UTB', 'TTA', 'TTB', 'STA', 'STB', 'RTA', 'RTB', 'QTA', 'QTB', 'PTA', 'PTB', '0tA', '0tB', '1tA', '1tB', '2tA', '2tB', '3tA', '3tB', '4tA', '4tB', '6tA', '6tB', 'ZtA', 'ZtB', 'YtA', 'YtB', 'XtA', 'XtB', 'WtA', 'WtB', 'VtA', 'VtB', 'UtA', 'UtB', 'TtA', 'TtB', 'StA', 'StB', 'RtA', 'RtB', 'QtA', 'QtB', 'PtA', 'PtB'],\n    Ido: ['0IA', '0IB', '1IA', '1IB', '2IA', '2IB', '3IA', '3IB', '4IA', '4IB', '6IA', '6IB', 'ZIA', 'ZIB', 'YIA', 'YIB', 'XIA', 'XIB', 'WIA', 'WIB', 'VIA', 'VIB', 'UIA', 'UIB', 'TIA', 'TIB', 'SIA', 'SIB', 'RIA', 'RIB', 'QIA', 'QIB', 'PIA', 'PIB', '0iA', '0iB', '1iA', '1iB', '2iA', '2iB', '3iA', '3iB', '4iA', '4iB', '6iA', '6iB', 'ZiA', 'ZiB', 'YiA', 'YiB', 'XiA', 'XiB', 'WiA', 'WiB', 'ViA', 'ViB', 'UiA', 'UiB', 'TiA', 'TiB', 'SiA', 'SiB', 'RiA', 'RiB', 'QiA', 'QiB', 'PiA', 'PiB'],\n    IdoA: ['0UA', '0UB', '1UA', '1UB', '2UA', '2UB', '3UA', '3UB', '4UA', '4UB', 'ZUA', 'ZUB', 'YUA', 'YUB', 'WUA', 'WUB', 'TUA', 'TUB', '0uA', '0uB', '1uA', '1uB', '2uA', '2uB', '3uA', '3uB', '4uA', '4uB', 'ZuA', 'ZuB', 'YuA', 'YuB', 'WuA', 'WuB', 'TuA', 'TuB', 'YuAP'],\n    Fuc: ['0FA', '0FB', '1FA', '1FB', '2FA', '2FB', '3FA', '3FB', '4FA', '4FB', 'ZFA', 'ZFB', 'YFA', 'YFB', 'WFA', 'WFB', 'TFA', 'TFB', '0fA', '0fB', '1fA', '1fB', '2fA', '2fB', '3fA', '3fB', '4fA', '4fB', 'ZfA', 'ZfB', 'YfA', 'YfB', 'WfA', 'WfB', 'TfA', 'TfB'],\n    Rha: ['0HA', '0HB', '1HA', '1HB', '2HA', '2HB', '3HA', '3HB', '4HA', '4HB', 'ZHA', 'ZHB', 'YHA', 'YHB', 'WHA', 'WHB', 'THA', 'THB', '0hA', '0hB', '1hA', '1hB', '2hA', '2hB', '3hA', '3hB', '4hA', '4hB', 'ZhA', 'ZhB', 'YhA', 'YhB', 'WhA', 'WhB', 'ThA', 'ThB'],\n    Qui: ['0QA', '0QB', '1QA', '1QB', '2QA', '2QB', '3QA', '3QB', '4QA', '4QB', 'ZQA', 'ZQB', 'YQA', 'YQB', 'WQA', 'WQB', 'TQA', 'TQB', '0qA', '0qB', '1qA', '1qB', '2qA', '2qB', '3qA', '3qB', '4qA', '4qB', 'ZqA', 'ZqB', 'YqA', 'YqB', 'WqA', 'WqB', 'TqA', 'TqB'],\n    Lyx: ['0DA', '0DB', '1DA', '1DB', '2DA', '2DB', '3DA', '3DB', '4DA', '4DB', 'ZDA', 'ZDB', 'YDA', 'YDB', 'WDA', 'WDB', 'TDA', 'TDB', '0DD', '0DU', '1DD', '1DU', '2DD', '2DU', '3DD', '3DU', '5DD', '5DU', 'ZDD', 'ZDU', '0dA', '0dB', '1dA', '1dB', '2dA', '2dB', '3dA', '3dB', '4dA', '4dB', 'ZdA', 'ZdB', 'YdA', 'YdB', 'WdA', 'WdB', 'TdA', 'TdB', '0dD', '0dU', '1dD', '1dU', '2dD', '2dU', '3dD', '3dU', '5dD', '5dU', 'ZdD', 'ZdU'],\n    Xyl: ['0XA', '0XB', '1XA', '1XB', '2XA', '2XB', '3XA', '3XB', '4XA', '4XB', 'ZXA', 'ZXB', 'YXA', 'YXB', 'WXA', 'WXB', 'TXA', 'TXB', '0XD', '0XU', '1XD', '1XU', '2XD', '2XU', '3XD', '3XU', '5XD', '5XU', 'ZXD', 'ZXU', '0xA', '0xB', '1xA', '1xB', '2xA', '2xB', '3xA', '3xB', '4xA', '4xB', 'ZxA', 'ZxB', 'YxA', 'YxB', 'WxA', 'WxB', 'TxA', 'TxB', '0xD', '0xU', '1xD', '1xU', '2xD', '2xU', '3xD', '3xU', '5xD', '5xU', 'ZxD', 'ZxU'],\n    Rib: ['0RA', '0RB', '1RA', '1RB', '2RA', '2RB', '3RA', '3RB', '4RA', '4RB', 'ZRA', 'ZRB', 'YRA', 'YRB', 'WRA', 'WRB', 'TRA', 'TRB', '0RD', '0RU', '1RD', '1RU', '2RD', '2RU', '3RD', '3RU', '5RD', '5RU', 'ZRD', 'ZRU', '0rA', '0rB', '1rA', '1rB', '2rA', '2rB', '3rA', '3rB', '4rA', '4rB', 'ZrA', 'ZrB', 'YrA', 'YrB', 'WrA', 'WrB', 'TrA', 'TrB', '0rD', '0rU', '1rD', '1rU', '2rD', '2rU', '3rD', '3rU', '5rD', '5rU', 'ZrD', 'ZrU'],\n    Fru: ['0CA', '0CB', '1CA', '1CB', '2CA', '2CB', '3CA', '3CB', '4CA', '4CB', '5CA', '5CB', 'WCA', 'WCB', '0CD', '0CU', '1CD', '1CU', '2CD', '2CU', '3CD', '3CU', '4CD', '4CU', '6CD', '6CU', 'WCD', 'WCU', 'VCD', 'VCU', 'UCD', 'UCU', 'QCD', 'QCU', '0cA', '0cB', '1cA', '1cB', '2cA', '2cB', '3cA', '3cB', '4cA', '4cB', '5cA', '5cB', 'WcA', 'WcB', '0cD', '0cU', '1cD', '1cU', '2cD', '2cU', '3cD', '3cU', '4cD', '4cU', '6cD', '6cU', 'WcD', 'WcU', 'VcD', 'VcU', 'UcD', 'UcU', 'QcD', 'QcU'],\n    Tag: ['0JA', '0JB', '1JA', '1JB', '2JA', '2JB', '3JA', '3JB', '4JA', '4JB', '5JA', '5JB', 'WJA', 'WJB', '0JD', '0JU', '1JD', '1JU', '2JD', '2JU', '3JD', '3JU', '4JD', '4JU', '6JD', '6JU', 'WJD', 'WJU', 'VJD', 'VJU', 'UJD', 'UJU', 'QJD', 'QJU', '0jA', '0jB', '1jA', '1jB', '2jA', '2jB', '3jA', '3jB', '4jA', '4jB', '5jA', '5jB', 'WjA', 'WjB', '0jD', '0jU', '1jD', '1jU', '2jD', '2jU', '3jD', '3jU', '4jD', '4jU', '6jD', '6jU', 'WjD', 'WjU', 'VjD', 'VjU', 'UjD', 'UjU', 'QjD', 'QjU'],\n    Sor: ['0BA', '0BB', '1BA', '1BB', '2BA', '2BB', '3BA', '3BB', '4BA', '4BB', '5BA', '5BB', 'WBA', 'WBB', '0BD', '0BU', '1BD', '1BU', '2BD', '2BU', '3BD', '3BU', '4BD', '4BU', '6BD', '6BU', 'WBD', 'WBU', 'VBD', 'VBU', 'UBD', 'UBU', 'QBD', 'QBU', '0bA', '0bB', '1bA', '1bB', '2bA', '2bB', '3bA', '3bB', '4bA', '4bB', '5bA', '5bB', 'WbA', 'WbB', '0bD', '0bU', '1bD', '1bU', '2bD', '2bU', '3bD', '3bU', '4bD', '4bU', '6bD', '6bU', 'WbD', 'WbU', 'VbD', 'VbU', 'UbD', 'UbU', 'QbD', 'QbU'],\n    Psi: ['0PA', '0PB', '1PA', '1PB', '2PA', '2PB', '3PA', '3PB', '4PA', '4PB', '5PA', '5PB', 'WPA', 'WPB', '0PD', '0PU', '1PD', '1PU', '2PD', '2PU', '3PD', '3PU', '4PD', '4PU', '6PD', '6PU', 'WPD', 'WPU', 'VPD', 'VPU', 'UPD', 'UPU', 'QPD', 'QPU', '0pA', '0pB', '1pA', '1pB', '2pA', '2pB', '3pA', '3pB', '4pA', '4pB', '5pA', '5pB', 'WpA', 'WpB', '0pD', '0pU', '1pD', '1pU', '2pD', '2pU', '3pD', '3pU', '4pD', '4pU', '6pD', '6pU', 'WpD', 'WpU', 'VpD', 'VpU', 'UpD', 'UpU', 'QpD', 'QpU'],\n    Neu5Ac: ['0SA', '0SB', '4SA', '4SB', '7SA', '7SB', '8SA', '8SB', '9SA', '9SB', 'ASA', 'ASB', 'BSA', 'BSB', 'CSA', 'CSB', 'DSA', 'DSB', 'ESA', 'ESB', 'FSA', 'FSB', 'GSA', 'GSB', 'HSA', 'HSB', 'ISA', 'ISB', 'JSA', 'JSB', 'KSA', 'KSB', '0sA', '0sB', '4sA', '4sB', '7sA', '7sB', '8sA', '8sB', '9sA', '9sB', 'AsA', 'AsB', 'BsA', 'BsB', 'CsA', 'CsB', 'DsA', 'DsB', 'EsA', 'EsB', 'FsA', 'FsB', 'GsA', 'GsB', 'HsA', 'HsB', 'IsA', 'IsB', 'JsA', 'JsB', 'KsA', 'KsB'],\n    Neu5Gc: ['0GL', '4GL', '7GL', '8GL', '9GL', 'CGL', 'DGL', 'EGL', 'FGL', 'GGL', 'HGL', 'IGL', 'JGL', 'KGL', '0gL', '4gL', '7gL', '8gL', '9gL', 'AgL', 'BgL', 'CgL', 'DgL', 'EgL', 'FgL', 'GgL', 'HgL', 'IgL', 'JgL', 'KgL'],\n    Tyv: ['YTV', '4TV', '2TV', '1TV', '0TV', 'YTv', '4Tv', '2Tv', '1Tv', '0Tv'],\n    Abe: ['YAE', '2AE', '4AE', '1AE', '0AE', 'YAe', '4Ae', '2Ae', '1Ae', '0Ae'],\n    Bac: ['0BC', '1BC', '3BC', '0bC', '1bC', '3bC'],\n    Kdn: ['0KN', '4KN', '5KN', '7KN', '8KN', '9KN', 'AKN', 'BKN', 'CKN', 'DKN', 'EKN', 'FKN', 'GKN', 'HKN', 'IKN', 'JKN', 'KKN', 'LKN', 'MKN', 'NKN', 'OKN', 'PKN', 'QKN', 'RKN', 'SKN', 'TKN', 'UKN', 'VKN', 'WKN', 'XKN', 'YKN', '0Kn', '4Kn', '5Kn', '7Kn', '8Kn', '9Kn', 'AKn', 'BKn', 'CKn', 'DKn', 'EKn', 'FKn', 'GKn', 'HKn', 'IKn', 'JKn', 'KKn', 'LKn', 'MKn', 'NKn', 'OKn', 'PKn', 'QKn', 'RKn', 'SKn', 'TKn', 'UKn', 'VKn', 'WKn', 'XKn', 'YKn'],\n    Kdo: ['0KO', '4KO', '5KO', '7KO', '8KO', 'AKO', 'BKO', 'CKO', 'DKO', 'EKO', 'FKO', 'GKO', 'HKO', 'IKO', 'JKO', 'KKO', '0Ko', '4Ko', '5Ko', '7Ko', '8Ko', 'AKo', 'BKo', 'CKo', 'DKo', 'EKo', 'FKo', 'GKo', 'HKo', 'IKo', 'JKo', 'KKo'],\n    QuiNAc: ['0QF', '1QF', '3QF', '0Qf', '1Qf', '3Qf'],\n    AAT: ['0FC', '1FC', '3FC', '0Fc', '1Fc', '3Fc'],\n    Ara4N: ['ZaN', '3aN', '2aN', '1aN', '0aN', 'Zan', '3an', '2an', '1an', '0an'],\n    Aci: ['JeC', '8eC', '4eC', '2eC', '0eC', 'Jec', '8ec', '4ec', '2ec', '0ec'],\n    Leg: ['JLG', '8LG', '4LG', '2LG', '0LG', 'JLg', '8Lg', '4Lg', '2Lg', '0Lg'],\n    Pse: ['JmP', '8mP', '4mP', '2mP', '0mP', 'Jmp', '8mp', '4mp', '2mp', '0mp'],\n    Fus: ['EgF', 'HgF', 'JgF', '8gF', 'KgF', '7gF', '4gF', '2gF', '0gF', 'Egf', 'Hgf', 'Jgf', '8gf', 'Kgf', '7gf', '4gf', '2gf', '0gf'],\n    DDmanpHep: ['ODH', 'NDH', 'LDH', 'MDH', 'KDH', '7DH', 'PDH', 'SDH', 'RDH', 'XDH', 'QDH', 'VDH', 'UDH', '6DH', 'TDH', 'ZDH', 'YDH', '2DH', 'WDH', '3DH', '4DH', '1DH', 'ODh', 'NDh', 'LDh', 'MDh', 'KDh', '7Dh', 'PDh', 'SDh', 'RDh', 'XDh', 'QDh', 'VDh', 'UDh', '6Dh', 'TDh', 'ZDh', 'YDh', '2Dh', 'WDh', '3Dh', '4Dh', '1Dh'],\n    LDmanpHep: ['OLH', 'NLH', 'LLH', 'MLH', 'KLH', '7LH', 'PLH', 'SLH', 'RLH', 'XLH', 'QLH', 'VLH', 'ULH', '6LH', 'TLH', 'ZLH', 'YLH', '2LH', 'WLH', '3LH', '4LH', '1LH', 'OLh', 'NLh', 'LLh', 'MLh', 'KLh', '7Lh', 'PLh', 'SLh', 'RLh', 'XLh', 'QLh', 'VLh', 'ULh', '6Lh', 'TLh', 'ZLh', 'YLh', '2Lh', 'WLh', '3Lh', '4Lh', '1Lh'],\n    K3O: ['dKX', 'EKX', 'hKX', 'HKX', 'jKX', 'JKX', 'pKX', '8KX', 'MKX', 'kKX', 'KKX', 'qKX', '7KX', 'xKX', 'WKX', 'tKX', '3KX', 'sKX', '4KX', '5KX', '2KX', '0KX', 'dKx', 'EKx', 'hKx', 'HKx', 'jKx', 'JKx', 'pKx', '8Kx', 'MKx', 'kKx', 'KKx', 'qKx', '7Kx', 'xKx', 'WKx', 'tKx', '3Kx', 'sKx', '4Kx', '5Kx', '2Kx', '0Kx'],\n    MurNAc: ['UMR', '4MR', '6MR', '1MR', '0MR', 'UMr', '4Mr', '6Mr', '1Mr', '0Mr'],\n    Oli: ['WdR', '4dR', '3dR', '1dR', '0dR'],\n    dUA: ['Z45', '345', '245', '145', '045'],\n    GlcNS: ['QYS', 'UYS', 'VYS', '6YS', 'WYS', '4YS', '3YS', '1YS', '0YS', 'QYs', 'UYs', 'VYs', '6Ys', 'WYs', '4Ys', '3Ys', '1Ys', '0Ys', 'QyS', 'UyS', 'VyS', '6yS', 'WyS', '4yS', '3yS', '1yS', '0yS', 'Qys', 'Uys', 'Vys', '6ys', 'Wys', '4ys', '3ys', '1ys', '0ys'],\n};\nconst DefaultSaccharideCompIdMap = (function () {\n    const map = new Map();\n    for (let i = 0, il = Monosaccharides.length; i < il; ++i) {\n        const saccharide = Monosaccharides[i];\n        const common = CommonSaccharideNames[saccharide.abbr];\n        if (common) {\n            for (let j = 0, jl = common.length; j < jl; ++j) {\n                map.set(common[j], saccharide);\n            }\n        }\n        const charmm = CharmmSaccharideNames[saccharide.abbr];\n        if (charmm) {\n            for (let j = 0, jl = charmm.length; j < jl; ++j) {\n                map.set(charmm[j], saccharide);\n            }\n        }\n    }\n    SaccharideNames.forEach(name => {\n        if (!map.has(name))\n            map.set(name, UnknownSaccharideComponent);\n    });\n    return map;\n})();\nconst GlycamSaccharideCompIdMap = (function () {\n    const map = new Map();\n    for (let i = 0, il = Monosaccharides.length; i < il; ++i) {\n        const saccharide = Monosaccharides[i];\n        const common = CommonSaccharideNames[saccharide.abbr];\n        if (common) {\n            for (let j = 0, jl = common.length; j < jl; ++j) {\n                map.set(common[j], saccharide);\n            }\n        }\n        const charmm = CharmmSaccharideNames[saccharide.abbr];\n        if (charmm) {\n            for (let j = 0, jl = charmm.length; j < jl; ++j) {\n                map.set(charmm[j], saccharide);\n            }\n        }\n        const glycam = GlycamSaccharideNames[saccharide.abbr];\n        if (glycam) {\n            for (let j = 0, jl = glycam.length; j < jl; ++j) {\n                // On collision, use PDB name as default.\n                if (!map.has(glycam[j])) {\n                    map.set(glycam[j], saccharide);\n                }\n            }\n        }\n    }\n    SaccharideNames.forEach(name => {\n        if (!map.has(name))\n            map.set(name, UnknownSaccharideComponent);\n    });\n    return map;\n})();\nexport function setSaccharideCompIdMapType(type) {\n    SaccharideCompIdMap = type === 'default' ? DefaultSaccharideCompIdMap : GlycamSaccharideCompIdMap;\n}\nexport let SaccharideCompIdMap = DefaultSaccharideCompIdMap;\n","/**\n * Copyright (c) 2018-2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nvar Matrix;\n(function (Matrix) {\n    function create(cols, rows, ctor = Float32Array) {\n        const size = cols * rows;\n        return { data: new ctor(size), size, cols, rows };\n    }\n    Matrix.create = create;\n    /** Get element assuming data are stored in column-major order */\n    function get(m, i, j) {\n        return m.data[m.rows * j + i];\n    }\n    Matrix.get = get;\n    /** Set element assuming data are stored in column-major order */\n    function set(m, i, j, value) {\n        m.data[m.rows * j + i] = value;\n        return m;\n    }\n    Matrix.set = set;\n    /** Add to element assuming data are stored in column-major order */\n    function add(m, i, j, value) {\n        m.data[m.rows * j + i] += value;\n        return m;\n    }\n    Matrix.add = add;\n    /** Zero out the matrix */\n    function makeZero(m) {\n        m.data.fill(0.0);\n        return m;\n    }\n    Matrix.makeZero = makeZero;\n    function clone(m) {\n        return { data: m.data.slice(), size: m.size, cols: m.cols, rows: m.rows };\n    }\n    Matrix.clone = clone;\n    function fromArray(data, cols, rows) {\n        return { data, size: cols * rows, cols, rows };\n    }\n    Matrix.fromArray = fromArray;\n    function transpose(out, mat) {\n        if (out.cols !== mat.rows || out.rows !== mat.cols) {\n            throw new Error('transpose: matrix dimensions incompatible');\n        }\n        if (out.data === mat.data) {\n            throw new Error('transpose: matrices share memory');\n        }\n        const nrows = mat.rows, ncols = mat.cols;\n        const md = mat.data, mtd = out.data;\n        for (let i = 0, mi = 0, mti = 0; i < nrows; mti += 1, mi += ncols, ++i) {\n            let ri = mti;\n            for (let j = 0; j < ncols; ri += nrows, j++)\n                mtd[ri] = md[mi + j];\n        }\n        return out;\n    }\n    Matrix.transpose = transpose;\n    /** out = matA * matB' */\n    function multiplyABt(out, matA, matB) {\n        const ncols = matA.cols, nrows = matA.rows, mrows = matB.rows;\n        const ad = matA.data, bd = matB.data, cd = out.data;\n        for (let i = 0, matAp = 0, outP = 0; i < nrows; matAp += ncols, i++) {\n            for (let pB = 0, j = 0; j < mrows; outP++, j++) {\n                let sum = 0.0;\n                let pMatA = matAp;\n                for (let k = 0; k < ncols; pMatA++, pB++, k++) {\n                    sum += ad[pMatA] * bd[pB];\n                }\n                cd[outP] = sum;\n            }\n        }\n        return out;\n    }\n    Matrix.multiplyABt = multiplyABt;\n    /** Get the mean of rows in `mat` */\n    function meanRows(mat) {\n        const nrows = mat.rows, ncols = mat.cols;\n        const md = mat.data;\n        const mean = new Array(ncols);\n        for (let j = 0; j < ncols; ++j)\n            mean[j] = 0.0;\n        for (let i = 0, p = 0; i < nrows; ++i) {\n            for (let j = 0; j < ncols; ++j, ++p)\n                mean[j] += md[p];\n        }\n        for (let j = 0; j < ncols; ++j)\n            mean[j] /= nrows;\n        return mean;\n    }\n    Matrix.meanRows = meanRows;\n    /** Subtract `row` from all rows in `mat` */\n    function subRows(mat, row) {\n        const nrows = mat.rows, ncols = mat.cols;\n        const md = mat.data;\n        for (let i = 0, p = 0; i < nrows; ++i) {\n            for (let j = 0; j < ncols; ++j, ++p)\n                md[p] -= row[j];\n        }\n        return mat;\n    }\n    Matrix.subRows = subRows;\n})(Matrix || (Matrix = {}));\nexport { Matrix };\n","/**\n * Copyright (c) 2018-2022 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { SecondaryStructureType } from '../../../mol-model/structure/model/types.js';\nimport { AtomicHierarchy } from '../../../mol-model/structure/model/properties/atomic.js';\nimport { SecondaryStructure } from '../../../mol-model/structure/model/properties/secondary-structure.js';\nimport { Column } from '../../../mol-data/db.js';\nimport { FormatPropertyProvider } from '../common/property.js';\nexport { ModelSecondaryStructure };\nvar ModelSecondaryStructure;\n(function (ModelSecondaryStructure) {\n    ModelSecondaryStructure.Descriptor = {\n        name: 'model_secondary_structure',\n    };\n    ModelSecondaryStructure.Provider = FormatPropertyProvider.create(ModelSecondaryStructure.Descriptor);\n    function fromStruct(conf, sheetRange, hierarchy) {\n        const map = new Map();\n        const elements = [{ kind: 'none' }];\n        const coordinates = getCoordinateType(conf, sheetRange);\n        addHelices(conf, coordinates, map, elements);\n        // must add Helices 1st because of 'key' value assignment.\n        addSheets(sheetRange, coordinates, map, conf._rowCount, elements);\n        const n = hierarchy.residues._rowCount;\n        const getIndex = (rI) => rI;\n        const secStruct = {\n            type: new Int32Array(n),\n            key: new Int32Array(n),\n            elements\n        };\n        if (map.size > 0)\n            assignSecondaryStructureRanges(hierarchy, coordinates, map, secStruct);\n        return SecondaryStructure(secStruct.type, secStruct.key, secStruct.elements, getIndex);\n    }\n    ModelSecondaryStructure.fromStruct = fromStruct;\n})(ModelSecondaryStructure || (ModelSecondaryStructure = {}));\nfunction getCoordinateType(conf, sheetRange) {\n    if (conf._rowCount > 0) {\n        if (conf.beg_label_seq_id.valueKind(0) !== Column.ValueKinds.Present || conf.end_label_seq_id.valueKind(0) !== Column.ValueKinds.Present)\n            return 'auth';\n    }\n    else if (sheetRange) {\n        if (sheetRange.beg_label_seq_id.valueKind(0) !== Column.ValueKinds.Present || sheetRange.end_label_seq_id.valueKind(0) !== Column.ValueKinds.Present)\n            return 'auth';\n    }\n    return 'label';\n}\nfunction addHelices(cat, coordinates, map, elements) {\n    if (!cat._rowCount)\n        return;\n    const { beg_label_asym_id, beg_label_seq_id, beg_auth_seq_id, pdbx_beg_PDB_ins_code } = cat;\n    const { end_label_seq_id, end_auth_seq_id, pdbx_end_PDB_ins_code } = cat;\n    const { pdbx_PDB_helix_class, conf_type_id, details } = cat;\n    const beg_seq_id = coordinates === 'label' ? beg_label_seq_id : beg_auth_seq_id;\n    const end_seq_id = coordinates === 'label' ? end_label_seq_id : end_auth_seq_id;\n    for (let i = 0, _i = cat._rowCount; i < _i; i++) {\n        const type = SecondaryStructureType.create(pdbx_PDB_helix_class.valueKind(i) === Column.ValueKinds.Present\n            ? SecondaryStructureType.SecondaryStructurePdb[pdbx_PDB_helix_class.value(i)]\n            : conf_type_id.valueKind(i) === Column.ValueKinds.Present\n                ? SecondaryStructureType.SecondaryStructureMmcif[conf_type_id.value(i)]\n                : SecondaryStructureType.Flag.NA);\n        const element = {\n            kind: 'helix',\n            flags: type,\n            type_id: conf_type_id.valueKind(i) === Column.ValueKinds.Present ? conf_type_id.value(i) : 'helx_p',\n            helix_class: pdbx_PDB_helix_class.value(i),\n            details: details.valueKind(i) === Column.ValueKinds.Present ? details.value(i) : void 0\n        };\n        const entry = {\n            startSeqId: beg_seq_id.value(i),\n            startInsCode: pdbx_beg_PDB_ins_code.value(i),\n            endSeqId: end_seq_id.value(i),\n            endInsCode: pdbx_end_PDB_ins_code.value(i),\n            type,\n            key: elements.length\n        };\n        elements[elements.length] = element;\n        const asymId = beg_label_asym_id.value(i);\n        if (map.has(asymId)) {\n            const entries = map.get(asymId);\n            if (entries.has(entry.startSeqId)) {\n                entries.get(entry.startSeqId).push(entry);\n            }\n            else {\n                entries.set(entry.startSeqId, [entry]);\n            }\n        }\n        else {\n            map.set(asymId, new Map([[entry.startSeqId, [entry]]]));\n        }\n    }\n}\nfunction addSheets(cat, coordinates, map, sheetCount, elements) {\n    if (!cat._rowCount)\n        return;\n    const { beg_label_asym_id, beg_label_seq_id, beg_auth_seq_id, pdbx_beg_PDB_ins_code } = cat;\n    const { end_label_seq_id, end_auth_seq_id, pdbx_end_PDB_ins_code } = cat;\n    const { sheet_id } = cat;\n    const beg_seq_id = coordinates === 'label' ? beg_label_seq_id : beg_auth_seq_id;\n    const end_seq_id = coordinates === 'label' ? end_label_seq_id : end_auth_seq_id;\n    const sheet_id_key = new Map();\n    let currentKey = sheetCount + 1;\n    for (let i = 0, _i = cat._rowCount; i < _i; i++) {\n        const id = sheet_id.value(i);\n        let key;\n        if (sheet_id_key.has(id))\n            key = sheet_id_key.get(id);\n        else {\n            key = currentKey++;\n            sheet_id_key.set(id, key);\n        }\n        const type = SecondaryStructureType.create(SecondaryStructureType.Flag.Beta | SecondaryStructureType.Flag.BetaSheet);\n        const element = {\n            kind: 'sheet',\n            flags: type,\n            sheet_id: id,\n            symmetry: void 0\n        };\n        const entry = {\n            startSeqId: beg_seq_id.value(i),\n            startInsCode: pdbx_beg_PDB_ins_code.value(i),\n            endSeqId: end_seq_id.value(i),\n            endInsCode: pdbx_end_PDB_ins_code.value(i),\n            type,\n            key: elements.length\n        };\n        elements[elements.length] = element;\n        const asymId = beg_label_asym_id.value(i);\n        if (map.has(asymId)) {\n            const entries = map.get(asymId);\n            if (entries.has(entry.startSeqId)) {\n                entries.get(entry.startSeqId).push(entry);\n            }\n            else {\n                entries.set(entry.startSeqId, [entry]);\n            }\n        }\n        else {\n            map.set(asymId, new Map([[entry.startSeqId, [entry]]]));\n        }\n    }\n    return;\n}\nfunction assignSecondaryStructureEntry(hierarchy, coordinates, entry, resStart, resEnd, data) {\n    const { auth_seq_id, label_seq_id, pdbx_PDB_ins_code } = hierarchy.residues;\n    const { endSeqId, endInsCode, key, type } = entry;\n    const seq_id = coordinates === 'label' ? label_seq_id : auth_seq_id;\n    let rI = resStart;\n    while (rI < resEnd) {\n        const seqNumber = seq_id.value(rI);\n        data.type[rI] = type;\n        data.key[rI] = key;\n        if ((seqNumber > endSeqId) ||\n            (seqNumber === endSeqId && pdbx_PDB_ins_code.value(rI) === endInsCode)) {\n            break;\n        }\n        rI++;\n    }\n}\nfunction assignSecondaryStructureRanges(hierarchy, coordinates, map, data) {\n    const { count: chainCount } = hierarchy.chainAtomSegments;\n    const { label_asym_id } = hierarchy.chains;\n    const { auth_seq_id, label_seq_id, pdbx_PDB_ins_code } = hierarchy.residues;\n    const seq_id = coordinates === 'label' ? label_seq_id : auth_seq_id;\n    for (let cI = 0; cI < chainCount; cI++) {\n        const resStart = AtomicHierarchy.chainStartResidueIndex(hierarchy, cI), resEnd = AtomicHierarchy.chainEndResidueIndexExcl(hierarchy, cI);\n        const asymId = label_asym_id.value(cI);\n        if (map.has(asymId)) {\n            const entries = map.get(asymId);\n            for (let rI = resStart; rI < resEnd; rI++) {\n                const seqId = seq_id.value(rI);\n                if (entries.has(seqId)) {\n                    const entryList = entries.get(seqId);\n                    for (const entry of entryList) {\n                        const insCode = pdbx_PDB_ins_code.value(rI);\n                        if (entry.startInsCode !== insCode)\n                            continue;\n                        assignSecondaryStructureEntry(hierarchy, coordinates, entry, rI, resEnd, data);\n                    }\n                }\n            }\n        }\n    }\n}\n","/**\n * Copyright (c) 2018 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { Segmentation, SortedArray } from '../../../../../mol-data/int.js';\nimport { IntAdjacencyGraph } from '../../../../../mol-math/graph.js';\nimport { BondType } from '../../../model/types.js';\nimport { sortArray } from '../../../../../mol-data/util.js';\nimport { arraySetAdd, arraySetRemove } from '../../../../../mol-util/array.js';\nexport function computeRings(unit) {\n    const size = largestResidue(unit);\n    const state = State(unit, size);\n    const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, unit.elements);\n    while (residuesIt.hasNext) {\n        const seg = residuesIt.move();\n        processResidue(state, seg.start, seg.end);\n    }\n    return state.rings;\n}\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"MaxDepth\"] = 5] = \"MaxDepth\";\n})(Constants || (Constants = {}));\nfunction State(unit, capacity) {\n    return {\n        startVertex: 0,\n        endVertex: 0,\n        count: 0,\n        isRingAtom: new Int32Array(capacity),\n        marked: new Int32Array(capacity),\n        queue: new Int32Array(capacity),\n        pred: new Int32Array(capacity),\n        depth: new Int32Array(capacity),\n        left: new Int32Array(Constants.MaxDepth),\n        right: new Int32Array(Constants.MaxDepth),\n        color: new Int32Array(capacity),\n        currentColor: 0,\n        currentAltLoc: '',\n        hasAltLoc: false,\n        rings: [],\n        currentRings: [],\n        unit,\n        bonds: unit.bonds,\n        altLoc: unit.model.atomicHierarchy.atoms.label_alt_id\n    };\n}\nfunction resetState(state) {\n    state.count = state.endVertex - state.startVertex;\n    const { isRingAtom, pred, color, depth, marked } = state;\n    for (let i = 0; i < state.count; i++) {\n        isRingAtom[i] = 0;\n        pred[i] = -1;\n        marked[i] = -1;\n        color[i] = 0;\n        depth[i] = 0;\n    }\n    state.currentColor = 0;\n    state.currentAltLoc = '';\n    state.hasAltLoc = false;\n}\nfunction resetDepth(state) {\n    const { depth } = state;\n    for (let i = 0; i < state.count; i++) {\n        depth[i] = state.count + 1;\n    }\n}\nfunction largestResidue(unit) {\n    const residuesIt = Segmentation.transientSegments(unit.model.atomicHierarchy.residueAtomSegments, unit.elements);\n    let size = 0;\n    while (residuesIt.hasNext) {\n        const seg = residuesIt.move();\n        size = Math.max(size, seg.end - seg.start);\n    }\n    return size;\n}\nfunction isStartIndex(state, i) {\n    const bondOffset = state.bonds.offset;\n    const a = state.startVertex + i;\n    const bStart = bondOffset[a], bEnd = bondOffset[a + 1];\n    const bondCount = bEnd - bStart;\n    if (bondCount <= 1 || (state.isRingAtom[i] && bondCount === 2))\n        return false;\n    return true;\n}\nfunction processResidue(state, start, end) {\n    state.startVertex = start;\n    state.endVertex = end;\n    // no two atom rings\n    if (state.endVertex - state.startVertex < 3)\n        return;\n    state.currentRings = [];\n    const { elements } = state.unit;\n    const altLocs = [];\n    for (let i = state.startVertex; i < state.endVertex; i++) {\n        const altLoc = state.altLoc.value(elements[i]);\n        arraySetAdd(altLocs, altLoc);\n    }\n    arraySetRemove(altLocs, '');\n    let mark = 1;\n    if (altLocs.length === 0) {\n        resetState(state);\n        for (let i = 0; i < state.count; i++) {\n            if (!isStartIndex(state, i))\n                continue;\n            resetDepth(state);\n            mark = findRings(state, i, mark);\n        }\n    }\n    else {\n        for (let aI = 0; aI < altLocs.length; aI++) {\n            resetState(state);\n            state.hasAltLoc = true;\n            state.currentAltLoc = altLocs[aI];\n            for (let i = 0; i < state.count; i++) {\n                if (!isStartIndex(state, i))\n                    continue;\n                const altLoc = state.altLoc.value(elements[state.startVertex + i]);\n                if (altLoc && altLoc !== state.currentAltLoc) {\n                    continue;\n                }\n                resetDepth(state);\n                mark = findRings(state, i, mark);\n            }\n        }\n    }\n    for (let i = 0, _i = state.currentRings.length; i < _i; i++) {\n        state.rings.push(state.currentRings[i]);\n    }\n}\nfunction addRing(state, a, b, isRingAtom) {\n    // only \"monotonous\" rings\n    if (b < a) {\n        return false;\n    }\n    const { pred, color, left, right } = state;\n    const nc = ++state.currentColor;\n    let current = a;\n    for (let t = 0; t < Constants.MaxDepth; t++) {\n        color[current] = nc;\n        current = pred[current];\n        if (current < 0)\n            break;\n    }\n    let leftOffset = 0, rightOffset = 0;\n    let found = false, target = 0;\n    current = b;\n    for (let t = 0; t < Constants.MaxDepth; t++) {\n        if (color[current] === nc) {\n            target = current;\n            found = true;\n            break;\n        }\n        right[rightOffset++] = current;\n        current = pred[current];\n        if (current < 0)\n            break;\n    }\n    if (!found) {\n        return false;\n    }\n    current = a;\n    for (let t = 0; t < Constants.MaxDepth; t++) {\n        left[leftOffset++] = current;\n        if (target === current)\n            break;\n        current = pred[current];\n        if (current < 0)\n            break;\n    }\n    const len = leftOffset + rightOffset;\n    // rings must have at least three elements\n    if (len < 3) {\n        return false;\n    }\n    const ring = new Int32Array(len);\n    let ringOffset = 0;\n    for (let t = 0; t < leftOffset; t++) {\n        ring[ringOffset++] = state.startVertex + left[t];\n        isRingAtom[left[t]] = 1;\n    }\n    for (let t = rightOffset - 1; t >= 0; t--) {\n        ring[ringOffset++] = state.startVertex + right[t];\n        isRingAtom[right[t]] = 1;\n    }\n    sortArray(ring);\n    // Check if the ring is unique and another one is not it's subset\n    for (let rI = 0, _rI = state.currentRings.length; rI < _rI; rI++) {\n        const r = state.currentRings[rI];\n        if (ring.length === r.length) {\n            if (SortedArray.areEqual(ring, r))\n                return false;\n        }\n        else if (ring.length > r.length) {\n            if (SortedArray.isSubset(ring, r))\n                return false;\n        }\n    }\n    state.currentRings.push(SortedArray.ofSortedArray(ring));\n    return true;\n}\nfunction findRings(state, from, mark) {\n    const { bonds, startVertex, endVertex, isRingAtom, marked, queue, pred, depth } = state;\n    const { elements } = state.unit;\n    const { b: neighbor, edgeProps: { flags: bondFlags }, offset } = bonds;\n    marked[from] = mark;\n    depth[from] = 0;\n    queue[0] = from;\n    let head = 0, size = 1;\n    while (head < size) {\n        const top = queue[head++];\n        const d = depth[top];\n        const a = startVertex + top;\n        const start = offset[a], end = offset[a + 1];\n        for (let i = start; i < end; i++) {\n            const b = neighbor[i];\n            if (b < startVertex || b >= endVertex || !BondType.isCovalent(bondFlags[i]))\n                continue;\n            if (state.hasAltLoc) {\n                const altLoc = state.altLoc.value(elements[b]);\n                if (altLoc && state.currentAltLoc !== altLoc) {\n                    continue;\n                }\n            }\n            const other = b - startVertex;\n            if (marked[other] === mark) {\n                if (pred[other] !== top && pred[top] !== other) {\n                    if (addRing(state, top, other, isRingAtom)) {\n                        return mark + 1;\n                    }\n                }\n                continue;\n            }\n            const newDepth = Math.min(depth[other], d + 1);\n            if (newDepth > Constants.MaxDepth)\n                continue;\n            depth[other] = newDepth;\n            marked[other] = mark;\n            queue[size++] = other;\n            pred[other] = top;\n        }\n    }\n    return mark + 1;\n}\nexport function getFingerprint(elements) {\n    const len = elements.length;\n    const reversed = new Array(len);\n    for (let i = 0; i < len; i++)\n        reversed[i] = elements[len - i - 1];\n    const rotNormal = getMinimalRotation(elements);\n    const rotReversed = getMinimalRotation(reversed);\n    let isNormalSmaller = false;\n    for (let i = 0; i < len; i++) {\n        const u = elements[(i + rotNormal) % len], v = reversed[(i + rotReversed) % len];\n        if (u !== v) {\n            isNormalSmaller = u < v;\n            break;\n        }\n    }\n    if (isNormalSmaller)\n        return buildFinderprint(elements, rotNormal);\n    return buildFinderprint(reversed, rotReversed);\n}\nfunction getMinimalRotation(elements) {\n    // adapted from http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation\n    const len = elements.length;\n    const f = new Int32Array(len * 2);\n    for (let i = 0; i < f.length; i++)\n        f[i] = -1;\n    let u = '', v = '', k = 0;\n    for (let j = 1; j < f.length; j++) {\n        let i = f[j - k - 1];\n        while (i !== -1) {\n            u = elements[j % len];\n            v = elements[(k + i + 1) % len];\n            if (u === v)\n                break;\n            if (u < v)\n                k = j - i - 1;\n            i = f[i];\n        }\n        if (i === -1) {\n            u = elements[j % len];\n            v = elements[(k + i + 1) % len];\n            if (u !== v) {\n                if (u < v)\n                    k = j;\n                f[j - k] = -1;\n            }\n            else\n                f[j - k] = i + 1;\n        }\n        else\n            f[j - k] = i + 1;\n    }\n    return k;\n}\nfunction buildFinderprint(elements, offset) {\n    const len = elements.length;\n    const ret = [];\n    let i;\n    for (i = 0; i < len - 1; i++) {\n        ret.push(elements[(i + offset) % len]);\n        ret.push('-');\n    }\n    ret.push(elements[(i + offset) % len]);\n    return ret.join('');\n}\nexport function createIndex(rings, aromaticRings) {\n    const elementRingIndices = new Map();\n    const elementAromaticRingIndices = new Map();\n    // for each ring atom, assign all rings that it is present in\n    for (let rI = 0, _rI = rings.length; rI < _rI; rI++) {\n        const r = rings[rI];\n        for (let i = 0, _i = r.length; i < _i; i++) {\n            const e = r[i];\n            if (elementRingIndices.has(e))\n                elementRingIndices.get(e).push(rI);\n            else\n                elementRingIndices.set(e, [rI]);\n        }\n    }\n    // for each ring atom, assign all aromatic rings that it is present in\n    for (let aI = 0, _aI = aromaticRings.length; aI < _aI; aI++) {\n        const rI = aromaticRings[aI];\n        const r = rings[rI];\n        for (let i = 0, _i = r.length; i < _i; i++) {\n            const e = r[i];\n            if (elementAromaticRingIndices.has(e))\n                elementAromaticRingIndices.get(e).push(rI);\n            else\n                elementAromaticRingIndices.set(e, [rI]);\n        }\n    }\n    // create a graph where vertices are rings, edge if two rings share at least one atom\n    const graph = new IntAdjacencyGraph.UniqueEdgeBuilder(rings.length);\n    for (let rI = 0, _rI = rings.length; rI < _rI; rI++) {\n        const r = rings[rI];\n        for (let i = 0, _i = r.length; i < _i; i++) {\n            const e = r[i];\n            const containedRings = elementRingIndices.get(e);\n            if (containedRings.length === 1)\n                continue;\n            for (let j = 0, _j = containedRings.length; j < _j; j++) {\n                const rJ = containedRings[j];\n                if (rI >= rJ)\n                    continue;\n                graph.addEdge(rI, rJ);\n            }\n        }\n    }\n    const components = IntAdjacencyGraph.connectedComponents(graph.getGraph());\n    const ringComponentIndex = components.componentIndex;\n    const ringComponents = [];\n    for (let i = 0; i < components.componentCount; i++)\n        ringComponents[i] = [];\n    for (let rI = 0, _rI = rings.length; rI < _rI; rI++) {\n        ringComponents[ringComponentIndex[rI]].push(rI);\n    }\n    return { elementRingIndices, elementAromaticRingIndices, ringComponentIndex, ringComponents };\n}\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { computeRings, getFingerprint, createIndex } from './rings/compute.js';\nimport { Unit } from '../unit.js';\nimport { SortedArray } from '../../../../mol-data/int.js';\nimport { BondType } from '../../model/types.js';\nimport { Elements } from '../../model/properties/atomic/types.js';\nimport { getPositions } from '../../util.js';\nimport { PrincipalAxes } from '../../../../mol-math/linear-algebra/matrix/principal-axes.js';\nimport { Vec3 } from '../../../../mol-math/linear-algebra.js';\nclass UnitRings {\n    get index() {\n        if (this._index)\n            return this._index;\n        this._index = createIndex(this.all, this.aromaticRings);\n        return this._index;\n    }\n    get byFingerprint() {\n        if (this._byFingerprint)\n            return this._byFingerprint;\n        this._byFingerprint = createByFingerprint(this.unit, this.all);\n        return this._byFingerprint;\n    }\n    /** Maps atom index inside a Unit to ring indices (an atom can be part of more than one ring) */\n    get elementRingIndices() {\n        return this.index.elementRingIndices;\n    }\n    get elementAromaticRingIndices() {\n        return this.index.elementAromaticRingIndices;\n    }\n    /** Maps UnitRings.Index to index to ringComponents */\n    get ringComponentIndex() {\n        return this.index.ringComponentIndex;\n    }\n    get ringComponents() {\n        return this.index.ringComponents;\n    }\n    get aromaticRings() {\n        if (this._aromaticRings)\n            return this._aromaticRings;\n        this._aromaticRings = getAromaticRings(this.unit, this.all);\n        return this._aromaticRings;\n    }\n    constructor(all, unit) {\n        this.unit = unit;\n        this.all = all;\n    }\n}\nvar UnitRing;\n(function (UnitRing) {\n    function fingerprint(unit, ring) {\n        const { elements } = unit;\n        const { type_symbol } = unit.model.atomicHierarchy.atoms;\n        const symbols = [];\n        for (let i = 0, _i = ring.length; i < _i; i++)\n            symbols[symbols.length] = type_symbol.value(elements[ring[i]]);\n        return elementFingerprint(symbols);\n    }\n    UnitRing.fingerprint = fingerprint;\n    function elementFingerprint(elements) {\n        return getFingerprint(elements);\n    }\n    UnitRing.elementFingerprint = elementFingerprint;\n    const AromaticRingElements = new Set([\n        Elements.B, Elements.C, Elements.N, Elements.O,\n        Elements.SI, Elements.P, Elements.S,\n        Elements.GE, Elements.AS,\n        Elements.SN, Elements.SB,\n        Elements.BI\n    ]);\n    const AromaticRingPlanarityThreshold = 0.05;\n    function isAromatic(unit, ring) {\n        const { elements, bonds: { b, offset, edgeProps: { flags } } } = unit;\n        const { type_symbol, label_comp_id } = unit.model.atomicHierarchy.atoms;\n        // ignore Proline (can be flat because of bad geometry)\n        if (label_comp_id.value(unit.elements[ring[0]]) === 'PRO')\n            return false;\n        let aromaticBondCount = 0;\n        let hasAromaticRingElement = false;\n        for (let i = 0, il = ring.length; i < il; ++i) {\n            const aI = ring[i];\n            if (!hasAromaticRingElement && AromaticRingElements.has(type_symbol.value(elements[aI]))) {\n                hasAromaticRingElement = true;\n            }\n            for (let j = offset[aI], jl = offset[aI + 1]; j < jl; ++j) {\n                // comes e.g. from `chem_comp_bond.pdbx_aromatic_flag`\n                if (BondType.is(BondType.Flag.Aromatic, flags[j])) {\n                    if (SortedArray.has(ring, b[j]))\n                        aromaticBondCount += 1;\n                }\n            }\n        }\n        if (aromaticBondCount === 2 * ring.length)\n            return true;\n        if (!hasAromaticRingElement)\n            return false;\n        if (ring.length < 5)\n            return false;\n        // no planarity-based aromaticity if any aromatic flags are present\n        if (aromaticBondCount > 0)\n            return false;\n        const ma = PrincipalAxes.calculateMomentsAxes(getPositions(unit, ring));\n        return Vec3.magnitude(ma.dirC) < AromaticRingPlanarityThreshold;\n    }\n    UnitRing.isAromatic = isAromatic;\n    /** Get the alternate location of the 1st non '' alt loc atom. */\n    function getAltId(unit, ring) {\n        const { label_alt_id } = unit.model.atomicHierarchy.atoms;\n        const { elements } = unit;\n        for (let i = 0, il = ring.length; i < il; ++i) {\n            const eI = elements[ring[i]];\n            const altId = label_alt_id.value(eI);\n            if (altId)\n                return altId;\n        }\n        return '';\n    }\n    UnitRing.getAltId = getAltId;\n})(UnitRing || (UnitRing = {}));\n(function (UnitRings) {\n    function create(unit) {\n        if (Unit.Traits.is(unit.traits, Unit.Trait.Water) || Unit.Traits.is(unit.traits, Unit.Trait.CoarseGrained)) {\n            return new UnitRings([], unit);\n        }\n        const rings = computeRings(unit);\n        return new UnitRings(rings, unit);\n    }\n    UnitRings.create = create;\n    /** Creates a mapping ResidueIndex -> list or rings that are on that residue and have one of the specified fingerprints. */\n    function byFingerprintAndResidue(rings, fingerprints) {\n        const map = new Map();\n        for (let fI = 0, _fI = fingerprints.length; fI < _fI; fI++) {\n            const fp = fingerprints[fI];\n            addSingleResidueRings(rings, fp, map);\n        }\n        return map;\n    }\n    UnitRings.byFingerprintAndResidue = byFingerprintAndResidue;\n})(UnitRings || (UnitRings = {}));\nfunction createByFingerprint(unit, rings) {\n    const byFingerprint = new Map();\n    let idx = 0;\n    for (let rI = 0, _rI = rings.length; rI < _rI; rI++) {\n        const r = rings[rI];\n        const fp = UnitRing.fingerprint(unit, r);\n        if (byFingerprint.has(fp))\n            byFingerprint.get(fp).push(idx);\n        else\n            byFingerprint.set(fp, [idx]);\n        idx++;\n    }\n    return byFingerprint;\n}\nfunction ringResidueIdx(unit, ring) {\n    const { elements } = unit;\n    const residueIndex = unit.model.atomicHierarchy.residueAtomSegments.index;\n    const idx = residueIndex[elements[ring[0]]];\n    for (let rI = 1, _rI = ring.length; rI < _rI; rI++) {\n        if (idx !== residueIndex[elements[ring[rI]]])\n            return -1;\n    }\n    return idx;\n}\nfunction addSingleResidueRings(rings, fp, map) {\n    const byFp = rings.byFingerprint.get(fp);\n    if (!byFp)\n        return;\n    for (let rI = 0, _rI = byFp.length; rI < _rI; rI++) {\n        const r = byFp[rI];\n        const idx = ringResidueIdx(rings.unit, rings.all[r]);\n        if (idx >= 0) {\n            if (map.has(idx))\n                map.get(idx).push(r);\n            else\n                map.set(idx, [r]);\n        }\n    }\n}\nfunction getAromaticRings(unit, rings) {\n    const aromaticRings = [];\n    for (let i = 0, il = rings.length; i < il; ++i) {\n        if (UnitRing.isAromatic(unit, rings[i]))\n            aromaticRings.push(i);\n    }\n    return aromaticRings;\n}\nexport { UnitRing, UnitRings };\n","/**\n * Copyright (c) 2017-2020 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n *\n * based in part on https://github.com/dsehnal/CIFTools.js\n */\n/**\n * Efficient integer and float parsers.\n *\n * For the purposes of parsing numbers from the mmCIF data representations,\n * up to 4 times faster than JS parseInt/parseFloat.\n */\nexport function parseIntSkipLeadingWhitespace(str, start, end) {\n    while (start < end && str.charCodeAt(start) === 32)\n        start++;\n    return parseInt(str, start, end);\n}\nexport function parseInt(str, start, end) {\n    let _start = start, ret = 0, neg = 1;\n    if (str.charCodeAt(_start) === 45 /* - */) {\n        neg = -1;\n        ++_start;\n    }\n    else if (str.charCodeAt(_start) === 43 /* + */) {\n        ++_start;\n    }\n    for (; _start < end; _start++) {\n        const c = str.charCodeAt(_start) - 48;\n        if (c > 9 || c < 0)\n            return (neg * ret) | 0;\n        else\n            ret = (10 * ret + c) | 0;\n    }\n    return neg * ret;\n}\nfunction parseScientific(main, str, start, end) {\n    // handle + in '1e+1' separately.\n    if (str.charCodeAt(start) === 43 /* + */)\n        start++;\n    return main * Math.pow(10.0, parseInt(str, start, end));\n}\nexport function parseFloatSkipLeadingWhitespace(str, start, end) {\n    while (start < end && str.charCodeAt(start) === 32)\n        start++;\n    return parseFloat(str, start, end);\n}\nexport function parseFloat(str, start, end) {\n    let _start = start, neg = 1.0, ret = 0.0, point = 0.0, div = 1.0;\n    if (str.charCodeAt(_start) === 45 /* - */) {\n        neg = -1;\n        ++_start;\n    }\n    else if (str.charCodeAt(_start) === 43 /* + */) {\n        ++_start;\n    }\n    while (_start < end) {\n        let c = str.charCodeAt(_start) - 48;\n        if (c >= 0 && c < 10) {\n            ret = ret * 10 + c;\n            ++_start;\n        }\n        else if (c === -2) { // .\n            ++_start;\n            while (_start < end) {\n                c = str.charCodeAt(_start) - 48;\n                if (c >= 0 && c < 10) {\n                    point = 10.0 * point + c;\n                    div = 10.0 * div;\n                    ++_start;\n                }\n                else if (c === 53 || c === 21) { // 'e'/'E'\n                    return parseScientific(neg * (ret + point / div), str, _start + 1, end);\n                }\n                else {\n                    return neg * (ret + point / div);\n                }\n            }\n            return neg * (ret + point / div);\n        }\n        else if (c === 53 || c === 21) { // 'e'/'E'\n            return parseScientific(neg * ret, str, _start + 1, end);\n        }\n        else {\n            break;\n        }\n    }\n    return neg * ret;\n}\nexport var NumberTypes;\n(function (NumberTypes) {\n    NumberTypes[NumberTypes[\"Int\"] = 0] = \"Int\";\n    NumberTypes[NumberTypes[\"Float\"] = 1] = \"Float\";\n    NumberTypes[NumberTypes[\"Scientific\"] = 2] = \"Scientific\";\n    NumberTypes[NumberTypes[\"NaN\"] = 3] = \"NaN\";\n})(NumberTypes || (NumberTypes = {}));\nexport const NumberType = {\n    Int: NumberTypes.Int,\n    Float: NumberTypes.Float,\n    Scientific: NumberTypes.Scientific,\n    NaN: NumberTypes.NaN\n};\nfunction isInt(str, start, end) {\n    if (str.charCodeAt(start) === 45 /* - */) {\n        start++;\n    }\n    for (; start < end; start++) {\n        const c = str.charCodeAt(start) - 48;\n        if (c > 9 || c < 0)\n            return false;\n    }\n    return true;\n}\n// TODO: check for \"scientific integers?\"\nfunction getNumberTypeScientific(str, start, end) {\n    // handle + in '1e+1' separately.\n    if (str.charCodeAt(start) === 43 /* + */)\n        start++;\n    return isInt(str, start, end) ? NumberTypes.Scientific : NumberTypes.NaN;\n}\n/** The whole range must match, otherwise returns NaN */\nexport function getNumberType(str) {\n    let start = 0;\n    const end = str.length;\n    if (str.charCodeAt(start) === 45) { // -\n        ++start;\n    }\n    // string is . or -.\n    if (str.charCodeAt(start) === 46 && end - start === 1) {\n        return NumberTypes.NaN;\n    }\n    while (start < end) {\n        let c = str.charCodeAt(start) - 48;\n        if (c >= 0 && c < 10) {\n            ++start;\n        }\n        else if (c === -2) { // .\n            ++start;\n            let hasDigit = false;\n            while (start < end) {\n                c = str.charCodeAt(start) - 48;\n                if (c >= 0 && c < 10) {\n                    hasDigit = true;\n                    ++start;\n                }\n                else if (c === 53 || c === 21) { // 'e'/'E'\n                    return getNumberTypeScientific(str, start + 1, end);\n                }\n                else {\n                    return NumberTypes.NaN;\n                }\n            }\n            return hasDigit ? NumberTypes.Float : NumberTypes.Int;\n        }\n        else if (c === 53 || c === 21) { // 'e'/'E'\n            if (start === 0 || start === 1 && str.charCodeAt(0) === 45) {\n                return NumberTypes.NaN; // string starts with e/E or -e/-E\n            }\n            return getNumberTypeScientific(str, start + 1, end);\n        }\n        else {\n            break;\n        }\n    }\n    return start === end ? NumberTypes.Int : NumberTypes.NaN;\n}\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Adam Midlik <midlik@gmail.com>\n */\nimport { utf8Read } from './utf8.js';\nexport const StringLike = {\n    /** Return true if `obj` is instance of `StringLike` */\n    is(obj) {\n        return typeof obj.charCodeAt === 'function'; // a bit hacky\n    },\n    /** Try to convert `StringLike` to a primitive `string`. Might fail if the content is longer that max allowed string length. */\n    toString(str) {\n        try {\n            return str.toString();\n        }\n        catch (err) {\n            throw new Error(`Failed to convert StringLike object into string. This might be because the length ${str.length} exceeds maximum allowed string length ${MAX_STRING_LENGTH}. (${err})`);\n        }\n    },\n};\n/** Maximum allowed string length (might be bigger for some engines, but in Chrome 136 and Node 22 it is this). */\nexport const MAX_STRING_LENGTH = 536870888;\n/** Binary logarithm of default string chunk size for `ChunkedBigString`. (string chunk size is chosen to be a power of 2, so we can use faster bit shift operator instead of integer division) */\nconst DEFAULT_LOG_STRING_CHUNK_SIZE = 28; // 2**28 is the largest power of 2 which is <= MAX_STRING_LENGTH\n/** Implementation of `CustomString`, based on an array of fixed-length strings (chunks). */\nexport class ChunkedBigString {\n    get length() {\n        return this._length;\n    }\n    constructor(logStringChunkSize = DEFAULT_LOG_STRING_CHUNK_SIZE) {\n        this._chunks = [];\n        this._length = 0;\n        this._tmpArray = [];\n        this.STRING_CHUNK_SIZE = 2 ** logStringChunkSize;\n        this.STRING_CHUNK_SHIFT = logStringChunkSize;\n        this.STRING_CHUNK_MASK = 2 ** logStringChunkSize - 1;\n    }\n    static fromString(content, logStringChunkSize = DEFAULT_LOG_STRING_CHUNK_SIZE) {\n        const out = new ChunkedBigString(logStringChunkSize);\n        out._append(content);\n        return out;\n    }\n    static fromStrings(content, logStringChunkSize = DEFAULT_LOG_STRING_CHUNK_SIZE) {\n        const out = new ChunkedBigString(logStringChunkSize);\n        for (const inputChunk of content) {\n            out._append(inputChunk);\n        }\n        return out;\n    }\n    /** Create instance from UTF8 data. (Do not call directly, prefer `utf8ReadLong` in utf8.ts.) */\n    static fromUtf8Data(data, start = 0, end = data.length, logStringChunkSize = DEFAULT_LOG_STRING_CHUNK_SIZE) {\n        const bufferChunkSize = 2 ** logStringChunkSize; // n bytes will always decode to <=n characters\n        const stringChunks = [];\n        let readStart = start;\n        while (readStart < end) {\n            let readEnd = Math.min(readStart + bufferChunkSize, end);\n            if (readEnd < end) {\n                // This is buffer chunk boundary, adjust to avoid cutting multi-byte characters\n                while ((data[readEnd] & 0xC0) === 0x80) { // Byte after the cut is a continuation byte (10xxxxxx)\n                    readEnd--;\n                    if (readEnd === readStart)\n                        throw new Error('Input is rubbish, no UTF-8 character start found in a chunk');\n                }\n            } // Else this is the end of the read region, let default error handling do its job\n            const stringChunk = utf8Read(data, readStart, readEnd - readStart);\n            stringChunks.push(stringChunk);\n            readStart = readEnd;\n        }\n        return ChunkedBigString.fromStrings(stringChunks, logStringChunkSize);\n    }\n    _append(inputChunk) {\n        const chunkSize = this.STRING_CHUNK_SIZE;\n        const tail = (this._chunks.length === 0 || this._chunks[this._chunks.length - 1].length === chunkSize) ? '' : this._chunks.pop();\n        let inputPtr = chunkSize - tail.length;\n        this._chunks.push(tail + inputChunk.substring(0, inputPtr)); // Assuming .substring() deals with inputPtr > inputChunk.length\n        while (inputPtr < inputChunk.length) {\n            this._chunks.push(inputChunk.substring(inputPtr, inputPtr + chunkSize)); // Assuming .substring() deals with inputPtr + chunkSize > inputChunk.length\n            inputPtr += chunkSize;\n        }\n        this._length += inputChunk.length;\n    }\n    _getChunkIndex(index) {\n        return index >>> this.STRING_CHUNK_SHIFT; // equivalent to `Math.floor(index / STRING_CHUNK_SIZE)`\n    }\n    _getIndexInChunk(index) {\n        return index & this.STRING_CHUNK_MASK; // equivalent to `index % STRING_CHUNK_SIZE`\n    }\n    _isOutOfRange(index) {\n        return index < 0 || index >= this.length;\n    }\n    at(index) {\n        if (-this.length <= index && index < 0) {\n            return this.at(index + this.length);\n        }\n        return this.charAt(index) || undefined;\n    }\n    charAt(index) {\n        if (this._isOutOfRange(index))\n            return '';\n        const iChunk = this._getChunkIndex(index);\n        const indexInChunk = this._getIndexInChunk(index);\n        return this._chunks[iChunk][indexInChunk];\n    }\n    charCodeAt(index) {\n        if (this._isOutOfRange(index))\n            return NaN;\n        const iChunk = this._getChunkIndex(index);\n        const indexInChunk = this._getIndexInChunk(index);\n        return this._chunks[iChunk].charCodeAt(indexInChunk);\n    }\n    substring(start, end) {\n        const start_ = Math.min(Math.max(start !== null && start !== void 0 ? start : 0, 0), this.length);\n        const end_ = Math.min(Math.max(end !== null && end !== void 0 ? end : this.length, 0), this.length);\n        if (start_ > end_) {\n            return this.substring(end_, start_);\n        }\n        if (start_ === end_) {\n            return '';\n        }\n        if (end_ - start_ > MAX_STRING_LENGTH) {\n            throw new Error(`Trying to create get a substring longer (${end_ - start_}) than maximum allowed string length (${MAX_STRING_LENGTH}).`);\n        }\n        const iFirstChunk = this._getChunkIndex(start_);\n        const indexInChunkFrom = this._getIndexInChunk(start_);\n        const iLastChunk = this._getChunkIndex(end_);\n        const indexInChunkTo = this._getIndexInChunk(end_);\n        if (iFirstChunk === iLastChunk) {\n            return this._chunks[iFirstChunk].substring(indexInChunkFrom, indexInChunkTo);\n        }\n        else {\n            const out = this._getTmpArray();\n            out.push(this._chunks[iFirstChunk].substring(indexInChunkFrom, this.STRING_CHUNK_SIZE));\n            for (let iChunk = iFirstChunk + 1; iChunk < iLastChunk; iChunk++) {\n                out.push(this._chunks[iChunk]);\n            }\n            out.push(this._chunks[iLastChunk].substring(0, indexInChunkTo));\n            return out.join('');\n        }\n    }\n    _getTmpArray() {\n        while (this._tmpArray.length)\n            this._tmpArray.pop(); // this seems to be faster than `this._tmpArray.length = 0` for short arrays\n        return this._tmpArray;\n    }\n    indexOf(searchString, position = 0) {\n        if (searchString.length > this.STRING_CHUNK_SIZE) {\n            throw new Error('NotImplementedError: indexOf is only implemented for searchString shorter than STRING_CHUNK_SIZE');\n            // In real use-cases STRING_CHUNK_SIZE is big and it doesn't make sense to search for such long substrings.\n        }\n        if (position < 0)\n            position = 0;\n        const iFirstChunk = this._getChunkIndex(position);\n        for (let iChunk = iFirstChunk; iChunk < this._chunks.length; iChunk++) {\n            const chunk = this._chunks[iChunk];\n            const positionInChunk = iChunk === iFirstChunk ? this._getIndexInChunk(position) : 0;\n            // Try to find the whole substring in this chunk\n            const found = chunk.indexOf(searchString, positionInChunk);\n            if (found >= 0)\n                return iChunk * this.STRING_CHUNK_SIZE + found;\n            // Try to find the substring overflowing to the next chunk (assumes searchString.length <= STRING_CHUNK_SIZE)\n            if (iChunk !== this._chunks.length - 1) {\n                const start = Math.max(this.STRING_CHUNK_SIZE - searchString.length + 1, positionInChunk);\n                const aroundBoundary = chunk.substring(start, undefined) + this._chunks[iChunk + 1].substring(0, searchString.length - 1);\n                const found = aroundBoundary.indexOf(searchString);\n                if (found >= 0)\n                    return iChunk * this.STRING_CHUNK_SIZE + start + found;\n            }\n        }\n        return -1;\n    }\n    includes(searchString, position = 0) {\n        return this.indexOf(searchString, position) >= 0;\n    }\n    startsWith(searchString, position = 0) {\n        if (searchString.length > this.STRING_CHUNK_SIZE) {\n            throw new Error('NotImplementedError: startsWith is only implemented for searchString shorter than STRING_CHUNK_SIZE');\n            // In real use-cases STRING_CHUNK_SIZE is big and it doesn't make sense to search for such long substrings.\n        }\n        return this.substring(position, position + searchString.length) === searchString;\n    }\n    toString() {\n        try {\n            return this._chunks.join('');\n        }\n        catch (err) {\n            throw new Error(`Failed to convert StringLike object into string. This might be because the length ${this.length} exceeds maximum allowed string length ${MAX_STRING_LENGTH}. (${err})`);\n        }\n    }\n}\n","/**\n * Copyright (c) 2019-2024 Mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { IntAdjacencyGraph } from '../../../../mol-math/graph.js';\nimport { FormatPropertyProvider } from '../../common/property.js';\nimport { BondType } from '../../../../mol-model/structure/model/types.js';\nfunction getGraph(indexA, indexB, props, count) {\n    const builder = new IntAdjacencyGraph.EdgeBuilder(count, indexA, indexB);\n    const key = new Int32Array(builder.slotCount);\n    const operatorA = new Array(builder.slotCount);\n    const operatorB = new Array(builder.slotCount);\n    const order = new Int8Array(builder.slotCount);\n    const distance = new Array(builder.slotCount);\n    const flag = new Array(builder.slotCount);\n    for (let i = 0, _i = builder.edgeCount; i < _i; i++) {\n        builder.addNextEdge();\n        builder.assignProperty(key, props.key ? props.key[i] : -1);\n        builder.assignDirectedProperty(operatorA, props.operatorA ? props.operatorA[i] : -1, operatorB, props.operatorB ? props.operatorB[i] : -1);\n        builder.assignProperty(order, props.order ? props.order[i] : 1);\n        builder.assignProperty(distance, props.distance ? props.distance[i] : -1);\n        builder.assignProperty(flag, props.flag ? props.flag[i] : BondType.Flag.Covalent);\n    }\n    return builder.createGraph({ key, operatorA, operatorB, order, distance, flag });\n}\nexport var IndexPairBonds;\n(function (IndexPairBonds) {\n    IndexPairBonds.Descriptor = {\n        name: 'index_pair_bonds',\n    };\n    IndexPairBonds.Provider = FormatPropertyProvider.create(IndexPairBonds.Descriptor, { asDynamic: true });\n    IndexPairBonds.DefaultProps = {\n        /**\n         * If negative, test using element-based threshold, otherwise distance in Angstrom.\n         *\n         * This option exists to handle bonds in periodic cells. For systems that are\n         * made from beads (as opposed to atomic elements), set to a specific distance.\n         *\n         * Note that `Data` has a `distance` field which allows specifying a distance\n         * for each bond individually which takes precedence over this option.\n         */\n        maxDistance: -1,\n        /** Can be cached in `ElementSetIntraBondCache` */\n        cacheable: true,\n    };\n    function fromData(data, props = {}) {\n        const p = { ...IndexPairBonds.DefaultProps, ...props };\n        const { pairs, count } = data;\n        const indexA = pairs.indexA.toArray();\n        const indexB = pairs.indexB.toArray();\n        const key = pairs.key && pairs.key.toArray();\n        const operatorA = pairs.operatorA && pairs.operatorA.toArray();\n        const operatorB = pairs.operatorB && pairs.operatorB.toArray();\n        const order = pairs.order && pairs.order.toArray();\n        const distance = pairs.distance && pairs.distance.toArray();\n        const flag = pairs.flag && pairs.flag.toArray();\n        let hasOperators = false;\n        if (operatorA && operatorB) {\n            hasOperators = true;\n            for (let i = 0, il = operatorA.length; i < il; ++i) {\n                if (operatorA[i] === -1 || operatorB[i] === -1) {\n                    hasOperators = false;\n                    break;\n                }\n            }\n        }\n        const bonds = getGraph(indexA, indexB, { key, operatorA, operatorB, order, distance, flag }, count);\n        const bySameOperator = new Map();\n        if (hasOperators) {\n            const { operatorA, operatorB } = bonds.edgeProps;\n            for (let i = 0, il = operatorA.length; i < il; ++i) {\n                if (operatorA[i] === operatorB[i]) {\n                    const op = operatorA[i];\n                    if (bySameOperator.has(op))\n                        bySameOperator.get(op).push(i);\n                    else\n                        bySameOperator.set(op, [i]);\n                }\n            }\n        }\n        return {\n            bonds,\n            maxDistance: p.maxDistance,\n            cacheable: p.cacheable,\n            hasOperators,\n            bySameOperator,\n        };\n    }\n    IndexPairBonds.fromData = fromData;\n    /** Like `getEdgeIndex` but taking `edgeProps.operatorA` and `edgeProps.operatorB` into account */\n    function getEdgeIndexForOperators(bonds, i, j, opI, opJ) {\n        let a, b, opA, opB;\n        if (i < j) {\n            a = i;\n            b = j;\n            opA = opI;\n            opB = opJ;\n        }\n        else {\n            a = j;\n            b = i;\n            opA = opJ;\n            opB = opI;\n        }\n        for (let t = bonds.offset[a], _t = bonds.offset[a + 1]; t < _t; t++) {\n            if (bonds.b[t] === b && bonds.edgeProps.operatorA[t] === opA && bonds.edgeProps.operatorB[t] === opB)\n                return t;\n        }\n        return -1;\n    }\n    IndexPairBonds.getEdgeIndexForOperators = getEdgeIndexForOperators;\n})(IndexPairBonds || (IndexPairBonds = {}));\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/*\n * This code has been modified from https://github.com/toji/gl-matrix/,\n * copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n */\nimport { EPSILON, equalEps } from './common.js';\nimport { Vec3 } from './vec3.js';\nimport { Quat } from './quat.js';\nimport { degToRad } from '../../misc.js';\nfunction Mat4() {\n    return Mat4.zero();\n}\n/**\n * Stores a 4x4 matrix in a column major (j * 4 + i indexing) format.\n */\n(function (Mat4) {\n    function zero() {\n        // force double backing array by 0.1.\n        const ret = [0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        ret[0] = 0.0;\n        return ret;\n    }\n    Mat4.zero = zero;\n    function identity() {\n        const out = zero();\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = 1;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 1;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.identity = identity;\n    function setIdentity(mat) {\n        mat[0] = 1;\n        mat[1] = 0;\n        mat[2] = 0;\n        mat[3] = 0;\n        mat[4] = 0;\n        mat[5] = 1;\n        mat[6] = 0;\n        mat[7] = 0;\n        mat[8] = 0;\n        mat[9] = 0;\n        mat[10] = 1;\n        mat[11] = 0;\n        mat[12] = 0;\n        mat[13] = 0;\n        mat[14] = 0;\n        mat[15] = 1;\n        return mat;\n    }\n    Mat4.setIdentity = setIdentity;\n    function isZero(mat) {\n        for (let i = 0; i < 16; i++)\n            if (mat[i] !== 0)\n                return false;\n        return true;\n    }\n    Mat4.isZero = isZero;\n    function setZero(mat) {\n        for (let i = 0; i < 16; i++)\n            mat[i] = 0;\n        return mat;\n    }\n    Mat4.setZero = setZero;\n    function ofRows(rows) {\n        const out = zero();\n        for (let i = 0; i < 4; i++) {\n            const r = rows[i];\n            for (let j = 0; j < 4; j++) {\n                out[4 * j + i] = r[j];\n            }\n        }\n        return out;\n    }\n    Mat4.ofRows = ofRows;\n    const _id = identity();\n    function isIdentity(m, eps) {\n        return areEqual(m, _id, typeof eps === 'undefined' ? EPSILON : eps);\n    }\n    Mat4.isIdentity = isIdentity;\n    function hasNaN(m) {\n        for (let i = 0; i < 16; i++)\n            if (Number.isNaN(m[i]))\n                return true;\n        return false;\n    }\n    Mat4.hasNaN = hasNaN;\n    function areEqual(a, b, eps) {\n        for (let i = 0; i < 16; i++) {\n            if (Math.abs(a[i] - b[i]) > eps)\n                return false;\n        }\n        return true;\n    }\n    Mat4.areEqual = areEqual;\n    function setValue(a, i, j, value) {\n        a[4 * j + i] = value;\n    }\n    Mat4.setValue = setValue;\n    function getValue(a, i, j) {\n        return a[4 * j + i];\n    }\n    Mat4.getValue = getValue;\n    function toArray(a, out, offset) {\n        out[offset + 0] = a[0];\n        out[offset + 1] = a[1];\n        out[offset + 2] = a[2];\n        out[offset + 3] = a[3];\n        out[offset + 4] = a[4];\n        out[offset + 5] = a[5];\n        out[offset + 6] = a[6];\n        out[offset + 7] = a[7];\n        out[offset + 8] = a[8];\n        out[offset + 9] = a[9];\n        out[offset + 10] = a[10];\n        out[offset + 11] = a[11];\n        out[offset + 12] = a[12];\n        out[offset + 13] = a[13];\n        out[offset + 14] = a[14];\n        out[offset + 15] = a[15];\n        return out;\n    }\n    Mat4.toArray = toArray;\n    function fromArray(a, array, offset) {\n        a[0] = array[offset + 0];\n        a[1] = array[offset + 1];\n        a[2] = array[offset + 2];\n        a[3] = array[offset + 3];\n        a[4] = array[offset + 4];\n        a[5] = array[offset + 5];\n        a[6] = array[offset + 6];\n        a[7] = array[offset + 7];\n        a[8] = array[offset + 8];\n        a[9] = array[offset + 9];\n        a[10] = array[offset + 10];\n        a[11] = array[offset + 11];\n        a[12] = array[offset + 12];\n        a[13] = array[offset + 13];\n        a[14] = array[offset + 14];\n        a[15] = array[offset + 15];\n        return a;\n    }\n    Mat4.fromArray = fromArray;\n    function fromBasis(a, x, y, z) {\n        setZero(a);\n        setValue(a, 0, 0, x[0]);\n        setValue(a, 1, 0, x[1]);\n        setValue(a, 2, 0, x[2]);\n        setValue(a, 0, 1, y[0]);\n        setValue(a, 1, 1, y[1]);\n        setValue(a, 2, 1, y[2]);\n        setValue(a, 0, 2, z[0]);\n        setValue(a, 1, 2, z[1]);\n        setValue(a, 2, 2, z[2]);\n        setValue(a, 3, 3, 1);\n        return a;\n    }\n    Mat4.fromBasis = fromBasis;\n    function copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n        return out;\n    }\n    Mat4.copy = copy;\n    function clone(a) {\n        return copy(zero(), a);\n    }\n    Mat4.clone = clone;\n    /**\n     * Returns the translation vector component of a transformation matrix.\n     */\n    function getTranslation(out, mat) {\n        out[0] = mat[12];\n        out[1] = mat[13];\n        out[2] = mat[14];\n        return out;\n    }\n    Mat4.getTranslation = getTranslation;\n    /**\n     * Returns the scaling factor component of a transformation matrix.\n     */\n    function getScaling(out, mat) {\n        const m11 = mat[0];\n        const m12 = mat[1];\n        const m13 = mat[2];\n        const m21 = mat[4];\n        const m22 = mat[5];\n        const m23 = mat[6];\n        const m31 = mat[8];\n        const m32 = mat[9];\n        const m33 = mat[10];\n        out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n        out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n        out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n        return out;\n    }\n    Mat4.getScaling = getScaling;\n    /**\n     * Returns a quaternion representing the rotational component of a transformation matrix.\n     */\n    function getRotation(out, mat) {\n        // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n        const trace = mat[0] + mat[5] + mat[10];\n        let S = 0;\n        if (trace > 0) {\n            S = Math.sqrt(trace + 1.0) * 2;\n            out[3] = 0.25 * S;\n            out[0] = (mat[6] - mat[9]) / S;\n            out[1] = (mat[8] - mat[2]) / S;\n            out[2] = (mat[1] - mat[4]) / S;\n        }\n        else if ((mat[0] > mat[5]) && (mat[0] > mat[10])) {\n            S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n            out[3] = (mat[6] - mat[9]) / S;\n            out[0] = 0.25 * S;\n            out[1] = (mat[1] + mat[4]) / S;\n            out[2] = (mat[8] + mat[2]) / S;\n        }\n        else if (mat[5] > mat[10]) {\n            S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n            out[3] = (mat[8] - mat[2]) / S;\n            out[0] = (mat[1] + mat[4]) / S;\n            out[1] = 0.25 * S;\n            out[2] = (mat[6] + mat[9]) / S;\n        }\n        else {\n            S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n            out[3] = (mat[1] - mat[4]) / S;\n            out[0] = (mat[8] + mat[2]) / S;\n            out[1] = (mat[6] + mat[9]) / S;\n            out[2] = 0.25 * S;\n        }\n        return out;\n    }\n    Mat4.getRotation = getRotation;\n    function extractRotation(out, mat) {\n        const scaleX = 1 / Math.sqrt(mat[0] * mat[0] + mat[1] * mat[1] + mat[2] * mat[2]);\n        const scaleY = 1 / Math.sqrt(mat[4] * mat[4] + mat[5] * mat[5] + mat[6] * mat[6]);\n        const scaleZ = 1 / Math.sqrt(mat[8] * mat[8] + mat[9] * mat[9] + mat[10] * mat[10]);\n        out[0] = mat[0] * scaleX;\n        out[1] = mat[1] * scaleX;\n        out[2] = mat[2] * scaleX;\n        out[3] = 0;\n        out[4] = mat[4] * scaleY;\n        out[5] = mat[5] * scaleY;\n        out[6] = mat[6] * scaleY;\n        out[7] = 0;\n        out[8] = mat[8] * scaleZ;\n        out[9] = mat[9] * scaleZ;\n        out[10] = mat[10] * scaleZ;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.extractRotation = extractRotation;\n    function transpose(out, a) {\n        // If we are transposing ourselves we can skip a few steps but have to cache some values\n        if (out === a) {\n            const a01 = a[1], a02 = a[2], a03 = a[3];\n            const a12 = a[6], a13 = a[7];\n            const a23 = a[11];\n            out[1] = a[4];\n            out[2] = a[8];\n            out[3] = a[12];\n            out[4] = a01;\n            out[6] = a[9];\n            out[7] = a[13];\n            out[8] = a02;\n            out[9] = a12;\n            out[11] = a[14];\n            out[12] = a03;\n            out[13] = a13;\n            out[14] = a23;\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[4];\n            out[2] = a[8];\n            out[3] = a[12];\n            out[4] = a[1];\n            out[5] = a[5];\n            out[6] = a[9];\n            out[7] = a[13];\n            out[8] = a[2];\n            out[9] = a[6];\n            out[10] = a[10];\n            out[11] = a[14];\n            out[12] = a[3];\n            out[13] = a[7];\n            out[14] = a[11];\n            out[15] = a[15];\n        }\n        return out;\n    }\n    Mat4.transpose = transpose;\n    function tryInvert(out, a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3], a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7], a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11], a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32;\n        // Calculate the determinant\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n        if (!det) {\n            return false;\n        }\n        det = 1.0 / det;\n        out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n        out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n        out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n        out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n        out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n        out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n        out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n        out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n        out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n        out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n        out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n        out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n        out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n        out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n        out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n        out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n        return true;\n    }\n    Mat4.tryInvert = tryInvert;\n    function invert(out, a) {\n        if (!tryInvert(out, a)) {\n            console.warn('non-invertible matrix.', a);\n        }\n        return out;\n    }\n    Mat4.invert = invert;\n    function mul(out, a, b) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3], a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7], a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11], a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n        // Cache only the current line of the second matrix\n        let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n        out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[4];\n        b1 = b[5];\n        b2 = b[6];\n        b3 = b[7];\n        out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[8];\n        b1 = b[9];\n        b2 = b[10];\n        b3 = b[11];\n        out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[12];\n        b1 = b[13];\n        b2 = b[14];\n        b3 = b[15];\n        out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        return out;\n    }\n    Mat4.mul = mul;\n    /**\n     * Like `mul` but with offsets into arrays\n     */\n    function mulOffset(out, a, b, oOut, oA, oB) {\n        const a00 = a[0 + oA], a01 = a[1 + oA], a02 = a[2 + oA], a03 = a[3 + oA], a10 = a[4 + oA], a11 = a[5 + oA], a12 = a[6 + oA], a13 = a[7 + oA], a20 = a[8 + oA], a21 = a[9 + oA], a22 = a[10 + oA], a23 = a[11 + oA], a30 = a[12 + oA], a31 = a[13 + oA], a32 = a[14 + oA], a33 = a[15 + oA];\n        // Cache only the current line of the second matrix\n        let b0 = b[0 + oB], b1 = b[1 + oB], b2 = b[2 + oB], b3 = b[3 + oB];\n        out[0 + oOut] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[1 + oOut] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[2 + oOut] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[3 + oOut] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[4 + oB];\n        b1 = b[5 + oB];\n        b2 = b[6 + oB];\n        b3 = b[7 + oB];\n        out[4 + oOut] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[5 + oOut] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[6 + oOut] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[7 + oOut] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[8 + oB];\n        b1 = b[9 + oB];\n        b2 = b[10 + oB];\n        b3 = b[11 + oB];\n        out[8 + oOut] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[9 + oOut] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[10 + oOut] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[11 + oOut] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[12 + oB];\n        b1 = b[13 + oB];\n        b2 = b[14 + oB];\n        b3 = b[15 + oB];\n        out[12 + oOut] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[13 + oOut] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[14 + oOut] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[15 + oOut] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        return out;\n    }\n    Mat4.mulOffset = mulOffset;\n    function mul3(out, a, b, c) {\n        return mul(out, mul(out, a, b), c);\n    }\n    Mat4.mul3 = mul3;\n    /** Translate a Mat4 by the given Vec3 */\n    function translate(out, a, v) {\n        const x = v[0], y = v[1], z = v[2];\n        let a00, a01, a02, a03, a10, a11, a12, a13, a20, a21, a22, a23;\n        if (a === out) {\n            out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n            out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n            out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n            out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n        }\n        else {\n            a00 = a[0];\n            a01 = a[1];\n            a02 = a[2];\n            a03 = a[3];\n            a10 = a[4];\n            a11 = a[5];\n            a12 = a[6];\n            a13 = a[7];\n            a20 = a[8];\n            a21 = a[9];\n            a22 = a[10];\n            a23 = a[11];\n            out[0] = a00;\n            out[1] = a01;\n            out[2] = a02;\n            out[3] = a03;\n            out[4] = a10;\n            out[5] = a11;\n            out[6] = a12;\n            out[7] = a13;\n            out[8] = a20;\n            out[9] = a21;\n            out[10] = a22;\n            out[11] = a23;\n            out[12] = a00 * x + a10 * y + a20 * z + a[12];\n            out[13] = a01 * x + a11 * y + a21 * z + a[13];\n            out[14] = a02 * x + a12 * y + a22 * z + a[14];\n            out[15] = a03 * x + a13 * y + a23 * z + a[15];\n        }\n        return out;\n    }\n    Mat4.translate = translate;\n    function fromTranslation(out, v) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = 1;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 1;\n        out[11] = 0;\n        out[12] = v[0];\n        out[13] = v[1];\n        out[14] = v[2];\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromTranslation = fromTranslation;\n    function setTranslation(out, v) {\n        out[12] = v[0];\n        out[13] = v[1];\n        out[14] = v[2];\n        return out;\n    }\n    Mat4.setTranslation = setTranslation;\n    /**\n     * Sets the specified quaternion with values corresponding to the given\n     * axes. Each axis is a vec3 and is expected to be unit length and\n     * perpendicular to all other specified axes.\n     */\n    function setAxes(out, view, right, up) {\n        out[0] = right[0];\n        out[4] = right[1];\n        out[8] = right[2];\n        out[1] = up[0];\n        out[5] = up[1];\n        out[9] = up[2];\n        out[2] = view[0];\n        out[6] = view[1];\n        out[10] = view[2];\n        return out;\n    }\n    Mat4.setAxes = setAxes;\n    function rotate(out, a, rad, axis) {\n        let x = axis[0], y = axis[1], z = axis[2];\n        let len = Math.sqrt(x * x + y * y + z * z);\n        if (Math.abs(len) < EPSILON) {\n            return identity();\n        }\n        len = 1 / len;\n        x *= len;\n        y *= len;\n        z *= len;\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        const t = 1 - c;\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n        const a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n        const a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n        // Construct the elements of the rotation matrix\n        const b00 = x * x * t + c, b01 = y * x * t + z * s, b02 = z * x * t - y * s;\n        const b10 = x * y * t - z * s, b11 = y * y * t + c, b12 = z * y * t + x * s;\n        const b20 = x * z * t + y * s, b21 = y * z * t - x * s, b22 = z * z * t + c;\n        // Perform rotation-specific matrix multiplication\n        out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n        out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n        out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n        out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n        out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n        out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n        out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n        out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n        out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n        out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n        out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n        out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n        if (a !== out) { // If the source and destination differ, copy the unchanged last row\n            out[12] = a[12];\n            out[13] = a[13];\n            out[14] = a[14];\n            out[15] = a[15];\n        }\n        return out;\n    }\n    Mat4.rotate = rotate;\n    function fromRotation(out, rad, axis) {\n        let x = axis[0], y = axis[1], z = axis[2];\n        let len = Math.sqrt(x * x + y * y + z * z);\n        if (Math.abs(len) < EPSILON) {\n            return setIdentity(out);\n        }\n        len = 1 / len;\n        x *= len;\n        y *= len;\n        z *= len;\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        const t = 1 - c;\n        // Perform rotation-specific matrix multiplication\n        out[0] = x * x * t + c;\n        out[1] = y * x * t + z * s;\n        out[2] = z * x * t - y * s;\n        out[3] = 0;\n        out[4] = x * y * t - z * s;\n        out[5] = y * y * t + c;\n        out[6] = z * y * t + x * s;\n        out[7] = 0;\n        out[8] = x * z * t + y * s;\n        out[9] = y * z * t - x * s;\n        out[10] = z * z * t + c;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromRotation = fromRotation;\n    function scale(out, a, v) {\n        const x = v[0], y = v[1], z = v[2];\n        out[0] = a[0] * x;\n        out[1] = a[1] * x;\n        out[2] = a[2] * x;\n        out[3] = a[3] * x;\n        out[4] = a[4] * y;\n        out[5] = a[5] * y;\n        out[6] = a[6] * y;\n        out[7] = a[7] * y;\n        out[8] = a[8] * z;\n        out[9] = a[9] * z;\n        out[10] = a[10] * z;\n        out[11] = a[11] * z;\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n        return out;\n    }\n    Mat4.scale = scale;\n    function scaleUniformly(out, a, scale) {\n        out[0] = a[0] * scale;\n        out[1] = a[1] * scale;\n        out[2] = a[2] * scale;\n        out[3] = a[3] * scale;\n        out[4] = a[4] * scale;\n        out[5] = a[5] * scale;\n        out[6] = a[6] * scale;\n        out[7] = a[7] * scale;\n        out[8] = a[8] * scale;\n        out[9] = a[9] * scale;\n        out[10] = a[10] * scale;\n        out[11] = a[11] * scale;\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n        return out;\n    }\n    Mat4.scaleUniformly = scaleUniformly;\n    function fromScaling(out, v) {\n        out[0] = v[0];\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = v[1];\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = v[2];\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromScaling = fromScaling;\n    function fromUniformScaling(out, scale) {\n        out[0] = scale;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = scale;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = scale;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromUniformScaling = fromUniformScaling;\n    const _v3pa = [0, 0, 0];\n    const _v3pb = [0, 0, 0];\n    /**\n     * Creates a matrix from a plane defined by a normal vector and a point.\n     */\n    function fromPlane(out, normal, point) {\n        const tangent0 = Vec3.cross(_v3pa, normal, Vec3.unitX);\n        if (Vec3.dot(tangent0, tangent0) < EPSILON) {\n            Vec3.cross(tangent0, normal, Vec3.unitY);\n        }\n        Vec3.normalize(tangent0, tangent0);\n        const tangent1 = Vec3.cross(_v3pb, normal, tangent0);\n        Vec3.normalize(tangent1, tangent1);\n        setAxes(out, normal, tangent0, tangent1);\n        out[12] = point[0];\n        out[13] = point[1];\n        out[14] = point[2];\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromPlane = fromPlane;\n    /**\n     * Copies the mat3 into upper-left 3x3 values.\n     */\n    function fromMat3(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[4] = a[3];\n        out[5] = a[4];\n        out[6] = a[5];\n        out[8] = a[6];\n        out[9] = a[7];\n        out[10] = a[8];\n        return out;\n    }\n    Mat4.fromMat3 = fromMat3;\n    function compose(out, position, quaternion, scale) {\n        const [x, y, z, w] = quaternion;\n        const x2 = x + x, y2 = y + y, z2 = z + z;\n        const xx = x * x2, xy = x * y2, xz = x * z2;\n        const yy = y * y2, yz = y * z2, zz = z * z2;\n        const wx = w * x2, wy = w * y2, wz = w * z2;\n        const [sx, sy, sz] = scale;\n        out[0] = (1 - (yy + zz)) * sx;\n        out[1] = (xy + wz) * sx;\n        out[2] = (xz - wy) * sx;\n        out[3] = 0;\n        out[4] = (xy - wz) * sy;\n        out[5] = (1 - (xx + zz)) * sy;\n        out[6] = (yz + wx) * sy;\n        out[7] = 0;\n        out[8] = (xz + wy) * sz;\n        out[9] = (yz - wx) * sz;\n        out[10] = (1 - (xx + yy)) * sz;\n        out[11] = 0;\n        out[12] = position[0];\n        out[13] = position[1];\n        out[14] = position[2];\n        out[15] = 1;\n        return out;\n    }\n    Mat4.compose = compose;\n    const _v3 = [0, 0, 0];\n    const _m4 = zero();\n    function decompose(m, position, quaternion, scale) {\n        let sx = Vec3.magnitude(Vec3.set(_v3, m[0], m[1], m[2]));\n        const sy = Vec3.magnitude(Vec3.set(_v3, m[4], m[5], m[6]));\n        const sz = Vec3.magnitude(Vec3.set(_v3, m[8], m[9], m[10]));\n        // if determine is negative, we need to invert one scale\n        const det = determinant(m);\n        if (det < 0)\n            sx = -sx;\n        position[0] = m[12];\n        position[1] = m[13];\n        position[2] = m[14];\n        // scale the rotation part\n        copy(_m4, m);\n        const invSX = 1 / sx;\n        const invSY = 1 / sy;\n        const invSZ = 1 / sz;\n        _m4[0] *= invSX;\n        _m4[1] *= invSX;\n        _m4[2] *= invSX;\n        _m4[4] *= invSY;\n        _m4[5] *= invSY;\n        _m4[6] *= invSY;\n        _m4[8] *= invSZ;\n        _m4[9] *= invSZ;\n        _m4[10] *= invSZ;\n        getRotation(quaternion, _m4);\n        scale[0] = sx;\n        scale[1] = sy;\n        scale[2] = sz;\n        return m;\n    }\n    Mat4.decompose = decompose;\n    function getDecomposition(m) {\n        const position = Vec3();\n        const quaternion = Quat();\n        const scale = Vec3();\n        decompose(m, position, quaternion, scale);\n        return { position, quaternion, scale };\n    }\n    Mat4.getDecomposition = getDecomposition;\n    function makeTable(m) {\n        let ret = '';\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                ret += m[4 * j + i].toString();\n                if (j < 3)\n                    ret += ' ';\n            }\n            if (i < 3)\n                ret += '\\n';\n        }\n        return ret;\n    }\n    Mat4.makeTable = makeTable;\n    function determinant(a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3], a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7], a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11], a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32;\n        // Calculate the determinant\n        return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    }\n    Mat4.determinant = determinant;\n    /**\n     * Check if the matrix has the form\n     * [ Rotation    Translation ]\n     * [ 0           1           ]\n     *\n     * Allows for improper rotations\n     */\n    function isRotationAndTranslation(a, eps) {\n        return _isRotationAndTranslation(a, typeof eps !== 'undefined' ? eps : EPSILON);\n    }\n    Mat4.isRotationAndTranslation = isRotationAndTranslation;\n    function _isRotationAndTranslation(a, eps) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3], a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7], a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11], a33 = a[15];\n        if (!equalEps(a33, 1, eps) || !equalEps(a03, 0, eps) || !equalEps(a13, 0, eps) || !equalEps(a23, 0, eps)) {\n            return false;\n        }\n        // use `abs` to allow for improper rotations\n        const det3x3 = Math.abs(a00 * (a11 * a22 - a12 * a21) - a01 * (a10 * a22 - a12 * a20) + a02 * (a10 * a21 - a11 * a20));\n        if (!equalEps(det3x3, 1, eps)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Check if the matrix has only translation and uniform scaling\n     * [ S  0  0  X ]\n     * [ 0  S  0  Y ]\n     * [ 0  0  S  Z ]\n     * [ 0  0  0  1 ]\n     */\n    function isTranslationAndUniformScaling(a, eps) {\n        return _isTranslationAndUniformScaling(a, typeof eps !== 'undefined' ? eps : EPSILON);\n    }\n    Mat4.isTranslationAndUniformScaling = isTranslationAndUniformScaling;\n    function _isTranslationAndUniformScaling(a, eps) {\n        const a00 = a[0];\n        return (\n        // 0 base scaling\n        equalEps(a[1], 0, eps) &&\n            equalEps(a[2], 0, eps) &&\n            equalEps(a[3], 0, eps) &&\n            equalEps(a[4], 0, eps) &&\n            equalEps(a[5], a00, eps) &&\n            equalEps(a[6], 0, eps) &&\n            equalEps(a[7], 0, eps) &&\n            equalEps(a[8], 0, eps) &&\n            equalEps(a[9], 0, eps) &&\n            equalEps(a[10], a00, eps) &&\n            equalEps(a[11], 0, eps) &&\n            // 12, 13, 14 translation can be anything\n            equalEps(a[15], 1, eps));\n    }\n    function fromQuat(out, q) {\n        const x = q[0], y = q[1], z = q[2], w = q[3];\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const yx = y * x2;\n        const yy = y * y2;\n        const zx = z * x2;\n        const zy = z * y2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n        out[0] = 1 - yy - zz;\n        out[1] = yx + wz;\n        out[2] = zx - wy;\n        out[3] = 0;\n        out[4] = yx - wz;\n        out[5] = 1 - xx - zz;\n        out[6] = zy + wx;\n        out[7] = 0;\n        out[8] = zx + wy;\n        out[9] = zy - wx;\n        out[10] = 1 - xx - yy;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromQuat = fromQuat;\n    function fromEuler(out, euler, order) {\n        const x = euler[0], y = euler[1], z = euler[2];\n        const a = Math.cos(x), b = Math.sin(x);\n        const c = Math.cos(y), d = Math.sin(y);\n        const e = Math.cos(z), f = Math.sin(z);\n        if (order === 'XYZ') {\n            const ae = a * e, af = a * f, be = b * e, bf = b * f;\n            out[0] = c * e;\n            out[4] = -c * f;\n            out[8] = d;\n            out[1] = af + be * d;\n            out[5] = ae - bf * d;\n            out[9] = -b * c;\n            out[2] = bf - ae * d;\n            out[6] = be + af * d;\n            out[10] = a * c;\n        }\n        else if (order === 'YXZ') {\n            const ce = c * e, cf = c * f, de = d * e, df = d * f;\n            out[0] = ce + df * b;\n            out[4] = de * b - cf;\n            out[8] = a * d;\n            out[1] = a * f;\n            out[5] = a * e;\n            out[9] = -b;\n            out[2] = cf * b - de;\n            out[6] = df + ce * b;\n            out[10] = a * c;\n        }\n        else if (order === 'ZXY') {\n            const ce = c * e, cf = c * f, de = d * e, df = d * f;\n            out[0] = ce - df * b;\n            out[4] = -a * f;\n            out[8] = de + cf * b;\n            out[1] = cf + de * b;\n            out[5] = a * e;\n            out[9] = df - ce * b;\n            out[2] = -a * d;\n            out[6] = b;\n            out[10] = a * c;\n        }\n        else if (order === 'ZYX') {\n            const ae = a * e, af = a * f, be = b * e, bf = b * f;\n            out[0] = c * e;\n            out[4] = be * d - af;\n            out[8] = ae * d + bf;\n            out[1] = c * f;\n            out[5] = bf * d + ae;\n            out[9] = af * d - be;\n            out[2] = -d;\n            out[6] = b * c;\n            out[10] = a * c;\n        }\n        else if (order === 'YZX') {\n            const ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n            out[0] = c * e;\n            out[4] = bd - ac * f;\n            out[8] = bc * f + ad;\n            out[1] = f;\n            out[5] = a * e;\n            out[9] = -b * e;\n            out[2] = -d * e;\n            out[6] = ad * f + bc;\n            out[10] = ac - bd * f;\n        }\n        else if (order === 'XZY') {\n            const ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n            out[0] = c * e;\n            out[4] = -f;\n            out[8] = d * e;\n            out[1] = ac * f + bd;\n            out[5] = a * e;\n            out[9] = ad * f - bc;\n            out[2] = bc * f - ad;\n            out[6] = b * e;\n            out[10] = bd * f + ac;\n        }\n        // bottom row\n        out[3] = 0;\n        out[7] = 0;\n        out[11] = 0;\n        // last column\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.fromEuler = fromEuler;\n    /**\n     * Generates a perspective projection (frustum) matrix with the given bounds\n     */\n    function perspective(out, left, right, top, bottom, near, far) {\n        const x = 2 * near / (right - left);\n        const y = 2 * near / (top - bottom);\n        const a = (right + left) / (right - left);\n        const b = (top + bottom) / (top - bottom);\n        const c = -(far + near) / (far - near);\n        const d = -2 * far * near / (far - near);\n        out[0] = x;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = y;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = a;\n        out[9] = b;\n        out[10] = c;\n        out[11] = -1;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = d;\n        out[15] = 0;\n        return out;\n    }\n    Mat4.perspective = perspective;\n    /**\n     * Generates a orthogonal projection matrix with the given bounds\n     */\n    function ortho(out, left, right, top, bottom, near, far) {\n        const w = 1.0 / (right - left);\n        const h = 1.0 / (top - bottom);\n        const p = 1.0 / (far - near);\n        const x = (right + left) * w;\n        const y = (top + bottom) * h;\n        const z = (far + near) * p;\n        out[0] = 2 * w;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = 2 * h;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = -2 * p;\n        out[11] = 0;\n        out[12] = -x;\n        out[13] = -y;\n        out[14] = -z;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.ortho = ortho;\n    /**\n     * Generates a look-at matrix with the given eye position, focal point, and up axis\n     */\n    function lookAt(out, eye, center, up) {\n        let x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n        const eyex = eye[0];\n        const eyey = eye[1];\n        const eyez = eye[2];\n        const upx = up[0];\n        const upy = up[1];\n        const upz = up[2];\n        const centerx = center[0];\n        const centery = center[1];\n        const centerz = center[2];\n        if (Math.abs(eyex - centerx) < EPSILON &&\n            Math.abs(eyey - centery) < EPSILON &&\n            Math.abs(eyez - centerz) < EPSILON) {\n            return setIdentity(out);\n        }\n        z0 = eyex - centerx;\n        z1 = eyey - centery;\n        z2 = eyez - centerz;\n        len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n        x0 = upy * z2 - upz * z1;\n        x1 = upz * z0 - upx * z2;\n        x2 = upx * z1 - upy * z0;\n        len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n        if (!len) {\n            x0 = 0;\n            x1 = 0;\n            x2 = 0;\n        }\n        else {\n            len = 1 / len;\n            x0 *= len;\n            x1 *= len;\n            x2 *= len;\n        }\n        y0 = z1 * x2 - z2 * x1;\n        y1 = z2 * x0 - z0 * x2;\n        y2 = z0 * x1 - z1 * x0;\n        len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n        if (!len) {\n            y0 = 0;\n            y1 = 0;\n            y2 = 0;\n        }\n        else {\n            len = 1 / len;\n            y0 *= len;\n            y1 *= len;\n            y2 *= len;\n        }\n        out[0] = x0;\n        out[1] = y0;\n        out[2] = z0;\n        out[3] = 0;\n        out[4] = x1;\n        out[5] = y1;\n        out[6] = z1;\n        out[7] = 0;\n        out[8] = x2;\n        out[9] = y2;\n        out[10] = z2;\n        out[11] = 0;\n        out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n        out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n        out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n        out[15] = 1;\n        return out;\n    }\n    Mat4.lookAt = lookAt;\n    /**\n     * Generates a matrix that makes something look at something else.\n     */\n    function targetTo(out, eye, target, up) {\n        const eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];\n        let z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];\n        let len = z0 * z0 + z1 * z1 + z2 * z2;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            z0 *= len;\n            z1 *= len;\n            z2 *= len;\n        }\n        let x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;\n        len = x0 * x0 + x1 * x1 + x2 * x2;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            x0 *= len;\n            x1 *= len;\n            x2 *= len;\n        }\n        out[0] = x0;\n        out[1] = x1;\n        out[2] = x2;\n        out[3] = 0;\n        out[4] = z1 * x2 - z2 * x1;\n        out[5] = z2 * x0 - z0 * x2;\n        out[6] = z0 * x1 - z1 * x0;\n        out[7] = 0;\n        out[8] = z0;\n        out[9] = z1;\n        out[10] = z2;\n        out[11] = 0;\n        out[12] = eyex;\n        out[13] = eyey;\n        out[14] = eyez;\n        out[15] = 1;\n        return out;\n    }\n    Mat4.targetTo = targetTo;\n    /**\n     * Perm is 0-indexed permutation\n     */\n    function fromPermutation(out, perm) {\n        setZero(out);\n        for (let i = 0; i < 4; i++) {\n            const p = perm[i];\n            setValue(out, i, p, 1);\n        }\n        return out;\n    }\n    Mat4.fromPermutation = fromPermutation;\n    function getMaxScaleOnAxis(m) {\n        const scaleXSq = m[0] * m[0] + m[1] * m[1] + m[2] * m[2];\n        const scaleYSq = m[4] * m[4] + m[5] * m[5] + m[6] * m[6];\n        const scaleZSq = m[8] * m[8] + m[9] * m[9] + m[10] * m[10];\n        return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n    }\n    Mat4.getMaxScaleOnAxis = getMaxScaleOnAxis;\n    function extractBasis(m) {\n        return {\n            x: Vec3.create(m[0], m[1], m[2]),\n            y: Vec3.create(m[4], m[5], m[6]),\n            z: Vec3.create(m[8], m[9], m[10])\n        };\n    }\n    Mat4.extractBasis = extractBasis;\n    const xAxis = [1, 0, 0];\n    const yAxis = [0, 1, 0];\n    const zAxis = [0, 0, 1];\n    /** Rotation matrix for 90deg around x-axis */\n    Mat4.rotX90 = fromRotation(zero(), degToRad(90), xAxis);\n    /** Rotation matrix for 180deg around x-axis */\n    Mat4.rotX180 = fromRotation(zero(), degToRad(180), xAxis);\n    /** Rotation matrix for 90deg around y-axis */\n    Mat4.rotY90 = fromRotation(zero(), degToRad(90), yAxis);\n    /** Rotation matrix for 180deg around y-axis */\n    Mat4.rotY180 = fromRotation(zero(), degToRad(180), yAxis);\n    /** Rotation matrix for 270deg around y-axis */\n    Mat4.rotY270 = fromRotation(zero(), degToRad(270), yAxis);\n    /** Rotation matrix for 90deg around z-axis */\n    Mat4.rotZ90 = fromRotation(zero(), degToRad(90), zAxis);\n    /** Rotation matrix for 180deg around z-axis */\n    Mat4.rotZ180 = fromRotation(zero(), degToRad(180), zAxis);\n    /** Rotation matrix for 90deg around first x-axis and then y-axis */\n    Mat4.rotXY90 = mul(zero(), Mat4.rotX90, Mat4.rotY90);\n    /** Rotation matrix for 90deg around first z-axis and then y-axis */\n    Mat4.rotZY90 = mul(zero(), Mat4.rotZ90, Mat4.rotY90);\n    /** Rotation matrix for 90deg around first z-axis and then y-axis and then z-axis */\n    Mat4.rotZYZ90 = mul(zero(), Mat4.rotZY90, Mat4.rotZ90);\n    /** Rotation matrix for 90deg around first z-axis and then 180deg around x-axis */\n    Mat4.rotZ90X180 = mul(zero(), Mat4.rotZ90, Mat4.rotX180);\n    /** Rotation matrix for 90deg around first y-axis and then 180deg around z-axis */\n    Mat4.rotY90Z180 = mul(zero(), Mat4.rotY90, Mat4.rotZ180);\n    /** Identity matrix */\n    Mat4.id = identity();\n})(Mat4 || (Mat4 = {}));\nexport { Mat4 };\n","/**\n * Copyright (c) 2019 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { AtomNumber } from './measures.js';\n/**\n * Enum of element symbols\n */\nexport var Elements;\n(function (Elements) {\n    Elements[\"H\"] = \"H\";\n    Elements[\"D\"] = \"D\";\n    Elements[\"T\"] = \"T\";\n    Elements[\"HE\"] = \"HE\";\n    Elements[\"LI\"] = \"LI\";\n    Elements[\"BE\"] = \"BE\";\n    Elements[\"B\"] = \"B\";\n    Elements[\"C\"] = \"C\";\n    Elements[\"N\"] = \"N\";\n    Elements[\"O\"] = \"O\";\n    Elements[\"F\"] = \"F\";\n    Elements[\"NE\"] = \"NE\";\n    Elements[\"NA\"] = \"NA\";\n    Elements[\"MG\"] = \"MG\";\n    Elements[\"AL\"] = \"AL\";\n    Elements[\"SI\"] = \"SI\";\n    Elements[\"P\"] = \"P\";\n    Elements[\"S\"] = \"S\";\n    Elements[\"CL\"] = \"CL\";\n    Elements[\"AR\"] = \"AR\";\n    Elements[\"K\"] = \"K\";\n    Elements[\"CA\"] = \"CA\";\n    Elements[\"SC\"] = \"SC\";\n    Elements[\"TI\"] = \"TI\";\n    Elements[\"V\"] = \"V\";\n    Elements[\"CR\"] = \"CR\";\n    Elements[\"MN\"] = \"MN\";\n    Elements[\"FE\"] = \"FE\";\n    Elements[\"CO\"] = \"CO\";\n    Elements[\"NI\"] = \"NI\";\n    Elements[\"CU\"] = \"CU\";\n    Elements[\"ZN\"] = \"ZN\";\n    Elements[\"GA\"] = \"GA\";\n    Elements[\"GE\"] = \"GE\";\n    Elements[\"AS\"] = \"AS\";\n    Elements[\"SE\"] = \"SE\";\n    Elements[\"BR\"] = \"BR\";\n    Elements[\"KR\"] = \"KR\";\n    Elements[\"RB\"] = \"RB\";\n    Elements[\"SR\"] = \"SR\";\n    Elements[\"Y\"] = \"Y\";\n    Elements[\"ZR\"] = \"ZR\";\n    Elements[\"NB\"] = \"NB\";\n    Elements[\"MO\"] = \"MO\";\n    Elements[\"TC\"] = \"TC\";\n    Elements[\"RU\"] = \"RU\";\n    Elements[\"RH\"] = \"RH\";\n    Elements[\"PD\"] = \"PD\";\n    Elements[\"AG\"] = \"AG\";\n    Elements[\"CD\"] = \"CD\";\n    Elements[\"IN\"] = \"IN\";\n    Elements[\"SN\"] = \"SN\";\n    Elements[\"SB\"] = \"SB\";\n    Elements[\"TE\"] = \"TE\";\n    Elements[\"I\"] = \"I\";\n    Elements[\"XE\"] = \"XE\";\n    Elements[\"CS\"] = \"CS\";\n    Elements[\"BA\"] = \"BA\";\n    Elements[\"LA\"] = \"LA\";\n    Elements[\"CE\"] = \"CE\";\n    Elements[\"PR\"] = \"PR\";\n    Elements[\"ND\"] = \"ND\";\n    Elements[\"PM\"] = \"PM\";\n    Elements[\"SM\"] = \"SM\";\n    Elements[\"EU\"] = \"EU\";\n    Elements[\"GD\"] = \"GD\";\n    Elements[\"TB\"] = \"TB\";\n    Elements[\"DY\"] = \"DY\";\n    Elements[\"HO\"] = \"HO\";\n    Elements[\"ER\"] = \"ER\";\n    Elements[\"TM\"] = \"TM\";\n    Elements[\"YB\"] = \"YB\";\n    Elements[\"LU\"] = \"LU\";\n    Elements[\"HF\"] = \"HF\";\n    Elements[\"TA\"] = \"TA\";\n    Elements[\"W\"] = \"W\";\n    Elements[\"RE\"] = \"RE\";\n    Elements[\"OS\"] = \"OS\";\n    Elements[\"IR\"] = \"IR\";\n    Elements[\"PT\"] = \"PT\";\n    Elements[\"AU\"] = \"AU\";\n    Elements[\"HG\"] = \"HG\";\n    Elements[\"TL\"] = \"TL\";\n    Elements[\"PB\"] = \"PB\";\n    Elements[\"BI\"] = \"BI\";\n    Elements[\"PO\"] = \"PO\";\n    Elements[\"AT\"] = \"AT\";\n    Elements[\"RN\"] = \"RN\";\n    Elements[\"FR\"] = \"FR\";\n    Elements[\"RA\"] = \"RA\";\n    Elements[\"AC\"] = \"AC\";\n    Elements[\"TH\"] = \"TH\";\n    Elements[\"PA\"] = \"PA\";\n    Elements[\"U\"] = \"U\";\n    Elements[\"NP\"] = \"NP\";\n    Elements[\"PU\"] = \"PU\";\n    Elements[\"AM\"] = \"AM\";\n    Elements[\"CM\"] = \"CM\";\n    Elements[\"BK\"] = \"BK\";\n    Elements[\"CF\"] = \"CF\";\n    Elements[\"ES\"] = \"ES\";\n    Elements[\"FM\"] = \"FM\";\n    Elements[\"MD\"] = \"MD\";\n    Elements[\"NO\"] = \"NO\";\n    Elements[\"LR\"] = \"LR\";\n    Elements[\"RF\"] = \"RF\";\n    Elements[\"DB\"] = \"DB\";\n    Elements[\"SG\"] = \"SG\";\n    Elements[\"BH\"] = \"BH\";\n    Elements[\"HS\"] = \"HS\";\n    Elements[\"MT\"] = \"MT\";\n    Elements[\"DS\"] = \"DS\";\n    Elements[\"RG\"] = \"RG\";\n    Elements[\"CN\"] = \"CN\";\n    Elements[\"NH\"] = \"NH\";\n    Elements[\"FL\"] = \"FL\";\n    Elements[\"MC\"] = \"MC\";\n    Elements[\"LV\"] = \"LV\";\n    Elements[\"TS\"] = \"TS\";\n    Elements[\"OG\"] = \"OG\";\n})(Elements || (Elements = {}));\nexport const ElementNames = {\n    H: 'Hydrogen', HE: 'Helium', LI: 'Lithium', BE: 'Beryllium', B: 'Boron', C: 'Carbon', N: 'Nitrogen', O: 'Oxygen', F: 'Fluorine', NE: 'Neon', NA: 'Sodium', MG: 'Magnesium', AL: 'Aluminum', SI: 'Silicon', P: 'Phosphorus', S: 'Sulfur', CL: 'Chlorine', AR: 'Argon', K: 'Potassium', CA: 'Calcium', SC: 'Scandium', TI: 'Titanium', V: 'Vanadium', CR: 'Chromium', MN: 'Manganese', FE: 'Iron', CO: 'Cobalt', NI: 'Nickel', CU: 'Copper', ZN: 'Zinc', GA: 'Gallium', GE: 'Germanium', AS: 'Arsenic', SE: 'Selenium', BR: 'Bromine', KR: 'Krypton', RB: 'Rubidium', SR: 'Strontium', Y: 'Yttrium', ZR: 'Zirconium', NB: 'Niobium', MO: 'Molybdenum', TC: 'Technetium', RU: 'Ruthenium', RH: 'Rhodium', PD: 'Palladium', AG: 'Silver', CD: 'Cadmium', IN: 'Indium', SN: 'Tin', SB: 'Antimony', TE: 'Tellurium', I: 'Iodine', XE: 'Xenon', CS: 'Cesium', BA: 'Barium', LA: 'Lanthanum', CE: 'Cerium', PR: 'Praseodymium', ND: 'Neodymium', PM: 'Promethium', SM: 'Samarium', EU: 'Europium', GD: 'Gadolinium', TB: 'Terbium', DY: 'Dysprosium', HO: 'Holmium', ER: 'Erbium', TM: 'Thulium', YB: 'Ytterbium', LU: 'Lutetium', HF: 'Hafnium', TA: 'Tantalum', W: 'Wolfram', RE: 'Rhenium', OS: 'Osmium', IR: 'Iridium', PT: 'Platinum', AU: 'Gold', HG: 'Mercury', TL: 'Thallium', PB: 'Lead', BI: 'Bismuth', PO: 'Polonium', AT: 'Astatine', RN: 'Radon', FR: 'Francium', RA: 'Radium', AC: 'Actinium', TH: 'Thorium', PA: 'Protactinium', U: 'Uranium', NP: 'Neptunium', PU: 'Plutonium', AM: 'Americium', CM: 'Curium', BK: 'Berkelium', CF: 'Californium', ES: 'Einsteinium', FM: 'Fermium', MD: 'Mendelevium', NO: 'Nobelium', LR: 'Lawrencium', RF: 'Rutherfordium', DB: 'Dubnium', SG: 'Seaborgium', BH: 'Bohrium', HS: 'Hassium', MT: 'Meitnerium', DS: 'Darmstadtium', RG: 'Roentgenium', CN: 'Copernicium', NH: 'Nihonium', FL: 'Flerovium', MC: 'Moscovium', LV: 'Livermorium', TS: 'Tennessine', OG: 'Oganesson'\n};\nexport const AlkaliMetals = new Set(['LI', 'NA', 'K', 'RB', 'CS', 'FR']);\nexport function isAlkaliMetal(element) { return AlkaliMetals.has(element); }\nexport const AlkalineEarthMetals = new Set(['BE', 'MG', 'CA', 'SR', 'BA', 'RA']);\nexport function isAlkalineEarthMetal(element) { return AlkalineEarthMetals.has(element); }\nexport const PolyatomicNonmetals = new Set(['C', 'P', 'S', 'SE']);\nexport function isPolyatomicNonmetal(element) { return PolyatomicNonmetals.has(element); }\nexport const DiatomicNonmetals = new Set(['H', 'N', 'O', 'F', 'CL', 'BR', 'I']);\nexport function isDiatomicNonmetal(element) { return DiatomicNonmetals.has(element); }\nexport const NobleGases = new Set(['HE', 'NE', 'AR', 'KR', 'XE', 'RN']);\nexport function isNobleGas(element) { return NobleGases.has(element); }\nexport const PostTransitionMetals = new Set(['ZN', 'GA', 'CD', 'IN', 'SN', 'HG', 'TI', 'PB', 'BI', 'PO', 'CN']);\nexport function isPostTransitionMetal(element) { return PostTransitionMetals.has(element); }\nexport const Metalloids = new Set(['B', 'SI', 'GE', 'AS', 'SB', 'TE', 'AT']);\nexport function isMetalloid(element) { return Metalloids.has(element); }\nexport const Halogens = new Set(['F', 'CL', 'BR', 'I', 'AT']);\nexport function isHalogen(element) { return Halogens.has(element); }\nexport function isTransitionMetal(element) {\n    const no = AtomNumber(element);\n    return ((no >= 21 && no <= 29) ||\n        (no >= 39 && no <= 47) ||\n        (no >= 72 && no <= 79) ||\n        (no >= 104 && no <= 108));\n}\nexport function isLanthanide(element) {\n    const no = AtomNumber(element);\n    return no >= 57 && no <= 71;\n}\nexport function isActinide(element) {\n    const no = AtomNumber(element);\n    return no >= 89 && no <= 103;\n}\nexport function isMetal(element) {\n    return (isAlkaliMetal(element) ||\n        isAlkalineEarthMetal(element) ||\n        isLanthanide(element) ||\n        isActinide(element) ||\n        isTransitionMetal(element) ||\n        isPostTransitionMetal(element));\n}\nexport function isNonmetal(element) {\n    return (isDiatomicNonmetal(element) ||\n        isPolyatomicNonmetal(element) ||\n        isNobleGas(element));\n}\n","/**\n * Copyright (c) 2018-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nexport var Result;\n(function (Result) {\n    function add(result, index, distSq) {\n        result.squaredDistances[result.count] = distSq;\n        result.indices[result.count++] = index;\n    }\n    Result.add = add;\n    function reset(result) {\n        result.count = 0;\n    }\n    Result.reset = reset;\n    function create() {\n        return { count: 0, indices: [], squaredDistances: [] };\n    }\n    Result.create = create;\n    function copy(out, result) {\n        for (let i = 0; i < result.count; ++i) {\n            out.indices[i] = result.indices[i];\n            out.squaredDistances[i] = result.squaredDistances[i];\n        }\n        out.count = result.count;\n        return out;\n    }\n    Result.copy = copy;\n})(Result || (Result = {}));\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport { Rgb };\nfunction Rgb() {\n    return Rgb.zero();\n}\n(function (Rgb) {\n    function zero() {\n        const out = [0.1, 0.0, 0.0];\n        out[0] = 0;\n        return out;\n    }\n    Rgb.zero = zero;\n    function fromColor(out, hexColor) {\n        out[0] = (hexColor >> 16 & 255) / 255;\n        out[1] = (hexColor >> 8 & 255) / 255;\n        out[2] = (hexColor & 255) / 255;\n        return out;\n    }\n    Rgb.fromColor = fromColor;\n    function toColor(rgb) {\n        return (((rgb[0] * 255) << 16) | ((rgb[1] * 255) << 8) | (rgb[2] * 255));\n    }\n    Rgb.toColor = toColor;\n})(Rgb || (Rgb = {}));\n","/**\n * Copyright (c) 2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n *\n * Color conversion and interpolation code adapted from chroma.js (https://github.com/gka/chroma.js)\n * Copyright (c) 2011-2018, Gregor Aisch, BSD license\n */\nimport { Rgb } from './rgb.js';\nexport { Hsl };\nfunction Hsl() {\n    return Hsl.zero();\n}\n(function (Hsl) {\n    function zero() {\n        const out = [0.1, 0.0, 0.0];\n        out[0] = 0;\n        return out;\n    }\n    Hsl.zero = zero;\n    const _rgb = Rgb();\n    function fromColor(out, color) {\n        Rgb.fromColor(_rgb, color);\n        return Hsl.fromRgb(out, _rgb);\n    }\n    Hsl.fromColor = fromColor;\n    function toColor(hsl) {\n        toRgb(_rgb, hsl);\n        return Rgb.toColor(_rgb);\n    }\n    Hsl.toColor = toColor;\n    function fromRgb(out, rgb) {\n        const [r, g, b] = rgb;\n        const minRgb = Math.min(r, g, b);\n        const maxRgb = Math.max(r, g, b);\n        const l = (maxRgb + minRgb) / 2;\n        let s = 0, h = 0;\n        if (maxRgb === minRgb) {\n            s = 0;\n            h = Number.NaN;\n        }\n        else {\n            s = l < 0.5\n                ? (maxRgb - minRgb) / (maxRgb + minRgb)\n                : (maxRgb - minRgb) / (2 - maxRgb - minRgb);\n        }\n        if (r === maxRgb)\n            h = (g - b) / (maxRgb - minRgb);\n        else if (g === maxRgb)\n            h = 2 + (b - r) / (maxRgb - minRgb);\n        else if (b === maxRgb)\n            h = 4 + (r - g) / (maxRgb - minRgb);\n        h *= 60;\n        if (h < 0)\n            h += 360;\n        out[0] = h;\n        out[1] = s;\n        out[2] = l;\n        return out;\n    }\n    Hsl.fromRgb = fromRgb;\n    const _t3 = [0, 0, 0];\n    const _c = [0, 0, 0];\n    function toRgb(out, hsl) {\n        const [h, s, l] = hsl;\n        let r, g, b;\n        if (s === 0) {\n            r = g = b = l;\n        }\n        else {\n            const t3 = _t3;\n            const c = _c;\n            const t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            const t1 = 2 * l - t2;\n            const h_ = h / 360;\n            t3[0] = h_ + 1 / 3;\n            t3[1] = h_;\n            t3[2] = h_ - 1 / 3;\n            for (let i = 0; i < 3; i++) {\n                if (t3[i] < 0)\n                    t3[i] += 1;\n                if (t3[i] > 1)\n                    t3[i] -= 1;\n                if (6 * t3[i] < 1)\n                    c[i] = t1 + (t2 - t1) * 6 * t3[i];\n                else if (2 * t3[i] < 1)\n                    c[i] = t2;\n                else if (3 * t3[i] < 2)\n                    c[i] = t1 + (t2 - t1) * (2 / 3 - t3[i]) * 6;\n                else\n                    c[i] = t1;\n            }\n            r = c[0];\n            g = c[1];\n            b = c[2];\n        }\n        out[0] = r;\n        out[1] = g;\n        out[2] = b;\n        return out;\n    }\n    Hsl.toRgb = toRgb;\n    function interpolate(out, col1, col2, t) {\n        const xyz0 = col1, xyz1 = col2;\n        const [hue0, sat0, lbv0] = xyz0;\n        const [hue1, sat1, lbv1] = xyz1;\n        let sat, hue, dh;\n        if (!isNaN(hue0) && !isNaN(hue1)) {\n            // both colors have hue\n            if (hue1 > hue0 && hue1 - hue0 > 180) {\n                dh = hue1 - (hue0 + 360);\n            }\n            else if (hue1 < hue0 && hue0 - hue1 > 180) {\n                dh = hue1 + 360 - hue0;\n            }\n            else {\n                dh = hue1 - hue0;\n            }\n            hue = hue0 + t * dh;\n        }\n        else if (!isNaN(hue0)) {\n            hue = hue0;\n            if ((lbv1 === 1 || lbv1 === 0))\n                sat = sat0;\n        }\n        else if (!isNaN(hue1)) {\n            hue = hue1;\n            if ((lbv0 === 1 || lbv0 === 0))\n                sat = sat1;\n        }\n        else {\n            hue = Number.NaN;\n        }\n        if (sat === undefined)\n            sat = sat0 + t * (sat1 - sat0);\n        const lbv = lbv0 + t * (lbv1 - lbv0);\n        out[0] = hue;\n        out[1] = sat;\n        out[2] = lbv;\n        return out;\n    }\n    Hsl.interpolate = interpolate;\n})(Hsl || (Hsl = {}));\n","/**\n * Copyright (c) 2018-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { Hcl } from './spaces/hcl.js';\nimport { Lab } from './spaces/lab.js';\nimport { Hsl } from './spaces/hsl.js';\nexport function Color(hex) { return hex; }\n(function (Color) {\n    function toStyle(hexColor) {\n        return `rgb(${hexColor >> 16 & 255}, ${hexColor >> 8 & 255}, ${hexColor & 255})`;\n    }\n    Color.toStyle = toStyle;\n    function toHexStyle(hexColor) {\n        return '#' + ('000000' + hexColor.toString(16)).slice(-6);\n    }\n    Color.toHexStyle = toHexStyle;\n    function toHexString(hexColor) {\n        return '0x' + ('000000' + hexColor.toString(16)).slice(-6);\n    }\n    Color.toHexString = toHexString;\n    function toRgbString(hexColor) {\n        return `RGB: ${Color.toRgb(hexColor).join(', ')}`;\n    }\n    Color.toRgbString = toRgbString;\n    function toRgb(hexColor) {\n        return [hexColor >> 16 & 255, hexColor >> 8 & 255, hexColor & 255];\n    }\n    Color.toRgb = toRgb;\n    function toRgbNormalized(hexColor) {\n        return [(hexColor >> 16 & 255) / 255, (hexColor >> 8 & 255) / 255, (hexColor & 255) / 255];\n    }\n    Color.toRgbNormalized = toRgbNormalized;\n    function fromHexStyle(s) {\n        return parseInt(s.replace('#', '0x'));\n    }\n    Color.fromHexStyle = fromHexStyle;\n    function fromHexString(s) {\n        return parseInt(s);\n    }\n    Color.fromHexString = fromHexString;\n    function fromRgb(r, g, b) {\n        return ((r << 16) | (g << 8) | b);\n    }\n    Color.fromRgb = fromRgb;\n    function fromNormalizedRgb(r, g, b) {\n        return (((r * 255) << 16) | ((g * 255) << 8) | (b * 255));\n    }\n    Color.fromNormalizedRgb = fromNormalizedRgb;\n    function fromArray(array, offset) {\n        return fromRgb(array[offset], array[offset + 1], array[offset + 2]);\n    }\n    Color.fromArray = fromArray;\n    function fromNormalizedArray(array, offset) {\n        return fromNormalizedRgb(array[offset], array[offset + 1], array[offset + 2]);\n    }\n    Color.fromNormalizedArray = fromNormalizedArray;\n    function fromColorListEntry(entry) {\n        if (typeof entry === 'number')\n            return entry;\n        else\n            return entry[0];\n    }\n    Color.fromColorListEntry = fromColorListEntry;\n    /** Copies hex color to rgb array */\n    function toArray(hexColor, array, offset) {\n        array[offset] = (hexColor >> 16 & 255);\n        array[offset + 1] = (hexColor >> 8 & 255);\n        array[offset + 2] = (hexColor & 255);\n        return array;\n    }\n    Color.toArray = toArray;\n    /** Copies normalized (0 to 1) hex color to rgb array */\n    function toArrayNormalized(hexColor, array, offset) {\n        array[offset] = (hexColor >> 16 & 255) / 255;\n        array[offset + 1] = (hexColor >> 8 & 255) / 255;\n        array[offset + 2] = (hexColor & 255) / 255;\n        return array;\n    }\n    Color.toArrayNormalized = toArrayNormalized;\n    /** Copies hex color to rgb vec3 */\n    function toVec3(out, hexColor) {\n        out[0] = (hexColor >> 16 & 255);\n        out[1] = (hexColor >> 8 & 255);\n        out[2] = (hexColor & 255);\n        return out;\n    }\n    Color.toVec3 = toVec3;\n    /** Copies normalized (0 to 1) hex color to rgb vec3 */\n    function toVec3Normalized(out, hexColor) {\n        out[0] = (hexColor >> 16 & 255) / 255;\n        out[1] = (hexColor >> 8 & 255) / 255;\n        out[2] = (hexColor & 255) / 255;\n        return out;\n    }\n    Color.toVec3Normalized = toVec3Normalized;\n    /** Linear interpolation between two colors in rgb space */\n    function interpolate(c1, c2, t) {\n        const r1 = c1 >> 16 & 255;\n        const g1 = c1 >> 8 & 255;\n        const b1 = c1 & 255;\n        const r2 = c2 >> 16 & 255;\n        const g2 = c2 >> 8 & 255;\n        const b2 = c2 & 255;\n        const r = r1 + (r2 - r1) * t;\n        const g = g1 + (g2 - g1) * t;\n        const b = b1 + (b2 - b1) * t;\n        return ((r << 16) | (g << 8) | b);\n    }\n    Color.interpolate = interpolate;\n    const _interpolateHsl1 = Hsl.zero();\n    const _interpolateHsl2 = Hsl.zero();\n    /** Linear interpolation between two colors in HSL space */\n    function interpolateHsl(c1, c2, t) {\n        const hsl1 = Hsl.fromColor(_interpolateHsl1, c1);\n        const hsl2 = Hsl.fromColor(_interpolateHsl2, c2);\n        Hsl.interpolate(hsl1, hsl1, hsl2, t);\n        return Hsl.toColor(hsl1);\n    }\n    Color.interpolateHsl = interpolateHsl;\n    function hasHue(c) {\n        const r = c >> 16 & 255;\n        const g = c >> 8 & 255;\n        const b = c & 255;\n        return r !== g || r !== b;\n    }\n    Color.hasHue = hasHue;\n    const tmpSaturateHcl = [0, 0, 0];\n    function saturate(c, amount) {\n        if (!hasHue(c))\n            return c;\n        Hcl.fromColor(tmpSaturateHcl, c);\n        return Hcl.toColor(Hcl.saturate(tmpSaturateHcl, tmpSaturateHcl, amount));\n    }\n    Color.saturate = saturate;\n    function desaturate(c, amount) {\n        return saturate(c, -amount);\n    }\n    Color.desaturate = desaturate;\n    const tmpDarkenLab = [0, 0, 0];\n    function darken(c, amount) {\n        Lab.fromColor(tmpDarkenLab, c);\n        return Lab.toColor(Lab.darken(tmpDarkenLab, tmpDarkenLab, amount));\n    }\n    Color.darken = darken;\n    function lighten(c, amount) {\n        return darken(c, -amount);\n    }\n    Color.lighten = lighten;\n    function _luminance(x) {\n        return x <= 0.03928 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n    }\n    /**\n     * Relative luminance\n     * http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n     */\n    function luminance(c) {\n        const r = _luminance((c >> 16 & 255) / 255);\n        const g = _luminance((c >> 8 & 255) / 255);\n        const b = _luminance((c & 255) / 255);\n        return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n    }\n    Color.luminance = luminance;\n    /**\n     * WCAG contrast ratio\n     * http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n     */\n    function contrast(a, b) {\n        const l1 = luminance(a);\n        const l2 = luminance(b);\n        return l1 > l2 ? (l1 + 0.05) / (l2 + 0.05) : (l2 + 0.05) / (l1 + 0.05);\n    }\n    Color.contrast = contrast;\n    ;\n    //\n    function _sRGBToLinear(c) {\n        return (c < 0.04045) ? c * 0.0773993808 : Math.pow(c * 0.9478672986 + 0.0521327014, 2.4);\n    }\n    function sRGBToLinear(c) {\n        return fromNormalizedRgb(_sRGBToLinear((c >> 16 & 255) / 255), _sRGBToLinear((c >> 8 & 255) / 255), _sRGBToLinear((c & 255) / 255));\n    }\n    Color.sRGBToLinear = sRGBToLinear;\n    function _linearToSRGB(c) {\n        return (c < 0.0031308) ? c * 12.92 : 1.055 * (Math.pow(c, 0.41666)) - 0.055;\n    }\n    function linearToSRGB(c) {\n        return fromNormalizedRgb(_linearToSRGB((c >> 16 & 255) / 255), _linearToSRGB((c >> 8 & 255) / 255), _linearToSRGB((c & 255) / 255));\n    }\n    Color.linearToSRGB = linearToSRGB;\n})(Color || (Color = {}));\nexport function ColorList(label, type, description, list) {\n    return { label, description, list: list, type };\n}\nexport function ColorTable(o) { return o; }\nexport function ColorMap(o) { return o; }\nexport function getAdjustedColorMap(map, saturation, lightness) {\n    const adjustedMap = {};\n    for (const e in map) {\n        let c = map[e];\n        c = Color.saturate(c, saturation);\n        c = Color.darken(c, -lightness);\n        adjustedMap[e] = c;\n    }\n    return adjustedMap;\n}\nexport function ColorSwatch(l) { return l; }\n","/**\n * Copyright (c) 2017-2025 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n/*\n * This code has been modified from https://github.com/toji/gl-matrix/,\n * copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n */\nimport { Mat4 } from './mat4.js';\nimport { spline as _spline, quadraticBezier as _quadraticBezier, clamp as _clamp } from '../../interpolate.js';\nimport { EPSILON } from './common.js';\nconst _isFinite = isFinite;\nexport function Vec3() {\n    return Vec3.zero();\n}\n(function (Vec3) {\n    function zero() {\n        const out = [0.1, 0.0, 0.0]; // ensure backing array of type double\n        out[0] = 0;\n        return out;\n    }\n    Vec3.zero = zero;\n    function clone(a) {\n        const out = zero();\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        return out;\n    }\n    Vec3.clone = clone;\n    function isFinite(a) {\n        return _isFinite(a[0]) && _isFinite(a[1]) && _isFinite(a[2]);\n    }\n    Vec3.isFinite = isFinite;\n    function isInteger(a) {\n        return Number.isInteger(a[0]) && Number.isInteger(a[1]) && Number.isInteger(a[2]);\n    }\n    Vec3.isInteger = isInteger;\n    function hasNaN(a) {\n        return Number.isNaN(a[0]) || Number.isNaN(a[1]) || Number.isNaN(a[2]);\n    }\n    Vec3.hasNaN = hasNaN;\n    function setNaN(out) {\n        out[0] = NaN;\n        out[1] = NaN;\n        out[2] = NaN;\n        return out;\n    }\n    Vec3.setNaN = setNaN;\n    function fromObj(v) {\n        return create(v.x, v.y, v.z);\n    }\n    Vec3.fromObj = fromObj;\n    function toObj(v) {\n        return { x: v[0], y: v[1], z: v[2] };\n    }\n    Vec3.toObj = toObj;\n    function fromArray(v, array, offset) {\n        v[0] = array[offset + 0];\n        v[1] = array[offset + 1];\n        v[2] = array[offset + 2];\n        return v;\n    }\n    Vec3.fromArray = fromArray;\n    function toArray(v, out, offset) {\n        out[offset + 0] = v[0];\n        out[offset + 1] = v[1];\n        out[offset + 2] = v[2];\n        return out;\n    }\n    Vec3.toArray = toArray;\n    function create(x, y, z) {\n        const out = zero();\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        return out;\n    }\n    Vec3.create = create;\n    function ofArray(array) {\n        const out = zero();\n        out[0] = array[0];\n        out[1] = array[1];\n        out[2] = array[2];\n        return out;\n    }\n    Vec3.ofArray = ofArray;\n    function set(out, x, y, z) {\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        return out;\n    }\n    Vec3.set = set;\n    function copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        return out;\n    }\n    Vec3.copy = copy;\n    function add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        return out;\n    }\n    Vec3.add = add;\n    function sub(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        return out;\n    }\n    Vec3.sub = sub;\n    function mul(out, a, b) {\n        out[0] = a[0] * b[0];\n        out[1] = a[1] * b[1];\n        out[2] = a[2] * b[2];\n        return out;\n    }\n    Vec3.mul = mul;\n    function div(out, a, b) {\n        out[0] = a[0] / b[0];\n        out[1] = a[1] / b[1];\n        out[2] = a[2] / b[2];\n        return out;\n    }\n    Vec3.div = div;\n    function scale(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        return out;\n    }\n    Vec3.scale = scale;\n    /** Scales b, then adds a and b together */\n    function scaleAndAdd(out, a, b, scale) {\n        out[0] = a[0] + (b[0] * scale);\n        out[1] = a[1] + (b[1] * scale);\n        out[2] = a[2] + (b[2] * scale);\n        return out;\n    }\n    Vec3.scaleAndAdd = scaleAndAdd;\n    /** Scales b, then subtracts b from a */\n    function scaleAndSub(out, a, b, scale) {\n        out[0] = a[0] - (b[0] * scale);\n        out[1] = a[1] - (b[1] * scale);\n        out[2] = a[2] - (b[2] * scale);\n        return out;\n    }\n    Vec3.scaleAndSub = scaleAndSub;\n    function addScalar(out, a, b) {\n        out[0] = a[0] + b;\n        out[1] = a[1] + b;\n        out[2] = a[2] + b;\n        return out;\n    }\n    Vec3.addScalar = addScalar;\n    function subScalar(out, a, b) {\n        out[0] = a[0] - b;\n        out[1] = a[1] - b;\n        out[2] = a[2] - b;\n        return out;\n    }\n    Vec3.subScalar = subScalar;\n    /**\n     * Math.round the components of a Vec3\n     */\n    function round(out, a) {\n        out[0] = Math.round(a[0]);\n        out[1] = Math.round(a[1]);\n        out[2] = Math.round(a[2]);\n        return out;\n    }\n    Vec3.round = round;\n    /**\n     * Math.ceil the components of a Vec3\n     */\n    function ceil(out, a) {\n        out[0] = Math.ceil(a[0]);\n        out[1] = Math.ceil(a[1]);\n        out[2] = Math.ceil(a[2]);\n        return out;\n    }\n    Vec3.ceil = ceil;\n    /**\n     * Math.floor the components of a Vec3\n     */\n    function floor(out, a) {\n        out[0] = Math.floor(a[0]);\n        out[1] = Math.floor(a[1]);\n        out[2] = Math.floor(a[2]);\n        return out;\n    }\n    Vec3.floor = floor;\n    /**\n     * Math.trunc the components of a Vec3\n     */\n    function trunc(out, a) {\n        out[0] = Math.trunc(a[0]);\n        out[1] = Math.trunc(a[1]);\n        out[2] = Math.trunc(a[2]);\n        return out;\n    }\n    Vec3.trunc = trunc;\n    /**\n     * Math.abs the components of a Vec3\n     */\n    function abs(out, a) {\n        out[0] = Math.abs(a[0]);\n        out[1] = Math.abs(a[1]);\n        out[2] = Math.abs(a[2]);\n        return out;\n    }\n    Vec3.abs = abs;\n    /**\n     * Returns the minimum of two Vec3's\n     */\n    function min(out, a, b) {\n        out[0] = Math.min(a[0], b[0]);\n        out[1] = Math.min(a[1], b[1]);\n        out[2] = Math.min(a[2], b[2]);\n        return out;\n    }\n    Vec3.min = min;\n    /**\n     * Returns the maximum of two Vec3's\n     */\n    function max(out, a, b) {\n        out[0] = Math.max(a[0], b[0]);\n        out[1] = Math.max(a[1], b[1]);\n        out[2] = Math.max(a[2], b[2]);\n        return out;\n    }\n    Vec3.max = max;\n    /**\n     * Assumes min < max, componentwise\n     */\n    function clamp(out, a, min, max) {\n        out[0] = Math.max(min[0], Math.min(max[0], a[0]));\n        out[1] = Math.max(min[1], Math.min(max[1], a[1]));\n        out[2] = Math.max(min[2], Math.min(max[2], a[2]));\n        return out;\n    }\n    Vec3.clamp = clamp;\n    function distance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1], z = b[2] - a[2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    Vec3.distance = distance;\n    function squaredDistance(a, b) {\n        const x = b[0] - a[0], y = b[1] - a[1], z = b[2] - a[2];\n        return x * x + y * y + z * z;\n    }\n    Vec3.squaredDistance = squaredDistance;\n    function magnitude(a) {\n        const x = a[0], y = a[1], z = a[2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    Vec3.magnitude = magnitude;\n    function squaredMagnitude(a) {\n        const x = a[0], y = a[1], z = a[2];\n        return x * x + y * y + z * z;\n    }\n    Vec3.squaredMagnitude = squaredMagnitude;\n    function setMagnitude(out, a, l) {\n        return scale(out, normalize(out, a), l);\n    }\n    Vec3.setMagnitude = setMagnitude;\n    /**\n     * Negates the components of a vec3\n     */\n    function negate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        return out;\n    }\n    Vec3.negate = negate;\n    /**\n     * Returns the inverse of the components of a Vec3\n     */\n    function inverse(out, a) {\n        out[0] = 1.0 / a[0];\n        out[1] = 1.0 / a[1];\n        out[2] = 1.0 / a[2];\n        return out;\n    }\n    Vec3.inverse = inverse;\n    function normalize(out, a) {\n        const x = a[0], y = a[1], z = a[2];\n        let len = x * x + y * y + z * z;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            out[0] = a[0] * len;\n            out[1] = a[1] * len;\n            out[2] = a[2] * len;\n        }\n        return out;\n    }\n    Vec3.normalize = normalize;\n    function dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n    }\n    Vec3.dot = dot;\n    function cross(out, a, b) {\n        const ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2];\n        out[0] = ay * bz - az * by;\n        out[1] = az * bx - ax * bz;\n        out[2] = ax * by - ay * bx;\n        return out;\n    }\n    Vec3.cross = cross;\n    /**\n     * Performs a linear interpolation between two Vec3's\n     */\n    function lerp(out, a, b, t) {\n        const ax = a[0], ay = a[1], az = a[2];\n        out[0] = ax + t * (b[0] - ax);\n        out[1] = ay + t * (b[1] - ay);\n        out[2] = az + t * (b[2] - az);\n        return out;\n    }\n    Vec3.lerp = lerp;\n    const slerpRelVec = zero();\n    function slerp(out, a, b, t) {\n        const d = _clamp(dot(a, b), -1, 1);\n        const theta = Math.acos(d) * t;\n        scaleAndAdd(slerpRelVec, b, a, -d);\n        normalize(slerpRelVec, slerpRelVec);\n        return add(out, scale(out, a, Math.cos(theta)), scale(slerpRelVec, slerpRelVec, Math.sin(theta)));\n    }\n    Vec3.slerp = slerp;\n    /**\n     * Performs a hermite interpolation with two control points\n     */\n    function hermite(out, a, b, c, d, t) {\n        const factorTimes2 = t * t;\n        const factor1 = factorTimes2 * (2 * t - 3) + 1;\n        const factor2 = factorTimes2 * (t - 2) + t;\n        const factor3 = factorTimes2 * (t - 1);\n        const factor4 = factorTimes2 * (3 - 2 * t);\n        out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n        out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n        out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n        return out;\n    }\n    Vec3.hermite = hermite;\n    /**\n     * Performs a bezier interpolation with two control points\n     */\n    function bezier(out, a, b, c, d, t) {\n        const inverseFactor = 1 - t;\n        const inverseFactorTimesTwo = inverseFactor * inverseFactor;\n        const factorTimes2 = t * t;\n        const factor1 = inverseFactorTimesTwo * inverseFactor;\n        const factor2 = 3 * t * inverseFactorTimesTwo;\n        const factor3 = 3 * factorTimes2 * inverseFactor;\n        const factor4 = factorTimes2 * t;\n        out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n        out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n        out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n        return out;\n    }\n    Vec3.bezier = bezier;\n    function quadraticBezier(out, a, b, c, t) {\n        out[0] = _quadraticBezier(a[0], b[0], c[0], t);\n        out[1] = _quadraticBezier(a[1], b[1], c[1], t);\n        out[2] = _quadraticBezier(a[2], b[2], c[2], t);\n        return out;\n    }\n    Vec3.quadraticBezier = quadraticBezier;\n    /**\n     * Performs a spline interpolation with two control points and a tension parameter\n     */\n    function spline(out, a, b, c, d, t, tension) {\n        out[0] = _spline(a[0], b[0], c[0], d[0], t, tension);\n        out[1] = _spline(a[1], b[1], c[1], d[1], t, tension);\n        out[2] = _spline(a[2], b[2], c[2], d[2], t, tension);\n        return out;\n    }\n    Vec3.spline = spline;\n    /**\n     * Generates a random vector with the given scale\n     */\n    function random(out, scale) {\n        const r = Math.random() * 2.0 * Math.PI;\n        const z = (Math.random() * 2.0) - 1.0;\n        const zScale = Math.sqrt(1.0 - z * z) * scale;\n        out[0] = Math.cos(r) * zScale;\n        out[1] = Math.sin(r) * zScale;\n        out[2] = z * scale;\n        return out;\n    }\n    Vec3.random = random;\n    /**\n     * Transforms the Vec3 with a Mat4. 4th vector component is implicitly '1'\n     */\n    function transformMat4(out, a, m) {\n        const x = a[0], y = a[1], z = a[2], w = 1 / ((m[3] * x + m[7] * y + m[11] * z + m[15]) || 1.0);\n        out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) * w;\n        out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) * w;\n        out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) * w;\n        return out;\n    }\n    Vec3.transformMat4 = transformMat4;\n    function transformDirection(out, a, m) {\n        const x = a[0], y = a[1], z = a[2];\n        out[0] = m[0] * x + m[4] * y + m[8] * z;\n        out[1] = m[1] * x + m[5] * y + m[9] * z;\n        out[2] = m[2] * x + m[6] * y + m[10] * z;\n        return normalize(out, out);\n    }\n    Vec3.transformDirection = transformDirection;\n    /**\n     * Like `transformMat4` but with offsets into arrays\n     */\n    function transformMat4Offset(out, a, m, outO, aO, oM) {\n        const x = a[0 + aO], y = a[1 + aO], z = a[2 + aO], w = 1 / ((m[3 + oM] * x + m[7 + oM] * y + m[11 + oM] * z + m[15 + oM]) || 1.0);\n        out[0 + outO] = (m[0 + oM] * x + m[4 + oM] * y + m[8 + oM] * z + m[12 + oM]) * w;\n        out[1 + outO] = (m[1 + oM] * x + m[5 + oM] * y + m[9 + oM] * z + m[13 + oM]) * w;\n        out[2 + outO] = (m[2 + oM] * x + m[6 + oM] * y + m[10 + oM] * z + m[14 + oM]) * w;\n        return out;\n    }\n    Vec3.transformMat4Offset = transformMat4Offset;\n    /**\n     * Transforms the direction vector with a Mat4. 4th vector component is implicitly '0'\n     * This means the translation components of the matrix are ignored.\n     * Assumes that m is already the transpose of the inverse matrix suitable for normal transformation.\n     */\n    function transformDirectionOffset(out, a, m, outO, aO, oM) {\n        const x = a[0 + aO], y = a[1 + aO], z = a[2 + aO];\n        out[0 + outO] = m[0 + oM] * x + m[4 + oM] * y + m[8 + oM] * z;\n        out[1 + outO] = m[1 + oM] * x + m[5 + oM] * y + m[9 + oM] * z;\n        out[2 + outO] = m[2 + oM] * x + m[6 + oM] * y + m[10 + oM] * z;\n        // Normalize the output vector to handle non-uniform scaling\n        const len = Math.hypot(out[0 + outO], out[1 + outO], out[2 + outO]);\n        if (len > 0) {\n            out[0 + outO] /= len;\n            out[1 + outO] /= len;\n            out[2 + outO] /= len;\n        }\n        return out;\n    }\n    Vec3.transformDirectionOffset = transformDirectionOffset;\n    /**\n     * Transforms the Vec3 with a Mat3.\n     */\n    function transformMat3(out, a, m) {\n        const x = a[0], y = a[1], z = a[2];\n        out[0] = x * m[0] + y * m[3] + z * m[6];\n        out[1] = x * m[1] + y * m[4] + z * m[7];\n        out[2] = x * m[2] + y * m[5] + z * m[8];\n        return out;\n    }\n    Vec3.transformMat3 = transformMat3;\n    /** Transforms the Vec3 with a quat */\n    function transformQuat(out, a, q) {\n        // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n        const x = a[0], y = a[1], z = a[2];\n        const qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n        // calculate quat * vec\n        const ix = qw * x + qy * z - qz * y;\n        const iy = qw * y + qz * x - qx * z;\n        const iz = qw * z + qx * y - qy * x;\n        const iw = -qx * x - qy * y - qz * z;\n        // calculate result * inverse quat\n        out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n        out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n        out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n        return out;\n    }\n    Vec3.transformQuat = transformQuat;\n    /** Computes the angle between 2 vectors, reports in radians. */\n    function angle(a, b) {\n        const denominator = Math.sqrt(squaredMagnitude(a) * squaredMagnitude(b));\n        if (denominator === 0)\n            return Math.PI / 2;\n        const theta = dot(a, b) / denominator;\n        return Math.acos(_clamp(theta, -1, 1)); // clamp to avoid numerical problems\n    }\n    Vec3.angle = angle;\n    const tmp_dh_ab = zero();\n    const tmp_dh_cb = zero();\n    const tmp_dh_bc = zero();\n    const tmp_dh_dc = zero();\n    const tmp_dh_abc = zero();\n    const tmp_dh_bcd = zero();\n    const tmp_dh_cross = zero();\n    /**\n     * Computes the dihedral angles of 4 points, reports in radians.\n     */\n    function dihedralAngle(a, b, c, d) {\n        sub(tmp_dh_ab, a, b);\n        sub(tmp_dh_cb, c, b);\n        sub(tmp_dh_bc, b, c);\n        sub(tmp_dh_dc, d, c);\n        cross(tmp_dh_abc, tmp_dh_ab, tmp_dh_cb);\n        cross(tmp_dh_bcd, tmp_dh_bc, tmp_dh_dc);\n        const _angle = angle(tmp_dh_abc, tmp_dh_bcd);\n        cross(tmp_dh_cross, tmp_dh_abc, tmp_dh_bcd);\n        return dot(tmp_dh_cb, tmp_dh_cross) > 0 ? _angle : -_angle;\n    }\n    Vec3.dihedralAngle = dihedralAngle;\n    /**\n     * @param inclination in radians [0, PI]\n     * @param azimuth in radians [0, 2 * PI]\n     * @param radius [0, +Inf]\n     */\n    function directionFromSpherical(out, inclination, azimuth, radius) {\n        return Vec3.set(out, radius * Math.cos(azimuth) * Math.sin(inclination), radius * Math.sin(azimuth) * Math.sin(inclination), radius * Math.cos(inclination));\n    }\n    Vec3.directionFromSpherical = directionFromSpherical;\n    /**\n     * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n     */\n    function exactEquals(a, b) {\n        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n    }\n    Vec3.exactEquals = exactEquals;\n    /**\n     * Returns whether or not the vectors have approximately the same elements in the same position.\n     */\n    function equals(a, b) {\n        const a0 = a[0], a1 = a[1], a2 = a[2];\n        const b0 = b[0], b1 = b[1], b2 = b[2];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n    }\n    Vec3.equals = equals;\n    const rotTemp = zero();\n    function makeRotation(mat, a, b) {\n        const by = angle(a, b);\n        if (Math.abs(by) < 0.0001)\n            return Mat4.setIdentity(mat);\n        if (Math.abs(by - Math.PI) < EPSILON) {\n            // choose arbitrary orthogonal axis\n            return Mat4.fromRotation(mat, Math.PI, Math.abs(a[0]) < 0.9 ? Vec3.unitX : Vec3.unitZ);\n        }\n        const axis = cross(rotTemp, a, b);\n        return Mat4.fromRotation(mat, by, axis);\n    }\n    Vec3.makeRotation = makeRotation;\n    function isZero(v) {\n        return v[0] === 0 && v[1] === 0 && v[2] === 0;\n    }\n    Vec3.isZero = isZero;\n    /** Project `point` onto `vector` starting from `origin` */\n    function projectPointOnVector(out, point, vector, origin) {\n        sub(out, point, origin);\n        const scalar = dot(vector, out) / squaredMagnitude(vector);\n        return add(out, scale(out, vector, scalar), origin);\n    }\n    Vec3.projectPointOnVector = projectPointOnVector;\n    const tmpProjectPlane = zero();\n    /** Project `point` onto `plane` defined by `normal` starting from `origin` */\n    function projectPointOnPlane(out, point, normal, origin) {\n        normalize(tmpProjectPlane, normal);\n        sub(out, point, origin);\n        return sub(out, point, scale(tmpProjectPlane, tmpProjectPlane, dot(out, tmpProjectPlane)));\n    }\n    Vec3.projectPointOnPlane = projectPointOnPlane;\n    function projectOnVector(out, p, vector) {\n        const scalar = dot(vector, p) / squaredMagnitude(vector);\n        return scale(out, vector, scalar);\n    }\n    Vec3.projectOnVector = projectOnVector;\n    const tmpProject = zero();\n    function projectOnPlane(out, p, normal) {\n        projectOnVector(tmpProject, p, normal);\n        return sub(out, p, tmpProject);\n    }\n    Vec3.projectOnPlane = projectOnPlane;\n    /** Get a vector that is similar to `b` but orthogonal to `a` */\n    function orthogonalize(out, a, b) {\n        // Regular case (`b` not parallel to `a`)\n        normalize(out, cross(out, cross(out, a, b), a));\n        if (!Vec3.isZero(out))\n            return out;\n        // `b` was parallel to `a`, try orthogonalize(a, X)\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        normalize(out, cross(out, cross(out, a, out), a));\n        if (!Vec3.isZero(out))\n            return out;\n        // `X` was parallel to `a`, try orthogonalize(a, Y)\n        out[0] = 0;\n        out[1] = 1;\n        out[2] = 0;\n        normalize(out, cross(out, cross(out, a, out), a));\n        if (!Vec3.isZero(out))\n            return out;\n        // `a` was zero, return normalized `b`\n        normalize(out, b);\n        if (!Vec3.isZero(out))\n            return out;\n        // `b` was zero, return whatever\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        return out;\n    }\n    Vec3.orthogonalize = orthogonalize;\n    /**\n     * Get a vector like `a` that point into the same general direction as `b`,\n     * i.e. where the dot product is > 0\n     */\n    function matchDirection(out, a, b) {\n        if (dot(a, b) > 0)\n            copy(out, a);\n        else\n            negate(out, copy(out, a));\n        return out;\n    }\n    Vec3.matchDirection = matchDirection;\n    /**\n     * Get a normalized vector that is orthogonal to `dir`\n     */\n    function orthogonalDirection(out, dir) {\n        if (isZero(dir)) {\n            return copy(out, Vec3.unitX);\n        }\n        else {\n            const tmp = zero();\n            if (Math.abs(dir[0]) < Math.abs(dir[1]) && Math.abs(dir[0]) < Math.abs(dir[2])) {\n                // dir[0] is the smallest component\n                tmp[0] = 0;\n                tmp[1] = dir[2];\n                tmp[2] = -dir[1];\n            }\n            else if (Math.abs(dir[1]) < Math.abs(dir[2])) {\n                // dir[1] is the smallest component\n                tmp[0] = -dir[2];\n                tmp[1] = 0;\n                tmp[2] = dir[0];\n            }\n            else {\n                // dir[2] is the smallest component\n                tmp[0] = dir[1];\n                tmp[1] = -dir[0];\n                tmp[2] = 0;\n            }\n            return normalize(out, tmp);\n        }\n    }\n    Vec3.orthogonalDirection = orthogonalDirection;\n    const triangleNormalTmpAB = zero();\n    const triangleNormalTmpAC = zero();\n    /** Calculate normal for the triangle defined by `a`, `b` and `c` */\n    function triangleNormal(out, a, b, c) {\n        sub(triangleNormalTmpAB, b, a);\n        sub(triangleNormalTmpAC, c, a);\n        return normalize(out, cross(out, triangleNormalTmpAB, triangleNormalTmpAC));\n    }\n    Vec3.triangleNormal = triangleNormal;\n    const centerTmpV = zero();\n    function center(out, a, b) {\n        return Vec3.scaleAndAdd(out, a, Vec3.sub(centerTmpV, b, a), 0.5);\n    }\n    Vec3.center = center;\n    function toString(a, precision) {\n        return `[${a[0].toPrecision(precision)} ${a[1].toPrecision(precision)} ${a[2].toPrecision(precision)}]`;\n    }\n    Vec3.toString = toString;\n    Vec3.origin = create(0, 0, 0);\n    Vec3.unit = create(1, 1, 1);\n    Vec3.negUnit = create(-1, -1, -1);\n    Vec3.unitX = create(1, 0, 0);\n    Vec3.unitY = create(0, 1, 0);\n    Vec3.unitZ = create(0, 0, 1);\n    Vec3.negUnitX = create(-1, 0, 0);\n    Vec3.negUnitY = create(0, -1, 0);\n    Vec3.negUnitZ = create(0, 0, -1);\n})(Vec3 || (Vec3 = {}));\n","/**\n * Copyright (c) 2017-2023 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { arrayFind } from '../../../../mol-data/util.js';\nimport { Spacegroup } from '../../../../mol-math/geometry.js';\nimport { ModelSymmetry } from '../../../../mol-model-formats/structure/property/symmetry.js';\nimport { radToDeg } from '../../../../mol-math/misc.js';\nexport class Assembly {\n    get operatorGroups() {\n        if (this._operators)\n            return this._operators;\n        this._operators = this.operatorsProvider();\n        return this._operators;\n    }\n    constructor(id, details, operatorsProvider) {\n        this.operatorsProvider = operatorsProvider;\n        this.id = id;\n        this.details = details;\n    }\n}\n(function (Assembly) {\n    function create(id, details, operatorsProvider) {\n        return new Assembly(id, details, operatorsProvider);\n    }\n    Assembly.create = create;\n})(Assembly || (Assembly = {}));\nvar Symmetry;\n(function (Symmetry) {\n    Symmetry.Default = { assemblies: [], spacegroup: Spacegroup.ZeroP1, isNonStandardCrystalFrame: false };\n    function findAssembly(model, id) {\n        const _id = id.toLocaleLowerCase();\n        const symmetry = ModelSymmetry.Provider.get(model);\n        return symmetry ? arrayFind(symmetry.assemblies, a => a.id.toLowerCase() === _id) : undefined;\n    }\n    Symmetry.findAssembly = findAssembly;\n    function getUnitcellLabel(symmetry) {\n        const { cell, name, num } = symmetry.spacegroup;\n        const { size, anglesInRadians } = cell;\n        const a = size[0].toFixed(2);\n        const b = size[1].toFixed(2);\n        const c = size[2].toFixed(2);\n        const alpha = radToDeg(anglesInRadians[0]).toFixed(2);\n        const beta = radToDeg(anglesInRadians[1]).toFixed(2);\n        const gamma = radToDeg(anglesInRadians[2]).toFixed(2);\n        const label = [];\n        // name\n        label.push(`Unit Cell <b>${name}</b> #${num}`);\n        // sizes\n        label.push(`${a}\\u00D7${b}\\u00D7${c} \\u212B`);\n        // angles\n        label.push(`\\u03b1=${alpha}\\u00B0 \\u03b2=${beta}\\u00B0 \\u03b3=${gamma}\\u00B0`);\n        return label.join(' | ');\n    }\n    Symmetry.getUnitcellLabel = getUnitcellLabel;\n})(Symmetry || (Symmetry = {}));\nexport { Symmetry };\n","/**\n * Copyright (c) 2017 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nimport { HashSet } from '../../../mol-data/generic.js';\nimport { Structure, StructureElement } from '../structure.js';\nimport { structureUnion } from './utils/structure-set.js';\nimport { OrderedSet, SortedArray } from '../../../mol-data/int.js';\nvar StructureSelection;\n(function (StructureSelection) {\n    function Singletons(source, structure) { return { kind: 'singletons', source, structure }; }\n    StructureSelection.Singletons = Singletons;\n    function Sequence(source, structures) { return { kind: 'sequence', source, structures }; }\n    StructureSelection.Sequence = Sequence;\n    function Empty(source) { return Singletons(source, Structure.Empty); }\n    StructureSelection.Empty = Empty;\n    ;\n    function isSingleton(s) { return s.kind === 'singletons'; }\n    StructureSelection.isSingleton = isSingleton;\n    function isEmpty(s) { return isSingleton(s) ? s.structure.units.length === 0 : s.structures.length === 0; }\n    StructureSelection.isEmpty = isEmpty;\n    function structureCount(sel) {\n        if (isSingleton(sel))\n            return sel.structure.elementCount;\n        return sel.structures.length;\n    }\n    StructureSelection.structureCount = structureCount;\n    function unionStructure(sel) {\n        if (isEmpty(sel))\n            return Structure.Empty;\n        if (isSingleton(sel))\n            return sel.structure;\n        return structureUnion(sel.source, sel.structures);\n    }\n    StructureSelection.unionStructure = unionStructure;\n    /** Convert selection to loci and use \"current structure units\" in Loci elements */\n    function toLociWithCurrentUnits(sel) {\n        const elements = [];\n        const { unitMap } = sel.source;\n        for (const unit of unionStructure(sel).units) {\n            if (unit === unitMap.get(unit.id)) {\n                elements[elements.length] = {\n                    unit,\n                    indices: OrderedSet.ofBounds(0, unit.elements.length)\n                };\n            }\n            else {\n                elements[elements.length] = {\n                    unit,\n                    indices: OrderedSet.ofSortedArray(SortedArray.indicesOf(unitMap.get(unit.id).elements, unit.elements))\n                };\n            }\n        }\n        return StructureElement.Loci(sel.source, elements);\n    }\n    StructureSelection.toLociWithCurrentUnits = toLociWithCurrentUnits;\n    /** use source unit in loci.elements */\n    function toLociWithSourceUnits(sel) {\n        const elements = [];\n        const { unitMap } = sel.source;\n        for (const _unit of unionStructure(sel).units) {\n            const unit = unitMap.get(_unit.id);\n            if (unit === _unit) {\n                elements[elements.length] = {\n                    unit,\n                    indices: OrderedSet.ofBounds(0, unit.elements.length)\n                };\n            }\n            else {\n                elements[elements.length] = {\n                    unit,\n                    indices: OrderedSet.ofSortedArray(SortedArray.indicesOf(unit.elements, _unit.elements))\n                };\n            }\n        }\n        return StructureElement.Loci(sel.source, elements);\n    }\n    StructureSelection.toLociWithSourceUnits = toLociWithSourceUnits;\n    function getSelection(source, structures, allSingletons) {\n        const len = structures.length;\n        if (len === 0)\n            return Empty(source);\n        if (allSingletons)\n            return Singletons(source, structureUnion(source, structures));\n        return Sequence(source, structures);\n    }\n    class LinearBuilderImpl {\n        add(structure) {\n            const elementCount = structure.elementCount;\n            if (elementCount === 0)\n                return;\n            this.structures[this.structures.length] = structure;\n            if (elementCount !== 1)\n                this.allSingletons = false;\n        }\n        getSelection() { return getSelection(this.source, this.structures, this.allSingletons); }\n        constructor(source) {\n            this.source = source;\n            this.structures = [];\n            this.allSingletons = true;\n        }\n    }\n    class HashBuilderImpl {\n        add(structure) {\n            const atomCount = structure.elementCount;\n            if (atomCount === 0 || !this.uniqueSets.add(structure))\n                return;\n            this.structures[this.structures.length] = structure;\n            if (atomCount !== 1)\n                this.allSingletons = false;\n        }\n        getSelection() { return getSelection(this.structure, this.structures, this.allSingletons); }\n        constructor(structure) {\n            this.structure = structure;\n            this.structures = [];\n            this.allSingletons = true;\n            this.uniqueSets = HashSet(Structure.hashCode, Structure.areUnitIdsAndIndicesEqual);\n        }\n    }\n    function LinearBuilder(structure) { return new LinearBuilderImpl(structure); }\n    StructureSelection.LinearBuilder = LinearBuilder;\n    function UniqueBuilder(structure) { return new HashBuilderImpl(structure); }\n    StructureSelection.UniqueBuilder = UniqueBuilder;\n    // TODO: build timeout checking into this?\n    function forEach(sel, fn) {\n        let idx = 0;\n        if (StructureSelection.isSingleton(sel)) {\n            for (const unit of sel.structure.units) {\n                const { elements } = unit;\n                for (let i = 0, _i = elements.length; i < _i; i++) {\n                    // TODO: optimize this somehow???\n                    const s = Structure.create([unit.getChild(SortedArray.ofSingleton(elements[i]))], { parent: sel.source });\n                    fn(s, idx++);\n                }\n            }\n        }\n        else {\n            for (const s of sel.structures) {\n                fn(s, idx++);\n            }\n        }\n    }\n    StructureSelection.forEach = forEach;\n    function withInputStructure(selection, structure) {\n        if (isSingleton(selection))\n            return Singletons(structure, selection.structure);\n        return Sequence(structure, selection.structures);\n    }\n    StructureSelection.withInputStructure = withInputStructure;\n    // TODO: spatial lookup?\n})(StructureSelection || (StructureSelection = {}));\nexport { StructureSelection };\n","/**\n * Copyright (c) 2018-2021 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author David Sehnal <david.sehnal@gmail.com>\n */\nexport function ObjectKeys(o) {\n    return Object.keys(o);\n}\n;\nexport function assertUnreachable(x) {\n    throw new Error('unreachable');\n}\nexport function isPromiseLike(x) {\n    return typeof (x === null || x === void 0 ? void 0 : x.then) === 'function';\n}\n","/**\n * Copyright (c) 2017-2024 mol* contributors, licensed under MIT, See LICENSE file for more info.\n *\n * Adapted from CIFTools.js (https://github.com/dsehnal/CIFTools.js; MIT) and MMTF (https://github.com/rcsb/mmtf-javascript/; MIT)\n *\n * @author David Sehnal <david.sehnal@gmail.com>\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\nimport { ChunkedArray } from '../../../mol-data/util.js';\nimport { Encoding } from './encoding.js';\nimport { classifyIntArray } from './classifier.js';\nexport class ArrayEncoderImpl {\n    and(f) {\n        return new ArrayEncoderImpl(this.providers.concat([f]));\n    }\n    encode(data) {\n        const encoding = [];\n        for (const p of this.providers) {\n            const t = p(data);\n            if (!t.encodings.length) {\n                throw new Error('Encodings must be non-empty.');\n            }\n            data = t.data;\n            for (const e of t.encodings) {\n                encoding.push(e);\n            }\n        }\n        if (!(data instanceof Uint8Array)) {\n            throw new Error('The encoding must result in a Uint8Array. Fix your encoding chain.');\n        }\n        return {\n            encoding,\n            data: data\n        };\n    }\n    constructor(providers) {\n        this.providers = providers;\n    }\n}\nexport var ArrayEncoder;\n(function (ArrayEncoder) {\n    function by(f) {\n        return new ArrayEncoderImpl([f]);\n    }\n    ArrayEncoder.by = by;\n    function fromEncoding(encoding) {\n        let e = by(getProvider(encoding[0]));\n        for (let i = 1; i < encoding.length; i++) {\n            if (encoding[i - 1].kind === 'IntegerPacking')\n                break;\n            e = e.and(getProvider(encoding[i]));\n        }\n        return e;\n    }\n    ArrayEncoder.fromEncoding = fromEncoding;\n    function getProvider(e) {\n        switch (e.kind) {\n            case 'ByteArray': return ArrayEncoding.byteArray;\n            case 'FixedPoint': return ArrayEncoding.fixedPoint(e.factor);\n            case 'IntervalQuantization': return ArrayEncoding.intervalQuantizaiton(e.min, e.max, e.numSteps);\n            case 'RunLength': return ArrayEncoding.runLength;\n            case 'Delta': return ArrayEncoding.delta;\n            case 'IntegerPacking': return ArrayEncoding.integerPacking;\n            case 'StringArray': return ArrayEncoding.stringArray;\n        }\n    }\n})(ArrayEncoder || (ArrayEncoder = {}));\nexport var ArrayEncoding;\n(function (ArrayEncoding) {\n    function by(f) {\n        return new ArrayEncoderImpl([f]);\n    }\n    ArrayEncoding.by = by;\n    function uint8(data) {\n        return {\n            encodings: [{ kind: 'ByteArray', type: Encoding.IntDataType.Uint8 }],\n            data\n        };\n    }\n    function int8(data) {\n        return {\n            encodings: [{ kind: 'ByteArray', type: Encoding.IntDataType.Int8 }],\n            data: new Uint8Array(data.buffer, data.byteOffset)\n        };\n    }\n    const writers = {\n        [Encoding.IntDataType.Int16]: function (v, i, a) { v.setInt16(2 * i, a, true); },\n        [Encoding.IntDataType.Uint16]: function (v, i, a) { v.setUint16(2 * i, a, true); },\n        [Encoding.IntDataType.Int32]: function (v, i, a) { v.setInt32(4 * i, a, true); },\n        [Encoding.IntDataType.Uint32]: function (v, i, a) { v.setUint32(4 * i, a, true); },\n        [Encoding.FloatDataType.Float32]: function (v, i, a) { v.setFloat32(4 * i, a, true); },\n        [Encoding.FloatDataType.Float64]: function (v, i, a) { v.setFloat64(8 * i, a, true); }\n    };\n    const byteSizes = {\n        [Encoding.IntDataType.Int16]: 2,\n        [Encoding.IntDataType.Uint16]: 2,\n        [Encoding.IntDataType.Int32]: 4,\n        [Encoding.IntDataType.Uint32]: 4,\n        [Encoding.FloatDataType.Float32]: 4,\n        [Encoding.FloatDataType.Float64]: 8\n    };\n    function byteArray(data) {\n        const type = Encoding.getDataType(data);\n        if (type === Encoding.IntDataType.Int8)\n            return int8(data);\n        else if (type === Encoding.IntDataType.Uint8)\n            return uint8(data);\n        const result = new Uint8Array(data.length * byteSizes[type]);\n        const w = writers[type];\n        const view = new DataView(result.buffer);\n        for (let i = 0, n = data.length; i < n; i++) {\n            w(view, i, data[i]);\n        }\n        return {\n            encodings: [{ kind: 'ByteArray', type }],\n            data: result\n        };\n    }\n    ArrayEncoding.byteArray = byteArray;\n    function _fixedPoint(data, factor) {\n        const srcType = Encoding.getDataType(data);\n        const result = new Int32Array(data.length);\n        for (let i = 0, n = data.length; i < n; i++) {\n            result[i] = Math.round(data[i] * factor);\n        }\n        return {\n            encodings: [{ kind: 'FixedPoint', factor, srcType }],\n            data: result\n        };\n    }\n    function fixedPoint(factor) { return data => _fixedPoint(data, factor); }\n    ArrayEncoding.fixedPoint = fixedPoint;\n    function _intervalQuantizaiton(data, min, max, numSteps, arrayType) {\n        const srcType = Encoding.getDataType(data);\n        if (!data.length) {\n            return {\n                encodings: [{ kind: 'IntervalQuantization', min, max, numSteps, srcType }],\n                data: new Int32Array(0)\n            };\n        }\n        if (max < min) {\n            const t = min;\n            min = max;\n            max = t;\n        }\n        const delta = (max - min) / (numSteps - 1);\n        const output = new arrayType(data.length);\n        for (let i = 0, n = data.length; i < n; i++) {\n            const v = data[i];\n            if (v <= min)\n                output[i] = 0;\n            else if (v >= max)\n                output[i] = numSteps - 1;\n            else\n                output[i] = (Math.round((v - min) / delta)) | 0;\n        }\n        return {\n            encodings: [{ kind: 'IntervalQuantization', min, max, numSteps, srcType }],\n            data: output\n        };\n    }\n    function intervalQuantizaiton(min, max, numSteps, arrayType = Int32Array) {\n        return data => _intervalQuantizaiton(data, min, max, numSteps, arrayType);\n    }\n    ArrayEncoding.intervalQuantizaiton = intervalQuantizaiton;\n    function runLength(data) {\n        let srcType = Encoding.getDataType(data);\n        if (srcType === void 0) {\n            data = new Int32Array(data);\n            srcType = Encoding.IntDataType.Int32;\n        }\n        if (!data.length) {\n            return {\n                encodings: [{ kind: 'RunLength', srcType, srcSize: 0 }],\n                data: new Int32Array(0)\n            };\n        }\n        // calculate output size\n        let fullLength = 2;\n        for (let i = 1, il = data.length; i < il; i++) {\n            if (data[i - 1] !== data[i]) {\n                fullLength += 2;\n            }\n        }\n        const output = new Int32Array(fullLength);\n        let offset = 0;\n        let runLength = 1;\n        for (let i = 1, il = data.length; i < il; i++) {\n            if (data[i - 1] !== data[i]) {\n                output[offset] = data[i - 1];\n                output[offset + 1] = runLength;\n                runLength = 1;\n                offset += 2;\n            }\n            else {\n                ++runLength;\n            }\n        }\n        output[offset] = data[data.length - 1];\n        output[offset + 1] = runLength;\n        return {\n            encodings: [{ kind: 'RunLength', srcType, srcSize: data.length }],\n            data: output\n        };\n    }\n    ArrayEncoding.runLength = runLength;\n    function delta(data) {\n        if (!Encoding.isSignedIntegerDataType(data)) {\n            throw new Error('Only signed integer types can be encoded using delta encoding.');\n        }\n        let srcType = Encoding.getDataType(data);\n        if (srcType === void 0) {\n            data = new Int32Array(data);\n            srcType = Encoding.IntDataType.Int32;\n        }\n        if (!data.length) {\n            return {\n                encodings: [{ kind: 'Delta', origin: 0, srcType }],\n                data: new data.constructor(0)\n            };\n        }\n        const output = new data.constructor(data.length);\n        const origin = data[0];\n        output[0] = data[0];\n        for (let i = 1, n = data.length; i < n; i++) {\n            output[i] = data[i] - data[i - 1];\n        }\n        output[0] = 0;\n        return {\n            encodings: [{ kind: 'Delta', origin, srcType }],\n            data: output\n        };\n    }\n    ArrayEncoding.delta = delta;\n    function isSigned(data) {\n        for (let i = 0, n = data.length; i < n; i++) {\n            if (data[i] < 0)\n                return true;\n        }\n        return false;\n    }\n    function packingSizeUnsigned(data, upperLimit) {\n        let size = 0;\n        for (let i = 0, n = data.length; i < n; i++) {\n            size += (data[i] / upperLimit) | 0;\n        }\n        size += data.length;\n        return size;\n    }\n    function packingSizeSigned(data, upperLimit) {\n        const lowerLimit = -upperLimit - 1;\n        let size = 0;\n        for (let i = 0, n = data.length; i < n; i++) {\n            const value = data[i];\n            if (value >= 0) {\n                size += (value / upperLimit) | 0;\n            }\n            else {\n                size += (value / lowerLimit) | 0;\n            }\n        }\n        size += data.length;\n        return size;\n    }\n    function determinePacking(data) {\n        const signed = isSigned(data);\n        const size8 = signed ? packingSizeSigned(data, 0x7F) : packingSizeUnsigned(data, 0xFF);\n        const size16 = signed ? packingSizeSigned(data, 0x7FFF) : packingSizeUnsigned(data, 0xFFFF);\n        if (data.length * 4 < size16 * 2) {\n            // 4 byte packing is the most effective\n            return {\n                isSigned: signed,\n                size: data.length,\n                bytesPerElement: 4\n            };\n        }\n        else if (size16 * 2 < size8) {\n            // 2 byte packing is the most effective\n            return {\n                isSigned: signed,\n                size: size16,\n                bytesPerElement: 2\n            };\n        }\n        else {\n            // 1 byte packing is the most effective\n            return {\n                isSigned: signed,\n                size: size8,\n                bytesPerElement: 1\n            };\n        }\n        ;\n    }\n    function _integerPacking(data, packing) {\n        const upperLimit = packing.isSigned\n            ? (packing.bytesPerElement === 1 ? 0x7F : 0x7FFF)\n            : (packing.bytesPerElement === 1 ? 0xFF : 0xFFFF);\n        const lowerLimit = -upperLimit - 1;\n        const n = data.length;\n        const packed = packing.isSigned\n            ? packing.bytesPerElement === 1 ? new Int8Array(packing.size) : new Int16Array(packing.size)\n            : packing.bytesPerElement === 1 ? new Uint8Array(packing.size) : new Uint16Array(packing.size);\n        let j = 0;\n        for (let i = 0; i < n; i++) {\n            let value = data[i];\n            if (value >= 0) {\n                while (value >= upperLimit) {\n                    packed[j] = upperLimit;\n                    ++j;\n                    value -= upperLimit;\n                }\n            }\n            else {\n                while (value <= lowerLimit) {\n                    packed[j] = lowerLimit;\n                    ++j;\n                    value -= lowerLimit;\n                }\n            }\n            packed[j] = value;\n            ++j;\n        }\n        const result = byteArray(packed);\n        return {\n            encodings: [{\n                    kind: 'IntegerPacking',\n                    byteCount: packing.bytesPerElement,\n                    isUnsigned: !packing.isSigned,\n                    srcSize: n\n                },\n                result.encodings[0]\n            ],\n            data: result.data\n        };\n    }\n    /**\n     * Packs Int32 array. The packing level is determined automatically to either 1-, 2-, or 4-byte words.\n     */\n    function integerPacking(data) {\n        // if (!(data instanceof Int32Array)) {\n        //     throw new Error('Integer packing can only be applied to Int32 data.');\n        // }\n        const packing = determinePacking(data);\n        if (packing.bytesPerElement === 4) {\n            // no packing done, Int32 encoding will be used\n            return byteArray(data);\n        }\n        return _integerPacking(data, packing);\n    }\n    ArrayEncoding.integerPacking = integerPacking;\n    function stringArray(data) {\n        const map = Object.create(null);\n        const strings = [];\n        const output = new Int32Array(data.length);\n        const offsets = ChunkedArray.create(Int32Array, 1, Math.min(1024, data.length < 32 ? data.length + 1 : Math.round(data.length / 8) + 1));\n        ChunkedArray.add(offsets, 0);\n        let accLength = 0;\n        let i = 0;\n        for (const s of data) {\n            // handle null strings.\n            if (s === null || s === void 0) {\n                output[i++] = -1;\n                continue;\n            }\n            let index = map[s];\n            if (index === void 0) {\n                // increment the length\n                accLength += s.length;\n                // store the string and index\n                index = strings.length;\n                strings[index] = s;\n                map[s] = index;\n                // write the offset\n                ChunkedArray.add(offsets, accLength);\n            }\n            output[i++] = index;\n        }\n        const offsetArray = ChunkedArray.compact(offsets);\n        const offsetEncoding = classifyIntArray(offsetArray);\n        const encodedOddsets = offsetEncoding.encode(offsetArray);\n        const dataEncoding = classifyIntArray(output);\n        const encodedData = dataEncoding.encode(output);\n        return {\n            encodings: [{ kind: 'StringArray', dataEncoding: encodedData.encoding, stringData: strings.join(''), offsetEncoding: encodedOddsets.encoding, offsets: encodedOddsets.data }],\n            data: encodedData.data\n        };\n    }\n    ArrayEncoding.stringArray = stringArray;\n})(ArrayEncoding || (ArrayEncoding = {}));\n"],"names":["AtomSiteOperatorMappingSchema","molstar_atom_site_operator_mapping","label_asym_id","Schema","Str","auth_asym_id","operator_name","suffix","assembly_id","assembly_operator_id","Int","symmetry_operator_index","symmetry_hkl","Vector","ncs_id","asmValueKind","i","xs","operator","assembly","ValueKinds","NotPresent","Present","symmetryValueKind","spgrOp","fields","str","name","_a","id","valueKind","int","operId","vec","hkl","ncsId","getFields","itDiff","diff","Loci","structure","elements","kind","isEmpty","loci","u","size","indices","s","length","firstElement","unit","ofSingleton","start","makeIndexSet","newIndices","isRange","ofRange","ofSortedArray","extendToWholeResidues","restrictToConformation","residueAltIds","Set","lociElement","isWholeUnit","Kind","Atomic","unitElements","h","model","atomicHierarchy","label_alt_id","atoms","index","residueIndex","offsets","residueOffsets","residueAtomSegments","len","clear","eI","getAt","rI","add","value","hasSharedAltId","has","j","_j","idx","indexOf","altId","getChainSegments","chainAtomSegments","Spheres","coarseHierarchy","spheres","chainElementSegments","Gaussians","gaussians","element","collectChains","chainIndices","_i","cI","ofBounds","Int32Array","extendGroupToWholeChains","end","isPartitioned","chainIndex","lI","baseUnit","units","areSameChainOperatorGroup","extendToWholeChains","e","Traits","is","traits","Trait","Partitioned","entityModelKey","location","entity","getElementIndices","elementIndices","il","push","getUnitIndices","areEqual","ofLength","indicesOf","x","a","b","elementA","elementB","isWholeStructure","elementCount","all","map","none","fromExpression","expression","queryContext","expr","selection","toLociWithSourceUnits","fromQuery","query","fromSchema","schema","S","toLoci","getFirstLocation","create","firstResidue","firstChain","toStructure","forEach","v","getChild","parent","forEachLocation","f","loc","remap","unitMap","get","indexedIntersect","union","ys","Map","set","delete","subtract","intersect","areIntersecting","isSubset","extendToWholeEntities","l","entities","extendToWholeModels","models","extendToAllInstances","byModel","extendToWholeOperators","operators","conformation","boundaryHelper","tempPosBoundary","getBoundary","transform","result","reset","position","transformMat4","includePositionRadius","r","finishedIncludeStep","radiusPositionRadius","box","getBox","sphere","getSphere","tempPos","toPositionsArray","positions","offset","m","indexCount","toArray","sourceIndex","isAtomic","atomSourceIndex","getOpData","opName","multimodel","modelLabel","modelIndex","ranges","atom","chain","getPrincipalAxes","Float32Array","ofPositions","getPrincipalAxesMany","locis","toExpression","struct","generator","empty","sourceIndexMap","key","sourceIndices","label","modelNum","opData","keys","k","next","done","array","opGroups","d","opQueries","opProp","atomProperty","core","operatorName","siProp","tests","type","_rI","rel","inRange","atomGroups","logic","or","eq","and","modifier","combinator","merge","q","Axes3D","origin","dirA","dirB","dirC","copy","out","axes","magnitude","clone","tmpSizeV","volume","normalize","tmpTransformMat3","n","directionTransform","transformMat3","scale","getElementMoleculeType","derived","residue","moleculeType","compId","entityKey","coarseElements","seq","sequence","byEntityKey","seq_id_begin","getCoarseBegCompId","cc","properties","chemicalComponentMap","Unknown","EmptyAtomIds","getAtomIdForAtomRole","polymerType","atomRole","p","undefined","tmpPositionsVec","zero","getPositions","c","internal","bundleElement","Dictionary","groupedUnits","Any","bundle","ElementSelectionQuery","current","None","MolScriptSymbolTable","SymbolList","Object","IntTuple","Zero","_int32","_float64","_int32_1","_float64_1","data","ArrayBuffer","data_1","Float64Array","fst","snd","t","compare","compareInArray","hashCode","toString","TokenBuilder","Tokenizer","lineNumber","tokenStart","tokenEnd","trimStr","charCodeAt","substring","getTokenString","state","eatLine","markLine","readLinesChunk","count","tokens","read","addUnchecked","trim","markStart","readLine","readLineTrim","markLines","lineTokens","readLines","ret","readLinesAsync","async","ctx","initialLineCount","linesAlreadyRead","chunkSize","linesToRead","Math","min","update","message","max","readAllLines","readAllLinesAsync","readLinesChunkChecked","eatValue","skipWhitespace","prev","skipStrictWhitespace","builder","indicesLenMinus2","newBuffer","Uint32Array","resize","addToken","tokenizer","Vec4","fromSphere","center","radius","y","z","w","ofSphere","hasNaN","Number","isNaN","fromArray","toVec3Array","fromVec3Array","distance","sqrt","round","ceil","floor","squaredDistance","norm","squaredNorm","dot","inverse","exactEquals","equals","a0","a1","a2","a3","b0","b1","b2","b3","abs","precision","toPrecision","ArrayTrajectory","getFrameAtIndex","this","frames","constructor","frameCount","representative","duration","immediateActions","setImmediate","window","handler","args","clearImmediate","handle","thisGlobal","_window","_self","self","WorkerGlobalScope","_global","g","tasksByHandle","doc","document","registerImmediate","nextHandle","runIfPresent","task","callback","apply","run","process","call","nextTick","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","random","onGlobalMessage","event","source","slice","addEventListener","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","createElement","html","documentElement","script","onreadystatechange","removeChild","appendChild","installReadyStateChangeImplementation","setTimeout","Function","createImmediateActions","resolveImmediate","res","Scheduler","immediatePromise","Promise","delay","timeout","IntraUnitBonds","Empty","flags","order","InterUnitBonds","getBondFromLocation","aUnit","bUnit","getEdge","aIndex","bIndex","getBondIndexFromLocation","getEdgeIndex","UnitPairBonds","UnitPairEdges","v3distance","CoarseGrainedBondMaxRadius","CoarseGrainedIntraResidueBondMaxDistance","CoarseGrainedInterResidueBondMaxDistance","getGraph","atomA","atomB","_order","_flags","_key","atomCount","props","EdgeBuilder","Uint16Array","slotCount","Int8Array","edgeCount","addNextEdge","assignProperty","createGraph","tmpDistVecA","tmpDistVecB","getDistance","indexA","indexB","__structConnAdded","computeIntraUnitBonds","noCompute","forceCompute","Provider","indexPairs","hasOperators","canGetFromIndexPairBonds","bonds","bySameOperator","edgeProps","flag","invertedIndex","getInvertedAtomSourceIndex","orders","jl","aI","_aI","bI","_bI","canRemap","cacheable","getIndexPairBonds","type_symbol","maxDistance","operatorA","operatorB","opKey","aeI","isHa","srcA","opA","opB","beI","dist","findIndexPairBonds","isCoarseGrained","maxRadius","atomicConformation","label_atom_id","label_comp_id","label_seq_id","residues","traceElementIndex","query3d","lookup3d","structConn","component","structConnExhaustive","isExhaustive","componentMap","lastResidue","isWatery","isDictionaryBased","isSequenced","structConnAdded","hasStructConnEntries","residueCantorPairs","elemA","structConnEntries","byAtomIndex","hasStructConn","se","partnerA","partnerB","symmetry","atomIndex","rowIndex","raI","seqIdA","entries","entitySeq","getEntityFromChain","microHet","atomIdA","componentPairs","squaredDistances","find","thresholdA","altA","metalA","ni","altB","residuePair","isHb","isMetal","rbI","Flag","Covalent","MetallicCoordination","Computed","seqIdB","findBonds","v3set","v3squaredDistance","v3transformMat4","unitA","unitB","_imageTransform","_imageA","DefaultInterBondComputationProps","ignoreWater","ignoreIon","Builder","hasIndexPairBonds","some","hasExhaustiveStructConn","getMap","canAddFromIndexPairBonds","opUnits","atomsToUnits","pairs","unitsA","unitsB","uA","uB","unitIds","unitIdA","unitIdB","startUnitPair","finishUnitPair","addIndexPairBonds","eachUnitPair","atomsA","residueIndexA","xA","yA","zA","atomsB","residueIndexB","type_symbolA","label_alt_idA","label_atom_idA","label_comp_idA","type_symbolB","label_alt_idB","label_atom_idB","label_comp_idB","auth_seq_id","auth_seq_idA","auth_seq_idB","occupancy","occupancyA","occupancyB","hasOccupancy","isDefined","imageTransform","mul","matrix","isNotIdentity","isIdentity","bCenter","bRadius","boundary","testDistanceSq","opKeyA","opKeyB","added","occA","compIdA","atomIdB","compIdB","findPairBonds","validUnit","validUnitPair","computeInterUnitBonds","mtA","mtB","notWater","Water","notIonA","Ion","notIonB","notIon","smaller","bigger","hasCommonStructConnRecord","Bond","Location","aStructure","bStructure","areLocationsEqual","locA","locB","isLocation","isLoci","areLociEqual","isLociEmpty","remapLoci","toStructureElementLoci","lociBond","deduplicate","ofUnsortedArray","toFirstStructureElementLoci","getType","bond","interUnitBonds","getOrder","getIntraUnitBondCount","ug","unitSymmetryGroups","ElementBondIterator","move","advance","setElement","interBondIndices","getEdgeIndices","interBondCount","interBondIndex","intraBondEnd","intraBondIndex","hasNext","otherUnit","otherIndex","edges","getBoundingSphere","boundingSphere","fromPairProvider","pA","pB","ParamDefinition","setInfo","param","info","description","legend","fieldLabels","isHidden","shortLabel","twoColumns","isEssential","category","hideIf","help","Select","defaultValue","options","checkDefaultKey","cycle","setRange","range","step","Group","params","customDefault","getDefaultValues","presets","isExpanded","isFlat","pivot","_defaultObjectListCtor","unsetGetValue","Error","isOptional","_resolveRef","resolve","ref","getData","resolveRefValue","getValue","resolveRef","resolveRefs","hasValueRef","hasParamValueRef","o","select","values","isParamEqual","vSet","language","mergeParam","Array","isArray","selectHasOption","normalizeParam","defaultIfUndefined","filter","normalizeParams","Essential","Optional","Value","MultiSelect","emptyValue","Boolean","Text","multiline","placeholder","disableInteractiveUpdates","Color","ColorList","def","colors","list","presetKind","Vec3","Mat4","Url","url","body","File","accept","FileList","Numeric","immediateUpdate","Interval","LineGraph","getVolume","EmptyGroup","Mapped","defaultKey","names","MappedStatic","ObjectList","getLabel","ctor","ValueRef","getOptions","defaultRef","DataRef","Converted","fromValue","toValue","converted","Conditioned","conditionParams","conditionForValue","conditionedValue","Script","For","setDefaultValues","defaultValues","validate","objectToOptions","arrayToOptions","optionLabel","withDefaults","updates","IndexedCustomProperty","arrayToMap","getCifDataSource","prop","cache","rowCount","getElements","fromAtomMap","ElementMappedCustomProperty","fromAtomArray","getResidueSegments","fromResidueMap","SegmentedMappedIndexedCustomProperty","fromResidueArray","fromChainMap","fromChainArray","fromEntityMap","EntityMappedCustomProperty","getStructureElements","seenIndices","unitGroups","segments","segmentGetter","unitGroup","chains","transientSegments","seg","sort","property","level","create22","Lab","toHcl","lab","atan2","NaN","darken","amount","Kn","fromColor","color","toRgb","rgb_xyz","xyz_lab","Xn","Yn","Zn","rgbToXyz","fromHcl","hcl","toLab","toColor","lab_xyz","xyz_rgb","fromRgb","lighten","tmpSaturateHcl","saturate","desaturate","T0","T1","T2","T3","pow","I","areEqualIS","areIntersectingSI","isSubInterval","minA","maxA","minB","maxB","isSubsetIS","findRange","isSubsetSI","findPredecessorIndex","findPredecessorIndexInInterval","bounds","intersectionSize","intersectionSizeSI","sizeA","sizeB","sa","sb","areRangesIntersecting","lSize","lMin","rSize","rMin","arr","unionII","unionSI","intersectSI","subtractII","interval","commonCount","resultSize","li","last","indexOfInInterval","subtractIS","subtractSI","isRangeSubset","bSize","idxA","lenI","lenA","lenB","startJ","endJ","O","OrderedSet","forEachSegment","segment","sI","endI","isInterval","isSortedArray","Hcl","hasHue","tmpFromColorLab","fromLab","tmpToColorLab","cos","sin","tmpDarkenLab","MolScriptBuilder","structureQuery","atomName","es","elementSymbol","re","pattern","regex","fn","ctrl","evaluate","eval","_acp","_ammp","macromolecular","_atp","topology","acp","atp","ammp","_aps","atomSet","propertySet","acpSet","atpSet","ammpSet","DefaultQueryRuntimeTable","removeSymbol","runtime","symbol","addSymbol","console","warn","addCustomProp","desc","symbols","removeCustomProp","getRuntime","QueryCompilerCtx","table","constQueryContext","Structure","QueryCompiledSymbol","CompiledQueryFn","QueryRuntimeArguments","QuerySymbolRuntime","Const","Dynamic","isConst","forEachEval","queryCtx","SymbolRuntimeImpl","compile","inputArgs","constArgs","isArgumentsArray","arg","compiled","_compile","createDynamicFn","isLiteral","isSymbol","head","compiler","AtomicNumbers","ElementVdwRadii","ElementAtomWeights","DefaultVdwRadius","DefaultAtomWeight","DefaultAtomNumber","VdwRadius","AtomWeight","AtomNumber","ProteinOneLetterCodes","DnaOneLetterCodes","RnaOneLetterCodes","getProteinOneLetterCode","residueName","getRnaOneLetterCode","getDnaOneLetterCode","Sequence","getSequenceString","code","from","join","ofResidueNames","seqId","Protein","RNA","DNA","Generic","determineKind","ResidueNamesImpl","indexMap","codeFromName","codeProvider","codes","compIds","seqIds","seq_id","comp_id","labels","mh","ofStringArray","ofIntArray","ofSequenceRanges","seqIdBegin","seqIdEnd","SequenceRangesImpl","minSeqId","seqIdStart","maxSeqId","MAX_SAFE_INTEGER","idStart","idEnd","ofConst","ofLambda","row","DataCompressionMethod","readFromFile","file","readFromFileInternal","ajaxGet","ajaxGetInternal","title","headers","genericError","isDownload","readData","action","reject","FileReader","readyState","DONE","XMLHttpRequest","isDone","error","hasError","onerror","target","onprogress","shouldUpdate","lengthComputable","isIndeterminate","loaded","total","toFixed","onload","getCompression","test","Gzip","Zip","reFilterPath","processFile","fileContent","compression","Uint8Array","parsed","buffer","decompress","DOMParser","parseFromString","JSON","parse","canAbort","arrayBuffer","readFromFileInternal_NodeJS","reader","readAsArrayBuffer","abort","RequestPool","pool","pop","emptyFunc","deposit","req","poolSize","onabort","startsWith","filename","_fs","getFS","readFile","err","readFileAsync","ajaxGetInternal_file_NodeJS","aborter","AbortController","response","fetch","signal","status","bytes","ajaxGetInternal_http_NodeJS","xhttp","open","setRequestHeader","responseType","getRequestResponseType","send","XMLDocument","processAjax","ajaxGetMany","assetManager","sources","maxConcurrency","slots","promises","promiseKeys","currentSrc","wrapPromise","getUrlAsset","isBinary","runAsChild","race","src","canFail","_filterRemoveIndex","asset","_","decode","encoding","decodeStep","IntDataType","Uint8","Int8","byteOffset","int8","Int16","view","Int16Array","int16","Uint16","uint16","Int32","int32","Uint32","uint32","FloatDataType","Float32","float32","Float64","float64","output","getFloatArray","srcType","factor","fixedPoint","delta","numSteps","intervalQuantization","getIntArray","srcSize","dataOffset","runLength","isUnsigned","upperLimit","byteCount","integerPackingUnsigned","lowerLimit","integerPackingSigned","integerPacking","offsetEncoding","dataEncoding","stringData","strings","stringArray","byteSize","StructureSymmetry","getSelector","asymIds","generators","chainTest","pred","DefaultName","inSet","getOperatorsForIndex","modelCenter","spacegroup","ncsOperators","toFractional","cell","symOp","getSymmetryOperatorRef","ul","ncsOp","getOperatorsForRange","ijkMin","ijkMax","ncsCount","getSymmetryOperator","op","assembleOperators","assembler","dynamicBonds","oper","addWithOperator","getStructure","areUnitsEquivalent","invariantId","UnitEquivalenceBuilder","hashUnit","buildAssembly","asmName","findAssembly","coordinateSystem","identity","operList","operatorGroups","selector","structureCount","unionStructure","buildSymmetryAssembly","representativeModel","shift","builderSymmetryMates","isZero","getCenter","_operators_333","getOperatorsCached333","lookup","hash","closeUnits","findUnitIndices","uI","_uI","check","findMatesRadius","buildSymmetryRange","findSymmetryRange","buildNcs","_buildNCS","computeTransformGroups","groups","eqUnits","SymmetryGroup","areTransformGroupsEquivalent","au","bu","getMantissaMultiplier","maxDigits","mv","integerDigitCount","log10","getArrayDigitCount","mantissaDigits","integerDigits","isInteger","parseInt","getPrecision","isFinite","parseFloat","fractionDigits","ReaderResult","line","success","warnings","Success","isError","getNextId","ValueBox","ValueCell","metadata","version","withValue","updateIfChanged","Model","_trajectoryFromModelAndCoordinates","coordinates","trajectory","srcIndexArray","getSourceIndexArray","coarseGrained","_rowCount","getAtomicConformationFromFrame","customProperties","_staticPropertyData","_dynamicPropertyData","fromCell","anglesInRadians","TrajectoryInfo","CoarseGrained","srcIndex","__srcIndexArray__","frame","getAtomicConformation","atomId","B_iso_or_equiv","trajectoryFromModelAndCoordinates","trajectoryFromTopologyAndCoordinates","basic","sourceData","bondData","indexPairBonds","fromData","CenterProp","coarseConformation","rangesX","rangesY","rangesZ","minX","maxX","minY","maxY","minZ","maxZ","calcModelCenter","AtomicRadiiProp","getAtomicRadii","nAtoms","radii","InvertedAtomSrcIndexProp","invertIndex","TrajectoryInfoProp","trajectoryInfo","AsymIdCountProp","AsymIdCount","asymIdCount","auth","structAsymMap","auth_id","label_id","getAsymIdCount","AsymIdOffset","createSimple","Index","MaxIndex","getRoot","areHierarchiesEqual","CoordinatesHistoryProp","CoordinatesHistory","coordinatesHistory","CoarseGrainedProp","polymerResidueCount","polymerDirectionCount","directionToElementIndex","NA","hasBB","hasSC1","hasPdbId","entryId","match","hasCarbohydrate","saccharideComponentMap","hasProtein","subtype","hasNucleic","endsWith","isFromPdbArchive","db","database_2","database_id","hasSecondaryStructure","struct_conf","struct_sheet_range","isApplicable","tmpAngles90","tmpLengths1","isFromXray","exptl","method","toUpperCase","isFromEm","hasXrayMap","status_code_sf","pdbx_database_status","hasEmMap","db_name","content_type","pdbx_database_related","hasDensityMap","hasCrystalSymmetry","num","isFromNmr","isExperimental","pdbx_structure_determination_methodology","toLowerCase","isIntegrative","isComputational","probablyHasDensityMap","Stats","conformationCount","residueCount","chainCount","unitCount","firstElementLoc","firstConformationLoc","firstResidueLoc","firstChainLoc","firstUnitLoc","firstStructureLoc","addCountHelper","inc","handleElement","stats","lociResidueAltIdCounts","residueAltIdCounts","MultiChain","_l","handleUnitChainsSimple","isSpheres","isGaussians","handleUnitChainsPartitioned","lociElements","chainCounts","elIndex","firstCI","ofLoci","hasPartitions","_wrongUnitKind","atomicProperty","coarseProperty","isCoarse","entityIndex","SymmetryOperator","_zeroRadius","_hkl","getSymmetryOperatorName","getSuffix","instanceId","isRotationAndTranslation","RotationTranslationEpsilon","invert","fmt","Default","getAssemblyOperatorName","operatorIds","_m","checkIfRotationAndTranslation","rot","setIdentity","setValue","setTranslation","ofRotationAndOffset","_q1","_q2","_q3","_axis","lerpFromIdentity","_t","getRotation","slerp","angle","getAxisAngle","fromRotation","tar","compose","first","second","_ArrayMapping","_x","_y","_z","invariantPosition","xx","yy","zz","tx","ty","tz","_ArrayMappingW1","_ArrayMappingIdentity","createMapping","coords","Mat3","fromMat4","mat","fromColumns","left","middle","right","_m4","fromEuler","euler","rad","axis","a00","a01","a02","a10","a11","a12","a20","a21","a22","_id","eps","transpose","b01","b11","b21","det","determinant","trace","sub","mulScalar","symmtricFromUpper","symmtricFromLower","b00","b02","b10","b12","b20","b22","subScalar","addScalar","piThird","PI","tmpB","symmetricEigenvalues","p1","p2","Identity","phi","acos","tmpR0","tmpR1","tmpR2","tmpR0xR1","tmpR0xR2","tmpR1xR2","eigenvector","cross","d0","d1","d2","dmax","imax","innerProduct","adjointFromMat4","ax","ay","az","bx","by","bz","cx","cy","cz","SetUtils","isSuperset","setA","setB","elem","sets","unionMany","unionManyArrays","arrays","intersection","difference","differenceSize","RuntimeContext","Progress","Synchronous","_format","root","prefix","progress","children","taskName","newPrefix","subTree","format","chunkedSubtask","initialChunk","globalProcessed","globalTime","isSynchronous","now","lastSize","currentTime","DefaultColorScaleProps","domain","reverse","listOrName","minLabel","maxLabel","ColorScale","createColorScaleByType","setDomain","_min","_max","every","sorted","off","maxId","o1","o2","t1","interpolate","valueToColorWithOffsets","valueToDiscreteColorWithOffsets","tf","c1","c2","valueToColor","intervalSize","valueToDiscreteColor","colorToArray","normalizedColorToArray","toArrayNormalized","createDiscrete","MmcifFormat","CCDFormat","trajectoryFromMmCIF","fromFrame","trajectoryFromCCD","ideal","createCcdModel","coordinateType","cartn_x","cartn_y","cartn_z","createCcdModels","chem_comp","chem_comp_atom","chem_comp_bond","atom_id","charge","pdbx_ordinal","filteredRows","filteredRowCount","A","entity_id","float","model_num","filteredAtomId","filteredCompId","filteredX","filteredY","filteredZ","filteredId","filteredTypeSymbol","filteredCharge","model_atom_site","ofPartialColumns","atom_site","auth_atom_id","auth_comp_id","Cartn_x","Cartn_y","Cartn_z","label_entity_id","pdbx_PDB_model_num","pdbx_formal_charge","entityBuilder","setNames","getEntityId","componentBuilder","basicModel","getEntityTable","getChemCompTable","getEntriesFromChemCompBond","CoordinateType","formatRegistry","fromStruct","atom_site_anisotrop","ofColumns","elementToAnsiotrop","getElementToAnsiotrop","U","struct_conn","getEntriesFromStructConn","getAtomIndexFromEntries","molstar_bond_site","idToIndex","atom_id_1","atom_id_2","value_order","type_id","Aromatic","Disulfide","HydrogenBond","ofArray","Infinity","fromMmCif","hasData","mmCIF","_name","CoordinateTypeProp","CCD","getArrayBounds","createArray","fillArrayValues","_e","createAndFillArray","isTypedArray","byteLength","BYTES_PER_ELEMENT","typedArrayWindow","Column","constColumn","__array","areValuesEqual","rowA","rowB","lambdaColumn","arrayColumn","T","valueType","isTyped","windowColumn","column","vk","windowTyped","ave","windowFull","Undefined","columnView","checkIdentity","arrayView","viewFull","spec","Tensor","space","baseType","ustr","lstr","coord","Float","dim","Matrix","rows","cols","ColumnMajorMatrix","Aliased","List","separator","itemParse","ValueKind","ofFloatArray","ofStringAliasArray","ofStringListArray","ofIntTokens","ofFloatTokens","ofStringTokens","checkIndentity","createFirstIndexMap","createFirstIndexMapOfColumn","createIndexer","createIndexerOfColumn","mapToArray","mapToArrayImpl","areArraysEqual","va","vb","areColumnsEqual","columnIndicesOf","asArrayColumn","copyToArray","cArray","Table","Database","columns","_columns","_schema","getRow","pickColumns","guard","partialColumns","ofUndefinedColumns","ofRows","ofArrays","pick","_view","concat","tables","columnToArray","cmp","pickRow","getRows","toArrays","formatToString","headerLength","write","newline","getString","ofTables","tableNames","_tableNames","getTablesAsRows","database","StructureResult","StructureLookup3DResultContext","closeUnitsResult","unitGroupResult","distSq","StructureLookup3D","unitLookup","_find","findContext","groupResult","nearest","_nearest","heap","elementsCount","uid","totalCount","maxDistResult","MAX_VALUE","unitSqDist","insert","node","findMinimum","extractMinimum","findIntoBuilder","beginUnit","addElement","commitUnit","findIntoBuilderIf","findIntoBuilderWithRadius","pivotR","eRadius","queryRadius","rr","approxNearest","_approxNearest","minDistSq","zs","Vec2","fromObj","toObj","div","squaredMagnitude","setMagnitude","arrayMax","arrayMin","arrayMinMax","arraySum","stride","sum","arrayMean","arrayRms","sumSq","di","fillSerial","arrayRemoveInPlace","found","arrayRemoveAtInPlace","arraySetAdd","arraySetRemove","arrayIntersectionSize","includes","arrayEqual","lenX","arrayIsIdentity","arrayMapUpsert","StructureSubsetBuilder","addToUnit","parentId","ids","currentUnit","addElementRange","setUnit","_getStructure","deduplicateElements","newUnits","symmGroups","isSorted","child","applyOperator","getStructureDeduplicate","setSingletonLocation","Mutable","P","CombinationIterator","smallest","ripple","nextIndex","maxIndex","combinations","combinationIt","EmptyArray","EmptyCarbohydrates","links","terminalLinks","partialElements","getLinkIndices","getTerminalLinkIndices","SugarRingFps","elementFingerprint","getAnomericCarbon","ringAtoms","indexHasTwoOxygen","indexHasOxygenAndCarbon","indexHasC1Name","indexIsCarbon","neighbor","ei","linkedOxygenCount","linkedCarbonCount","ej","typeSymbol","getDirection","direction","getAtomId","filterFusedRings","unitRings","rings","fusedRings","ringCombinations","rc","r0","r1","getAltId","filteredRings","getSaccharideComp","buildLookups","getIndices","elementsMap","ringIndex","ring","linksMap","carbohydrateIndexA","terminalLinksMap","fromCarbohydrate","carbohydrateIndex","elementUnit","elementIndex","tmpSphere","boundaryHelperCoarse","boundaryHelperFine","computeStructureBoundary","invariantBoundary","includeSphere","radiusSphere","subsetBuilder","bondCount","hasCustomProperties","customProps","customPropertyDescriptors","currentPropertyData","propertyData","inheritedPropertyData","polymerElements","getPolymerResidueCount","polymerGapCount","gapElements","getPolymerGapCount","polymerUnitCount","getPolymerUnitCount","uniqueElementCount","getUniqueElementCount","atomicResidueCount","prevIdx","getAtomicResidueCount","computeHash","transformHash","elementLocations","ElementLocationIterator","interBondsValidUnit","interBondsValidUnitPair","unitSymmetryGroupsIndexMap","getUnitSymmetryGroupsIndexMap","carbohydrates","reduce","elementsWithRingMap","ringElementKey","unitId","addRingElement","fixLinkDirection","iA","iB","geometry","tmpV","fixTerminalLinkDirection","geo","chainIt","residueIt","sugarResidueMap","setSegment","saccharideComp","byFingerprintAndResidue","sugarRings","ringElements","anomericCarbon","ma","calculateMomentsAxes","calculateNormalizedAxes","normal","orthogonalize","ringAltId","areVertexSetsConnected","re0","re1","carbohydrateIndexB","getRingElementIndices","getResidueIndex","cA","cB","rA","rB","getConnectedUnits","pairBonds","connectedIndices","getEdges","isCovalent","ringElementIndicesA","ringElementIndicesB","lA","lB","ringElementIndexA","ringElementIndexB","computeCarbohydrates","getModels","uniqueResidueNames","microheterogeneityCompIds","getUniqueResidueNames","uniqueElementSymbols","getUniqueElementSymbols","entityIndices","coarse","chainsIt","chainSegment","getEntityIndices","uniqueAtomicResidueIndices","modelIds","uniqueResidues","getUniqueAtomicResidueIndices","hasAtomic","hasCoarse","serialMapping","unitIndexMap","cumulativeUnitElementCount","unitIndices","mj","getSerialIndex","getSerialMapping","intraUnitBondMapping","unitGroupOffset","unitIndex","unitEdgeIndex","unitGroupIndex","unitIdx","getIntraUnitBondMapping","masterModel","hasElement","getModelIndex","remapModel","asParent","_proxy","_child","_target","cmpUnits","lastId","ofModel","atomicChainOperatorMappinng","StructureBuilder","isMultiChain","isWater","isWaterChain","addUnit","cs","addCoarseUnits","toSubStructureElementLoci","Singletons","ofTrajectory","resolveInContext","chainGroupId","newUnit","old","instances","transforms","beginChainGroup","inChainGroup","endChainGroup","copyUnit","getCopy","singleElementUnits","dontCompose","areUnitIdsEqual","areEquivalent","conformationHash","conformationId","areUnitIdsAndIndicesEqual","areRootsEquivalent","areRootsEqual","maxIdx","distVec","unitElementMinDistance","dV","minD","minDistanceToPoint","point","distPivot","getPolymerSymmetryGroups","Size","elementDescription","imageCenter","bs","eachAtomicHierarchyElement","residuesIt","residueSegment","DefaultSizeThresholds","smallResidueCount","mediumResidueCount","largeResidueCount","highSymmetryUnitCount","fiberResidueCount","getSize","thresholds","residueCountFactor","polymerSymmetryGroups","hasHighSymmetry","Huge","Gigantic","isFiberLike","Small","Medium","Large","PrincipalAxesProp","principalAxes","StructureSequence","sequences","entitySeqs","assign","fromAtomicHierarchy","hierarchy","_cI","rStart","rEnd","_compId","entityId","fromCoarseHierarchy","fromCoarseElements","seq_id_end","eK","eStart","eEnd","fromHierarchy","IsNativeEndianLittle","flipByteOrder","ChunkSize","uint8ToString","String","fromCharCode","subarray","v3add","CentroidHelper","radiusSq","includeStep","radiusStep","radiusSphereStep","_d","getCount","helper","posA","posB","fromArrays","to","fromProvider","getter","ColorLists","ColorListOptions","ColorListOptionsScale","ColorListOptionsSet","getColorListFromName","createAssemblies","pdbx_struct_assembly","pdbx_struct_assembly_gen","pdbx_struct_oper_list","matrices","vector","toMat4","toVec3","getMatrices","assemblies","createAssembly","details","oper_expression","asym_id_list","assemblyId","operatorOffset","gen","operatorNames","expandOperators","parseOperatorList","getAssemblyOperators","operatorGroupsProvider","operatorList","ops","currentOp","expandOperators1","startIndex","canonicalOpName","oeRegex","exec","group","split","dashIndex","substr","ModelSymmetry","getNcsOperators","struct_ncs_oper","matrixSpace","vectorSpace","opers","toMat3","Descriptor","ZeroP1","length_a","length_b","length_c","alpha","angle_alpha","beta","angle_beta","gamma","angle_gamma","nameOrNumber","groupNumber","groupName","getSpacegroupNameOrNumber","spaceCell","getSpacegroup","isNonStandardCrystalFrame","atom_sites","hasOwnProperty","prototype","assignIfUndefined","full","shallowMerge2","changed","shallowEqual","shallowMergeArray","rest","deepClone","objectForEach","EPSILON","equalEps","IntClassifier","FloatClassifier","classifyIntArray","classify","classifyFloatArray","packSize","incSize","limit8","limit16","pack8","pack16","incSizeSigned","packingSize","deltaSize","rleSize","deltaRleSize","prevValue","signed","getInfo","sizes","byteArray","multiplier","getMultiplier","intArray","fp","StringBuilder","PaddingSpaces","chunkCapacity","capacity","chunks","splice","getChunks","__paddingSpaces","whitespace","writeSafe","val","Count","whitespace1","writePadLeft","totalWidth","writePadRight","padding","writeInteger","writeIntegerAndSpace","writeIntegerPadLeft","writeIntegerPadRight","writeFloat","precisionMultiplier","writeFloatPadLeft","writeFloatPadRight","ChunkedArray","allocateNext","nextSize","growBy","elementSize","currentSize","currentIndex","currentChunk","allocatedSize","_compact","doNotResizeSingleton","chunk","lastChunk","creator","add4","add3","add2","addRepeat","addMany","compact","initialChunkOrCount","sortAsc","makeBuckets","getKey","sortBuckets","buckets","bucketList","prevKey","isBucketed","bucket","bucketOffsets","reorderedIndices","_makeBuckets","EquivalenceClassesImpl","createGroup","getHash","byHash","EquivalenceClasses","hash1","hash2","hash3","hash4","hashString","cantorPairing","sortedCantorPairing","invertCantorPairing","hashFnv32a","hval","hashTarget","numberBytes","numberView","DataView","obj","Fnv256Base","hashValue","padHexNumber","hashFnv256aToHex","depth","addByte","addString","addNumber","addArray","addObject","byte","multiplyBy256BitPrime","setFloat64","MultTmp1","MultTmp2","carry","product","_8digit_padding","base","hashMurmur128o","seed","murmurHash3_128","stringify","h1","h2","h3","h4","remainder","k1","k2","k3","k4","imul","padStart","arrayFind","iterableToArray","it","createRangeArray","arrayPickIndices","IntraBondOrderTable","getIntraBondOrderFromTable","atomId1","atomId2","InterBondOrderTable","getInterBondOrderFromTable","compId1","compId2","Topology","IntAdjacencyGraph","areVertexSetsConnectedImpl","graph","frontier","visited","newFrontier","other","vertexCount","aa","ab","ao","ba","bb","bo","pa","pb","IntGraphImpl","getDirectedEdgeIndex","getVertexEdgeCount","oa","bucketFill","ob","curA","curB","addAllEdges","assignDirectedProperty","propA","valueA","propB","valueB","bucketSizes","DirectedEdgeBuilder","fromVertexPairs","graphBuilder","UniqueEdgeBuilder","addEdge","included","getEdgeBuiler","induceByVertices","vertexIndices","vertexMap","newEdgeCount","newOffsets","edgeIndices","newA","newB","eo","vo","newEdgeProps","connectedComponents","vCount","componentCount","componentIndex","currentComponent","stack","remove","cIdx","_eI","verticesA","verticesB","GlobalModelTransformInfo","CategoryName","cifExport","categories","instance","firstModel","Category","molstar_global_model_transform_info","ofTable","attach","cat","writeMmCif","encoder","writeCategory","readUshort","buff","writeUshort","readUint","writeUint","pad","readUTF8","ns","decodeURIComponent","readASCII","sizeUTF8","strl","ci","CrcTable","tab","crc","buf","_crc","hasCompressionStreamSupport","deflate","gzip","checkCompressionStreamSupport","CompressionStream","u16","u32","next_code","bl_count","ordr","of0","exb","ldef","df0","dxb","ddef","flmap","fltree","fdmap","fdtree","lmap","ltree","ttree","dmap","dtree","imap","itree","rev15","lhst","dhst","ihst","lits","strt","codes2map","tree","MAX_BITS","max_code","r15","lit","cl","i0","i1","makeCodes","bits","revCodes","imb","inflateBlocks","noBuf","BFINAL","pos","iBlock","ML","MD","_bitsF","BTYPE","p8","_check","HLIT","_bitsE","HDIST","HCLEN","tl","_decodeTiny","mx0","_copyOut","mx1","_get17","ebs","dcode","dlit","dbs","dst","_inflate","ds","DecompressionStream","decompressedStream","Blob","stream","pipeThrough","getReader","readChunk","InflateContext","bl","nbuf","LL","ll","mx","dt","pushV","tgt","sv","_hufTree","hst","MAXL","hl","l2","i2","maxl","setDepth","dps","dbt","bCost","od","log","restrictDepth","deflateChunk","dlen","opt","cvrd","lc","ebits","nc","_hash","ii","_writeBlock","mch","_bestMatch","lgi","_goodIndex","dgi","Opts","opos","lvl","writeChunk","DeflateContext","_putsE","_copyExact","nice","pi","dif","td","dlim","_howLong","maxd","curd","oi","o0","l0","MH","numl","numd","numh","lset","dset","_lenCodes","getTrees","cstSize","fxdSize","contSize","dynSize","_putsF","_codeTiny","si","qb","_writeLit","qc","rst","rsl","nxt","nnxt","prv","lz","zc","ch","unzip","onlyNames","eocd","cnu","coffs","nl","el","roff","_readLocal","cmpr","csize","usize","nlen","elen","inflateRaw","ungzip","flg","crc32","isize","blocks","inflated","deflateRaw","opts","noCmpr","tot","zpd","cpr","_noNeed","crcValue","fof","_writeHeader","ioff","zip","ext","writeUTF8","Node","degree","isMarked","tmpIt","_index","_items","_len","FibonacciHeap","_minNode","_nodeCount","_compare","_defaultCompare","decreaseKey","newKey","_cut","_cascadingCut","extractedMin","nextInRootList","_removeNodeFromList","_mergeLists","_consolidate","_getNodeListSize","minNode","newMinNode","aux","auxCurrent","temp","_linkHeaps","clamp","lerp","stop","spline","p0","p3","tension","v0","v1","t2","quadraticBezier","smoothstep","Ray3D","targetTo","ray","transformDirection","tmpIR","_intersectSphere3D","oc","discriminant","_intersectBox3D","invDirX","invDirY","invDirZ","tmin","tmax","tymin","tymax","tzmin","tzmax","intersectSphere3D","scaleAndAdd","isIntersectingSphere3D","isInsideSphere3D","intersectBox3D","isIntersectingBox3D","ProteinAtomIdsList","RnaAtomIdsList","DnaAtomIdsList","NonPolymerNames","StandardComponents","CharmmIonComponents","ComponentBuilder","comps","types","mon_nstd_flags","getAtomIds","atomIds","prevSeqId","hasAtomIds","atomIdsList","namesMap","mon_nstd_flag","Types","unaryOp","binOp","nonEmpty","binRel","AnyVar","Variable","AnyValueVar","ConstrainedVar","Regex","Container","Fn","alias","Flags","BitFlags","Num","bool","AnyValue","Bool","bitflags","compositeKey","not","if","Union","assoc","neq","lt","lte","gr","gre","math","mult","mod","roundInt","trunc","sign","cbrt","tan","asin","atan","sinh","cosh","tanh","exp","equal","hasAny","hasAll","fillGridDim","TransformData","OperatorData","GroupData","SpacegroupNameToIndexMap","getSpacegroupNumberFromIndex","SpacegroupName","SpacegroupNumber","numbers","SpacegroupCell","Spacegroup","getSpacegroupIndexFromNumber","getSpacegroupIndex","xScale","yScale","zScale","z1","z2","z3","fromFractional","r2","r3","getOperatorMatrix","_ijkVec","_tempMat","setOperatorMatrix","fromTranslation","_translationRef","_translationRefSymop","_translationRefOffset","_translationSymop","charAt","s0","s1","getShift","formatElement","rotation","getTranslation","_k","getOperatorXyz","Sphere3D","hasExtrema","extrema","setExtrema","computeBounding","dx","dy","dz","getMaxScaleOnAxis","translate","scaleNX","fromBox3D","fromAxes3D","tmpCenter","fromDimensionsAndTransform","dimensions","cpA","cpB","cpC","cpD","cpE","cpF","cpG","cpH","tmpAddVec3","addVec3","expandBySphere","tmpDir","expand","_b","sA","sB","sC","ar","br","overlaps","distanceToVec","memoizeLatest","lastArgs","memoize1","TokenColumnProvider","TokenColumn","areValuesEqualProvider","aS","bS","areTokensEmpty","MolstarBondSiteSchema","DSSPType","BridgeType","Bridge","partner1","partner2","Q","calcHbondEnergy","oPos","cPos","nPos","hPos","distOH","distCH","distCN","distON","calcUnitBackboneHbonds","proteinInfo","residueIndices","cIndices","hIndices","nIndices","oIndices","oAtomResidues","nAtomResidues","energies","caPos","cPosPrev","oPosPrev","oPI","oRI","oAtom","cAtom","caAtom","findAtomOnResidue","nPI","nAtom","hAtom","nPIprev","oAtomPrev","cAtomPrev","_energies","buildHbondGraph","shouldExtendLadder","ladder","bridge","firstEnd","PARALLEL","secondEnd","secondStart","resemblesBulge","ladder1","ladder2","firstStart","nextLadder","bulgeCriterion2","isHelixType","G","H","DSSPComputationParams","oldDefinition","oldOrdering","DefaultDSSPComputationProps","computeUnitDSSP","proteinElements","unitProteinResidues","getUnitProteinInfo","calcUnitProteinTraceLookup3D","hbonds","torsionAngles","setNaN","caPosPrev","nPosPrev","cPosNext","caPosNext","nPosNext","psi","dihedralAngle","calculateUnitDihedralAngles","getResidueFlag","getOriginalResidueFlag","getUpdatedResidueFlag","getFlagName","getOriginalFlagName","getUpdatedFlagName","ladders","bridges","turnFlag","T3S","T4S","T5S","T4","T5","assignTurns","helixFlag","helixCheckOrder","fI","fI1","fI2","assignHelices","caPosPrev2","caPosNext2","caMinus2","caPlus2","f1","oRIprev2","oRInext2","caAtomPrev2","caAtomNext2","assignBends","kl","B","ANTI_PARALLEL","assignBridges","bridgeIndex","ladderIndex","previousLadder","ladderIndex1","ladderIndex2","assignLadders","lcount","l2count","E","conladder","assignSheets","assignment","getDSSPAssignment","mapToKind","SecondaryStructureDssp","HelixDistances","SheetDistances","zhangSkolnickAtomicSS","distances","aA","aB","computeUnitZhangSkolnik","Helix","Beta","getFlag","getSecondaryStructureParams","_data","SecondaryStructureParams","SecondaryStructureProvider","createProvider","descriptor","defaultParams","getParams","obtain","computeAuto","computeDssp","computeModel","computeZhangSkolnik","secondaryStructure","CustomStructureProperty","descriptorName","propertyDataName","addRef","reference","rootProps","assets","toCheck","Expression","isApply","Symbol","Apply","isArgumentsMap","Mask","_ascSort","EmptyMask","SingletonMask","BitMask","mask","_forEach","AllMask","SetMask","flatten","_flat","ofSet","ofMask","always","never","singleton","ofUniqueIndices","complement","against","noop","arr1","arr2","deepEqual","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","shallowEqualArrays","shallowEqualObjects","defaults","padTime","formatTime","getHours","getMinutes","getSeconds","v3dot","v3copy","v3scaleAndSub","scaleAndSub","v3scaleAndAdd","BoundaryHelper","computeExtrema","dir","minDist","maxDist","computeSphereExtrema","includePosition","dirLength","centroidHelper","radiusPosition","quality","Type001","Type111","Type011","Type012","Type112","Type122","getEposDir","LipidNames","IonNames","_esCache","letters","ElementSymbol","_elementByAtomicNumber","getElementFromAtomicNumber","EntityType","MoleculeType","PolymerType","PolymerTypeAtomRoleId","directionFrom","directionTo","backboneStart","backboneEnd","coarseBackbone","GammaProtein","BetaProtein","PNA","ProteinBackboneAtoms","NucleicBackboneAtoms","DProteinComponentTypeNames","LProteinComponentTypeNames","GammaProteinComponentTypeNames","BetaProteinComponentTypeNames","ProteinTerminusComponentTypeNames","OtherProteinComponentTypeNames","ProteinComponentTypeNames","DNAComponentTypeNames","RNAComponentTypeNames","SaccharideComponentTypeNames","OtherComponentTypeNames","IonComponentTypeNames","LipidComponentTypeNames","WaterNames","AminoAcidNamesL","AminoAcidNamesD","AminoAcidNames","CommonProteinCaps","RnaBaseNames","DnaBaseNames","PeptideBaseNames","PurineBaseNames","PyrimidineBaseNames","BaseNames","isPurineBase","isPyrimidineBase","PolymerNames","getMoleculeType","compType","Saccharide","Lipid","Other","getPolymerType","molType","getComponentType","getDefaultChemicalComponent","formula","formula_weight","pdbx_synonyms","getEntityType","getEntitySubtype","isPolymer","isNucleic","isProtein","SecondaryStructureType","SecondaryStructureMmcif","helx_lh_27_p","LeftHanded","Helix27","helx_lh_3t_p","Helix3Ten","helx_lh_al_p","HelixAlpha","helx_lh_a_n","DoubleHelix","DoubleHelixA","helx_lh_b_n","DoubleHelixB","helx_lh_ga_p","HelixGamma","helx_lh_n","helx_lh_om_p","HelixOmega","helx_lh_ot_n","DoubleHelixOther","helx_lh_ot_p","HelixOther","helx_lh_p","helx_lh_pi_p","HelixPi","helx_lh_pp_p","HelixPolyproline","helx_lh_z_n","DoubleHelixZ","helx_n","helx_ot_n","helx_ot_p","helx_p","helx_rh_27_p","RightHanded","helx_rh_3t_p","helx_rh_al_p","helx_rh_a_n","helx_rh_b_n","helx_rh_ga_p","helx_rh_n","helx_rh_om_p","helx_rh_ot_n","helx_rh_ot_p","helx_rh_p","helx_rh_pi_p","helx_rh_pp_p","helx_rh_z_n","strn","BetaStrand","turn_ot_p","Turn","TurnOther","turn_p","turn_ty1p_p","InverseTurn","Turn1","turn_ty1_p","ClassicTurn","turn_ty2p_p","Turn2","turn_ty2_p","turn_ty3p_p","Turn3","turn_ty3_p","bend","Bend","SecondaryStructurePdb","SecondaryStructureStride","BetaSheet","C","BondType","fromName","isAll","Names","isName","fromNames","ResidueHydrophobicity","Coordinates","Time","deltaTime","timeOffset","hasCell","hasVelocities","velocities","hasForces","forces","ordering","xyzOrdering","frozen","getOrderedCoords","getSourceOrderedCoords","getInvertedCoords","reorderCoordsInPlace","xyzDefined","_reorderBuffer","HashSetImpl","HashSet","LinkedList","LinkedListImpl","createListNode","previous","inList","addFirst","addLast","removeFirst","removeLast","UniqueArray","Asset","isUrl","isFile","Wrapper","manager","dispose","release","getUrl","tryFindUrl","AssetManager","_assets","tryFindFilename","refCount","tag","isStatic","store","entry","runInContext","clearTag","structureUnion","structures","fullUnits","merged","buildUnion","structureAreEqual","aU","bU","structureAreIntersecting","structureIntersect","structureSubtract","FormatRegistry","applicable","FormatPropertyProvider","asDynamic","DefaultBondComputationProps","__ElementIndex","__ElementBondThresholds","__ElementPairThresholds","__DefaultBondingRadius","MetalsSet","metals","getElementIdx","getElementThreshold","getPairingThreshold","elementIndexA","elementIndexB","thresholdB","thresholdAB","getElementPairThreshold","H_ID","isHydrogen","defaultBondTest","atomicBond","atomicSequence","inputStructure","water","atomicHet","bundleElementImpl","bundleGenerator","timingEnabled","performance","mark","measure","UserTiming","ExecuteObservable","observer","updateRateMs","ProgressInfo","execute","ObservableRuntimeContext","CreateObservableCtx","ExecuteInContext","ExecuteObservableChild","runChild","defaultProgress","taskId","startedTime","abortToken","abortRequested","treeAborted","reason","lastNotified","tryAbort","token","cloneTree","markEnd","isAbort","isAborted","onChildrenFinished","onAbort","abortTree","notifyObserver","Aborted","time","snapshot","requestAbort","snapshotProgress","startMarkName","endMarkName","checkAborted","lastUpdatedTime","updateProgress","dontNotify","isExecuting","FieldPath","toDatabaseCollection","aliases","dbc","header","toDatabase","createTable","createDatabase","toTable","CategoryTable","getColumnCtor","createStringColumn","field","toStringArray","createColumn","toIntArray","toFloatArray","createListColumn","getField","createTensorColumn","zeroOffset","fieldNames","namingVariant","getName","rank","areEqualExact","canonical","path","replace","pathA","pathB","asCanonical","_isDefined","fieldKeys","defineProperty","fType","enumerable","configurable","flatFrame","canonicalPath","aliased","canonicalAliased","flattenFrame","CustomPropertyDescriptor","getUUID","__key","CustomProperties","_list","_set","_refs","refs","hasReference","prevAssets","Box3D","addVec3Array","setEmpty","fromSphere3D","addSphere3D","addBox3D","intersectsSphere3D","expandUniformly","tmpTransformV","containsVec3","containsSphere3D","SecondaryStructure","getIndex","SIFTSMapping","isAvailable","pdbx_sifts_xref_db_name","pdbx_sifts_xref_db_acc","db_acc","pdbx_sifts_xref_db_num","db_num","pdbx_sifts_xref_db_res","db_res","fromCif","dbName","accession","Segmentation","ofOffsets","getSegment","projectValue","SegmentIterator","updateValue","segmentMin","segmentMax","updateSegmentRange","segmentEnd","setEnd","sMin","sMax","segmentMap","inputRange","segs","ArrayIteratorImpl","lastValue","RangeIteratorImpl","ValueIterator","MapIteratorImpl","FilterIteratorImpl","findNext","Iterator","Range","Arguments","Argument","isRest","MSymbol","namespace","CustomPropSymbol","Field","Encoder","columnValue","columnListValue","columnTensorValue","columnValueKind","getTensorDefinitions","fieldDefinitions","Type","cifFieldsFromTableSchema","defaultFormat","typedArray","shouldInclude","digitCount","many","build","filterOf","directives","cat_whitelist","cat_blacklist","field_whitelist","field_blacklist","blacklist","wlcatcol","includeCategory","includeField","DefaultFilter","DefaultFormatter","getFormat","writeDatabase","startDataBlock","writeDatabaseCollection","collection","getFieldDigitCount","getIncludedFields","getCategoryInstanceData","TextEncoder","encoded","dataBlockCreated","formatter","binaryEncodingProvider","setFilter","isCategoryIncluded","setFormatter","context","ignoreFilter","width","precisions","getFloatPrecisions","_f","writeValue","writeCifSingleRecord","fieldSource","fieldCount","writeLine","_c","writeCifLoop","encode","writeTo","writeString","floatPrecision","writeNotPresent","writeUnknown","writeMultiline","escape","escapeKind","hasSingleQuote","hasDoubleQuote","writeChecked","categoryName","encodeMsgPack","encodedSize","encodeInternal","utf8","setUint8","setUint16","setUint32","setInt8","setInt16","setInt32","CifWriter","BinaryEncoder","dataBlocks","encodeField","autoClassify","encodedData","writer","writeBinary","encodingProvider","encoderProvider","allPresent","arrayCtor","isStr","getFieldData","getArrayCtor","provider","tryGetEncoder","maskData","maskRLE","Encoding","createEncoder","binary","encoderName","binaryEncodingPovider","binaryAutoClassifyEncoding","resolveEncoding","hint","Encodings","deltaRLE","fixedPoint2","fixedPoint3","categoryInstance","createEncodingProviderFromCifFrame","ff","binaryEncoding","fromEncoding","createEncodingProviderFromJsonConfig","hints","columnName","getResidueId","ins_code","updateMapMapIndex","key0","key1","submap","missingEntity","_tempResidueKey","EmptyResidueKey","chain_index_entity_index","findEntity","findChainLabel","entity_index_label_asym_id","cm","findChainAuth","auth_asym_id_auth_seq_id","rm","findResidue","label_entity_id_or_key","pdbx_PDB_ins_code","arguments","chain_index_auth_seq_id","findResidueLabel","chain_index_label_seq_id","findResidueAuth","findResidueInsertion","chainStartResidueIndex","chainEndResidueIndexExcl","findAtom","findAtomByName","findAtomByNameAndAltLoc","findAtomAuth","findAtomsOnResidue","label_atom_ids","atomNames","findAtomByNames","findElementOnResidue","findAtomByElement","getEntityIndex","nameData","altLocData","altLoc","getAtomicIndex","authAsymId","labelAsymId","authSeqId","insCode","createHierarchyData","chainOffsets","residueSourceIndex","nResidues","iRes","fromAtom","toAtom","firstSrcIdx","iAtom","srcIdx","sortedResidues","ia","ib","getResidueSourceIndex","getAtomicHierarchy","hierarchyOffsets","newChain","findHierarchyOffsets","hierarchyData","chainOperatorMapping","mapping","labelMap","authMap","mappedLabel","mappedAuth","createChainOperatorMappingAndSubstituteNames","sameAsPrevious","hierarchySegments","atomicNumber","directionFromElementIndex","moleculeTypeMap","polymerTypeMap","chemCompMap","polyType","traceAtomId","traceIndex","coarseAtomId","directionFromAtomId","directionToAtomId","getAtomicDerivedData","getAtomicHierarchyAndConformation","getConformation","getCoarseIndex","EmptyCoarseIndex","findElement","findSphereElement","findGaussianElement","sphereMapping","_sphereMapping","buildMapping","gaussianMapping","_gaussianMapping","gaussian","asym_id","asymId","EmptyCoarseElements","chainKey","findSequenceKey","findChainKey","polymerRanges","ofSortedRanges","gapRanges","CoarseHierarchy","getElementKey","counter","getElementSubstructureKeyMap","getCoarseKeys","seqMaps","chainMaps","chainCounter","chainToEntity","seqRanges","seqStart","seqEnd","seqMap","getEntKey","eKey","cKey","sm","firstIntersectionIndex","createLookUp","getCoarseRanges","prevSeqEnd","EmptyCoarse","getCoarse","ihm_sphere_obj_site","ihm_gaussian_obj_site","sphereData","sphereConformation","object_radius","rmsf","getSphereConformation","sphereKeys","sphereRanges","gaussianData","gaussianConformation","matrix_space","covariance_matrix","mean_Cartn_x","mean_Cartn_y","mean_Cartn_z","weight","getGaussianConformation","gaussianKeys","gaussianRanges","getSegments","getSequence","entity_poly_seq","mon_id","sortAtomSite","entityBuckets","chainBuckets","areBackboneConnected","riStart","riEnd","ptStart","ptEnd","eiStart","eiEnd","pStart","pEnd","getAtomicRanges","cyclicPolymerMap","prevStart","prevEnd","getMissingResidues","pdbx_unobs_or_zero_occ_residues","PDB_model_num","polymer_flag","occupancy_flag","getChemicalComponentMap","getUniqueComponentNames","getSaccharideComponentMap","pdbx_chem_comp_identifier","identifier","snfgName","_type","uniqueNames","getStructAsymMap","atomic","struct_asym","EntitySubtype","getEntityData","entityData","entityIds","sphere_entity_id","gaussian_entity_id","subtypes","fill","assignSubtype","entity_poly","pdbx_entity_branch","chemCompType","getEntitiesWithPRD","pdbx_molecule","prd_id","prdIds","prdIdColumn","createModels","missingResidues","getCommonProperties","ihm_model_list","atom_sites_modelColumn","ihm_model_id","splitTable","sphere_sites","model_id","gauss_sites","model_name","atom_site_sourceIndex","createIntegrativeModel","model_group_name","readIntegrative","modelStart","modelEnd","findModelEnd","createStandardModel","readStandard","atomicRanges","ihm","endIndex","col","CifTokenType","isTripleQuoteAtPosition","isNamespace","nsLen","tokenLen","getNamespaceEnd","getNamespace","moveNextInternal","tokenType","End","isEscaped","skipCommentLine","Comment","eatTripleQuote","esc","eatEscaped","eatMultiline","isImportGet","eatImportGet","inSaveFrame","ColumnName","isData","isSave","isLoop","Loop","Save","Data","moveNext","FrameContext","categoryNames","categoryData","CifCategories","CifBlock","saveFrames","CifSaveFrame","addFields","handleSingle","nsStart","nsEnd","readingNames","fieldName","errorLine","errorMessage","ofTokens","readLoopChunk","tokenCount","updateLoopChunk","handleLoop","loopLine","isFlatNamespace","rowCountEstimate","runtimeCtx","parseInternal","createTokenizer","blockHeader","blockCtx","saveCtx","saveFrame","saveHeader","parseCifText","isNumeric","parseCifBinary","minVersion","unpacked","checkVersions","block","cats","CCD_Schema","mon_nstd_parent_comp_id","one_letter_code","three_letter_code","pdbx_type","pdbx_ambiguous_flag","pdbx_replaced_by","pdbx_replaces","pdbx_model_coordinates_details","pdbx_model_coordinates_db_code","pdbx_ideal_coordinates_details","pdbx_ideal_coordinates_missing_flag","pdbx_model_coordinates_missing_flag","pdbx_initial_date","pdbx_modified_date","pdbx_release_status","pdbx_processing_site","alt_atom_id","model_Cartn_x","model_Cartn_y","model_Cartn_z","pdbx_align","pdbx_model_Cartn_x_ideal","pdbx_model_Cartn_y_ideal","pdbx_model_Cartn_z_ideal","pdbx_stereo_config","pdbx_aromatic_flag","pdbx_leaving_atom_flag","pdbx_chem_comp_descriptor","program","program_version","BIRD_Schema","pdbx_reference_molecule","type_evidence_code","class","class_evidence_code","represent_as","chem_comp_id","compound_details","representative_PDB_id_code","release_status","replaces","replaced_by","pdbx_reference_entity_list","ref_entity_id","component_id","pdbx_reference_entity_nonpoly","pdbx_reference_entity_link","link_id","ref_entity_id_1","ref_entity_id_2","entity_seq_num_1","entity_seq_num_2","comp_id_1","comp_id_2","component_1","component_2","link_class","pdbx_reference_entity_poly_link","pdbx_reference_entity_poly","db_code","pdbx_reference_entity_poly_seq","parent_mon_id","observed","hetero","pdbx_reference_entity_sequence","NRP_flag","one_letter_codes","pdbx_reference_entity_src_nat","ordinal","organism_scientific","taxid","pdbx_prd_audit","date","processing_site","action_type","datablock","dictionary","datablock_id","dictionary_history","revision","sub_category","category_group_list","parent_id","item_type_list","primitive_code","construct","detail","item_units_list","item_units_conversion","from_code","to_code","DensityServer_Data_Schema","volume_data_3d_info","volume_data_3d","CifCore_Schema","formula_units_z","chemical","melting_point","name_common","name_systematic","chemical_formula","moiety","space_group","crystal_system","it_number","space_group_symop","operation_xyz","geom_bond","atom_site_label_1","atom_site_label_2","publ_flag","site_symmetry_1","site_symmetry_2","valence","audit","block_doi","database_code","cod","csd","depnum_ccdc_archive","depnum_ccdc_fiz","icsd","mdf","nbs","adp_type","calc_flag","disorder_assembly","disorder_group","fract_x","fract_y","fract_z","refinement_flags","site_symmetry_multiplicity","u_iso_or_equiv","atom_site_aniso","u_11","u_12","u_13","u_22","u_23","u_33","atom_type","atom_type_scat","dispersion_imag","dispersion_real","CifCore_Aliases","Segmentation_Data_Schema","segmentation_data_table","set_id","segment_id","segmentation_data_3d","CIF","parseText","parseBinary","BIRD","dic","cifCore","densityServer","segmentation","ComponentBond","comp_names","chemCompBondFromTable","addEntry","Entry","nameA","nameB","aromatic","ord","swap","notAtomic","notCoarse","vdw_radius","_emptyList","StructureProperties","constant","true","false","group_PDB","isNonStandard","hasMicroheterogeneity","secondary_structure_type","secStruc","secondary_structure_key","chem_comp_type","src_method","pdbx_description","pdbx_number_of_molecules","pdbx_mutation","pdbx_fragment","pdbx_ec","pdbx_parent_entity_id","multiChain","object_primitive","objectPrimitive","instance_id","operator_key","model_index","model_label","model_entry_id","pdbx_struct_assembly_id","pdbx_struct_oper_list_ids","struct_ncs_oper_id","sphere_radius","sphere_rmsf","gaussian_weight","gaussian_covariance_matrix","expressions","forEachItem","item","gte","propTests","chainTests","residueTests","hasSeqId","residue_index","beg_label_seq_id","end_label_seq_id","overlapsSeqIdRange","beg","beg_auth_seq_id","end_auth_seq_id","atomTests","atom_index","schemaItemToExpression","unionExpression","items","isItems","toBundle","fromLoci","CifField","CifFile","CifCategory","tensorFieldNameGetter","zeroIndexed","getTensor","ofFields","ofColumn","ofStrings","ofString","ofNumbers","ofUndefined","LinkedIndex","LinkedIndexImpl","IntMap","keyArray","asImmutable","addFrom","decodeMsgPack","dataView","bin","getInt8","getUint8","getUint16","getUint32","getFloat32","getFloat64","getInt16","getInt32","SortedRanges","startAt","endAt","minAt","maxAt","firstIntersectionIndexFrom","hasFrom","curIndex","OneOf","vals","isConstraint","oneOfValues","ElementSetIntraBondCache","EmptyUnitResonance","delocalizedTriplets","getThirdElement","getTripletIndices","triplets","getResonance","Unit","getDelocalizedTriplets","elementAromaticRingIndices","thirdElementMap","indicesMap","deloBonds","Kinds","getTransformHash","getUnitIndexMap","getAtomicRadiusFunc","getSphereRadiusFunc","AtomicProperties","createCoarse","CoarseProperties","areInvariantElementsEqual","symmetryGroups","sg","transientCache","_transientCache","propagateTransientCache","tryRemapBonds","isSameConformation","FastBoundary","resonance","polymerIt","polymerSegment","getAtomicPolymerElements","gapIt","gapSegment","indexStart","indexEnd","elementIndexStart","elementIndexEnd","getAtomicGapElements","nucleotideElements","getNucleotideElements","getProteinElements","Coarse","getCoarseConformation","modelCoarseConformation","getCoarseRadii","getCoarsePolymerElements","getCoarseGapElements","oldIndex","newIndex","coordsHistory","xa","ya","za","xb","yb","zb","getModelConformationOfKind","getModelHierarchyOfKind","areOperatorsEqual","areConformationsEqual","getHierarchy","EntityBuilder","descriptions","compoundsMap","heteroMap","chainMap","chainId","waterId","customName","setCompounds","compounds","UUID","_btoa","btoa","Buffer","chars","createv4","StructConn","hasAtom","conn_type_id","pdbx_dist_value","pdbx_value_order","ptnr1_label_asym_id","ptnr1_label_seq_id","ptnr1_auth_seq_id","ptnr1_label_atom_id","pdbx_ptnr1_label_alt_id","pdbx_ptnr1_PDB_ins_code","ptnr1_symmetry","ptnr2_label_asym_id","ptnr2_label_seq_id","ptnr2_auth_seq_id","ptnr2_label_atom_id","pdbx_ptnr2_label_alt_id","pdbx_ptnr2_PDB_ins_code","ptnr2_symmetry","_p","ps","resId","resInsCode","eId","orderType","ptnr1_label_comp_id","ptnr2_label_comp_id","TableLegend","ScaleLegend","getFastBoundary","arrayLess","arraySwap","medianPivotIndex","partition","parts","tail","insertionSort","quickSort","low","high","ri","partitionArrayAsc","insertionSortArrayAsc","quickSortArrayAsc","sortArray","sortArrayRange","GridLookup3D","cellSizeOrCount","GridLookup3DImpl","isCheck","stopIf","expandedBox","sX","sY","sZ","bucketOffset","bucketCounts","bucketArray","grid","px","py","pz","indicesCount","gX","gY","gZ","gridId","gCount","expandGrid","nextGCount","arrG","tmpArrG1","nextArrG","tmpArrG2","maxRange","expandRange","gridPointsFinished","expandedArrG","tmpArrG3","sqMaxRadius","tmpSetG","tmpHeapG","tmpRay","dX","dY","dZ","arrGLen","ig","bucketIdx","_maxRange","ki","bIdx","tmpSetG2","ix","xPos","iy","yPos","iz","zPos","xP","yP","zP","tmp","queryNearest","rSq","loX","loY","loZ","hiX","hiY","hiZ","miX","miY","miZ","cells","insideOut","approxQueryNearest","cellCount","cellSize","V","MaxVolume","inputData","boundingBox","bucketCount","bucketIndex","_build","inputRadius","flat","getModelGroupName","ihm_model_group","ihm_model_group_link","link","group_id","hasPresentValues","substUndefinedColumn","getNormalizedAtomSite","normalized","StructureQuery","QueryContext","pushCurrentElement","currentElementStack","popCurrentElement","pushCurrentBond","currentAtomicBondStack","QueryContextBondInfo","popCurrentBond","pushCurrentStructure","currentStructure","currentStructureStack","popCurrentStructure","pushInputStructure","inputStructureStack","popInputStructure","throwIfTimedOut","timeoutMs","timeCreated","tryGetCurrentSelection","currentSelection","testFn","setStructure","setTestFn","trySwap","eA","sel","UniqueStructuresBuilder","allSingletons","getSelection","LinearGroupingBuilder","builderMap","builders","singletonSelection","fullSelection","groupBy","_true","_zero","atomTest","residueTest","entityTest","unitTest","atomGroupsGrouped","chainLevel","residueLevel","atomGroupsSegmented","getRingStructure","fingerprints","onlyAromatic","LinearBuilder","uniqueFps","byFingerprint","aromaticRings","querySelection","inComplement","targetSel","withInputStructure","bondedAtomicPairs","bondTest","interBonds","UniqueBuilder","intraBondOffset","intraBondB","_lI","StructureUniqueSubsetBuilder","ResidueSet","hasLabelAsymId","_asym_id","_seq_id","_comp_id","alt_id","_alt_id","_ins_code","op_name","_op_name","checkOperator","getEntryFromLocation","getWholeResidues","sourceElements","wholeResidues","inner","isSingleton","getIncludeSurroundings","getIncludeSurroundingsWithRadius","elementRadius","elementRadiusClosure","sourceMaxRadius","createElementRadiusFn","findStructureRadius","eR","includeSurroundings","prms","surr","intersectBy","bySel","unionBy","exceptBy","subtractBy","expandProperty","propertyToStructureIndexMap","_sI","__sI","includeConnected","layerCount","incl","prevCount","includeConnectedStep","expanded","inputUnitA","bElement","bondedUnit","currentUnitB","inputUnitB","expandConnected","surroundingLigands","includeWater","_ent_type","testIsWater","surroundings","prd","getPrdAsymIdx","StructConnGraph","bondType","getStructConnInfo","includedPrdChains","componentResidues","entityType","addComponent","components","finalBuilder","vertices","addVertex","al","startLabel","MinMaxDist","MaxRadiusDist","Predicates","getCurrentStructureProperties","withSameAtomProperties","propertySource","propSet","getSelectionProperties","currentProps","areIntersectedBy","within","minRadius","targetLookup","withinRadius","withinMaxRadiusLookup","targetStructure","checkStructureMaxRadiusDistance","withinMaxRadius","checkStructureMinMaxDistance","withinMinMaxRadius","isConnectedTo","disjunct","connCtx","input","inputUnit","bondedUnits","buCount","srcElements","inputElements","inputIndex","lu","bElements","bi","_bi","checkConnected","queries","selections","pivotIndex","pivotLength","pivotSet","pI","countQuery","Result","inUnit","withinRange","BelowMin","WithinMax","Miss","toPoint","iu","tp","_false","gt","Queries","filters","modifiers","combinators","atomset","Space","axisOrderSlowToFast","layout","axisOrderFastToSlow","accessDimensions","defaultCtor","Layout","getCoords","accessors","uv","acc","reorder","Data1","RowMajorMatrix","toVec4","invertAxisOrder","convertToCanonicalAxisIndicesFastToSlow","convertToCanonicalAxisIndicesSlowToFast","AtomName","BondFlag","BondFlags","SecondaryStructureFlag","SecondaryStructureFlags","RingFingerprint","ObjectPrimitive","ResidueId","ElementSet","ElementSelection","ElementReference","atomProp","bondProp","bondFlags","ringFingerprint","secondaryStructureFlags","authResidueId","labelResidueId","slot","elementSetReduce","queryInSelection","queryEach","cluster","intersectedBy","distanceCluster","initial","vdw","mass","atomKey","operatorKey","modelEntryId","connectedComponentKey","residueKey","isHet","entitySubtype","entityPrdId","entityDescription","secondaryStructureKey","isModified","modifiedParentName","bondProperty","CustomModelProperty","hypot","svd","W","at","_n","amt","wmt","vmt","At","astep","_W","Vt","vstep","n1","iter","maxIter","Ai","Aj","Vi","Vj","t0","sd","val0","asum","JacobiSVDImpl","PrincipalAxes","points","n3","mean","meanRows","pointsM","subRows","pointsT","multiplyABt","momentsAxes","boxAxes","calculateBoxAxes","tmpBoxVec","d1a","d1b","d2a","d2b","d3a","d3b","projectPointOnVector","dp1","dt1","dp2","dt2","dp3","dt3","okDirA","okDirB","okDirC","addCornerHelper","d3","halfPI","PiDiv180","degToRad","deg","radToDeg","isPowerOfTwo","absMax","arcLength","spiral2d","deltaX","deltaY","halfSize","prevDeltaX","VERSION","getDataType","isSignedIntegerDataType","InterUnitGraph","emptyArray","edgeKeyIndex","getEdgeUnitKey","getEdgeIndexKey","hasEdge","vertexKeyIndex","getVertexKey","pairEdgesArray","pairEdges","edgeInfo","edgeUnitKey","edgeIndexKey","vertexKey","hasEdges","edgeMap","areUnitsOrdered","addMapEntry","mapAB","mapBA","linkedA","linkedB","linkCount","getModelMmCifCategory","getUniqueEntityIndicesFromStructures","createCategory","uniqueEntityIds","getUniqueEntityIdsFromStructures","getCategoryInstance","CifExportContext","structureArray","_Filters","AtomSitePositionsFieldNames","Quat","setAxisAngle","aw","omega","cosom","sinom","scale0","scale1","bw","fromMat3","fTrace","fRoot","out_axis","multiply","rotateX","rotateY","rotateZ","calculateW","invDot","conjugate","m3tmp","c3","s2","s3","fromUnitVec3Temp","fromUnitVec3","m4tmp","fromBasis","rotTmpVec3","rotTmpVec3UnitX","rotTmpVec3UnitY","rotationTo","sqlerpTemp1","sqlerpTemp2","sqlerp","axesTmpMat","setAxes","up","splitCamelCase","camelCaseToWords","capitalize","upperCase","upperCaseAny","splitSnakeCase","splitKebabCase","stringToWords","substringStartsWith","stripTags","escapeRegExp","Task","Impl","fail","object","normalizeTable","_normalizeTable","symbolList","_symbolList","formatKey","toLocaleLowerCase","currentNs","newNs","childKey","Anisotrop","U_esd","AtomSiteAnisotrop","ansioId","atomIdToElement","getElementToAnsiotropFromLabel","atomLabel","ansioLabel","atomLabelToElement","RUNNING_IN_NODEJS","versions","File_","File_NodeJs","blob","contentType","text","fileBits","fileName","lastModified","webkitRelativePath","getFile","idFactory","firstId","_nextId","mmCIF_chemComp_schema","BasicSchema","createBasic","perf","hrtime","formatTimespan","includeMsZeroes","ms","utf8Write","codePoint","__chars","throwError","utf8Decoder","TextDecoder","utf8Read","chunkOffset","_utf8Read","utf8ReadLong","fromUtf8Data","utf8ByteCount","binarySearchRange","indexOfInRange","aSize","binarySearchPredIndexRange","mid","startI","getSuitableIntersectionRange","getCommonCount","sJ","_maxIntRangeRet","la","lb","ratio","SortedArray","Bundle","_elements","elementGroups","getUnitsFromIds","elementToExpression","fromSubStructure","fromSelection","_indices","rangesSize","_units","ue","setSize","AtomsSchema","ResiduesSchema","ChainsSchema","AtomicIndex","AtomicHierarchy","chainResidueCount","residueFirstAtomIndex","atomChainIndex","residueChainIndex","isProductionMode","isDebugMode","DEBUG","isTimingMode","consoleStatsProviders","addConsoleStatsProvider","removeConsoleStatsProvider","bE","SyncRuntimeContext","SaccharideNames","SaccharideShape","SaccharideColors","Blue","Green","Yellow","Orange","Pink","Purple","LightBlue","Brown","Red","Secondary","SaccharideType","Hexose","HexNAc","Hexosamine","Hexuronate","Deoxyhexose","DeoxyhexNAc","DiDeoxyhexose","Pentose","Deoxynonulosonate","DiDeoxynonulosonate","Assigned","SaccharideTypeShapeMap","FilledSphere","FilledCube","CrossedCube","DividedDiamond","FilledCone","DevidedCone","FlatBox","FilledStar","FilledDiamond","FlatDiamond","FlatHexagon","Pentagon","getSaccharideShape","ringMemberCount","DiamondPrism","PentagonalPrism","HexagonalPrism","HeptagonalPrism","UnknownSaccharideComponent","abbr","Monosaccharides","SaccharidesSnfgMap","saccharide","MonosaccharidesColorTable","CommonSaccharideNames","Glc","Man","Gal","Gul","Alt","All","Tal","Ido","GlcNAc","ManNAc","GalNAc","GulNAc","AltNAc","AllNAc","TalNAc","IdoNAc","GlcN","ManN","GalN","GulN","AltN","AllN","TalN","IdoN","GlcA","ManA","GalA","GulA","AltA","AllA","TalA","IdoA","Qui","Rha","Fuc","QuiNAc","RhaNAc","FucNAc","Oli","Tyv","Abe","Par","Dig","Col","Ara","Lyx","Xyl","Rib","Kdn","Neu5Ac","Neu5Gc","Neu","Sia","Pse","Leg","Aci","Bac","LDmanHep","Kdo","Dha","DDmanHep","MurNAc","MurNGc","Mur","Api","Fru","Tag","Sor","Psi","CharmmSaccharideNames","GlycamSaccharideNames","AAT","Ara4N","Fus","DDmanpHep","LDmanpHep","K3O","dUA","GlcNS","DefaultSaccharideCompIdMap","common","charmm","GlycamSaccharideCompIdMap","glycam","setSaccharideCompIdMapType","SaccharideCompIdMap","makeZero","nrows","ncols","md","mtd","mi","mti","matA","matB","mrows","ad","bd","cd","matAp","outP","pMatA","ModelSecondaryStructure","assignSecondaryStructureEntry","resStart","resEnd","endSeqId","endInsCode","seqNumber","conf","sheetRange","getCoordinateType","beg_label_asym_id","pdbx_beg_PDB_ins_code","pdbx_end_PDB_ins_code","pdbx_PDB_helix_class","conf_type_id","beg_seq_id","end_seq_id","helix_class","startSeqId","startInsCode","addHelices","sheetCount","sheet_id","sheet_id_key","currentKey","addSheets","secStruct","entryList","assignSecondaryStructureRanges","Constants","computeRings","largestResidue","startVertex","endVertex","isRingAtom","marked","queue","MaxDepth","currentColor","currentAltLoc","hasAltLoc","currentRings","State","processResidue","resetState","resetDepth","isStartIndex","bondOffset","bStart","altLocs","findRings","addRing","leftOffset","rightOffset","ringOffset","top","newDepth","getMinimalRotation","buildFinderprint","UnitRing","UnitRings","elementRingIndices","containedRings","rJ","ringComponentIndex","ringComponents","createIndex","_byFingerprint","fingerprint","createByFingerprint","_aromaticRings","isAromatic","getAromaticRings","ringResidueIdx","addSingleResidueRings","byFp","reversed","rotNormal","rotReversed","isNormalSmaller","getFingerprint","AromaticRingElements","N","SI","GE","AS","SN","SB","BI","aromaticBondCount","hasAromaticRingElement","_fI","parseIntSkipLeadingWhitespace","_start","neg","parseScientific","main","parseFloatSkipLeadingWhitespace","NumberTypes","Scientific","StringLike","MAX_STRING_LENGTH","ChunkedBigString","_length","logStringChunkSize","_chunks","_tmpArray","STRING_CHUNK_SIZE","STRING_CHUNK_SHIFT","STRING_CHUNK_MASK","fromString","content","_append","fromStrings","inputChunk","bufferChunkSize","stringChunks","readStart","readEnd","stringChunk","inputPtr","_getChunkIndex","_getIndexInChunk","_isOutOfRange","iChunk","indexInChunk","start_","end_","iFirstChunk","indexInChunkFrom","iLastChunk","indexInChunkTo","_getTmpArray","searchString","positionInChunk","IndexPairBonds","DefaultProps","getEdgeIndexForOperators","opI","opJ","setZero","tryInvert","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","getScaling","m11","m12","m13","m21","m22","m23","m31","m32","m33","extractRotation","scaleX","scaleY","scaleZ","mulOffset","oOut","oA","oB","mul3","rotate","scaleUniformly","fromScaling","fromUniformScaling","_v3pa","_v3pb","fromPlane","tangent0","unitX","unitY","tangent1","quaternion","x2","y2","xy","xz","yz","wx","wy","wz","sx","sy","sz","_v3","decompose","invSX","invSY","invSZ","getDecomposition","makeTable","det3x3","_isRotationAndTranslation","isTranslationAndUniformScaling","_isTranslationAndUniformScaling","fromQuat","yx","zx","zy","ae","af","be","bf","ce","cf","de","df","ac","bc","perspective","bottom","near","far","ortho","lookAt","eye","x0","x1","y0","y1","z0","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","fromPermutation","perm","scaleXSq","scaleYSq","scaleZSq","extractBasis","xAxis","yAxis","zAxis","rotX90","rotX180","rotY90","rotY180","rotY270","rotZ90","rotZ180","rotXY90","rotZY90","rotZYZ90","rotZ90X180","rotY90Z180","Elements","ElementNames","HE","LI","BE","F","NE","MG","AL","CL","AR","K","CA","SC","TI","CR","MN","FE","CO","NI","CU","ZN","GA","SE","BR","KR","RB","SR","Y","ZR","NB","MO","TC","RU","RH","PD","AG","CD","IN","TE","XE","CS","BA","LA","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","TM","YB","LU","HF","TA","RE","OS","IR","PT","AU","HG","TL","PB","PO","AT","RN","FR","RA","AC","TH","PA","NP","PU","AM","CM","BK","CF","ES","FM","NO","LR","RF","DB","SG","BH","HS","MT","DS","RG","CN","NH","FL","MC","LV","TS","OG","AlkaliMetals","AlkalineEarthMetals","PostTransitionMetals","Halogens","isHalogen","isTransitionMetal","no","isAlkaliMetal","isAlkalineEarthMetal","isLanthanide","isActinide","isPostTransitionMetal","Rgb","Hsl","hex","ColorMap","getAdjustedColorMap","saturation","lightness","adjustedMap","ColorSwatch","hexColor","rgb","_rgb","hsl","minRgb","maxRgb","_t3","t3","h_","col1","col2","xyz0","xyz1","hue0","sat0","lbv0","hue1","sat1","lbv1","sat","hue","dh","lbv","fromNormalizedRgb","toStyle","toHexStyle","toHexString","toRgbString","toRgbNormalized","fromHexStyle","fromHexString","fromNormalizedArray","fromColorListEntry","toVec3Normalized","g1","_interpolateHsl1","_interpolateHsl2","interpolateHsl","hsl1","hsl2","_luminance","luminance","_sRGBToLinear","_linearToSRGB","contrast","l1","sRGBToLinear","linearToSRGB","_isFinite","negate","slerpRelVec","denominator","theta","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","transformMat4Offset","outO","aO","oM","transformDirectionOffset","transformQuat","qx","qy","qz","qw","iw","tmp_dh_ab","tmp_dh_cb","tmp_dh_bc","tmp_dh_dc","tmp_dh_abc","tmp_dh_bcd","tmp_dh_cross","_angle","directionFromSpherical","inclination","azimuth","rotTemp","makeRotation","unitZ","tmpProjectPlane","projectOnVector","projectPointOnPlane","tmpProject","projectOnPlane","matchDirection","orthogonalDirection","triangleNormalTmpAB","triangleNormalTmpAC","triangleNormal","centerTmpV","negUnit","negUnitX","negUnitY","negUnitZ","Symmetry","Assembly","_operators","operatorsProvider","getUnitcellLabel","StructureSelection","toLociWithCurrentUnits","_unit","LinearBuilderImpl","HashBuilderImpl","uniqueSets","ObjectKeys","assertUnreachable","isPromiseLike","then","ArrayEncoder","ArrayEncoding","ArrayEncoderImpl","providers","encodings","getProvider","intervalQuantizaiton","writers","setFloat32","byteSizes","uint8","packingSizeUnsigned","packingSizeSigned","_fixedPoint","arrayType","_intervalQuantizaiton","fullLength","packing","isSigned","size8","size16","bytesPerElement","determinePacking","packed","_integerPacking","accLength","offsetArray","encodedOddsets"],"sourceRoot":""}